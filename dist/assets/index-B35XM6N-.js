(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const a of l)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(l){const a={};return l.integrity&&(a.integrity=l.integrity),l.referrerPolicy&&(a.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?a.credentials="include":l.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(l){if(l.ep)return;l.ep=!0;const a=t(l);fetch(l.href,a)}})();function Xh(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Lf={exports:{}},Jl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ux;function SN(){if(Ux)return Jl;Ux=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,l,a){var c=null;if(a!==void 0&&(c=""+a),l.key!==void 0&&(c=""+l.key),"key"in l){a={};for(var d in l)d!=="key"&&(a[d]=l[d])}else a=l;return l=a.ref,{$$typeof:n,type:s,key:c,ref:l!==void 0?l:null,props:a}}return Jl.Fragment=e,Jl.jsx=t,Jl.jsxs=t,Jl}var Px;function NN(){return Px||(Px=1,Lf.exports=SN()),Lf.exports}var f=NN(),Bf={exports:{}},ve={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ix;function wN(){if(Ix)return ve;Ix=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.iterator;function b(T){return T===null||typeof T!="object"?null:(T=y&&T[y]||T["@@iterator"],typeof T=="function"?T:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,w={};function k(T,_,F){this.props=T,this.context=_,this.refs=w,this.updater=F||S}k.prototype.isReactComponent={},k.prototype.setState=function(T,_){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,_,"setState")},k.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function E(){}E.prototype=k.prototype;function O(T,_,F){this.props=T,this.context=_,this.refs=w,this.updater=F||S}var z=O.prototype=new E;z.constructor=O,v(z,k.prototype),z.isPureReactComponent=!0;var q=Array.isArray,D={H:null,A:null,T:null,S:null,V:null},I=Object.prototype.hasOwnProperty;function L(T,_,F,Q,X,ae){return F=ae.ref,{$$typeof:n,type:T,key:_,ref:F!==void 0?F:null,props:ae}}function G(T,_){return L(T.type,_,void 0,void 0,void 0,T.props)}function ne(T){return typeof T=="object"&&T!==null&&T.$$typeof===n}function se(T){var _={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(F){return _[F]})}var ue=/\/+/g;function Z(T,_){return typeof T=="object"&&T!==null&&T.key!=null?se(""+T.key):_.toString(36)}function ye(){}function ge(T){switch(T.status){case"fulfilled":return T.value;case"rejected":throw T.reason;default:switch(typeof T.status=="string"?T.then(ye,ye):(T.status="pending",T.then(function(_){T.status==="pending"&&(T.status="fulfilled",T.value=_)},function(_){T.status==="pending"&&(T.status="rejected",T.reason=_)})),T.status){case"fulfilled":return T.value;case"rejected":throw T.reason}}throw T}function Te(T,_,F,Q,X){var ae=typeof T;(ae==="undefined"||ae==="boolean")&&(T=null);var ie=!1;if(T===null)ie=!0;else switch(ae){case"bigint":case"string":case"number":ie=!0;break;case"object":switch(T.$$typeof){case n:case e:ie=!0;break;case g:return ie=T._init,Te(ie(T._payload),_,F,Q,X)}}if(ie)return X=X(T),ie=Q===""?"."+Z(T,0):Q,q(X)?(F="",ie!=null&&(F=ie.replace(ue,"$&/")+"/"),Te(X,_,F,"",function(Ft){return Ft})):X!=null&&(ne(X)&&(X=G(X,F+(X.key==null||T&&T.key===X.key?"":(""+X.key).replace(ue,"$&/")+"/")+ie)),_.push(X)),1;ie=0;var it=Q===""?".":Q+":";if(q(T))for(var De=0;De<T.length;De++)Q=T[De],ae=it+Z(Q,De),ie+=Te(Q,_,F,ae,X);else if(De=b(T),typeof De=="function")for(T=De.call(T),De=0;!(Q=T.next()).done;)Q=Q.value,ae=it+Z(Q,De++),ie+=Te(Q,_,F,ae,X);else if(ae==="object"){if(typeof T.then=="function")return Te(ge(T),_,F,Q,X);throw _=String(T),Error("Objects are not valid as a React child (found: "+(_==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":_)+"). If you meant to render a collection of children, use an array instead.")}return ie}function P(T,_,F){if(T==null)return T;var Q=[],X=0;return Te(T,Q,"","",function(ae){return _.call(F,ae,X++)}),Q}function te(T){if(T._status===-1){var _=T._result;_=_(),_.then(function(F){(T._status===0||T._status===-1)&&(T._status=1,T._result=F)},function(F){(T._status===0||T._status===-1)&&(T._status=2,T._result=F)}),T._status===-1&&(T._status=0,T._result=_)}if(T._status===1)return T._result.default;throw T._result}var re=typeof reportError=="function"?reportError:function(T){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var _=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof T=="object"&&T!==null&&typeof T.message=="string"?String(T.message):String(T),error:T});if(!window.dispatchEvent(_))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",T);return}console.error(T)};function K(){}return ve.Children={map:P,forEach:function(T,_,F){P(T,function(){_.apply(this,arguments)},F)},count:function(T){var _=0;return P(T,function(){_++}),_},toArray:function(T){return P(T,function(_){return _})||[]},only:function(T){if(!ne(T))throw Error("React.Children.only expected to receive a single React element child.");return T}},ve.Component=k,ve.Fragment=t,ve.Profiler=l,ve.PureComponent=O,ve.StrictMode=s,ve.Suspense=h,ve.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,ve.__COMPILER_RUNTIME={__proto__:null,c:function(T){return D.H.useMemoCache(T)}},ve.cache=function(T){return function(){return T.apply(null,arguments)}},ve.cloneElement=function(T,_,F){if(T==null)throw Error("The argument must be a React element, but you passed "+T+".");var Q=v({},T.props),X=T.key,ae=void 0;if(_!=null)for(ie in _.ref!==void 0&&(ae=void 0),_.key!==void 0&&(X=""+_.key),_)!I.call(_,ie)||ie==="key"||ie==="__self"||ie==="__source"||ie==="ref"&&_.ref===void 0||(Q[ie]=_[ie]);var ie=arguments.length-2;if(ie===1)Q.children=F;else if(1<ie){for(var it=Array(ie),De=0;De<ie;De++)it[De]=arguments[De+2];Q.children=it}return L(T.type,X,void 0,void 0,ae,Q)},ve.createContext=function(T){return T={$$typeof:c,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null},T.Provider=T,T.Consumer={$$typeof:a,_context:T},T},ve.createElement=function(T,_,F){var Q,X={},ae=null;if(_!=null)for(Q in _.key!==void 0&&(ae=""+_.key),_)I.call(_,Q)&&Q!=="key"&&Q!=="__self"&&Q!=="__source"&&(X[Q]=_[Q]);var ie=arguments.length-2;if(ie===1)X.children=F;else if(1<ie){for(var it=Array(ie),De=0;De<ie;De++)it[De]=arguments[De+2];X.children=it}if(T&&T.defaultProps)for(Q in ie=T.defaultProps,ie)X[Q]===void 0&&(X[Q]=ie[Q]);return L(T,ae,void 0,void 0,null,X)},ve.createRef=function(){return{current:null}},ve.forwardRef=function(T){return{$$typeof:d,render:T}},ve.isValidElement=ne,ve.lazy=function(T){return{$$typeof:g,_payload:{_status:-1,_result:T},_init:te}},ve.memo=function(T,_){return{$$typeof:p,type:T,compare:_===void 0?null:_}},ve.startTransition=function(T){var _=D.T,F={};D.T=F;try{var Q=T(),X=D.S;X!==null&&X(F,Q),typeof Q=="object"&&Q!==null&&typeof Q.then=="function"&&Q.then(K,re)}catch(ae){re(ae)}finally{D.T=_}},ve.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},ve.use=function(T){return D.H.use(T)},ve.useActionState=function(T,_,F){return D.H.useActionState(T,_,F)},ve.useCallback=function(T,_){return D.H.useCallback(T,_)},ve.useContext=function(T){return D.H.useContext(T)},ve.useDebugValue=function(){},ve.useDeferredValue=function(T,_){return D.H.useDeferredValue(T,_)},ve.useEffect=function(T,_,F){var Q=D.H;if(typeof F=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Q.useEffect(T,_)},ve.useId=function(){return D.H.useId()},ve.useImperativeHandle=function(T,_,F){return D.H.useImperativeHandle(T,_,F)},ve.useInsertionEffect=function(T,_){return D.H.useInsertionEffect(T,_)},ve.useLayoutEffect=function(T,_){return D.H.useLayoutEffect(T,_)},ve.useMemo=function(T,_){return D.H.useMemo(T,_)},ve.useOptimistic=function(T,_){return D.H.useOptimistic(T,_)},ve.useReducer=function(T,_,F){return D.H.useReducer(T,_,F)},ve.useRef=function(T){return D.H.useRef(T)},ve.useState=function(T){return D.H.useState(T)},ve.useSyncExternalStore=function(T,_,F){return D.H.useSyncExternalStore(T,_,F)},ve.useTransition=function(){return D.H.useTransition()},ve.version="19.1.0",ve}var Vx;function Zh(){return Vx||(Vx=1,Bf.exports=wN()),Bf.exports}var C=Zh();const Et=Xh(C);var _f={exports:{}},Ql={},Hf={exports:{}},Uf={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qx;function kN(){return qx||(qx=1,function(n){function e(P,te){var re=P.length;P.push(te);e:for(;0<re;){var K=re-1>>>1,T=P[K];if(0<l(T,te))P[K]=te,P[re]=T,re=K;else break e}}function t(P){return P.length===0?null:P[0]}function s(P){if(P.length===0)return null;var te=P[0],re=P.pop();if(re!==te){P[0]=re;e:for(var K=0,T=P.length,_=T>>>1;K<_;){var F=2*(K+1)-1,Q=P[F],X=F+1,ae=P[X];if(0>l(Q,re))X<T&&0>l(ae,Q)?(P[K]=ae,P[X]=re,K=X):(P[K]=Q,P[F]=re,K=F);else if(X<T&&0>l(ae,re))P[K]=ae,P[X]=re,K=X;else break e}}return te}function l(P,te){var re=P.sortIndex-te.sortIndex;return re!==0?re:P.id-te.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var h=[],p=[],g=1,y=null,b=3,S=!1,v=!1,w=!1,k=!1,E=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;function q(P){for(var te=t(p);te!==null;){if(te.callback===null)s(p);else if(te.startTime<=P)s(p),te.sortIndex=te.expirationTime,e(h,te);else break;te=t(p)}}function D(P){if(w=!1,q(P),!v)if(t(h)!==null)v=!0,I||(I=!0,Z());else{var te=t(p);te!==null&&Te(D,te.startTime-P)}}var I=!1,L=-1,G=5,ne=-1;function se(){return k?!0:!(n.unstable_now()-ne<G)}function ue(){if(k=!1,I){var P=n.unstable_now();ne=P;var te=!0;try{e:{v=!1,w&&(w=!1,O(L),L=-1),S=!0;var re=b;try{t:{for(q(P),y=t(h);y!==null&&!(y.expirationTime>P&&se());){var K=y.callback;if(typeof K=="function"){y.callback=null,b=y.priorityLevel;var T=K(y.expirationTime<=P);if(P=n.unstable_now(),typeof T=="function"){y.callback=T,q(P),te=!0;break t}y===t(h)&&s(h),q(P)}else s(h);y=t(h)}if(y!==null)te=!0;else{var _=t(p);_!==null&&Te(D,_.startTime-P),te=!1}}break e}finally{y=null,b=re,S=!1}te=void 0}}finally{te?Z():I=!1}}}var Z;if(typeof z=="function")Z=function(){z(ue)};else if(typeof MessageChannel<"u"){var ye=new MessageChannel,ge=ye.port2;ye.port1.onmessage=ue,Z=function(){ge.postMessage(null)}}else Z=function(){E(ue,0)};function Te(P,te){L=E(function(){P(n.unstable_now())},te)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(P){P.callback=null},n.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<P?Math.floor(1e3/P):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_next=function(P){switch(b){case 1:case 2:case 3:var te=3;break;default:te=b}var re=b;b=te;try{return P()}finally{b=re}},n.unstable_requestPaint=function(){k=!0},n.unstable_runWithPriority=function(P,te){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var re=b;b=P;try{return te()}finally{b=re}},n.unstable_scheduleCallback=function(P,te,re){var K=n.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?K+re:K):re=K,P){case 1:var T=-1;break;case 2:T=250;break;case 5:T=1073741823;break;case 4:T=1e4;break;default:T=5e3}return T=re+T,P={id:g++,callback:te,priorityLevel:P,startTime:re,expirationTime:T,sortIndex:-1},re>K?(P.sortIndex=re,e(p,P),t(h)===null&&P===t(p)&&(w?(O(L),L=-1):w=!0,Te(D,re-K))):(P.sortIndex=T,e(h,P),v||S||(v=!0,I||(I=!0,Z()))),P},n.unstable_shouldYield=se,n.unstable_wrapCallback=function(P){var te=b;return function(){var re=b;b=te;try{return P.apply(this,arguments)}finally{b=re}}}}(Uf)),Uf}var Fx;function jN(){return Fx||(Fx=1,Hf.exports=kN()),Hf.exports}var Pf={exports:{}},jt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $x;function CN(){if($x)return jt;$x=1;var n=Zh();function e(h){var p="https://react.dev/errors/"+h;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)p+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+h+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},l=Symbol.for("react.portal");function a(h,p,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:y==null?null:""+y,children:h,containerInfo:p,implementation:g}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(h,p){if(h==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return jt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,jt.createPortal=function(h,p){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return a(h,p,null,g)},jt.flushSync=function(h){var p=c.T,g=s.p;try{if(c.T=null,s.p=2,h)return h()}finally{c.T=p,s.p=g,s.d.f()}},jt.preconnect=function(h,p){typeof h=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(h,p))},jt.prefetchDNS=function(h){typeof h=="string"&&s.d.D(h)},jt.preinit=function(h,p){if(typeof h=="string"&&p&&typeof p.as=="string"){var g=p.as,y=d(g,p.crossOrigin),b=typeof p.integrity=="string"?p.integrity:void 0,S=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;g==="style"?s.d.S(h,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:y,integrity:b,fetchPriority:S}):g==="script"&&s.d.X(h,{crossOrigin:y,integrity:b,fetchPriority:S,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},jt.preinitModule=function(h,p){if(typeof h=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var g=d(p.as,p.crossOrigin);s.d.M(h,{crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(h)},jt.preload=function(h,p){if(typeof h=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var g=p.as,y=d(g,p.crossOrigin);s.d.L(h,g,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},jt.preloadModule=function(h,p){if(typeof h=="string")if(p){var g=d(p.as,p.crossOrigin);s.d.m(h,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(h)},jt.requestFormReset=function(h){s.d.r(h)},jt.unstable_batchedUpdates=function(h,p){return h(p)},jt.useFormState=function(h,p,g){return c.H.useFormState(h,p,g)},jt.useFormStatus=function(){return c.H.useHostTransitionStatus()},jt.version="19.1.0",jt}var Gx;function Ab(){if(Gx)return Pf.exports;Gx=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Pf.exports=CN(),Pf.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yx;function EN(){if(Yx)return Ql;Yx=1;var n=jN(),e=Zh(),t=Ab();function s(r){var i="https://react.dev/errors/"+r;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function a(r){var i=r,o=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(o=i.return),r=i.return;while(r)}return i.tag===3?o:null}function c(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function d(r){if(a(r)!==r)throw Error(s(188))}function h(r){var i=r.alternate;if(!i){if(i=a(r),i===null)throw Error(s(188));return i!==r?null:r}for(var o=r,u=i;;){var m=o.return;if(m===null)break;var x=m.alternate;if(x===null){if(u=m.return,u!==null){o=u;continue}break}if(m.child===x.child){for(x=m.child;x;){if(x===o)return d(m),r;if(x===u)return d(m),i;x=x.sibling}throw Error(s(188))}if(o.return!==u.return)o=m,u=x;else{for(var N=!1,j=m.child;j;){if(j===o){N=!0,o=m,u=x;break}if(j===u){N=!0,u=m,o=x;break}j=j.sibling}if(!N){for(j=x.child;j;){if(j===o){N=!0,o=x,u=m;break}if(j===u){N=!0,u=x,o=m;break}j=j.sibling}if(!N)throw Error(s(189))}}if(o.alternate!==u)throw Error(s(190))}if(o.tag!==3)throw Error(s(188));return o.stateNode.current===o?r:i}function p(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r;for(r=r.child;r!==null;){if(i=p(r),i!==null)return i;r=r.sibling}return null}var g=Object.assign,y=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),O=Symbol.for("react.consumer"),z=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),G=Symbol.for("react.lazy"),ne=Symbol.for("react.activity"),se=Symbol.for("react.memo_cache_sentinel"),ue=Symbol.iterator;function Z(r){return r===null||typeof r!="object"?null:(r=ue&&r[ue]||r["@@iterator"],typeof r=="function"?r:null)}var ye=Symbol.for("react.client.reference");function ge(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===ye?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case v:return"Fragment";case k:return"Profiler";case w:return"StrictMode";case D:return"Suspense";case I:return"SuspenseList";case ne:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case S:return"Portal";case z:return(r.displayName||"Context")+".Provider";case O:return(r._context.displayName||"Context")+".Consumer";case q:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case L:return i=r.displayName||null,i!==null?i:ge(r.type)||"Memo";case G:i=r._payload,r=r._init;try{return ge(r(i))}catch{}}return null}var Te=Array.isArray,P=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re={pending:!1,data:null,method:null,action:null},K=[],T=-1;function _(r){return{current:r}}function F(r){0>T||(r.current=K[T],K[T]=null,T--)}function Q(r,i){T++,K[T]=r.current,r.current=i}var X=_(null),ae=_(null),ie=_(null),it=_(null);function De(r,i){switch(Q(ie,i),Q(ae,r),Q(X,null),i.nodeType){case 9:case 11:r=(r=i.documentElement)&&(r=r.namespaceURI)?hx(r):0;break;default:if(r=i.tagName,i=i.namespaceURI)i=hx(i),r=px(i,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}F(X),Q(X,r)}function Ft(){F(X),F(ae),F(ie)}function Vs(r){r.memoizedState!==null&&Q(it,r);var i=X.current,o=px(i,r.type);i!==o&&(Q(ae,r),Q(X,o))}function Bt(r){ae.current===r&&(F(X),F(ae)),it.current===r&&(F(it),Fl._currentValue=re)}var vu=Object.prototype.hasOwnProperty,Su=n.unstable_scheduleCallback,Nu=n.unstable_cancelCallback,Wv=n.unstable_shouldYield,eS=n.unstable_requestPaint,En=n.unstable_now,tS=n.unstable_getCurrentPriorityLevel,Yp=n.unstable_ImmediatePriority,Kp=n.unstable_UserBlockingPriority,La=n.unstable_NormalPriority,nS=n.unstable_LowPriority,Jp=n.unstable_IdlePriority,rS=n.log,sS=n.unstable_setDisableYieldValue,Zi=null,$t=null;function hr(r){if(typeof rS=="function"&&sS(r),$t&&typeof $t.setStrictMode=="function")try{$t.setStrictMode(Zi,r)}catch{}}var Gt=Math.clz32?Math.clz32:aS,iS=Math.log,lS=Math.LN2;function aS(r){return r>>>=0,r===0?32:31-(iS(r)/lS|0)|0}var Ba=256,_a=4194304;function ns(r){var i=r&42;if(i!==0)return i;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Ha(r,i,o){var u=r.pendingLanes;if(u===0)return 0;var m=0,x=r.suspendedLanes,N=r.pingedLanes;r=r.warmLanes;var j=u&134217727;return j!==0?(u=j&~x,u!==0?m=ns(u):(N&=j,N!==0?m=ns(N):o||(o=j&~r,o!==0&&(m=ns(o))))):(j=u&~x,j!==0?m=ns(j):N!==0?m=ns(N):o||(o=u&~r,o!==0&&(m=ns(o)))),m===0?0:i!==0&&i!==m&&(i&x)===0&&(x=m&-m,o=i&-i,x>=o||x===32&&(o&4194048)!==0)?i:m}function Wi(r,i){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&i)===0}function oS(r,i){switch(r){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qp(){var r=Ba;return Ba<<=1,(Ba&4194048)===0&&(Ba=256),r}function Xp(){var r=_a;return _a<<=1,(_a&62914560)===0&&(_a=4194304),r}function wu(r){for(var i=[],o=0;31>o;o++)i.push(r);return i}function el(r,i){r.pendingLanes|=i,i!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function cS(r,i,o,u,m,x){var N=r.pendingLanes;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=o,r.entangledLanes&=o,r.errorRecoveryDisabledLanes&=o,r.shellSuspendCounter=0;var j=r.entanglements,A=r.expirationTimes,H=r.hiddenUpdates;for(o=N&~o;0<o;){var $=31-Gt(o),J=1<<$;j[$]=0,A[$]=-1;var U=H[$];if(U!==null)for(H[$]=null,$=0;$<U.length;$++){var V=U[$];V!==null&&(V.lane&=-536870913)}o&=~J}u!==0&&Zp(r,u,0),x!==0&&m===0&&r.tag!==0&&(r.suspendedLanes|=x&~(N&~i))}function Zp(r,i,o){r.pendingLanes|=i,r.suspendedLanes&=~i;var u=31-Gt(i);r.entangledLanes|=i,r.entanglements[u]=r.entanglements[u]|1073741824|o&4194090}function Wp(r,i){var o=r.entangledLanes|=i;for(r=r.entanglements;o;){var u=31-Gt(o),m=1<<u;m&i|r[u]&i&&(r[u]|=i),o&=~m}}function ku(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function ju(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function em(){var r=te.p;return r!==0?r:(r=window.event,r===void 0?32:Dx(r.type))}function uS(r,i){var o=te.p;try{return te.p=r,i()}finally{te.p=o}}var pr=Math.random().toString(36).slice(2),wt="__reactFiber$"+pr,_t="__reactProps$"+pr,qs="__reactContainer$"+pr,Cu="__reactEvents$"+pr,dS="__reactListeners$"+pr,fS="__reactHandles$"+pr,tm="__reactResources$"+pr,tl="__reactMarker$"+pr;function Eu(r){delete r[wt],delete r[_t],delete r[Cu],delete r[dS],delete r[fS]}function Fs(r){var i=r[wt];if(i)return i;for(var o=r.parentNode;o;){if(i=o[qs]||o[wt]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(r=yx(r);r!==null;){if(o=r[wt])return o;r=yx(r)}return i}r=o,o=r.parentNode}return null}function $s(r){if(r=r[wt]||r[qs]){var i=r.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return r}return null}function nl(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r.stateNode;throw Error(s(33))}function Gs(r){var i=r[tm];return i||(i=r[tm]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function lt(r){r[tl]=!0}var nm=new Set,rm={};function rs(r,i){Ys(r,i),Ys(r+"Capture",i)}function Ys(r,i){for(rm[r]=i,r=0;r<i.length;r++)nm.add(i[r])}var hS=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),sm={},im={};function pS(r){return vu.call(im,r)?!0:vu.call(sm,r)?!1:hS.test(r)?im[r]=!0:(sm[r]=!0,!1)}function Ua(r,i,o){if(pS(i))if(o===null)r.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":r.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(i);return}}r.setAttribute(i,""+o)}}function Pa(r,i,o){if(o===null)r.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(i);return}r.setAttribute(i,""+o)}}function Un(r,i,o,u){if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttributeNS(i,o,""+u)}}var Au,lm;function Ks(r){if(Au===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);Au=i&&i[1]||"",lm=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Au+r+lm}var Tu=!1;function Mu(r,i){if(!r||Tu)return"";Tu=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var J=function(){throw Error()};if(Object.defineProperty(J.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(J,[])}catch(V){var U=V}Reflect.construct(r,[],J)}else{try{J.call()}catch(V){U=V}r.call(J.prototype)}}else{try{throw Error()}catch(V){U=V}(J=r())&&typeof J.catch=="function"&&J.catch(function(){})}}catch(V){if(V&&U&&typeof V.stack=="string")return[V.stack,U.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var x=u.DetermineComponentFrameRoot(),N=x[0],j=x[1];if(N&&j){var A=N.split(`
`),H=j.split(`
`);for(m=u=0;u<A.length&&!A[u].includes("DetermineComponentFrameRoot");)u++;for(;m<H.length&&!H[m].includes("DetermineComponentFrameRoot");)m++;if(u===A.length||m===H.length)for(u=A.length-1,m=H.length-1;1<=u&&0<=m&&A[u]!==H[m];)m--;for(;1<=u&&0<=m;u--,m--)if(A[u]!==H[m]){if(u!==1||m!==1)do if(u--,m--,0>m||A[u]!==H[m]){var $=`
`+A[u].replace(" at new "," at ");return r.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",r.displayName)),$}while(1<=u&&0<=m);break}}}finally{Tu=!1,Error.prepareStackTrace=o}return(o=r?r.displayName||r.name:"")?Ks(o):""}function mS(r){switch(r.tag){case 26:case 27:case 5:return Ks(r.type);case 16:return Ks("Lazy");case 13:return Ks("Suspense");case 19:return Ks("SuspenseList");case 0:case 15:return Mu(r.type,!1);case 11:return Mu(r.type.render,!1);case 1:return Mu(r.type,!0);case 31:return Ks("Activity");default:return""}}function am(r){try{var i="";do i+=mS(r),r=r.return;while(r);return i}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function rn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function om(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function gS(r){var i=om(r)?"checked":"value",o=Object.getOwnPropertyDescriptor(r.constructor.prototype,i),u=""+r[i];if(!r.hasOwnProperty(i)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var m=o.get,x=o.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return m.call(this)},set:function(N){u=""+N,x.call(this,N)}}),Object.defineProperty(r,i,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(N){u=""+N},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function Ia(r){r._valueTracker||(r._valueTracker=gS(r))}function cm(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var o=i.getValue(),u="";return r&&(u=om(r)?r.checked?"true":"false":r.value),r=u,r!==o?(i.setValue(r),!0):!1}function Va(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var xS=/[\n"\\]/g;function sn(r){return r.replace(xS,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Ou(r,i,o,u,m,x,N,j){r.name="",N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?r.type=N:r.removeAttribute("type"),i!=null?N==="number"?(i===0&&r.value===""||r.value!=i)&&(r.value=""+rn(i)):r.value!==""+rn(i)&&(r.value=""+rn(i)):N!=="submit"&&N!=="reset"||r.removeAttribute("value"),i!=null?Ru(r,N,rn(i)):o!=null?Ru(r,N,rn(o)):u!=null&&r.removeAttribute("value"),m==null&&x!=null&&(r.defaultChecked=!!x),m!=null&&(r.checked=m&&typeof m!="function"&&typeof m!="symbol"),j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?r.name=""+rn(j):r.removeAttribute("name")}function um(r,i,o,u,m,x,N,j){if(x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(r.type=x),i!=null||o!=null){if(!(x!=="submit"&&x!=="reset"||i!=null))return;o=o!=null?""+rn(o):"",i=i!=null?""+rn(i):o,j||i===r.value||(r.value=i),r.defaultValue=i}u=u??m,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=j?r.checked:!!u,r.defaultChecked=!!u,N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"&&(r.name=N)}function Ru(r,i,o){i==="number"&&Va(r.ownerDocument)===r||r.defaultValue===""+o||(r.defaultValue=""+o)}function Js(r,i,o,u){if(r=r.options,i){i={};for(var m=0;m<o.length;m++)i["$"+o[m]]=!0;for(o=0;o<r.length;o++)m=i.hasOwnProperty("$"+r[o].value),r[o].selected!==m&&(r[o].selected=m),m&&u&&(r[o].defaultSelected=!0)}else{for(o=""+rn(o),i=null,m=0;m<r.length;m++){if(r[m].value===o){r[m].selected=!0,u&&(r[m].defaultSelected=!0);return}i!==null||r[m].disabled||(i=r[m])}i!==null&&(i.selected=!0)}}function dm(r,i,o){if(i!=null&&(i=""+rn(i),i!==r.value&&(r.value=i),o==null)){r.defaultValue!==i&&(r.defaultValue=i);return}r.defaultValue=o!=null?""+rn(o):""}function fm(r,i,o,u){if(i==null){if(u!=null){if(o!=null)throw Error(s(92));if(Te(u)){if(1<u.length)throw Error(s(93));u=u[0]}o=u}o==null&&(o=""),i=o}o=rn(i),r.defaultValue=o,u=r.textContent,u===o&&u!==""&&u!==null&&(r.value=u)}function Qs(r,i){if(i){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=i;return}}r.textContent=i}var yS=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function hm(r,i,o){var u=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?r.setProperty(i,""):i==="float"?r.cssFloat="":r[i]="":u?r.setProperty(i,o):typeof o!="number"||o===0||yS.has(i)?i==="float"?r.cssFloat=o:r[i]=(""+o).trim():r[i]=o+"px"}function pm(r,i,o){if(i!=null&&typeof i!="object")throw Error(s(62));if(r=r.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var m in i)u=i[m],i.hasOwnProperty(m)&&o[m]!==u&&hm(r,m,u)}else for(var x in i)i.hasOwnProperty(x)&&hm(r,x,i[x])}function Du(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bS=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),vS=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function qa(r){return vS.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var zu=null;function Lu(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Xs=null,Zs=null;function mm(r){var i=$s(r);if(i&&(r=i.stateNode)){var o=r[_t]||null;e:switch(r=i.stateNode,i.type){case"input":if(Ou(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+sn(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var u=o[i];if(u!==r&&u.form===r.form){var m=u[_t]||null;if(!m)throw Error(s(90));Ou(u,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(i=0;i<o.length;i++)u=o[i],u.form===r.form&&cm(u)}break e;case"textarea":dm(r,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&Js(r,!!o.multiple,i,!1)}}}var Bu=!1;function gm(r,i,o){if(Bu)return r(i,o);Bu=!0;try{var u=r(i);return u}finally{if(Bu=!1,(Xs!==null||Zs!==null)&&(To(),Xs&&(i=Xs,r=Zs,Zs=Xs=null,mm(i),r)))for(i=0;i<r.length;i++)mm(r[i])}}function rl(r,i){var o=r.stateNode;if(o===null)return null;var u=o[_t]||null;if(u===null)return null;o=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(s(231,i,typeof o));return o}var Pn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_u=!1;if(Pn)try{var sl={};Object.defineProperty(sl,"passive",{get:function(){_u=!0}}),window.addEventListener("test",sl,sl),window.removeEventListener("test",sl,sl)}catch{_u=!1}var mr=null,Hu=null,Fa=null;function xm(){if(Fa)return Fa;var r,i=Hu,o=i.length,u,m="value"in mr?mr.value:mr.textContent,x=m.length;for(r=0;r<o&&i[r]===m[r];r++);var N=o-r;for(u=1;u<=N&&i[o-u]===m[x-u];u++);return Fa=m.slice(r,1<u?1-u:void 0)}function $a(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function Ga(){return!0}function ym(){return!1}function Ht(r){function i(o,u,m,x,N){this._reactName=o,this._targetInst=m,this.type=u,this.nativeEvent=x,this.target=N,this.currentTarget=null;for(var j in r)r.hasOwnProperty(j)&&(o=r[j],this[j]=o?o(x):x[j]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?Ga:ym,this.isPropagationStopped=ym,this}return g(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Ga)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Ga)},persist:function(){},isPersistent:Ga}),i}var ss={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ya=Ht(ss),il=g({},ss,{view:0,detail:0}),SS=Ht(il),Uu,Pu,ll,Ka=g({},il,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vu,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ll&&(ll&&r.type==="mousemove"?(Uu=r.screenX-ll.screenX,Pu=r.screenY-ll.screenY):Pu=Uu=0,ll=r),Uu)},movementY:function(r){return"movementY"in r?r.movementY:Pu}}),bm=Ht(Ka),NS=g({},Ka,{dataTransfer:0}),wS=Ht(NS),kS=g({},il,{relatedTarget:0}),Iu=Ht(kS),jS=g({},ss,{animationName:0,elapsedTime:0,pseudoElement:0}),CS=Ht(jS),ES=g({},ss,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),AS=Ht(ES),TS=g({},ss,{data:0}),vm=Ht(TS),MS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},OS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},RS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function DS(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=RS[r])?!!i[r]:!1}function Vu(){return DS}var zS=g({},il,{key:function(r){if(r.key){var i=MS[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=$a(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?OS[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vu,charCode:function(r){return r.type==="keypress"?$a(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?$a(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),LS=Ht(zS),BS=g({},Ka,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Sm=Ht(BS),_S=g({},il,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vu}),HS=Ht(_S),US=g({},ss,{propertyName:0,elapsedTime:0,pseudoElement:0}),PS=Ht(US),IS=g({},Ka,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),VS=Ht(IS),qS=g({},ss,{newState:0,oldState:0}),FS=Ht(qS),$S=[9,13,27,32],qu=Pn&&"CompositionEvent"in window,al=null;Pn&&"documentMode"in document&&(al=document.documentMode);var GS=Pn&&"TextEvent"in window&&!al,Nm=Pn&&(!qu||al&&8<al&&11>=al),wm=" ",km=!1;function jm(r,i){switch(r){case"keyup":return $S.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Cm(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Ws=!1;function YS(r,i){switch(r){case"compositionend":return Cm(i);case"keypress":return i.which!==32?null:(km=!0,wm);case"textInput":return r=i.data,r===wm&&km?null:r;default:return null}}function KS(r,i){if(Ws)return r==="compositionend"||!qu&&jm(r,i)?(r=xm(),Fa=Hu=mr=null,Ws=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Nm&&i.locale!=="ko"?null:i.data;default:return null}}var JS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Em(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!JS[r.type]:i==="textarea"}function Am(r,i,o,u){Xs?Zs?Zs.push(u):Zs=[u]:Xs=u,i=Lo(i,"onChange"),0<i.length&&(o=new Ya("onChange","change",null,o,u),r.push({event:o,listeners:i}))}var ol=null,cl=null;function QS(r){ox(r,0)}function Ja(r){var i=nl(r);if(cm(i))return r}function Tm(r,i){if(r==="change")return i}var Mm=!1;if(Pn){var Fu;if(Pn){var $u="oninput"in document;if(!$u){var Om=document.createElement("div");Om.setAttribute("oninput","return;"),$u=typeof Om.oninput=="function"}Fu=$u}else Fu=!1;Mm=Fu&&(!document.documentMode||9<document.documentMode)}function Rm(){ol&&(ol.detachEvent("onpropertychange",Dm),cl=ol=null)}function Dm(r){if(r.propertyName==="value"&&Ja(cl)){var i=[];Am(i,cl,r,Lu(r)),gm(QS,i)}}function XS(r,i,o){r==="focusin"?(Rm(),ol=i,cl=o,ol.attachEvent("onpropertychange",Dm)):r==="focusout"&&Rm()}function ZS(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Ja(cl)}function WS(r,i){if(r==="click")return Ja(i)}function e2(r,i){if(r==="input"||r==="change")return Ja(i)}function t2(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var Yt=typeof Object.is=="function"?Object.is:t2;function ul(r,i){if(Yt(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var o=Object.keys(r),u=Object.keys(i);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var m=o[u];if(!vu.call(i,m)||!Yt(r[m],i[m]))return!1}return!0}function zm(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Lm(r,i){var o=zm(r);r=0;for(var u;o;){if(o.nodeType===3){if(u=r+o.textContent.length,r<=i&&u>=i)return{node:o,offset:i-r};r=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=zm(o)}}function Bm(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?Bm(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function _m(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var i=Va(r.document);i instanceof r.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)r=i.contentWindow;else break;i=Va(r.document)}return i}function Gu(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}var n2=Pn&&"documentMode"in document&&11>=document.documentMode,ei=null,Yu=null,dl=null,Ku=!1;function Hm(r,i,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Ku||ei==null||ei!==Va(u)||(u=ei,"selectionStart"in u&&Gu(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),dl&&ul(dl,u)||(dl=u,u=Lo(Yu,"onSelect"),0<u.length&&(i=new Ya("onSelect","select",null,i,o),r.push({event:i,listeners:u}),i.target=ei)))}function is(r,i){var o={};return o[r.toLowerCase()]=i.toLowerCase(),o["Webkit"+r]="webkit"+i,o["Moz"+r]="moz"+i,o}var ti={animationend:is("Animation","AnimationEnd"),animationiteration:is("Animation","AnimationIteration"),animationstart:is("Animation","AnimationStart"),transitionrun:is("Transition","TransitionRun"),transitionstart:is("Transition","TransitionStart"),transitioncancel:is("Transition","TransitionCancel"),transitionend:is("Transition","TransitionEnd")},Ju={},Um={};Pn&&(Um=document.createElement("div").style,"AnimationEvent"in window||(delete ti.animationend.animation,delete ti.animationiteration.animation,delete ti.animationstart.animation),"TransitionEvent"in window||delete ti.transitionend.transition);function ls(r){if(Ju[r])return Ju[r];if(!ti[r])return r;var i=ti[r],o;for(o in i)if(i.hasOwnProperty(o)&&o in Um)return Ju[r]=i[o];return r}var Pm=ls("animationend"),Im=ls("animationiteration"),Vm=ls("animationstart"),r2=ls("transitionrun"),s2=ls("transitionstart"),i2=ls("transitioncancel"),qm=ls("transitionend"),Fm=new Map,Qu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Qu.push("scrollEnd");function bn(r,i){Fm.set(r,i),rs(i,[r])}var $m=new WeakMap;function ln(r,i){if(typeof r=="object"&&r!==null){var o=$m.get(r);return o!==void 0?o:(i={value:r,source:i,stack:am(i)},$m.set(r,i),i)}return{value:r,source:i,stack:am(i)}}var an=[],ni=0,Xu=0;function Qa(){for(var r=ni,i=Xu=ni=0;i<r;){var o=an[i];an[i++]=null;var u=an[i];an[i++]=null;var m=an[i];an[i++]=null;var x=an[i];if(an[i++]=null,u!==null&&m!==null){var N=u.pending;N===null?m.next=m:(m.next=N.next,N.next=m),u.pending=m}x!==0&&Gm(o,m,x)}}function Xa(r,i,o,u){an[ni++]=r,an[ni++]=i,an[ni++]=o,an[ni++]=u,Xu|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function Zu(r,i,o,u){return Xa(r,i,o,u),Za(r)}function ri(r,i){return Xa(r,null,null,i),Za(r)}function Gm(r,i,o){r.lanes|=o;var u=r.alternate;u!==null&&(u.lanes|=o);for(var m=!1,x=r.return;x!==null;)x.childLanes|=o,u=x.alternate,u!==null&&(u.childLanes|=o),x.tag===22&&(r=x.stateNode,r===null||r._visibility&1||(m=!0)),r=x,x=x.return;return r.tag===3?(x=r.stateNode,m&&i!==null&&(m=31-Gt(o),r=x.hiddenUpdates,u=r[m],u===null?r[m]=[i]:u.push(i),i.lane=o|536870912),x):null}function Za(r){if(50<Bl)throw Bl=0,sf=null,Error(s(185));for(var i=r.return;i!==null;)r=i,i=r.return;return r.tag===3?r.stateNode:null}var si={};function l2(r,i,o,u){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kt(r,i,o,u){return new l2(r,i,o,u)}function Wu(r){return r=r.prototype,!(!r||!r.isReactComponent)}function In(r,i){var o=r.alternate;return o===null?(o=Kt(r.tag,i,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=i,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&65011712,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,i=r.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o.refCleanup=r.refCleanup,o}function Ym(r,i){r.flags&=65011714;var o=r.alternate;return o===null?(r.childLanes=0,r.lanes=i,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,i=o.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),r}function Wa(r,i,o,u,m,x){var N=0;if(u=r,typeof r=="function")Wu(r)&&(N=1);else if(typeof r=="string")N=oN(r,o,X.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case ne:return r=Kt(31,o,i,m),r.elementType=ne,r.lanes=x,r;case v:return as(o.children,m,x,i);case w:N=8,m|=24;break;case k:return r=Kt(12,o,i,m|2),r.elementType=k,r.lanes=x,r;case D:return r=Kt(13,o,i,m),r.elementType=D,r.lanes=x,r;case I:return r=Kt(19,o,i,m),r.elementType=I,r.lanes=x,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case E:case z:N=10;break e;case O:N=9;break e;case q:N=11;break e;case L:N=14;break e;case G:N=16,u=null;break e}N=29,o=Error(s(130,r===null?"null":typeof r,"")),u=null}return i=Kt(N,o,i,m),i.elementType=r,i.type=u,i.lanes=x,i}function as(r,i,o,u){return r=Kt(7,r,u,i),r.lanes=o,r}function ed(r,i,o){return r=Kt(6,r,null,i),r.lanes=o,r}function td(r,i,o){return i=Kt(4,r.children!==null?r.children:[],r.key,i),i.lanes=o,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}var ii=[],li=0,eo=null,to=0,on=[],cn=0,cs=null,Vn=1,qn="";function us(r,i){ii[li++]=to,ii[li++]=eo,eo=r,to=i}function Km(r,i,o){on[cn++]=Vn,on[cn++]=qn,on[cn++]=cs,cs=r;var u=Vn;r=qn;var m=32-Gt(u)-1;u&=~(1<<m),o+=1;var x=32-Gt(i)+m;if(30<x){var N=m-m%5;x=(u&(1<<N)-1).toString(32),u>>=N,m-=N,Vn=1<<32-Gt(i)+m|o<<m|u,qn=x+r}else Vn=1<<x|o<<m|u,qn=r}function nd(r){r.return!==null&&(us(r,1),Km(r,1,0))}function rd(r){for(;r===eo;)eo=ii[--li],ii[li]=null,to=ii[--li],ii[li]=null;for(;r===cs;)cs=on[--cn],on[cn]=null,qn=on[--cn],on[cn]=null,Vn=on[--cn],on[cn]=null}var Mt=null,Ge=null,Re=!1,ds=null,An=!1,sd=Error(s(519));function fs(r){var i=Error(s(418,""));throw pl(ln(i,r)),sd}function Jm(r){var i=r.stateNode,o=r.type,u=r.memoizedProps;switch(i[wt]=r,i[_t]=u,o){case"dialog":Ee("cancel",i),Ee("close",i);break;case"iframe":case"object":case"embed":Ee("load",i);break;case"video":case"audio":for(o=0;o<Hl.length;o++)Ee(Hl[o],i);break;case"source":Ee("error",i);break;case"img":case"image":case"link":Ee("error",i),Ee("load",i);break;case"details":Ee("toggle",i);break;case"input":Ee("invalid",i),um(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),Ia(i);break;case"select":Ee("invalid",i);break;case"textarea":Ee("invalid",i),fm(i,u.value,u.defaultValue,u.children),Ia(i)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||u.suppressHydrationWarning===!0||fx(i.textContent,o)?(u.popover!=null&&(Ee("beforetoggle",i),Ee("toggle",i)),u.onScroll!=null&&Ee("scroll",i),u.onScrollEnd!=null&&Ee("scrollend",i),u.onClick!=null&&(i.onclick=Bo),i=!0):i=!1,i||fs(r)}function Qm(r){for(Mt=r.return;Mt;)switch(Mt.tag){case 5:case 13:An=!1;return;case 27:case 3:An=!0;return;default:Mt=Mt.return}}function fl(r){if(r!==Mt)return!1;if(!Re)return Qm(r),Re=!0,!1;var i=r.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=r.type,o=!(o!=="form"&&o!=="button")||Sf(r.type,r.memoizedProps)),o=!o),o&&Ge&&fs(r),Qm(r),i===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));e:{for(r=r.nextSibling,i=0;r;){if(r.nodeType===8)if(o=r.data,o==="/$"){if(i===0){Ge=Sn(r.nextSibling);break e}i--}else o!=="$"&&o!=="$!"&&o!=="$?"||i++;r=r.nextSibling}Ge=null}}else i===27?(i=Ge,Or(r.type)?(r=jf,jf=null,Ge=r):Ge=i):Ge=Mt?Sn(r.stateNode.nextSibling):null;return!0}function hl(){Ge=Mt=null,Re=!1}function Xm(){var r=ds;return r!==null&&(It===null?It=r:It.push.apply(It,r),ds=null),r}function pl(r){ds===null?ds=[r]:ds.push(r)}var id=_(null),hs=null,Fn=null;function gr(r,i,o){Q(id,i._currentValue),i._currentValue=o}function $n(r){r._currentValue=id.current,F(id)}function ld(r,i,o){for(;r!==null;){var u=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),r===o)break;r=r.return}}function ad(r,i,o,u){var m=r.child;for(m!==null&&(m.return=r);m!==null;){var x=m.dependencies;if(x!==null){var N=m.child;x=x.firstContext;e:for(;x!==null;){var j=x;x=m;for(var A=0;A<i.length;A++)if(j.context===i[A]){x.lanes|=o,j=x.alternate,j!==null&&(j.lanes|=o),ld(x.return,o,r),u||(N=null);break e}x=j.next}}else if(m.tag===18){if(N=m.return,N===null)throw Error(s(341));N.lanes|=o,x=N.alternate,x!==null&&(x.lanes|=o),ld(N,o,r),N=null}else N=m.child;if(N!==null)N.return=m;else for(N=m;N!==null;){if(N===r){N=null;break}if(m=N.sibling,m!==null){m.return=N.return,N=m;break}N=N.return}m=N}}function ml(r,i,o,u){r=null;for(var m=i,x=!1;m!==null;){if(!x){if((m.flags&524288)!==0)x=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var N=m.alternate;if(N===null)throw Error(s(387));if(N=N.memoizedProps,N!==null){var j=m.type;Yt(m.pendingProps.value,N.value)||(r!==null?r.push(j):r=[j])}}else if(m===it.current){if(N=m.alternate,N===null)throw Error(s(387));N.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(r!==null?r.push(Fl):r=[Fl])}m=m.return}r!==null&&ad(i,r,o,u),i.flags|=262144}function no(r){for(r=r.firstContext;r!==null;){if(!Yt(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function ps(r){hs=r,Fn=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function kt(r){return Zm(hs,r)}function ro(r,i){return hs===null&&ps(r),Zm(r,i)}function Zm(r,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},Fn===null){if(r===null)throw Error(s(308));Fn=i,r.dependencies={lanes:0,firstContext:i},r.flags|=524288}else Fn=Fn.next=i;return o}var a2=typeof AbortController<"u"?AbortController:function(){var r=[],i=this.signal={aborted:!1,addEventListener:function(o,u){r.push(u)}};this.abort=function(){i.aborted=!0,r.forEach(function(o){return o()})}},o2=n.unstable_scheduleCallback,c2=n.unstable_NormalPriority,tt={$$typeof:z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function od(){return{controller:new a2,data:new Map,refCount:0}}function gl(r){r.refCount--,r.refCount===0&&o2(c2,function(){r.controller.abort()})}var xl=null,cd=0,ai=0,oi=null;function u2(r,i){if(xl===null){var o=xl=[];cd=0,ai=ff(),oi={status:"pending",value:void 0,then:function(u){o.push(u)}}}return cd++,i.then(Wm,Wm),i}function Wm(){if(--cd===0&&xl!==null){oi!==null&&(oi.status="fulfilled");var r=xl;xl=null,ai=0,oi=null;for(var i=0;i<r.length;i++)(0,r[i])()}}function d2(r,i){var o=[],u={status:"pending",value:null,reason:null,then:function(m){o.push(m)}};return r.then(function(){u.status="fulfilled",u.value=i;for(var m=0;m<o.length;m++)(0,o[m])(i)},function(m){for(u.status="rejected",u.reason=m,m=0;m<o.length;m++)(0,o[m])(void 0)}),u}var eg=P.S;P.S=function(r,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&u2(r,i),eg!==null&&eg(r,i)};var ms=_(null);function ud(){var r=ms.current;return r!==null?r:Ie.pooledCache}function so(r,i){i===null?Q(ms,ms.current):Q(ms,i.pool)}function tg(){var r=ud();return r===null?null:{parent:tt._currentValue,pool:r}}var yl=Error(s(460)),ng=Error(s(474)),io=Error(s(542)),dd={then:function(){}};function rg(r){return r=r.status,r==="fulfilled"||r==="rejected"}function lo(){}function sg(r,i,o){switch(o=r[o],o===void 0?r.push(i):o!==i&&(i.then(lo,lo),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,lg(r),r;default:if(typeof i.status=="string")i.then(lo,lo);else{if(r=Ie,r!==null&&100<r.shellSuspendCounter)throw Error(s(482));r=i,r.status="pending",r.then(function(u){if(i.status==="pending"){var m=i;m.status="fulfilled",m.value=u}},function(u){if(i.status==="pending"){var m=i;m.status="rejected",m.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,lg(r),r}throw bl=i,yl}}var bl=null;function ig(){if(bl===null)throw Error(s(459));var r=bl;return bl=null,r}function lg(r){if(r===yl||r===io)throw Error(s(483))}var xr=!1;function fd(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function hd(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function yr(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function br(r,i,o){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(ze&2)!==0){var m=u.pending;return m===null?i.next=i:(i.next=m.next,m.next=i),u.pending=i,i=Za(r),Gm(r,null,o),i}return Xa(r,u,i,o),Za(r)}function vl(r,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var u=i.lanes;u&=r.pendingLanes,o|=u,i.lanes=o,Wp(r,o)}}function pd(r,i){var o=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var m=null,x=null;if(o=o.firstBaseUpdate,o!==null){do{var N={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};x===null?m=x=N:x=x.next=N,o=o.next}while(o!==null);x===null?m=x=i:x=x.next=i}else m=x=i;o={baseState:u.baseState,firstBaseUpdate:m,lastBaseUpdate:x,shared:u.shared,callbacks:u.callbacks},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=i:r.next=i,o.lastBaseUpdate=i}var md=!1;function Sl(){if(md){var r=oi;if(r!==null)throw r}}function Nl(r,i,o,u){md=!1;var m=r.updateQueue;xr=!1;var x=m.firstBaseUpdate,N=m.lastBaseUpdate,j=m.shared.pending;if(j!==null){m.shared.pending=null;var A=j,H=A.next;A.next=null,N===null?x=H:N.next=H,N=A;var $=r.alternate;$!==null&&($=$.updateQueue,j=$.lastBaseUpdate,j!==N&&(j===null?$.firstBaseUpdate=H:j.next=H,$.lastBaseUpdate=A))}if(x!==null){var J=m.baseState;N=0,$=H=A=null,j=x;do{var U=j.lane&-536870913,V=U!==j.lane;if(V?(Me&U)===U:(u&U)===U){U!==0&&U===ai&&(md=!0),$!==null&&($=$.next={lane:0,tag:j.tag,payload:j.payload,callback:null,next:null});e:{var xe=r,he=j;U=i;var He=o;switch(he.tag){case 1:if(xe=he.payload,typeof xe=="function"){J=xe.call(He,J,U);break e}J=xe;break e;case 3:xe.flags=xe.flags&-65537|128;case 0:if(xe=he.payload,U=typeof xe=="function"?xe.call(He,J,U):xe,U==null)break e;J=g({},J,U);break e;case 2:xr=!0}}U=j.callback,U!==null&&(r.flags|=64,V&&(r.flags|=8192),V=m.callbacks,V===null?m.callbacks=[U]:V.push(U))}else V={lane:U,tag:j.tag,payload:j.payload,callback:j.callback,next:null},$===null?(H=$=V,A=J):$=$.next=V,N|=U;if(j=j.next,j===null){if(j=m.shared.pending,j===null)break;V=j,j=V.next,V.next=null,m.lastBaseUpdate=V,m.shared.pending=null}}while(!0);$===null&&(A=J),m.baseState=A,m.firstBaseUpdate=H,m.lastBaseUpdate=$,x===null&&(m.shared.lanes=0),Er|=N,r.lanes=N,r.memoizedState=J}}function ag(r,i){if(typeof r!="function")throw Error(s(191,r));r.call(i)}function og(r,i){var o=r.callbacks;if(o!==null)for(r.callbacks=null,r=0;r<o.length;r++)ag(o[r],i)}var ci=_(null),ao=_(0);function cg(r,i){r=Zn,Q(ao,r),Q(ci,i),Zn=r|i.baseLanes}function gd(){Q(ao,Zn),Q(ci,ci.current)}function xd(){Zn=ao.current,F(ci),F(ao)}var vr=0,we=null,Be=null,Ze=null,oo=!1,ui=!1,gs=!1,co=0,wl=0,di=null,f2=0;function Qe(){throw Error(s(321))}function yd(r,i){if(i===null)return!1;for(var o=0;o<i.length&&o<r.length;o++)if(!Yt(r[o],i[o]))return!1;return!0}function bd(r,i,o,u,m,x){return vr=x,we=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,P.H=r===null||r.memoizedState===null?Gg:Yg,gs=!1,x=o(u,m),gs=!1,ui&&(x=dg(i,o,u,m)),ug(r),x}function ug(r){P.H=go;var i=Be!==null&&Be.next!==null;if(vr=0,Ze=Be=we=null,oo=!1,wl=0,di=null,i)throw Error(s(300));r===null||at||(r=r.dependencies,r!==null&&no(r)&&(at=!0))}function dg(r,i,o,u){we=r;var m=0;do{if(ui&&(di=null),wl=0,ui=!1,25<=m)throw Error(s(301));if(m+=1,Ze=Be=null,r.updateQueue!=null){var x=r.updateQueue;x.lastEffect=null,x.events=null,x.stores=null,x.memoCache!=null&&(x.memoCache.index=0)}P.H=b2,x=i(o,u)}while(ui);return x}function h2(){var r=P.H,i=r.useState()[0];return i=typeof i.then=="function"?kl(i):i,r=r.useState()[0],(Be!==null?Be.memoizedState:null)!==r&&(we.flags|=1024),i}function vd(){var r=co!==0;return co=0,r}function Sd(r,i,o){i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~o}function Nd(r){if(oo){for(r=r.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}oo=!1}vr=0,Ze=Be=we=null,ui=!1,wl=co=0,di=null}function Ut(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ze===null?we.memoizedState=Ze=r:Ze=Ze.next=r,Ze}function We(){if(Be===null){var r=we.alternate;r=r!==null?r.memoizedState:null}else r=Be.next;var i=Ze===null?we.memoizedState:Ze.next;if(i!==null)Ze=i,Be=r;else{if(r===null)throw we.alternate===null?Error(s(467)):Error(s(310));Be=r,r={memoizedState:Be.memoizedState,baseState:Be.baseState,baseQueue:Be.baseQueue,queue:Be.queue,next:null},Ze===null?we.memoizedState=Ze=r:Ze=Ze.next=r}return Ze}function wd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function kl(r){var i=wl;return wl+=1,di===null&&(di=[]),r=sg(di,r,i),i=we,(Ze===null?i.memoizedState:Ze.next)===null&&(i=i.alternate,P.H=i===null||i.memoizedState===null?Gg:Yg),r}function uo(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return kl(r);if(r.$$typeof===z)return kt(r)}throw Error(s(438,String(r)))}function kd(r){var i=null,o=we.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var u=we.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(m){return m.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=wd(),we.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(r),u=0;u<r;u++)o[u]=se;return i.index++,o}function Gn(r,i){return typeof i=="function"?i(r):i}function fo(r){var i=We();return jd(i,Be,r)}function jd(r,i,o){var u=r.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=o;var m=r.baseQueue,x=u.pending;if(x!==null){if(m!==null){var N=m.next;m.next=x.next,x.next=N}i.baseQueue=m=x,u.pending=null}if(x=r.baseState,m===null)r.memoizedState=x;else{i=m.next;var j=N=null,A=null,H=i,$=!1;do{var J=H.lane&-536870913;if(J!==H.lane?(Me&J)===J:(vr&J)===J){var U=H.revertLane;if(U===0)A!==null&&(A=A.next={lane:0,revertLane:0,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),J===ai&&($=!0);else if((vr&U)===U){H=H.next,U===ai&&($=!0);continue}else J={lane:0,revertLane:H.revertLane,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},A===null?(j=A=J,N=x):A=A.next=J,we.lanes|=U,Er|=U;J=H.action,gs&&o(x,J),x=H.hasEagerState?H.eagerState:o(x,J)}else U={lane:J,revertLane:H.revertLane,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},A===null?(j=A=U,N=x):A=A.next=U,we.lanes|=J,Er|=J;H=H.next}while(H!==null&&H!==i);if(A===null?N=x:A.next=j,!Yt(x,r.memoizedState)&&(at=!0,$&&(o=oi,o!==null)))throw o;r.memoizedState=x,r.baseState=N,r.baseQueue=A,u.lastRenderedState=x}return m===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function Cd(r){var i=We(),o=i.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=r;var u=o.dispatch,m=o.pending,x=i.memoizedState;if(m!==null){o.pending=null;var N=m=m.next;do x=r(x,N.action),N=N.next;while(N!==m);Yt(x,i.memoizedState)||(at=!0),i.memoizedState=x,i.baseQueue===null&&(i.baseState=x),o.lastRenderedState=x}return[x,u]}function fg(r,i,o){var u=we,m=We(),x=Re;if(x){if(o===void 0)throw Error(s(407));o=o()}else o=i();var N=!Yt((Be||m).memoizedState,o);N&&(m.memoizedState=o,at=!0),m=m.queue;var j=mg.bind(null,u,m,r);if(jl(2048,8,j,[r]),m.getSnapshot!==i||N||Ze!==null&&Ze.memoizedState.tag&1){if(u.flags|=2048,fi(9,ho(),pg.bind(null,u,m,o,i),null),Ie===null)throw Error(s(349));x||(vr&124)!==0||hg(u,i,o)}return o}function hg(r,i,o){r.flags|=16384,r={getSnapshot:i,value:o},i=we.updateQueue,i===null?(i=wd(),we.updateQueue=i,i.stores=[r]):(o=i.stores,o===null?i.stores=[r]:o.push(r))}function pg(r,i,o,u){i.value=o,i.getSnapshot=u,gg(i)&&xg(r)}function mg(r,i,o){return o(function(){gg(i)&&xg(r)})}function gg(r){var i=r.getSnapshot;r=r.value;try{var o=i();return!Yt(r,o)}catch{return!0}}function xg(r){var i=ri(r,2);i!==null&&Wt(i,r,2)}function Ed(r){var i=Ut();if(typeof r=="function"){var o=r;if(r=o(),gs){hr(!0);try{o()}finally{hr(!1)}}}return i.memoizedState=i.baseState=r,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gn,lastRenderedState:r},i}function yg(r,i,o,u){return r.baseState=o,jd(r,Be,typeof u=="function"?u:Gn)}function p2(r,i,o,u,m){if(mo(r))throw Error(s(485));if(r=i.action,r!==null){var x={payload:m,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(N){x.listeners.push(N)}};P.T!==null?o(!0):x.isTransition=!1,u(x),o=i.pending,o===null?(x.next=i.pending=x,bg(i,x)):(x.next=o.next,i.pending=o.next=x)}}function bg(r,i){var o=i.action,u=i.payload,m=r.state;if(i.isTransition){var x=P.T,N={};P.T=N;try{var j=o(m,u),A=P.S;A!==null&&A(N,j),vg(r,i,j)}catch(H){Ad(r,i,H)}finally{P.T=x}}else try{x=o(m,u),vg(r,i,x)}catch(H){Ad(r,i,H)}}function vg(r,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){Sg(r,i,u)},function(u){return Ad(r,i,u)}):Sg(r,i,o)}function Sg(r,i,o){i.status="fulfilled",i.value=o,Ng(i),r.state=o,i=r.pending,i!==null&&(o=i.next,o===i?r.pending=null:(o=o.next,i.next=o,bg(r,o)))}function Ad(r,i,o){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=o,Ng(i),i=i.next;while(i!==u)}r.action=null}function Ng(r){r=r.listeners;for(var i=0;i<r.length;i++)(0,r[i])()}function wg(r,i){return i}function kg(r,i){if(Re){var o=Ie.formState;if(o!==null){e:{var u=we;if(Re){if(Ge){t:{for(var m=Ge,x=An;m.nodeType!==8;){if(!x){m=null;break t}if(m=Sn(m.nextSibling),m===null){m=null;break t}}x=m.data,m=x==="F!"||x==="F"?m:null}if(m){Ge=Sn(m.nextSibling),u=m.data==="F!";break e}}fs(u)}u=!1}u&&(i=o[0])}}return o=Ut(),o.memoizedState=o.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wg,lastRenderedState:i},o.queue=u,o=qg.bind(null,we,u),u.dispatch=o,u=Ed(!1),x=Dd.bind(null,we,!1,u.queue),u=Ut(),m={state:i,dispatch:null,action:r,pending:null},u.queue=m,o=p2.bind(null,we,m,x,o),m.dispatch=o,u.memoizedState=r,[i,o,!1]}function jg(r){var i=We();return Cg(i,Be,r)}function Cg(r,i,o){if(i=jd(r,i,wg)[0],r=fo(Gn)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=kl(i)}catch(N){throw N===yl?io:N}else u=i;i=We();var m=i.queue,x=m.dispatch;return o!==i.memoizedState&&(we.flags|=2048,fi(9,ho(),m2.bind(null,m,o),null)),[u,x,r]}function m2(r,i){r.action=i}function Eg(r){var i=We(),o=Be;if(o!==null)return Cg(i,o,r);We(),i=i.memoizedState,o=We();var u=o.queue.dispatch;return o.memoizedState=r,[i,u,!1]}function fi(r,i,o,u){return r={tag:r,create:o,deps:u,inst:i,next:null},i=we.updateQueue,i===null&&(i=wd(),we.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=r.next=r:(u=o.next,o.next=r,r.next=u,i.lastEffect=r),r}function ho(){return{destroy:void 0,resource:void 0}}function Ag(){return We().memoizedState}function po(r,i,o,u){var m=Ut();u=u===void 0?null:u,we.flags|=r,m.memoizedState=fi(1|i,ho(),o,u)}function jl(r,i,o,u){var m=We();u=u===void 0?null:u;var x=m.memoizedState.inst;Be!==null&&u!==null&&yd(u,Be.memoizedState.deps)?m.memoizedState=fi(i,x,o,u):(we.flags|=r,m.memoizedState=fi(1|i,x,o,u))}function Tg(r,i){po(8390656,8,r,i)}function Mg(r,i){jl(2048,8,r,i)}function Og(r,i){return jl(4,2,r,i)}function Rg(r,i){return jl(4,4,r,i)}function Dg(r,i){if(typeof i=="function"){r=r();var o=i(r);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function zg(r,i,o){o=o!=null?o.concat([r]):null,jl(4,4,Dg.bind(null,i,r),o)}function Td(){}function Lg(r,i){var o=We();i=i===void 0?null:i;var u=o.memoizedState;return i!==null&&yd(i,u[1])?u[0]:(o.memoizedState=[r,i],r)}function Bg(r,i){var o=We();i=i===void 0?null:i;var u=o.memoizedState;if(i!==null&&yd(i,u[1]))return u[0];if(u=r(),gs){hr(!0);try{r()}finally{hr(!1)}}return o.memoizedState=[u,i],u}function Md(r,i,o){return o===void 0||(vr&1073741824)!==0?r.memoizedState=i:(r.memoizedState=o,r=U0(),we.lanes|=r,Er|=r,o)}function _g(r,i,o,u){return Yt(o,i)?o:ci.current!==null?(r=Md(r,o,u),Yt(r,i)||(at=!0),r):(vr&42)===0?(at=!0,r.memoizedState=o):(r=U0(),we.lanes|=r,Er|=r,i)}function Hg(r,i,o,u,m){var x=te.p;te.p=x!==0&&8>x?x:8;var N=P.T,j={};P.T=j,Dd(r,!1,i,o);try{var A=m(),H=P.S;if(H!==null&&H(j,A),A!==null&&typeof A=="object"&&typeof A.then=="function"){var $=d2(A,u);Cl(r,i,$,Zt(r))}else Cl(r,i,u,Zt(r))}catch(J){Cl(r,i,{then:function(){},status:"rejected",reason:J},Zt())}finally{te.p=x,P.T=N}}function g2(){}function Od(r,i,o,u){if(r.tag!==5)throw Error(s(476));var m=Ug(r).queue;Hg(r,m,i,re,o===null?g2:function(){return Pg(r),o(u)})}function Ug(r){var i=r.memoizedState;if(i!==null)return i;i={memoizedState:re,baseState:re,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gn,lastRenderedState:re},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gn,lastRenderedState:o},next:null},r.memoizedState=i,r=r.alternate,r!==null&&(r.memoizedState=i),i}function Pg(r){var i=Ug(r).next.queue;Cl(r,i,{},Zt())}function Rd(){return kt(Fl)}function Ig(){return We().memoizedState}function Vg(){return We().memoizedState}function x2(r){for(var i=r.return;i!==null;){switch(i.tag){case 24:case 3:var o=Zt();r=yr(o);var u=br(i,r,o);u!==null&&(Wt(u,i,o),vl(u,i,o)),i={cache:od()},r.payload=i;return}i=i.return}}function y2(r,i,o){var u=Zt();o={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},mo(r)?Fg(i,o):(o=Zu(r,i,o,u),o!==null&&(Wt(o,r,u),$g(o,i,u)))}function qg(r,i,o){var u=Zt();Cl(r,i,o,u)}function Cl(r,i,o,u){var m={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(mo(r))Fg(i,m);else{var x=r.alternate;if(r.lanes===0&&(x===null||x.lanes===0)&&(x=i.lastRenderedReducer,x!==null))try{var N=i.lastRenderedState,j=x(N,o);if(m.hasEagerState=!0,m.eagerState=j,Yt(j,N))return Xa(r,i,m,0),Ie===null&&Qa(),!1}catch{}finally{}if(o=Zu(r,i,m,u),o!==null)return Wt(o,r,u),$g(o,i,u),!0}return!1}function Dd(r,i,o,u){if(u={lane:2,revertLane:ff(),action:u,hasEagerState:!1,eagerState:null,next:null},mo(r)){if(i)throw Error(s(479))}else i=Zu(r,o,u,2),i!==null&&Wt(i,r,2)}function mo(r){var i=r.alternate;return r===we||i!==null&&i===we}function Fg(r,i){ui=oo=!0;var o=r.pending;o===null?i.next=i:(i.next=o.next,o.next=i),r.pending=i}function $g(r,i,o){if((o&4194048)!==0){var u=i.lanes;u&=r.pendingLanes,o|=u,i.lanes=o,Wp(r,o)}}var go={readContext:kt,use:uo,useCallback:Qe,useContext:Qe,useEffect:Qe,useImperativeHandle:Qe,useLayoutEffect:Qe,useInsertionEffect:Qe,useMemo:Qe,useReducer:Qe,useRef:Qe,useState:Qe,useDebugValue:Qe,useDeferredValue:Qe,useTransition:Qe,useSyncExternalStore:Qe,useId:Qe,useHostTransitionStatus:Qe,useFormState:Qe,useActionState:Qe,useOptimistic:Qe,useMemoCache:Qe,useCacheRefresh:Qe},Gg={readContext:kt,use:uo,useCallback:function(r,i){return Ut().memoizedState=[r,i===void 0?null:i],r},useContext:kt,useEffect:Tg,useImperativeHandle:function(r,i,o){o=o!=null?o.concat([r]):null,po(4194308,4,Dg.bind(null,i,r),o)},useLayoutEffect:function(r,i){return po(4194308,4,r,i)},useInsertionEffect:function(r,i){po(4,2,r,i)},useMemo:function(r,i){var o=Ut();i=i===void 0?null:i;var u=r();if(gs){hr(!0);try{r()}finally{hr(!1)}}return o.memoizedState=[u,i],u},useReducer:function(r,i,o){var u=Ut();if(o!==void 0){var m=o(i);if(gs){hr(!0);try{o(i)}finally{hr(!1)}}}else m=i;return u.memoizedState=u.baseState=m,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:m},u.queue=r,r=r.dispatch=y2.bind(null,we,r),[u.memoizedState,r]},useRef:function(r){var i=Ut();return r={current:r},i.memoizedState=r},useState:function(r){r=Ed(r);var i=r.queue,o=qg.bind(null,we,i);return i.dispatch=o,[r.memoizedState,o]},useDebugValue:Td,useDeferredValue:function(r,i){var o=Ut();return Md(o,r,i)},useTransition:function(){var r=Ed(!1);return r=Hg.bind(null,we,r.queue,!0,!1),Ut().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,i,o){var u=we,m=Ut();if(Re){if(o===void 0)throw Error(s(407));o=o()}else{if(o=i(),Ie===null)throw Error(s(349));(Me&124)!==0||hg(u,i,o)}m.memoizedState=o;var x={value:o,getSnapshot:i};return m.queue=x,Tg(mg.bind(null,u,x,r),[r]),u.flags|=2048,fi(9,ho(),pg.bind(null,u,x,o,i),null),o},useId:function(){var r=Ut(),i=Ie.identifierPrefix;if(Re){var o=qn,u=Vn;o=(u&~(1<<32-Gt(u)-1)).toString(32)+o,i="«"+i+"R"+o,o=co++,0<o&&(i+="H"+o.toString(32)),i+="»"}else o=f2++,i="«"+i+"r"+o.toString(32)+"»";return r.memoizedState=i},useHostTransitionStatus:Rd,useFormState:kg,useActionState:kg,useOptimistic:function(r){var i=Ut();i.memoizedState=i.baseState=r;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=Dd.bind(null,we,!0,o),o.dispatch=i,[r,i]},useMemoCache:kd,useCacheRefresh:function(){return Ut().memoizedState=x2.bind(null,we)}},Yg={readContext:kt,use:uo,useCallback:Lg,useContext:kt,useEffect:Mg,useImperativeHandle:zg,useInsertionEffect:Og,useLayoutEffect:Rg,useMemo:Bg,useReducer:fo,useRef:Ag,useState:function(){return fo(Gn)},useDebugValue:Td,useDeferredValue:function(r,i){var o=We();return _g(o,Be.memoizedState,r,i)},useTransition:function(){var r=fo(Gn)[0],i=We().memoizedState;return[typeof r=="boolean"?r:kl(r),i]},useSyncExternalStore:fg,useId:Ig,useHostTransitionStatus:Rd,useFormState:jg,useActionState:jg,useOptimistic:function(r,i){var o=We();return yg(o,Be,r,i)},useMemoCache:kd,useCacheRefresh:Vg},b2={readContext:kt,use:uo,useCallback:Lg,useContext:kt,useEffect:Mg,useImperativeHandle:zg,useInsertionEffect:Og,useLayoutEffect:Rg,useMemo:Bg,useReducer:Cd,useRef:Ag,useState:function(){return Cd(Gn)},useDebugValue:Td,useDeferredValue:function(r,i){var o=We();return Be===null?Md(o,r,i):_g(o,Be.memoizedState,r,i)},useTransition:function(){var r=Cd(Gn)[0],i=We().memoizedState;return[typeof r=="boolean"?r:kl(r),i]},useSyncExternalStore:fg,useId:Ig,useHostTransitionStatus:Rd,useFormState:Eg,useActionState:Eg,useOptimistic:function(r,i){var o=We();return Be!==null?yg(o,Be,r,i):(o.baseState=r,[r,o.queue.dispatch])},useMemoCache:kd,useCacheRefresh:Vg},hi=null,El=0;function xo(r){var i=El;return El+=1,hi===null&&(hi=[]),sg(hi,r,i)}function Al(r,i){i=i.props.ref,r.ref=i!==void 0?i:null}function yo(r,i){throw i.$$typeof===y?Error(s(525)):(r=Object.prototype.toString.call(i),Error(s(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r)))}function Kg(r){var i=r._init;return i(r._payload)}function Jg(r){function i(R,M){if(r){var B=R.deletions;B===null?(R.deletions=[M],R.flags|=16):B.push(M)}}function o(R,M){if(!r)return null;for(;M!==null;)i(R,M),M=M.sibling;return null}function u(R){for(var M=new Map;R!==null;)R.key!==null?M.set(R.key,R):M.set(R.index,R),R=R.sibling;return M}function m(R,M){return R=In(R,M),R.index=0,R.sibling=null,R}function x(R,M,B){return R.index=B,r?(B=R.alternate,B!==null?(B=B.index,B<M?(R.flags|=67108866,M):B):(R.flags|=67108866,M)):(R.flags|=1048576,M)}function N(R){return r&&R.alternate===null&&(R.flags|=67108866),R}function j(R,M,B,Y){return M===null||M.tag!==6?(M=ed(B,R.mode,Y),M.return=R,M):(M=m(M,B),M.return=R,M)}function A(R,M,B,Y){var oe=B.type;return oe===v?$(R,M,B.props.children,Y,B.key):M!==null&&(M.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===G&&Kg(oe)===M.type)?(M=m(M,B.props),Al(M,B),M.return=R,M):(M=Wa(B.type,B.key,B.props,null,R.mode,Y),Al(M,B),M.return=R,M)}function H(R,M,B,Y){return M===null||M.tag!==4||M.stateNode.containerInfo!==B.containerInfo||M.stateNode.implementation!==B.implementation?(M=td(B,R.mode,Y),M.return=R,M):(M=m(M,B.children||[]),M.return=R,M)}function $(R,M,B,Y,oe){return M===null||M.tag!==7?(M=as(B,R.mode,Y,oe),M.return=R,M):(M=m(M,B),M.return=R,M)}function J(R,M,B){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=ed(""+M,R.mode,B),M.return=R,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case b:return B=Wa(M.type,M.key,M.props,null,R.mode,B),Al(B,M),B.return=R,B;case S:return M=td(M,R.mode,B),M.return=R,M;case G:var Y=M._init;return M=Y(M._payload),J(R,M,B)}if(Te(M)||Z(M))return M=as(M,R.mode,B,null),M.return=R,M;if(typeof M.then=="function")return J(R,xo(M),B);if(M.$$typeof===z)return J(R,ro(R,M),B);yo(R,M)}return null}function U(R,M,B,Y){var oe=M!==null?M.key:null;if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return oe!==null?null:j(R,M,""+B,Y);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case b:return B.key===oe?A(R,M,B,Y):null;case S:return B.key===oe?H(R,M,B,Y):null;case G:return oe=B._init,B=oe(B._payload),U(R,M,B,Y)}if(Te(B)||Z(B))return oe!==null?null:$(R,M,B,Y,null);if(typeof B.then=="function")return U(R,M,xo(B),Y);if(B.$$typeof===z)return U(R,M,ro(R,B),Y);yo(R,B)}return null}function V(R,M,B,Y,oe){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return R=R.get(B)||null,j(M,R,""+Y,oe);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case b:return R=R.get(Y.key===null?B:Y.key)||null,A(M,R,Y,oe);case S:return R=R.get(Y.key===null?B:Y.key)||null,H(M,R,Y,oe);case G:var je=Y._init;return Y=je(Y._payload),V(R,M,B,Y,oe)}if(Te(Y)||Z(Y))return R=R.get(B)||null,$(M,R,Y,oe,null);if(typeof Y.then=="function")return V(R,M,B,xo(Y),oe);if(Y.$$typeof===z)return V(R,M,B,ro(M,Y),oe);yo(M,Y)}return null}function xe(R,M,B,Y){for(var oe=null,je=null,de=M,pe=M=0,ct=null;de!==null&&pe<B.length;pe++){de.index>pe?(ct=de,de=null):ct=de.sibling;var Oe=U(R,de,B[pe],Y);if(Oe===null){de===null&&(de=ct);break}r&&de&&Oe.alternate===null&&i(R,de),M=x(Oe,M,pe),je===null?oe=Oe:je.sibling=Oe,je=Oe,de=ct}if(pe===B.length)return o(R,de),Re&&us(R,pe),oe;if(de===null){for(;pe<B.length;pe++)de=J(R,B[pe],Y),de!==null&&(M=x(de,M,pe),je===null?oe=de:je.sibling=de,je=de);return Re&&us(R,pe),oe}for(de=u(de);pe<B.length;pe++)ct=V(de,R,pe,B[pe],Y),ct!==null&&(r&&ct.alternate!==null&&de.delete(ct.key===null?pe:ct.key),M=x(ct,M,pe),je===null?oe=ct:je.sibling=ct,je=ct);return r&&de.forEach(function(Br){return i(R,Br)}),Re&&us(R,pe),oe}function he(R,M,B,Y){if(B==null)throw Error(s(151));for(var oe=null,je=null,de=M,pe=M=0,ct=null,Oe=B.next();de!==null&&!Oe.done;pe++,Oe=B.next()){de.index>pe?(ct=de,de=null):ct=de.sibling;var Br=U(R,de,Oe.value,Y);if(Br===null){de===null&&(de=ct);break}r&&de&&Br.alternate===null&&i(R,de),M=x(Br,M,pe),je===null?oe=Br:je.sibling=Br,je=Br,de=ct}if(Oe.done)return o(R,de),Re&&us(R,pe),oe;if(de===null){for(;!Oe.done;pe++,Oe=B.next())Oe=J(R,Oe.value,Y),Oe!==null&&(M=x(Oe,M,pe),je===null?oe=Oe:je.sibling=Oe,je=Oe);return Re&&us(R,pe),oe}for(de=u(de);!Oe.done;pe++,Oe=B.next())Oe=V(de,R,pe,Oe.value,Y),Oe!==null&&(r&&Oe.alternate!==null&&de.delete(Oe.key===null?pe:Oe.key),M=x(Oe,M,pe),je===null?oe=Oe:je.sibling=Oe,je=Oe);return r&&de.forEach(function(vN){return i(R,vN)}),Re&&us(R,pe),oe}function He(R,M,B,Y){if(typeof B=="object"&&B!==null&&B.type===v&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case b:e:{for(var oe=B.key;M!==null;){if(M.key===oe){if(oe=B.type,oe===v){if(M.tag===7){o(R,M.sibling),Y=m(M,B.props.children),Y.return=R,R=Y;break e}}else if(M.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===G&&Kg(oe)===M.type){o(R,M.sibling),Y=m(M,B.props),Al(Y,B),Y.return=R,R=Y;break e}o(R,M);break}else i(R,M);M=M.sibling}B.type===v?(Y=as(B.props.children,R.mode,Y,B.key),Y.return=R,R=Y):(Y=Wa(B.type,B.key,B.props,null,R.mode,Y),Al(Y,B),Y.return=R,R=Y)}return N(R);case S:e:{for(oe=B.key;M!==null;){if(M.key===oe)if(M.tag===4&&M.stateNode.containerInfo===B.containerInfo&&M.stateNode.implementation===B.implementation){o(R,M.sibling),Y=m(M,B.children||[]),Y.return=R,R=Y;break e}else{o(R,M);break}else i(R,M);M=M.sibling}Y=td(B,R.mode,Y),Y.return=R,R=Y}return N(R);case G:return oe=B._init,B=oe(B._payload),He(R,M,B,Y)}if(Te(B))return xe(R,M,B,Y);if(Z(B)){if(oe=Z(B),typeof oe!="function")throw Error(s(150));return B=oe.call(B),he(R,M,B,Y)}if(typeof B.then=="function")return He(R,M,xo(B),Y);if(B.$$typeof===z)return He(R,M,ro(R,B),Y);yo(R,B)}return typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint"?(B=""+B,M!==null&&M.tag===6?(o(R,M.sibling),Y=m(M,B),Y.return=R,R=Y):(o(R,M),Y=ed(B,R.mode,Y),Y.return=R,R=Y),N(R)):o(R,M)}return function(R,M,B,Y){try{El=0;var oe=He(R,M,B,Y);return hi=null,oe}catch(de){if(de===yl||de===io)throw de;var je=Kt(29,de,null,R.mode);return je.lanes=Y,je.return=R,je}finally{}}}var pi=Jg(!0),Qg=Jg(!1),un=_(null),Tn=null;function Sr(r){var i=r.alternate;Q(nt,nt.current&1),Q(un,r),Tn===null&&(i===null||ci.current!==null||i.memoizedState!==null)&&(Tn=r)}function Xg(r){if(r.tag===22){if(Q(nt,nt.current),Q(un,r),Tn===null){var i=r.alternate;i!==null&&i.memoizedState!==null&&(Tn=r)}}else Nr()}function Nr(){Q(nt,nt.current),Q(un,un.current)}function Yn(r){F(un),Tn===r&&(Tn=null),F(nt)}var nt=_(0);function bo(r){for(var i=r;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||kf(o)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function zd(r,i,o,u){i=r.memoizedState,o=o(u,i),o=o==null?i:g({},i,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var Ld={enqueueSetState:function(r,i,o){r=r._reactInternals;var u=Zt(),m=yr(u);m.payload=i,o!=null&&(m.callback=o),i=br(r,m,u),i!==null&&(Wt(i,r,u),vl(i,r,u))},enqueueReplaceState:function(r,i,o){r=r._reactInternals;var u=Zt(),m=yr(u);m.tag=1,m.payload=i,o!=null&&(m.callback=o),i=br(r,m,u),i!==null&&(Wt(i,r,u),vl(i,r,u))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var o=Zt(),u=yr(o);u.tag=2,i!=null&&(u.callback=i),i=br(r,u,o),i!==null&&(Wt(i,r,o),vl(i,r,o))}};function Zg(r,i,o,u,m,x,N){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,x,N):i.prototype&&i.prototype.isPureReactComponent?!ul(o,u)||!ul(m,x):!0}function Wg(r,i,o,u){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,u),i.state!==r&&Ld.enqueueReplaceState(i,i.state,null)}function xs(r,i){var o=i;if("ref"in i){o={};for(var u in i)u!=="ref"&&(o[u]=i[u])}if(r=r.defaultProps){o===i&&(o=g({},o));for(var m in r)o[m]===void 0&&(o[m]=r[m])}return o}var vo=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function e0(r){vo(r)}function t0(r){console.error(r)}function n0(r){vo(r)}function So(r,i){try{var o=r.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function r0(r,i,o){try{var u=r.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function Bd(r,i,o){return o=yr(o),o.tag=3,o.payload={element:null},o.callback=function(){So(r,i)},o}function s0(r){return r=yr(r),r.tag=3,r}function i0(r,i,o,u){var m=o.type.getDerivedStateFromError;if(typeof m=="function"){var x=u.value;r.payload=function(){return m(x)},r.callback=function(){r0(i,o,u)}}var N=o.stateNode;N!==null&&typeof N.componentDidCatch=="function"&&(r.callback=function(){r0(i,o,u),typeof m!="function"&&(Ar===null?Ar=new Set([this]):Ar.add(this));var j=u.stack;this.componentDidCatch(u.value,{componentStack:j!==null?j:""})})}function v2(r,i,o,u,m){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=o.alternate,i!==null&&ml(i,o,m,!0),o=un.current,o!==null){switch(o.tag){case 13:return Tn===null?af():o.alternate===null&&Ye===0&&(Ye=3),o.flags&=-257,o.flags|=65536,o.lanes=m,u===dd?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([u]):i.add(u),cf(r,u,m)),!1;case 22:return o.flags|=65536,u===dd?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([u]):o.add(u)),cf(r,u,m)),!1}throw Error(s(435,o.tag))}return cf(r,u,m),af(),!1}if(Re)return i=un.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=m,u!==sd&&(r=Error(s(422),{cause:u}),pl(ln(r,o)))):(u!==sd&&(i=Error(s(423),{cause:u}),pl(ln(i,o))),r=r.current.alternate,r.flags|=65536,m&=-m,r.lanes|=m,u=ln(u,o),m=Bd(r.stateNode,u,m),pd(r,m),Ye!==4&&(Ye=2)),!1;var x=Error(s(520),{cause:u});if(x=ln(x,o),Ll===null?Ll=[x]:Ll.push(x),Ye!==4&&(Ye=2),i===null)return!0;u=ln(u,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,r=m&-m,o.lanes|=r,r=Bd(o.stateNode,u,r),pd(o,r),!1;case 1:if(i=o.type,x=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Ar===null||!Ar.has(x))))return o.flags|=65536,m&=-m,o.lanes|=m,m=s0(m),i0(m,r,o,u),pd(o,m),!1}o=o.return}while(o!==null);return!1}var l0=Error(s(461)),at=!1;function gt(r,i,o,u){i.child=r===null?Qg(i,null,o,u):pi(i,r.child,o,u)}function a0(r,i,o,u,m){o=o.render;var x=i.ref;if("ref"in u){var N={};for(var j in u)j!=="ref"&&(N[j]=u[j])}else N=u;return ps(i),u=bd(r,i,o,N,x,m),j=vd(),r!==null&&!at?(Sd(r,i,m),Kn(r,i,m)):(Re&&j&&nd(i),i.flags|=1,gt(r,i,u,m),i.child)}function o0(r,i,o,u,m){if(r===null){var x=o.type;return typeof x=="function"&&!Wu(x)&&x.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=x,c0(r,i,x,u,m)):(r=Wa(o.type,null,u,i,i.mode,m),r.ref=i.ref,r.return=i,i.child=r)}if(x=r.child,!Fd(r,m)){var N=x.memoizedProps;if(o=o.compare,o=o!==null?o:ul,o(N,u)&&r.ref===i.ref)return Kn(r,i,m)}return i.flags|=1,r=In(x,u),r.ref=i.ref,r.return=i,i.child=r}function c0(r,i,o,u,m){if(r!==null){var x=r.memoizedProps;if(ul(x,u)&&r.ref===i.ref)if(at=!1,i.pendingProps=u=x,Fd(r,m))(r.flags&131072)!==0&&(at=!0);else return i.lanes=r.lanes,Kn(r,i,m)}return _d(r,i,o,u,m)}function u0(r,i,o){var u=i.pendingProps,m=u.children,x=r!==null?r.memoizedState:null;if(u.mode==="hidden"){if((i.flags&128)!==0){if(u=x!==null?x.baseLanes|o:o,r!==null){for(m=i.child=r.child,x=0;m!==null;)x=x|m.lanes|m.childLanes,m=m.sibling;i.childLanes=x&~u}else i.childLanes=0,i.child=null;return d0(r,i,u,o)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},r!==null&&so(i,x!==null?x.cachePool:null),x!==null?cg(i,x):gd(),Xg(i);else return i.lanes=i.childLanes=536870912,d0(r,i,x!==null?x.baseLanes|o:o,o)}else x!==null?(so(i,x.cachePool),cg(i,x),Nr(),i.memoizedState=null):(r!==null&&so(i,null),gd(),Nr());return gt(r,i,m,o),i.child}function d0(r,i,o,u){var m=ud();return m=m===null?null:{parent:tt._currentValue,pool:m},i.memoizedState={baseLanes:o,cachePool:m},r!==null&&so(i,null),gd(),Xg(i),r!==null&&ml(r,i,u,!0),null}function No(r,i){var o=i.ref;if(o===null)r!==null&&r.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(s(284));(r===null||r.ref!==o)&&(i.flags|=4194816)}}function _d(r,i,o,u,m){return ps(i),o=bd(r,i,o,u,void 0,m),u=vd(),r!==null&&!at?(Sd(r,i,m),Kn(r,i,m)):(Re&&u&&nd(i),i.flags|=1,gt(r,i,o,m),i.child)}function f0(r,i,o,u,m,x){return ps(i),i.updateQueue=null,o=dg(i,u,o,m),ug(r),u=vd(),r!==null&&!at?(Sd(r,i,x),Kn(r,i,x)):(Re&&u&&nd(i),i.flags|=1,gt(r,i,o,x),i.child)}function h0(r,i,o,u,m){if(ps(i),i.stateNode===null){var x=si,N=o.contextType;typeof N=="object"&&N!==null&&(x=kt(N)),x=new o(u,x),i.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=Ld,i.stateNode=x,x._reactInternals=i,x=i.stateNode,x.props=u,x.state=i.memoizedState,x.refs={},fd(i),N=o.contextType,x.context=typeof N=="object"&&N!==null?kt(N):si,x.state=i.memoizedState,N=o.getDerivedStateFromProps,typeof N=="function"&&(zd(i,o,N,u),x.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(N=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),N!==x.state&&Ld.enqueueReplaceState(x,x.state,null),Nl(i,u,x,m),Sl(),x.state=i.memoizedState),typeof x.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(r===null){x=i.stateNode;var j=i.memoizedProps,A=xs(o,j);x.props=A;var H=x.context,$=o.contextType;N=si,typeof $=="object"&&$!==null&&(N=kt($));var J=o.getDerivedStateFromProps;$=typeof J=="function"||typeof x.getSnapshotBeforeUpdate=="function",j=i.pendingProps!==j,$||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(j||H!==N)&&Wg(i,x,u,N),xr=!1;var U=i.memoizedState;x.state=U,Nl(i,u,x,m),Sl(),H=i.memoizedState,j||U!==H||xr?(typeof J=="function"&&(zd(i,o,J,u),H=i.memoizedState),(A=xr||Zg(i,o,A,u,U,H,N))?($||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(i.flags|=4194308)):(typeof x.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=H),x.props=u,x.state=H,x.context=N,u=A):(typeof x.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{x=i.stateNode,hd(r,i),N=i.memoizedProps,$=xs(o,N),x.props=$,J=i.pendingProps,U=x.context,H=o.contextType,A=si,typeof H=="object"&&H!==null&&(A=kt(H)),j=o.getDerivedStateFromProps,(H=typeof j=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(N!==J||U!==A)&&Wg(i,x,u,A),xr=!1,U=i.memoizedState,x.state=U,Nl(i,u,x,m),Sl();var V=i.memoizedState;N!==J||U!==V||xr||r!==null&&r.dependencies!==null&&no(r.dependencies)?(typeof j=="function"&&(zd(i,o,j,u),V=i.memoizedState),($=xr||Zg(i,o,$,u,U,V,A)||r!==null&&r.dependencies!==null&&no(r.dependencies))?(H||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(u,V,A),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(u,V,A)),typeof x.componentDidUpdate=="function"&&(i.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof x.componentDidUpdate!="function"||N===r.memoizedProps&&U===r.memoizedState||(i.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||N===r.memoizedProps&&U===r.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=V),x.props=u,x.state=V,x.context=A,u=$):(typeof x.componentDidUpdate!="function"||N===r.memoizedProps&&U===r.memoizedState||(i.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||N===r.memoizedProps&&U===r.memoizedState||(i.flags|=1024),u=!1)}return x=u,No(r,i),u=(i.flags&128)!==0,x||u?(x=i.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:x.render(),i.flags|=1,r!==null&&u?(i.child=pi(i,r.child,null,m),i.child=pi(i,null,o,m)):gt(r,i,o,m),i.memoizedState=x.state,r=i.child):r=Kn(r,i,m),r}function p0(r,i,o,u){return hl(),i.flags|=256,gt(r,i,o,u),i.child}var Hd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ud(r){return{baseLanes:r,cachePool:tg()}}function Pd(r,i,o){return r=r!==null?r.childLanes&~o:0,i&&(r|=dn),r}function m0(r,i,o){var u=i.pendingProps,m=!1,x=(i.flags&128)!==0,N;if((N=x)||(N=r!==null&&r.memoizedState===null?!1:(nt.current&2)!==0),N&&(m=!0,i.flags&=-129),N=(i.flags&32)!==0,i.flags&=-33,r===null){if(Re){if(m?Sr(i):Nr(),Re){var j=Ge,A;if(A=j){e:{for(A=j,j=An;A.nodeType!==8;){if(!j){j=null;break e}if(A=Sn(A.nextSibling),A===null){j=null;break e}}j=A}j!==null?(i.memoizedState={dehydrated:j,treeContext:cs!==null?{id:Vn,overflow:qn}:null,retryLane:536870912,hydrationErrors:null},A=Kt(18,null,null,0),A.stateNode=j,A.return=i,i.child=A,Mt=i,Ge=null,A=!0):A=!1}A||fs(i)}if(j=i.memoizedState,j!==null&&(j=j.dehydrated,j!==null))return kf(j)?i.lanes=32:i.lanes=536870912,null;Yn(i)}return j=u.children,u=u.fallback,m?(Nr(),m=i.mode,j=wo({mode:"hidden",children:j},m),u=as(u,m,o,null),j.return=i,u.return=i,j.sibling=u,i.child=j,m=i.child,m.memoizedState=Ud(o),m.childLanes=Pd(r,N,o),i.memoizedState=Hd,u):(Sr(i),Id(i,j))}if(A=r.memoizedState,A!==null&&(j=A.dehydrated,j!==null)){if(x)i.flags&256?(Sr(i),i.flags&=-257,i=Vd(r,i,o)):i.memoizedState!==null?(Nr(),i.child=r.child,i.flags|=128,i=null):(Nr(),m=u.fallback,j=i.mode,u=wo({mode:"visible",children:u.children},j),m=as(m,j,o,null),m.flags|=2,u.return=i,m.return=i,u.sibling=m,i.child=u,pi(i,r.child,null,o),u=i.child,u.memoizedState=Ud(o),u.childLanes=Pd(r,N,o),i.memoizedState=Hd,i=m);else if(Sr(i),kf(j)){if(N=j.nextSibling&&j.nextSibling.dataset,N)var H=N.dgst;N=H,u=Error(s(419)),u.stack="",u.digest=N,pl({value:u,source:null,stack:null}),i=Vd(r,i,o)}else if(at||ml(r,i,o,!1),N=(o&r.childLanes)!==0,at||N){if(N=Ie,N!==null&&(u=o&-o,u=(u&42)!==0?1:ku(u),u=(u&(N.suspendedLanes|o))!==0?0:u,u!==0&&u!==A.retryLane))throw A.retryLane=u,ri(r,u),Wt(N,r,u),l0;j.data==="$?"||af(),i=Vd(r,i,o)}else j.data==="$?"?(i.flags|=192,i.child=r.child,i=null):(r=A.treeContext,Ge=Sn(j.nextSibling),Mt=i,Re=!0,ds=null,An=!1,r!==null&&(on[cn++]=Vn,on[cn++]=qn,on[cn++]=cs,Vn=r.id,qn=r.overflow,cs=i),i=Id(i,u.children),i.flags|=4096);return i}return m?(Nr(),m=u.fallback,j=i.mode,A=r.child,H=A.sibling,u=In(A,{mode:"hidden",children:u.children}),u.subtreeFlags=A.subtreeFlags&65011712,H!==null?m=In(H,m):(m=as(m,j,o,null),m.flags|=2),m.return=i,u.return=i,u.sibling=m,i.child=u,u=m,m=i.child,j=r.child.memoizedState,j===null?j=Ud(o):(A=j.cachePool,A!==null?(H=tt._currentValue,A=A.parent!==H?{parent:H,pool:H}:A):A=tg(),j={baseLanes:j.baseLanes|o,cachePool:A}),m.memoizedState=j,m.childLanes=Pd(r,N,o),i.memoizedState=Hd,u):(Sr(i),o=r.child,r=o.sibling,o=In(o,{mode:"visible",children:u.children}),o.return=i,o.sibling=null,r!==null&&(N=i.deletions,N===null?(i.deletions=[r],i.flags|=16):N.push(r)),i.child=o,i.memoizedState=null,o)}function Id(r,i){return i=wo({mode:"visible",children:i},r.mode),i.return=r,r.child=i}function wo(r,i){return r=Kt(22,r,null,i),r.lanes=0,r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},r}function Vd(r,i,o){return pi(i,r.child,null,o),r=Id(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function g0(r,i,o){r.lanes|=i;var u=r.alternate;u!==null&&(u.lanes|=i),ld(r.return,i,o)}function qd(r,i,o,u,m){var x=r.memoizedState;x===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:m}:(x.isBackwards=i,x.rendering=null,x.renderingStartTime=0,x.last=u,x.tail=o,x.tailMode=m)}function x0(r,i,o){var u=i.pendingProps,m=u.revealOrder,x=u.tail;if(gt(r,i,u.children,o),u=nt.current,(u&2)!==0)u=u&1|2,i.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&g0(r,o,i);else if(r.tag===19)g0(r,o,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}u&=1}switch(Q(nt,u),m){case"forwards":for(o=i.child,m=null;o!==null;)r=o.alternate,r!==null&&bo(r)===null&&(m=o),o=o.sibling;o=m,o===null?(m=i.child,i.child=null):(m=o.sibling,o.sibling=null),qd(i,!1,m,o,x);break;case"backwards":for(o=null,m=i.child,i.child=null;m!==null;){if(r=m.alternate,r!==null&&bo(r)===null){i.child=m;break}r=m.sibling,m.sibling=o,o=m,m=r}qd(i,!0,o,null,x);break;case"together":qd(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Kn(r,i,o){if(r!==null&&(i.dependencies=r.dependencies),Er|=i.lanes,(o&i.childLanes)===0)if(r!==null){if(ml(r,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(r!==null&&i.child!==r.child)throw Error(s(153));if(i.child!==null){for(r=i.child,o=In(r,r.pendingProps),i.child=o,o.return=i;r.sibling!==null;)r=r.sibling,o=o.sibling=In(r,r.pendingProps),o.return=i;o.sibling=null}return i.child}function Fd(r,i){return(r.lanes&i)!==0?!0:(r=r.dependencies,!!(r!==null&&no(r)))}function S2(r,i,o){switch(i.tag){case 3:De(i,i.stateNode.containerInfo),gr(i,tt,r.memoizedState.cache),hl();break;case 27:case 5:Vs(i);break;case 4:De(i,i.stateNode.containerInfo);break;case 10:gr(i,i.type,i.memoizedProps.value);break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(Sr(i),i.flags|=128,null):(o&i.child.childLanes)!==0?m0(r,i,o):(Sr(i),r=Kn(r,i,o),r!==null?r.sibling:null);Sr(i);break;case 19:var m=(r.flags&128)!==0;if(u=(o&i.childLanes)!==0,u||(ml(r,i,o,!1),u=(o&i.childLanes)!==0),m){if(u)return x0(r,i,o);i.flags|=128}if(m=i.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),Q(nt,nt.current),u)break;return null;case 22:case 23:return i.lanes=0,u0(r,i,o);case 24:gr(i,tt,r.memoizedState.cache)}return Kn(r,i,o)}function y0(r,i,o){if(r!==null)if(r.memoizedProps!==i.pendingProps)at=!0;else{if(!Fd(r,o)&&(i.flags&128)===0)return at=!1,S2(r,i,o);at=(r.flags&131072)!==0}else at=!1,Re&&(i.flags&1048576)!==0&&Km(i,to,i.index);switch(i.lanes=0,i.tag){case 16:e:{r=i.pendingProps;var u=i.elementType,m=u._init;if(u=m(u._payload),i.type=u,typeof u=="function")Wu(u)?(r=xs(u,r),i.tag=1,i=h0(null,i,u,r,o)):(i.tag=0,i=_d(null,i,u,r,o));else{if(u!=null){if(m=u.$$typeof,m===q){i.tag=11,i=a0(null,i,u,r,o);break e}else if(m===L){i.tag=14,i=o0(null,i,u,r,o);break e}}throw i=ge(u)||u,Error(s(306,i,""))}}return i;case 0:return _d(r,i,i.type,i.pendingProps,o);case 1:return u=i.type,m=xs(u,i.pendingProps),h0(r,i,u,m,o);case 3:e:{if(De(i,i.stateNode.containerInfo),r===null)throw Error(s(387));u=i.pendingProps;var x=i.memoizedState;m=x.element,hd(r,i),Nl(i,u,null,o);var N=i.memoizedState;if(u=N.cache,gr(i,tt,u),u!==x.cache&&ad(i,[tt],o,!0),Sl(),u=N.element,x.isDehydrated)if(x={element:u,isDehydrated:!1,cache:N.cache},i.updateQueue.baseState=x,i.memoizedState=x,i.flags&256){i=p0(r,i,u,o);break e}else if(u!==m){m=ln(Error(s(424)),i),pl(m),i=p0(r,i,u,o);break e}else{switch(r=i.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(Ge=Sn(r.firstChild),Mt=i,Re=!0,ds=null,An=!0,o=Qg(i,null,u,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(hl(),u===m){i=Kn(r,i,o);break e}gt(r,i,u,o)}i=i.child}return i;case 26:return No(r,i),r===null?(o=Nx(i.type,null,i.pendingProps,null))?i.memoizedState=o:Re||(o=i.type,r=i.pendingProps,u=_o(ie.current).createElement(o),u[wt]=i,u[_t]=r,yt(u,o,r),lt(u),i.stateNode=u):i.memoizedState=Nx(i.type,r.memoizedProps,i.pendingProps,r.memoizedState),null;case 27:return Vs(i),r===null&&Re&&(u=i.stateNode=bx(i.type,i.pendingProps,ie.current),Mt=i,An=!0,m=Ge,Or(i.type)?(jf=m,Ge=Sn(u.firstChild)):Ge=m),gt(r,i,i.pendingProps.children,o),No(r,i),r===null&&(i.flags|=4194304),i.child;case 5:return r===null&&Re&&((m=u=Ge)&&(u=J2(u,i.type,i.pendingProps,An),u!==null?(i.stateNode=u,Mt=i,Ge=Sn(u.firstChild),An=!1,m=!0):m=!1),m||fs(i)),Vs(i),m=i.type,x=i.pendingProps,N=r!==null?r.memoizedProps:null,u=x.children,Sf(m,x)?u=null:N!==null&&Sf(m,N)&&(i.flags|=32),i.memoizedState!==null&&(m=bd(r,i,h2,null,null,o),Fl._currentValue=m),No(r,i),gt(r,i,u,o),i.child;case 6:return r===null&&Re&&((r=o=Ge)&&(o=Q2(o,i.pendingProps,An),o!==null?(i.stateNode=o,Mt=i,Ge=null,r=!0):r=!1),r||fs(i)),null;case 13:return m0(r,i,o);case 4:return De(i,i.stateNode.containerInfo),u=i.pendingProps,r===null?i.child=pi(i,null,u,o):gt(r,i,u,o),i.child;case 11:return a0(r,i,i.type,i.pendingProps,o);case 7:return gt(r,i,i.pendingProps,o),i.child;case 8:return gt(r,i,i.pendingProps.children,o),i.child;case 12:return gt(r,i,i.pendingProps.children,o),i.child;case 10:return u=i.pendingProps,gr(i,i.type,u.value),gt(r,i,u.children,o),i.child;case 9:return m=i.type._context,u=i.pendingProps.children,ps(i),m=kt(m),u=u(m),i.flags|=1,gt(r,i,u,o),i.child;case 14:return o0(r,i,i.type,i.pendingProps,o);case 15:return c0(r,i,i.type,i.pendingProps,o);case 19:return x0(r,i,o);case 31:return u=i.pendingProps,o=i.mode,u={mode:u.mode,children:u.children},r===null?(o=wo(u,o),o.ref=i.ref,i.child=o,o.return=i,i=o):(o=In(r.child,u),o.ref=i.ref,i.child=o,o.return=i,i=o),i;case 22:return u0(r,i,o);case 24:return ps(i),u=kt(tt),r===null?(m=ud(),m===null&&(m=Ie,x=od(),m.pooledCache=x,x.refCount++,x!==null&&(m.pooledCacheLanes|=o),m=x),i.memoizedState={parent:u,cache:m},fd(i),gr(i,tt,m)):((r.lanes&o)!==0&&(hd(r,i),Nl(i,null,null,o),Sl()),m=r.memoizedState,x=i.memoizedState,m.parent!==u?(m={parent:u,cache:u},i.memoizedState=m,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=m),gr(i,tt,u)):(u=x.cache,gr(i,tt,u),u!==m.cache&&ad(i,[tt],o,!0))),gt(r,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function Jn(r){r.flags|=4}function b0(r,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!Ex(i)){if(i=un.current,i!==null&&((Me&4194048)===Me?Tn!==null:(Me&62914560)!==Me&&(Me&536870912)===0||i!==Tn))throw bl=dd,ng;r.flags|=8192}}function ko(r,i){i!==null&&(r.flags|=4),r.flags&16384&&(i=r.tag!==22?Xp():536870912,r.lanes|=i,yi|=i)}function Tl(r,i){if(!Re)switch(r.tailMode){case"hidden":i=r.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function $e(r){var i=r.alternate!==null&&r.alternate.child===r.child,o=0,u=0;if(i)for(var m=r.child;m!==null;)o|=m.lanes|m.childLanes,u|=m.subtreeFlags&65011712,u|=m.flags&65011712,m.return=r,m=m.sibling;else for(m=r.child;m!==null;)o|=m.lanes|m.childLanes,u|=m.subtreeFlags,u|=m.flags,m.return=r,m=m.sibling;return r.subtreeFlags|=u,r.childLanes=o,i}function N2(r,i,o){var u=i.pendingProps;switch(rd(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $e(i),null;case 1:return $e(i),null;case 3:return o=i.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),$n(tt),Ft(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(r===null||r.child===null)&&(fl(i)?Jn(i):r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Xm())),$e(i),null;case 26:return o=i.memoizedState,r===null?(Jn(i),o!==null?($e(i),b0(i,o)):($e(i),i.flags&=-16777217)):o?o!==r.memoizedState?(Jn(i),$e(i),b0(i,o)):($e(i),i.flags&=-16777217):(r.memoizedProps!==u&&Jn(i),$e(i),i.flags&=-16777217),null;case 27:Bt(i),o=ie.current;var m=i.type;if(r!==null&&i.stateNode!=null)r.memoizedProps!==u&&Jn(i);else{if(!u){if(i.stateNode===null)throw Error(s(166));return $e(i),null}r=X.current,fl(i)?Jm(i):(r=bx(m,u,o),i.stateNode=r,Jn(i))}return $e(i),null;case 5:if(Bt(i),o=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==u&&Jn(i);else{if(!u){if(i.stateNode===null)throw Error(s(166));return $e(i),null}if(r=X.current,fl(i))Jm(i);else{switch(m=_o(ie.current),r){case 1:r=m.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:r=m.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":r=m.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":r=m.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":r=m.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof u.is=="string"?m.createElement("select",{is:u.is}):m.createElement("select"),u.multiple?r.multiple=!0:u.size&&(r.size=u.size);break;default:r=typeof u.is=="string"?m.createElement(o,{is:u.is}):m.createElement(o)}}r[wt]=i,r[_t]=u;e:for(m=i.child;m!==null;){if(m.tag===5||m.tag===6)r.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===i)break e;for(;m.sibling===null;){if(m.return===null||m.return===i)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}i.stateNode=r;e:switch(yt(r,o,u),o){case"button":case"input":case"select":case"textarea":r=!!u.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&Jn(i)}}return $e(i),i.flags&=-16777217,null;case 6:if(r&&i.stateNode!=null)r.memoizedProps!==u&&Jn(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(s(166));if(r=ie.current,fl(i)){if(r=i.stateNode,o=i.memoizedProps,u=null,m=Mt,m!==null)switch(m.tag){case 27:case 5:u=m.memoizedProps}r[wt]=i,r=!!(r.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||fx(r.nodeValue,o)),r||fs(i)}else r=_o(r).createTextNode(u),r[wt]=i,i.stateNode=r}return $e(i),null;case 13:if(u=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(m=fl(i),u!==null&&u.dehydrated!==null){if(r===null){if(!m)throw Error(s(318));if(m=i.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(s(317));m[wt]=i}else hl(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;$e(i),m=!1}else m=Xm(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=m),m=!0;if(!m)return i.flags&256?(Yn(i),i):(Yn(i),null)}if(Yn(i),(i.flags&128)!==0)return i.lanes=o,i;if(o=u!==null,r=r!==null&&r.memoizedState!==null,o){u=i.child,m=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(m=u.alternate.memoizedState.cachePool.pool);var x=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(x=u.memoizedState.cachePool.pool),x!==m&&(u.flags|=2048)}return o!==r&&o&&(i.child.flags|=8192),ko(i,i.updateQueue),$e(i),null;case 4:return Ft(),r===null&&gf(i.stateNode.containerInfo),$e(i),null;case 10:return $n(i.type),$e(i),null;case 19:if(F(nt),m=i.memoizedState,m===null)return $e(i),null;if(u=(i.flags&128)!==0,x=m.rendering,x===null)if(u)Tl(m,!1);else{if(Ye!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(x=bo(r),x!==null){for(i.flags|=128,Tl(m,!1),r=x.updateQueue,i.updateQueue=r,ko(i,r),i.subtreeFlags=0,r=o,o=i.child;o!==null;)Ym(o,r),o=o.sibling;return Q(nt,nt.current&1|2),i.child}r=r.sibling}m.tail!==null&&En()>Eo&&(i.flags|=128,u=!0,Tl(m,!1),i.lanes=4194304)}else{if(!u)if(r=bo(x),r!==null){if(i.flags|=128,u=!0,r=r.updateQueue,i.updateQueue=r,ko(i,r),Tl(m,!0),m.tail===null&&m.tailMode==="hidden"&&!x.alternate&&!Re)return $e(i),null}else 2*En()-m.renderingStartTime>Eo&&o!==536870912&&(i.flags|=128,u=!0,Tl(m,!1),i.lanes=4194304);m.isBackwards?(x.sibling=i.child,i.child=x):(r=m.last,r!==null?r.sibling=x:i.child=x,m.last=x)}return m.tail!==null?(i=m.tail,m.rendering=i,m.tail=i.sibling,m.renderingStartTime=En(),i.sibling=null,r=nt.current,Q(nt,u?r&1|2:r&1),i):($e(i),null);case 22:case 23:return Yn(i),xd(),u=i.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(o&536870912)!==0&&(i.flags&128)===0&&($e(i),i.subtreeFlags&6&&(i.flags|=8192)):$e(i),o=i.updateQueue,o!==null&&ko(i,o.retryQueue),o=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==o&&(i.flags|=2048),r!==null&&F(ms),null;case 24:return o=null,r!==null&&(o=r.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),$n(tt),$e(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function w2(r,i){switch(rd(i),i.tag){case 1:return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return $n(tt),Ft(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 26:case 27:case 5:return Bt(i),null;case 13:if(Yn(i),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(s(340));hl()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return F(nt),null;case 4:return Ft(),null;case 10:return $n(i.type),null;case 22:case 23:return Yn(i),xd(),r!==null&&F(ms),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 24:return $n(tt),null;case 25:return null;default:return null}}function v0(r,i){switch(rd(i),i.tag){case 3:$n(tt),Ft();break;case 26:case 27:case 5:Bt(i);break;case 4:Ft();break;case 13:Yn(i);break;case 19:F(nt);break;case 10:$n(i.type);break;case 22:case 23:Yn(i),xd(),r!==null&&F(ms);break;case 24:$n(tt)}}function Ml(r,i){try{var o=i.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var m=u.next;o=m;do{if((o.tag&r)===r){u=void 0;var x=o.create,N=o.inst;u=x(),N.destroy=u}o=o.next}while(o!==m)}}catch(j){Ue(i,i.return,j)}}function wr(r,i,o){try{var u=i.updateQueue,m=u!==null?u.lastEffect:null;if(m!==null){var x=m.next;u=x;do{if((u.tag&r)===r){var N=u.inst,j=N.destroy;if(j!==void 0){N.destroy=void 0,m=i;var A=o,H=j;try{H()}catch($){Ue(m,A,$)}}}u=u.next}while(u!==x)}}catch($){Ue(i,i.return,$)}}function S0(r){var i=r.updateQueue;if(i!==null){var o=r.stateNode;try{og(i,o)}catch(u){Ue(r,r.return,u)}}}function N0(r,i,o){o.props=xs(r.type,r.memoizedProps),o.state=r.memoizedState;try{o.componentWillUnmount()}catch(u){Ue(r,i,u)}}function Ol(r,i){try{var o=r.ref;if(o!==null){switch(r.tag){case 26:case 27:case 5:var u=r.stateNode;break;case 30:u=r.stateNode;break;default:u=r.stateNode}typeof o=="function"?r.refCleanup=o(u):o.current=u}}catch(m){Ue(r,i,m)}}function Mn(r,i){var o=r.ref,u=r.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(m){Ue(r,i,m)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(m){Ue(r,i,m)}else o.current=null}function w0(r){var i=r.type,o=r.memoizedProps,u=r.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(m){Ue(r,r.return,m)}}function $d(r,i,o){try{var u=r.stateNode;F2(u,r.type,o,i),u[_t]=i}catch(m){Ue(r,r.return,m)}}function k0(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Or(r.type)||r.tag===4}function Gd(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||k0(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Or(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Yd(r,i,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(r,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(r),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=Bo));else if(u!==4&&(u===27&&Or(r.type)&&(o=r.stateNode,i=null),r=r.child,r!==null))for(Yd(r,i,o),r=r.sibling;r!==null;)Yd(r,i,o),r=r.sibling}function jo(r,i,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,i?o.insertBefore(r,i):o.appendChild(r);else if(u!==4&&(u===27&&Or(r.type)&&(o=r.stateNode),r=r.child,r!==null))for(jo(r,i,o),r=r.sibling;r!==null;)jo(r,i,o),r=r.sibling}function j0(r){var i=r.stateNode,o=r.memoizedProps;try{for(var u=r.type,m=i.attributes;m.length;)i.removeAttributeNode(m[0]);yt(i,u,o),i[wt]=r,i[_t]=o}catch(x){Ue(r,r.return,x)}}var Qn=!1,Xe=!1,Kd=!1,C0=typeof WeakSet=="function"?WeakSet:Set,ot=null;function k2(r,i){if(r=r.containerInfo,bf=qo,r=_m(r),Gu(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else e:{o=(o=r.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var m=u.anchorOffset,x=u.focusNode;u=u.focusOffset;try{o.nodeType,x.nodeType}catch{o=null;break e}var N=0,j=-1,A=-1,H=0,$=0,J=r,U=null;t:for(;;){for(var V;J!==o||m!==0&&J.nodeType!==3||(j=N+m),J!==x||u!==0&&J.nodeType!==3||(A=N+u),J.nodeType===3&&(N+=J.nodeValue.length),(V=J.firstChild)!==null;)U=J,J=V;for(;;){if(J===r)break t;if(U===o&&++H===m&&(j=N),U===x&&++$===u&&(A=N),(V=J.nextSibling)!==null)break;J=U,U=J.parentNode}J=V}o=j===-1||A===-1?null:{start:j,end:A}}else o=null}o=o||{start:0,end:0}}else o=null;for(vf={focusedElem:r,selectionRange:o},qo=!1,ot=i;ot!==null;)if(i=ot,r=i.child,(i.subtreeFlags&1024)!==0&&r!==null)r.return=i,ot=r;else for(;ot!==null;){switch(i=ot,x=i.alternate,r=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&x!==null){r=void 0,o=i,m=x.memoizedProps,x=x.memoizedState,u=o.stateNode;try{var xe=xs(o.type,m,o.elementType===o.type);r=u.getSnapshotBeforeUpdate(xe,x),u.__reactInternalSnapshotBeforeUpdate=r}catch(he){Ue(o,o.return,he)}}break;case 3:if((r&1024)!==0){if(r=i.stateNode.containerInfo,o=r.nodeType,o===9)wf(r);else if(o===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":wf(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(s(163))}if(r=i.sibling,r!==null){r.return=i.return,ot=r;break}ot=i.return}}function E0(r,i,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:kr(r,o),u&4&&Ml(5,o);break;case 1:if(kr(r,o),u&4)if(r=o.stateNode,i===null)try{r.componentDidMount()}catch(N){Ue(o,o.return,N)}else{var m=xs(o.type,i.memoizedProps);i=i.memoizedState;try{r.componentDidUpdate(m,i,r.__reactInternalSnapshotBeforeUpdate)}catch(N){Ue(o,o.return,N)}}u&64&&S0(o),u&512&&Ol(o,o.return);break;case 3:if(kr(r,o),u&64&&(r=o.updateQueue,r!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{og(r,i)}catch(N){Ue(o,o.return,N)}}break;case 27:i===null&&u&4&&j0(o);case 26:case 5:kr(r,o),i===null&&u&4&&w0(o),u&512&&Ol(o,o.return);break;case 12:kr(r,o);break;case 13:kr(r,o),u&4&&M0(r,o),u&64&&(r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(o=D2.bind(null,o),X2(r,o))));break;case 22:if(u=o.memoizedState!==null||Qn,!u){i=i!==null&&i.memoizedState!==null||Xe,m=Qn;var x=Xe;Qn=u,(Xe=i)&&!x?jr(r,o,(o.subtreeFlags&8772)!==0):kr(r,o),Qn=m,Xe=x}break;case 30:break;default:kr(r,o)}}function A0(r){var i=r.alternate;i!==null&&(r.alternate=null,A0(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&Eu(i)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var qe=null,Pt=!1;function Xn(r,i,o){for(o=o.child;o!==null;)T0(r,i,o),o=o.sibling}function T0(r,i,o){if($t&&typeof $t.onCommitFiberUnmount=="function")try{$t.onCommitFiberUnmount(Zi,o)}catch{}switch(o.tag){case 26:Xe||Mn(o,i),Xn(r,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Xe||Mn(o,i);var u=qe,m=Pt;Or(o.type)&&(qe=o.stateNode,Pt=!1),Xn(r,i,o),Pl(o.stateNode),qe=u,Pt=m;break;case 5:Xe||Mn(o,i);case 6:if(u=qe,m=Pt,qe=null,Xn(r,i,o),qe=u,Pt=m,qe!==null)if(Pt)try{(qe.nodeType===9?qe.body:qe.nodeName==="HTML"?qe.ownerDocument.body:qe).removeChild(o.stateNode)}catch(x){Ue(o,i,x)}else try{qe.removeChild(o.stateNode)}catch(x){Ue(o,i,x)}break;case 18:qe!==null&&(Pt?(r=qe,xx(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.stateNode),Kl(r)):xx(qe,o.stateNode));break;case 4:u=qe,m=Pt,qe=o.stateNode.containerInfo,Pt=!0,Xn(r,i,o),qe=u,Pt=m;break;case 0:case 11:case 14:case 15:Xe||wr(2,o,i),Xe||wr(4,o,i),Xn(r,i,o);break;case 1:Xe||(Mn(o,i),u=o.stateNode,typeof u.componentWillUnmount=="function"&&N0(o,i,u)),Xn(r,i,o);break;case 21:Xn(r,i,o);break;case 22:Xe=(u=Xe)||o.memoizedState!==null,Xn(r,i,o),Xe=u;break;default:Xn(r,i,o)}}function M0(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Kl(r)}catch(o){Ue(i,i.return,o)}}function j2(r){switch(r.tag){case 13:case 19:var i=r.stateNode;return i===null&&(i=r.stateNode=new C0),i;case 22:return r=r.stateNode,i=r._retryCache,i===null&&(i=r._retryCache=new C0),i;default:throw Error(s(435,r.tag))}}function Jd(r,i){var o=j2(r);i.forEach(function(u){var m=z2.bind(null,r,u);o.has(u)||(o.add(u),u.then(m,m))})}function Jt(r,i){var o=i.deletions;if(o!==null)for(var u=0;u<o.length;u++){var m=o[u],x=r,N=i,j=N;e:for(;j!==null;){switch(j.tag){case 27:if(Or(j.type)){qe=j.stateNode,Pt=!1;break e}break;case 5:qe=j.stateNode,Pt=!1;break e;case 3:case 4:qe=j.stateNode.containerInfo,Pt=!0;break e}j=j.return}if(qe===null)throw Error(s(160));T0(x,N,m),qe=null,Pt=!1,x=m.alternate,x!==null&&(x.return=null),m.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)O0(i,r),i=i.sibling}var vn=null;function O0(r,i){var o=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Jt(i,r),Qt(r),u&4&&(wr(3,r,r.return),Ml(3,r),wr(5,r,r.return));break;case 1:Jt(i,r),Qt(r),u&512&&(Xe||o===null||Mn(o,o.return)),u&64&&Qn&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(o=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var m=vn;if(Jt(i,r),Qt(r),u&512&&(Xe||o===null||Mn(o,o.return)),u&4){var x=o!==null?o.memoizedState:null;if(u=r.memoizedState,o===null)if(u===null)if(r.stateNode===null){e:{u=r.type,o=r.memoizedProps,m=m.ownerDocument||m;t:switch(u){case"title":x=m.getElementsByTagName("title")[0],(!x||x[tl]||x[wt]||x.namespaceURI==="http://www.w3.org/2000/svg"||x.hasAttribute("itemprop"))&&(x=m.createElement(u),m.head.insertBefore(x,m.querySelector("head > title"))),yt(x,u,o),x[wt]=r,lt(x),u=x;break e;case"link":var N=jx("link","href",m).get(u+(o.href||""));if(N){for(var j=0;j<N.length;j++)if(x=N[j],x.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&x.getAttribute("rel")===(o.rel==null?null:o.rel)&&x.getAttribute("title")===(o.title==null?null:o.title)&&x.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){N.splice(j,1);break t}}x=m.createElement(u),yt(x,u,o),m.head.appendChild(x);break;case"meta":if(N=jx("meta","content",m).get(u+(o.content||""))){for(j=0;j<N.length;j++)if(x=N[j],x.getAttribute("content")===(o.content==null?null:""+o.content)&&x.getAttribute("name")===(o.name==null?null:o.name)&&x.getAttribute("property")===(o.property==null?null:o.property)&&x.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&x.getAttribute("charset")===(o.charSet==null?null:o.charSet)){N.splice(j,1);break t}}x=m.createElement(u),yt(x,u,o),m.head.appendChild(x);break;default:throw Error(s(468,u))}x[wt]=r,lt(x),u=x}r.stateNode=u}else Cx(m,r.type,r.stateNode);else r.stateNode=kx(m,u,r.memoizedProps);else x!==u?(x===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):x.count--,u===null?Cx(m,r.type,r.stateNode):kx(m,u,r.memoizedProps)):u===null&&r.stateNode!==null&&$d(r,r.memoizedProps,o.memoizedProps)}break;case 27:Jt(i,r),Qt(r),u&512&&(Xe||o===null||Mn(o,o.return)),o!==null&&u&4&&$d(r,r.memoizedProps,o.memoizedProps);break;case 5:if(Jt(i,r),Qt(r),u&512&&(Xe||o===null||Mn(o,o.return)),r.flags&32){m=r.stateNode;try{Qs(m,"")}catch(V){Ue(r,r.return,V)}}u&4&&r.stateNode!=null&&(m=r.memoizedProps,$d(r,m,o!==null?o.memoizedProps:m)),u&1024&&(Kd=!0);break;case 6:if(Jt(i,r),Qt(r),u&4){if(r.stateNode===null)throw Error(s(162));u=r.memoizedProps,o=r.stateNode;try{o.nodeValue=u}catch(V){Ue(r,r.return,V)}}break;case 3:if(Po=null,m=vn,vn=Ho(i.containerInfo),Jt(i,r),vn=m,Qt(r),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Kl(i.containerInfo)}catch(V){Ue(r,r.return,V)}Kd&&(Kd=!1,R0(r));break;case 4:u=vn,vn=Ho(r.stateNode.containerInfo),Jt(i,r),Qt(r),vn=u;break;case 12:Jt(i,r),Qt(r);break;case 13:Jt(i,r),Qt(r),r.child.flags&8192&&r.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(tf=En()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Jd(r,u)));break;case 22:m=r.memoizedState!==null;var A=o!==null&&o.memoizedState!==null,H=Qn,$=Xe;if(Qn=H||m,Xe=$||A,Jt(i,r),Xe=$,Qn=H,Qt(r),u&8192)e:for(i=r.stateNode,i._visibility=m?i._visibility&-2:i._visibility|1,m&&(o===null||A||Qn||Xe||ys(r)),o=null,i=r;;){if(i.tag===5||i.tag===26){if(o===null){A=o=i;try{if(x=A.stateNode,m)N=x.style,typeof N.setProperty=="function"?N.setProperty("display","none","important"):N.display="none";else{j=A.stateNode;var J=A.memoizedProps.style,U=J!=null&&J.hasOwnProperty("display")?J.display:null;j.style.display=U==null||typeof U=="boolean"?"":(""+U).trim()}}catch(V){Ue(A,A.return,V)}}}else if(i.tag===6){if(o===null){A=i;try{A.stateNode.nodeValue=m?"":A.memoizedProps}catch(V){Ue(A,A.return,V)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===r)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=r.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Jd(r,o))));break;case 19:Jt(i,r),Qt(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Jd(r,u)));break;case 30:break;case 21:break;default:Jt(i,r),Qt(r)}}function Qt(r){var i=r.flags;if(i&2){try{for(var o,u=r.return;u!==null;){if(k0(u)){o=u;break}u=u.return}if(o==null)throw Error(s(160));switch(o.tag){case 27:var m=o.stateNode,x=Gd(r);jo(r,x,m);break;case 5:var N=o.stateNode;o.flags&32&&(Qs(N,""),o.flags&=-33);var j=Gd(r);jo(r,j,N);break;case 3:case 4:var A=o.stateNode.containerInfo,H=Gd(r);Yd(r,H,A);break;default:throw Error(s(161))}}catch($){Ue(r,r.return,$)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function R0(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var i=r;R0(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),r=r.sibling}}function kr(r,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)E0(r,i.alternate,i),i=i.sibling}function ys(r){for(r=r.child;r!==null;){var i=r;switch(i.tag){case 0:case 11:case 14:case 15:wr(4,i,i.return),ys(i);break;case 1:Mn(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&N0(i,i.return,o),ys(i);break;case 27:Pl(i.stateNode);case 26:case 5:Mn(i,i.return),ys(i);break;case 22:i.memoizedState===null&&ys(i);break;case 30:ys(i);break;default:ys(i)}r=r.sibling}}function jr(r,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,m=r,x=i,N=x.flags;switch(x.tag){case 0:case 11:case 15:jr(m,x,o),Ml(4,x);break;case 1:if(jr(m,x,o),u=x,m=u.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(H){Ue(u,u.return,H)}if(u=x,m=u.updateQueue,m!==null){var j=u.stateNode;try{var A=m.shared.hiddenCallbacks;if(A!==null)for(m.shared.hiddenCallbacks=null,m=0;m<A.length;m++)ag(A[m],j)}catch(H){Ue(u,u.return,H)}}o&&N&64&&S0(x),Ol(x,x.return);break;case 27:j0(x);case 26:case 5:jr(m,x,o),o&&u===null&&N&4&&w0(x),Ol(x,x.return);break;case 12:jr(m,x,o);break;case 13:jr(m,x,o),o&&N&4&&M0(m,x);break;case 22:x.memoizedState===null&&jr(m,x,o),Ol(x,x.return);break;case 30:break;default:jr(m,x,o)}i=i.sibling}}function Qd(r,i){var o=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),r=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==o&&(r!=null&&r.refCount++,o!=null&&gl(o))}function Xd(r,i){r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&gl(r))}function On(r,i,o,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)D0(r,i,o,u),i=i.sibling}function D0(r,i,o,u){var m=i.flags;switch(i.tag){case 0:case 11:case 15:On(r,i,o,u),m&2048&&Ml(9,i);break;case 1:On(r,i,o,u);break;case 3:On(r,i,o,u),m&2048&&(r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&gl(r)));break;case 12:if(m&2048){On(r,i,o,u),r=i.stateNode;try{var x=i.memoizedProps,N=x.id,j=x.onPostCommit;typeof j=="function"&&j(N,i.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(A){Ue(i,i.return,A)}}else On(r,i,o,u);break;case 13:On(r,i,o,u);break;case 23:break;case 22:x=i.stateNode,N=i.alternate,i.memoizedState!==null?x._visibility&2?On(r,i,o,u):Rl(r,i):x._visibility&2?On(r,i,o,u):(x._visibility|=2,mi(r,i,o,u,(i.subtreeFlags&10256)!==0)),m&2048&&Qd(N,i);break;case 24:On(r,i,o,u),m&2048&&Xd(i.alternate,i);break;default:On(r,i,o,u)}}function mi(r,i,o,u,m){for(m=m&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var x=r,N=i,j=o,A=u,H=N.flags;switch(N.tag){case 0:case 11:case 15:mi(x,N,j,A,m),Ml(8,N);break;case 23:break;case 22:var $=N.stateNode;N.memoizedState!==null?$._visibility&2?mi(x,N,j,A,m):Rl(x,N):($._visibility|=2,mi(x,N,j,A,m)),m&&H&2048&&Qd(N.alternate,N);break;case 24:mi(x,N,j,A,m),m&&H&2048&&Xd(N.alternate,N);break;default:mi(x,N,j,A,m)}i=i.sibling}}function Rl(r,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=r,u=i,m=u.flags;switch(u.tag){case 22:Rl(o,u),m&2048&&Qd(u.alternate,u);break;case 24:Rl(o,u),m&2048&&Xd(u.alternate,u);break;default:Rl(o,u)}i=i.sibling}}var Dl=8192;function gi(r){if(r.subtreeFlags&Dl)for(r=r.child;r!==null;)z0(r),r=r.sibling}function z0(r){switch(r.tag){case 26:gi(r),r.flags&Dl&&r.memoizedState!==null&&uN(vn,r.memoizedState,r.memoizedProps);break;case 5:gi(r);break;case 3:case 4:var i=vn;vn=Ho(r.stateNode.containerInfo),gi(r),vn=i;break;case 22:r.memoizedState===null&&(i=r.alternate,i!==null&&i.memoizedState!==null?(i=Dl,Dl=16777216,gi(r),Dl=i):gi(r));break;default:gi(r)}}function L0(r){var i=r.alternate;if(i!==null&&(r=i.child,r!==null)){i.child=null;do i=r.sibling,r.sibling=null,r=i;while(r!==null)}}function zl(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];ot=u,_0(u,r)}L0(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)B0(r),r=r.sibling}function B0(r){switch(r.tag){case 0:case 11:case 15:zl(r),r.flags&2048&&wr(9,r,r.return);break;case 3:zl(r);break;case 12:zl(r);break;case 22:var i=r.stateNode;r.memoizedState!==null&&i._visibility&2&&(r.return===null||r.return.tag!==13)?(i._visibility&=-3,Co(r)):zl(r);break;default:zl(r)}}function Co(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];ot=u,_0(u,r)}L0(r)}for(r=r.child;r!==null;){switch(i=r,i.tag){case 0:case 11:case 15:wr(8,i,i.return),Co(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,Co(i));break;default:Co(i)}r=r.sibling}}function _0(r,i){for(;ot!==null;){var o=ot;switch(o.tag){case 0:case 11:case 15:wr(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:gl(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,ot=u;else e:for(o=r;ot!==null;){u=ot;var m=u.sibling,x=u.return;if(A0(u),u===o){ot=null;break e}if(m!==null){m.return=x,ot=m;break e}ot=x}}}var C2={getCacheForType:function(r){var i=kt(tt),o=i.data.get(r);return o===void 0&&(o=r(),i.data.set(r,o)),o}},E2=typeof WeakMap=="function"?WeakMap:Map,ze=0,Ie=null,Ce=null,Me=0,Le=0,Xt=null,Cr=!1,xi=!1,Zd=!1,Zn=0,Ye=0,Er=0,bs=0,Wd=0,dn=0,yi=0,Ll=null,It=null,ef=!1,tf=0,Eo=1/0,Ao=null,Ar=null,xt=0,Tr=null,bi=null,vi=0,nf=0,rf=null,H0=null,Bl=0,sf=null;function Zt(){if((ze&2)!==0&&Me!==0)return Me&-Me;if(P.T!==null){var r=ai;return r!==0?r:ff()}return em()}function U0(){dn===0&&(dn=(Me&536870912)===0||Re?Qp():536870912);var r=un.current;return r!==null&&(r.flags|=32),dn}function Wt(r,i,o){(r===Ie&&(Le===2||Le===9)||r.cancelPendingCommit!==null)&&(Si(r,0),Mr(r,Me,dn,!1)),el(r,o),((ze&2)===0||r!==Ie)&&(r===Ie&&((ze&2)===0&&(bs|=o),Ye===4&&Mr(r,Me,dn,!1)),Rn(r))}function P0(r,i,o){if((ze&6)!==0)throw Error(s(327));var u=!o&&(i&124)===0&&(i&r.expiredLanes)===0||Wi(r,i),m=u?M2(r,i):of(r,i,!0),x=u;do{if(m===0){xi&&!u&&Mr(r,i,0,!1);break}else{if(o=r.current.alternate,x&&!A2(o)){m=of(r,i,!1),x=!1;continue}if(m===2){if(x=i,r.errorRecoveryDisabledLanes&x)var N=0;else N=r.pendingLanes&-536870913,N=N!==0?N:N&536870912?536870912:0;if(N!==0){i=N;e:{var j=r;m=Ll;var A=j.current.memoizedState.isDehydrated;if(A&&(Si(j,N).flags|=256),N=of(j,N,!1),N!==2){if(Zd&&!A){j.errorRecoveryDisabledLanes|=x,bs|=x,m=4;break e}x=It,It=m,x!==null&&(It===null?It=x:It.push.apply(It,x))}m=N}if(x=!1,m!==2)continue}}if(m===1){Si(r,0),Mr(r,i,0,!0);break}e:{switch(u=r,x=m,x){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Mr(u,i,dn,!Cr);break e;case 2:It=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(m=tf+300-En(),10<m)){if(Mr(u,i,dn,!Cr),Ha(u,0,!0)!==0)break e;u.timeoutHandle=mx(I0.bind(null,u,o,It,Ao,ef,i,dn,bs,yi,Cr,x,2,-0,0),m);break e}I0(u,o,It,Ao,ef,i,dn,bs,yi,Cr,x,0,-0,0)}}break}while(!0);Rn(r)}function I0(r,i,o,u,m,x,N,j,A,H,$,J,U,V){if(r.timeoutHandle=-1,J=i.subtreeFlags,(J&8192||(J&16785408)===16785408)&&(ql={stylesheets:null,count:0,unsuspend:cN},z0(i),J=dN(),J!==null)){r.cancelPendingCommit=J(K0.bind(null,r,i,x,o,u,m,N,j,A,$,1,U,V)),Mr(r,x,N,!H);return}K0(r,i,x,o,u,m,N,j,A)}function A2(r){for(var i=r;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var m=o[u],x=m.getSnapshot;m=m.value;try{if(!Yt(x(),m))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Mr(r,i,o,u){i&=~Wd,i&=~bs,r.suspendedLanes|=i,r.pingedLanes&=~i,u&&(r.warmLanes|=i),u=r.expirationTimes;for(var m=i;0<m;){var x=31-Gt(m),N=1<<x;u[x]=-1,m&=~N}o!==0&&Zp(r,o,i)}function To(){return(ze&6)===0?(_l(0),!1):!0}function lf(){if(Ce!==null){if(Le===0)var r=Ce.return;else r=Ce,Fn=hs=null,Nd(r),hi=null,El=0,r=Ce;for(;r!==null;)v0(r.alternate,r),r=r.return;Ce=null}}function Si(r,i){var o=r.timeoutHandle;o!==-1&&(r.timeoutHandle=-1,G2(o)),o=r.cancelPendingCommit,o!==null&&(r.cancelPendingCommit=null,o()),lf(),Ie=r,Ce=o=In(r.current,null),Me=i,Le=0,Xt=null,Cr=!1,xi=Wi(r,i),Zd=!1,yi=dn=Wd=bs=Er=Ye=0,It=Ll=null,ef=!1,(i&8)!==0&&(i|=i&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=i;0<u;){var m=31-Gt(u),x=1<<m;i|=r[m],u&=~x}return Zn=i,Qa(),o}function V0(r,i){we=null,P.H=go,i===yl||i===io?(i=ig(),Le=3):i===ng?(i=ig(),Le=4):Le=i===l0?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Xt=i,Ce===null&&(Ye=1,So(r,ln(i,r.current)))}function q0(){var r=P.H;return P.H=go,r===null?go:r}function F0(){var r=P.A;return P.A=C2,r}function af(){Ye=4,Cr||(Me&4194048)!==Me&&un.current!==null||(xi=!0),(Er&134217727)===0&&(bs&134217727)===0||Ie===null||Mr(Ie,Me,dn,!1)}function of(r,i,o){var u=ze;ze|=2;var m=q0(),x=F0();(Ie!==r||Me!==i)&&(Ao=null,Si(r,i)),i=!1;var N=Ye;e:do try{if(Le!==0&&Ce!==null){var j=Ce,A=Xt;switch(Le){case 8:lf(),N=6;break e;case 3:case 2:case 9:case 6:un.current===null&&(i=!0);var H=Le;if(Le=0,Xt=null,Ni(r,j,A,H),o&&xi){N=0;break e}break;default:H=Le,Le=0,Xt=null,Ni(r,j,A,H)}}T2(),N=Ye;break}catch($){V0(r,$)}while(!0);return i&&r.shellSuspendCounter++,Fn=hs=null,ze=u,P.H=m,P.A=x,Ce===null&&(Ie=null,Me=0,Qa()),N}function T2(){for(;Ce!==null;)$0(Ce)}function M2(r,i){var o=ze;ze|=2;var u=q0(),m=F0();Ie!==r||Me!==i?(Ao=null,Eo=En()+500,Si(r,i)):xi=Wi(r,i);e:do try{if(Le!==0&&Ce!==null){i=Ce;var x=Xt;t:switch(Le){case 1:Le=0,Xt=null,Ni(r,i,x,1);break;case 2:case 9:if(rg(x)){Le=0,Xt=null,G0(i);break}i=function(){Le!==2&&Le!==9||Ie!==r||(Le=7),Rn(r)},x.then(i,i);break e;case 3:Le=7;break e;case 4:Le=5;break e;case 7:rg(x)?(Le=0,Xt=null,G0(i)):(Le=0,Xt=null,Ni(r,i,x,7));break;case 5:var N=null;switch(Ce.tag){case 26:N=Ce.memoizedState;case 5:case 27:var j=Ce;if(!N||Ex(N)){Le=0,Xt=null;var A=j.sibling;if(A!==null)Ce=A;else{var H=j.return;H!==null?(Ce=H,Mo(H)):Ce=null}break t}}Le=0,Xt=null,Ni(r,i,x,5);break;case 6:Le=0,Xt=null,Ni(r,i,x,6);break;case 8:lf(),Ye=6;break e;default:throw Error(s(462))}}O2();break}catch($){V0(r,$)}while(!0);return Fn=hs=null,P.H=u,P.A=m,ze=o,Ce!==null?0:(Ie=null,Me=0,Qa(),Ye)}function O2(){for(;Ce!==null&&!Wv();)$0(Ce)}function $0(r){var i=y0(r.alternate,r,Zn);r.memoizedProps=r.pendingProps,i===null?Mo(r):Ce=i}function G0(r){var i=r,o=i.alternate;switch(i.tag){case 15:case 0:i=f0(o,i,i.pendingProps,i.type,void 0,Me);break;case 11:i=f0(o,i,i.pendingProps,i.type.render,i.ref,Me);break;case 5:Nd(i);default:v0(o,i),i=Ce=Ym(i,Zn),i=y0(o,i,Zn)}r.memoizedProps=r.pendingProps,i===null?Mo(r):Ce=i}function Ni(r,i,o,u){Fn=hs=null,Nd(i),hi=null,El=0;var m=i.return;try{if(v2(r,m,i,o,Me)){Ye=1,So(r,ln(o,r.current)),Ce=null;return}}catch(x){if(m!==null)throw Ce=m,x;Ye=1,So(r,ln(o,r.current)),Ce=null;return}i.flags&32768?(Re||u===1?r=!0:xi||(Me&536870912)!==0?r=!1:(Cr=r=!0,(u===2||u===9||u===3||u===6)&&(u=un.current,u!==null&&u.tag===13&&(u.flags|=16384))),Y0(i,r)):Mo(i)}function Mo(r){var i=r;do{if((i.flags&32768)!==0){Y0(i,Cr);return}r=i.return;var o=N2(i.alternate,i,Zn);if(o!==null){Ce=o;return}if(i=i.sibling,i!==null){Ce=i;return}Ce=i=r}while(i!==null);Ye===0&&(Ye=5)}function Y0(r,i){do{var o=w2(r.alternate,r);if(o!==null){o.flags&=32767,Ce=o;return}if(o=r.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(r=r.sibling,r!==null)){Ce=r;return}Ce=r=o}while(r!==null);Ye=6,Ce=null}function K0(r,i,o,u,m,x,N,j,A){r.cancelPendingCommit=null;do Oo();while(xt!==0);if((ze&6)!==0)throw Error(s(327));if(i!==null){if(i===r.current)throw Error(s(177));if(x=i.lanes|i.childLanes,x|=Xu,cS(r,o,x,N,j,A),r===Ie&&(Ce=Ie=null,Me=0),bi=i,Tr=r,vi=o,nf=x,rf=m,H0=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,L2(La,function(){return W0(),null})):(r.callbackNode=null,r.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=P.T,P.T=null,m=te.p,te.p=2,N=ze,ze|=4;try{k2(r,i,o)}finally{ze=N,te.p=m,P.T=u}}xt=1,J0(),Q0(),X0()}}function J0(){if(xt===1){xt=0;var r=Tr,i=bi,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=P.T,P.T=null;var u=te.p;te.p=2;var m=ze;ze|=4;try{O0(i,r);var x=vf,N=_m(r.containerInfo),j=x.focusedElem,A=x.selectionRange;if(N!==j&&j&&j.ownerDocument&&Bm(j.ownerDocument.documentElement,j)){if(A!==null&&Gu(j)){var H=A.start,$=A.end;if($===void 0&&($=H),"selectionStart"in j)j.selectionStart=H,j.selectionEnd=Math.min($,j.value.length);else{var J=j.ownerDocument||document,U=J&&J.defaultView||window;if(U.getSelection){var V=U.getSelection(),xe=j.textContent.length,he=Math.min(A.start,xe),He=A.end===void 0?he:Math.min(A.end,xe);!V.extend&&he>He&&(N=He,He=he,he=N);var R=Lm(j,he),M=Lm(j,He);if(R&&M&&(V.rangeCount!==1||V.anchorNode!==R.node||V.anchorOffset!==R.offset||V.focusNode!==M.node||V.focusOffset!==M.offset)){var B=J.createRange();B.setStart(R.node,R.offset),V.removeAllRanges(),he>He?(V.addRange(B),V.extend(M.node,M.offset)):(B.setEnd(M.node,M.offset),V.addRange(B))}}}}for(J=[],V=j;V=V.parentNode;)V.nodeType===1&&J.push({element:V,left:V.scrollLeft,top:V.scrollTop});for(typeof j.focus=="function"&&j.focus(),j=0;j<J.length;j++){var Y=J[j];Y.element.scrollLeft=Y.left,Y.element.scrollTop=Y.top}}qo=!!bf,vf=bf=null}finally{ze=m,te.p=u,P.T=o}}r.current=i,xt=2}}function Q0(){if(xt===2){xt=0;var r=Tr,i=bi,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=P.T,P.T=null;var u=te.p;te.p=2;var m=ze;ze|=4;try{E0(r,i.alternate,i)}finally{ze=m,te.p=u,P.T=o}}xt=3}}function X0(){if(xt===4||xt===3){xt=0,eS();var r=Tr,i=bi,o=vi,u=H0;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?xt=5:(xt=0,bi=Tr=null,Z0(r,r.pendingLanes));var m=r.pendingLanes;if(m===0&&(Ar=null),ju(o),i=i.stateNode,$t&&typeof $t.onCommitFiberRoot=="function")try{$t.onCommitFiberRoot(Zi,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=P.T,m=te.p,te.p=2,P.T=null;try{for(var x=r.onRecoverableError,N=0;N<u.length;N++){var j=u[N];x(j.value,{componentStack:j.stack})}}finally{P.T=i,te.p=m}}(vi&3)!==0&&Oo(),Rn(r),m=r.pendingLanes,(o&4194090)!==0&&(m&42)!==0?r===sf?Bl++:(Bl=0,sf=r):Bl=0,_l(0)}}function Z0(r,i){(r.pooledCacheLanes&=i)===0&&(i=r.pooledCache,i!=null&&(r.pooledCache=null,gl(i)))}function Oo(r){return J0(),Q0(),X0(),W0()}function W0(){if(xt!==5)return!1;var r=Tr,i=nf;nf=0;var o=ju(vi),u=P.T,m=te.p;try{te.p=32>o?32:o,P.T=null,o=rf,rf=null;var x=Tr,N=vi;if(xt=0,bi=Tr=null,vi=0,(ze&6)!==0)throw Error(s(331));var j=ze;if(ze|=4,B0(x.current),D0(x,x.current,N,o),ze=j,_l(0,!1),$t&&typeof $t.onPostCommitFiberRoot=="function")try{$t.onPostCommitFiberRoot(Zi,x)}catch{}return!0}finally{te.p=m,P.T=u,Z0(r,i)}}function ex(r,i,o){i=ln(o,i),i=Bd(r.stateNode,i,2),r=br(r,i,2),r!==null&&(el(r,2),Rn(r))}function Ue(r,i,o){if(r.tag===3)ex(r,r,o);else for(;i!==null;){if(i.tag===3){ex(i,r,o);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Ar===null||!Ar.has(u))){r=ln(o,r),o=s0(2),u=br(i,o,2),u!==null&&(i0(o,u,i,r),el(u,2),Rn(u));break}}i=i.return}}function cf(r,i,o){var u=r.pingCache;if(u===null){u=r.pingCache=new E2;var m=new Set;u.set(i,m)}else m=u.get(i),m===void 0&&(m=new Set,u.set(i,m));m.has(o)||(Zd=!0,m.add(o),r=R2.bind(null,r,i,o),i.then(r,r))}function R2(r,i,o){var u=r.pingCache;u!==null&&u.delete(i),r.pingedLanes|=r.suspendedLanes&o,r.warmLanes&=~o,Ie===r&&(Me&o)===o&&(Ye===4||Ye===3&&(Me&62914560)===Me&&300>En()-tf?(ze&2)===0&&Si(r,0):Wd|=o,yi===Me&&(yi=0)),Rn(r)}function tx(r,i){i===0&&(i=Xp()),r=ri(r,i),r!==null&&(el(r,i),Rn(r))}function D2(r){var i=r.memoizedState,o=0;i!==null&&(o=i.retryLane),tx(r,o)}function z2(r,i){var o=0;switch(r.tag){case 13:var u=r.stateNode,m=r.memoizedState;m!==null&&(o=m.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(i),tx(r,o)}function L2(r,i){return Su(r,i)}var Ro=null,wi=null,uf=!1,Do=!1,df=!1,vs=0;function Rn(r){r!==wi&&r.next===null&&(wi===null?Ro=wi=r:wi=wi.next=r),Do=!0,uf||(uf=!0,_2())}function _l(r,i){if(!df&&Do){df=!0;do for(var o=!1,u=Ro;u!==null;){if(r!==0){var m=u.pendingLanes;if(m===0)var x=0;else{var N=u.suspendedLanes,j=u.pingedLanes;x=(1<<31-Gt(42|r)+1)-1,x&=m&~(N&~j),x=x&201326741?x&201326741|1:x?x|2:0}x!==0&&(o=!0,ix(u,x))}else x=Me,x=Ha(u,u===Ie?x:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(x&3)===0||Wi(u,x)||(o=!0,ix(u,x));u=u.next}while(o);df=!1}}function B2(){nx()}function nx(){Do=uf=!1;var r=0;vs!==0&&($2()&&(r=vs),vs=0);for(var i=En(),o=null,u=Ro;u!==null;){var m=u.next,x=rx(u,i);x===0?(u.next=null,o===null?Ro=m:o.next=m,m===null&&(wi=o)):(o=u,(r!==0||(x&3)!==0)&&(Do=!0)),u=m}_l(r)}function rx(r,i){for(var o=r.suspendedLanes,u=r.pingedLanes,m=r.expirationTimes,x=r.pendingLanes&-62914561;0<x;){var N=31-Gt(x),j=1<<N,A=m[N];A===-1?((j&o)===0||(j&u)!==0)&&(m[N]=oS(j,i)):A<=i&&(r.expiredLanes|=j),x&=~j}if(i=Ie,o=Me,o=Ha(r,r===i?o:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u=r.callbackNode,o===0||r===i&&(Le===2||Le===9)||r.cancelPendingCommit!==null)return u!==null&&u!==null&&Nu(u),r.callbackNode=null,r.callbackPriority=0;if((o&3)===0||Wi(r,o)){if(i=o&-o,i===r.callbackPriority)return i;switch(u!==null&&Nu(u),ju(o)){case 2:case 8:o=Kp;break;case 32:o=La;break;case 268435456:o=Jp;break;default:o=La}return u=sx.bind(null,r),o=Su(o,u),r.callbackPriority=i,r.callbackNode=o,i}return u!==null&&u!==null&&Nu(u),r.callbackPriority=2,r.callbackNode=null,2}function sx(r,i){if(xt!==0&&xt!==5)return r.callbackNode=null,r.callbackPriority=0,null;var o=r.callbackNode;if(Oo()&&r.callbackNode!==o)return null;var u=Me;return u=Ha(r,r===Ie?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u===0?null:(P0(r,u,i),rx(r,En()),r.callbackNode!=null&&r.callbackNode===o?sx.bind(null,r):null)}function ix(r,i){if(Oo())return null;P0(r,i,!0)}function _2(){Y2(function(){(ze&6)!==0?Su(Yp,B2):nx()})}function ff(){return vs===0&&(vs=Qp()),vs}function lx(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:qa(""+r)}function ax(r,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,r.id&&o.setAttribute("form",r.id),i.parentNode.insertBefore(o,i),r=new FormData(r),o.parentNode.removeChild(o),r}function H2(r,i,o,u,m){if(i==="submit"&&o&&o.stateNode===m){var x=lx((m[_t]||null).action),N=u.submitter;N&&(i=(i=N[_t]||null)?lx(i.formAction):N.getAttribute("formAction"),i!==null&&(x=i,N=null));var j=new Ya("action","action",null,u,m);r.push({event:j,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(vs!==0){var A=N?ax(m,N):new FormData(m);Od(o,{pending:!0,data:A,method:m.method,action:x},null,A)}}else typeof x=="function"&&(j.preventDefault(),A=N?ax(m,N):new FormData(m),Od(o,{pending:!0,data:A,method:m.method,action:x},x,A))},currentTarget:m}]})}}for(var hf=0;hf<Qu.length;hf++){var pf=Qu[hf],U2=pf.toLowerCase(),P2=pf[0].toUpperCase()+pf.slice(1);bn(U2,"on"+P2)}bn(Pm,"onAnimationEnd"),bn(Im,"onAnimationIteration"),bn(Vm,"onAnimationStart"),bn("dblclick","onDoubleClick"),bn("focusin","onFocus"),bn("focusout","onBlur"),bn(r2,"onTransitionRun"),bn(s2,"onTransitionStart"),bn(i2,"onTransitionCancel"),bn(qm,"onTransitionEnd"),Ys("onMouseEnter",["mouseout","mouseover"]),Ys("onMouseLeave",["mouseout","mouseover"]),Ys("onPointerEnter",["pointerout","pointerover"]),Ys("onPointerLeave",["pointerout","pointerover"]),rs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),rs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),rs("onBeforeInput",["compositionend","keypress","textInput","paste"]),rs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),rs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),rs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),I2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Hl));function ox(r,i){i=(i&4)!==0;for(var o=0;o<r.length;o++){var u=r[o],m=u.event;u=u.listeners;e:{var x=void 0;if(i)for(var N=u.length-1;0<=N;N--){var j=u[N],A=j.instance,H=j.currentTarget;if(j=j.listener,A!==x&&m.isPropagationStopped())break e;x=j,m.currentTarget=H;try{x(m)}catch($){vo($)}m.currentTarget=null,x=A}else for(N=0;N<u.length;N++){if(j=u[N],A=j.instance,H=j.currentTarget,j=j.listener,A!==x&&m.isPropagationStopped())break e;x=j,m.currentTarget=H;try{x(m)}catch($){vo($)}m.currentTarget=null,x=A}}}}function Ee(r,i){var o=i[Cu];o===void 0&&(o=i[Cu]=new Set);var u=r+"__bubble";o.has(u)||(cx(i,r,2,!1),o.add(u))}function mf(r,i,o){var u=0;i&&(u|=4),cx(o,r,u,i)}var zo="_reactListening"+Math.random().toString(36).slice(2);function gf(r){if(!r[zo]){r[zo]=!0,nm.forEach(function(o){o!=="selectionchange"&&(I2.has(o)||mf(o,!1,r),mf(o,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[zo]||(i[zo]=!0,mf("selectionchange",!1,i))}}function cx(r,i,o,u){switch(Dx(i)){case 2:var m=pN;break;case 8:m=mN;break;default:m=Mf}o=m.bind(null,i,o,r),m=void 0,!_u||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(m=!0),u?m!==void 0?r.addEventListener(i,o,{capture:!0,passive:m}):r.addEventListener(i,o,!0):m!==void 0?r.addEventListener(i,o,{passive:m}):r.addEventListener(i,o,!1)}function xf(r,i,o,u,m){var x=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var N=u.tag;if(N===3||N===4){var j=u.stateNode.containerInfo;if(j===m)break;if(N===4)for(N=u.return;N!==null;){var A=N.tag;if((A===3||A===4)&&N.stateNode.containerInfo===m)return;N=N.return}for(;j!==null;){if(N=Fs(j),N===null)return;if(A=N.tag,A===5||A===6||A===26||A===27){u=x=N;continue e}j=j.parentNode}}u=u.return}gm(function(){var H=x,$=Lu(o),J=[];e:{var U=Fm.get(r);if(U!==void 0){var V=Ya,xe=r;switch(r){case"keypress":if($a(o)===0)break e;case"keydown":case"keyup":V=LS;break;case"focusin":xe="focus",V=Iu;break;case"focusout":xe="blur",V=Iu;break;case"beforeblur":case"afterblur":V=Iu;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":V=bm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":V=wS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":V=HS;break;case Pm:case Im:case Vm:V=CS;break;case qm:V=PS;break;case"scroll":case"scrollend":V=SS;break;case"wheel":V=VS;break;case"copy":case"cut":case"paste":V=AS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":V=Sm;break;case"toggle":case"beforetoggle":V=FS}var he=(i&4)!==0,He=!he&&(r==="scroll"||r==="scrollend"),R=he?U!==null?U+"Capture":null:U;he=[];for(var M=H,B;M!==null;){var Y=M;if(B=Y.stateNode,Y=Y.tag,Y!==5&&Y!==26&&Y!==27||B===null||R===null||(Y=rl(M,R),Y!=null&&he.push(Ul(M,Y,B))),He)break;M=M.return}0<he.length&&(U=new V(U,xe,null,o,$),J.push({event:U,listeners:he}))}}if((i&7)===0){e:{if(U=r==="mouseover"||r==="pointerover",V=r==="mouseout"||r==="pointerout",U&&o!==zu&&(xe=o.relatedTarget||o.fromElement)&&(Fs(xe)||xe[qs]))break e;if((V||U)&&(U=$.window===$?$:(U=$.ownerDocument)?U.defaultView||U.parentWindow:window,V?(xe=o.relatedTarget||o.toElement,V=H,xe=xe?Fs(xe):null,xe!==null&&(He=a(xe),he=xe.tag,xe!==He||he!==5&&he!==27&&he!==6)&&(xe=null)):(V=null,xe=H),V!==xe)){if(he=bm,Y="onMouseLeave",R="onMouseEnter",M="mouse",(r==="pointerout"||r==="pointerover")&&(he=Sm,Y="onPointerLeave",R="onPointerEnter",M="pointer"),He=V==null?U:nl(V),B=xe==null?U:nl(xe),U=new he(Y,M+"leave",V,o,$),U.target=He,U.relatedTarget=B,Y=null,Fs($)===H&&(he=new he(R,M+"enter",xe,o,$),he.target=B,he.relatedTarget=He,Y=he),He=Y,V&&xe)t:{for(he=V,R=xe,M=0,B=he;B;B=ki(B))M++;for(B=0,Y=R;Y;Y=ki(Y))B++;for(;0<M-B;)he=ki(he),M--;for(;0<B-M;)R=ki(R),B--;for(;M--;){if(he===R||R!==null&&he===R.alternate)break t;he=ki(he),R=ki(R)}he=null}else he=null;V!==null&&ux(J,U,V,he,!1),xe!==null&&He!==null&&ux(J,He,xe,he,!0)}}e:{if(U=H?nl(H):window,V=U.nodeName&&U.nodeName.toLowerCase(),V==="select"||V==="input"&&U.type==="file")var oe=Tm;else if(Em(U))if(Mm)oe=e2;else{oe=ZS;var je=XS}else V=U.nodeName,!V||V.toLowerCase()!=="input"||U.type!=="checkbox"&&U.type!=="radio"?H&&Du(H.elementType)&&(oe=Tm):oe=WS;if(oe&&(oe=oe(r,H))){Am(J,oe,o,$);break e}je&&je(r,U,H),r==="focusout"&&H&&U.type==="number"&&H.memoizedProps.value!=null&&Ru(U,"number",U.value)}switch(je=H?nl(H):window,r){case"focusin":(Em(je)||je.contentEditable==="true")&&(ei=je,Yu=H,dl=null);break;case"focusout":dl=Yu=ei=null;break;case"mousedown":Ku=!0;break;case"contextmenu":case"mouseup":case"dragend":Ku=!1,Hm(J,o,$);break;case"selectionchange":if(n2)break;case"keydown":case"keyup":Hm(J,o,$)}var de;if(qu)e:{switch(r){case"compositionstart":var pe="onCompositionStart";break e;case"compositionend":pe="onCompositionEnd";break e;case"compositionupdate":pe="onCompositionUpdate";break e}pe=void 0}else Ws?jm(r,o)&&(pe="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(pe="onCompositionStart");pe&&(Nm&&o.locale!=="ko"&&(Ws||pe!=="onCompositionStart"?pe==="onCompositionEnd"&&Ws&&(de=xm()):(mr=$,Hu="value"in mr?mr.value:mr.textContent,Ws=!0)),je=Lo(H,pe),0<je.length&&(pe=new vm(pe,r,null,o,$),J.push({event:pe,listeners:je}),de?pe.data=de:(de=Cm(o),de!==null&&(pe.data=de)))),(de=GS?YS(r,o):KS(r,o))&&(pe=Lo(H,"onBeforeInput"),0<pe.length&&(je=new vm("onBeforeInput","beforeinput",null,o,$),J.push({event:je,listeners:pe}),je.data=de)),H2(J,r,H,o,$)}ox(J,i)})}function Ul(r,i,o){return{instance:r,listener:i,currentTarget:o}}function Lo(r,i){for(var o=i+"Capture",u=[];r!==null;){var m=r,x=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||x===null||(m=rl(r,o),m!=null&&u.unshift(Ul(r,m,x)),m=rl(r,i),m!=null&&u.push(Ul(r,m,x))),r.tag===3)return u;r=r.return}return[]}function ki(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function ux(r,i,o,u,m){for(var x=i._reactName,N=[];o!==null&&o!==u;){var j=o,A=j.alternate,H=j.stateNode;if(j=j.tag,A!==null&&A===u)break;j!==5&&j!==26&&j!==27||H===null||(A=H,m?(H=rl(o,x),H!=null&&N.unshift(Ul(o,H,A))):m||(H=rl(o,x),H!=null&&N.push(Ul(o,H,A)))),o=o.return}N.length!==0&&r.push({event:i,listeners:N})}var V2=/\r\n?/g,q2=/\u0000|\uFFFD/g;function dx(r){return(typeof r=="string"?r:""+r).replace(V2,`
`).replace(q2,"")}function fx(r,i){return i=dx(i),dx(r)===i}function Bo(){}function _e(r,i,o,u,m,x){switch(o){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||Qs(r,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&Qs(r,""+u);break;case"className":Pa(r,"class",u);break;case"tabIndex":Pa(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Pa(r,o,u);break;case"style":pm(r,u,x);break;case"data":if(i!=="object"){Pa(r,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||o!=="href")){r.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=qa(""+u),r.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof x=="function"&&(o==="formAction"?(i!=="input"&&_e(r,i,"name",m.name,m,null),_e(r,i,"formEncType",m.formEncType,m,null),_e(r,i,"formMethod",m.formMethod,m,null),_e(r,i,"formTarget",m.formTarget,m,null)):(_e(r,i,"encType",m.encType,m,null),_e(r,i,"method",m.method,m,null),_e(r,i,"target",m.target,m,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=qa(""+u),r.setAttribute(o,u);break;case"onClick":u!=null&&(r.onclick=Bo);break;case"onScroll":u!=null&&Ee("scroll",r);break;case"onScrollEnd":u!=null&&Ee("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(o=u.__html,o!=null){if(m.children!=null)throw Error(s(60));r.innerHTML=o}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}o=qa(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""+u):r.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""):r.removeAttribute(o);break;case"capture":case"download":u===!0?r.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,u):r.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(o,u):r.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(o):r.setAttribute(o,u);break;case"popover":Ee("beforetoggle",r),Ee("toggle",r),Ua(r,"popover",u);break;case"xlinkActuate":Un(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Un(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Un(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Un(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Un(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Un(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Un(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Un(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Un(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Ua(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=bS.get(o)||o,Ua(r,o,u))}}function yf(r,i,o,u,m,x){switch(o){case"style":pm(r,u,x);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(o=u.__html,o!=null){if(m.children!=null)throw Error(s(60));r.innerHTML=o}}break;case"children":typeof u=="string"?Qs(r,u):(typeof u=="number"||typeof u=="bigint")&&Qs(r,""+u);break;case"onScroll":u!=null&&Ee("scroll",r);break;case"onScrollEnd":u!=null&&Ee("scrollend",r);break;case"onClick":u!=null&&(r.onclick=Bo);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!rm.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(m=o.endsWith("Capture"),i=o.slice(2,m?o.length-7:void 0),x=r[_t]||null,x=x!=null?x[o]:null,typeof x=="function"&&r.removeEventListener(i,x,m),typeof u=="function")){typeof x!="function"&&x!==null&&(o in r?r[o]=null:r.hasAttribute(o)&&r.removeAttribute(o)),r.addEventListener(i,u,m);break e}o in r?r[o]=u:u===!0?r.setAttribute(o,""):Ua(r,o,u)}}}function yt(r,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ee("error",r),Ee("load",r);var u=!1,m=!1,x;for(x in o)if(o.hasOwnProperty(x)){var N=o[x];if(N!=null)switch(x){case"src":u=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:_e(r,i,x,N,o,null)}}m&&_e(r,i,"srcSet",o.srcSet,o,null),u&&_e(r,i,"src",o.src,o,null);return;case"input":Ee("invalid",r);var j=x=N=m=null,A=null,H=null;for(u in o)if(o.hasOwnProperty(u)){var $=o[u];if($!=null)switch(u){case"name":m=$;break;case"type":N=$;break;case"checked":A=$;break;case"defaultChecked":H=$;break;case"value":x=$;break;case"defaultValue":j=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(s(137,i));break;default:_e(r,i,u,$,o,null)}}um(r,x,j,A,H,N,m,!1),Ia(r);return;case"select":Ee("invalid",r),u=N=x=null;for(m in o)if(o.hasOwnProperty(m)&&(j=o[m],j!=null))switch(m){case"value":x=j;break;case"defaultValue":N=j;break;case"multiple":u=j;default:_e(r,i,m,j,o,null)}i=x,o=N,r.multiple=!!u,i!=null?Js(r,!!u,i,!1):o!=null&&Js(r,!!u,o,!0);return;case"textarea":Ee("invalid",r),x=m=u=null;for(N in o)if(o.hasOwnProperty(N)&&(j=o[N],j!=null))switch(N){case"value":u=j;break;case"defaultValue":m=j;break;case"children":x=j;break;case"dangerouslySetInnerHTML":if(j!=null)throw Error(s(91));break;default:_e(r,i,N,j,o,null)}fm(r,u,m,x),Ia(r);return;case"option":for(A in o)if(o.hasOwnProperty(A)&&(u=o[A],u!=null))switch(A){case"selected":r.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:_e(r,i,A,u,o,null)}return;case"dialog":Ee("beforetoggle",r),Ee("toggle",r),Ee("cancel",r),Ee("close",r);break;case"iframe":case"object":Ee("load",r);break;case"video":case"audio":for(u=0;u<Hl.length;u++)Ee(Hl[u],r);break;case"image":Ee("error",r),Ee("load",r);break;case"details":Ee("toggle",r);break;case"embed":case"source":case"link":Ee("error",r),Ee("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in o)if(o.hasOwnProperty(H)&&(u=o[H],u!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:_e(r,i,H,u,o,null)}return;default:if(Du(i)){for($ in o)o.hasOwnProperty($)&&(u=o[$],u!==void 0&&yf(r,i,$,u,o,void 0));return}}for(j in o)o.hasOwnProperty(j)&&(u=o[j],u!=null&&_e(r,i,j,u,o,null))}function F2(r,i,o,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,x=null,N=null,j=null,A=null,H=null,$=null;for(V in o){var J=o[V];if(o.hasOwnProperty(V)&&J!=null)switch(V){case"checked":break;case"value":break;case"defaultValue":A=J;default:u.hasOwnProperty(V)||_e(r,i,V,null,u,J)}}for(var U in u){var V=u[U];if(J=o[U],u.hasOwnProperty(U)&&(V!=null||J!=null))switch(U){case"type":x=V;break;case"name":m=V;break;case"checked":H=V;break;case"defaultChecked":$=V;break;case"value":N=V;break;case"defaultValue":j=V;break;case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(s(137,i));break;default:V!==J&&_e(r,i,U,V,u,J)}}Ou(r,N,j,A,H,$,x,m);return;case"select":V=N=j=U=null;for(x in o)if(A=o[x],o.hasOwnProperty(x)&&A!=null)switch(x){case"value":break;case"multiple":V=A;default:u.hasOwnProperty(x)||_e(r,i,x,null,u,A)}for(m in u)if(x=u[m],A=o[m],u.hasOwnProperty(m)&&(x!=null||A!=null))switch(m){case"value":U=x;break;case"defaultValue":j=x;break;case"multiple":N=x;default:x!==A&&_e(r,i,m,x,u,A)}i=j,o=N,u=V,U!=null?Js(r,!!o,U,!1):!!u!=!!o&&(i!=null?Js(r,!!o,i,!0):Js(r,!!o,o?[]:"",!1));return;case"textarea":V=U=null;for(j in o)if(m=o[j],o.hasOwnProperty(j)&&m!=null&&!u.hasOwnProperty(j))switch(j){case"value":break;case"children":break;default:_e(r,i,j,null,u,m)}for(N in u)if(m=u[N],x=o[N],u.hasOwnProperty(N)&&(m!=null||x!=null))switch(N){case"value":U=m;break;case"defaultValue":V=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(s(91));break;default:m!==x&&_e(r,i,N,m,u,x)}dm(r,U,V);return;case"option":for(var xe in o)if(U=o[xe],o.hasOwnProperty(xe)&&U!=null&&!u.hasOwnProperty(xe))switch(xe){case"selected":r.selected=!1;break;default:_e(r,i,xe,null,u,U)}for(A in u)if(U=u[A],V=o[A],u.hasOwnProperty(A)&&U!==V&&(U!=null||V!=null))switch(A){case"selected":r.selected=U&&typeof U!="function"&&typeof U!="symbol";break;default:_e(r,i,A,U,u,V)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var he in o)U=o[he],o.hasOwnProperty(he)&&U!=null&&!u.hasOwnProperty(he)&&_e(r,i,he,null,u,U);for(H in u)if(U=u[H],V=o[H],u.hasOwnProperty(H)&&U!==V&&(U!=null||V!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if(U!=null)throw Error(s(137,i));break;default:_e(r,i,H,U,u,V)}return;default:if(Du(i)){for(var He in o)U=o[He],o.hasOwnProperty(He)&&U!==void 0&&!u.hasOwnProperty(He)&&yf(r,i,He,void 0,u,U);for($ in u)U=u[$],V=o[$],!u.hasOwnProperty($)||U===V||U===void 0&&V===void 0||yf(r,i,$,U,u,V);return}}for(var R in o)U=o[R],o.hasOwnProperty(R)&&U!=null&&!u.hasOwnProperty(R)&&_e(r,i,R,null,u,U);for(J in u)U=u[J],V=o[J],!u.hasOwnProperty(J)||U===V||U==null&&V==null||_e(r,i,J,U,u,V)}var bf=null,vf=null;function _o(r){return r.nodeType===9?r:r.ownerDocument}function hx(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function px(r,i){if(r===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&i==="foreignObject"?0:r}function Sf(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Nf=null;function $2(){var r=window.event;return r&&r.type==="popstate"?r===Nf?!1:(Nf=r,!0):(Nf=null,!1)}var mx=typeof setTimeout=="function"?setTimeout:void 0,G2=typeof clearTimeout=="function"?clearTimeout:void 0,gx=typeof Promise=="function"?Promise:void 0,Y2=typeof queueMicrotask=="function"?queueMicrotask:typeof gx<"u"?function(r){return gx.resolve(null).then(r).catch(K2)}:mx;function K2(r){setTimeout(function(){throw r})}function Or(r){return r==="head"}function xx(r,i){var o=i,u=0,m=0;do{var x=o.nextSibling;if(r.removeChild(o),x&&x.nodeType===8)if(o=x.data,o==="/$"){if(0<u&&8>u){o=u;var N=r.ownerDocument;if(o&1&&Pl(N.documentElement),o&2&&Pl(N.body),o&4)for(o=N.head,Pl(o),N=o.firstChild;N;){var j=N.nextSibling,A=N.nodeName;N[tl]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&N.rel.toLowerCase()==="stylesheet"||o.removeChild(N),N=j}}if(m===0){r.removeChild(x),Kl(i);return}m--}else o==="$"||o==="$?"||o==="$!"?m++:u=o.charCodeAt(0)-48;else u=0;o=x}while(o);Kl(i)}function wf(r){var i=r.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":wf(o),Eu(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}r.removeChild(o)}}function J2(r,i,o,u){for(;r.nodeType===1;){var m=o;if(r.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[tl])switch(i){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(x=r.getAttribute("rel"),x==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(x!==m.rel||r.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||r.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||r.getAttribute("title")!==(m.title==null?null:m.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(x=r.getAttribute("src"),(x!==(m.src==null?null:m.src)||r.getAttribute("type")!==(m.type==null?null:m.type)||r.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&x&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(i==="input"&&r.type==="hidden"){var x=m.name==null?null:""+m.name;if(m.type==="hidden"&&r.getAttribute("name")===x)return r}else return r;if(r=Sn(r.nextSibling),r===null)break}return null}function Q2(r,i,o){if(i==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=Sn(r.nextSibling),r===null))return null;return r}function kf(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState==="complete"}function X2(r,i){var o=r.ownerDocument;if(r.data!=="$?"||o.readyState==="complete")i();else{var u=function(){i(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),r._reactRetry=u}}function Sn(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return r}var jf=null;function yx(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"){if(i===0)return r;i--}else o==="/$"&&i++}r=r.previousSibling}return null}function bx(r,i,o){switch(i=_o(o),r){case"html":if(r=i.documentElement,!r)throw Error(s(452));return r;case"head":if(r=i.head,!r)throw Error(s(453));return r;case"body":if(r=i.body,!r)throw Error(s(454));return r;default:throw Error(s(451))}}function Pl(r){for(var i=r.attributes;i.length;)r.removeAttributeNode(i[0]);Eu(r)}var fn=new Map,vx=new Set;function Ho(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Wn=te.d;te.d={f:Z2,r:W2,D:eN,C:tN,L:nN,m:rN,X:iN,S:sN,M:lN};function Z2(){var r=Wn.f(),i=To();return r||i}function W2(r){var i=$s(r);i!==null&&i.tag===5&&i.type==="form"?Pg(i):Wn.r(r)}var ji=typeof document>"u"?null:document;function Sx(r,i,o){var u=ji;if(u&&typeof i=="string"&&i){var m=sn(i);m='link[rel="'+r+'"][href="'+m+'"]',typeof o=="string"&&(m+='[crossorigin="'+o+'"]'),vx.has(m)||(vx.add(m),r={rel:r,crossOrigin:o,href:i},u.querySelector(m)===null&&(i=u.createElement("link"),yt(i,"link",r),lt(i),u.head.appendChild(i)))}}function eN(r){Wn.D(r),Sx("dns-prefetch",r,null)}function tN(r,i){Wn.C(r,i),Sx("preconnect",r,i)}function nN(r,i,o){Wn.L(r,i,o);var u=ji;if(u&&r&&i){var m='link[rel="preload"][as="'+sn(i)+'"]';i==="image"&&o&&o.imageSrcSet?(m+='[imagesrcset="'+sn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(m+='[imagesizes="'+sn(o.imageSizes)+'"]')):m+='[href="'+sn(r)+'"]';var x=m;switch(i){case"style":x=Ci(r);break;case"script":x=Ei(r)}fn.has(x)||(r=g({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:r,as:i},o),fn.set(x,r),u.querySelector(m)!==null||i==="style"&&u.querySelector(Il(x))||i==="script"&&u.querySelector(Vl(x))||(i=u.createElement("link"),yt(i,"link",r),lt(i),u.head.appendChild(i)))}}function rN(r,i){Wn.m(r,i);var o=ji;if(o&&r){var u=i&&typeof i.as=="string"?i.as:"script",m='link[rel="modulepreload"][as="'+sn(u)+'"][href="'+sn(r)+'"]',x=m;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":x=Ei(r)}if(!fn.has(x)&&(r=g({rel:"modulepreload",href:r},i),fn.set(x,r),o.querySelector(m)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Vl(x)))return}u=o.createElement("link"),yt(u,"link",r),lt(u),o.head.appendChild(u)}}}function sN(r,i,o){Wn.S(r,i,o);var u=ji;if(u&&r){var m=Gs(u).hoistableStyles,x=Ci(r);i=i||"default";var N=m.get(x);if(!N){var j={loading:0,preload:null};if(N=u.querySelector(Il(x)))j.loading=5;else{r=g({rel:"stylesheet",href:r,"data-precedence":i},o),(o=fn.get(x))&&Cf(r,o);var A=N=u.createElement("link");lt(A),yt(A,"link",r),A._p=new Promise(function(H,$){A.onload=H,A.onerror=$}),A.addEventListener("load",function(){j.loading|=1}),A.addEventListener("error",function(){j.loading|=2}),j.loading|=4,Uo(N,i,u)}N={type:"stylesheet",instance:N,count:1,state:j},m.set(x,N)}}}function iN(r,i){Wn.X(r,i);var o=ji;if(o&&r){var u=Gs(o).hoistableScripts,m=Ei(r),x=u.get(m);x||(x=o.querySelector(Vl(m)),x||(r=g({src:r,async:!0},i),(i=fn.get(m))&&Ef(r,i),x=o.createElement("script"),lt(x),yt(x,"link",r),o.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},u.set(m,x))}}function lN(r,i){Wn.M(r,i);var o=ji;if(o&&r){var u=Gs(o).hoistableScripts,m=Ei(r),x=u.get(m);x||(x=o.querySelector(Vl(m)),x||(r=g({src:r,async:!0,type:"module"},i),(i=fn.get(m))&&Ef(r,i),x=o.createElement("script"),lt(x),yt(x,"link",r),o.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},u.set(m,x))}}function Nx(r,i,o,u){var m=(m=ie.current)?Ho(m):null;if(!m)throw Error(s(446));switch(r){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=Ci(o.href),o=Gs(m).hoistableStyles,u=o.get(i),u||(u={type:"style",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){r=Ci(o.href);var x=Gs(m).hoistableStyles,N=x.get(r);if(N||(m=m.ownerDocument||m,N={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},x.set(r,N),(x=m.querySelector(Il(r)))&&!x._p&&(N.instance=x,N.state.loading=5),fn.has(r)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},fn.set(r,o),x||aN(m,r,o,N.state))),i&&u===null)throw Error(s(528,""));return N}if(i&&u!==null)throw Error(s(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Ei(o),o=Gs(m).hoistableScripts,u=o.get(i),u||(u={type:"script",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,r))}}function Ci(r){return'href="'+sn(r)+'"'}function Il(r){return'link[rel="stylesheet"]['+r+"]"}function wx(r){return g({},r,{"data-precedence":r.precedence,precedence:null})}function aN(r,i,o,u){r.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=r.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),yt(i,"link",o),lt(i),r.head.appendChild(i))}function Ei(r){return'[src="'+sn(r)+'"]'}function Vl(r){return"script[async]"+r}function kx(r,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var u=r.querySelector('style[data-href~="'+sn(o.href)+'"]');if(u)return i.instance=u,lt(u),u;var m=g({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),lt(u),yt(u,"style",m),Uo(u,o.precedence,r),i.instance=u;case"stylesheet":m=Ci(o.href);var x=r.querySelector(Il(m));if(x)return i.state.loading|=4,i.instance=x,lt(x),x;u=wx(o),(m=fn.get(m))&&Cf(u,m),x=(r.ownerDocument||r).createElement("link"),lt(x);var N=x;return N._p=new Promise(function(j,A){N.onload=j,N.onerror=A}),yt(x,"link",u),i.state.loading|=4,Uo(x,o.precedence,r),i.instance=x;case"script":return x=Ei(o.src),(m=r.querySelector(Vl(x)))?(i.instance=m,lt(m),m):(u=o,(m=fn.get(x))&&(u=g({},o),Ef(u,m)),r=r.ownerDocument||r,m=r.createElement("script"),lt(m),yt(m,"link",u),r.head.appendChild(m),i.instance=m);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,Uo(u,o.precedence,r));return i.instance}function Uo(r,i,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=u.length?u[u.length-1]:null,x=m,N=0;N<u.length;N++){var j=u[N];if(j.dataset.precedence===i)x=j;else if(x!==m)break}x?x.parentNode.insertBefore(r,x.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(r,i.firstChild))}function Cf(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.title==null&&(r.title=i.title)}function Ef(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.integrity==null&&(r.integrity=i.integrity)}var Po=null;function jx(r,i,o){if(Po===null){var u=new Map,m=Po=new Map;m.set(o,u)}else m=Po,u=m.get(o),u||(u=new Map,m.set(o,u));if(u.has(r))return u;for(u.set(r,null),o=o.getElementsByTagName(r),m=0;m<o.length;m++){var x=o[m];if(!(x[tl]||x[wt]||r==="link"&&x.getAttribute("rel")==="stylesheet")&&x.namespaceURI!=="http://www.w3.org/2000/svg"){var N=x.getAttribute(i)||"";N=r+N;var j=u.get(N);j?j.push(x):u.set(N,[x])}}return u}function Cx(r,i,o){r=r.ownerDocument||r,r.head.insertBefore(o,i==="title"?r.querySelector("head > title"):null)}function oN(r,i,o){if(o===1||i.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return r=i.disabled,typeof i.precedence=="string"&&r==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Ex(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var ql=null;function cN(){}function uN(r,i,o){if(ql===null)throw Error(s(475));var u=ql;if(i.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var m=Ci(o.href),x=r.querySelector(Il(m));if(x){r=x._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(u.count++,u=Io.bind(u),r.then(u,u)),i.state.loading|=4,i.instance=x,lt(x);return}x=r.ownerDocument||r,o=wx(o),(m=fn.get(m))&&Cf(o,m),x=x.createElement("link"),lt(x);var N=x;N._p=new Promise(function(j,A){N.onload=j,N.onerror=A}),yt(x,"link",o),i.instance=x}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(i,r),(r=i.state.preload)&&(i.state.loading&3)===0&&(u.count++,i=Io.bind(u),r.addEventListener("load",i),r.addEventListener("error",i))}}function dN(){if(ql===null)throw Error(s(475));var r=ql;return r.stylesheets&&r.count===0&&Af(r,r.stylesheets),0<r.count?function(i){var o=setTimeout(function(){if(r.stylesheets&&Af(r,r.stylesheets),r.unsuspend){var u=r.unsuspend;r.unsuspend=null,u()}},6e4);return r.unsuspend=i,function(){r.unsuspend=null,clearTimeout(o)}}:null}function Io(){if(this.count--,this.count===0){if(this.stylesheets)Af(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Vo=null;function Af(r,i){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Vo=new Map,i.forEach(fN,r),Vo=null,Io.call(r))}function fN(r,i){if(!(i.state.loading&4)){var o=Vo.get(r);if(o)var u=o.get(null);else{o=new Map,Vo.set(r,o);for(var m=r.querySelectorAll("link[data-precedence],style[data-precedence]"),x=0;x<m.length;x++){var N=m[x];(N.nodeName==="LINK"||N.getAttribute("media")!=="not all")&&(o.set(N.dataset.precedence,N),u=N)}u&&o.set(null,u)}m=i.instance,N=m.getAttribute("data-precedence"),x=o.get(N)||u,x===u&&o.set(null,m),o.set(N,m),this.count++,u=Io.bind(this),m.addEventListener("load",u),m.addEventListener("error",u),x?x.parentNode.insertBefore(m,x.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(m,r.firstChild)),i.state.loading|=4}}var Fl={$$typeof:z,Provider:null,Consumer:null,_currentValue:re,_currentValue2:re,_threadCount:0};function hN(r,i,o,u,m,x,N,j){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=wu(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wu(0),this.hiddenUpdates=wu(null),this.identifierPrefix=u,this.onUncaughtError=m,this.onCaughtError=x,this.onRecoverableError=N,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=j,this.incompleteTransitions=new Map}function Ax(r,i,o,u,m,x,N,j,A,H,$,J){return r=new hN(r,i,o,N,j,A,H,J),i=1,x===!0&&(i|=24),x=Kt(3,null,null,i),r.current=x,x.stateNode=r,i=od(),i.refCount++,r.pooledCache=i,i.refCount++,x.memoizedState={element:u,isDehydrated:o,cache:i},fd(x),r}function Tx(r){return r?(r=si,r):si}function Mx(r,i,o,u,m,x){m=Tx(m),u.context===null?u.context=m:u.pendingContext=m,u=yr(i),u.payload={element:o},x=x===void 0?null:x,x!==null&&(u.callback=x),o=br(r,u,i),o!==null&&(Wt(o,r,i),vl(o,r,i))}function Ox(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<i?o:i}}function Tf(r,i){Ox(r,i),(r=r.alternate)&&Ox(r,i)}function Rx(r){if(r.tag===13){var i=ri(r,67108864);i!==null&&Wt(i,r,67108864),Tf(r,67108864)}}var qo=!0;function pN(r,i,o,u){var m=P.T;P.T=null;var x=te.p;try{te.p=2,Mf(r,i,o,u)}finally{te.p=x,P.T=m}}function mN(r,i,o,u){var m=P.T;P.T=null;var x=te.p;try{te.p=8,Mf(r,i,o,u)}finally{te.p=x,P.T=m}}function Mf(r,i,o,u){if(qo){var m=Of(u);if(m===null)xf(r,i,u,Fo,o),zx(r,u);else if(xN(m,r,i,o,u))u.stopPropagation();else if(zx(r,u),i&4&&-1<gN.indexOf(r)){for(;m!==null;){var x=$s(m);if(x!==null)switch(x.tag){case 3:if(x=x.stateNode,x.current.memoizedState.isDehydrated){var N=ns(x.pendingLanes);if(N!==0){var j=x;for(j.pendingLanes|=2,j.entangledLanes|=2;N;){var A=1<<31-Gt(N);j.entanglements[1]|=A,N&=~A}Rn(x),(ze&6)===0&&(Eo=En()+500,_l(0))}}break;case 13:j=ri(x,2),j!==null&&Wt(j,x,2),To(),Tf(x,2)}if(x=Of(u),x===null&&xf(r,i,u,Fo,o),x===m)break;m=x}m!==null&&u.stopPropagation()}else xf(r,i,u,null,o)}}function Of(r){return r=Lu(r),Rf(r)}var Fo=null;function Rf(r){if(Fo=null,r=Fs(r),r!==null){var i=a(r);if(i===null)r=null;else{var o=i.tag;if(o===13){if(r=c(i),r!==null)return r;r=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null)}}return Fo=r,null}function Dx(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(tS()){case Yp:return 2;case Kp:return 8;case La:case nS:return 32;case Jp:return 268435456;default:return 32}default:return 32}}var Df=!1,Rr=null,Dr=null,zr=null,$l=new Map,Gl=new Map,Lr=[],gN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function zx(r,i){switch(r){case"focusin":case"focusout":Rr=null;break;case"dragenter":case"dragleave":Dr=null;break;case"mouseover":case"mouseout":zr=null;break;case"pointerover":case"pointerout":$l.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gl.delete(i.pointerId)}}function Yl(r,i,o,u,m,x){return r===null||r.nativeEvent!==x?(r={blockedOn:i,domEventName:o,eventSystemFlags:u,nativeEvent:x,targetContainers:[m]},i!==null&&(i=$s(i),i!==null&&Rx(i)),r):(r.eventSystemFlags|=u,i=r.targetContainers,m!==null&&i.indexOf(m)===-1&&i.push(m),r)}function xN(r,i,o,u,m){switch(i){case"focusin":return Rr=Yl(Rr,r,i,o,u,m),!0;case"dragenter":return Dr=Yl(Dr,r,i,o,u,m),!0;case"mouseover":return zr=Yl(zr,r,i,o,u,m),!0;case"pointerover":var x=m.pointerId;return $l.set(x,Yl($l.get(x)||null,r,i,o,u,m)),!0;case"gotpointercapture":return x=m.pointerId,Gl.set(x,Yl(Gl.get(x)||null,r,i,o,u,m)),!0}return!1}function Lx(r){var i=Fs(r.target);if(i!==null){var o=a(i);if(o!==null){if(i=o.tag,i===13){if(i=c(o),i!==null){r.blockedOn=i,uS(r.priority,function(){if(o.tag===13){var u=Zt();u=ku(u);var m=ri(o,u);m!==null&&Wt(m,o,u),Tf(o,u)}});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function $o(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var o=Of(r.nativeEvent);if(o===null){o=r.nativeEvent;var u=new o.constructor(o.type,o);zu=u,o.target.dispatchEvent(u),zu=null}else return i=$s(o),i!==null&&Rx(i),r.blockedOn=o,!1;i.shift()}return!0}function Bx(r,i,o){$o(r)&&o.delete(i)}function yN(){Df=!1,Rr!==null&&$o(Rr)&&(Rr=null),Dr!==null&&$o(Dr)&&(Dr=null),zr!==null&&$o(zr)&&(zr=null),$l.forEach(Bx),Gl.forEach(Bx)}function Go(r,i){r.blockedOn===i&&(r.blockedOn=null,Df||(Df=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,yN)))}var Yo=null;function _x(r){Yo!==r&&(Yo=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Yo===r&&(Yo=null);for(var i=0;i<r.length;i+=3){var o=r[i],u=r[i+1],m=r[i+2];if(typeof u!="function"){if(Rf(u||o)===null)continue;break}var x=$s(o);x!==null&&(r.splice(i,3),i-=3,Od(x,{pending:!0,data:m,method:o.method,action:u},u,m))}}))}function Kl(r){function i(A){return Go(A,r)}Rr!==null&&Go(Rr,r),Dr!==null&&Go(Dr,r),zr!==null&&Go(zr,r),$l.forEach(i),Gl.forEach(i);for(var o=0;o<Lr.length;o++){var u=Lr[o];u.blockedOn===r&&(u.blockedOn=null)}for(;0<Lr.length&&(o=Lr[0],o.blockedOn===null);)Lx(o),o.blockedOn===null&&Lr.shift();if(o=(r.ownerDocument||r).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var m=o[u],x=o[u+1],N=m[_t]||null;if(typeof x=="function")N||_x(o);else if(N){var j=null;if(x&&x.hasAttribute("formAction")){if(m=x,N=x[_t]||null)j=N.formAction;else if(Rf(m)!==null)continue}else j=N.action;typeof j=="function"?o[u+1]=j:(o.splice(u,3),u-=3),_x(o)}}}function zf(r){this._internalRoot=r}Ko.prototype.render=zf.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(s(409));var o=i.current,u=Zt();Mx(o,u,r,i,null,null)},Ko.prototype.unmount=zf.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;Mx(r.current,2,null,r,null,null),To(),i[qs]=null}};function Ko(r){this._internalRoot=r}Ko.prototype.unstable_scheduleHydration=function(r){if(r){var i=em();r={blockedOn:null,target:r,priority:i};for(var o=0;o<Lr.length&&i!==0&&i<Lr[o].priority;o++);Lr.splice(o,0,r),o===0&&Lx(r)}};var Hx=e.version;if(Hx!=="19.1.0")throw Error(s(527,Hx,"19.1.0"));te.findDOMNode=function(r){var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(s(188)):(r=Object.keys(r).join(","),Error(s(268,r)));return r=h(i),r=r!==null?p(r):null,r=r===null?null:r.stateNode,r};var bN={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jo.isDisabled&&Jo.supportsFiber)try{Zi=Jo.inject(bN),$t=Jo}catch{}}return Ql.createRoot=function(r,i){if(!l(r))throw Error(s(299));var o=!1,u="",m=e0,x=t0,N=n0,j=null;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(m=i.onUncaughtError),i.onCaughtError!==void 0&&(x=i.onCaughtError),i.onRecoverableError!==void 0&&(N=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(j=i.unstable_transitionCallbacks)),i=Ax(r,1,!1,null,null,o,u,m,x,N,j,null),r[qs]=i.current,gf(r),new zf(i)},Ql.hydrateRoot=function(r,i,o){if(!l(r))throw Error(s(299));var u=!1,m="",x=e0,N=t0,j=n0,A=null,H=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(x=o.onUncaughtError),o.onCaughtError!==void 0&&(N=o.onCaughtError),o.onRecoverableError!==void 0&&(j=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(A=o.unstable_transitionCallbacks),o.formState!==void 0&&(H=o.formState)),i=Ax(r,1,!0,i,o??null,u,m,x,N,j,A,H),i.context=Tx(null),o=i.current,u=Zt(),u=ku(u),m=yr(u),m.callback=null,br(o,m,u),o=u,i.current.lanes=o,el(i,o),Rn(i),r[qs]=i.current,gf(r),new Ko(i)},Ql.version="19.1.0",Ql}var Kx;function AN(){if(Kx)return _f.exports;Kx=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),_f.exports=EN(),_f.exports}var TN=AN();const MN=Xh(TN);var Xl={},Jx;function ON(){if(Jx)return Xl;Jx=1,Object.defineProperty(Xl,"__esModule",{value:!0}),Xl.parse=c,Xl.serialize=p;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,l=Object.prototype.toString,a=(()=>{const b=function(){};return b.prototype=Object.create(null),b})();function c(b,S){const v=new a,w=b.length;if(w<2)return v;const k=(S==null?void 0:S.decode)||g;let E=0;do{const O=b.indexOf("=",E);if(O===-1)break;const z=b.indexOf(";",E),q=z===-1?w:z;if(O>q){E=b.lastIndexOf(";",O-1)+1;continue}const D=d(b,E,O),I=h(b,O,D),L=b.slice(D,I);if(v[L]===void 0){let G=d(b,O+1,q),ne=h(b,q,G);const se=k(b.slice(G,ne));v[L]=se}E=q+1}while(E<w);return v}function d(b,S,v){do{const w=b.charCodeAt(S);if(w!==32&&w!==9)return S}while(++S<v);return v}function h(b,S,v){for(;S>v;){const w=b.charCodeAt(--S);if(w!==32&&w!==9)return S+1}return v}function p(b,S,v){const w=(v==null?void 0:v.encode)||encodeURIComponent;if(!n.test(b))throw new TypeError(`argument name is invalid: ${b}`);const k=w(S);if(!e.test(k))throw new TypeError(`argument val is invalid: ${S}`);let E=b+"="+k;if(!v)return E;if(v.maxAge!==void 0){if(!Number.isInteger(v.maxAge))throw new TypeError(`option maxAge is invalid: ${v.maxAge}`);E+="; Max-Age="+v.maxAge}if(v.domain){if(!t.test(v.domain))throw new TypeError(`option domain is invalid: ${v.domain}`);E+="; Domain="+v.domain}if(v.path){if(!s.test(v.path))throw new TypeError(`option path is invalid: ${v.path}`);E+="; Path="+v.path}if(v.expires){if(!y(v.expires)||!Number.isFinite(v.expires.valueOf()))throw new TypeError(`option expires is invalid: ${v.expires}`);E+="; Expires="+v.expires.toUTCString()}if(v.httpOnly&&(E+="; HttpOnly"),v.secure&&(E+="; Secure"),v.partitioned&&(E+="; Partitioned"),v.priority)switch(typeof v.priority=="string"?v.priority.toLowerCase():void 0){case"low":E+="; Priority=Low";break;case"medium":E+="; Priority=Medium";break;case"high":E+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${v.priority}`)}if(v.sameSite)switch(typeof v.sameSite=="string"?v.sameSite.toLowerCase():v.sameSite){case!0:case"strict":E+="; SameSite=Strict";break;case"lax":E+="; SameSite=Lax";break;case"none":E+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${v.sameSite}`)}return E}function g(b){if(b.indexOf("%")===-1)return b;try{return decodeURIComponent(b)}catch{return b}}function y(b){return l.call(b)==="[object Date]"}return Xl}ON();var Qx="popstate";function RN(n={}){function e(s,l){let{pathname:a,search:c,hash:d}=s.location;return yh("",{pathname:a,search:c,hash:d},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(s,l){return typeof l=="string"?l:ga(l)}return zN(e,t,null,n)}function Fe(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function wn(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function DN(){return Math.random().toString(36).substring(2,10)}function Xx(n,e){return{usr:n.state,key:n.key,idx:e}}function yh(n,e,t=null,s){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Ki(e):e,state:t,key:e&&e.key||s||DN()}}function ga({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Ki(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let s=n.indexOf("?");s>=0&&(e.search=n.substring(s),n=n.substring(0,s)),n&&(e.pathname=n)}return e}function zN(n,e,t,s={}){let{window:l=document.defaultView,v5Compat:a=!1}=s,c=l.history,d="POP",h=null,p=g();p==null&&(p=0,c.replaceState({...c.state,idx:p},""));function g(){return(c.state||{idx:null}).idx}function y(){d="POP";let k=g(),E=k==null?null:k-p;p=k,h&&h({action:d,location:w.location,delta:E})}function b(k,E){d="PUSH";let O=yh(w.location,k,E);p=g()+1;let z=Xx(O,p),q=w.createHref(O);try{c.pushState(z,"",q)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;l.location.assign(q)}a&&h&&h({action:d,location:w.location,delta:1})}function S(k,E){d="REPLACE";let O=yh(w.location,k,E);p=g();let z=Xx(O,p),q=w.createHref(O);c.replaceState(z,"",q),a&&h&&h({action:d,location:w.location,delta:0})}function v(k){return LN(k)}let w={get action(){return d},get location(){return n(l,c)},listen(k){if(h)throw new Error("A history only accepts one active listener");return l.addEventListener(Qx,y),h=k,()=>{l.removeEventListener(Qx,y),h=null}},createHref(k){return e(l,k)},createURL:v,encodeLocation(k){let E=v(k);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:b,replace:S,go(k){return c.go(k)}};return w}function LN(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Fe(t,"No window.location.(origin|href) available to create URL");let s=typeof n=="string"?n:ga(n);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=t+s),new URL(s,t)}function Tb(n,e,t="/"){return BN(n,e,t,!1)}function BN(n,e,t,s){let l=typeof e=="string"?Ki(e):e,a=cr(l.pathname||"/",t);if(a==null)return null;let c=Mb(n);_N(c);let d=null;for(let h=0;d==null&&h<c.length;++h){let p=KN(a);d=GN(c[h],p,s)}return d}function Mb(n,e=[],t=[],s=""){let l=(a,c,d)=>{let h={relativePath:d===void 0?a.path||"":d,caseSensitive:a.caseSensitive===!0,childrenIndex:c,route:a};h.relativePath.startsWith("/")&&(Fe(h.relativePath.startsWith(s),`Absolute route path "${h.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(s.length));let p=lr([s,h.relativePath]),g=t.concat(h);a.children&&a.children.length>0&&(Fe(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),Mb(a.children,e,g,p)),!(a.path==null&&!a.index)&&e.push({path:p,score:FN(p,a.index),routesMeta:g})};return n.forEach((a,c)=>{var d;if(a.path===""||!((d=a.path)!=null&&d.includes("?")))l(a,c);else for(let h of Ob(a.path))l(a,c,h)}),e}function Ob(n){let e=n.split("/");if(e.length===0)return[];let[t,...s]=e,l=t.endsWith("?"),a=t.replace(/\?$/,"");if(s.length===0)return l?[a,""]:[a];let c=Ob(s.join("/")),d=[];return d.push(...c.map(h=>h===""?a:[a,h].join("/"))),l&&d.push(...c),d.map(h=>n.startsWith("/")&&h===""?"/":h)}function _N(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:$N(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}var HN=/^:[\w-]+$/,UN=3,PN=2,IN=1,VN=10,qN=-2,Zx=n=>n==="*";function FN(n,e){let t=n.split("/"),s=t.length;return t.some(Zx)&&(s+=qN),e&&(s+=PN),t.filter(l=>!Zx(l)).reduce((l,a)=>l+(HN.test(a)?UN:a===""?IN:VN),s)}function $N(n,e){return n.length===e.length&&n.slice(0,-1).every((s,l)=>s===e[l])?n[n.length-1]-e[e.length-1]:0}function GN(n,e,t=!1){let{routesMeta:s}=n,l={},a="/",c=[];for(let d=0;d<s.length;++d){let h=s[d],p=d===s.length-1,g=a==="/"?e:e.slice(a.length)||"/",y=mc({path:h.relativePath,caseSensitive:h.caseSensitive,end:p},g),b=h.route;if(!y&&p&&t&&!s[s.length-1].route.index&&(y=mc({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},g)),!y)return null;Object.assign(l,y.params),c.push({params:l,pathname:lr([a,y.pathname]),pathnameBase:ZN(lr([a,y.pathnameBase])),route:b}),y.pathnameBase!=="/"&&(a=lr([a,y.pathnameBase]))}return c}function mc(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,s]=YN(n.path,n.caseSensitive,n.end),l=e.match(t);if(!l)return null;let a=l[0],c=a.replace(/(.)\/+$/,"$1"),d=l.slice(1);return{params:s.reduce((p,{paramName:g,isOptional:y},b)=>{if(g==="*"){let v=d[b]||"";c=a.slice(0,a.length-v.length).replace(/(.)\/+$/,"$1")}const S=d[b];return y&&!S?p[g]=void 0:p[g]=(S||"").replace(/%2F/g,"/"),p},{}),pathname:a,pathnameBase:c,pattern:n}}function YN(n,e=!1,t=!0){wn(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let s=[],l="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,h)=>(s.push({paramName:d,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(s.push({paramName:"*"}),l+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?l+="\\/*$":n!==""&&n!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,e?void 0:"i"),s]}function KN(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return wn(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function cr(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=n.charAt(t);return s&&s!=="/"?null:n.slice(t)||"/"}function JN(n,e="/"){let{pathname:t,search:s="",hash:l=""}=typeof n=="string"?Ki(n):n;return{pathname:t?t.startsWith("/")?t:QN(t,e):e,search:WN(s),hash:ew(l)}}function QN(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(l=>{l===".."?t.length>1&&t.pop():l!=="."&&t.push(l)}),t.length>1?t.join("/"):"/"}function If(n,e,t,s){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function XN(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Wh(n){let e=XN(n);return e.map((t,s)=>s===e.length-1?t.pathname:t.pathnameBase)}function ep(n,e,t,s=!1){let l;typeof n=="string"?l=Ki(n):(l={...n},Fe(!l.pathname||!l.pathname.includes("?"),If("?","pathname","search",l)),Fe(!l.pathname||!l.pathname.includes("#"),If("#","pathname","hash",l)),Fe(!l.search||!l.search.includes("#"),If("#","search","hash",l)));let a=n===""||l.pathname==="",c=a?"/":l.pathname,d;if(c==null)d=t;else{let y=e.length-1;if(!s&&c.startsWith("..")){let b=c.split("/");for(;b[0]==="..";)b.shift(),y-=1;l.pathname=b.join("/")}d=y>=0?e[y]:"/"}let h=JN(l,d),p=c&&c!=="/"&&c.endsWith("/"),g=(a||c===".")&&t.endsWith("/");return!h.pathname.endsWith("/")&&(p||g)&&(h.pathname+="/"),h}var lr=n=>n.join("/").replace(/\/\/+/g,"/"),ZN=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),WN=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,ew=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function tw(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var Rb=["POST","PUT","PATCH","DELETE"];new Set(Rb);var nw=["GET",...Rb];new Set(nw);var Ji=C.createContext(null);Ji.displayName="DataRouter";var nu=C.createContext(null);nu.displayName="DataRouterState";var Db=C.createContext({isTransitioning:!1});Db.displayName="ViewTransition";var rw=C.createContext(new Map);rw.displayName="Fetchers";var sw=C.createContext(null);sw.displayName="Await";var jn=C.createContext(null);jn.displayName="Navigation";var Ta=C.createContext(null);Ta.displayName="Location";var Cn=C.createContext({outlet:null,matches:[],isDataRoute:!1});Cn.displayName="Route";var tp=C.createContext(null);tp.displayName="RouteError";function iw(n,{relative:e}={}){Fe(Qi(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:s}=C.useContext(jn),{hash:l,pathname:a,search:c}=Ma(n,{relative:e}),d=a;return t!=="/"&&(d=a==="/"?t:lr([t,a])),s.createHref({pathname:d,search:c,hash:l})}function Qi(){return C.useContext(Ta)!=null}function dr(){return Fe(Qi(),"useLocation() may be used only in the context of a <Router> component."),C.useContext(Ta).location}var zb="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Lb(n){C.useContext(jn).static||C.useLayoutEffect(n)}function fr(){let{isDataRoute:n}=C.useContext(Cn);return n?yw():lw()}function lw(){Fe(Qi(),"useNavigate() may be used only in the context of a <Router> component.");let n=C.useContext(Ji),{basename:e,navigator:t}=C.useContext(jn),{matches:s}=C.useContext(Cn),{pathname:l}=dr(),a=JSON.stringify(Wh(s)),c=C.useRef(!1);return Lb(()=>{c.current=!0}),C.useCallback((h,p={})=>{if(wn(c.current,zb),!c.current)return;if(typeof h=="number"){t.go(h);return}let g=ep(h,JSON.parse(a),l,p.relative==="path");n==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:lr([e,g.pathname])),(p.replace?t.replace:t.push)(g,p.state,p)},[e,t,a,l,n])}C.createContext(null);function ru(){let{matches:n}=C.useContext(Cn),e=n[n.length-1];return e?e.params:{}}function Ma(n,{relative:e}={}){let{matches:t}=C.useContext(Cn),{pathname:s}=dr(),l=JSON.stringify(Wh(t));return C.useMemo(()=>ep(n,JSON.parse(l),s,e==="path"),[n,l,s,e])}function aw(n,e){return Bb(n,e)}function Bb(n,e,t,s){var O;Fe(Qi(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l,static:a}=C.useContext(jn),{matches:c}=C.useContext(Cn),d=c[c.length-1],h=d?d.params:{},p=d?d.pathname:"/",g=d?d.pathnameBase:"/",y=d&&d.route;{let z=y&&y.path||"";_b(p,!y||z.endsWith("*")||z.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${z}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${z}"> to <Route path="${z==="/"?"*":`${z}/*`}">.`)}let b=dr(),S;if(e){let z=typeof e=="string"?Ki(e):e;Fe(g==="/"||((O=z.pathname)==null?void 0:O.startsWith(g)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${z.pathname}" was given in the \`location\` prop.`),S=z}else S=b;let v=S.pathname||"/",w=v;if(g!=="/"){let z=g.replace(/^\//,"").split("/");w="/"+v.replace(/^\//,"").split("/").slice(z.length).join("/")}let k=!a&&t&&t.matches&&t.matches.length>0?t.matches:Tb(n,{pathname:w});wn(y||k!=null,`No routes matched location "${S.pathname}${S.search}${S.hash}" `),wn(k==null||k[k.length-1].route.element!==void 0||k[k.length-1].route.Component!==void 0||k[k.length-1].route.lazy!==void 0,`Matched leaf route at location "${S.pathname}${S.search}${S.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let E=fw(k&&k.map(z=>Object.assign({},z,{params:Object.assign({},h,z.params),pathname:lr([g,l.encodeLocation?l.encodeLocation(z.pathname).pathname:z.pathname]),pathnameBase:z.pathnameBase==="/"?g:lr([g,l.encodeLocation?l.encodeLocation(z.pathnameBase).pathname:z.pathnameBase])})),c,t,s);return e&&E?C.createElement(Ta.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...S},navigationType:"POP"}},E):E}function ow(){let n=xw(),e=tw(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:s},a={padding:"2px 4px",backgroundColor:s},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=C.createElement(C.Fragment,null,C.createElement("p",null,"💿 Hey developer 👋"),C.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",C.createElement("code",{style:a},"ErrorBoundary")," or"," ",C.createElement("code",{style:a},"errorElement")," prop on your route.")),C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},e),t?C.createElement("pre",{style:l},t):null,c)}var cw=C.createElement(ow,null),uw=class extends C.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?C.createElement(Cn.Provider,{value:this.props.routeContext},C.createElement(tp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function dw({routeContext:n,match:e,children:t}){let s=C.useContext(Ji);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),C.createElement(Cn.Provider,{value:n},t)}function fw(n,e=[],t=null,s=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let l=n,a=t==null?void 0:t.errors;if(a!=null){let h=l.findIndex(p=>p.route.id&&(a==null?void 0:a[p.route.id])!==void 0);Fe(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),l=l.slice(0,Math.min(l.length,h+1))}let c=!1,d=-1;if(t)for(let h=0;h<l.length;h++){let p=l[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=h),p.route.id){let{loaderData:g,errors:y}=t,b=p.route.loader&&!g.hasOwnProperty(p.route.id)&&(!y||y[p.route.id]===void 0);if(p.route.lazy||b){c=!0,d>=0?l=l.slice(0,d+1):l=[l[0]];break}}}return l.reduceRight((h,p,g)=>{let y,b=!1,S=null,v=null;t&&(y=a&&p.route.id?a[p.route.id]:void 0,S=p.route.errorElement||cw,c&&(d<0&&g===0?(_b("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,v=null):d===g&&(b=!0,v=p.route.hydrateFallbackElement||null)));let w=e.concat(l.slice(0,g+1)),k=()=>{let E;return y?E=S:b?E=v:p.route.Component?E=C.createElement(p.route.Component,null):p.route.element?E=p.route.element:E=h,C.createElement(dw,{match:p,routeContext:{outlet:h,matches:w,isDataRoute:t!=null},children:E})};return t&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?C.createElement(uw,{location:t.location,revalidation:t.revalidation,component:S,error:y,children:k(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):k()},null)}function np(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function hw(n){let e=C.useContext(Ji);return Fe(e,np(n)),e}function pw(n){let e=C.useContext(nu);return Fe(e,np(n)),e}function mw(n){let e=C.useContext(Cn);return Fe(e,np(n)),e}function rp(n){let e=mw(n),t=e.matches[e.matches.length-1];return Fe(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function gw(){return rp("useRouteId")}function xw(){var s;let n=C.useContext(tp),e=pw("useRouteError"),t=rp("useRouteError");return n!==void 0?n:(s=e.errors)==null?void 0:s[t]}function yw(){let{router:n}=hw("useNavigate"),e=rp("useNavigate"),t=C.useRef(!1);return Lb(()=>{t.current=!0}),C.useCallback(async(l,a={})=>{wn(t.current,zb),t.current&&(typeof l=="number"?n.navigate(l):await n.navigate(l,{fromRouteId:e,...a}))},[n,e])}var Wx={};function _b(n,e,t){!e&&!Wx[n]&&(Wx[n]=!0,wn(!1,t))}C.memo(bw);function bw({routes:n,future:e,state:t}){return Bb(n,void 0,t,e)}function bh({to:n,replace:e,state:t,relative:s}){Fe(Qi(),"<Navigate> may be used only in the context of a <Router> component.");let{static:l}=C.useContext(jn);wn(!l,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=C.useContext(Cn),{pathname:c}=dr(),d=fr(),h=ep(n,Wh(a),c,s==="path"),p=JSON.stringify(h);return C.useEffect(()=>{d(JSON.parse(p),{replace:e,state:t,relative:s})},[d,p,s,e,t]),null}function ut(n){Fe(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function vw({basename:n="/",children:e=null,location:t,navigationType:s="POP",navigator:l,static:a=!1}){Fe(!Qi(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=n.replace(/^\/*/,"/"),d=C.useMemo(()=>({basename:c,navigator:l,static:a,future:{}}),[c,l,a]);typeof t=="string"&&(t=Ki(t));let{pathname:h="/",search:p="",hash:g="",state:y=null,key:b="default"}=t,S=C.useMemo(()=>{let v=cr(h,c);return v==null?null:{location:{pathname:v,search:p,hash:g,state:y,key:b},navigationType:s}},[c,h,p,g,y,b,s]);return wn(S!=null,`<Router basename="${c}"> is not able to match the URL "${h}${p}${g}" because it does not start with the basename, so the <Router> won't render anything.`),S==null?null:C.createElement(jn.Provider,{value:d},C.createElement(Ta.Provider,{children:e,value:S}))}function Sw({children:n,location:e}){return aw(vh(n),e)}function vh(n,e=[]){let t=[];return C.Children.forEach(n,(s,l)=>{if(!C.isValidElement(s))return;let a=[...e,l];if(s.type===C.Fragment){t.push.apply(t,vh(s.props.children,a));return}Fe(s.type===ut,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Fe(!s.props.index||!s.props.children,"An index route cannot have child routes.");let c={id:s.props.id||a.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(c.children=vh(s.props.children,a)),t.push(c)}),t}var ac="get",oc="application/x-www-form-urlencoded";function su(n){return n!=null&&typeof n.tagName=="string"}function Nw(n){return su(n)&&n.tagName.toLowerCase()==="button"}function ww(n){return su(n)&&n.tagName.toLowerCase()==="form"}function kw(n){return su(n)&&n.tagName.toLowerCase()==="input"}function jw(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function Cw(n,e){return n.button===0&&(!e||e==="_self")&&!jw(n)}var Qo=null;function Ew(){if(Qo===null)try{new FormData(document.createElement("form"),0),Qo=!1}catch{Qo=!0}return Qo}var Aw=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Vf(n){return n!=null&&!Aw.has(n)?(wn(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${oc}"`),null):n}function Tw(n,e){let t,s,l,a,c;if(ww(n)){let d=n.getAttribute("action");s=d?cr(d,e):null,t=n.getAttribute("method")||ac,l=Vf(n.getAttribute("enctype"))||oc,a=new FormData(n)}else if(Nw(n)||kw(n)&&(n.type==="submit"||n.type==="image")){let d=n.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=n.getAttribute("formaction")||d.getAttribute("action");if(s=h?cr(h,e):null,t=n.getAttribute("formmethod")||d.getAttribute("method")||ac,l=Vf(n.getAttribute("formenctype"))||Vf(d.getAttribute("enctype"))||oc,a=new FormData(d,n),!Ew()){let{name:p,type:g,value:y}=n;if(g==="image"){let b=p?`${p}.`:"";a.append(`${b}x`,"0"),a.append(`${b}y`,"0")}else p&&a.append(p,y)}}else{if(su(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=ac,s=null,l=oc,c=n}return a&&l==="text/plain"&&(c=a,a=void 0),{action:s,method:t.toLowerCase(),encType:l,formData:a,body:c}}function sp(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function Mw(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Ow(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function Rw(n,e,t){let s=await Promise.all(n.map(async l=>{let a=e.routes[l.route.id];if(a){let c=await Mw(a,t);return c.links?c.links():[]}return[]}));return Bw(s.flat(1).filter(Ow).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function ey(n,e,t,s,l,a){let c=(h,p)=>t[p]?h.route.id!==t[p].route.id:!0,d=(h,p)=>{var g;return t[p].pathname!==h.pathname||((g=t[p].route.path)==null?void 0:g.endsWith("*"))&&t[p].params["*"]!==h.params["*"]};return a==="assets"?e.filter((h,p)=>c(h,p)||d(h,p)):a==="data"?e.filter((h,p)=>{var y;let g=s.routes[h.route.id];if(!g||!g.hasLoader)return!1;if(c(h,p)||d(h,p))return!0;if(h.route.shouldRevalidate){let b=h.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:((y=t[0])==null?void 0:y.params)||{},nextUrl:new URL(n,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function Dw(n,e,{includeHydrateFallback:t}={}){return zw(n.map(s=>{let l=e.routes[s.route.id];if(!l)return[];let a=[l.module];return l.clientActionModule&&(a=a.concat(l.clientActionModule)),l.clientLoaderModule&&(a=a.concat(l.clientLoaderModule)),t&&l.hydrateFallbackModule&&(a=a.concat(l.hydrateFallbackModule)),l.imports&&(a=a.concat(l.imports)),a}).flat(1))}function zw(n){return[...new Set(n)]}function Lw(n){let e={},t=Object.keys(n).sort();for(let s of t)e[s]=n[s];return e}function Bw(n,e){let t=new Set;return new Set(e),n.reduce((s,l)=>{let a=JSON.stringify(Lw(l));return t.has(a)||(t.add(a),s.push({key:a,link:l})),s},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var _w=new Set([100,101,204,205]);function Hw(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&cr(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function Hb(){let n=C.useContext(Ji);return sp(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function Uw(){let n=C.useContext(nu);return sp(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var ip=C.createContext(void 0);ip.displayName="FrameworkContext";function Ub(){let n=C.useContext(ip);return sp(n,"You must render this element inside a <HydratedRouter> element"),n}function Pw(n,e){let t=C.useContext(ip),[s,l]=C.useState(!1),[a,c]=C.useState(!1),{onFocus:d,onBlur:h,onMouseEnter:p,onMouseLeave:g,onTouchStart:y}=e,b=C.useRef(null);C.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let w=E=>{E.forEach(O=>{c(O.isIntersecting)})},k=new IntersectionObserver(w,{threshold:.5});return b.current&&k.observe(b.current),()=>{k.disconnect()}}},[n]),C.useEffect(()=>{if(s){let w=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(w)}}},[s]);let S=()=>{l(!0)},v=()=>{l(!1),c(!1)};return t?n!=="intent"?[a,b,{}]:[a,b,{onFocus:Zl(d,S),onBlur:Zl(h,v),onMouseEnter:Zl(p,S),onMouseLeave:Zl(g,v),onTouchStart:Zl(y,S)}]:[!1,b,{}]}function Zl(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function Iw({page:n,...e}){let{router:t}=Hb(),s=C.useMemo(()=>Tb(t.routes,n,t.basename),[t.routes,n,t.basename]);return s?C.createElement(qw,{page:n,matches:s,...e}):null}function Vw(n){let{manifest:e,routeModules:t}=Ub(),[s,l]=C.useState([]);return C.useEffect(()=>{let a=!1;return Rw(n,e,t).then(c=>{a||l(c)}),()=>{a=!0}},[n,e,t]),s}function qw({page:n,matches:e,...t}){let s=dr(),{manifest:l,routeModules:a}=Ub(),{basename:c}=Hb(),{loaderData:d,matches:h}=Uw(),p=C.useMemo(()=>ey(n,e,h,l,s,"data"),[n,e,h,l,s]),g=C.useMemo(()=>ey(n,e,h,l,s,"assets"),[n,e,h,l,s]),y=C.useMemo(()=>{if(n===s.pathname+s.search+s.hash)return[];let v=new Set,w=!1;if(e.forEach(E=>{var z;let O=l.routes[E.route.id];!O||!O.hasLoader||(!p.some(q=>q.route.id===E.route.id)&&E.route.id in d&&((z=a[E.route.id])!=null&&z.shouldRevalidate)||O.hasClientLoader?w=!0:v.add(E.route.id))}),v.size===0)return[];let k=Hw(n,c);return w&&v.size>0&&k.searchParams.set("_routes",e.filter(E=>v.has(E.route.id)).map(E=>E.route.id).join(",")),[k.pathname+k.search]},[c,d,s,l,p,e,n,a]),b=C.useMemo(()=>Dw(g,l),[g,l]),S=Vw(g);return C.createElement(C.Fragment,null,y.map(v=>C.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...t})),b.map(v=>C.createElement("link",{key:v,rel:"modulepreload",href:v,...t})),S.map(({key:v,link:w})=>C.createElement("link",{key:v,...w})))}function Fw(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var Pb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Pb&&(window.__reactRouterVersion="7.6.0")}catch{}function $w({basename:n,children:e,window:t}){let s=C.useRef();s.current==null&&(s.current=RN({window:t,v5Compat:!0}));let l=s.current,[a,c]=C.useState({action:l.action,location:l.location}),d=C.useCallback(h=>{C.startTransition(()=>c(h))},[c]);return C.useLayoutEffect(()=>l.listen(d),[l,d]),C.createElement(vw,{basename:n,children:e,location:a.location,navigationType:a.action,navigator:l})}var Ib=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,me=C.forwardRef(function({onClick:e,discover:t="render",prefetch:s="none",relative:l,reloadDocument:a,replace:c,state:d,target:h,to:p,preventScrollReset:g,viewTransition:y,...b},S){let{basename:v}=C.useContext(jn),w=typeof p=="string"&&Ib.test(p),k,E=!1;if(typeof p=="string"&&w&&(k=p,Pb))try{let ne=new URL(window.location.href),se=p.startsWith("//")?new URL(ne.protocol+p):new URL(p),ue=cr(se.pathname,v);se.origin===ne.origin&&ue!=null?p=ue+se.search+se.hash:E=!0}catch{wn(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let O=iw(p,{relative:l}),[z,q,D]=Pw(s,b),I=Jw(p,{replace:c,state:d,target:h,preventScrollReset:g,relative:l,viewTransition:y});function L(ne){e&&e(ne),ne.defaultPrevented||I(ne)}let G=C.createElement("a",{...b,...D,href:k||O,onClick:E||a?e:L,ref:Fw(S,q),target:h,"data-discover":!w&&t==="render"?"true":void 0});return z&&!w?C.createElement(C.Fragment,null,G,C.createElement(Iw,{page:O})):G});me.displayName="Link";var Gw=C.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:s="",end:l=!1,style:a,to:c,viewTransition:d,children:h,...p},g){let y=Ma(c,{relative:p.relative}),b=dr(),S=C.useContext(nu),{navigator:v,basename:w}=C.useContext(jn),k=S!=null&&ek(y)&&d===!0,E=v.encodeLocation?v.encodeLocation(y).pathname:y.pathname,O=b.pathname,z=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;t||(O=O.toLowerCase(),z=z?z.toLowerCase():null,E=E.toLowerCase()),z&&w&&(z=cr(z,w)||z);const q=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let D=O===E||!l&&O.startsWith(E)&&O.charAt(q)==="/",I=z!=null&&(z===E||!l&&z.startsWith(E)&&z.charAt(E.length)==="/"),L={isActive:D,isPending:I,isTransitioning:k},G=D?e:void 0,ne;typeof s=="function"?ne=s(L):ne=[s,D?"active":null,I?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let se=typeof a=="function"?a(L):a;return C.createElement(me,{...p,"aria-current":G,className:ne,ref:g,style:se,to:c,viewTransition:d},typeof h=="function"?h(L):h)});Gw.displayName="NavLink";var Yw=C.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:s,replace:l,state:a,method:c=ac,action:d,onSubmit:h,relative:p,preventScrollReset:g,viewTransition:y,...b},S)=>{let v=Zw(),w=Ww(d,{relative:p}),k=c.toLowerCase()==="get"?"get":"post",E=typeof d=="string"&&Ib.test(d),O=z=>{if(h&&h(z),z.defaultPrevented)return;z.preventDefault();let q=z.nativeEvent.submitter,D=(q==null?void 0:q.getAttribute("formmethod"))||c;v(q||z.currentTarget,{fetcherKey:e,method:D,navigate:t,replace:l,state:a,relative:p,preventScrollReset:g,viewTransition:y})};return C.createElement("form",{ref:S,method:k,action:w,onSubmit:s?h:O,...b,"data-discover":!E&&n==="render"?"true":void 0})});Yw.displayName="Form";function Kw(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Vb(n){let e=C.useContext(Ji);return Fe(e,Kw(n)),e}function Jw(n,{target:e,replace:t,state:s,preventScrollReset:l,relative:a,viewTransition:c}={}){let d=fr(),h=dr(),p=Ma(n,{relative:a});return C.useCallback(g=>{if(Cw(g,e)){g.preventDefault();let y=t!==void 0?t:ga(h)===ga(p);d(n,{replace:y,state:s,preventScrollReset:l,relative:a,viewTransition:c})}},[h,d,p,t,s,e,n,l,a,c])}var Qw=0,Xw=()=>`__${String(++Qw)}__`;function Zw(){let{router:n}=Vb("useSubmit"),{basename:e}=C.useContext(jn),t=gw();return C.useCallback(async(s,l={})=>{let{action:a,method:c,encType:d,formData:h,body:p}=Tw(s,e);if(l.navigate===!1){let g=l.fetcherKey||Xw();await n.fetch(g,t,l.action||a,{preventScrollReset:l.preventScrollReset,formData:h,body:p,formMethod:l.method||c,formEncType:l.encType||d,flushSync:l.flushSync})}else await n.navigate(l.action||a,{preventScrollReset:l.preventScrollReset,formData:h,body:p,formMethod:l.method||c,formEncType:l.encType||d,replace:l.replace,state:l.state,fromRouteId:t,flushSync:l.flushSync,viewTransition:l.viewTransition})},[n,e,t])}function Ww(n,{relative:e}={}){let{basename:t}=C.useContext(jn),s=C.useContext(Cn);Fe(s,"useFormAction must be used inside a RouteContext");let[l]=s.matches.slice(-1),a={...Ma(n||".",{relative:e})},c=dr();if(n==null){a.search=c.search;let d=new URLSearchParams(a.search),h=d.getAll("index");if(h.some(g=>g==="")){d.delete("index"),h.filter(y=>y).forEach(y=>d.append("index",y));let g=d.toString();a.search=g?`?${g}`:""}}return(!n||n===".")&&l.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:lr([t,a.pathname])),ga(a)}function ek(n,e={}){let t=C.useContext(Db);Fe(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=Vb("useViewTransitionState"),l=Ma(n,{relative:e.relative});if(!t.isTransitioning)return!1;let a=cr(t.currentLocation.pathname,s)||t.currentLocation.pathname,c=cr(t.nextLocation.pathname,s)||t.nextLocation.pathname;return mc(l.pathname,c)!=null||mc(l.pathname,a)!=null}[..._w];var tk=Ab();const nk=Xh(tk),Pi={BASE_URL:"https://shopmaraph.com/api"},qb=C.createContext(void 0),Wl=Pi.BASE_URL,rk=({children:n})=>{const[e,t]=C.useState(null),[s,l]=C.useState(null),[a,c]=C.useState(!0);C.useEffect(()=>{(async()=>{try{const w=localStorage.getItem("user"),k=localStorage.getItem("token");if(w&&k){t(JSON.parse(w)),l(k);const E=await fetch(`${Wl}/user`,{method:"GET",headers:{Authorization:`Bearer ${k}`,Accept:"application/json"},credentials:"include"});if(!E.ok)t(null),l(null),localStorage.removeItem("user"),localStorage.removeItem("token"),console.log("Token validation failed during initialization");else{const O=await E.json();O.success&&O.user&&(t(O.user),localStorage.setItem("user",JSON.stringify(O.user)))}}}catch(w){console.error("Error loading user or validating token:",w),t(null),l(null),localStorage.removeItem("user"),localStorage.removeItem("token")}finally{c(!1)}})()},[]);const d=!!e&&!!s,h=(e==null?void 0:e.role)==="admin",p=async()=>!!s,g=async(v,w,k,E)=>{try{const O=await fetch(`${Wl}/register`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({name:v,email:w,password:k,password_confirmation:E})});if(!O.ok){const q=await O.json();throw new Error(q.message||"Registration failed")}const z=await O.json();return t(z.user),l(z.token),localStorage.setItem("user",JSON.stringify(z.user)),localStorage.setItem("token",z.token),{user:z.user,token:z.token}}catch(O){throw console.error("Registration error:",O),O}},y=async(v,w)=>{try{const k=await fetch(`${Wl}/login`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({email:v,password:w})});if(!k.ok){const O=await k.json();throw new Error(O.message||"Login failed")}const E=await k.json();t(E.user),l(E.token),localStorage.setItem("user",JSON.stringify(E.user)),localStorage.setItem("token",E.token)}catch(k){throw console.error("Login error:",k),k}},b=async()=>{if(s)try{await fetch(`${Wl}/logout`,{method:"POST",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json",Accept:"application/json"},credentials:"include"})}catch(v){console.error("Logout error:",v)}t(null),l(null),localStorage.removeItem("user"),localStorage.removeItem("token")},S=async()=>{if(console.log("migrateGuestCart called, token:",s?s.substring(0,10)+"...":"missing"),!s)return console.log("No token available, cannot migrate cart"),!1;try{const v="guest_cart",w=localStorage.getItem(v);if(console.log("Guest cart from localStorage:",w?"found":"not found","Key:",v),!w)return!1;const k=JSON.parse(w);if(console.log("Parsed guest cart:",k.length,"items"),!k||!k.length)return!1;for(const E of k){console.log("Adding item to cart:",E.product.id,E.size,E.quantity);const z=await(await fetch(`${Wl}/cart/add`,{method:"POST",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({product_id:E.product.id,size:E.size,quantity:E.quantity})})).json();console.log("API response:",z.success?"success":"failed",z)}return localStorage.removeItem(v),console.log("Guest cart cleared from localStorage"),!0}catch(v){return console.error("Error migrating guest cart:",v),!1}};return a?f.jsx("div",{children:"Loading..."}):f.jsx(qb.Provider,{value:{user:e,token:s,isAuthenticated:d,isAdmin:h,login:y,register:g,logout:b,validateToken:p,migrateGuestCart:S},children:n})},st=()=>{const n=C.useContext(qb);if(n===void 0)throw new Error("useAuth must be used within an AuthProvider");return n},sk=Pi.BASE_URL,Ae=async(n,e="GET",t,s,l=!1)=>{const a=`${sk}${n}`,c={};s&&(c.Authorization=`Bearer ${s}`),!l&&e!=="GET"&&(c["Content-Type"]="application/json"),c.Accept="application/json";const d={method:e,headers:c,credentials:"include"};e!=="GET"&&t&&(d.body=l?t:JSON.stringify(t));try{const h=await fetch(a,d),p=await h.json();if(!h.ok){if(p.errors){const g=Object.values(p.errors).flat().join("; ");throw new Error(g??"")}throw p.message?new Error(p.message):new Error("Something went wrong")}return p}catch(h){throw console.error(`API Request Error (${n}):`,h),h}},_i={getAllProducts:n=>{const e=n?`?${Object.entries(n).filter(([t,s])=>s!=null&&s!=="").map(([t,s])=>`${t}=${encodeURIComponent(String(s))}`).join("&")}`:"";return Ae(`/products${e}`)},getProductById:n=>Ae(`/products/${n}`),createProduct:(n,e)=>Ae("/products","POST",e,n,!0),updateProduct:(n,e,t)=>(t.append("_method","PUT"),Ae(`/products/${e}`,"POST",t,n,!0)),deleteProduct:(n,e)=>Ae(`/products/${e}`,"DELETE",null,n),restockProduct:(n,e,t)=>Ae(`/products/${e}/restock`,"POST",t,n)},ws={getCart:n=>Ae("/cart","GET",null,n),addToCart:(n,e,t,s)=>Ae("/cart/add","POST",{product_id:e,size:t,quantity:s},n),updateCartItem:(n,e,t)=>Ae("/cart/update","POST",{cart_item_id:e,quantity:t},n),removeFromCart:(n,e)=>Ae("/cart/remove","POST",{cart_item_id:e},n),clearCart:n=>Ae("/cart/clear","POST",null,n)},Ii={createOrder:(n,e)=>Ae("/orders","POST",e,n,!0),createGuestOrder:n=>Ae("/guest-orders","POST",n,null,!0),getUserOrders:n=>Ae("/orders","GET",null,n),getUserOrder:(n,e)=>Ae(`/orders/${e}`,"GET",null,n),getAllOrders:(n,e)=>{const t=e?`?status=${e}`:"";return Ae(`/admin/orders${t}`,"GET",null,n)},getOrder:(n,e)=>Ae(`/admin/orders/${e}`,"GET",null,n),updateOrderStatus:(n,e,t,s)=>Ae(`/admin/orders/${e}/status`,"POST",{status:t,admin_notes:s},n),getGuestOrders:n=>Ae(`/guest-orders/${n}`,"GET",null,null)},na={getAll:n=>Ae("/admin/hero-carousel","GET",null,n),create:(n,e)=>Ae("/admin/hero-carousel","POST",e,n,!0),update:(n,e,t)=>(t.append("_method","PUT"),Ae(`/admin/hero-carousel/${e}`,"POST",t,n,!0)),delete:(n,e)=>Ae(`/admin/hero-carousel/${e}`,"DELETE",null,n),updateInterval:(n,e)=>Ae("/admin/hero-carousel/interval","POST",{interval:e},n),getPublic:()=>Ae("/hero-carousel","GET")},ik=({message:n,type:e="info",duration:t=3e3,onClose:s,isVisible:l})=>{if(C.useEffect(()=>{if(l){const c=setTimeout(()=>{s()},t);return()=>clearTimeout(c)}},[l,t,s]),!l)return null;const a={success:"bg-green-500",error:"bg-red-500",warning:"bg-yellow-500",info:"bg-blue-500"}[e];return f.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:f.jsxs("div",{className:`${a} text-white px-4 py-3 rounded-md shadow-lg flex items-center`,children:[f.jsx("div",{className:"mr-3",children:n}),f.jsx("button",{onClick:s,className:"text-white hover:text-gray-200",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:f.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})})},Fb=C.createContext(void 0),lk=({children:n})=>{const[e,t]=C.useState({message:"",type:"info",isVisible:!1}),s=(a,c="info")=>{t({message:a,type:c,isVisible:!0})},l=()=>{t(a=>({...a,isVisible:!1}))};return f.jsxs(Fb.Provider,{value:{showToast:s},children:[n,f.jsx(ik,{message:e.message,type:e.type,isVisible:e.isVisible,onClose:l})]})},ak=()=>{const n=C.useContext(Fb);if(!n)throw new Error("useToast must be used within a ToastProvider");return n},$b=C.createContext(void 0),qf="guest_cart",ty="backup_guest_cart",ok=({children:n})=>{const{token:e,isAuthenticated:t}=st(),[s,l]=C.useState([]),[a,c]=C.useState(!1),[d,h]=C.useState(null),{showToast:p}=ak();C.useEffect(()=>{t&&e?v():g()},[t,e]);const g=()=>{try{const I=localStorage.getItem(qf);if(I){const L=JSON.parse(I);l(L)}else l([])}catch(I){console.error("Error loading guest cart from localStorage:",I),l([])}},y=I=>{try{localStorage.setItem(qf,JSON.stringify(I))}catch(L){console.error("Error saving guest cart to localStorage:",L)}},b=()=>{try{const I=[...s];return localStorage.setItem(ty,JSON.stringify(I)),console.log("Guest cart backed up:",I.length,"items"),I}catch(I){return console.error("Error backing up guest cart:",I),[]}},S=async I=>{if(!t||!e){console.log("Not authenticated, cannot restore cart");return}console.log("Restoring",I.length,"items to user cart"),c(!0);try{for(const G of I)console.log("Manually adding item to cart:",G.product.id,G.size,G.quantity),await ws.addToCart(e,G.product.id,G.size,G.quantity);const L=await ws.getCart(e);l(L.data.items||[]),console.log("Cart restored successfully")}catch(L){console.error("Error restoring cart items:",L)}finally{c(!1),localStorage.removeItem(ty)}},v=async()=>{if(!(!t||!e)){c(!0),h(null);try{const I=await ws.getCart(e);l(I.data.items||[])}catch(I){console.error("Error fetching cart:",I),h(I instanceof Error?I.message:"An error occurred while fetching the cart")}finally{c(!1)}}},w=async(I,L,G=1)=>{if(s.some(se=>se.product.id===I.id&&se.size===L)){p(`${I.name} (Size: ${L.toUpperCase()}) is already in your cart.`,"warning");return}if(G=1,t&&e){c(!0),h(null);try{const se=await ws.addToCart(e,I.id,L,G);l(se.data.items||[]),p(`${I.name} added to cart!`,"success")}catch(se){console.error("Error adding to cart:",se),h(se instanceof Error?se.message:"An error occurred while adding to cart"),p("Failed to add item to cart","error")}finally{c(!1)}}else{const se=[...s];if(se.findIndex(Z=>Z.product.id===I.id&&Z.size===L)!==-1){p(`${I.name} (Size: ${L.toUpperCase()}) is already in your cart.`,"warning");return}else se.push({product:I,size:L,quantity:G,id:`guest-${Date.now()}-${Math.random().toString(36).substring(2,11)}`});l(se),y(se),p(`${I.name} added to cart!`,"success")}},k=async I=>{if(t&&e&&typeof I=="number"){c(!0),h(null);try{const L=await ws.removeFromCart(e,I);l(L.data.items||[]),p("Item removed from cart","info")}catch(L){console.error("Error removing from cart:",L),h(L instanceof Error?L.message:"An error occurred while removing from cart"),p("Failed to remove item from cart","error")}finally{c(!1)}}else{const L=s.find(ne=>ne.id===I),G=s.filter(ne=>ne.id!==I);l(G),y(G),L&&p("Item removed from cart","info")}},E=async(I,L)=>{if(L<=0)return k(I)},O=async()=>{if(t&&e){c(!0),h(null);try{const I=await ws.clearCart(e);l(I.data.items||[]),p("Cart cleared successfully","info")}catch(I){console.error("Error clearing cart:",I),h(I instanceof Error?I.message:"An error occurred while clearing cart"),p("Failed to clear cart","error")}finally{c(!1)}}else l([]),localStorage.removeItem(qf),p("Cart cleared successfully","info")},z=()=>s.reduce((I,L)=>I+L.quantity,0),q=()=>s.reduce((I,L)=>I+L.product.price*L.quantity,0),D=(I,L)=>s.some(G=>G.product.id===I&&G.size===L);return f.jsx($b.Provider,{value:{cartItems:s,addToCart:w,removeFromCart:k,updateQuantity:E,clearCart:O,getTotalItems:z,getTotalPrice:q,isInCart:D,isLoading:a,error:d,token:e,fetchCart:v,backupGuestCart:b,restoreGuestCart:S},children:n})},Oa=()=>{const n=C.useContext($b);if(n===void 0)throw new Error("useCart must be used within a CartProvider");return n},ck=()=>{const[n,e]=C.useState(!1),[t,s]=C.useState(!1),{getTotalItems:l}=Oa(),{user:a,isAuthenticated:c,isAdmin:d,logout:h}=st(),p=C.useRef(null),[g,y]=C.useState(!1);C.useEffect(()=>{y(!!localStorage.getItem("guest_id"));const w=E=>{E.key==="guest_id"&&y(!!E.newValue)};window.addEventListener("storage",w);const k=()=>y(!0);return window.addEventListener("guest_id_set",k),()=>{window.removeEventListener("storage",w),window.removeEventListener("guest_id_set",k)}},[]),C.useEffect(()=>{n&&y(!!localStorage.getItem("guest_id"))},[n]);const b=()=>{e(!n)},S=()=>{s(!t)},v=async()=>{await h(),e(!1),s(!1)};return C.useEffect(()=>{const w=k=>{p.current&&!p.current.contains(k.target)&&s(!1)};return document.addEventListener("mousedown",w),()=>{document.removeEventListener("mousedown",w)}},[]),f.jsx(f.Fragment,{children:f.jsxs("nav",{className:"border-b border-gray-200 relative",children:[f.jsxs("div",{className:"flex",children:[f.jsx("div",{className:"bg-[#ad688f] py-2 px-6",children:f.jsx(me,{to:"/",className:"font-como font-light text-lg text-white no-underline flex items-center",children:f.jsx("img",{src:"/app-logo.jpg",alt:"SHOPMARA PH",className:"h-10 w-auto",onError:w=>{const k=w.target;k.src="https://via.placeholder.com/120x40?text=SHOPMARA+PH"}})})}),f.jsx("button",{className:`md:hidden ml-auto flex items-center justify-center px-4 py-4 h-full transition-colors ${n?"bg-black text-[#ad688f]":"bg-[#ad688f] text-black"}`,onClick:b,"aria-label":"Toggle navigation menu",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:n?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16"})})}),f.jsxs("div",{className:"hidden md:flex items-center ml-auto",children:[f.jsx(me,{to:"/products",className:"border-l border-gray-200 py-5 px-10 text-black no-underline hover:bg-gray-100",children:"All Products"}),f.jsx(me,{to:"/new",className:"border-l border-gray-200 py-5 px-10 text-black no-underline hover:bg-gray-100",children:"New Arrivals"}),f.jsx(me,{to:"/sale",className:"border-l border-gray-200 py-5 px-10 text-black no-underline hover:bg-gray-100",children:"Sale"}),f.jsx(me,{to:"/about",className:"border-l border-gray-200 py-5 px-10 text-black no-underline hover:bg-gray-100",children:"About Us"}),f.jsxs(me,{to:"/cart",className:"border-l border-gray-200 py-5 px-5 text-black no-underline hover:bg-gray-100 flex items-center justify-center relative",children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",viewBox:"0 0 20 20",fill:"currentColor",children:f.jsx("path",{d:"M3 1a1 1 0 000 2h1.22l.305 1.222a.997.997 0 00.01.042l1.358 5.43-.893.892C3.74 11.846 4.632 14 6.414 14H15a1 1 0 000-2H6.414l1-1H14a1 1 0 00.894-.553l3-6A1 1 0 0017 3H6.28l-.31-1.243A1 1 0 005 1H3zM16 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM6.5 18a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"})}),l()>0&&f.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full text-xs w-5 h-5 flex items-center justify-center",children:l()})]}),f.jsxs("div",{className:"relative",ref:p,children:[f.jsxs("button",{onClick:S,className:"border-l border-gray-200 py-5 px-5 text-black hover:bg-gray-100 flex items-center gap-2 font-como font-light",children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 text-black",viewBox:"0 0 20 20",fill:"currentColor",children:f.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-6-3a2 2 0 11-4 0 2 2 0 014 0zm-2 4a5 5 0 00-4.546 2.916A5.986 5.986 0 005 10a6 6 0 0012 0c0-.352-.035-.696-.1-1.028A5.001 5.001 0 0010 11z",clipRule:"evenodd"})}),f.jsx("span",{className:"text-sm",children:"My Account"}),f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`w-4 h-4 transition-transform ${t?"rotate-180":""}`,viewBox:"0 0 20 20",fill:"currentColor",children:f.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]}),t&&f.jsx("div",{className:"absolute right-0 z-50 mt-0 bg-white shadow-lg border border-gray-200 rounded-b w-48 font-como font-light",style:{backgroundColor:"#fff"},children:c?f.jsxs(f.Fragment,{children:[d&&f.jsxs(me,{to:"/admin",className:"flex items-center gap-2 px-4 py-3 text-black no-underline hover:bg-gray-100 border-b border-gray-200",children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 text-black",viewBox:"0 0 20 20",fill:"currentColor",children:f.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-6-3a2 2 0 11-4 0 2 2 0 014 0zm-2 4a5 5 0 00-4.546 2.916A5.986 5.986 0 005 10a6 6 0 0012 0c0-.352-.035-.696-.1-1.028A5.001 5.001 0 0010 11z",clipRule:"evenodd"})}),f.jsx("span",{className:"text-sm",children:"Admin"})]}),f.jsxs(me,{to:"/my-orders",className:"flex items-center gap-2 px-4 py-3 text-black no-underline hover:bg-gray-100 border-b border-gray-200",children:[f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 text-black",viewBox:"0 0 20 20",fill:"currentColor",children:[f.jsx("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),f.jsx("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z",clipRule:"evenodd"})]}),f.jsx("span",{className:"text-sm",children:"My Orders"})]}),f.jsxs("div",{className:"flex items-center gap-2 px-4 py-3 text-black hover:bg-gray-100 cursor-pointer",onClick:v,children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 text-black",viewBox:"0 0 20 20",fill:"currentColor",children:f.jsx("path",{fillRule:"evenodd",d:"M3 3a1 1 0 00-1 1v12a1 1 0 001 1h12a1 1 0 001-1V7.414l-4-4H3zm7 2a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1zm0 6a1 1 0 100 2 1 1 0 000-2z",clipRule:"evenodd"})}),f.jsx("span",{className:"text-sm",children:"Logout"})]})]}):f.jsxs(f.Fragment,{children:[f.jsxs(me,{to:"/login",className:"flex items-center gap-2 px-4 py-3 text-black no-underline hover:bg-gray-100 border-b border-gray-200",children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 text-black",viewBox:"0 0 20 20",fill:"currentColor",children:f.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-6-3a2 2 0 11-4 0 2 2 0 014 0zm-2 4a5 5 0 00-4.546 2.916A5.986 5.986 0 005 10a6 6 0 0012 0c0-.352-.035-.696-.1-1.028A5.001 5.001 0 0010 11z",clipRule:"evenodd"})}),f.jsx("span",{className:"text-sm",children:"Login"})]}),f.jsxs(me,{to:"/register",className:"flex items-center gap-2 px-4 py-3 text-black no-underline hover:bg-gray-100",children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 text-black",viewBox:"0 0 20 20",fill:"currentColor",children:f.jsx("path",{d:"M8 9a3 3 0 100-6 3 3 0 000 6zM8 11a6 6 0 016 6H2a6 6 0 016-6zM16 7a1 1 0 10-2 0v1h-1a1 1 0 100 2h1v1a1 1 0 102 0v-1h1a1 1 0 100-2h-1V7z"})}),f.jsx("span",{className:"text-sm",children:"Sign Up"})]}),!c&&g&&f.jsxs(me,{to:"/my-orders",className:"flex items-center gap-2 px-4 py-3 text-black no-underline hover:bg-gray-100 border-b border-gray-200",children:[f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 text-black",viewBox:"0 0 20 20",fill:"currentColor",children:[f.jsx("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),f.jsx("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z",clipRule:"evenodd"})]}),f.jsx("span",{className:"text-sm",children:"My Orders"})]})]})})]})]})]}),f.jsx("div",{className:`md:hidden w-full bg-white border-t border-gray-200 overflow-hidden transition-all duration-300 ease-in-out ${n?"max-h-screen opacity-100":"max-h-0 opacity-0"}`,children:f.jsxs("div",{className:"py-2 font-como font-light",children:[f.jsx(me,{to:"/products",className:"block py-3 px-4 border-b border-gray-200 text-black no-underline hover:bg-gray-100",children:"All Products"}),f.jsx(me,{to:"/new",className:"block py-3 px-4 border-b border-gray-200 text-black no-underline hover:bg-gray-100",children:"New"}),f.jsx(me,{to:"/sale",className:"block py-3 px-4 border-b border-gray-200 text-black no-underline hover:bg-gray-100",children:"Sale"}),f.jsx(me,{to:"/about",className:"block py-3 px-4 border-b border-gray-200 text-black no-underline hover:bg-gray-100",children:"About Us"}),f.jsxs(me,{to:"/cart",className:"flex items-center gap-2 py-3 px-4 border-b border-gray-200 text-black no-underline hover:bg-gray-100",children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",viewBox:"0 0 20 20",fill:"currentColor",children:f.jsx("path",{d:"M3 1a1 1 0 000 2h1.22l.305 1.222a.997.997 0 00.01.042l1.358 5.43-.893.892C3.74 11.846 4.632 14 6.414 14H15a1 1 0 000-2H6.414l1-1H14a1 1 0 00.894-.553l3-6A1 1 0 0017 3H6.28l-.31-1.243A1 1 0 005 1H3zM16 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM6.5 18a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"})}),f.jsx("span",{children:"Cart"}),l()>0&&f.jsx("span",{className:"bg-red-500 text-white rounded-full text-xs px-2 py-1",children:l()})]}),f.jsxs("div",{className:"border-b border-gray-200 py-2 px-4",children:[f.jsx("div",{className:"font-medium text-sm mb-2",children:"My Account"}),c?f.jsxs("div",{className:"ml-2 space-y-2",children:[d&&f.jsxs(me,{to:"/admin",className:"flex items-center gap-2 py-2 text-black no-underline hover:text-gray-600",children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 text-black",viewBox:"0 0 20 20",fill:"currentColor",children:f.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-6-3a2 2 0 11-4 0 2 2 0 014 0zm-2 4a5 5 0 00-4.546 2.916A5.986 5.986 0 005 10a6 6 0 0012 0c0-.352-.035-.696-.1-1.028A5.001 5.001 0 0010 11z",clipRule:"evenodd"})}),f.jsx("span",{className:"text-sm",children:"Admin"})]}),f.jsxs(me,{to:"/my-orders",className:"flex items-center gap-2 py-2 text-black no-underline hover:text-gray-600",children:[f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 text-black",viewBox:"0 0 20 20",fill:"currentColor",children:[f.jsx("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),f.jsx("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z",clipRule:"evenodd"})]}),f.jsx("span",{className:"text-sm",children:"My Orders"})]}),f.jsxs("div",{className:"flex items-center gap-2 py-2 text-black hover:text-gray-600 cursor-pointer",onClick:v,children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 text-black",viewBox:"0 0 20 20",fill:"currentColor",children:f.jsx("path",{fillRule:"evenodd",d:"M3 3a1 1 0 00-1 1v12a1 1 0 001 1h12a1 1 0 001-1V7.414l-4-4H3zm7 2a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1zm0 6a1 1 0 100 2 1 1 0 000-2z",clipRule:"evenodd"})}),f.jsxs("span",{className:"text-sm",children:["Logout ",a&&`(${a.name})`]})]})]}):f.jsxs("div",{className:"ml-2 space-y-2",children:[f.jsxs(me,{to:"/login",className:"flex items-center gap-2 py-2 text-black no-underline hover:text-gray-600",children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 text-black",viewBox:"0 0 20 20",fill:"currentColor",children:f.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-6-3a2 2 0 11-4 0 2 2 0 014 0zm-2 4a5 5 0 00-4.546 2.916A5.986 5.986 0 005 10a6 6 0 0012 0c0-.352-.035-.696-.1-1.028A5.001 5.001 0 0010 11z",clipRule:"evenodd"})}),f.jsx("span",{className:"text-sm",children:"Login"})]}),f.jsxs(me,{to:"/register",className:"flex items-center gap-2 py-2 text-black no-underline hover:text-gray-600",children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 text-black",viewBox:"0 0 20 20",fill:"currentColor",children:f.jsx("path",{d:"M8 9a3 3 0 100-6 3 3 0 000 6zM8 11a6 6 0 016 6H2a6 6 0 016-6zM16 7a1 1 0 10-2 0v1h-1a1 1 0 100 2h1v1a1 1 0 102 0v-1h1a1 1 0 100-2h-1V7z"})}),f.jsx("span",{className:"text-sm",children:"Sign Up"})]}),!c&&g&&f.jsxs(me,{to:"/my-orders",className:"flex items-center gap-2 py-2 text-black no-underline hover:text-gray-600",children:[f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 text-black",viewBox:"0 0 20 20",fill:"currentColor",children:[f.jsx("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),f.jsx("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z",clipRule:"evenodd"})]}),f.jsx("span",{className:"text-sm",children:"My Orders"})]})]})]})]})})]})})},uk=()=>{const n=new Date().getFullYear();return f.jsx("footer",{className:"bg-gray-100 pt-12 pb-8 font-como font-light",children:f.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mb-12",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"font-como font-light text-lg mb-4",children:"SHOPMARA PH"}),f.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"ShopMaraPH curates stylish, sustainable vintage pieces that empower modern women to wear confidence and elegance—from office to everyday. With ShopMaraPH, wear your story."}),f.jsxs("div",{className:"flex items-center mb-4 text-gray-600",children:[f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),f.jsx("span",{className:"text-sm",children:"Located in Pasig City, PH"})]}),f.jsxs("div",{className:"flex space-x-4",children:[f.jsx("a",{href:"#",className:"text-gray-500 hover:text-black",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{d:"M22.675 0h-21.35c-.732 0-1.325.593-1.325 1.325v21.351c0 .731.593 1.324 1.325 1.324h11.495v-9.294h-3.128v-3.622h3.128v-2.671c0-3.1 1.893-4.788 4.659-4.788 1.325 0 2.463.099 2.795.143v3.24l-1.918.001c-1.504 0-1.795.715-1.795 1.763v2.313h3.587l-.467 3.622h-3.12v9.293h6.116c.73 0 1.323-.593 1.323-1.325v-21.35c0-.732-.593-1.325-1.325-1.325z"})})}),f.jsx("a",{href:"#",className:"text-gray-500 hover:text-black",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"})})}),f.jsx("a",{href:"#",className:"text-gray-500 hover:text-black",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{d:"M19.59 6.69a4.83 4.83 0 0 1-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 0 1-5.2 1.74 2.89 2.89 0 0 1 2.31-4.64 2.93 2.93 0 0 1 .88.13V9.4a6.84 6.84 0 0 0-1-.05A6.33 6.33 0 0 0 5 20.1a6.34 6.34 0 0 0 10.86-4.43v-7a8.16 8.16 0 0 0 4.77 1.52v-3.4a4.85 4.85 0 0 1-1-.1z"})})})]})]}),f.jsxs("div",{children:[f.jsx("h3",{className:"font-como font-light text-lg mb-4",children:"Shop"}),f.jsxs("ul",{className:"space-y-2",children:[f.jsx("li",{children:f.jsx(me,{to:"/products",className:"text-gray-600 hover:text-black text-sm",children:"All Products"})}),f.jsx("li",{children:f.jsx(me,{to:"/new",className:"text-gray-600 hover:text-black text-sm",children:"New Arrivals"})}),f.jsx("li",{children:f.jsx(me,{to:"/sale",className:"text-gray-600 hover:text-black text-sm",children:"Sale"})})]})]}),f.jsxs("div",{children:[f.jsx("h3",{className:"font-como font-light text-lg mb-4",children:"Company"}),f.jsxs("ul",{className:"space-y-2",children:[f.jsx("li",{children:f.jsx(me,{to:"/about",className:"text-gray-600 hover:text-black text-sm",children:"About Us"})}),f.jsx("li",{children:f.jsx(me,{to:"/contact",className:"text-gray-600 hover:text-black text-sm",children:"Contact"})}),f.jsx("li",{children:f.jsx(me,{to:"/terms",className:"text-gray-600 hover:text-black text-sm",children:"Terms & Conditions"})}),f.jsx("li",{children:f.jsx(me,{to:"/privacy",className:"text-gray-600 hover:text-black text-sm",children:"Privacy Policy"})})]})]})]}),f.jsxs("div",{className:"border-t border-gray-200 pt-8",children:[f.jsxs("p",{className:"text-sm text-gray-500 text-center",children:["© ",n," SHOPMARA PH. All rights reserved."]}),f.jsx("p",{className:"text-xs text-gray-400 text-center mt-2",children:"All product names, logos, and brands are property of their respective owners. ShopMaraPH is not affiliated with or endorsed by any brand featured."})]})]})})},Ai=n=>({id:n.id,text:n.text,isActive:n.is_active,displayOrder:n.display_order,buttonText:n.button_text,buttonLink:n.button_link,backgroundColor:n.background_color,textColor:n.text_color,createdAt:n.created_at,updatedAt:n.updated_at}),Ms={getActiveAnnouncements:async()=>{try{return(await Ae("/announcements")).data.map(Ai)}catch(n){return console.error("Error fetching announcements:",n),[]}},getAllAnnouncements:async n=>(await Ae("/admin/announcements","GET",null,n)).data.map(Ai),getAnnouncementById:async(n,e)=>{const t=await Ae(`/admin/announcements/${e}`,"GET",null,n);return Ai(t.data)},createAnnouncement:async(n,e)=>{const t={text:e.text,is_active:e.isActive,display_order:e.displayOrder,button_text:e.buttonText,button_link:e.buttonLink,background_color:e.backgroundColor,text_color:e.textColor},s=await Ae("/admin/announcements","POST",t,n);return Ai(s.data)},updateAnnouncement:async(n,e,t)=>{const s={};t.text!==void 0&&(s.text=t.text),t.isActive!==void 0&&(s.is_active=t.isActive),t.displayOrder!==void 0&&(s.display_order=t.displayOrder),t.buttonText!==void 0&&(s.button_text=t.buttonText),t.buttonLink!==void 0&&(s.button_link=t.buttonLink),t.backgroundColor!==void 0&&(s.background_color=t.backgroundColor),t.textColor!==void 0&&(s.text_color=t.textColor);const l=await Ae(`/admin/announcements/${e}`,"PUT",s,n);return Ai(l.data)},deleteAnnouncement:async(n,e)=>(await Ae(`/admin/announcements/${e}`,"DELETE",null,n),!0),toggleAnnouncementStatus:async(n,e,t)=>{const s=await Ae(`/admin/announcements/${e}/toggle`,"POST",{is_active:t},n);return Ai(s.data)}},dk=()=>{const[n,e]=C.useState([]),[t,s]=C.useState(0),[l,a]=C.useState(!0);C.useEffect(()=>{(async()=>{try{a(!0);const g=[...await Ms.getActiveAnnouncements()].sort((y,b)=>y.displayOrder-b.displayOrder);e(g)}catch(p){console.error("Failed to fetch announcements:",p)}finally{a(!1)}})()},[]),C.useEffect(()=>{if(n.length<=1)return;const h=setInterval(()=>{s(p=>(p+1)%n.length)},5e3);return()=>clearInterval(h)},[n.length]);const c=C.useCallback(h=>{s(h)},[]);if(l||n.length===0)return null;const d=n[t];return f.jsx("div",{className:"w-full",children:f.jsxs("div",{className:"w-full py-3 px-4 flex items-center justify-center transition-all duration-300",style:{backgroundColor:d.backgroundColor,color:d.textColor},children:[f.jsxs("div",{className:"flex items-center justify-center flex-1",children:[f.jsx("p",{className:"text-center font-como font-light",children:d.text}),d.buttonText&&d.buttonLink&&f.jsx(me,{to:d.buttonLink,className:"ml-4 px-3 py-1 border border-current hover:bg-opacity-20 hover:bg-white transition-colors",children:d.buttonText})]}),n.length>1&&f.jsx("div",{className:"flex gap-2 ml-4",children:n.map((h,p)=>f.jsx("button",{onClick:()=>c(p),className:`w-2 h-2 rounded-full ${p===t?"bg-current opacity-100":"bg-current opacity-50"}`,"aria-label":`Go to announcement ${p+1}`},p))})]})})},ny=["https://images.unsplash.com/photo-1512436991641-6745cdb1723f?auto=format&fit=crop&w=1200&q=80","https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=1200&q=80","https://images.unsplash.com/photo-1465101046530-73398c7f28ca?auto=format&fit=crop&w=1200&q=80"],fk=()=>{var c,d,h;const[n,e]=C.useState([]),[t,s]=C.useState(4e3),[l,a]=C.useState(0);return C.useEffect(()=>{na.getPublic().then(p=>{p.data.carousels&&p.data.carousels.length>0?(e(p.data.carousels),s(p.data.interval||4e3)):(e(ny.map(g=>({image_url:g}))),s(4e3))}).catch(()=>{e(ny.map(p=>({image_url:p}))),s(4e3)})},[]),C.useEffect(()=>{if(n.length===0)return;const p=setInterval(()=>{a(g=>(g+1)%n.length)},t);return()=>clearInterval(p)},[n,t]),f.jsxs("div",{className:"relative w-full h-[450px] md:h-[600px] flex items-center justify-center overflow-hidden border-b border-gray-200 bg-black",children:[n.map((p,g)=>f.jsx("img",{src:p.image_url,alt:"carousel background",className:`absolute top-0 left-0 w-full h-full object-cover transition-opacity duration-700 ${g===l?"opacity-100 z-0":"opacity-0 z-0"}`,style:{transitionProperty:"opacity"}},p.image_url+g)),f.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-40 z-10"}),f.jsxs("div",{className:"relative z-20 w-full flex flex-col items-center justify-center h-full",children:[(c=n[l])!=null&&c.title?f.jsx("h1",{className:"text-5xl md:text-7xl font-como font-light mb-4 text-center text-white drop-shadow-lg",children:n[l].title}):f.jsx("h1",{className:"text-5xl md:text-7xl font-como font-light mb-4 text-center text-white drop-shadow-lg",children:"SHOPMARA PH"}),(d=n[l])!=null&&d.subtitle?f.jsx("div",{className:"bg-[#ad688f] px-6 py-2 mb-8 bg-opacity-90 rounded",children:f.jsx("p",{className:"text-lg font-como font-light text-white",children:n[l].subtitle})}):f.jsx("div",{className:"bg-[#ad688f] px-6 py-2 mb-8 bg-opacity-90 rounded",children:f.jsx("p",{className:"text-lg font-como font-light text-white",children:"Timeless Finds, Consciously Curated"})}),f.jsxs("div",{className:"max-w-2xl text-center px-4",children:[(h=n[l])!=null&&h.link?f.jsx("a",{href:n[l].link,className:"text-white underline mb-4 block",target:"_blank",rel:"noopener noreferrer",children:n[l].link}):null,f.jsx("p",{className:"text-gray-100 mb-8 font-como font-light drop-shadow",children:"ShopMaraPH is a passion project rooted in timeless style and conscious living. We offer carefully handpicked vintage polos—elegant, versatile pieces made for modern women who lead, whether in the office or off-duty. Beautifully curated, sustainably sourced."}),f.jsx(dk,{})]})]})]})},Gb=Pi.BASE_URL,iu=async()=>{try{const n=await fetch(`${Gb}/products`);if(!n.ok)throw new Error(`Failed to fetch products: ${n.status}`);return(await n.json()).data||[]}catch(n){throw console.error("Error fetching products:",n),n}},hk=async n=>{try{const e=await fetch(`${Gb}/products/${n}`);if(!e.ok)throw new Error(`Failed to fetch product: ${e.status}`);return(await e.json()).data}catch(e){throw console.error(`Error fetching product ${n}:`,e),e}},pk=async()=>{try{return(await iu()).filter(e=>e.isNewArrival||e.category==="new_arrival")}catch(n){throw console.error("Error fetching new arrival products:",n),n}},mk=()=>{const[n,e]=C.useState([]),[t,s]=C.useState(!0),[l,a]=C.useState(null);return C.useEffect(()=>{(async()=>{try{s(!0);const d=await pk();e(d.slice(0,8))}catch(d){console.error("Error fetching new arrivals:",d),a("Failed to load new arrivals")}finally{s(!1)}})()},[]),t?f.jsx("div",{className:"py-16 bg-white",children:f.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[f.jsx("h2",{className:"text-3xl font-bold mb-8",children:"New Drops"}),f.jsx("div",{className:"text-center py-8",children:f.jsx("p",{children:"Loading new arrivals..."})})]})}):l?f.jsx("div",{className:"py-16 bg-white",children:f.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[f.jsx("h2",{className:"text-3xl font-bold mb-8",children:"New Drops"}),f.jsx("div",{className:"text-center py-8",children:f.jsx("p",{className:"text-red-500",children:l})})]})}):n.length===0?f.jsx("div",{className:"py-16 bg-white",children:f.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[f.jsx("h2",{className:"text-3xl font-bold mb-8",children:"New Drops"}),f.jsx("div",{className:"text-center py-8",children:f.jsx("p",{children:"No new arrivals found at the moment. Check back soon!"})})]})}):f.jsx("div",{className:"py-16 bg-white",children:f.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[f.jsx("h2",{className:"text-3xl font-bold mb-8",children:"New Drops"}),f.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:n.map(c=>f.jsx("div",{className:"group relative",children:f.jsxs(me,{to:`/product/${c.id}`,className:"block no-underline text-inherit",children:[f.jsx("div",{className:"aspect-h-1 aspect-w-1 w-full overflow-hidden bg-gray-200 group-hover:opacity-90",children:f.jsx("img",{src:c.image,alt:c.name,className:"h-full w-full object-cover object-center"})}),f.jsxs("div",{className:"mt-4",children:[f.jsx("h3",{className:"text-sm text-gray-700",children:c.name}),f.jsxs("p",{className:"mt-1 text-sm font-medium text-gray-900",children:["₱",c.price.toFixed(2)]})]})]})},c.id))}),f.jsx("div",{className:"text-center mt-12",children:f.jsx(me,{to:"/products",className:"inline-block border border-black px-8 py-3 hover:bg-black hover:text-white transition-colors no-underline text-black",children:"View All Products"})})]})})},gk=()=>f.jsxs(f.Fragment,{children:[f.jsx(fk,{}),f.jsx(mk,{}),f.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8"})]}),lp=({activeCategory:n,activeSize:e,searchKeyword:t,onCategoryChange:s,onSizeChange:l,onKeywordChange:a})=>f.jsxs("div",{className:"bg-white p-4 rounded shadow",children:[f.jsx("h2",{className:"font-bold text-lg mb-4",children:"Filters"}),f.jsxs("div",{className:"mb-6",children:[f.jsx("h3",{className:"font-medium text-sm mb-2",children:"Search"}),f.jsxs("div",{className:"relative",children:[f.jsx("input",{type:"text",value:t,onChange:c=>a(c.target.value),placeholder:"Search products...",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-black focus:border-black text-sm"}),t&&f.jsx("button",{onClick:()=>a(""),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:f.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})})]})]}),f.jsxs("div",{className:"mb-6",children:[f.jsx("h3",{className:"font-medium text-sm mb-2",children:"Category"}),f.jsxs("div",{className:"space-y-2",children:[f.jsxs("div",{className:"flex items-center",children:[f.jsx("input",{type:"radio",id:"all-products",name:"category",checked:n==="all",onChange:()=>s("all"),className:"mr-2"}),f.jsx("label",{htmlFor:"all-products",children:"All Products"})]}),f.jsxs("div",{className:"flex items-center",children:[f.jsx("input",{type:"radio",id:"new-arrival",name:"category",checked:n==="new_arrival",onChange:()=>s("new_arrival"),className:"mr-2"}),f.jsx("label",{htmlFor:"new-arrival",children:"New Arrivals"})]}),f.jsxs("div",{className:"flex items-center",children:[f.jsx("input",{type:"radio",id:"sale",name:"category",checked:n==="sale",onChange:()=>s("sale"),className:"mr-2"}),f.jsx("label",{htmlFor:"sale",children:"Sale"})]})]})]}),f.jsxs("div",{className:"mb-6",children:[f.jsx("h3",{className:"font-medium text-sm mb-2",children:"Size"}),f.jsxs("div",{className:"space-y-2",children:[f.jsxs("div",{className:"flex items-center",children:[f.jsx("input",{type:"radio",id:"all-sizes",name:"size",checked:e==="all",onChange:()=>l("all"),className:"mr-2"}),f.jsx("label",{htmlFor:"all-sizes",children:"All Sizes"})]}),f.jsxs("div",{className:"flex items-center",children:[f.jsx("input",{type:"radio",id:"small",name:"size",checked:e==="small",onChange:()=>l("small"),className:"mr-2"}),f.jsx("label",{htmlFor:"small",children:"Small"})]}),f.jsxs("div",{className:"flex items-center",children:[f.jsx("input",{type:"radio",id:"medium",name:"size",checked:e==="medium",onChange:()=>l("medium"),className:"mr-2"}),f.jsx("label",{htmlFor:"medium",children:"Medium"})]}),f.jsxs("div",{className:"flex items-center",children:[f.jsx("input",{type:"radio",id:"large",name:"size",checked:e==="large",onChange:()=>l("large"),className:"mr-2"}),f.jsx("label",{htmlFor:"large",children:"Large"})]}),f.jsxs("div",{className:"flex items-center",children:[f.jsx("input",{type:"radio",id:"xlarge",name:"size",checked:e==="xlarge",onChange:()=>l("xlarge"),className:"mr-2"}),f.jsx("label",{htmlFor:"xlarge",children:"Extra Large"})]}),f.jsxs("div",{className:"flex items-center",children:[f.jsx("input",{type:"radio",id:"xxlarge",name:"size",checked:e==="xxlarge",onChange:()=>l("xxlarge"),className:"mr-2"}),f.jsx("label",{htmlFor:"xxlarge",children:"2XL"})]}),f.jsxs("div",{className:"flex items-center",children:[f.jsx("input",{type:"radio",id:"xxxlarge",name:"size",checked:e==="xxxlarge",onChange:()=>l("xxxlarge"),className:"mr-2"}),f.jsx("label",{htmlFor:"xxxlarge",children:"3XL"})]})]})]})]}),xk=({product:n})=>{var a;const{addToCart:e}=Oa(),t=n.sizes[0],s=((a=n.sizeStock[0])==null?void 0:a.stock)<=0,l=async c=>{if(c.preventDefault(),c.stopPropagation(),!s)try{await e(n,t,1)}catch(d){console.error("Error adding to cart:",d)}};return f.jsxs("div",{className:"product-card",children:[f.jsxs("div",{className:"absolute top-0 right-0 z-10 flex flex-col gap-1 m-2",children:[n.isNewArrival&&f.jsx("div",{className:"bg-green-500 text-white text-xs font-bold px-2 py-1 rounded",children:"New Arrival"}),n.isSale&&f.jsx("div",{className:"bg-red-500 text-white text-xs font-bold px-2 py-1 rounded",children:"Sale"})]}),f.jsx(me,{to:`/product/${n.id}`,className:"no-underline text-inherit block",children:f.jsxs("div",{className:"product-card__image-container",children:[f.jsx("img",{src:n.image,alt:n.name,className:"product-card__image"}),s&&f.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-60 flex items-center justify-center",children:f.jsx("span",{className:"text-black text-2xl font-bold font-como",children:"SOLD"})})]})}),f.jsxs("div",{className:"product-card__content",children:[f.jsxs("div",{className:"flex items-start gap-2 justify-between",children:[f.jsx(me,{to:`/product/${n.id}`,className:"no-underline text-inherit flex-1 mr-2",children:f.jsx("h3",{className:"product-card__title line-clamp-2",children:n.name})}),f.jsxs("span",{className:"bg-gray-100 text-gray-800 text-xs font-medium px-2 py-1 rounded",children:["Size: ",t.toUpperCase()]})]}),f.jsxs("div",{className:"product-card__price",children:["₱",n.price.toFixed(2)]}),f.jsx("div",{className:"product-card__actions",children:f.jsx("button",{type:"button",onClick:l,disabled:s,className:`add-to-cart-button w-full ${s?"add-to-cart-button--disabled":""}`,children:s?"Sold":"Add to Cart"})})]})]})},ap=({products:n,onResetFilters:e,searchKeyword:t=""})=>f.jsxs("div",{className:"md:col-span-3",children:[t&&f.jsx("div",{className:"mb-6",children:f.jsx("h2",{className:"text-lg font-medium mb-2",children:n.length>0?`Search results for "${t}" (${n.length} ${n.length===1?"product":"products"})`:`No products found for "${t}"`})}),n.length>0?f.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-3 gap-4 md:gap-6 equal-height-grid",children:n.map(s=>f.jsx("div",{className:"h-full",children:f.jsx(xk,{product:s})},s.id))}):f.jsxs("div",{className:"bg-white p-8 rounded shadow text-center",children:[f.jsx("p",{className:"text-gray-600",children:t?`No products found matching "${t}". Try a different search term or reset filters.`:"No products found with the selected filters."}),f.jsx("button",{onClick:e,className:"mt-4 px-4 py-2 bg-black text-white rounded",children:"Reset Filters"})]})]}),op=(n,e,t,s="",l=!1,a=!1)=>n.filter(c=>{const d=c.isNewArrival||c.category==="new_arrival",h=c.isSale||c.category==="sale",p=e==="all"&&(!l||d)&&(!a||h)||e==="new_arrival"&&d||e==="sale"&&h||e===c.category,g=t==="all"||c.sizes.includes(t),y=s===""||c.name.toLowerCase().includes(s.toLowerCase());return p&&g&&y}),yk=()=>{const[n,e]=C.useState("new_arrival"),[t,s]=C.useState("all"),[l,a]=C.useState(!0),[c,d]=C.useState(""),[h,p]=C.useState([]),[g,y]=C.useState([]),[b,S]=C.useState(!0),[v,w]=C.useState(null);C.useEffect(()=>{(async()=>{try{S(!0);const O=await iu();p(O)}catch(O){console.error("Error fetching products:",O),w("Failed to load products")}finally{S(!1)}})()},[]),C.useEffect(()=>{h.length>0&&y(op(h,n,t,c,l))},[h,n,t,l,c]);const k=()=>{e("new_arrival"),s("all"),a(!0),d("")};return b?f.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[f.jsx("h1",{className:"text-3xl font-bold mb-8",children:"New Arrivals"}),f.jsx("div",{className:"text-center py-12",children:f.jsx("p",{children:"Loading products..."})})]}):v?f.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[f.jsx("h1",{className:"text-3xl font-bold mb-8",children:"New Arrivals"}),f.jsx("div",{className:"text-center py-12",children:f.jsx("p",{className:"text-red-500",children:v})})]}):f.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[f.jsx("h1",{className:"text-3xl font-bold mb-8",children:"New Arrivals"}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8 mb-8",children:[f.jsx("div",{className:"md:col-span-1",children:f.jsx(lp,{activeCategory:n,activeSize:t,searchKeyword:c,onCategoryChange:e,onSizeChange:s,onKeywordChange:d})}),f.jsx(ap,{products:g,onResetFilters:k,searchKeyword:c})]})]})},bk=()=>{const[n,e]=C.useState([]),[t,s]=C.useState([]),[l,a]=C.useState(!0),[c,d]=C.useState("sale"),[h,p]=C.useState("all"),[g,y]=C.useState("");C.useEffect(()=>{(async()=>{a(!0);try{const E=await iu();e(E)}catch(E){console.error("Error fetching products:",E)}finally{a(!1)}})()},[]),C.useEffect(()=>{const k=op(n,c,h,g,!1,!0);s(k)},[n,c,h,g]);const b=k=>{d(k)},S=k=>{p(k)},v=k=>{y(k)},w=()=>{d("sale"),p("all"),y("")};return l?f.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[f.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Sale"}),f.jsx("div",{className:"animate-pulse",children:f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[f.jsx("div",{className:"h-64 bg-gray-200 rounded"}),f.jsx("div",{className:"h-64 bg-gray-200 rounded"}),f.jsx("div",{className:"h-64 bg-gray-200 rounded"}),f.jsx("div",{className:"h-64 bg-gray-200 rounded"})]})})]}):f.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[f.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Sale"}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[f.jsx("div",{className:"md:col-span-1",children:f.jsx(lp,{activeCategory:c,activeSize:h,searchKeyword:g,onCategoryChange:b,onSizeChange:S,onKeywordChange:v})}),f.jsx("div",{className:"md:col-span-3",children:f.jsx(ap,{products:t,onResetFilters:w,searchKeyword:g})})]})]})},vk=()=>{const[n,e]=C.useState(""),[t,s]=C.useState(""),[l,a]=C.useState(""),[c,d]=C.useState(!1),[h,p]=C.useState("/"),{login:g}=st(),y=fr(),b=dr();C.useEffect(()=>{const w=new URLSearchParams(b.search).get("returnUrl");w&&p(w)},[b.search]);const S=async v=>{v.preventDefault(),a(""),d(!0);try{await g(n,t),y(h)}catch(w){a("Invalid email or password"),console.error(w)}finally{d(!1)}};return f.jsxs("div",{className:"max-w-md mx-auto px-4 py-16",children:[f.jsx("h1",{className:"text-3xl font-bold mb-6 text-center",children:"Login"}),l&&f.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",role:"alert",children:f.jsx("p",{children:l})}),h!=="/"&&f.jsx("div",{className:"bg-blue-100 border border-blue-400 text-blue-700 px-4 py-3 rounded mb-4",role:"alert",children:f.jsx("p",{children:"You need to log in to access that page"})}),f.jsxs("form",{className:"bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4",onSubmit:S,children:[f.jsxs("div",{className:"mb-4",children:[f.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"email",children:"Email"}),f.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"email",type:"email",placeholder:"Email",value:n,onChange:v=>e(v.target.value),required:!0})]}),f.jsxs("div",{className:"mb-6",children:[f.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"password",children:"Password"}),f.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline",id:"password",type:"password",placeholder:"******************",value:t,onChange:v=>s(v.target.value),required:!0})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("button",{className:`bg-black ${c?"opacity-50 cursor-not-allowed":"hover:bg-gray-800"} text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline`,type:"submit",disabled:c,children:c?"Signing In...":"Sign In"}),f.jsx(me,{className:"inline-block align-baseline font-bold text-sm text-black hover:text-gray-800",to:"/forgot-password",children:"Forgot Password?"})]})]}),f.jsxs("p",{className:"text-center text-gray-500 text-sm",children:["Don't have an account? ",f.jsx(me,{to:"/register",className:"text-black font-bold",children:"Sign up"})]}),f.jsxs("div",{className:"mt-4 text-center text-gray-500 text-sm",children:[f.jsx("p",{children:"For admin access, use:"}),f.jsxs("p",{children:[f.jsx("strong",{children:"Email:"})," admin@example.com"]}),f.jsxs("p",{children:[f.jsx("strong",{children:"Password:"})," password123"]})]})]})},Sk=()=>{const[n,e]=C.useState(""),[t,s]=C.useState(""),[l,a]=C.useState(""),[c,d]=C.useState(""),[h,p]=C.useState(""),[g,y]=C.useState(!1),{register:b}=st(),S=fr(),v=async w=>{if(w.preventDefault(),p(""),y(!0),l!==c){p("Passwords do not match"),y(!1);return}try{await b(n,t,l,c),S("/")}catch(k){p("Registration failed. Please check your information and try again."),console.error(k)}finally{y(!1)}};return f.jsxs("div",{className:"max-w-md mx-auto px-4 py-16",children:[f.jsx("h1",{className:"text-3xl font-bold mb-6 text-center",children:"Register"}),h&&f.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",role:"alert",children:f.jsx("p",{children:h})}),f.jsxs("form",{className:"bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4",onSubmit:v,children:[f.jsxs("div",{className:"mb-4",children:[f.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"name",children:"Name"}),f.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"name",type:"text",placeholder:"Full Name",value:n,onChange:w=>e(w.target.value),required:!0})]}),f.jsxs("div",{className:"mb-4",children:[f.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"email",children:"Email"}),f.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"email",type:"email",placeholder:"Email",value:t,onChange:w=>s(w.target.value),required:!0})]}),f.jsxs("div",{className:"mb-4",children:[f.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"password",children:"Password"}),f.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"password",type:"password",placeholder:"******************",value:l,onChange:w=>a(w.target.value),required:!0,minLength:8})]}),f.jsxs("div",{className:"mb-6",children:[f.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"password-confirmation",children:"Confirm Password"}),f.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"password-confirmation",type:"password",placeholder:"******************",value:c,onChange:w=>d(w.target.value),required:!0,minLength:8})]}),f.jsx("div",{className:"flex items-center justify-between",children:f.jsx("button",{className:`bg-black ${g?"opacity-50 cursor-not-allowed":"hover:bg-gray-800"} text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline w-full`,type:"submit",disabled:g,children:g?"Creating Account...":"Create Account"})})]}),f.jsxs("p",{className:"text-center text-gray-500 text-sm",children:["Already have an account? ",f.jsx(me,{to:"/login",className:"text-black font-bold",children:"Sign in"})]})]})},Yb=C.createContext(void 0),Nk=({children:n})=>{const{token:e,isAuthenticated:t}=st(),[s,l]=C.useState(null),[a,c]=C.useState(!1),[d,h]=C.useState(null);C.useEffect(()=>{t&&e?p():l(null)},[t,e]);const p=async()=>{if(!(!t||!e)){c(!0),h(null);try{const y=await fetch(`${Pi.BASE_URL}/profile`,{method:"GET",headers:{Authorization:`Bearer ${e}`,Accept:"application/json"},credentials:"include"});if(!y.ok)throw new Error("Failed to fetch profile");const b=await y.json();l(b.data.profile)}catch(y){console.error("Error fetching profile:",y),h(y instanceof Error?y.message:"An error occurred while fetching the profile")}finally{c(!1)}}},g=async y=>{if(!(!t||!e)){c(!0),h(null);try{const b=await fetch(`${Pi.BASE_URL}/profile`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`,Accept:"application/json"},credentials:"include",body:JSON.stringify(y)});if(!b.ok){const v=await b.json();throw new Error(v.message||"Failed to update profile")}const S=await b.json();l(S.data.profile)}catch(b){throw console.error("Error updating profile:",b),h(b instanceof Error?b.message:"An error occurred while updating the profile"),b}finally{c(!1)}}};return f.jsx(Yb.Provider,{value:{profile:s,isLoading:a,error:d,fetchProfile:p,updateProfile:g},children:n})},Kb=()=>{const n=C.useContext(Yb);if(n===void 0)throw new Error("useProfile must be used within a ProfileProvider");return n},Sh={getPublicSettings:async()=>{try{return(await Ae("/settings")).data}catch(n){return console.error("Error fetching public settings:",n),{delivery_fee_ncr:80,delivery_fee_outside_ncr:120,free_delivery_threshold:0,payment_options_description:"",what_happens_after_payment:""}}},getAllSettings:async n=>(await Ae("/admin/settings","GET",null,n)).data,updateSetting:async(n,e,t)=>(await Ae(`/admin/settings/${e}`,"PUT",{value:t},n)).data,updateMultipleSettings:async(n,e)=>(await Ae("/admin/settings","POST",{settings:e},n)).data},Oi={deliveryFeeNcr:80,deliveryFeeOutsideNcr:120,freeDeliveryThreshold:0,paymentOptionsDescription:"",whatHappensAfterPayment:"",isLoading:!0,refreshSettings:async()=>{}},Jb=C.createContext(Oi),cp=()=>C.useContext(Jb),wk=({children:n})=>{const[e,t]=C.useState(Oi.deliveryFeeNcr),[s,l]=C.useState(Oi.deliveryFeeOutsideNcr),[a,c]=C.useState(Oi.freeDeliveryThreshold),[d,h]=C.useState(Oi.paymentOptionsDescription),[p,g]=C.useState(Oi.whatHappensAfterPayment),[y,b]=C.useState(!0),S=async()=>{try{b(!0);const k=await Sh.getPublicSettings();t(k.delivery_fee_ncr),l(k.delivery_fee_outside_ncr),c(k.free_delivery_threshold),h(k.payment_options_description||""),g(k.what_happens_after_payment||"")}catch(k){console.error("Error fetching settings:",k)}finally{b(!1)}};C.useEffect(()=>{S()},[]);const w={deliveryFeeNcr:e,deliveryFeeOutsideNcr:s,freeDeliveryThreshold:a,paymentOptionsDescription:d,whatHappensAfterPayment:p,isLoading:y,refreshSettings:async()=>{await S()}};return f.jsx(Jb.Provider,{value:w,children:n})},up=[{value:"",label:"Select Province"},{value:"Metro Manila",label:"Metro Manila (NCR)"},{value:"Abra",label:"Abra"},{value:"Agusan del Norte",label:"Agusan del Norte"},{value:"Agusan del Sur",label:"Agusan del Sur"},{value:"Aklan",label:"Aklan"},{value:"Albay",label:"Albay"},{value:"Antique",label:"Antique"},{value:"Apayao",label:"Apayao"},{value:"Aurora",label:"Aurora"},{value:"Basilan",label:"Basilan"},{value:"Bataan",label:"Bataan"},{value:"Batanes",label:"Batanes"},{value:"Batangas",label:"Batangas"},{value:"Benguet",label:"Benguet"},{value:"Biliran",label:"Biliran"},{value:"Bohol",label:"Bohol"},{value:"Bukidnon",label:"Bukidnon"},{value:"Bulacan",label:"Bulacan"},{value:"Cagayan",label:"Cagayan"},{value:"Camarines Norte",label:"Camarines Norte"},{value:"Camarines Sur",label:"Camarines Sur"},{value:"Camiguin",label:"Camiguin"},{value:"Capiz",label:"Capiz"},{value:"Catanduanes",label:"Catanduanes"},{value:"Cavite",label:"Cavite"},{value:"Cebu",label:"Cebu"},{value:"Cotabato",label:"Cotabato"},{value:"Davao de Oro",label:"Davao de Oro"},{value:"Davao del Norte",label:"Davao del Norte"},{value:"Davao del Sur",label:"Davao del Sur"},{value:"Davao Occidental",label:"Davao Occidental"},{value:"Davao Oriental",label:"Davao Oriental"},{value:"Dinagat Islands",label:"Dinagat Islands"},{value:"Eastern Samar",label:"Eastern Samar"},{value:"Guimaras",label:"Guimaras"},{value:"Ifugao",label:"Ifugao"},{value:"Ilocos Norte",label:"Ilocos Norte"},{value:"Ilocos Sur",label:"Ilocos Sur"},{value:"Iloilo",label:"Iloilo"},{value:"Isabela",label:"Isabela"},{value:"Kalinga",label:"Kalinga"},{value:"La Union",label:"La Union"},{value:"Laguna",label:"Laguna"},{value:"Lanao del Norte",label:"Lanao del Norte"},{value:"Lanao del Sur",label:"Lanao del Sur"},{value:"Leyte",label:"Leyte"},{value:"Maguindanao",label:"Maguindanao"},{value:"Marinduque",label:"Marinduque"},{value:"Masbate",label:"Masbate"},{value:"Misamis Occidental",label:"Misamis Occidental"},{value:"Misamis Oriental",label:"Misamis Oriental"},{value:"Mountain Province",label:"Mountain Province"},{value:"Negros Occidental",label:"Negros Occidental"},{value:"Negros Oriental",label:"Negros Oriental"},{value:"Northern Samar",label:"Northern Samar"},{value:"Nueva Ecija",label:"Nueva Ecija"},{value:"Nueva Vizcaya",label:"Nueva Vizcaya"},{value:"Occidental Mindoro",label:"Occidental Mindoro"},{value:"Oriental Mindoro",label:"Oriental Mindoro"},{value:"Palawan",label:"Palawan"},{value:"Pampanga",label:"Pampanga"},{value:"Pangasinan",label:"Pangasinan"},{value:"Quezon",label:"Quezon"},{value:"Quirino",label:"Quirino"},{value:"Rizal",label:"Rizal"},{value:"Romblon",label:"Romblon"},{value:"Samar",label:"Samar"},{value:"Sarangani",label:"Sarangani"},{value:"Siquijor",label:"Siquijor"},{value:"Sorsogon",label:"Sorsogon"},{value:"South Cotabato",label:"South Cotabato"},{value:"Southern Leyte",label:"Southern Leyte"},{value:"Sultan Kudarat",label:"Sultan Kudarat"},{value:"Sulu",label:"Sulu"},{value:"Surigao del Norte",label:"Surigao del Norte"},{value:"Surigao del Sur",label:"Surigao del Sur"},{value:"Tarlac",label:"Tarlac"},{value:"Tawi-Tawi",label:"Tawi-Tawi"},{value:"Zambales",label:"Zambales"},{value:"Zamboanga del Norte",label:"Zamboanga del Norte"},{value:"Zamboanga del Sur",label:"Zamboanga del Sur"},{value:"Zamboanga Sibugay",label:"Zamboanga Sibugay"}],kk=({isOpen:n,onClose:e,totalAmount:t})=>{const{user:s}=st(),{profile:l,updateProfile:a}=Kb(),[c,d]=C.useState(1),[h,p]=C.useState({name:"",instagramUsername:"",addressLine1:"",barangay:"",province:"",city:"",mobileNumber:"",paymentProof:null}),[g,y]=C.useState({}),[b,S]=C.useState(!1),[v,w]=C.useState(!1),[k,E]=C.useState(null),{clearCart:O,token:z}=Oa(),{deliveryFeeNcr:q,deliveryFeeOutsideNcr:D,isLoading:I,paymentOptionsDescription:L,whatHappensAfterPayment:G}=cp();if(C.useEffect(()=>{if(n){let F={name:(s==null?void 0:s.name)||""};l&&(F={...F,instagramUsername:l.instagram_username||"",addressLine1:l.address_line1||"",barangay:l.barangay||"",city:l.city||"",mobileNumber:l.mobile_number||"",province:l.province||""}),p(Q=>({...Q,...F})),d(1),y({}),w(!1),E(null),S(!1)}},[s,l,n]),!n)return null;const ne=F=>{const{name:Q,value:X}=F.target;p({...h,[Q]:X}),g[Q]&&y({...g,[Q]:""})},se=F=>{F.target.files&&F.target.files[0]&&(p({...h,paymentProof:F.target.files[0]}),g.paymentProof&&y({...g,paymentProof:""}))},ue=async F=>{const{name:Q,value:X}=F.target;p({...h,[Q]:X}),g[Q]&&y({...g,[Q]:""});const ae=X;console.log(ae),p(ie=>({...ie,province:ae}));try{await a({instagram_username:h.instagramUsername,address_line1:h.addressLine1,barangay:h.barangay,province:ae,city:h.city,mobile_number:h.mobileNumber})}catch(ie){console.error("Failed to update province:",ie)}},Z=F=>{const Q={};return F===1?(h.name.trim()||(Q.name="Name is required"),h.instagramUsername.trim()||(Q.instagramUsername="Instagram username is required"),h.addressLine1.trim()||(Q.addressLine1="Address is required"),h.barangay.trim()||(Q.barangay="Barangay is required"),h.province||(Q.province="Province is required"),h.city.trim()||(Q.city="City is required"),h.mobileNumber.trim()||(Q.mobileNumber="Mobile number is required")):F===2&&(h.paymentProof||(Q.paymentProof="Proof of payment is required")),y(Q),Object.keys(Q).length===0},ye=()=>{Z(c)&&d(c+1)},ge=()=>{d(c-1)},Te=async F=>{if(F.preventDefault(),Z(c))try{S(!0),await P(),await T(),w(!0),O()}catch(Q){E(Q instanceof Error?Q.message:"An error occurred while processing your order"),console.error("Order error:",Q)}finally{S(!1)}},P=async()=>{try{return await a({instagram_username:h.instagramUsername,address_line1:h.addressLine1,barangay:h.barangay,province:h.province,city:h.city,mobile_number:h.mobileNumber}),console.log("Profile saved successfully"),!0}catch(F){throw console.error("Error saving profile:",F),F}},re=h.province==="Metro Manila"?q:D,K=t+re,T=async()=>{if(!z||!h.paymentProof)throw new Error("Missing token or payment proof");const F=new FormData;F.append("customer_name",h.name),F.append("instagram_username",h.instagramUsername),F.append("address_line1",h.addressLine1),F.append("barangay",h.barangay),F.append("province",h.province),F.append("city",h.city),F.append("mobile_number",h.mobileNumber),F.append("payment_proof",h.paymentProof),F.append("shipping_fee",re.toString());try{return(await Ii.createOrder(z,F)).data.order}catch(Q){throw console.error("Error creating order:",Q),Q}},_=()=>G?f.jsxs("div",{className:"bg-yellow-50 p-4 rounded border border-yellow-200",children:[f.jsx("h4",{className:"font-medium text-yellow-800 mb-2",children:"What happens next?"}),f.jsx("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:G}})]}):null;return f.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:f.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[f.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:f.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75",onClick:e})}),f.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"​"}),f.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline",children:[f.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:f.jsx("div",{className:"sm:flex sm:items-start",children:f.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full",children:[f.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",id:"modal-headline",children:v?"Order Placed Successfully!":`Checkout - Step ${c} of 3`}),!v&&f.jsx(f.Fragment,{children:f.jsxs("div",{className:"mt-4 mb-6",children:[f.jsxs("div",{className:"flex items-center",children:[f.jsx("div",{className:`flex items-center justify-center h-8 w-8 rounded-full ${c>=1?"bg-black text-white":"bg-gray-200"}`,children:"1"}),f.jsx("div",{className:`flex-1 h-1 mx-2 ${c>=2?"bg-black":"bg-gray-200"}`}),f.jsx("div",{className:`flex items-center justify-center h-8 w-8 rounded-full ${c>=2?"bg-black text-white":"bg-gray-200"}`,children:"2"}),f.jsx("div",{className:`flex-1 h-1 mx-2 ${c>=3?"bg-black":"bg-gray-200"}`}),f.jsx("div",{className:`flex items-center justify-center h-8 w-8 rounded-full ${c>=3?"bg-black text-white":"bg-gray-200"}`,children:"3"})]}),f.jsxs("div",{className:"flex justify-between mt-1 text-xs text-gray-500",children:[f.jsx("span",{children:"Customer Info"}),f.jsx("span",{children:"Payment"}),f.jsx("span",{children:"Confirmation"})]})]})}),k&&f.jsxs("div",{className:"bg-red-50 p-4 rounded border border-red-200 mb-4",children:[f.jsx("p",{className:"text-red-800",children:k}),f.jsx("p",{className:"text-sm text-red-600 mt-1",children:"Please try again or contact support for assistance."})]}),v?f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"bg-green-50 p-4 rounded border border-green-200",children:[f.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Your order has been placed!"}),f.jsx("p",{className:"text-gray-700 mb-2",children:"Thank you for your order. We have received your payment proof and will verify it shortly."}),f.jsxs("p",{className:"text-gray-700",children:["Your order is now on ",f.jsx("span",{className:"font-medium",children:"hold"})," and the products have been reserved for you."]})]}),_()]}):f.jsxs("form",{children:[c===1&&f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Full Name"}),f.jsx("input",{type:"text",id:"name",name:"name",value:h.name,onChange:ne,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-black focus:border-black sm:text-sm"}),g.name&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:g.name})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"instagramUsername",className:"block text-sm font-medium text-gray-700",children:"Instagram Username"}),f.jsxs("div",{className:"mt-1 flex rounded-md shadow-sm",children:[f.jsx("span",{className:"inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500 sm:text-sm",children:"@"}),f.jsx("input",{type:"text",id:"instagramUsername",name:"instagramUsername",value:h.instagramUsername,onChange:ne,className:"flex-1 block w-full border border-gray-300 rounded-none rounded-r-md shadow-sm py-2 px-3 focus:outline-none focus:ring-black focus:border-black sm:text-sm"})]}),g.instagramUsername&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:g.instagramUsername})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"province",className:"block text-sm font-medium text-gray-700",children:"Province"}),f.jsx("select",{id:"province",name:"province",value:h.province,onChange:ue,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-black focus:border-black sm:text-sm",children:up.map(F=>f.jsx("option",{value:F.value,children:F.label},F.value))}),g.province&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:g.province})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700",children:"City"}),f.jsx("input",{type:"text",id:"city",name:"city",value:h.city,onChange:ne,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-black focus:border-black sm:text-sm"}),g.city&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:g.city})]})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"barangay",className:"block text-sm font-medium text-gray-700",children:"Barangay"}),f.jsx("input",{type:"text",id:"barangay",name:"barangay",value:h.barangay,onChange:ne,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-black focus:border-black sm:text-sm"}),g.barangay&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:g.barangay})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"addressLine1",className:"block text-sm font-medium text-gray-700",children:"Address Line 1"}),f.jsx("input",{type:"text",id:"addressLine1",name:"addressLine1",value:h.addressLine1,onChange:ne,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-black focus:border-black sm:text-sm"}),g.addressLine1&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:g.addressLine1})]})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"mobileNumber",className:"block text-sm font-medium text-gray-700",children:"Mobile Number"}),f.jsx("input",{type:"text",id:"mobileNumber",name:"mobileNumber",value:h.mobileNumber,onChange:ne,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-black focus:border-black sm:text-sm"}),g.mobileNumber&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:g.mobileNumber})]})]}),c===2&&f.jsx("div",{className:"space-y-4",children:f.jsxs("div",{children:[f.jsxs("div",{className:"bg-green-50 p-4 rounded border border-green-200",children:[f.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Order Summary"}),f.jsxs("ul",{className:"text-sm text-gray-700 space-y-2",children:[f.jsxs("li",{children:[f.jsx("span",{className:"font-medium",children:"Name:"})," ",h.name]}),f.jsxs("li",{children:[f.jsx("span",{className:"font-medium",children:"Instagram:"})," @",h.instagramUsername]}),f.jsxs("li",{children:[f.jsx("span",{className:"font-medium",children:"Address:"})," ",h.addressLine1,", ",h.barangay,", ",h.city,", ",h.province]}),f.jsxs("li",{children:[f.jsx("span",{className:"font-medium",children:"Mobile:"})," ",h.mobileNumber]}),f.jsxs("li",{children:[f.jsx("span",{className:"font-medium",children:"Subtotal:"})," ₱",t.toFixed(2)]}),f.jsxs("li",{children:[f.jsx("span",{className:"font-medium",children:"Shipping Fee:"})," ",I?"Loading...":`₱${re.toFixed(2)}`]}),f.jsxs("li",{children:[f.jsx("span",{className:"font-medium",children:"Grand Total:"})," ",I?"Loading...":`₱${K.toFixed(2)}`]})]})]}),!!L&&f.jsx("div",{className:"mt-4",children:f.jsx("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:L}})}),f.jsxs("div",{className:"mt-4",children:[f.jsx("label",{htmlFor:"paymentProof",className:"block text-sm font-medium text-gray-700",children:"Proof of Payment"}),f.jsx("input",{type:"file",id:"paymentProof",name:"paymentProof",accept:"image/*",onChange:se,className:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-black focus:border-black sm:text-sm"}),f.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Please upload a screenshot of your payment receipt."}),g.paymentProof&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:g.paymentProof})]})]})}),c===3&&f.jsx("div",{className:"space-y-4",children:_()})]})]})})}),f.jsx("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:v?f.jsx("button",{type:"button",onClick:e,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-black text-base font-medium text-white hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-black sm:ml-3 sm:w-auto sm:text-sm",children:"Close"}):f.jsxs(f.Fragment,{children:[c<3?f.jsx("button",{type:"button",onClick:ye,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-black text-base font-medium text-white hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-black sm:ml-3 sm:w-auto sm:text-sm",children:"Continue"}):f.jsx("button",{type:"button",onClick:Te,disabled:b,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-black text-base font-medium text-white hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-black disabled:bg-gray-400 disabled:cursor-not-allowed sm:ml-3 sm:w-auto sm:text-sm",children:b?"Processing...":"Place Order"}),c>1&&f.jsx("button",{type:"button",onClick:ge,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",children:"Back"}),f.jsx("button",{type:"button",onClick:e,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:w-auto sm:text-sm",children:"Cancel"})]})})]})]})})},jk=({isOpen:n,onClose:e,onContinueAsGuest:t,onCreateAccount:s})=>{const[l,a]=C.useState("initial"),[c,d]=C.useState({name:"",email:"",password:"",password_confirmation:""}),[h,p]=C.useState({}),[g,y]=C.useState(!1),b=w=>{const{name:k,value:E}=w.target;d({...c,[k]:E}),h[k]&&p({...h,[k]:""})},S=()=>{const w={};return c.name.trim()||(w.name="Name is required"),c.email.trim()?/\S+@\S+\.\S+/.test(c.email)||(w.email="Email is invalid"):w.email="Email is required",c.password.trim()?c.password.length<8&&(w.password="Password must be at least 8 characters"):w.password="Password is required",c.password!==c.password_confirmation&&(w.password_confirmation="Passwords do not match"),p(w),Object.keys(w).length===0},v=async w=>{if(w.preventDefault(),!!S()){y(!0);try{await s(c.name,c.email,c.password)}catch(k){console.error("Account creation error:",k),k instanceof Error?p({form:k.message}):p({form:"An error occurred while creating your account"})}finally{y(!1)}}};return n?f.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:f.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[f.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:f.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75",onClick:e})}),f.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"​"}),f.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-md sm:w-full",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline",children:[f.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:f.jsx("div",{className:"mt-3 text-center sm:mt-0 sm:text-left w-full",children:l==="initial"?f.jsxs(f.Fragment,{children:[f.jsx("h3",{className:"text-xl leading-6 font-medium text-gray-900 mb-4",id:"modal-headline",children:"Before you checkout"}),f.jsx("p",{className:"text-gray-600 mb-6",children:"Would you like to save your cart by creating an account, or continue as a guest?"}),f.jsxs("div",{className:"space-y-3",children:[f.jsx("button",{onClick:()=>a("register"),className:"w-full bg-[#ad688f] text-white px-4 py-3 rounded hover:bg-[#96577b] transition-colors",children:"Create an Account"}),f.jsx("button",{onClick:t,className:"w-full border border-gray-300 bg-white text-gray-700 px-4 py-3 rounded hover:bg-gray-50 transition-colors",children:"Continue as Guest"})]})]}):f.jsxs(f.Fragment,{children:[f.jsx("h3",{className:"text-xl leading-6 font-medium text-gray-900 mb-4",id:"modal-headline",children:"Create Your Account"}),f.jsx("p",{className:"text-gray-600 mb-6",children:"Create an account to save your cart and track your orders."}),h.form&&f.jsx("div",{className:"mb-4 p-3 bg-red-50 text-red-700 rounded border border-red-200",children:h.form}),f.jsxs("form",{onSubmit:v,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Name"}),f.jsx("input",{type:"text",id:"name",name:"name",value:c.name,onChange:b,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-[#ad688f] focus:border-[#ad688f] sm:text-sm"}),h.name&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.name})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),f.jsx("input",{type:"email",id:"email",name:"email",value:c.email,onChange:b,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-[#ad688f] focus:border-[#ad688f] sm:text-sm"}),h.email&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.email})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),f.jsx("input",{type:"password",id:"password",name:"password",value:c.password,onChange:b,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-[#ad688f] focus:border-[#ad688f] sm:text-sm"}),h.password&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.password})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"password_confirmation",className:"block text-sm font-medium text-gray-700",children:"Confirm Password"}),f.jsx("input",{type:"password",id:"password_confirmation",name:"password_confirmation",value:c.password_confirmation,onChange:b,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-[#ad688f] focus:border-[#ad688f] sm:text-sm"}),h.password_confirmation&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.password_confirmation})]}),f.jsxs("div",{className:"pt-3",children:[f.jsx("button",{type:"submit",disabled:g,className:"w-full bg-[#ad688f] text-white px-4 py-3 rounded hover:bg-[#96577b] transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:g?"Creating Account...":"Create Account & Continue"}),f.jsx("button",{type:"button",onClick:()=>a("initial"),className:"w-full text-gray-600 mt-2 text-sm",children:"Back to options"})]})]})]})})}),f.jsx("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:f.jsx("button",{type:"button",onClick:e,className:"w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:w-auto sm:text-sm",children:"Cancel"})})]})]})}):null},Ck="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let Ek=(n=21)=>{let e="",t=crypto.getRandomValues(new Uint8Array(n|=0));for(;n--;)e+=Ck[t[n]&63];return e};const Ak=({isOpen:n,onClose:e,totalAmount:t,onSubmitOrder:s,province:l,setProvince:a})=>{const[c,d]=C.useState(1),[h,p]=C.useState({name:"",email:"",instagramUsername:"",addressLine1:"",barangay:"",city:"",mobileNumber:"",paymentProof:null}),[g,y]=C.useState({}),[b,S]=C.useState(!1),[v,w]=C.useState(!1),[k,E]=C.useState(null),{deliveryFeeNcr:O,deliveryFeeOutsideNcr:z,isLoading:q,paymentOptionsDescription:D,whatHappensAfterPayment:I}=cp();if(!n)return null;const L=re=>{const{name:K,value:T}=re.target;p({...h,[K]:T}),g[K]&&y({...g,[K]:""})},G=re=>{re.target.files&&re.target.files[0]&&(p({...h,paymentProof:re.target.files[0]}),g.paymentProof&&y({...g,paymentProof:""}))},ne=re=>{const{name:K,value:T}=re.target;K==="province"?a(T):p({...h,[K]:T}),g[K]&&y({...g,[K]:""})},se=re=>{const K={};return re===1?(h.name.trim()||(K.name="Name is required"),h.email.trim()?/\S+@\S+\.\S+/.test(h.email)||(K.email="Email is invalid"):K.email="Email is required",h.instagramUsername.trim()||(K.instagramUsername="Instagram username is required"),h.addressLine1.trim()||(K.addressLine1="Address is required"),h.barangay.trim()||(K.barangay="Barangay is required"),h.city.trim()||(K.city="City is required"),h.mobileNumber.trim()||(K.mobileNumber="Mobile number is required"),l||(K.province="Province is required")):re===2&&(h.paymentProof||(K.paymentProof="Proof of payment is required")),y(K),Object.keys(K).length===0},ue=()=>{se(c)&&d(c+1)},Z=()=>{d(c-1)},ge=l?l==="Metro Manila"?O:z:0,Te=t+ge,P=async re=>{if(re.preventDefault(),se(c))try{S(!0);let K=localStorage.getItem("guest_id");K||(K=Ek(),localStorage.setItem("guest_id",K),window.dispatchEvent(new Event("guest_id_set"))),await s({...h,province:l,guest_id:K}),w(!0)}catch(K){E(K instanceof Error?K.message:"An error occurred while processing your order"),console.error("Order error:",K)}finally{S(!1)}},te=()=>I?f.jsxs("div",{className:"bg-yellow-50 p-4 rounded border border-yellow-200",children:[f.jsx("h4",{className:"font-medium text-yellow-800 mb-2",children:"What happens next?"}),f.jsx("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:I}})]}):null;return f.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:f.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[f.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:f.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75",onClick:e})}),f.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"​"}),f.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline",children:[f.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:f.jsx("div",{className:"sm:flex sm:items-start",children:f.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full",children:[f.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",id:"modal-headline",children:v?"Order Placed Successfully!":`Guest Checkout - Step ${c} of 3`}),!v&&f.jsx(f.Fragment,{children:f.jsxs("div",{className:"mt-4 mb-6",children:[f.jsxs("div",{className:"flex items-center",children:[f.jsx("div",{className:`flex items-center justify-center h-8 w-8 rounded-full ${c>=1?"bg-[#ad688f] text-white":"bg-gray-200"}`,children:"1"}),f.jsx("div",{className:`flex-1 h-1 mx-2 ${c>=2?"bg-[#ad688f]":"bg-gray-200"}`}),f.jsx("div",{className:`flex items-center justify-center h-8 w-8 rounded-full ${c>=2?"bg-[#ad688f] text-white":"bg-gray-200"}`,children:"2"}),f.jsx("div",{className:`flex-1 h-1 mx-2 ${c>=3?"bg-[#ad688f]":"bg-gray-200"}`}),f.jsx("div",{className:`flex items-center justify-center h-8 w-8 rounded-full ${c>=3?"bg-[#ad688f] text-white":"bg-gray-200"}`,children:"3"})]}),f.jsxs("div",{className:"flex justify-between mt-1 text-xs text-gray-500",children:[f.jsx("span",{children:"Customer Info"}),f.jsx("span",{children:"Payment"}),f.jsx("span",{children:"Confirmation"})]})]})}),k&&f.jsxs("div",{className:"bg-red-50 p-4 rounded border border-red-200 mb-4",children:[f.jsx("p",{className:"text-red-800",children:k}),f.jsx("p",{className:"text-sm text-red-600 mt-1",children:"Please try again or contact support for assistance."})]}),v?f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"bg-green-50 p-4 rounded border border-green-200",children:[f.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Your order has been placed!"}),f.jsx("p",{className:"text-gray-700 mb-2",children:"Thank you for your order. We have received your payment proof and will verify it shortly."}),f.jsxs("p",{className:"text-gray-700",children:["Your order is now on ",f.jsx("span",{className:"font-medium",children:"hold"})," and the products have been reserved for you."]})]}),te()]}):f.jsxs("form",{children:[c===1&&f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Full Name"}),f.jsx("input",{type:"text",id:"name",name:"name",value:h.name,onChange:L,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-[#ad688f] focus:border-[#ad688f] sm:text-sm"}),g.name&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:g.name})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),f.jsx("input",{type:"email",id:"email",name:"email",value:h.email,onChange:L,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-[#ad688f] focus:border-[#ad688f] sm:text-sm"}),g.email&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:g.email})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"instagramUsername",className:"block text-sm font-medium text-gray-700",children:"Instagram Username"}),f.jsxs("div",{className:"mt-1 flex rounded-md shadow-sm",children:[f.jsx("span",{className:"inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500 sm:text-sm",children:"@"}),f.jsx("input",{type:"text",id:"instagramUsername",name:"instagramUsername",value:h.instagramUsername,onChange:L,className:"flex-1 block w-full border border-gray-300 rounded-none rounded-r-md shadow-sm py-2 px-3 focus:outline-none focus:ring-[#ad688f] focus:border-[#ad688f] sm:text-sm"})]}),g.instagramUsername&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:g.instagramUsername})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"addressLine1",className:"block text-sm font-medium text-gray-700",children:"Address Line 1"}),f.jsx("input",{type:"text",id:"addressLine1",name:"addressLine1",value:h.addressLine1,onChange:L,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-[#ad688f] focus:border-[#ad688f] sm:text-sm"}),g.addressLine1&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:g.addressLine1})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"barangay",className:"block text-sm font-medium text-gray-700",children:"Barangay"}),f.jsx("input",{type:"text",id:"barangay",name:"barangay",value:h.barangay,onChange:L,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-[#ad688f] focus:border-[#ad688f] sm:text-sm"}),g.barangay&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:g.barangay})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"province",className:"block text-sm font-medium text-gray-700",children:"Province"}),f.jsx("select",{id:"province",name:"province",value:l,onChange:ne,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-[#ad688f] focus:border-[#ad688f] sm:text-sm",children:up.map(re=>f.jsx("option",{value:re.value,children:re.label},re.value))}),g.province&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:g.province})]})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700",children:"City"}),f.jsx("input",{type:"text",id:"city",name:"city",value:h.city,onChange:L,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-[#ad688f] focus:border-[#ad688f] sm:text-sm"}),g.city&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:g.city})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"mobileNumber",className:"block text-sm font-medium text-gray-700",children:"Mobile Number"}),f.jsx("input",{type:"text",id:"mobileNumber",name:"mobileNumber",value:h.mobileNumber,onChange:L,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-[#ad688f] focus:border-[#ad688f] sm:text-sm"}),g.mobileNumber&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:g.mobileNumber})]})]})]}),c===2&&f.jsx("div",{className:"space-y-4",children:f.jsxs("div",{children:[f.jsxs("div",{className:"bg-green-50 p-4 rounded border border-green-200",children:[f.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Order Summary"}),f.jsxs("ul",{className:"text-sm text-gray-700 space-y-2",children:[f.jsxs("li",{children:[f.jsx("span",{className:"font-medium",children:"Name:"})," ",h.name]}),f.jsxs("li",{children:[f.jsx("span",{className:"font-medium",children:"Email:"})," ",h.email]}),f.jsxs("li",{children:[f.jsx("span",{className:"font-medium",children:"Instagram:"})," @",h.instagramUsername]}),f.jsxs("li",{children:[f.jsx("span",{className:"font-medium",children:"Address:"})," ",h.addressLine1,", ",h.barangay,", ",h.city,", ",l]}),f.jsxs("li",{children:[f.jsx("span",{className:"font-medium",children:"Mobile:"})," ",h.mobileNumber]}),f.jsxs("li",{children:[f.jsx("span",{className:"font-medium",children:"Subtotal:"})," ₱",t.toFixed(2)]}),f.jsxs("li",{children:[f.jsx("span",{className:"font-medium",children:"Shipping Fee:"})," ",q?"Loading...":`₱${ge.toFixed(2)}`]}),f.jsxs("li",{children:[f.jsx("span",{className:"font-medium",children:"Grand Total:"})," ",q?"Loading...":`₱${Te.toFixed(2)}`]})]})]}),!!D&&f.jsx("div",{className:"mt-4",children:f.jsx("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:D}})}),f.jsxs("div",{className:"mt-4",children:[f.jsx("label",{htmlFor:"paymentProof",className:"block text-sm font-medium text-gray-700",children:"Proof of Payment"}),f.jsx("input",{type:"file",id:"paymentProof",name:"paymentProof",accept:"image/*",onChange:G,className:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-black focus:border-black sm:text-sm"}),f.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Please upload a screenshot of your payment receipt."}),g.paymentProof&&f.jsx("p",{className:"mt-1 text-sm text-red-600",children:g.paymentProof})]})]})}),c===3&&f.jsx("div",{children:te()})]})]})})}),f.jsx("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:v?f.jsx("button",{type:"button",onClick:e,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-[#ad688f] text-base font-medium text-white hover:bg-[#96577b] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#ad688f] sm:ml-3 sm:w-auto sm:text-sm",children:"Close"}):f.jsxs(f.Fragment,{children:[c<3?f.jsx("button",{type:"button",onClick:ue,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-[#ad688f] text-base font-medium text-white hover:bg-[#96577b] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#ad688f] sm:ml-3 sm:w-auto sm:text-sm",children:"Continue"}):f.jsx("button",{type:"button",onClick:P,disabled:b,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-[#ad688f] text-base font-medium text-white hover:bg-[#96577b] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#ad688f] disabled:bg-gray-400 disabled:cursor-not-allowed sm:ml-3 sm:w-auto sm:text-sm",children:b?"Processing...":"Place Order"}),c>1&&f.jsx("button",{type:"button",onClick:Z,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",children:"Back"}),f.jsx("button",{type:"button",onClick:e,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:w-auto sm:text-sm",children:"Cancel"})]})})]})]})})},Tk=()=>{const{isAuthenticated:n,register:e}=st(),[t,s]=C.useState(!1),[l,a]=C.useState(!1),[c,d]=C.useState(!1),[h,p]=C.useState(!1),{cartItems:g,removeFromCart:y,getTotalPrice:b,clearCart:S,backupGuestCart:v}=Oa(),{profile:w,updateProfile:k}=Kb(),{deliveryFeeNcr:E,deliveryFeeOutsideNcr:O,isLoading:z}=cp(),[q,D]=C.useState((w==null?void 0:w.province)||""),[I,L]=C.useState(!1);C.useEffect(()=>{w&&w.province&&D(w.province)},[w]);const G=b();let ne=0;g.length>0&&(q?ne=q==="Metro Manila"?E:O:ne=0);const se=G+ne,ue=()=>{n?s(!0):a(!0)},Z=()=>{s(!1)},ye=()=>{a(!1)},ge=()=>{d(!1)},Te=()=>{a(!1),d(!0)},P=async(K,T,_)=>{try{p(!0),console.log("1. Starting account creation process");const F=v();console.log("2. Guest cart items backed up:",F.length),console.log("3. Calling register function");const Q=await e(K,T,_,_);console.log("4. Registration successful, token:",Q.token?"received":"missing");const X=Q.token;if(console.log("5. Waiting for auth state to update"),await new Promise(ae=>setTimeout(ae,1e3)),F.length>0&&X){console.log("6. Manually adding cart items using CartApi");for(const ae of F){console.log("Adding item to user cart via API:",ae.product.id,ae.size,ae.quantity);try{const ie=await ws.addToCart(X,ae.product.id,ae.size,ae.quantity);console.log("Cart API response:",ie.success?"success":"failed")}catch(ie){console.error("Error adding item to cart:",ie)}}}sessionStorage.setItem("showCheckoutAfterReload","true"),console.log("9. Reloading page to refresh cart data"),window.location.reload()}catch(F){throw console.error("Error in handleCreateAccount:",F),p(!1),F}},te=async K=>{const T=new FormData;T.append("customer_name",K.name),T.append("email",K.email),T.append("instagram_username",K.instagramUsername),T.append("address_line1",K.addressLine1),T.append("barangay",K.barangay),T.append("province",K.province),T.append("city",K.city),T.append("mobile_number",K.mobileNumber),T.append("payment_proof",K.paymentProof),T.append("cart_items",JSON.stringify(g.map(_=>({product_id:_.product.id,size:_.size,quantity:_.quantity})))),T.append("shipping_fee",String(ne)),K.guest_id&&T.append("guest_id",K.guest_id),await Ii.createGuestOrder(T),S()},re=async K=>{const T=K.target.value;if(D(T),n){L(!0);try{await k({province:T})}catch(_){console.error("Failed to update province:",_)}finally{L(!1)}}};return f.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[f.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Your Cart"}),g.length===0?f.jsxs("div",{className:"text-center py-12 bg-white shadow rounded p-8",children:[f.jsx("p",{className:"text-xl mb-6",children:"Your cart is empty"}),f.jsx(me,{to:"/products",className:"inline-block border border-black px-8 py-3 hover:bg-black hover:text-white transition-colors no-underline text-black",children:"Continue Shopping"})]}):f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[f.jsx("div",{className:"lg:col-span-2",children:f.jsxs("div",{className:"bg-white shadow rounded overflow-hidden",children:[f.jsx("div",{className:"hidden md:block",children:f.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[f.jsx("thead",{className:"bg-gray-50",children:f.jsxs("tr",{children:[f.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),f.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),f.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),f.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:g.map(K=>f.jsxs("tr",{children:[f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsxs("div",{className:"flex items-center",children:[f.jsx("div",{className:"h-16 w-16 bg-gray-200 rounded flex-shrink-0 overflow-hidden",children:f.jsx("img",{src:K.product.image,alt:K.product.name,className:"h-full w-full object-cover"})}),f.jsxs("div",{className:"ml-4",children:[f.jsx("div",{className:"text-sm font-medium text-gray-900",children:K.product.name}),f.jsxs("div",{className:"text-sm text-gray-500",children:["Size: ",K.size.toUpperCase()]})]})]})}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsxs("div",{className:"text-sm font-medium text-gray-900",children:["₱",K.product.price.toFixed(2)]})}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:f.jsx("button",{className:"text-red-600 hover:text-red-800 font-medium",onClick:()=>K.id!==void 0?y(K.id):null,children:"Remove"})})]},`desktop-${K.product.id}-${K.size}`))})]})}),f.jsx("div",{className:"md:hidden",children:f.jsx("div",{className:"divide-y divide-gray-200",children:g.map(K=>f.jsxs("div",{className:"p-4",children:[f.jsxs("div",{className:"flex mb-4",children:[f.jsx("div",{className:"h-20 w-20 bg-gray-200 rounded flex-shrink-0 overflow-hidden",children:f.jsx("img",{src:K.product.image,alt:K.product.name,className:"h-full w-full object-cover"})}),f.jsxs("div",{className:"ml-4 flex-grow",children:[f.jsx("div",{className:"text-sm font-medium text-gray-900",children:K.product.name}),f.jsxs("div",{className:"text-sm text-gray-500",children:["Size: ",K.size.toUpperCase()]}),f.jsxs("div",{className:"text-sm font-medium text-gray-900 mt-1",children:["₱",K.product.price.toFixed(2)]})]})]}),f.jsx("div",{className:"flex justify-end items-center mt-2",children:f.jsx("button",{className:"text-red-600 hover:text-red-800 font-medium",onClick:()=>K.id!==void 0?y(K.id):null,children:"Remove"})})]},`mobile-${K.product.id}-${K.size}`))})}),f.jsxs("div",{className:"p-4 flex justify-between border-t border-gray-200",children:[f.jsx(me,{to:"/products",className:"text-sm font-medium text-gray-700 hover:text-black",children:"Continue Shopping"}),f.jsx("button",{onClick:S,className:"text-sm font-medium text-red-600 hover:text-red-800",children:"Clear Cart"})]})]})}),f.jsxs("div",{className:"bg-white shadow rounded p-6",children:[f.jsx("h2",{className:"text-lg font-medium mb-4",children:"Order Summary"}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"flex justify-between",children:[f.jsxs("span",{className:"text-gray-600",children:["Subtotal (",g.length," ",g.length===1?"item":"items",")"]}),f.jsxs("span",{className:"font-medium",children:["₱",G.toFixed(2)]})]}),f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-gray-600",children:"Shipping"}),f.jsx("select",{className:"border border-gray-300 rounded-md py-1 px-2 focus:outline-none focus:ring-black focus:border-black text-sm",value:q,onChange:re,disabled:I||z,children:up.map(K=>f.jsx("option",{value:K.value,children:K.label},K.value))}),f.jsx("span",{className:"font-medium ml-2",children:q?z?"Loading...":`₱${ne.toFixed(2)}`:"—"})]}),f.jsxs("div",{className:"border-t pt-4 flex justify-between",children:[f.jsx("span",{className:"font-medium text-lg",children:"Total"}),f.jsxs("span",{className:"font-medium text-lg",children:["₱",se.toFixed(2)]})]}),f.jsx("button",{onClick:ue,disabled:h,className:"w-full bg-[#ad688f] text-white py-3 px-4 font-medium rounded hover:bg-[#96577b] transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:h?"Processing...":"Checkout"}),n&&f.jsx(me,{to:"/my-orders",className:"w-full text-center block text-gray-700 hover:text-black py-2 text-sm font-medium",children:"View Your Orders"})]})]})]}),f.jsx(kk,{isOpen:t,onClose:Z,totalAmount:se}),f.jsx(jk,{isOpen:l,onClose:ye,onContinueAsGuest:Te,onCreateAccount:P}),f.jsx(Ak,{isOpen:c,onClose:ge,totalAmount:G,onSubmitOrder:te,province:q,setProvince:D})]})},Mk=()=>{const[n,e]=C.useState("all"),[t,s]=C.useState("all"),[l,a]=C.useState(!1),[c,d]=C.useState(""),[h,p]=C.useState([]),[g,y]=C.useState([]),[b,S]=C.useState(!0),[v,w]=C.useState(null);C.useEffect(()=>{(async()=>{try{S(!0);const O=await iu();p(O)}catch(O){console.error("Error fetching products:",O),w("Failed to load products")}finally{S(!1)}})()},[]),C.useEffect(()=>{h.length>0&&y(op(h,n,t,c,l))},[h,n,t,l,c]);const k=()=>{e("all"),s("all"),a(!1),d("")};return b?f.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[f.jsx("h1",{className:"text-3xl font-bold mb-8",children:"All Products"}),f.jsx("div",{className:"text-center py-12",children:f.jsx("p",{children:"Loading products..."})})]}):v?f.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[f.jsx("h1",{className:"text-3xl font-bold mb-8",children:"All Products"}),f.jsx("div",{className:"text-center py-12",children:f.jsx("p",{className:"text-red-500",children:v})})]}):f.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[f.jsx("h1",{className:"text-3xl font-bold mb-8",children:"All Products"}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8 mb-8",children:[f.jsx("div",{className:"md:col-span-1",children:f.jsx(lp,{activeCategory:n,activeSize:t,searchKeyword:c,onCategoryChange:e,onSizeChange:s,onKeywordChange:d})}),f.jsx(ap,{products:g,onResetFilters:k,searchKeyword:c})]})]})},Ok=()=>{var E;const{productId:n}=ru(),[e,t]=C.useState(null),[s,l]=C.useState(0),[a,c]=C.useState(!0),[d,h]=C.useState(null),{addToCart:p}=Oa();C.useEffect(()=>{(async()=>{if(n)try{c(!0),h(null);const z=await hk(n);t(z),l(0)}catch(z){console.error(`Error fetching product ${n}:`,z),h("Failed to load product details")}finally{c(!1)}})()},[n]);const g=async()=>{var D;if(!e)return;const O=e.sizes[0];if((((D=e.sizeStock[0])==null?void 0:D.stock)||0)<=0)return;const q=1;try{await p(e,O,q)}catch(I){console.error("Error adding to cart:",I)}},y=()=>{if(!e)return[];const O=[e.image];if(e.images&&e.images.length>0){const z=e.images.filter(q=>q!==e.image);O.push(...z)}return O},b=O=>{l(O)};if(a)return f.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:f.jsxs("div",{className:"text-center",children:[f.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Loading Product"}),f.jsx("p",{children:"Please wait while we fetch the product details..."})]})});if(d||!e)return f.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:f.jsxs("div",{className:"text-center",children:[f.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Product Not Found"}),f.jsx("p",{className:"text-red-500 mb-4",children:d}),f.jsx(me,{to:"/products",className:"inline-block border border-black px-8 py-3 hover:bg-black hover:text-white transition-colors no-underline text-black",children:"Back to Products"})]})});const S=y(),v=e.sizes[0],k=(((E=e.sizeStock[0])==null?void 0:E.stock)||0)<=0;return f.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[f.jsxs("div",{className:"space-y-4",children:[f.jsx("div",{className:"bg-gray-100 p-4 rounded",children:f.jsxs("div",{className:"aspect-w-1 aspect-h-1 bg-white relative",children:[f.jsx("img",{src:S[s],alt:e.name,className:"w-full h-full object-contain"}),k&&f.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-60 flex items-center justify-center",children:f.jsx("span",{className:"text-black text-4xl font-bold font-como",children:"SOLD"})})]})}),S.length>1&&f.jsx("div",{className:"flex space-x-2 overflow-x-auto",children:S.map((O,z)=>f.jsx("button",{onClick:()=>b(z),className:`flex-shrink-0 w-16 h-16 border-2 rounded overflow-hidden ${s===z?"border-black":"border-gray-200 hover:border-gray-400"}`,children:f.jsx("img",{src:O,alt:`${e.name} thumbnail ${z+1}`,className:"w-full h-full object-cover"})},z))})]}),f.jsxs("div",{children:[f.jsxs("div",{className:"mb-6",children:[f.jsxs("div",{className:"flex justify-between items-start",children:[f.jsx("h1",{className:"text-2xl font-bold",children:e.name}),f.jsxs("div",{className:"flex space-x-2",children:[e.isNewArrival&&f.jsx("div",{className:"bg-green-500 text-white text-xs font-bold px-2 py-1 rounded",children:"New Arrival"}),e.isSale&&f.jsx("div",{className:"bg-red-500 text-white text-xs font-bold px-2 py-1 rounded",children:"Sale"})]})]}),f.jsxs("div",{className:"mt-2 flex items-center",children:[f.jsxs("span",{className:"bg-gray-100 text-gray-800 text-sm font-medium px-2 py-1 rounded mr-2",children:["Size: ",v.toUpperCase()]}),f.jsx("span",{className:`text-sm font-medium px-2 py-1 rounded ${k?"text-red-600":"text-green-600"}`,children:k?"Sold":""})]}),f.jsx("div",{className:"mt-4",children:f.jsxs("p",{className:"text-xl font-semibold",children:["₱",e.price.toFixed(2)]})})]}),f.jsxs("div",{className:"mb-6",children:[f.jsx("h2",{className:"text-lg font-medium mb-2",children:"Description"}),f.jsx("p",{className:"text-gray-700",children:e.description||"No description available."})]}),e.careInstructions&&f.jsxs("div",{className:"mb-6",children:[f.jsx("h2",{className:"text-lg font-medium mb-2",children:"Before You Buy"}),f.jsx("div",{className:"text-gray-700 whitespace-pre-line",children:e.careInstructions})]}),f.jsxs("div",{children:[f.jsx("button",{onClick:g,disabled:k,className:`w-full py-3 px-4 rounded-md font-medium ${k?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-black text-white hover:bg-gray-800"}`,children:k?"Sold":"Add to Cart"}),f.jsx("p",{className:"text-xs text-gray-500 mt-2 text-center",children:"Note: Only one of each product can be added to cart"})]})]})]})})},Rk=({onSuccess:n,onError:e})=>{var ue;const{token:t}=st(),s=fr(),[l,a]=C.useState([]),[c,d]=C.useState([]),[h,p]=C.useState(""),[g,y]=C.useState(!1),[b,S]=C.useState(!1),[v,w]=C.useState(null),[k,E]=C.useState({});C.useEffect(()=>{z()},[]),C.useEffect(()=>{if(!h){d(l);return}const Z=h.toLowerCase(),ye=l.filter(ge=>ge.name.toLowerCase().includes(Z)||ge.category.toLowerCase().includes(Z)||ge.sku&&ge.sku.toLowerCase().includes(Z));d(ye)},[h,l]);const O=Z=>{p(Z.target.value)},z=async()=>{y(!0);try{const Z=await _i.getAllProducts();a(Z.data||[]),d(Z.data||[])}catch(Z){console.error("Error fetching products:",Z),e("Failed to load products. Please try again.")}finally{y(!1)}},q=Z=>{w(Z),E({}),S(!0)},D=()=>{S(!1),w(null),E({})},I=(Z,ye)=>{E(ge=>({...ge,[Z]:ye}))},L=async Z=>{if(Z.preventDefault(),!(!v||!t||!Object.values(k).some(ge=>ge>0))){y(!0);try{const ge=Object.entries(k).filter(([re,K])=>K>0).map(([re,K])=>({size:re,quantity:K})),Te=await _i.restockProduct(t,v.id,{sizeStock:ge}),P=l.map(re=>re.id===v.id?{...re,sizeStock:Te.data.sizeStock}:re);a(P);const te=Object.entries(k).filter(([re,K])=>K>0).map(([re,K])=>`${re.toUpperCase()}: ${K}`).join(", ");n(`Successfully restocked ${v.name} with sizes: ${te}`),D()}catch(ge){console.error("Error restocking product:",ge),e(ge instanceof Error?ge.message:"An error occurred while restocking the product")}finally{y(!1)}}},G=Z=>Z.sizeStock.reduce((ye,ge)=>ye+ge.stock,0),ne=async Z=>{if(window.confirm("Are you sure you want to delete this product?")&&t){y(!0);try{await _i.deleteProduct(t,Z),a(l.filter(ye=>ye.id!==Z)),n("Product deleted successfully")}catch(ye){console.error("Error deleting product:",ye),e(ye instanceof Error?ye.message:"An error occurred while deleting the product")}finally{y(!1)}}},se=Z=>{s(`/edit-product/${Z}`)};return f.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[f.jsx("h2",{className:"text-xl font-semibold mb-6",children:"Manage Products"}),f.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 mb-4",children:[f.jsx("div",{className:"w-full sm:w-64",children:f.jsx("input",{type:"text",placeholder:"Search products...",value:h,onChange:O,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-black focus:border-black"})}),f.jsx("div",{children:f.jsx(me,{to:"/add-product",className:"w-full sm:w-auto inline-block bg-black text-white px-4 py-2 rounded text-center",children:"Add New Product"})})]}),g&&f.jsx("p",{className:"text-center py-4",children:"Loading products..."}),!g&&c.length===0&&f.jsx("div",{className:"text-center py-8",children:h?f.jsxs("p",{className:"text-gray-500",children:['No products found matching "',h,'"']}):f.jsx("p",{className:"text-gray-500",children:"No products found"})}),!g&&c.length>0&&f.jsx("div",{className:"mt-4 overflow-x-auto",children:f.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[f.jsx("thead",{className:"bg-gray-50",children:f.jsxs("tr",{children:[f.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ID"}),f.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product Name"}),f.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),f.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),f.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Stock"}),f.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),f.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:c.map(Z=>f.jsxs("tr",{className:"hover:bg-gray-50",children:[f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:Z.id}),f.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[Z.name,Z.sku&&f.jsxs("div",{className:"text-xs text-gray-400",children:["SKU: ",Z.sku]})]}),f.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["₱",Z.price.toFixed(2)]}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:Z.category}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:G(Z)}),f.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[f.jsx("button",{onClick:()=>q(Z),className:"text-green-600 hover:text-green-900 mr-3",children:"Restock"}),f.jsx("button",{onClick:()=>se(Z.id),className:"text-blue-600 hover:text-blue-900 mr-3",children:"Edit"}),f.jsx("button",{onClick:()=>ne(Z.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},Z.id))})]})}),f.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[c.length>0&&f.jsx("div",{className:"text-sm text-gray-700",children:h?f.jsxs("span",{children:["Showing ",f.jsx("span",{className:"font-medium",children:c.length})," results from ",f.jsx("span",{className:"font-medium",children:l.length})," products"]}):f.jsxs("span",{children:["Showing ",f.jsx("span",{className:"font-medium",children:"1"})," to ",f.jsx("span",{className:"font-medium",children:c.length})," of ",f.jsx("span",{className:"font-medium",children:l.length})," products"]})}),c.length>0&&f.jsx("div",{className:"flex-1 flex justify-end",children:f.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[f.jsx("button",{className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",children:"Previous"}),f.jsx("button",{className:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-black text-sm font-medium text-white",children:"1"}),f.jsx("button",{className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",children:"Next"})]})})]}),b&&v&&f.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center z-50",children:f.jsxs("div",{className:"bg-white rounded-lg overflow-hidden shadow-xl max-w-md w-full",children:[f.jsx("div",{className:"px-6 py-4 bg-gray-100 border-b",children:f.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Restock ",v.name]})}),f.jsxs("form",{onSubmit:L,className:"p-6",children:[f.jsxs("div",{className:"mb-4",children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Stock"}),f.jsxs("div",{className:"text-lg font-semibold",children:[G(v)," units total"]}),v.sizeStock&&v.sizeStock.length>0&&f.jsx("div",{className:"mt-2 grid grid-cols-2 gap-2",children:v.sizeStock.map(Z=>f.jsxs("div",{className:"text-sm",children:[f.jsxs("span",{className:"font-medium",children:[Z.size.toUpperCase(),":"]})," ",Z.stock," units"]},Z.size))})]}),f.jsxs("div",{className:"mb-4",children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Restock Quantity by Size"}),f.jsx("div",{className:"space-y-3",children:(ue=v.sizeStock)==null?void 0:ue.map(Z=>f.jsxs("div",{className:"flex items-center",children:[f.jsxs("span",{className:"font-medium w-20",children:[Z.size.toUpperCase(),":"]}),f.jsx("input",{type:"number",value:k[Z.size]||0,onChange:ye=>I(Z.size,parseInt(ye.target.value)||0),min:"0",className:"w-20 px-2 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-black focus:border-black"}),f.jsx("span",{className:"ml-2 text-sm text-gray-500",children:"units"})]},Z.size))})]}),f.jsxs("div",{className:"flex justify-end space-x-3",children:[f.jsx("button",{type:"button",onClick:D,className:"px-4 py-2 bg-white border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-black",children:"Cancel"}),f.jsx("button",{type:"submit",disabled:!Object.values(k).some(Z=>Z>0)||g,className:`px-4 py-2 rounded-md text-sm font-medium text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-black ${!Object.values(k).some(Z=>Z>0)||g?"bg-gray-400 cursor-not-allowed":"bg-black hover:bg-gray-800"}`,children:g?"Updating...":"Confirm Restock"})]})]})]})})]})},Dk=()=>{const n=fr();return C.useEffect(()=>{n("/admin-orders")},[n]),f.jsx("div",{className:"bg-white shadow rounded-lg p-6 text-center",children:f.jsx("p",{className:"text-gray-700",children:"Redirecting to the order management system..."})})},zk=({token:n})=>{const[e,t]=C.useState([]),[s,l]=C.useState(!0),[a,c]=C.useState(null),d=fr(),h=async()=>{try{l(!0),c(null);const v=[...await Ms.getAllAnnouncements(n)].sort((w,k)=>w.displayOrder-k.displayOrder);t(v)}catch(S){c("Failed to load announcements. Please try again."),console.error("Error fetching announcements:",S)}finally{l(!1)}};C.useEffect(()=>{h()},[n]);const p=async(S,v)=>{try{await Ms.toggleAnnouncementStatus(n,S,!v),t(w=>w.map(k=>k.id===S?{...k,isActive:!v}:k))}catch(w){c("Failed to update announcement status. Please try again."),console.error("Error updating announcement status:",w)}},g=async S=>{if(window.confirm("Are you sure you want to delete this announcement?"))try{await Ms.deleteAnnouncement(n,S),t(v=>v.filter(w=>w.id!==S))}catch(v){c("Failed to delete announcement. Please try again."),console.error("Error deleting announcement:",v)}},y=S=>{d(`/admin/announcements/edit/${S}`)},b=()=>{d("/admin/announcements/new")};return s?f.jsx("div",{className:"p-4",children:"Loading announcements..."}):f.jsxs("div",{className:"p-4",children:[f.jsxs("div",{className:"flex justify-between items-center mb-6",children:[f.jsx("h2",{className:"text-2xl font-como",children:"Manage Announcements"}),f.jsx("button",{onClick:b,className:"bg-black text-white px-4 py-2 hover:bg-gray-800",children:"Create New Announcement"})]}),a&&f.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:a}),e.length===0?f.jsx("div",{className:"text-gray-500",children:"No announcements found. Create your first one!"}):f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"min-w-full bg-white",children:[f.jsx("thead",{className:"bg-gray-100",children:f.jsxs("tr",{children:[f.jsx("th",{className:"py-2 px-4 text-left",children:"Order"}),f.jsx("th",{className:"py-2 px-4 text-left",children:"Text"}),f.jsx("th",{className:"py-2 px-4 text-left",children:"Status"}),f.jsx("th",{className:"py-2 px-4 text-left",children:"Button"}),f.jsx("th",{className:"py-2 px-4 text-left",children:"Colors"}),f.jsx("th",{className:"py-2 px-4 text-left",children:"Actions"})]})}),f.jsx("tbody",{children:e.map(S=>f.jsxs("tr",{className:"border-t",children:[f.jsx("td",{className:"py-2 px-4",children:S.displayOrder}),f.jsx("td",{className:"py-2 px-4",children:S.text}),f.jsx("td",{className:"py-2 px-4",children:f.jsx("span",{className:`inline-block px-2 py-1 rounded ${S.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:S.isActive?"Active":"Inactive"})}),f.jsx("td",{className:"py-2 px-4",children:S.buttonText?f.jsxs("span",{className:"text-sm",children:[S.buttonText," → ",S.buttonLink]}):f.jsx("span",{className:"text-gray-400",children:"None"})}),f.jsx("td",{className:"py-2 px-4",children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:S.backgroundColor},title:`Background: ${S.backgroundColor}`}),f.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:S.textColor},title:`Text: ${S.textColor}`})]})}),f.jsx("td",{className:"py-2 px-4",children:f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{onClick:()=>y(S.id),className:"text-blue-600 hover:text-blue-800",children:"Edit"}),f.jsx("button",{onClick:()=>p(S.id,S.isActive),className:"text-yellow-600 hover:text-yellow-800",children:S.isActive?"Deactivate":"Activate"}),f.jsx("button",{onClick:()=>g(S.id),className:"text-red-600 hover:text-red-800",children:"Delete"})]})})]},S.id))})]})})]})},Lk=({message:n,type:e,isVisible:t,onClose:s,autoClose:l=!0,duration:a=3e3})=>{if(C.useEffect(()=>{let d;return t&&l&&(d=setTimeout(()=>{s()},a)),()=>{d&&clearTimeout(d)}},[t,l,a,s]),!t)return null;const c={success:"bg-green-500",error:"bg-red-500",warning:"bg-yellow-500",info:"bg-blue-500"}[e];return f.jsx("div",{className:"fixed bottom-4 right-4 z-50 flex flex-col items-end",children:f.jsxs("div",{className:`${c} text-white px-4 py-3 rounded-md shadow-lg flex items-center max-w-sm`,children:[f.jsx("div",{className:"flex-grow mr-2",children:n}),f.jsx("button",{onClick:s,className:"text-white hover:text-gray-200 focus:outline-none",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:f.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})})},Bk=({isOpen:n,onClose:e,children:t,title:s,widthClass:l="max-w-lg"})=>n?f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:f.jsxs("div",{className:`bg-white rounded shadow-lg w-full ${l} mx-4 relative`,children:[f.jsxs("div",{className:"flex justify-between items-center border-b px-6 py-4",children:[f.jsx("h3",{className:"text-lg font-semibold",children:s}),f.jsx("button",{onClick:e,className:"text-gray-500 hover:text-black text-2xl font-bold",children:"×"})]}),f.jsx("div",{className:"p-6",children:t})]})}):null;function bt(n){this.content=n}bt.prototype={constructor:bt,find:function(n){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===n)return e;return-1},get:function(n){var e=this.find(n);return e==-1?void 0:this.content[e+1]},update:function(n,e,t){var s=t&&t!=n?this.remove(t):this,l=s.find(n),a=s.content.slice();return l==-1?a.push(t||n,e):(a[l+1]=e,t&&(a[l]=t)),new bt(a)},remove:function(n){var e=this.find(n);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new bt(t)},addToStart:function(n,e){return new bt([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var t=this.remove(n).content.slice();return t.push(n,e),new bt(t)},addBefore:function(n,e,t){var s=this.remove(e),l=s.content.slice(),a=s.find(n);return l.splice(a==-1?l.length:a,0,e,t),new bt(l)},forEach:function(n){for(var e=0;e<this.content.length;e+=2)n(this.content[e],this.content[e+1])},prepend:function(n){return n=bt.from(n),n.size?new bt(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=bt.from(n),n.size?new bt(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=bt.from(n);for(var t=0;t<n.content.length;t+=2)e=e.remove(n.content[t]);return e},toObject:function(){var n={};return this.forEach(function(e,t){n[e]=t}),n},get size(){return this.content.length>>1}};bt.from=function(n){if(n instanceof bt)return n;var e=[];if(n)for(var t in n)e.push(t,n[t]);return new bt(e)};function Qb(n,e,t){for(let s=0;;s++){if(s==n.childCount||s==e.childCount)return n.childCount==e.childCount?null:t;let l=n.child(s),a=e.child(s);if(l==a){t+=l.nodeSize;continue}if(!l.sameMarkup(a))return t;if(l.isText&&l.text!=a.text){for(let c=0;l.text[c]==a.text[c];c++)t++;return t}if(l.content.size||a.content.size){let c=Qb(l.content,a.content,t+1);if(c!=null)return c}t+=l.nodeSize}}function Xb(n,e,t,s){for(let l=n.childCount,a=e.childCount;;){if(l==0||a==0)return l==a?null:{a:t,b:s};let c=n.child(--l),d=e.child(--a),h=c.nodeSize;if(c==d){t-=h,s-=h;continue}if(!c.sameMarkup(d))return{a:t,b:s};if(c.isText&&c.text!=d.text){let p=0,g=Math.min(c.text.length,d.text.length);for(;p<g&&c.text[c.text.length-p-1]==d.text[d.text.length-p-1];)p++,t--,s--;return{a:t,b:s}}if(c.content.size||d.content.size){let p=Xb(c.content,d.content,t-1,s-1);if(p)return p}t-=h,s-=h}}class W{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let s=0;s<e.length;s++)this.size+=e[s].nodeSize}nodesBetween(e,t,s,l=0,a){for(let c=0,d=0;d<t;c++){let h=this.content[c],p=d+h.nodeSize;if(p>e&&s(h,l+d,a||null,c)!==!1&&h.content.size){let g=d+1;h.nodesBetween(Math.max(0,e-g),Math.min(h.content.size,t-g),s,l+g)}d=p}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,s,l){let a="",c=!0;return this.nodesBetween(e,t,(d,h)=>{let p=d.isText?d.text.slice(Math.max(e,h)-h,t-h):d.isLeaf?l?typeof l=="function"?l(d):l:d.type.spec.leafText?d.type.spec.leafText(d):"":"";d.isBlock&&(d.isLeaf&&p||d.isTextblock)&&s&&(c?c=!1:a+=s),a+=p},0),a}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,s=e.firstChild,l=this.content.slice(),a=0;for(t.isText&&t.sameMarkup(s)&&(l[l.length-1]=t.withText(t.text+s.text),a=1);a<e.content.length;a++)l.push(e.content[a]);return new W(l,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let s=[],l=0;if(t>e)for(let a=0,c=0;c<t;a++){let d=this.content[a],h=c+d.nodeSize;h>e&&((c<e||h>t)&&(d.isText?d=d.cut(Math.max(0,e-c),Math.min(d.text.length,t-c)):d=d.cut(Math.max(0,e-c-1),Math.min(d.content.size,t-c-1))),s.push(d),l+=d.nodeSize),c=h}return new W(s,l)}cutByIndex(e,t){return e==t?W.empty:e==0&&t==this.content.length?this:new W(this.content.slice(e,t))}replaceChild(e,t){let s=this.content[e];if(s==t)return this;let l=this.content.slice(),a=this.size+t.nodeSize-s.nodeSize;return l[e]=t,new W(l,a)}addToStart(e){return new W([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new W(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,s=0;t<this.content.length;t++){let l=this.content[t];e(l,s,t),s+=l.nodeSize}}findDiffStart(e,t=0){return Qb(this,e,t)}findDiffEnd(e,t=this.size,s=e.size){return Xb(this,e,t,s)}findIndex(e,t=-1){if(e==0)return Xo(0,e);if(e==this.size)return Xo(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let s=0,l=0;;s++){let a=this.child(s),c=l+a.nodeSize;if(c>=e)return c==e||t>0?Xo(s+1,c):Xo(s,l);l=c}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return W.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new W(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return W.empty;let t,s=0;for(let l=0;l<e.length;l++){let a=e[l];s+=a.nodeSize,l&&a.isText&&e[l-1].sameMarkup(a)?(t||(t=e.slice(0,l)),t[t.length-1]=a.withText(t[t.length-1].text+a.text)):t&&t.push(a)}return new W(t||e,s)}static from(e){if(!e)return W.empty;if(e instanceof W)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new W([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}W.empty=new W([],0);const Ff={index:0,offset:0};function Xo(n,e){return Ff.index=n,Ff.offset=e,Ff}function gc(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let s=0;s<n.length;s++)if(!gc(n[s],e[s]))return!1}else{for(let s in n)if(!(s in e)||!gc(n[s],e[s]))return!1;for(let s in e)if(!(s in n))return!1}return!0}let Pe=class Nh{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,s=!1;for(let l=0;l<e.length;l++){let a=e[l];if(this.eq(a))return e;if(this.type.excludes(a.type))t||(t=e.slice(0,l));else{if(a.type.excludes(this.type))return e;!s&&a.type.rank>this.type.rank&&(t||(t=e.slice(0,l)),t.push(this),s=!0),t&&t.push(a)}}return t||(t=e.slice()),s||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&gc(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let s=e.marks[t.type];if(!s)throw new RangeError(`There is no mark type ${t.type} in this schema`);let l=s.create(t.attrs);return s.checkAttrs(l.attrs),l}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let s=0;s<e.length;s++)if(!e[s].eq(t[s]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Nh.none;if(e instanceof Nh)return[e];let t=e.slice();return t.sort((s,l)=>s.type.rank-l.type.rank),t}};Pe.none=[];class xc extends Error{}class le{constructor(e,t,s){this.content=e,this.openStart=t,this.openEnd=s}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let s=Wb(this.content,e+this.openStart,t);return s&&new le(s,this.openStart,this.openEnd)}removeBetween(e,t){return new le(Zb(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return le.empty;let s=t.openStart||0,l=t.openEnd||0;if(typeof s!="number"||typeof l!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new le(W.fromJSON(e,t.content),s,l)}static maxOpen(e,t=!0){let s=0,l=0;for(let a=e.firstChild;a&&!a.isLeaf&&(t||!a.type.spec.isolating);a=a.firstChild)s++;for(let a=e.lastChild;a&&!a.isLeaf&&(t||!a.type.spec.isolating);a=a.lastChild)l++;return new le(e,s,l)}}le.empty=new le(W.empty,0,0);function Zb(n,e,t){let{index:s,offset:l}=n.findIndex(e),a=n.maybeChild(s),{index:c,offset:d}=n.findIndex(t);if(l==e||a.isText){if(d!=t&&!n.child(c).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(s!=c)throw new RangeError("Removing non-flat range");return n.replaceChild(s,a.copy(Zb(a.content,e-l-1,t-l-1)))}function Wb(n,e,t,s){let{index:l,offset:a}=n.findIndex(e),c=n.maybeChild(l);if(a==e||c.isText)return n.cut(0,e).append(t).append(n.cut(e));let d=Wb(c.content,e-a-1,t);return d&&n.replaceChild(l,c.copy(d))}function _k(n,e,t){if(t.openStart>n.depth)throw new xc("Inserted content deeper than insertion position");if(n.depth-t.openStart!=e.depth-t.openEnd)throw new xc("Inconsistent open depths");return e1(n,e,t,0)}function e1(n,e,t,s){let l=n.index(s),a=n.node(s);if(l==e.index(s)&&s<n.depth-t.openStart){let c=e1(n,e,t,s+1);return a.copy(a.content.replaceChild(l,c))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&n.depth==s&&e.depth==s){let c=n.parent,d=c.content;return Rs(c,d.cut(0,n.parentOffset).append(t.content).append(d.cut(e.parentOffset)))}else{let{start:c,end:d}=Hk(t,n);return Rs(a,n1(n,c,d,e,s))}else return Rs(a,yc(n,e,s))}function t1(n,e){if(!e.type.compatibleContent(n.type))throw new xc("Cannot join "+e.type.name+" onto "+n.type.name)}function wh(n,e,t){let s=n.node(t);return t1(s,e.node(t)),s}function Os(n,e){let t=e.length-1;t>=0&&n.isText&&n.sameMarkup(e[t])?e[t]=n.withText(e[t].text+n.text):e.push(n)}function aa(n,e,t,s){let l=(e||n).node(t),a=0,c=e?e.index(t):l.childCount;n&&(a=n.index(t),n.depth>t?a++:n.textOffset&&(Os(n.nodeAfter,s),a++));for(let d=a;d<c;d++)Os(l.child(d),s);e&&e.depth==t&&e.textOffset&&Os(e.nodeBefore,s)}function Rs(n,e){return n.type.checkContent(e),n.copy(e)}function n1(n,e,t,s,l){let a=n.depth>l&&wh(n,e,l+1),c=s.depth>l&&wh(t,s,l+1),d=[];return aa(null,n,l,d),a&&c&&e.index(l)==t.index(l)?(t1(a,c),Os(Rs(a,n1(n,e,t,s,l+1)),d)):(a&&Os(Rs(a,yc(n,e,l+1)),d),aa(e,t,l,d),c&&Os(Rs(c,yc(t,s,l+1)),d)),aa(s,null,l,d),new W(d)}function yc(n,e,t){let s=[];if(aa(null,n,t,s),n.depth>t){let l=wh(n,e,t+1);Os(Rs(l,yc(n,e,t+1)),s)}return aa(e,null,t,s),new W(s)}function Hk(n,e){let t=e.depth-n.openStart,l=e.node(t).copy(n.content);for(let a=t-1;a>=0;a--)l=e.node(a).copy(W.from(l));return{start:l.resolveNoCache(n.openStart+t),end:l.resolveNoCache(l.content.size-n.openEnd-t)}}class xa{constructor(e,t,s){this.pos=e,this.path=t,this.parentOffset=s,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let s=this.pos-this.path[this.path.length-1],l=e.child(t);return s?e.child(t).cut(s):l}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let s=this.path[t*3],l=t==0?0:this.path[t*3-1]+1;for(let a=0;a<e;a++)l+=s.child(a).nodeSize;return l}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return Pe.none;if(this.textOffset)return e.child(t).marks;let s=e.maybeChild(t-1),l=e.maybeChild(t);if(!s){let d=s;s=l,l=d}let a=s.marks;for(var c=0;c<a.length;c++)a[c].type.spec.inclusive===!1&&(!l||!a[c].isInSet(l.marks))&&(a=a[c--].removeFromSet(a));return a}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let s=t.marks,l=e.parent.maybeChild(e.index());for(var a=0;a<s.length;a++)s[a].type.spec.inclusive===!1&&(!l||!s[a].isInSet(l.marks))&&(s=s[a--].removeFromSet(s));return s}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let s=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);s>=0;s--)if(e.pos<=this.end(s)&&(!t||t(this.node(s))))return new bc(this,e,s);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let s=[],l=0,a=t;for(let c=e;;){let{index:d,offset:h}=c.content.findIndex(a),p=a-h;if(s.push(c,d,l+h),!p||(c=c.child(d),c.isText))break;a=p-1,l+=h+1}return new xa(t,s,a)}static resolveCached(e,t){let s=ry.get(e);if(s)for(let a=0;a<s.elts.length;a++){let c=s.elts[a];if(c.pos==t)return c}else ry.set(e,s=new Uk);let l=s.elts[s.i]=xa.resolve(e,t);return s.i=(s.i+1)%Pk,l}}class Uk{constructor(){this.elts=[],this.i=0}}const Pk=12,ry=new WeakMap;class bc{constructor(e,t,s){this.$from=e,this.$to=t,this.depth=s}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const Ik=Object.create(null);let Yr=class kh{constructor(e,t,s,l=Pe.none){this.type=e,this.attrs=t,this.marks=l,this.content=s||W.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,s,l=0){this.content.nodesBetween(e,t,s,l,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,s,l){return this.content.textBetween(e,t,s,l)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,s){return this.type==e&&gc(this.attrs,t||e.defaultAttrs||Ik)&&Pe.sameSet(this.marks,s||Pe.none)}copy(e=null){return e==this.content?this:new kh(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new kh(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,s=!1){if(e==t)return le.empty;let l=this.resolve(e),a=this.resolve(t),c=s?0:l.sharedDepth(t),d=l.start(c),p=l.node(c).content.cut(l.pos-d,a.pos-d);return new le(p,l.depth-c,a.depth-c)}replace(e,t,s){return _k(this.resolve(e),this.resolve(t),s)}nodeAt(e){for(let t=this;;){let{index:s,offset:l}=t.content.findIndex(e);if(t=t.maybeChild(s),!t)return null;if(l==e||t.isText)return t;e-=l+1}}childAfter(e){let{index:t,offset:s}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:s}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:s}=this.content.findIndex(e);if(s<e)return{node:this.content.child(t),index:t,offset:s};let l=this.content.child(t-1);return{node:l,index:t-1,offset:s-l.nodeSize}}resolve(e){return xa.resolveCached(this,e)}resolveNoCache(e){return xa.resolve(this,e)}rangeHasMark(e,t,s){let l=!1;return t>e&&this.nodesBetween(e,t,a=>(s.isInSet(a.marks)&&(l=!0),!l)),l}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),r1(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,s=W.empty,l=0,a=s.childCount){let c=this.contentMatchAt(e).matchFragment(s,l,a),d=c&&c.matchFragment(this.content,t);if(!d||!d.validEnd)return!1;for(let h=l;h<a;h++)if(!this.type.allowsMarks(s.child(h).marks))return!1;return!0}canReplaceWith(e,t,s,l){if(l&&!this.type.allowsMarks(l))return!1;let a=this.contentMatchAt(e).matchType(s),c=a&&a.matchFragment(this.content,t);return c?c.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Pe.none;for(let t=0;t<this.marks.length;t++){let s=this.marks[t];s.type.checkAttrs(s.attrs),e=s.addToSet(e)}if(!Pe.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let s;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");s=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,s)}let l=W.fromJSON(e,t.content),a=e.nodeType(t.type).create(t.attrs,l,s);return a.type.checkAttrs(a.attrs),a}};Yr.prototype.text=void 0;class vc extends Yr{constructor(e,t,s,l){if(super(e,t,null,l),!s)throw new RangeError("Empty text nodes are not allowed");this.text=s}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):r1(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new vc(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new vc(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function r1(n,e){for(let t=n.length-1;t>=0;t--)e=n[t].type.name+"("+e+")";return e}class Bs{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let s=new Vk(e,t);if(s.next==null)return Bs.empty;let l=s1(s);s.next&&s.err("Unexpected trailing text");let a=Jk(Kk(l));return Qk(a,s),a}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,s=e.childCount){let l=this;for(let a=t;l&&a<s;a++)l=l.matchType(e.child(a).type);return l}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let s=0;s<e.next.length;s++)if(this.next[t].type==e.next[s].type)return!0;return!1}fillBefore(e,t=!1,s=0){let l=[this];function a(c,d){let h=c.matchFragment(e,s);if(h&&(!t||h.validEnd))return W.from(d.map(p=>p.createAndFill()));for(let p=0;p<c.next.length;p++){let{type:g,next:y}=c.next[p];if(!(g.isText||g.hasRequiredAttrs())&&l.indexOf(y)==-1){l.push(y);let b=a(y,d.concat(g));if(b)return b}}return null}return a(this,[])}findWrapping(e){for(let s=0;s<this.wrapCache.length;s+=2)if(this.wrapCache[s]==e)return this.wrapCache[s+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),s=[{match:this,type:null,via:null}];for(;s.length;){let l=s.shift(),a=l.match;if(a.matchType(e)){let c=[];for(let d=l;d.type;d=d.via)c.push(d.type);return c.reverse()}for(let c=0;c<a.next.length;c++){let{type:d,next:h}=a.next[c];!d.isLeaf&&!d.hasRequiredAttrs()&&!(d.name in t)&&(!l.type||h.validEnd)&&(s.push({match:d.contentMatch,type:d,via:l}),t[d.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(s){e.push(s);for(let l=0;l<s.next.length;l++)e.indexOf(s.next[l].next)==-1&&t(s.next[l].next)}return t(this),e.map((s,l)=>{let a=l+(s.validEnd?"*":" ")+" ";for(let c=0;c<s.next.length;c++)a+=(c?", ":"")+s.next[c].type.name+"->"+e.indexOf(s.next[c].next);return a}).join(`
`)}}Bs.empty=new Bs(!0);class Vk{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function s1(n){let e=[];do e.push(qk(n));while(n.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function qk(n){let e=[];do e.push(Fk(n));while(n.next&&n.next!=")"&&n.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function Fk(n){let e=Yk(n);for(;;)if(n.eat("+"))e={type:"plus",expr:e};else if(n.eat("*"))e={type:"star",expr:e};else if(n.eat("?"))e={type:"opt",expr:e};else if(n.eat("{"))e=$k(n,e);else break;return e}function sy(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let e=Number(n.next);return n.pos++,e}function $k(n,e){let t=sy(n),s=t;return n.eat(",")&&(n.next!="}"?s=sy(n):s=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:t,max:s,expr:e}}function Gk(n,e){let t=n.nodeTypes,s=t[e];if(s)return[s];let l=[];for(let a in t){let c=t[a];c.isInGroup(e)&&l.push(c)}return l.length==0&&n.err("No node type or group '"+e+"' found"),l}function Yk(n){if(n.eat("(")){let e=s1(n);return n.eat(")")||n.err("Missing closing paren"),e}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let e=Gk(n,n.next).map(t=>(n.inline==null?n.inline=t.isInline:n.inline!=t.isInline&&n.err("Mixing inline and block content"),{type:"name",value:t}));return n.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function Kk(n){let e=[[]];return l(a(n,0),t()),e;function t(){return e.push([])-1}function s(c,d,h){let p={term:h,to:d};return e[c].push(p),p}function l(c,d){c.forEach(h=>h.to=d)}function a(c,d){if(c.type=="choice")return c.exprs.reduce((h,p)=>h.concat(a(p,d)),[]);if(c.type=="seq")for(let h=0;;h++){let p=a(c.exprs[h],d);if(h==c.exprs.length-1)return p;l(p,d=t())}else if(c.type=="star"){let h=t();return s(d,h),l(a(c.expr,h),h),[s(h)]}else if(c.type=="plus"){let h=t();return l(a(c.expr,d),h),l(a(c.expr,h),h),[s(h)]}else{if(c.type=="opt")return[s(d)].concat(a(c.expr,d));if(c.type=="range"){let h=d;for(let p=0;p<c.min;p++){let g=t();l(a(c.expr,h),g),h=g}if(c.max==-1)l(a(c.expr,h),h);else for(let p=c.min;p<c.max;p++){let g=t();s(h,g),l(a(c.expr,h),g),h=g}return[s(h)]}else{if(c.type=="name")return[s(d,void 0,c.value)];throw new Error("Unknown expr type")}}}}function i1(n,e){return e-n}function iy(n,e){let t=[];return s(e),t.sort(i1);function s(l){let a=n[l];if(a.length==1&&!a[0].term)return s(a[0].to);t.push(l);for(let c=0;c<a.length;c++){let{term:d,to:h}=a[c];!d&&t.indexOf(h)==-1&&s(h)}}}function Jk(n){let e=Object.create(null);return t(iy(n,0));function t(s){let l=[];s.forEach(c=>{n[c].forEach(({term:d,to:h})=>{if(!d)return;let p;for(let g=0;g<l.length;g++)l[g][0]==d&&(p=l[g][1]);iy(n,h).forEach(g=>{p||l.push([d,p=[]]),p.indexOf(g)==-1&&p.push(g)})})});let a=e[s.join(",")]=new Bs(s.indexOf(n.length-1)>-1);for(let c=0;c<l.length;c++){let d=l[c][1].sort(i1);a.next.push({type:l[c][0],next:e[d.join(",")]||t(d)})}return a}}function Qk(n,e){for(let t=0,s=[n];t<s.length;t++){let l=s[t],a=!l.validEnd,c=[];for(let d=0;d<l.next.length;d++){let{type:h,next:p}=l.next[d];c.push(h.name),a&&!(h.isText||h.hasRequiredAttrs())&&(a=!1),s.indexOf(p)==-1&&s.push(p)}a&&e.err("Only non-generatable nodes ("+c.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function l1(n){let e=Object.create(null);for(let t in n){let s=n[t];if(!s.hasDefault)return null;e[t]=s.default}return e}function a1(n,e){let t=Object.create(null);for(let s in n){let l=e&&e[s];if(l===void 0){let a=n[s];if(a.hasDefault)l=a.default;else throw new RangeError("No value supplied for attribute "+s)}t[s]=l}return t}function o1(n,e,t,s){for(let l in e)if(!(l in n))throw new RangeError(`Unsupported attribute ${l} for ${t} of type ${l}`);for(let l in n){let a=n[l];a.validate&&a.validate(e[l])}}function c1(n,e){let t=Object.create(null);if(e)for(let s in e)t[s]=new Zk(n,s,e[s]);return t}let ly=class u1{constructor(e,t,s){this.name=e,this.schema=t,this.spec=s,this.markSet=null,this.groups=s.group?s.group.split(" "):[],this.attrs=c1(e,s.attrs),this.defaultAttrs=l1(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(s.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Bs.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:a1(this.attrs,e)}create(e=null,t,s){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Yr(this,this.computeAttrs(e),W.from(t),Pe.setFrom(s))}createChecked(e=null,t,s){return t=W.from(t),this.checkContent(t),new Yr(this,this.computeAttrs(e),t,Pe.setFrom(s))}createAndFill(e=null,t,s){if(e=this.computeAttrs(e),t=W.from(t),t.size){let c=this.contentMatch.fillBefore(t);if(!c)return null;t=c.append(t)}let l=this.contentMatch.matchFragment(t),a=l&&l.fillBefore(W.empty,!0);return a?new Yr(this,e,t.append(a),Pe.setFrom(s)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let s=0;s<e.childCount;s++)if(!this.allowsMarks(e.child(s).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){o1(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let s=0;s<e.length;s++)this.allowsMarkType(e[s].type)?t&&t.push(e[s]):t||(t=e.slice(0,s));return t?t.length?t:Pe.none:e}static compile(e,t){let s=Object.create(null);e.forEach((a,c)=>s[a]=new u1(a,t,c));let l=t.spec.topNode||"doc";if(!s[l])throw new RangeError("Schema is missing its top node type ('"+l+"')");if(!s.text)throw new RangeError("Every schema needs a 'text' type");for(let a in s.text.attrs)throw new RangeError("The text node type should not have attributes");return s}};function Xk(n,e,t){let s=t.split("|");return l=>{let a=l===null?"null":typeof l;if(s.indexOf(a)<0)throw new RangeError(`Expected value of type ${s} for attribute ${e} on type ${n}, got ${a}`)}}class Zk{constructor(e,t,s){this.hasDefault=Object.prototype.hasOwnProperty.call(s,"default"),this.default=s.default,this.validate=typeof s.validate=="string"?Xk(e,t,s.validate):s.validate}get isRequired(){return!this.hasDefault}}class lu{constructor(e,t,s,l){this.name=e,this.rank=t,this.schema=s,this.spec=l,this.attrs=c1(e,l.attrs),this.excluded=null;let a=l1(this.attrs);this.instance=a?new Pe(this,a):null}create(e=null){return!e&&this.instance?this.instance:new Pe(this,a1(this.attrs,e))}static compile(e,t){let s=Object.create(null),l=0;return e.forEach((a,c)=>s[a]=new lu(a,l++,t,c)),s}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){o1(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class d1{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let l in e)t[l]=e[l];t.nodes=bt.from(e.nodes),t.marks=bt.from(e.marks||{}),this.nodes=ly.compile(this.spec.nodes,this),this.marks=lu.compile(this.spec.marks,this);let s=Object.create(null);for(let l in this.nodes){if(l in this.marks)throw new RangeError(l+" can not be both a node and a mark");let a=this.nodes[l],c=a.spec.content||"",d=a.spec.marks;if(a.contentMatch=s[c]||(s[c]=Bs.parse(c,this.nodes)),a.inlineContent=a.contentMatch.inlineContent,a.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!a.isInline||!a.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=a}a.markSet=d=="_"?null:d?ay(this,d.split(" ")):d==""||!a.inlineContent?[]:null}for(let l in this.marks){let a=this.marks[l],c=a.spec.excludes;a.excluded=c==null?[a]:c==""?[]:ay(this,c.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,s,l){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof ly){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,s,l)}text(e,t){let s=this.nodes.text;return new vc(s,s.defaultAttrs,e,Pe.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return Yr.fromJSON(this,e)}markFromJSON(e){return Pe.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function ay(n,e){let t=[];for(let s=0;s<e.length;s++){let l=e[s],a=n.marks[l],c=a;if(a)t.push(a);else for(let d in n.marks){let h=n.marks[d];(l=="_"||h.spec.group&&h.spec.group.split(" ").indexOf(l)>-1)&&t.push(c=h)}if(!c)throw new SyntaxError("Unknown mark type: '"+e[s]+"'")}return t}function Wk(n){return n.tag!=null}function ej(n){return n.style!=null}class Kr{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let s=this.matchedStyles=[];t.forEach(l=>{if(Wk(l))this.tags.push(l);else if(ej(l)){let a=/[^=]*/.exec(l.style)[0];s.indexOf(a)<0&&s.push(a),this.styles.push(l)}}),this.normalizeLists=!this.tags.some(l=>{if(!/^(ul|ol)\b/.test(l.tag)||!l.node)return!1;let a=e.nodes[l.node];return a.contentMatch.matchType(a)})}parse(e,t={}){let s=new cy(this,t,!1);return s.addAll(e,Pe.none,t.from,t.to),s.finish()}parseSlice(e,t={}){let s=new cy(this,t,!0);return s.addAll(e,Pe.none,t.from,t.to),le.maxOpen(s.finish())}matchTag(e,t,s){for(let l=s?this.tags.indexOf(s)+1:0;l<this.tags.length;l++){let a=this.tags[l];if(rj(e,a.tag)&&(a.namespace===void 0||e.namespaceURI==a.namespace)&&(!a.context||t.matchesContext(a.context))){if(a.getAttrs){let c=a.getAttrs(e);if(c===!1)continue;a.attrs=c||void 0}return a}}}matchStyle(e,t,s,l){for(let a=l?this.styles.indexOf(l)+1:0;a<this.styles.length;a++){let c=this.styles[a],d=c.style;if(!(d.indexOf(e)!=0||c.context&&!s.matchesContext(c.context)||d.length>e.length&&(d.charCodeAt(e.length)!=61||d.slice(e.length+1)!=t))){if(c.getAttrs){let h=c.getAttrs(t);if(h===!1)continue;c.attrs=h||void 0}return c}}}static schemaRules(e){let t=[];function s(l){let a=l.priority==null?50:l.priority,c=0;for(;c<t.length;c++){let d=t[c];if((d.priority==null?50:d.priority)<a)break}t.splice(c,0,l)}for(let l in e.marks){let a=e.marks[l].spec.parseDOM;a&&a.forEach(c=>{s(c=uy(c)),c.mark||c.ignore||c.clearMark||(c.mark=l)})}for(let l in e.nodes){let a=e.nodes[l].spec.parseDOM;a&&a.forEach(c=>{s(c=uy(c)),c.node||c.ignore||c.mark||(c.node=l)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Kr(e,Kr.schemaRules(e)))}}const f1={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},tj={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},h1={ol:!0,ul:!0},ya=1,jh=2,cc=4;function oy(n,e,t){return e!=null?(e?ya:0)|(e==="full"?jh:0):n&&n.whitespace=="pre"?ya|jh:t&-5}class Zo{constructor(e,t,s,l,a,c){this.type=e,this.attrs=t,this.marks=s,this.solid=l,this.options=c,this.content=[],this.activeMarks=Pe.none,this.match=a||(c&cc?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(W.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let s=this.type.contentMatch,l;return(l=s.findWrapping(e.type))?(this.match=s,l):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&ya)){let s=this.content[this.content.length-1],l;if(s&&s.isText&&(l=/[ \t\r\n\u000c]+$/.exec(s.text))){let a=s;s.text.length==l[0].length?this.content.pop():this.content[this.content.length-1]=a.withText(a.text.slice(0,a.text.length-l[0].length))}}let t=W.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(W.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!f1.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class cy{constructor(e,t,s){this.parser=e,this.options=t,this.isOpen=s,this.open=0,this.localPreserveWS=!1;let l=t.topNode,a,c=oy(null,t.preserveWhitespace,0)|(s?cc:0);l?a=new Zo(l.type,l.attrs,Pe.none,!0,t.topMatch||l.type.contentMatch,c):s?a=new Zo(null,null,Pe.none,!0,null,c):a=new Zo(e.schema.topNodeType,null,Pe.none,!0,null,c),this.nodes=[a],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){e.nodeType==3?this.addTextNode(e,t):e.nodeType==1&&this.addElement(e,t)}addTextNode(e,t){let s=e.nodeValue,l=this.top,a=l.options&jh?"full":this.localPreserveWS||(l.options&ya)>0;if(a==="full"||l.inlineContext(e)||/[^ \t\r\n\u000c]/.test(s)){if(a)a!=="full"?s=s.replace(/\r?\n|\r/g," "):s=s.replace(/\r\n?/g,`
`);else if(s=s.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(s)&&this.open==this.nodes.length-1){let c=l.content[l.content.length-1],d=e.previousSibling;(!c||d&&d.nodeName=="BR"||c.isText&&/[ \t\r\n\u000c]$/.test(c.text))&&(s=s.slice(1))}s&&this.insertNode(this.parser.schema.text(s),t,!/\S/.test(s)),this.findInText(e)}else this.findInside(e)}addElement(e,t,s){let l=this.localPreserveWS,a=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let c=e.nodeName.toLowerCase(),d;h1.hasOwnProperty(c)&&this.parser.normalizeLists&&nj(e);let h=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(d=this.parser.matchTag(e,this,s));e:if(h?h.ignore:tj.hasOwnProperty(c))this.findInside(e),this.ignoreFallback(e,t);else if(!h||h.skip||h.closeParent){h&&h.closeParent?this.open=Math.max(0,this.open-1):h&&h.skip.nodeType&&(e=h.skip);let p,g=this.needsBlock;if(f1.hasOwnProperty(c))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),p=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let y=h&&h.skip?t:this.readStyles(e,t);y&&this.addAll(e,y),p&&this.sync(a),this.needsBlock=g}else{let p=this.readStyles(e,t);p&&this.addElementByRule(e,h,p,h.consuming===!1?d:void 0)}this.localPreserveWS=l}leafFallback(e,t){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),t)}ignoreFallback(e,t){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),t,!0)}readStyles(e,t){let s=e.style;if(s&&s.length)for(let l=0;l<this.parser.matchedStyles.length;l++){let a=this.parser.matchedStyles[l],c=s.getPropertyValue(a);if(c)for(let d=void 0;;){let h=this.parser.matchStyle(a,c,this,d);if(!h)break;if(h.ignore)return null;if(h.clearMark?t=t.filter(p=>!h.clearMark(p)):t=t.concat(this.parser.schema.marks[h.mark].create(h.attrs)),h.consuming===!1)d=h;else break}}return t}addElementByRule(e,t,s,l){let a,c;if(t.node)if(c=this.parser.schema.nodes[t.node],c.isLeaf)this.insertNode(c.create(t.attrs),s,e.nodeName=="BR")||this.leafFallback(e,s);else{let h=this.enter(c,t.attrs||null,s,t.preserveWhitespace);h&&(a=!0,s=h)}else{let h=this.parser.schema.marks[t.mark];s=s.concat(h.create(t.attrs))}let d=this.top;if(c&&c.isLeaf)this.findInside(e);else if(l)this.addElement(e,s,l);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(h=>this.insertNode(h,s,!1));else{let h=e;typeof t.contentElement=="string"?h=e.querySelector(t.contentElement):typeof t.contentElement=="function"?h=t.contentElement(e):t.contentElement&&(h=t.contentElement),this.findAround(e,h,!0),this.addAll(h,s),this.findAround(e,h,!1)}a&&this.sync(d)&&this.open--}addAll(e,t,s,l){let a=s||0;for(let c=s?e.childNodes[s]:e.firstChild,d=l==null?null:e.childNodes[l];c!=d;c=c.nextSibling,++a)this.findAtPoint(e,a),this.addDOM(c,t);this.findAtPoint(e,a)}findPlace(e,t,s){let l,a;for(let c=this.open,d=0;c>=0;c--){let h=this.nodes[c],p=h.findWrapping(e);if(p&&(!l||l.length>p.length+d)&&(l=p,a=h,!p.length))break;if(h.solid){if(s)break;d+=2}}if(!l)return null;this.sync(a);for(let c=0;c<l.length;c++)t=this.enterInner(l[c],null,t,!1);return t}insertNode(e,t,s){if(e.isInline&&this.needsBlock&&!this.top.type){let a=this.textblockFromContext();a&&(t=this.enterInner(a,null,t))}let l=this.findPlace(e,t,s);if(l){this.closeExtra();let a=this.top;a.match&&(a.match=a.match.matchType(e.type));let c=Pe.none;for(let d of l.concat(e.marks))(a.type?a.type.allowsMarkType(d.type):dy(d.type,e.type))&&(c=d.addToSet(c));return a.content.push(e.mark(c)),!0}return!1}enter(e,t,s,l){let a=this.findPlace(e.create(t),s,!1);return a&&(a=this.enterInner(e,t,s,!0,l)),a}enterInner(e,t,s,l=!1,a){this.closeExtra();let c=this.top;c.match=c.match&&c.match.matchType(e);let d=oy(e,a,c.options);c.options&cc&&c.content.length==0&&(d|=cc);let h=Pe.none;return s=s.filter(p=>(c.type?c.type.allowsMarkType(p.type):dy(p.type,e))?(h=p.addToSet(h),!1):!0),this.nodes.push(new Zo(e,t,h,l,null,d)),this.open++,s}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=ya)}return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let s=this.nodes[t].content;for(let l=s.length-1;l>=0;l--)e+=s[l].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let s=0;s<this.find.length;s++)this.find[s].node==e&&this.find[s].offset==t&&(this.find[s].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,s){if(e!=t&&this.find)for(let l=0;l<this.find.length;l++)this.find[l].pos==null&&e.nodeType==1&&e.contains(this.find[l].node)&&t.compareDocumentPosition(this.find[l].node)&(s?2:4)&&(this.find[l].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),s=this.options.context,l=!this.isOpen&&(!s||s.parent.type==this.nodes[0].type),a=-(s?s.depth+1:0)+(l?0:1),c=(d,h)=>{for(;d>=0;d--){let p=t[d];if(p==""){if(d==t.length-1||d==0)continue;for(;h>=a;h--)if(c(d-1,h))return!0;return!1}else{let g=h>0||h==0&&l?this.nodes[h].type:s&&h>=a?s.node(h-a).type:null;if(!g||g.name!=p&&!g.isInGroup(p))return!1;h--}}return!0};return c(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let s=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(s&&s.isTextblock&&s.defaultAttrs)return s}for(let t in this.parser.schema.nodes){let s=this.parser.schema.nodes[t];if(s.isTextblock&&s.defaultAttrs)return s}}}function nj(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let s=e.nodeType==1?e.nodeName.toLowerCase():null;s&&h1.hasOwnProperty(s)&&t?(t.appendChild(e),e=t):s=="li"?t=e:s&&(t=null)}}function rj(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function uy(n){let e={};for(let t in n)e[t]=n[t];return e}function dy(n,e){let t=e.schema.nodes;for(let s in t){let l=t[s];if(!l.allowsMarkType(n))continue;let a=[],c=d=>{a.push(d);for(let h=0;h<d.edgeCount;h++){let{type:p,next:g}=d.edge(h);if(p==e||a.indexOf(g)<0&&c(g))return!0}};if(c(l.contentMatch))return!0}}class Is{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},s){s||(s=$f(t).createDocumentFragment());let l=s,a=[];return e.forEach(c=>{if(a.length||c.marks.length){let d=0,h=0;for(;d<a.length&&h<c.marks.length;){let p=c.marks[h];if(!this.marks[p.type.name]){h++;continue}if(!p.eq(a[d][0])||p.type.spec.spanning===!1)break;d++,h++}for(;d<a.length;)l=a.pop()[1];for(;h<c.marks.length;){let p=c.marks[h++],g=this.serializeMark(p,c.isInline,t);g&&(a.push([p,l]),l.appendChild(g.dom),l=g.contentDOM||g.dom)}}l.appendChild(this.serializeNodeInner(c,t))}),s}serializeNodeInner(e,t){let{dom:s,contentDOM:l}=uc($f(t),this.nodes[e.type.name](e),null,e.attrs);if(l){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,l)}return s}serializeNode(e,t={}){let s=this.serializeNodeInner(e,t);for(let l=e.marks.length-1;l>=0;l--){let a=this.serializeMark(e.marks[l],e.isInline,t);a&&((a.contentDOM||a.dom).appendChild(s),s=a.dom)}return s}serializeMark(e,t,s={}){let l=this.marks[e.type.name];return l&&uc($f(s),l(e,t),null,e.attrs)}static renderSpec(e,t,s=null,l){return uc(e,t,s,l)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Is(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=fy(e.nodes);return t.text||(t.text=s=>s.text),t}static marksFromSchema(e){return fy(e.marks)}}function fy(n){let e={};for(let t in n){let s=n[t].spec.toDOM;s&&(e[t]=s)}return e}function $f(n){return n.document||window.document}const hy=new WeakMap;function sj(n){let e=hy.get(n);return e===void 0&&hy.set(n,e=ij(n)),e}function ij(n){let e=null;function t(s){if(s&&typeof s=="object")if(Array.isArray(s))if(typeof s[0]=="string")e||(e=[]),e.push(s);else for(let l=0;l<s.length;l++)t(s[l]);else for(let l in s)t(s[l])}return t(n),e}function uc(n,e,t,s){if(typeof e=="string")return{dom:n.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let l=e[0],a;if(typeof l!="string")throw new RangeError("Invalid array passed to renderSpec");if(s&&(a=sj(s))&&a.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let c=l.indexOf(" ");c>0&&(t=l.slice(0,c),l=l.slice(c+1));let d,h=t?n.createElementNS(t,l):n.createElement(l),p=e[1],g=1;if(p&&typeof p=="object"&&p.nodeType==null&&!Array.isArray(p)){g=2;for(let y in p)if(p[y]!=null){let b=y.indexOf(" ");b>0?h.setAttributeNS(y.slice(0,b),y.slice(b+1),p[y]):h.setAttribute(y,p[y])}}for(let y=g;y<e.length;y++){let b=e[y];if(b===0){if(y<e.length-1||y>g)throw new RangeError("Content hole must be the only child of its parent node");return{dom:h,contentDOM:h}}else{let{dom:S,contentDOM:v}=uc(n,b,t,s);if(h.appendChild(S),v){if(d)throw new RangeError("Multiple content holes");d=v}}}return{dom:h,contentDOM:d}}const p1=65535,m1=Math.pow(2,16);function lj(n,e){return n+e*m1}function py(n){return n&p1}function aj(n){return(n-(n&p1))/m1}const g1=1,x1=2,dc=4,y1=8;class Ch{constructor(e,t,s){this.pos=e,this.delInfo=t,this.recover=s}get deleted(){return(this.delInfo&y1)>0}get deletedBefore(){return(this.delInfo&(g1|dc))>0}get deletedAfter(){return(this.delInfo&(x1|dc))>0}get deletedAcross(){return(this.delInfo&dc)>0}}class en{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&en.empty)return en.empty}recover(e){let t=0,s=py(e);if(!this.inverted)for(let l=0;l<s;l++)t+=this.ranges[l*3+2]-this.ranges[l*3+1];return this.ranges[s*3]+t+aj(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,s){let l=0,a=this.inverted?2:1,c=this.inverted?1:2;for(let d=0;d<this.ranges.length;d+=3){let h=this.ranges[d]-(this.inverted?l:0);if(h>e)break;let p=this.ranges[d+a],g=this.ranges[d+c],y=h+p;if(e<=y){let b=p?e==h?-1:e==y?1:t:t,S=h+l+(b<0?0:g);if(s)return S;let v=e==(t<0?h:y)?null:lj(d/3,e-h),w=e==h?x1:e==y?g1:dc;return(t<0?e!=h:e!=y)&&(w|=y1),new Ch(S,w,v)}l+=g-p}return s?e+l:new Ch(e+l,0,null)}touches(e,t){let s=0,l=py(t),a=this.inverted?2:1,c=this.inverted?1:2;for(let d=0;d<this.ranges.length;d+=3){let h=this.ranges[d]-(this.inverted?s:0);if(h>e)break;let p=this.ranges[d+a],g=h+p;if(e<=g&&d==l*3)return!0;s+=this.ranges[d+c]-p}return!1}forEach(e){let t=this.inverted?2:1,s=this.inverted?1:2;for(let l=0,a=0;l<this.ranges.length;l+=3){let c=this.ranges[l],d=c-(this.inverted?a:0),h=c+(this.inverted?0:a),p=this.ranges[l+t],g=this.ranges[l+s];e(d,d+p,h,h+g),a+=g-p}}invert(){return new en(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?en.empty:new en(e<0?[0,-e,0]:[0,0,e])}}en.empty=new en([]);class ba{constructor(e,t,s=0,l=e?e.length:0){this.mirror=t,this.from=s,this.to=l,this._maps=e||[],this.ownData=!(e||t)}get maps(){return this._maps}slice(e=0,t=this.maps.length){return new ba(this._maps,this.mirror,e,t)}appendMap(e,t){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),t!=null&&this.setMirror(this._maps.length-1,t)}appendMapping(e){for(let t=0,s=this._maps.length;t<e._maps.length;t++){let l=e.getMirror(t);this.appendMap(e._maps[t],l!=null&&l<t?s+l:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,s=this._maps.length+e._maps.length;t>=0;t--){let l=e.getMirror(t);this.appendMap(e._maps[t].invert(),l!=null&&l>t?s-l-1:void 0)}}invert(){let e=new ba;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let s=this.from;s<this.to;s++)e=this._maps[s].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,s){let l=0;for(let a=this.from;a<this.to;a++){let c=this._maps[a],d=c.mapResult(e,t);if(d.recover!=null){let h=this.getMirror(a);if(h!=null&&h>a&&h<this.to){a=h,e=this._maps[h].recover(d.recover);continue}}l|=d.delInfo,e=d.pos}return s?e:new Ch(e,l,null)}}const Gf=Object.create(null);class Tt{getMap(){return en.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let s=Gf[t.stepType];if(!s)throw new RangeError(`No step type ${t.stepType} defined`);return s.fromJSON(e,t)}static jsonID(e,t){if(e in Gf)throw new RangeError("Duplicate use of step JSON ID "+e);return Gf[e]=t,t.prototype.jsonID=e,t}}class et{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new et(e,null)}static fail(e){return new et(null,e)}static fromReplace(e,t,s,l){try{return et.ok(e.replace(t,s,l))}catch(a){if(a instanceof xc)return et.fail(a.message);throw a}}}function dp(n,e,t){let s=[];for(let l=0;l<n.childCount;l++){let a=n.child(l);a.content.size&&(a=a.copy(dp(a.content,e,a))),a.isInline&&(a=e(a,t,l)),s.push(a)}return W.fromArray(s)}class Fr extends Tt{constructor(e,t,s){super(),this.from=e,this.to=t,this.mark=s}apply(e){let t=e.slice(this.from,this.to),s=e.resolve(this.from),l=s.node(s.sharedDepth(this.to)),a=new le(dp(t.content,(c,d)=>!c.isAtom||!d.type.allowsMarkType(this.mark.type)?c:c.mark(this.mark.addToSet(c.marks)),l),t.openStart,t.openEnd);return et.fromReplace(e,this.from,this.to,a)}invert(){return new Bn(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),s=e.mapResult(this.to,-1);return t.deleted&&s.deleted||t.pos>=s.pos?null:new Fr(t.pos,s.pos,this.mark)}merge(e){return e instanceof Fr&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Fr(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Fr(t.from,t.to,e.markFromJSON(t.mark))}}Tt.jsonID("addMark",Fr);class Bn extends Tt{constructor(e,t,s){super(),this.from=e,this.to=t,this.mark=s}apply(e){let t=e.slice(this.from,this.to),s=new le(dp(t.content,l=>l.mark(this.mark.removeFromSet(l.marks)),e),t.openStart,t.openEnd);return et.fromReplace(e,this.from,this.to,s)}invert(){return new Fr(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),s=e.mapResult(this.to,-1);return t.deleted&&s.deleted||t.pos>=s.pos?null:new Bn(t.pos,s.pos,this.mark)}merge(e){return e instanceof Bn&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Bn(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Bn(t.from,t.to,e.markFromJSON(t.mark))}}Tt.jsonID("removeMark",Bn);class $r extends Tt{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return et.fail("No node at mark step's position");let s=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return et.fromReplace(e,this.pos,this.pos+1,new le(W.from(s),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let s=this.mark.addToSet(t.marks);if(s.length==t.marks.length){for(let l=0;l<t.marks.length;l++)if(!t.marks[l].isInSet(s))return new $r(this.pos,t.marks[l]);return new $r(this.pos,this.mark)}}return new _s(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new $r(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new $r(t.pos,e.markFromJSON(t.mark))}}Tt.jsonID("addNodeMark",$r);class _s extends Tt{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return et.fail("No node at mark step's position");let s=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return et.fromReplace(e,this.pos,this.pos+1,new le(W.from(s),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new $r(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new _s(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new _s(t.pos,e.markFromJSON(t.mark))}}Tt.jsonID("removeNodeMark",_s);class dt extends Tt{constructor(e,t,s,l=!1){super(),this.from=e,this.to=t,this.slice=s,this.structure=l}apply(e){return this.structure&&Eh(e,this.from,this.to)?et.fail("Structure replace would overwrite content"):et.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new en([this.from,this.to-this.from,this.slice.size])}invert(e){return new dt(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),s=e.mapResult(this.to,-1);return t.deletedAcross&&s.deletedAcross?null:new dt(t.pos,Math.max(t.pos,s.pos),this.slice,this.structure)}merge(e){if(!(e instanceof dt)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?le.empty:new le(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new dt(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?le.empty:new le(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new dt(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new dt(t.from,t.to,le.fromJSON(e,t.slice),!!t.structure)}}Tt.jsonID("replace",dt);class ft extends Tt{constructor(e,t,s,l,a,c,d=!1){super(),this.from=e,this.to=t,this.gapFrom=s,this.gapTo=l,this.slice=a,this.insert=c,this.structure=d}apply(e){if(this.structure&&(Eh(e,this.from,this.gapFrom)||Eh(e,this.gapTo,this.to)))return et.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return et.fail("Gap is not a flat range");let s=this.slice.insertAt(this.insert,t.content);return s?et.fromReplace(e,this.from,this.to,s):et.fail("Content does not fit in gap")}getMap(){return new en([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new ft(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),s=e.mapResult(this.to,-1),l=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),a=this.to==this.gapTo?s.pos:e.map(this.gapTo,1);return t.deletedAcross&&s.deletedAcross||l<t.pos||a>s.pos?null:new ft(t.pos,s.pos,l,a,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new ft(t.from,t.to,t.gapFrom,t.gapTo,le.fromJSON(e,t.slice),t.insert,!!t.structure)}}Tt.jsonID("replaceAround",ft);function Eh(n,e,t){let s=n.resolve(e),l=t-e,a=s.depth;for(;l>0&&a>0&&s.indexAfter(a)==s.node(a).childCount;)a--,l--;if(l>0){let c=s.node(a).maybeChild(s.indexAfter(a));for(;l>0;){if(!c||c.isLeaf)return!0;c=c.firstChild,l--}}return!1}function oj(n,e,t,s){let l=[],a=[],c,d;n.doc.nodesBetween(e,t,(h,p,g)=>{if(!h.isInline)return;let y=h.marks;if(!s.isInSet(y)&&g.type.allowsMarkType(s.type)){let b=Math.max(p,e),S=Math.min(p+h.nodeSize,t),v=s.addToSet(y);for(let w=0;w<y.length;w++)y[w].isInSet(v)||(c&&c.to==b&&c.mark.eq(y[w])?c.to=S:l.push(c=new Bn(b,S,y[w])));d&&d.to==b?d.to=S:a.push(d=new Fr(b,S,s))}}),l.forEach(h=>n.step(h)),a.forEach(h=>n.step(h))}function cj(n,e,t,s){let l=[],a=0;n.doc.nodesBetween(e,t,(c,d)=>{if(!c.isInline)return;a++;let h=null;if(s instanceof lu){let p=c.marks,g;for(;g=s.isInSet(p);)(h||(h=[])).push(g),p=g.removeFromSet(p)}else s?s.isInSet(c.marks)&&(h=[s]):h=c.marks;if(h&&h.length){let p=Math.min(d+c.nodeSize,t);for(let g=0;g<h.length;g++){let y=h[g],b;for(let S=0;S<l.length;S++){let v=l[S];v.step==a-1&&y.eq(l[S].style)&&(b=v)}b?(b.to=p,b.step=a):l.push({style:y,from:Math.max(d,e),to:p,step:a})}}}),l.forEach(c=>n.step(new Bn(c.from,c.to,c.style)))}function fp(n,e,t,s=t.contentMatch,l=!0){let a=n.doc.nodeAt(e),c=[],d=e+1;for(let h=0;h<a.childCount;h++){let p=a.child(h),g=d+p.nodeSize,y=s.matchType(p.type);if(!y)c.push(new dt(d,g,le.empty));else{s=y;for(let b=0;b<p.marks.length;b++)t.allowsMarkType(p.marks[b].type)||n.step(new Bn(d,g,p.marks[b]));if(l&&p.isText&&t.whitespace!="pre"){let b,S=/\r?\n|\r/g,v;for(;b=S.exec(p.text);)v||(v=new le(W.from(t.schema.text(" ",t.allowedMarks(p.marks))),0,0)),c.push(new dt(d+b.index,d+b.index+b[0].length,v))}}d=g}if(!s.validEnd){let h=s.fillBefore(W.empty,!0);n.replace(d,d,new le(h,0,0))}for(let h=c.length-1;h>=0;h--)n.step(c[h])}function uj(n,e,t){return(e==0||n.canReplace(e,n.childCount))&&(t==n.childCount||n.canReplace(0,t))}function Xi(n){let t=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let s=n.depth;;--s){let l=n.$from.node(s),a=n.$from.index(s),c=n.$to.indexAfter(s);if(s<n.depth&&l.canReplace(a,c,t))return s;if(s==0||l.type.spec.isolating||!uj(l,a,c))break}return null}function dj(n,e,t){let{$from:s,$to:l,depth:a}=e,c=s.before(a+1),d=l.after(a+1),h=c,p=d,g=W.empty,y=0;for(let v=a,w=!1;v>t;v--)w||s.index(v)>0?(w=!0,g=W.from(s.node(v).copy(g)),y++):h--;let b=W.empty,S=0;for(let v=a,w=!1;v>t;v--)w||l.after(v+1)<l.end(v)?(w=!0,b=W.from(l.node(v).copy(b)),S++):p++;n.step(new ft(h,p,c,d,new le(g.append(b),y,S),g.size-y,!0))}function hp(n,e,t=null,s=n){let l=fj(n,e),a=l&&hj(s,e);return a?l.map(my).concat({type:e,attrs:t}).concat(a.map(my)):null}function my(n){return{type:n,attrs:null}}function fj(n,e){let{parent:t,startIndex:s,endIndex:l}=n,a=t.contentMatchAt(s).findWrapping(e);if(!a)return null;let c=a.length?a[0]:e;return t.canReplaceWith(s,l,c)?a:null}function hj(n,e){let{parent:t,startIndex:s,endIndex:l}=n,a=t.child(s),c=e.contentMatch.findWrapping(a.type);if(!c)return null;let h=(c.length?c[c.length-1]:e).contentMatch;for(let p=s;h&&p<l;p++)h=h.matchType(t.child(p).type);return!h||!h.validEnd?null:c}function pj(n,e,t){let s=W.empty;for(let c=t.length-1;c>=0;c--){if(s.size){let d=t[c].type.contentMatch.matchFragment(s);if(!d||!d.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}s=W.from(t[c].type.create(t[c].attrs,s))}let l=e.start,a=e.end;n.step(new ft(l,a,l,a,new le(s,0,0),t.length,!0))}function mj(n,e,t,s,l){if(!s.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let a=n.steps.length;n.doc.nodesBetween(e,t,(c,d)=>{let h=typeof l=="function"?l(c):l;if(c.isTextblock&&!c.hasMarkup(s,h)&&gj(n.doc,n.mapping.slice(a).map(d),s)){let p=null;if(s.schema.linebreakReplacement){let S=s.whitespace=="pre",v=!!s.contentMatch.matchType(s.schema.linebreakReplacement);S&&!v?p=!1:!S&&v&&(p=!0)}p===!1&&v1(n,c,d,a),fp(n,n.mapping.slice(a).map(d,1),s,void 0,p===null);let g=n.mapping.slice(a),y=g.map(d,1),b=g.map(d+c.nodeSize,1);return n.step(new ft(y,b,y+1,b-1,new le(W.from(s.create(h,null,c.marks)),0,0),1,!0)),p===!0&&b1(n,c,d,a),!1}})}function b1(n,e,t,s){e.forEach((l,a)=>{if(l.isText){let c,d=/\r?\n|\r/g;for(;c=d.exec(l.text);){let h=n.mapping.slice(s).map(t+1+a+c.index);n.replaceWith(h,h+1,e.type.schema.linebreakReplacement.create())}}})}function v1(n,e,t,s){e.forEach((l,a)=>{if(l.type==l.type.schema.linebreakReplacement){let c=n.mapping.slice(s).map(t+1+a);n.replaceWith(c,c+1,e.type.schema.text(`
`))}})}function gj(n,e,t){let s=n.resolve(e),l=s.index();return s.parent.canReplaceWith(l,l+1,t)}function xj(n,e,t,s,l){let a=n.doc.nodeAt(e);if(!a)throw new RangeError("No node at given position");t||(t=a.type);let c=t.create(s,null,l||a.marks);if(a.isLeaf)return n.replaceWith(e,e+a.nodeSize,c);if(!t.validContent(a.content))throw new RangeError("Invalid content for node type "+t.name);n.step(new ft(e,e+a.nodeSize,e+1,e+a.nodeSize-1,new le(W.from(c),0,0),1,!0))}function ar(n,e,t=1,s){let l=n.resolve(e),a=l.depth-t,c=s&&s[s.length-1]||l.parent;if(a<0||l.parent.type.spec.isolating||!l.parent.canReplace(l.index(),l.parent.childCount)||!c.type.validContent(l.parent.content.cutByIndex(l.index(),l.parent.childCount)))return!1;for(let p=l.depth-1,g=t-2;p>a;p--,g--){let y=l.node(p),b=l.index(p);if(y.type.spec.isolating)return!1;let S=y.content.cutByIndex(b,y.childCount),v=s&&s[g+1];v&&(S=S.replaceChild(0,v.type.create(v.attrs)));let w=s&&s[g]||y;if(!y.canReplace(b+1,y.childCount)||!w.type.validContent(S))return!1}let d=l.indexAfter(a),h=s&&s[0];return l.node(a).canReplaceWith(d,d,h?h.type:l.node(a+1).type)}function yj(n,e,t=1,s){let l=n.doc.resolve(e),a=W.empty,c=W.empty;for(let d=l.depth,h=l.depth-t,p=t-1;d>h;d--,p--){a=W.from(l.node(d).copy(a));let g=s&&s[p];c=W.from(g?g.type.create(g.attrs,c):l.node(d).copy(c))}n.step(new dt(e,e,new le(a.append(c),t,t),!0))}function Wr(n,e){let t=n.resolve(e),s=t.index();return S1(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(s,s+1)}function bj(n,e){e.content.size||n.type.compatibleContent(e.type);let t=n.contentMatchAt(n.childCount),{linebreakReplacement:s}=n.type.schema;for(let l=0;l<e.childCount;l++){let a=e.child(l),c=a.type==s?n.type.schema.nodes.text:a.type;if(t=t.matchType(c),!t||!n.type.allowsMarks(a.marks))return!1}return t.validEnd}function S1(n,e){return!!(n&&e&&!n.isLeaf&&bj(n,e))}function au(n,e,t=-1){let s=n.resolve(e);for(let l=s.depth;;l--){let a,c,d=s.index(l);if(l==s.depth?(a=s.nodeBefore,c=s.nodeAfter):t>0?(a=s.node(l+1),d++,c=s.node(l).maybeChild(d)):(a=s.node(l).maybeChild(d-1),c=s.node(l+1)),a&&!a.isTextblock&&S1(a,c)&&s.node(l).canReplace(d,d+1))return e;if(l==0)break;e=t<0?s.before(l):s.after(l)}}function vj(n,e,t){let s=null,{linebreakReplacement:l}=n.doc.type.schema,a=n.doc.resolve(e-t),c=a.node().type;if(l&&c.inlineContent){let g=c.whitespace=="pre",y=!!c.contentMatch.matchType(l);g&&!y?s=!1:!g&&y&&(s=!0)}let d=n.steps.length;if(s===!1){let g=n.doc.resolve(e+t);v1(n,g.node(),g.before(),d)}c.inlineContent&&fp(n,e+t-1,c,a.node().contentMatchAt(a.index()),s==null);let h=n.mapping.slice(d),p=h.map(e-t);if(n.step(new dt(p,h.map(e+t,-1),le.empty,!0)),s===!0){let g=n.doc.resolve(p);b1(n,g.node(),g.before(),n.steps.length)}return n}function Sj(n,e,t){let s=n.resolve(e);if(s.parent.canReplaceWith(s.index(),s.index(),t))return e;if(s.parentOffset==0)for(let l=s.depth-1;l>=0;l--){let a=s.index(l);if(s.node(l).canReplaceWith(a,a,t))return s.before(l+1);if(a>0)return null}if(s.parentOffset==s.parent.content.size)for(let l=s.depth-1;l>=0;l--){let a=s.indexAfter(l);if(s.node(l).canReplaceWith(a,a,t))return s.after(l+1);if(a<s.node(l).childCount)return null}return null}function N1(n,e,t){let s=n.resolve(e);if(!t.content.size)return e;let l=t.content;for(let a=0;a<t.openStart;a++)l=l.firstChild.content;for(let a=1;a<=(t.openStart==0&&t.size?2:1);a++)for(let c=s.depth;c>=0;c--){let d=c==s.depth?0:s.pos<=(s.start(c+1)+s.end(c+1))/2?-1:1,h=s.index(c)+(d>0?1:0),p=s.node(c),g=!1;if(a==1)g=p.canReplace(h,h,l);else{let y=p.contentMatchAt(h).findWrapping(l.firstChild.type);g=y&&p.canReplaceWith(h,h,y[0])}if(g)return d==0?s.pos:d<0?s.before(c+1):s.after(c+1)}return null}function ou(n,e,t=e,s=le.empty){if(e==t&&!s.size)return null;let l=n.resolve(e),a=n.resolve(t);return w1(l,a,s)?new dt(e,t,s):new Nj(l,a,s).fit()}function w1(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}class Nj{constructor(e,t,s){this.$from=e,this.$to=t,this.unplaced=s,this.frontier=[],this.placed=W.empty;for(let l=0;l<=e.depth;l++){let a=e.node(l);this.frontier.push({type:a.type,match:a.contentMatchAt(e.indexAfter(l))})}for(let l=e.depth;l>0;l--)this.placed=W.from(e.node(l).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let p=this.findFittable();p?this.placeNodes(p):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,s=this.$from,l=this.close(e<0?this.$to:s.doc.resolve(e));if(!l)return null;let a=this.placed,c=s.depth,d=l.depth;for(;c&&d&&a.childCount==1;)a=a.firstChild.content,c--,d--;let h=new le(a,c,d);return e>-1?new ft(s.pos,e,this.$to.pos,this.$to.end(),h,t):h.size||s.pos!=this.$to.pos?new dt(s.pos,l.pos,h):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,s=0,l=this.unplaced.openEnd;s<e;s++){let a=t.firstChild;if(t.childCount>1&&(l=0),a.type.spec.isolating&&l<=s){e=s;break}t=a.content}for(let t=1;t<=2;t++)for(let s=t==1?e:this.unplaced.openStart;s>=0;s--){let l,a=null;s?(a=Yf(this.unplaced.content,s-1).firstChild,l=a.content):l=this.unplaced.content;let c=l.firstChild;for(let d=this.depth;d>=0;d--){let{type:h,match:p}=this.frontier[d],g,y=null;if(t==1&&(c?p.matchType(c.type)||(y=p.fillBefore(W.from(c),!1)):a&&h.compatibleContent(a.type)))return{sliceDepth:s,frontierDepth:d,parent:a,inject:y};if(t==2&&c&&(g=p.findWrapping(c.type)))return{sliceDepth:s,frontierDepth:d,parent:a,wrap:g};if(a&&p.matchType(a.type))break}}}openMore(){let{content:e,openStart:t,openEnd:s}=this.unplaced,l=Yf(e,t);return!l.childCount||l.firstChild.isLeaf?!1:(this.unplaced=new le(e,t+1,Math.max(s,l.size+t>=e.size-s?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:s}=this.unplaced,l=Yf(e,t);if(l.childCount<=1&&t>0){let a=e.size-t<=t+l.size;this.unplaced=new le(ra(e,t-1,1),t-1,a?t-1:s)}else this.unplaced=new le(ra(e,t,1),t,s)}placeNodes({sliceDepth:e,frontierDepth:t,parent:s,inject:l,wrap:a}){for(;this.depth>t;)this.closeFrontierNode();if(a)for(let w=0;w<a.length;w++)this.openFrontierNode(a[w]);let c=this.unplaced,d=s?s.content:c.content,h=c.openStart-e,p=0,g=[],{match:y,type:b}=this.frontier[t];if(l){for(let w=0;w<l.childCount;w++)g.push(l.child(w));y=y.matchFragment(l)}let S=d.size+e-(c.content.size-c.openEnd);for(;p<d.childCount;){let w=d.child(p),k=y.matchType(w.type);if(!k)break;p++,(p>1||h==0||w.content.size)&&(y=k,g.push(k1(w.mark(b.allowedMarks(w.marks)),p==1?h:0,p==d.childCount?S:-1)))}let v=p==d.childCount;v||(S=-1),this.placed=sa(this.placed,t,W.from(g)),this.frontier[t].match=y,v&&S<0&&s&&s.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let w=0,k=d;w<S;w++){let E=k.lastChild;this.frontier.push({type:E.type,match:E.contentMatchAt(E.childCount)}),k=E.content}this.unplaced=v?e==0?le.empty:new le(ra(c.content,e-1,1),e-1,S<0?c.openEnd:e-1):new le(ra(c.content,e,p),c.openStart,c.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!Kf(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:s}=this.$to,l=this.$to.after(s);for(;s>1&&l==this.$to.end(--s);)++l;return l}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:s,type:l}=this.frontier[t],a=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),c=Kf(e,t,l,s,a);if(c){for(let d=t-1;d>=0;d--){let{match:h,type:p}=this.frontier[d],g=Kf(e,d,p,h,!0);if(!g||g.childCount)continue e}return{depth:t,fit:c,move:a?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=sa(this.placed,t.depth,t.fit)),e=t.move;for(let s=t.depth+1;s<=e.depth;s++){let l=e.node(s),a=l.type.contentMatch.fillBefore(l.content,!0,e.index(s));this.openFrontierNode(l.type,l.attrs,a)}return e}openFrontierNode(e,t=null,s){let l=this.frontier[this.depth];l.match=l.match.matchType(e),this.placed=sa(this.placed,this.depth,W.from(e.create(t,s))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(W.empty,!0);t.childCount&&(this.placed=sa(this.placed,this.frontier.length,t))}}function ra(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy(ra(n.firstChild.content,e-1,t)))}function sa(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy(sa(n.lastChild.content,e-1,t)))}function Yf(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function k1(n,e,t){if(e<=0)return n;let s=n.content;return e>1&&(s=s.replaceChild(0,k1(s.firstChild,e-1,s.childCount==1?t-1:0))),e>0&&(s=n.type.contentMatch.fillBefore(s).append(s),t<=0&&(s=s.append(n.type.contentMatch.matchFragment(s).fillBefore(W.empty,!0)))),n.copy(s)}function Kf(n,e,t,s,l){let a=n.node(e),c=l?n.indexAfter(e):n.index(e);if(c==a.childCount&&!t.compatibleContent(a.type))return null;let d=s.fillBefore(a.content,!0,c);return d&&!wj(t,a.content,c)?d:null}function wj(n,e,t){for(let s=t;s<e.childCount;s++)if(!n.allowsMarks(e.child(s).marks))return!0;return!1}function kj(n){return n.spec.defining||n.spec.definingForContent}function jj(n,e,t,s){if(!s.size)return n.deleteRange(e,t);let l=n.doc.resolve(e),a=n.doc.resolve(t);if(w1(l,a,s))return n.step(new dt(e,t,s));let c=C1(l,n.doc.resolve(t));c[c.length-1]==0&&c.pop();let d=-(l.depth+1);c.unshift(d);for(let b=l.depth,S=l.pos-1;b>0;b--,S--){let v=l.node(b).type.spec;if(v.defining||v.definingAsContext||v.isolating)break;c.indexOf(b)>-1?d=b:l.before(b)==S&&c.splice(1,0,-b)}let h=c.indexOf(d),p=[],g=s.openStart;for(let b=s.content,S=0;;S++){let v=b.firstChild;if(p.push(v),S==s.openStart)break;b=v.content}for(let b=g-1;b>=0;b--){let S=p[b],v=kj(S.type);if(v&&!S.sameMarkup(l.node(Math.abs(d)-1)))g=b;else if(v||!S.type.isTextblock)break}for(let b=s.openStart;b>=0;b--){let S=(b+g+1)%(s.openStart+1),v=p[S];if(v)for(let w=0;w<c.length;w++){let k=c[(w+h)%c.length],E=!0;k<0&&(E=!1,k=-k);let O=l.node(k-1),z=l.index(k-1);if(O.canReplaceWith(z,z,v.type,v.marks))return n.replace(l.before(k),E?a.after(k):t,new le(j1(s.content,0,s.openStart,S),S,s.openEnd))}}let y=n.steps.length;for(let b=c.length-1;b>=0&&(n.replace(e,t,s),!(n.steps.length>y));b--){let S=c[b];S<0||(e=l.before(S),t=a.after(S))}}function j1(n,e,t,s,l){if(e<t){let a=n.firstChild;n=n.replaceChild(0,a.copy(j1(a.content,e+1,t,s,a)))}if(e>s){let a=l.contentMatchAt(0),c=a.fillBefore(n).append(n);n=c.append(a.matchFragment(c).fillBefore(W.empty,!0))}return n}function Cj(n,e,t,s){if(!s.isInline&&e==t&&n.doc.resolve(e).parent.content.size){let l=Sj(n.doc,e,s.type);l!=null&&(e=t=l)}n.replaceRange(e,t,new le(W.from(s),0,0))}function Ej(n,e,t){let s=n.doc.resolve(e),l=n.doc.resolve(t),a=C1(s,l);for(let c=0;c<a.length;c++){let d=a[c],h=c==a.length-1;if(h&&d==0||s.node(d).type.contentMatch.validEnd)return n.delete(s.start(d),l.end(d));if(d>0&&(h||s.node(d-1).canReplace(s.index(d-1),l.indexAfter(d-1))))return n.delete(s.before(d),l.after(d))}for(let c=1;c<=s.depth&&c<=l.depth;c++)if(e-s.start(c)==s.depth-c&&t>s.end(c)&&l.end(c)-t!=l.depth-c&&s.start(c-1)==l.start(c-1)&&s.node(c-1).canReplace(s.index(c-1),l.index(c-1)))return n.delete(s.before(c),t);n.delete(e,t)}function C1(n,e){let t=[],s=Math.min(n.depth,e.depth);for(let l=s;l>=0;l--){let a=n.start(l);if(a<n.pos-(n.depth-l)||e.end(l)>e.pos+(e.depth-l)||n.node(l).type.spec.isolating||e.node(l).type.spec.isolating)break;(a==e.start(l)||l==n.depth&&l==e.depth&&n.parent.inlineContent&&e.parent.inlineContent&&l&&e.start(l-1)==a-1)&&t.push(l)}return t}class Hi extends Tt{constructor(e,t,s){super(),this.pos=e,this.attr=t,this.value=s}apply(e){let t=e.nodeAt(this.pos);if(!t)return et.fail("No node at attribute step's position");let s=Object.create(null);for(let a in t.attrs)s[a]=t.attrs[a];s[this.attr]=this.value;let l=t.type.create(s,null,t.marks);return et.fromReplace(e,this.pos,this.pos+1,new le(W.from(l),0,t.isLeaf?0:1))}getMap(){return en.empty}invert(e){return new Hi(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Hi(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Hi(t.pos,t.attr,t.value)}}Tt.jsonID("attr",Hi);class va extends Tt{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let l in e.attrs)t[l]=e.attrs[l];t[this.attr]=this.value;let s=e.type.create(t,e.content,e.marks);return et.ok(s)}getMap(){return en.empty}invert(e){return new va(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new va(t.attr,t.value)}}Tt.jsonID("docAttr",va);let Vi=class extends Error{};Vi=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};Vi.prototype=Object.create(Error.prototype);Vi.prototype.constructor=Vi;Vi.prototype.name="TransformError";class E1{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new ba}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new Vi(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,s=le.empty){let l=ou(this.doc,e,t,s);return l&&this.step(l),this}replaceWith(e,t,s){return this.replace(e,t,new le(W.from(s),0,0))}delete(e,t){return this.replace(e,t,le.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,s){return jj(this,e,t,s),this}replaceRangeWith(e,t,s){return Cj(this,e,t,s),this}deleteRange(e,t){return Ej(this,e,t),this}lift(e,t){return dj(this,e,t),this}join(e,t=1){return vj(this,e,t),this}wrap(e,t){return pj(this,e,t),this}setBlockType(e,t=e,s,l=null){return mj(this,e,t,s,l),this}setNodeMarkup(e,t,s=null,l){return xj(this,e,t,s,l),this}setNodeAttribute(e,t,s){return this.step(new Hi(e,t,s)),this}setDocAttribute(e,t){return this.step(new va(e,t)),this}addNodeMark(e,t){return this.step(new $r(e,t)),this}removeNodeMark(e,t){let s=this.doc.nodeAt(e);if(!s)throw new RangeError("No node at position "+e);if(t instanceof Pe)t.isInSet(s.marks)&&this.step(new _s(e,t));else{let l=s.marks,a,c=[];for(;a=t.isInSet(l);)c.push(new _s(e,a)),l=a.removeFromSet(l);for(let d=c.length-1;d>=0;d--)this.step(c[d])}return this}split(e,t=1,s){return yj(this,e,t,s),this}addMark(e,t,s){return oj(this,e,t,s),this}removeMark(e,t,s){return cj(this,e,t,s),this}clearIncompatible(e,t,s){return fp(this,e,t,s),this}}const Jf=Object.create(null);class Se{constructor(e,t,s){this.$anchor=e,this.$head=t,this.ranges=s||[new Aj(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=le.empty){let s=t.content.lastChild,l=null;for(let d=0;d<t.openEnd;d++)l=s,s=s.lastChild;let a=e.steps.length,c=this.ranges;for(let d=0;d<c.length;d++){let{$from:h,$to:p}=c[d],g=e.mapping.slice(a);e.replaceRange(g.map(h.pos),g.map(p.pos),d?le.empty:t),d==0&&yy(e,a,(s?s.isInline:l&&l.isTextblock)?-1:1)}}replaceWith(e,t){let s=e.steps.length,l=this.ranges;for(let a=0;a<l.length;a++){let{$from:c,$to:d}=l[a],h=e.mapping.slice(s),p=h.map(c.pos),g=h.map(d.pos);a?e.deleteRange(p,g):(e.replaceRangeWith(p,g,t),yy(e,s,t.isInline?-1:1))}}static findFrom(e,t,s=!1){let l=e.parent.inlineContent?new be(e):Ri(e.node(0),e.parent,e.pos,e.index(),t,s);if(l)return l;for(let a=e.depth-1;a>=0;a--){let c=t<0?Ri(e.node(0),e.node(a),e.before(a+1),e.index(a),t,s):Ri(e.node(0),e.node(a),e.after(a+1),e.index(a)+1,t,s);if(c)return c}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new tn(e.node(0))}static atStart(e){return Ri(e,e,0,0,1)||new tn(e)}static atEnd(e){return Ri(e,e,e.content.size,e.childCount,-1)||new tn(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let s=Jf[t.type];if(!s)throw new RangeError(`No selection type ${t.type} defined`);return s.fromJSON(e,t)}static jsonID(e,t){if(e in Jf)throw new RangeError("Duplicate use of selection JSON ID "+e);return Jf[e]=t,t.prototype.jsonID=e,t}getBookmark(){return be.between(this.$anchor,this.$head).getBookmark()}}Se.prototype.visible=!0;class Aj{constructor(e,t){this.$from=e,this.$to=t}}let gy=!1;function xy(n){!gy&&!n.parent.inlineContent&&(gy=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class be extends Se{constructor(e,t=e){xy(e),xy(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let s=e.resolve(t.map(this.head));if(!s.parent.inlineContent)return Se.near(s);let l=e.resolve(t.map(this.anchor));return new be(l.parent.inlineContent?l:s,s)}replace(e,t=le.empty){if(super.replace(e,t),t==le.empty){let s=this.$from.marksAcross(this.$to);s&&e.ensureMarks(s)}}eq(e){return e instanceof be&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new cu(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new be(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,s=t){let l=e.resolve(t);return new this(l,s==t?l:e.resolve(s))}static between(e,t,s){let l=e.pos-t.pos;if((!s||l)&&(s=l>=0?1:-1),!t.parent.inlineContent){let a=Se.findFrom(t,s,!0)||Se.findFrom(t,-s,!0);if(a)t=a.$head;else return Se.near(t,s)}return e.parent.inlineContent||(l==0?e=t:(e=(Se.findFrom(e,-s,!0)||Se.findFrom(e,s,!0)).$anchor,e.pos<t.pos!=l<0&&(e=t))),new be(e,t)}}Se.jsonID("text",be);class cu{constructor(e,t){this.anchor=e,this.head=t}map(e){return new cu(e.map(this.anchor),e.map(this.head))}resolve(e){return be.between(e.resolve(this.anchor),e.resolve(this.head))}}class fe extends Se{constructor(e){let t=e.nodeAfter,s=e.node(0).resolve(e.pos+t.nodeSize);super(e,s),this.node=t}map(e,t){let{deleted:s,pos:l}=t.mapResult(this.anchor),a=e.resolve(l);return s?Se.near(a):new fe(a)}content(){return new le(W.from(this.node),0,0)}eq(e){return e instanceof fe&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new pp(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new fe(e.resolve(t.anchor))}static create(e,t){return new fe(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}fe.prototype.visible=!1;Se.jsonID("node",fe);class pp{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:s}=e.mapResult(this.anchor);return t?new cu(s,s):new pp(s)}resolve(e){let t=e.resolve(this.anchor),s=t.nodeAfter;return s&&fe.isSelectable(s)?new fe(t):Se.near(t)}}class tn extends Se{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=le.empty){if(t==le.empty){e.delete(0,e.doc.content.size);let s=Se.atStart(e.doc);s.eq(e.selection)||e.setSelection(s)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new tn(e)}map(e){return new tn(e)}eq(e){return e instanceof tn}getBookmark(){return Tj}}Se.jsonID("all",tn);const Tj={map(){return this},resolve(n){return new tn(n)}};function Ri(n,e,t,s,l,a=!1){if(e.inlineContent)return be.create(n,t);for(let c=s-(l>0?0:1);l>0?c<e.childCount:c>=0;c+=l){let d=e.child(c);if(d.isAtom){if(!a&&fe.isSelectable(d))return fe.create(n,t-(l<0?d.nodeSize:0))}else{let h=Ri(n,d,t+l,l<0?d.childCount:0,l,a);if(h)return h}t+=d.nodeSize*l}return null}function yy(n,e,t){let s=n.steps.length-1;if(s<e)return;let l=n.steps[s];if(!(l instanceof dt||l instanceof ft))return;let a=n.mapping.maps[s],c;a.forEach((d,h,p,g)=>{c==null&&(c=g)}),n.setSelection(Se.near(n.doc.resolve(c),t))}const by=1,vy=2,Sy=4;class Mj extends E1{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|by)&-3,this.storedMarks=null,this}get selectionSet(){return(this.updated&by)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=vy,this}ensureMarks(e){return Pe.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&vy)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&-3,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let s=this.selection;return t&&(e=e.mark(this.storedMarks||(s.empty?s.$from.marks():s.$from.marksAcross(s.$to)||Pe.none))),s.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,s){let l=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(l.text(e),!0):this.deleteSelection();{if(s==null&&(s=t),s=s??t,!e)return this.deleteRange(t,s);let a=this.storedMarks;if(!a){let c=this.doc.resolve(t);a=s==t?c.marks():c.marksAcross(this.doc.resolve(s))}return this.replaceRangeWith(t,s,l.text(e,a)),this.selection.empty||this.setSelection(Se.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=Sy,this}get scrolledIntoView(){return(this.updated&Sy)>0}}function Ny(n,e){return!e||!n?n:n.bind(e)}class ia{constructor(e,t,s){this.name=e,this.init=Ny(t.init,s),this.apply=Ny(t.apply,s)}}const Oj=[new ia("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new ia("selection",{init(n,e){return n.selection||Se.atStart(e.doc)},apply(n){return n.selection}}),new ia("storedMarks",{init(n){return n.storedMarks||null},apply(n,e,t,s){return s.selection.$cursor?n.storedMarks:null}}),new ia("scrollToSelection",{init(){return 0},apply(n,e){return n.scrolledIntoView?e+1:e}})];class Qf{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Oj.slice(),t&&t.forEach(s=>{if(this.pluginsByKey[s.key])throw new RangeError("Adding different instances of a keyed plugin ("+s.key+")");this.plugins.push(s),this.pluginsByKey[s.key]=s,s.spec.state&&this.fields.push(new ia(s.key,s.spec.state,s))})}}class Li{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let s=0;s<this.config.plugins.length;s++)if(s!=t){let l=this.config.plugins[s];if(l.spec.filterTransaction&&!l.spec.filterTransaction.call(l,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],s=this.applyInner(e),l=null;for(;;){let a=!1;for(let c=0;c<this.config.plugins.length;c++){let d=this.config.plugins[c];if(d.spec.appendTransaction){let h=l?l[c].n:0,p=l?l[c].state:this,g=h<t.length&&d.spec.appendTransaction.call(d,h?t.slice(h):t,p,s);if(g&&s.filterTransaction(g,c)){if(g.setMeta("appendedTransaction",e),!l){l=[];for(let y=0;y<this.config.plugins.length;y++)l.push(y<c?{state:s,n:t.length}:{state:this,n:0})}t.push(g),s=s.applyInner(g),a=!0}l&&(l[c]={state:s,n:t.length})}}if(!a)return{state:s,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new Li(this.config),s=this.config.fields;for(let l=0;l<s.length;l++){let a=s[l];t[a.name]=a.apply(e,this[a.name],this,t)}return t}get tr(){return new Mj(this)}static create(e){let t=new Qf(e.doc?e.doc.type.schema:e.schema,e.plugins),s=new Li(t);for(let l=0;l<t.fields.length;l++)s[t.fields[l].name]=t.fields[l].init(e,s);return s}reconfigure(e){let t=new Qf(this.schema,e.plugins),s=t.fields,l=new Li(t);for(let a=0;a<s.length;a++){let c=s[a].name;l[c]=this.hasOwnProperty(c)?this[c]:s[a].init(e,l)}return l}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(s=>s.toJSON())),e&&typeof e=="object")for(let s in e){if(s=="doc"||s=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let l=e[s],a=l.spec.state;a&&a.toJSON&&(t[s]=a.toJSON.call(l,this[l.key]))}return t}static fromJSON(e,t,s){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let l=new Qf(e.schema,e.plugins),a=new Li(l);return l.fields.forEach(c=>{if(c.name=="doc")a.doc=Yr.fromJSON(e.schema,t.doc);else if(c.name=="selection")a.selection=Se.fromJSON(a.doc,t.selection);else if(c.name=="storedMarks")t.storedMarks&&(a.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(s)for(let d in s){let h=s[d],p=h.spec.state;if(h.key==c.name&&p&&p.fromJSON&&Object.prototype.hasOwnProperty.call(t,d)){a[c.name]=p.fromJSON.call(h,e,t[d],a);return}}a[c.name]=c.init(e,a)}}),a}}function A1(n,e,t){for(let s in n){let l=n[s];l instanceof Function?l=l.bind(e):s=="handleDOMEvents"&&(l=A1(l,e,{})),t[s]=l}return t}class Nt{constructor(e){this.spec=e,this.props={},e.props&&A1(e.props,this,this.props),this.key=e.key?e.key.key:T1("plugin")}getState(e){return e[this.key]}}const Xf=Object.create(null);function T1(n){return n in Xf?n+"$"+ ++Xf[n]:(Xf[n]=0,n+"$")}class nn{constructor(e="key"){this.key=T1(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const vt=function(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e},qi=function(n){let e=n.assignedSlot||n.parentNode;return e&&e.nodeType==11?e.host:e};let Ah=null;const sr=function(n,e,t){let s=Ah||(Ah=document.createRange());return s.setEnd(n,t??n.nodeValue.length),s.setStart(n,e||0),s},Rj=function(){Ah=null},Hs=function(n,e,t,s){return t&&(wy(n,e,t,s,-1)||wy(n,e,t,s,1))},Dj=/^(img|br|input|textarea|hr)$/i;function wy(n,e,t,s,l){for(var a;;){if(n==t&&e==s)return!0;if(e==(l<0?0:gn(n))){let c=n.parentNode;if(!c||c.nodeType!=1||Ra(n)||Dj.test(n.nodeName)||n.contentEditable=="false")return!1;e=vt(n)+(l<0?0:1),n=c}else if(n.nodeType==1){let c=n.childNodes[e+(l<0?-1:0)];if(c.nodeType==1&&c.contentEditable=="false")if(!((a=c.pmViewDesc)===null||a===void 0)&&a.ignoreForSelection)e+=l;else return!1;else n=c,e=l<0?gn(n):0}else return!1}}function gn(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function zj(n,e){for(;;){if(n.nodeType==3&&e)return n;if(n.nodeType==1&&e>0){if(n.contentEditable=="false")return null;n=n.childNodes[e-1],e=gn(n)}else if(n.parentNode&&!Ra(n))e=vt(n),n=n.parentNode;else return null}}function Lj(n,e){for(;;){if(n.nodeType==3&&e<n.nodeValue.length)return n;if(n.nodeType==1&&e<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[e],e=0}else if(n.parentNode&&!Ra(n))e=vt(n)+1,n=n.parentNode;else return null}}function Bj(n,e,t){for(let s=e==0,l=e==gn(n);s||l;){if(n==t)return!0;let a=vt(n);if(n=n.parentNode,!n)return!1;s=s&&a==0,l=l&&a==gn(n)}}function Ra(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const uu=function(n){return n.focusNode&&Hs(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function ks(n,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=n,t.key=t.code=e,t}function _j(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function Hj(n,e,t){if(n.caretPositionFromPoint)try{let s=n.caretPositionFromPoint(e,t);if(s)return{node:s.offsetNode,offset:Math.min(gn(s.offsetNode),s.offset)}}catch{}if(n.caretRangeFromPoint){let s=n.caretRangeFromPoint(e,t);if(s)return{node:s.startContainer,offset:Math.min(gn(s.startContainer),s.startOffset)}}}const _n=typeof navigator<"u"?navigator:null,ky=typeof document<"u"?document:null,es=_n&&_n.userAgent||"",Th=/Edge\/(\d+)/.exec(es),M1=/MSIE \d/.exec(es),Mh=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(es),qt=!!(M1||Mh||Th),Jr=M1?document.documentMode:Mh?+Mh[1]:Th?+Th[1]:0,kn=!qt&&/gecko\/(\d+)/i.test(es);kn&&+(/Firefox\/(\d+)/.exec(es)||[0,0])[1];const Oh=!qt&&/Chrome\/(\d+)/.exec(es),At=!!Oh,O1=Oh?+Oh[1]:0,Ot=!qt&&!!_n&&/Apple Computer/.test(_n.vendor),Fi=Ot&&(/Mobile\/\w+/.test(es)||!!_n&&_n.maxTouchPoints>2),mn=Fi||(_n?/Mac/.test(_n.platform):!1),Uj=_n?/Win/.test(_n.platform):!1,ir=/Android \d/.test(es),Da=!!ky&&"webkitFontSmoothing"in ky.documentElement.style,Pj=Da?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function Ij(n){let e=n.defaultView&&n.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function er(n,e){return typeof n=="number"?n:n[e]}function Vj(n){let e=n.getBoundingClientRect(),t=e.width/n.offsetWidth||1,s=e.height/n.offsetHeight||1;return{left:e.left,right:e.left+n.clientWidth*t,top:e.top,bottom:e.top+n.clientHeight*s}}function jy(n,e,t){let s=n.someProp("scrollThreshold")||0,l=n.someProp("scrollMargin")||5,a=n.dom.ownerDocument;for(let c=t||n.dom;c;){if(c.nodeType!=1){c=qi(c);continue}let d=c,h=d==a.body,p=h?Ij(a):Vj(d),g=0,y=0;if(e.top<p.top+er(s,"top")?y=-(p.top-e.top+er(l,"top")):e.bottom>p.bottom-er(s,"bottom")&&(y=e.bottom-e.top>p.bottom-p.top?e.top+er(l,"top")-p.top:e.bottom-p.bottom+er(l,"bottom")),e.left<p.left+er(s,"left")?g=-(p.left-e.left+er(l,"left")):e.right>p.right-er(s,"right")&&(g=e.right-p.right+er(l,"right")),g||y)if(h)a.defaultView.scrollBy(g,y);else{let S=d.scrollLeft,v=d.scrollTop;y&&(d.scrollTop+=y),g&&(d.scrollLeft+=g);let w=d.scrollLeft-S,k=d.scrollTop-v;e={left:e.left-w,top:e.top-k,right:e.right-w,bottom:e.bottom-k}}let b=h?"fixed":getComputedStyle(c).position;if(/^(fixed|sticky)$/.test(b))break;c=b=="absolute"?c.offsetParent:qi(c)}}function qj(n){let e=n.dom.getBoundingClientRect(),t=Math.max(0,e.top),s,l;for(let a=(e.left+e.right)/2,c=t+1;c<Math.min(innerHeight,e.bottom);c+=5){let d=n.root.elementFromPoint(a,c);if(!d||d==n.dom||!n.dom.contains(d))continue;let h=d.getBoundingClientRect();if(h.top>=t-20){s=d,l=h.top;break}}return{refDOM:s,refTop:l,stack:R1(n.dom)}}function R1(n){let e=[],t=n.ownerDocument;for(let s=n;s&&(e.push({dom:s,top:s.scrollTop,left:s.scrollLeft}),n!=t);s=qi(s));return e}function Fj({refDOM:n,refTop:e,stack:t}){let s=n?n.getBoundingClientRect().top:0;D1(t,s==0?0:s-e)}function D1(n,e){for(let t=0;t<n.length;t++){let{dom:s,top:l,left:a}=n[t];s.scrollTop!=l+e&&(s.scrollTop=l+e),s.scrollLeft!=a&&(s.scrollLeft=a)}}let Ti=null;function $j(n){if(n.setActive)return n.setActive();if(Ti)return n.focus(Ti);let e=R1(n);n.focus(Ti==null?{get preventScroll(){return Ti={preventScroll:!0},!0}}:void 0),Ti||(Ti=!1,D1(e,0))}function z1(n,e){let t,s=2e8,l,a=0,c=e.top,d=e.top,h,p;for(let g=n.firstChild,y=0;g;g=g.nextSibling,y++){let b;if(g.nodeType==1)b=g.getClientRects();else if(g.nodeType==3)b=sr(g).getClientRects();else continue;for(let S=0;S<b.length;S++){let v=b[S];if(v.top<=c&&v.bottom>=d){c=Math.max(v.bottom,c),d=Math.min(v.top,d);let w=v.left>e.left?v.left-e.left:v.right<e.left?e.left-v.right:0;if(w<s){t=g,s=w,l=w&&t.nodeType==3?{left:v.right<e.left?v.right:v.left,top:e.top}:e,g.nodeType==1&&w&&(a=y+(e.left>=(v.left+v.right)/2?1:0));continue}}else v.top>e.top&&!h&&v.left<=e.left&&v.right>=e.left&&(h=g,p={left:Math.max(v.left,Math.min(v.right,e.left)),top:v.top});!t&&(e.left>=v.right&&e.top>=v.top||e.left>=v.left&&e.top>=v.bottom)&&(a=y+1)}}return!t&&h&&(t=h,l=p,s=0),t&&t.nodeType==3?Gj(t,l):!t||s&&t.nodeType==1?{node:n,offset:a}:z1(t,l)}function Gj(n,e){let t=n.nodeValue.length,s=document.createRange();for(let l=0;l<t;l++){s.setEnd(n,l+1),s.setStart(n,l);let a=Hr(s,1);if(a.top!=a.bottom&&mp(e,a))return{node:n,offset:l+(e.left>=(a.left+a.right)/2?1:0)}}return{node:n,offset:0}}function mp(n,e){return n.left>=e.left-1&&n.left<=e.right+1&&n.top>=e.top-1&&n.top<=e.bottom+1}function Yj(n,e){let t=n.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<n.getBoundingClientRect().left?t:n}function Kj(n,e,t){let{node:s,offset:l}=z1(e,t),a=-1;if(s.nodeType==1&&!s.firstChild){let c=s.getBoundingClientRect();a=c.left!=c.right&&t.left>(c.left+c.right)/2?1:-1}return n.docView.posFromDOM(s,l,a)}function Jj(n,e,t,s){let l=-1;for(let a=e,c=!1;a!=n.dom;){let d=n.docView.nearestDesc(a,!0),h;if(!d)return null;if(d.dom.nodeType==1&&(d.node.isBlock&&d.parent||!d.contentDOM)&&((h=d.dom.getBoundingClientRect()).width||h.height)&&(d.node.isBlock&&d.parent&&(!c&&h.left>s.left||h.top>s.top?l=d.posBefore:(!c&&h.right<s.left||h.bottom<s.top)&&(l=d.posAfter),c=!0),!d.contentDOM&&l<0&&!d.node.isText))return(d.node.isBlock?s.top<(h.top+h.bottom)/2:s.left<(h.left+h.right)/2)?d.posBefore:d.posAfter;a=d.dom.parentNode}return l>-1?l:n.docView.posFromDOM(e,t,-1)}function L1(n,e,t){let s=n.childNodes.length;if(s&&t.top<t.bottom)for(let l=Math.max(0,Math.min(s-1,Math.floor(s*(e.top-t.top)/(t.bottom-t.top))-2)),a=l;;){let c=n.childNodes[a];if(c.nodeType==1){let d=c.getClientRects();for(let h=0;h<d.length;h++){let p=d[h];if(mp(e,p))return L1(c,e,p)}}if((a=(a+1)%s)==l)break}return n}function Qj(n,e){let t=n.dom.ownerDocument,s,l=0,a=Hj(t,e.left,e.top);a&&({node:s,offset:l}=a);let c=(n.root.elementFromPoint?n.root:t).elementFromPoint(e.left,e.top),d;if(!c||!n.dom.contains(c.nodeType!=1?c.parentNode:c)){let p=n.dom.getBoundingClientRect();if(!mp(e,p)||(c=L1(n.dom,e,p),!c))return null}if(Ot)for(let p=c;s&&p;p=qi(p))p.draggable&&(s=void 0);if(c=Yj(c,e),s){if(kn&&s.nodeType==1&&(l=Math.min(l,s.childNodes.length),l<s.childNodes.length)){let g=s.childNodes[l],y;g.nodeName=="IMG"&&(y=g.getBoundingClientRect()).right<=e.left&&y.bottom>e.top&&l++}let p;Da&&l&&s.nodeType==1&&(p=s.childNodes[l-1]).nodeType==1&&p.contentEditable=="false"&&p.getBoundingClientRect().top>=e.top&&l--,s==n.dom&&l==s.childNodes.length-1&&s.lastChild.nodeType==1&&e.top>s.lastChild.getBoundingClientRect().bottom?d=n.state.doc.content.size:(l==0||s.nodeType!=1||s.childNodes[l-1].nodeName!="BR")&&(d=Jj(n,s,l,e))}d==null&&(d=Kj(n,c,e));let h=n.docView.nearestDesc(c,!0);return{pos:d,inside:h?h.posAtStart-h.border:-1}}function Cy(n){return n.top<n.bottom||n.left<n.right}function Hr(n,e){let t=n.getClientRects();if(t.length){let s=t[e<0?0:t.length-1];if(Cy(s))return s}return Array.prototype.find.call(t,Cy)||n.getBoundingClientRect()}const Xj=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function B1(n,e,t){let{node:s,offset:l,atom:a}=n.docView.domFromPos(e,t<0?-1:1),c=Da||kn;if(s.nodeType==3)if(c&&(Xj.test(s.nodeValue)||(t<0?!l:l==s.nodeValue.length))){let h=Hr(sr(s,l,l),t);if(kn&&l&&/\s/.test(s.nodeValue[l-1])&&l<s.nodeValue.length){let p=Hr(sr(s,l-1,l-1),-1);if(p.top==h.top){let g=Hr(sr(s,l,l+1),-1);if(g.top!=h.top)return ea(g,g.left<p.left)}}return h}else{let h=l,p=l,g=t<0?1:-1;return t<0&&!l?(p++,g=-1):t>=0&&l==s.nodeValue.length?(h--,g=1):t<0?h--:p++,ea(Hr(sr(s,h,p),g),g<0)}if(!n.state.doc.resolve(e-(a||0)).parent.inlineContent){if(a==null&&l&&(t<0||l==gn(s))){let h=s.childNodes[l-1];if(h.nodeType==1)return Zf(h.getBoundingClientRect(),!1)}if(a==null&&l<gn(s)){let h=s.childNodes[l];if(h.nodeType==1)return Zf(h.getBoundingClientRect(),!0)}return Zf(s.getBoundingClientRect(),t>=0)}if(a==null&&l&&(t<0||l==gn(s))){let h=s.childNodes[l-1],p=h.nodeType==3?sr(h,gn(h)-(c?0:1)):h.nodeType==1&&(h.nodeName!="BR"||!h.nextSibling)?h:null;if(p)return ea(Hr(p,1),!1)}if(a==null&&l<gn(s)){let h=s.childNodes[l];for(;h.pmViewDesc&&h.pmViewDesc.ignoreForCoords;)h=h.nextSibling;let p=h?h.nodeType==3?sr(h,0,c?0:1):h.nodeType==1?h:null:null;if(p)return ea(Hr(p,-1),!0)}return ea(Hr(s.nodeType==3?sr(s):s,-t),t>=0)}function ea(n,e){if(n.width==0)return n;let t=e?n.left:n.right;return{top:n.top,bottom:n.bottom,left:t,right:t}}function Zf(n,e){if(n.height==0)return n;let t=e?n.top:n.bottom;return{top:t,bottom:t,left:n.left,right:n.right}}function _1(n,e,t){let s=n.state,l=n.root.activeElement;s!=e&&n.updateState(e),l!=n.dom&&n.focus();try{return t()}finally{s!=e&&n.updateState(s),l!=n.dom&&l&&l.focus()}}function Zj(n,e,t){let s=e.selection,l=t=="up"?s.$from:s.$to;return _1(n,e,()=>{let{node:a}=n.docView.domFromPos(l.pos,t=="up"?-1:1);for(;;){let d=n.docView.nearestDesc(a,!0);if(!d)break;if(d.node.isBlock){a=d.contentDOM||d.dom;break}a=d.dom.parentNode}let c=B1(n,l.pos,1);for(let d=a.firstChild;d;d=d.nextSibling){let h;if(d.nodeType==1)h=d.getClientRects();else if(d.nodeType==3)h=sr(d,0,d.nodeValue.length).getClientRects();else continue;for(let p=0;p<h.length;p++){let g=h[p];if(g.bottom>g.top+1&&(t=="up"?c.top-g.top>(g.bottom-c.top)*2:g.bottom-c.bottom>(c.bottom-g.top)*2))return!1}}return!0})}const Wj=/[\u0590-\u08ac]/;function eC(n,e,t){let{$head:s}=e.selection;if(!s.parent.isTextblock)return!1;let l=s.parentOffset,a=!l,c=l==s.parent.content.size,d=n.domSelection();return d?!Wj.test(s.parent.textContent)||!d.modify?t=="left"||t=="backward"?a:c:_1(n,e,()=>{let{focusNode:h,focusOffset:p,anchorNode:g,anchorOffset:y}=n.domSelectionRange(),b=d.caretBidiLevel;d.modify("move",t,"character");let S=s.depth?n.docView.domAfterPos(s.before()):n.dom,{focusNode:v,focusOffset:w}=n.domSelectionRange(),k=v&&!S.contains(v.nodeType==1?v:v.parentNode)||h==v&&p==w;try{d.collapse(g,y),h&&(h!=g||p!=y)&&d.extend&&d.extend(h,p)}catch{}return b!=null&&(d.caretBidiLevel=b),k}):s.pos==s.start()||s.pos==s.end()}let Ey=null,Ay=null,Ty=!1;function tC(n,e,t){return Ey==e&&Ay==t?Ty:(Ey=e,Ay=t,Ty=t=="up"||t=="down"?Zj(n,e,t):eC(n,e,t))}const yn=0,My=1,Cs=2,Hn=3;class za{constructor(e,t,s,l){this.parent=e,this.children=t,this.dom=s,this.contentDOM=l,this.dirty=yn,s.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,s){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,s=this.posAtStart;;t++){let l=this.children[t];if(l==e)return s;s+=l.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,s){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(s<0){let a,c;if(e==this.contentDOM)a=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;a=e.previousSibling}for(;a&&!((c=a.pmViewDesc)&&c.parent==this);)a=a.previousSibling;return a?this.posBeforeChild(c)+c.size:this.posAtStart}else{let a,c;if(e==this.contentDOM)a=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;a=e.nextSibling}for(;a&&!((c=a.pmViewDesc)&&c.parent==this);)a=a.nextSibling;return a?this.posBeforeChild(c):this.posAtEnd}let l;if(e==this.dom&&this.contentDOM)l=t>vt(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))l=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let a=e;;a=a.parentNode){if(a==this.dom){l=!1;break}if(a.previousSibling)break}if(l==null&&t==e.childNodes.length)for(let a=e;;a=a.parentNode){if(a==this.dom){l=!0;break}if(a.nextSibling)break}}return l??s>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let s=!0,l=e;l;l=l.parentNode){let a=this.getDesc(l),c;if(a&&(!t||a.node))if(s&&(c=a.nodeDOM)&&!(c.nodeType==1?c.contains(e.nodeType==1?e:e.parentNode):c==e))s=!1;else return a}}getDesc(e){let t=e.pmViewDesc;for(let s=t;s;s=s.parent)if(s==this)return t}posFromDOM(e,t,s){for(let l=e;l;l=l.parentNode){let a=this.getDesc(l);if(a)return a.localPosFromDOM(e,t,s)}return-1}descAt(e){for(let t=0,s=0;t<this.children.length;t++){let l=this.children[t],a=s+l.size;if(s==e&&a!=s){for(;!l.border&&l.children.length;)for(let c=0;c<l.children.length;c++){let d=l.children[c];if(d.size){l=d;break}}return l}if(e<a)return l.descAt(e-s-l.border);s=a}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let s=0,l=0;for(let a=0;s<this.children.length;s++){let c=this.children[s],d=a+c.size;if(d>e||c instanceof U1){l=e-a;break}a=d}if(l)return this.children[s].domFromPos(l-this.children[s].border,t);for(let a;s&&!(a=this.children[s-1]).size&&a instanceof H1&&a.side>=0;s--);if(t<=0){let a,c=!0;for(;a=s?this.children[s-1]:null,!(!a||a.dom.parentNode==this.contentDOM);s--,c=!1);return a&&t&&c&&!a.border&&!a.domAtom?a.domFromPos(a.size,t):{node:this.contentDOM,offset:a?vt(a.dom)+1:0}}else{let a,c=!0;for(;a=s<this.children.length?this.children[s]:null,!(!a||a.dom.parentNode==this.contentDOM);s++,c=!1);return a&&c&&!a.border&&!a.domAtom?a.domFromPos(0,t):{node:this.contentDOM,offset:a?vt(a.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,s=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let l=-1,a=-1;for(let c=s,d=0;;d++){let h=this.children[d],p=c+h.size;if(l==-1&&e<=p){let g=c+h.border;if(e>=g&&t<=p-h.border&&h.node&&h.contentDOM&&this.contentDOM.contains(h.contentDOM))return h.parseRange(e,t,g);e=c;for(let y=d;y>0;y--){let b=this.children[y-1];if(b.size&&b.dom.parentNode==this.contentDOM&&!b.emptyChildAt(1)){l=vt(b.dom)+1;break}e-=b.size}l==-1&&(l=0)}if(l>-1&&(p>t||d==this.children.length-1)){t=p;for(let g=d+1;g<this.children.length;g++){let y=this.children[g];if(y.size&&y.dom.parentNode==this.contentDOM&&!y.emptyChildAt(-1)){a=vt(y.dom);break}t+=y.size}a==-1&&(a=this.contentDOM.childNodes.length);break}c=p}return{node:this.contentDOM,from:e,to:t,fromOffset:l,toOffset:a}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:s}=this.domFromPos(e,0);if(t.nodeType!=1||s==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[s]}setSelection(e,t,s,l=!1){let a=Math.min(e,t),c=Math.max(e,t);for(let S=0,v=0;S<this.children.length;S++){let w=this.children[S],k=v+w.size;if(a>v&&c<k)return w.setSelection(e-v-w.border,t-v-w.border,s,l);v=k}let d=this.domFromPos(e,e?-1:1),h=t==e?d:this.domFromPos(t,t?-1:1),p=s.root.getSelection(),g=s.domSelectionRange(),y=!1;if((kn||Ot)&&e==t){let{node:S,offset:v}=d;if(S.nodeType==3){if(y=!!(v&&S.nodeValue[v-1]==`
`),y&&v==S.nodeValue.length)for(let w=S,k;w;w=w.parentNode){if(k=w.nextSibling){k.nodeName=="BR"&&(d=h={node:k.parentNode,offset:vt(k)+1});break}let E=w.pmViewDesc;if(E&&E.node&&E.node.isBlock)break}}else{let w=S.childNodes[v-1];y=w&&(w.nodeName=="BR"||w.contentEditable=="false")}}if(kn&&g.focusNode&&g.focusNode!=h.node&&g.focusNode.nodeType==1){let S=g.focusNode.childNodes[g.focusOffset];S&&S.contentEditable=="false"&&(l=!0)}if(!(l||y&&Ot)&&Hs(d.node,d.offset,g.anchorNode,g.anchorOffset)&&Hs(h.node,h.offset,g.focusNode,g.focusOffset))return;let b=!1;if((p.extend||e==t)&&!y){p.collapse(d.node,d.offset);try{e!=t&&p.extend(h.node,h.offset),b=!0}catch{}}if(!b){if(e>t){let v=d;d=h,h=v}let S=document.createRange();S.setEnd(h.node,h.offset),S.setStart(d.node,d.offset),p.removeAllRanges(),p.addRange(S)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let s=0,l=0;l<this.children.length;l++){let a=this.children[l],c=s+a.size;if(s==c?e<=c&&t>=s:e<c&&t>s){let d=s+a.border,h=c-a.border;if(e>=d&&t<=h){this.dirty=e==s||t==c?Cs:My,e==d&&t==h&&(a.contentLost||a.dom.parentNode!=this.contentDOM)?a.dirty=Hn:a.markDirty(e-d,t-d);return}else a.dirty=a.dom==a.contentDOM&&a.dom.parentNode==this.contentDOM&&!a.children.length?Cs:Hn}s=c}this.dirty=Cs}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let s=e==1?Cs:My;t.dirty<s&&(t.dirty=s)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class H1 extends za{constructor(e,t,s,l){let a,c=t.type.toDOM;if(typeof c=="function"&&(c=c(s,()=>{if(!a)return l;if(a.parent)return a.parent.posBeforeChild(a)})),!t.type.spec.raw){if(c.nodeType!=1){let d=document.createElement("span");d.appendChild(c),c=d}c.contentEditable="false",c.classList.add("ProseMirror-widget")}super(e,[],c,null),this.widget=t,this.widget=t,a=this}matchesWidget(e){return this.dirty==yn&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class nC extends za{constructor(e,t,s,l){super(e,[],t,null),this.textDOM=s,this.text=l}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Us extends za{constructor(e,t,s,l,a){super(e,[],s,l),this.mark=t,this.spec=a}static create(e,t,s,l){let a=l.nodeViews[t.type.name],c=a&&a(t,l,s);return(!c||!c.dom)&&(c=Is.renderSpec(document,t.type.spec.toDOM(t,s),null,t.attrs)),new Us(e,t,c.dom,c.contentDOM||c.dom,c)}parseRule(){return this.dirty&Hn||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Hn&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=yn){let s=this.parent;for(;!s.node;)s=s.parent;s.dirty<this.dirty&&(s.dirty=this.dirty),this.dirty=yn}}slice(e,t,s){let l=Us.create(this.parent,this.mark,!0,s),a=this.children,c=this.size;t<c&&(a=Dh(a,t,c,s)),e>0&&(a=Dh(a,0,e,s));for(let d=0;d<a.length;d++)a[d].parent=l;return l.children=a,l}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Qr extends za{constructor(e,t,s,l,a,c,d,h,p){super(e,[],a,c),this.node=t,this.outerDeco=s,this.innerDeco=l,this.nodeDOM=d}static create(e,t,s,l,a,c){let d=a.nodeViews[t.type.name],h,p=d&&d(t,a,()=>{if(!h)return c;if(h.parent)return h.parent.posBeforeChild(h)},s,l),g=p&&p.dom,y=p&&p.contentDOM;if(t.isText){if(!g)g=document.createTextNode(t.text);else if(g.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else g||({dom:g,contentDOM:y}=Is.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs));!y&&!t.isText&&g.nodeName!="BR"&&(g.hasAttribute("contenteditable")||(g.contentEditable="false"),t.type.spec.draggable&&(g.draggable=!0));let b=g;return g=V1(g,s,t),p?h=new rC(e,t,s,l,g,y||null,b,p,a,c+1):t.isText?new du(e,t,s,l,g,b,a):new Qr(e,t,s,l,g,y||null,b,a,c+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let s=this.children[t];if(this.dom.contains(s.dom.parentNode)){e.contentElement=s.dom.parentNode;break}}e.contentElement||(e.getContent=()=>W.empty)}return e}matchesNode(e,t,s){return this.dirty==yn&&e.eq(this.node)&&Sc(t,this.outerDeco)&&s.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let s=this.node.inlineContent,l=t,a=e.composing?this.localCompositionInfo(e,t):null,c=a&&a.pos>-1?a:null,d=a&&a.pos<0,h=new iC(this,c&&c.node,e);oC(this.node,this.innerDeco,(p,g,y)=>{p.spec.marks?h.syncToMarks(p.spec.marks,s,e):p.type.side>=0&&!y&&h.syncToMarks(g==this.node.childCount?Pe.none:this.node.child(g).marks,s,e),h.placeWidget(p,e,l)},(p,g,y,b)=>{h.syncToMarks(p.marks,s,e);let S;h.findNodeMatch(p,g,y,b)||d&&e.state.selection.from>l&&e.state.selection.to<l+p.nodeSize&&(S=h.findIndexWithChild(a.node))>-1&&h.updateNodeAt(p,g,y,S,e)||h.updateNextNode(p,g,y,e,b,l)||h.addNode(p,g,y,e,l),l+=p.nodeSize}),h.syncToMarks([],s,e),this.node.isTextblock&&h.addTextblockHacks(),h.destroyRest(),(h.changed||this.dirty==Cs)&&(c&&this.protectLocalComposition(e,c),P1(this.contentDOM,this.children,e),Fi&&cC(this.dom))}localCompositionInfo(e,t){let{from:s,to:l}=e.state.selection;if(!(e.state.selection instanceof be)||s<t||l>t+this.node.content.size)return null;let a=e.input.compositionNode;if(!a||!this.dom.contains(a.parentNode))return null;if(this.node.inlineContent){let c=a.nodeValue,d=uC(this.node.content,c,s-t,l-t);return d<0?null:{node:a,pos:d,text:c}}else return{node:a,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:s,text:l}){if(this.getDesc(t))return;let a=t;for(;a.parentNode!=this.contentDOM;a=a.parentNode){for(;a.previousSibling;)a.parentNode.removeChild(a.previousSibling);for(;a.nextSibling;)a.parentNode.removeChild(a.nextSibling);a.pmViewDesc&&(a.pmViewDesc=void 0)}let c=new nC(this,a,t,l);e.input.compositionNodes.push(c),this.children=Dh(this.children,s,s+l.length,e,c)}update(e,t,s,l){return this.dirty==Hn||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,s,l),!0)}updateInner(e,t,s,l){this.updateOuterDeco(t),this.node=e,this.innerDeco=s,this.contentDOM&&this.updateChildren(l,this.posAtStart),this.dirty=yn}updateOuterDeco(e){if(Sc(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,s=this.dom;this.dom=I1(this.dom,this.nodeDOM,Rh(this.outerDeco,this.node,t),Rh(e,this.node,t)),this.dom!=s&&(s.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function Oy(n,e,t,s,l){V1(s,e,n);let a=new Qr(void 0,n,e,t,s,s,s,l,0);return a.contentDOM&&a.updateChildren(l,0),a}class du extends Qr{constructor(e,t,s,l,a,c,d){super(e,t,s,l,a,null,c,d,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,s,l){return this.dirty==Hn||this.dirty!=yn&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=yn||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,l.trackWrites==this.nodeDOM&&(l.trackWrites=null)),this.node=e,this.dirty=yn,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,s){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,s)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,s){let l=this.node.cut(e,t),a=document.createTextNode(l.text);return new du(this.parent,l,this.outerDeco,this.innerDeco,a,a,s)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=Hn)}get domAtom(){return!1}isText(e){return this.node.text==e}}class U1 extends za{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==yn&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class rC extends Qr{constructor(e,t,s,l,a,c,d,h,p,g){super(e,t,s,l,a,c,d,p,g),this.spec=h}update(e,t,s,l){if(this.dirty==Hn)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let a=this.spec.update(e,t,s);return a&&this.updateInner(e,t,s,l),a}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,s,l)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,s,l){this.spec.setSelection?this.spec.setSelection(e,t,s.root):super.setSelection(e,t,s,l)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function P1(n,e,t){let s=n.firstChild,l=!1;for(let a=0;a<e.length;a++){let c=e[a],d=c.dom;if(d.parentNode==n){for(;d!=s;)s=Ry(s),l=!0;s=s.nextSibling}else l=!0,n.insertBefore(d,s);if(c instanceof Us){let h=s?s.previousSibling:n.lastChild;P1(c.contentDOM,c.children,t),s=h?h.nextSibling:n.firstChild}}for(;s;)s=Ry(s),l=!0;l&&t.trackWrites==n&&(t.trackWrites=null)}const oa=function(n){n&&(this.nodeName=n)};oa.prototype=Object.create(null);const Es=[new oa];function Rh(n,e,t){if(n.length==0)return Es;let s=t?Es[0]:new oa,l=[s];for(let a=0;a<n.length;a++){let c=n[a].type.attrs;if(c){c.nodeName&&l.push(s=new oa(c.nodeName));for(let d in c){let h=c[d];h!=null&&(t&&l.length==1&&l.push(s=new oa(e.isInline?"span":"div")),d=="class"?s.class=(s.class?s.class+" ":"")+h:d=="style"?s.style=(s.style?s.style+";":"")+h:d!="nodeName"&&(s[d]=h))}}}return l}function I1(n,e,t,s){if(t==Es&&s==Es)return e;let l=e;for(let a=0;a<s.length;a++){let c=s[a],d=t[a];if(a){let h;d&&d.nodeName==c.nodeName&&l!=n&&(h=l.parentNode)&&h.nodeName.toLowerCase()==c.nodeName||(h=document.createElement(c.nodeName),h.pmIsDeco=!0,h.appendChild(l),d=Es[0]),l=h}sC(l,d||Es[0],c)}return l}function sC(n,e,t){for(let s in e)s!="class"&&s!="style"&&s!="nodeName"&&!(s in t)&&n.removeAttribute(s);for(let s in t)s!="class"&&s!="style"&&s!="nodeName"&&t[s]!=e[s]&&n.setAttribute(s,t[s]);if(e.class!=t.class){let s=e.class?e.class.split(" ").filter(Boolean):[],l=t.class?t.class.split(" ").filter(Boolean):[];for(let a=0;a<s.length;a++)l.indexOf(s[a])==-1&&n.classList.remove(s[a]);for(let a=0;a<l.length;a++)s.indexOf(l[a])==-1&&n.classList.add(l[a]);n.classList.length==0&&n.removeAttribute("class")}if(e.style!=t.style){if(e.style){let s=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,l;for(;l=s.exec(e.style);)n.style.removeProperty(l[1])}t.style&&(n.style.cssText+=t.style)}}function V1(n,e,t){return I1(n,n,Es,Rh(e,t,n.nodeType!=1))}function Sc(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].type.eq(e[t].type))return!1;return!0}function Ry(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class iC{constructor(e,t,s){this.lock=t,this.view=s,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=lC(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let s=e;s<t;s++)this.top.children[s].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,s){let l=0,a=this.stack.length>>1,c=Math.min(a,e.length);for(;l<c&&(l==a-1?this.top:this.stack[l+1<<1]).matchesMark(e[l])&&e[l].type.spec.spanning!==!1;)l++;for(;l<a;)this.destroyRest(),this.top.dirty=yn,this.index=this.stack.pop(),this.top=this.stack.pop(),a--;for(;a<e.length;){this.stack.push(this.top,this.index+1);let d=-1;for(let h=this.index;h<Math.min(this.index+3,this.top.children.length);h++){let p=this.top.children[h];if(p.matchesMark(e[a])&&!this.isLocked(p.dom)){d=h;break}}if(d>-1)d>this.index&&(this.changed=!0,this.destroyBetween(this.index,d)),this.top=this.top.children[this.index];else{let h=Us.create(this.top,e[a],t,s);this.top.children.splice(this.index,0,h),this.top=h,this.changed=!0}this.index=0,a++}}findNodeMatch(e,t,s,l){let a=-1,c;if(l>=this.preMatch.index&&(c=this.preMatch.matches[l-this.preMatch.index]).parent==this.top&&c.matchesNode(e,t,s))a=this.top.children.indexOf(c,this.index);else for(let d=this.index,h=Math.min(this.top.children.length,d+5);d<h;d++){let p=this.top.children[d];if(p.matchesNode(e,t,s)&&!this.preMatch.matched.has(p)){a=d;break}}return a<0?!1:(this.destroyBetween(this.index,a),this.index++,!0)}updateNodeAt(e,t,s,l,a){let c=this.top.children[l];return c.dirty==Hn&&c.dom==c.contentDOM&&(c.dirty=Cs),c.update(e,t,s,a)?(this.destroyBetween(this.index,l),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let s=e.pmViewDesc;if(s){for(let l=this.index;l<this.top.children.length;l++)if(this.top.children[l]==s)return l}return-1}e=t}}updateNextNode(e,t,s,l,a,c){for(let d=this.index;d<this.top.children.length;d++){let h=this.top.children[d];if(h instanceof Qr){let p=this.preMatch.matched.get(h);if(p!=null&&p!=a)return!1;let g=h.dom,y,b=this.isLocked(g)&&!(e.isText&&h.node&&h.node.isText&&h.nodeDOM.nodeValue==e.text&&h.dirty!=Hn&&Sc(t,h.outerDeco));if(!b&&h.update(e,t,s,l))return this.destroyBetween(this.index,d),h.dom!=g&&(this.changed=!0),this.index++,!0;if(!b&&(y=this.recreateWrapper(h,e,t,s,l,c)))return this.destroyBetween(this.index,d),this.top.children[this.index]=y,y.contentDOM&&(y.dirty=Cs,y.updateChildren(l,c+1),y.dirty=yn),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,s,l,a,c){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!Sc(s,e.outerDeco)||!l.eq(e.innerDeco))return null;let d=Qr.create(this.top,t,s,l,a,c);if(d.contentDOM){d.children=e.children,e.children=[];for(let h of d.children)h.parent=d}return e.destroy(),d}addNode(e,t,s,l,a){let c=Qr.create(this.top,e,t,s,l,a);c.contentDOM&&c.updateChildren(l,a+1),this.top.children.splice(this.index++,0,c),this.changed=!0}placeWidget(e,t,s){let l=this.index<this.top.children.length?this.top.children[this.index]:null;if(l&&l.matchesWidget(e)&&(e==l.widget||!l.widget.type.toDOM.parentNode))this.index++;else{let a=new H1(this.top,e,t,s);this.top.children.splice(this.index++,0,a),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof Us;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof du)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Ot||At)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let s=document.createElement(e);e=="IMG"&&(s.className="ProseMirror-separator",s.alt=""),e=="BR"&&(s.className="ProseMirror-trailingBreak");let l=new U1(this.top,[],s,null);t!=this.top?t.children.push(l):t.children.splice(this.index++,0,l),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function lC(n,e){let t=e,s=t.children.length,l=n.childCount,a=new Map,c=[];e:for(;l>0;){let d;for(;;)if(s){let p=t.children[s-1];if(p instanceof Us)t=p,s=p.children.length;else{d=p,s--;break}}else{if(t==e)break e;s=t.parent.children.indexOf(t),t=t.parent}let h=d.node;if(h){if(h!=n.child(l-1))break;--l,a.set(d,l),c.push(d)}}return{index:l,matched:a,matches:c.reverse()}}function aC(n,e){return n.type.side-e.type.side}function oC(n,e,t,s){let l=e.locals(n),a=0;if(l.length==0){for(let p=0;p<n.childCount;p++){let g=n.child(p);s(g,l,e.forChild(a,g),p),a+=g.nodeSize}return}let c=0,d=[],h=null;for(let p=0;;){let g,y;for(;c<l.length&&l[c].to==a;){let k=l[c++];k.widget&&(g?(y||(y=[g])).push(k):g=k)}if(g)if(y){y.sort(aC);for(let k=0;k<y.length;k++)t(y[k],p,!!h)}else t(g,p,!!h);let b,S;if(h)S=-1,b=h,h=null;else if(p<n.childCount)S=p,b=n.child(p++);else break;for(let k=0;k<d.length;k++)d[k].to<=a&&d.splice(k--,1);for(;c<l.length&&l[c].from<=a&&l[c].to>a;)d.push(l[c++]);let v=a+b.nodeSize;if(b.isText){let k=v;c<l.length&&l[c].from<k&&(k=l[c].from);for(let E=0;E<d.length;E++)d[E].to<k&&(k=d[E].to);k<v&&(h=b.cut(k-a),b=b.cut(0,k-a),v=k,S=-1)}else for(;c<l.length&&l[c].to<v;)c++;let w=b.isInline&&!b.isLeaf?d.filter(k=>!k.inline):d.slice();s(b,w,e.forChild(a,b),S),a=v}}function cC(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let e=n.style.cssText;n.style.cssText=e+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=e}}function uC(n,e,t,s){for(let l=0,a=0;l<n.childCount&&a<=s;){let c=n.child(l++),d=a;if(a+=c.nodeSize,!c.isText)continue;let h=c.text;for(;l<n.childCount;){let p=n.child(l++);if(a+=p.nodeSize,!p.isText)break;h+=p.text}if(a>=t){if(a>=s&&h.slice(s-e.length-d,s-d)==e)return s-e.length;let p=d<s?h.lastIndexOf(e,s-d-1):-1;if(p>=0&&p+e.length+d>=t)return d+p;if(t==s&&h.length>=s+e.length-d&&h.slice(s-d,s-d+e.length)==e)return s}}return-1}function Dh(n,e,t,s,l){let a=[];for(let c=0,d=0;c<n.length;c++){let h=n[c],p=d,g=d+=h.size;p>=t||g<=e?a.push(h):(p<e&&a.push(h.slice(0,e-p,s)),l&&(a.push(l),l=void 0),g>t&&a.push(h.slice(t-p,h.size,s)))}return a}function gp(n,e=null){let t=n.domSelectionRange(),s=n.state.doc;if(!t.focusNode)return null;let l=n.docView.nearestDesc(t.focusNode),a=l&&l.size==0,c=n.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(c<0)return null;let d=s.resolve(c),h,p;if(uu(t)){for(h=c;l&&!l.node;)l=l.parent;let y=l.node;if(l&&y.isAtom&&fe.isSelectable(y)&&l.parent&&!(y.isInline&&Bj(t.focusNode,t.focusOffset,l.dom))){let b=l.posBefore;p=new fe(c==b?d:s.resolve(b))}}else{if(t instanceof n.dom.ownerDocument.defaultView.Selection&&t.rangeCount>1){let y=c,b=c;for(let S=0;S<t.rangeCount;S++){let v=t.getRangeAt(S);y=Math.min(y,n.docView.posFromDOM(v.startContainer,v.startOffset,1)),b=Math.max(b,n.docView.posFromDOM(v.endContainer,v.endOffset,-1))}if(y<0)return null;[h,c]=b==n.state.selection.anchor?[b,y]:[y,b],d=s.resolve(c)}else h=n.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(h<0)return null}let g=s.resolve(h);if(!p){let y=e=="pointer"||n.state.selection.head<d.pos&&!a?1:-1;p=xp(n,g,d,y)}return p}function q1(n){return n.editable?n.hasFocus():$1(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function or(n,e=!1){let t=n.state.selection;if(F1(n,t),!!q1(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&At){let s=n.domSelectionRange(),l=n.domObserver.currentSelection;if(s.anchorNode&&l.anchorNode&&Hs(s.anchorNode,s.anchorOffset,l.anchorNode,l.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)fC(n);else{let{anchor:s,head:l}=t,a,c;Dy&&!(t instanceof be)&&(t.$from.parent.inlineContent||(a=zy(n,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(c=zy(n,t.to))),n.docView.setSelection(s,l,n,e),Dy&&(a&&Ly(a),c&&Ly(c)),t.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&dC(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const Dy=Ot||At&&O1<63;function zy(n,e){let{node:t,offset:s}=n.docView.domFromPos(e,0),l=s<t.childNodes.length?t.childNodes[s]:null,a=s?t.childNodes[s-1]:null;if(Ot&&l&&l.contentEditable=="false")return Wf(l);if((!l||l.contentEditable=="false")&&(!a||a.contentEditable=="false")){if(l)return Wf(l);if(a)return Wf(a)}}function Wf(n){return n.contentEditable="true",Ot&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function Ly(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function dC(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let t=n.domSelectionRange(),s=t.anchorNode,l=t.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(t.anchorNode!=s||t.anchorOffset!=l)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!q1(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function fC(n){let e=n.domSelection(),t=document.createRange();if(!e)return;let s=n.cursorWrapper.dom,l=s.nodeName=="IMG";l?t.setStart(s.parentNode,vt(s)+1):t.setStart(s,0),t.collapse(!0),e.removeAllRanges(),e.addRange(t),!l&&!n.state.selection.visible&&qt&&Jr<=11&&(s.disabled=!0,s.disabled=!1)}function F1(n,e){if(e instanceof fe){let t=n.docView.descAt(e.from);t!=n.lastSelectedViewDesc&&(By(n),t&&t.selectNode(),n.lastSelectedViewDesc=t)}else By(n)}function By(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function xp(n,e,t,s){return n.someProp("createSelectionBetween",l=>l(n,e,t))||be.between(e,t,s)}function _y(n){return n.editable&&!n.hasFocus()?!1:$1(n)}function $1(n){let e=n.domSelectionRange();if(!e.anchorNode)return!1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function hC(n){let e=n.docView.domFromPos(n.state.selection.anchor,0),t=n.domSelectionRange();return Hs(e.node,e.offset,t.anchorNode,t.anchorOffset)}function zh(n,e){let{$anchor:t,$head:s}=n.selection,l=e>0?t.max(s):t.min(s),a=l.parent.inlineContent?l.depth?n.doc.resolve(e>0?l.after():l.before()):null:l;return a&&Se.findFrom(a,e)}function Ur(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function Hy(n,e,t){let s=n.state.selection;if(s instanceof be)if(t.indexOf("s")>-1){let{$head:l}=s,a=l.textOffset?null:e<0?l.nodeBefore:l.nodeAfter;if(!a||a.isText||!a.isLeaf)return!1;let c=n.state.doc.resolve(l.pos+a.nodeSize*(e<0?-1:1));return Ur(n,new be(s.$anchor,c))}else if(s.empty){if(n.endOfTextblock(e>0?"forward":"backward")){let l=zh(n.state,e);return l&&l instanceof fe?Ur(n,l):!1}else if(!(mn&&t.indexOf("m")>-1)){let l=s.$head,a=l.textOffset?null:e<0?l.nodeBefore:l.nodeAfter,c;if(!a||a.isText)return!1;let d=e<0?l.pos-a.nodeSize:l.pos;return a.isAtom||(c=n.docView.descAt(d))&&!c.contentDOM?fe.isSelectable(a)?Ur(n,new fe(e<0?n.state.doc.resolve(l.pos-a.nodeSize):l)):Da?Ur(n,new be(n.state.doc.resolve(e<0?d:d+a.nodeSize))):!1:!1}}else return!1;else{if(s instanceof fe&&s.node.isInline)return Ur(n,new be(e>0?s.$to:s.$from));{let l=zh(n.state,e);return l?Ur(n,l):!1}}}function Nc(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function ca(n,e){let t=n.pmViewDesc;return t&&t.size==0&&(e<0||n.nextSibling||n.nodeName!="BR")}function Mi(n,e){return e<0?pC(n):mC(n)}function pC(n){let e=n.domSelectionRange(),t=e.focusNode,s=e.focusOffset;if(!t)return;let l,a,c=!1;for(kn&&t.nodeType==1&&s<Nc(t)&&ca(t.childNodes[s],-1)&&(c=!0);;)if(s>0){if(t.nodeType!=1)break;{let d=t.childNodes[s-1];if(ca(d,-1))l=t,a=--s;else if(d.nodeType==3)t=d,s=t.nodeValue.length;else break}}else{if(G1(t))break;{let d=t.previousSibling;for(;d&&ca(d,-1);)l=t.parentNode,a=vt(d),d=d.previousSibling;if(d)t=d,s=Nc(t);else{if(t=t.parentNode,t==n.dom)break;s=0}}}c?Lh(n,t,s):l&&Lh(n,l,a)}function mC(n){let e=n.domSelectionRange(),t=e.focusNode,s=e.focusOffset;if(!t)return;let l=Nc(t),a,c;for(;;)if(s<l){if(t.nodeType!=1)break;let d=t.childNodes[s];if(ca(d,1))a=t,c=++s;else break}else{if(G1(t))break;{let d=t.nextSibling;for(;d&&ca(d,1);)a=d.parentNode,c=vt(d)+1,d=d.nextSibling;if(d)t=d,s=0,l=Nc(t);else{if(t=t.parentNode,t==n.dom)break;s=l=0}}}a&&Lh(n,a,c)}function G1(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function gC(n,e){for(;n&&e==n.childNodes.length&&!Ra(n);)e=vt(n)+1,n=n.parentNode;for(;n&&e<n.childNodes.length;){let t=n.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=0}}function xC(n,e){for(;n&&!e&&!Ra(n);)e=vt(n),n=n.parentNode;for(;n&&e;){let t=n.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=n.childNodes.length}}function Lh(n,e,t){if(e.nodeType!=3){let a,c;(c=gC(e,t))?(e=c,t=0):(a=xC(e,t))&&(e=a,t=a.nodeValue.length)}let s=n.domSelection();if(!s)return;if(uu(s)){let a=document.createRange();a.setEnd(e,t),a.setStart(e,t),s.removeAllRanges(),s.addRange(a)}else s.extend&&s.extend(e,t);n.domObserver.setCurSelection();let{state:l}=n;setTimeout(()=>{n.state==l&&or(n)},50)}function Uy(n,e){let t=n.state.doc.resolve(e);if(!(At||Uj)&&t.parent.inlineContent){let l=n.coordsAtPos(e);if(e>t.start()){let a=n.coordsAtPos(e-1),c=(a.top+a.bottom)/2;if(c>l.top&&c<l.bottom&&Math.abs(a.left-l.left)>1)return a.left<l.left?"ltr":"rtl"}if(e<t.end()){let a=n.coordsAtPos(e+1),c=(a.top+a.bottom)/2;if(c>l.top&&c<l.bottom&&Math.abs(a.left-l.left)>1)return a.left>l.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function Py(n,e,t){let s=n.state.selection;if(s instanceof be&&!s.empty||t.indexOf("s")>-1||mn&&t.indexOf("m")>-1)return!1;let{$from:l,$to:a}=s;if(!l.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let c=zh(n.state,e);if(c&&c instanceof fe)return Ur(n,c)}if(!l.parent.inlineContent){let c=e<0?l:a,d=s instanceof tn?Se.near(c,e):Se.findFrom(c,e);return d?Ur(n,d):!1}return!1}function Iy(n,e){if(!(n.state.selection instanceof be))return!0;let{$head:t,$anchor:s,empty:l}=n.state.selection;if(!t.sameParent(s))return!0;if(!l)return!1;if(n.endOfTextblock(e>0?"forward":"backward"))return!0;let a=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(a&&!a.isText){let c=n.state.tr;return e<0?c.delete(t.pos-a.nodeSize,t.pos):c.delete(t.pos,t.pos+a.nodeSize),n.dispatch(c),!0}return!1}function Vy(n,e,t){n.domObserver.stop(),e.contentEditable=t,n.domObserver.start()}function yC(n){if(!Ot||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let s=e.firstChild;Vy(n,s,"true"),setTimeout(()=>Vy(n,s,"false"),20)}return!1}function bC(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}function vC(n,e){let t=e.keyCode,s=bC(e);if(t==8||mn&&t==72&&s=="c")return Iy(n,-1)||Mi(n,-1);if(t==46&&!e.shiftKey||mn&&t==68&&s=="c")return Iy(n,1)||Mi(n,1);if(t==13||t==27)return!0;if(t==37||mn&&t==66&&s=="c"){let l=t==37?Uy(n,n.state.selection.from)=="ltr"?-1:1:-1;return Hy(n,l,s)||Mi(n,l)}else if(t==39||mn&&t==70&&s=="c"){let l=t==39?Uy(n,n.state.selection.from)=="ltr"?1:-1:1;return Hy(n,l,s)||Mi(n,l)}else{if(t==38||mn&&t==80&&s=="c")return Py(n,-1,s)||Mi(n,-1);if(t==40||mn&&t==78&&s=="c")return yC(n)||Py(n,1,s)||Mi(n,1);if(s==(mn?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function yp(n,e){n.someProp("transformCopied",S=>{e=S(e,n)});let t=[],{content:s,openStart:l,openEnd:a}=e;for(;l>1&&a>1&&s.childCount==1&&s.firstChild.childCount==1;){l--,a--;let S=s.firstChild;t.push(S.type.name,S.attrs!=S.type.defaultAttrs?S.attrs:null),s=S.content}let c=n.someProp("clipboardSerializer")||Is.fromSchema(n.state.schema),d=Z1(),h=d.createElement("div");h.appendChild(c.serializeFragment(s,{document:d}));let p=h.firstChild,g,y=0;for(;p&&p.nodeType==1&&(g=X1[p.nodeName.toLowerCase()]);){for(let S=g.length-1;S>=0;S--){let v=d.createElement(g[S]);for(;h.firstChild;)v.appendChild(h.firstChild);h.appendChild(v),y++}p=h.firstChild}p&&p.nodeType==1&&p.setAttribute("data-pm-slice",`${l} ${a}${y?` -${y}`:""} ${JSON.stringify(t)}`);let b=n.someProp("clipboardTextSerializer",S=>S(e,n))||e.content.textBetween(0,e.content.size,`

`);return{dom:h,text:b,slice:e}}function Y1(n,e,t,s,l){let a=l.parent.type.spec.code,c,d;if(!t&&!e)return null;let h=e&&(s||a||!t);if(h){if(n.someProp("transformPastedText",b=>{e=b(e,a||s,n)}),a)return e?new le(W.from(n.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):le.empty;let y=n.someProp("clipboardTextParser",b=>b(e,l,s,n));if(y)d=y;else{let b=l.marks(),{schema:S}=n.state,v=Is.fromSchema(S);c=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(w=>{let k=c.appendChild(document.createElement("p"));w&&k.appendChild(v.serializeNode(S.text(w,b)))})}}else n.someProp("transformPastedHTML",y=>{t=y(t,n)}),c=kC(t),Da&&jC(c);let p=c&&c.querySelector("[data-pm-slice]"),g=p&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(p.getAttribute("data-pm-slice")||"");if(g&&g[3])for(let y=+g[3];y>0;y--){let b=c.firstChild;for(;b&&b.nodeType!=1;)b=b.nextSibling;if(!b)break;c=b}if(d||(d=(n.someProp("clipboardParser")||n.someProp("domParser")||Kr.fromSchema(n.state.schema)).parseSlice(c,{preserveWhitespace:!!(h||g),context:l,ruleFromNode(b){return b.nodeName=="BR"&&!b.nextSibling&&b.parentNode&&!SC.test(b.parentNode.nodeName)?{ignore:!0}:null}})),g)d=CC(qy(d,+g[1],+g[2]),g[4]);else if(d=le.maxOpen(NC(d.content,l),!0),d.openStart||d.openEnd){let y=0,b=0;for(let S=d.content.firstChild;y<d.openStart&&!S.type.spec.isolating;y++,S=S.firstChild);for(let S=d.content.lastChild;b<d.openEnd&&!S.type.spec.isolating;b++,S=S.lastChild);d=qy(d,y,b)}return n.someProp("transformPasted",y=>{d=y(d,n)}),d}const SC=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function NC(n,e){if(n.childCount<2)return n;for(let t=e.depth;t>=0;t--){let l=e.node(t).contentMatchAt(e.index(t)),a,c=[];if(n.forEach(d=>{if(!c)return;let h=l.findWrapping(d.type),p;if(!h)return c=null;if(p=c.length&&a.length&&J1(h,a,d,c[c.length-1],0))c[c.length-1]=p;else{c.length&&(c[c.length-1]=Q1(c[c.length-1],a.length));let g=K1(d,h);c.push(g),l=l.matchType(g.type),a=h}}),c)return W.from(c)}return n}function K1(n,e,t=0){for(let s=e.length-1;s>=t;s--)n=e[s].create(null,W.from(n));return n}function J1(n,e,t,s,l){if(l<n.length&&l<e.length&&n[l]==e[l]){let a=J1(n,e,t,s.lastChild,l+1);if(a)return s.copy(s.content.replaceChild(s.childCount-1,a));if(s.contentMatchAt(s.childCount).matchType(l==n.length-1?t.type:n[l+1]))return s.copy(s.content.append(W.from(K1(t,n,l+1))))}}function Q1(n,e){if(e==0)return n;let t=n.content.replaceChild(n.childCount-1,Q1(n.lastChild,e-1)),s=n.contentMatchAt(n.childCount).fillBefore(W.empty,!0);return n.copy(t.append(s))}function Bh(n,e,t,s,l,a){let c=e<0?n.firstChild:n.lastChild,d=c.content;return n.childCount>1&&(a=0),l<s-1&&(d=Bh(d,e,t,s,l+1,a)),l>=t&&(d=e<0?c.contentMatchAt(0).fillBefore(d,a<=l).append(d):d.append(c.contentMatchAt(c.childCount).fillBefore(W.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,c.copy(d))}function qy(n,e,t){return e<n.openStart&&(n=new le(Bh(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),t<n.openEnd&&(n=new le(Bh(n.content,1,t,n.openEnd,0,0),n.openStart,t)),n}const X1={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Fy=null;function Z1(){return Fy||(Fy=document.implementation.createHTMLDocument("title"))}let eh=null;function wC(n){let e=window.trustedTypes;return e?(eh||(eh=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:t=>t})),eh.createHTML(n)):n}function kC(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let t=Z1().createElement("div"),s=/<([a-z][^>\s]+)/i.exec(n),l;if((l=s&&X1[s[1].toLowerCase()])&&(n=l.map(a=>"<"+a+">").join("")+n+l.map(a=>"</"+a+">").reverse().join("")),t.innerHTML=wC(n),l)for(let a=0;a<l.length;a++)t=t.querySelector(l[a])||t;return t}function jC(n){let e=n.querySelectorAll(At?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let s=e[t];s.childNodes.length==1&&s.textContent==" "&&s.parentNode&&s.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),s)}}function CC(n,e){if(!n.size)return n;let t=n.content.firstChild.type.schema,s;try{s=JSON.parse(e)}catch{return n}let{content:l,openStart:a,openEnd:c}=n;for(let d=s.length-2;d>=0;d-=2){let h=t.nodes[s[d]];if(!h||h.hasRequiredAttrs())break;l=W.from(h.create(s[d+1],l)),a++,c++}return new le(l,a,c)}const Rt={},Dt={},EC={touchstart:!0,touchmove:!0};class AC{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function TC(n){for(let e in Rt){let t=Rt[e];n.dom.addEventListener(e,n.input.eventHandlers[e]=s=>{OC(n,s)&&!bp(n,s)&&(n.editable||!(s.type in Dt))&&t(n,s)},EC[e]?{passive:!0}:void 0)}Ot&&n.dom.addEventListener("input",()=>null),_h(n)}function Gr(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now()}function MC(n){n.domObserver.stop();for(let e in n.input.eventHandlers)n.dom.removeEventListener(e,n.input.eventHandlers[e]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function _h(n){n.someProp("handleDOMEvents",e=>{for(let t in e)n.input.eventHandlers[t]||n.dom.addEventListener(t,n.input.eventHandlers[t]=s=>bp(n,s))})}function bp(n,e){return n.someProp("handleDOMEvents",t=>{let s=t[e.type];return s?s(n,e)||e.defaultPrevented:!1})}function OC(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=n.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function RC(n,e){!bp(n,e)&&Rt[e.type]&&(n.editable||!(e.type in Dt))&&Rt[e.type](n,e)}Dt.keydown=(n,e)=>{let t=e;if(n.input.shiftKey=t.keyCode==16||t.shiftKey,!ev(n,t)&&(n.input.lastKeyCode=t.keyCode,n.input.lastKeyCodeTime=Date.now(),!(ir&&At&&t.keyCode==13)))if(t.keyCode!=229&&n.domObserver.forceFlush(),Fi&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let s=Date.now();n.input.lastIOSEnter=s,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==s&&(n.someProp("handleKeyDown",l=>l(n,ks(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",s=>s(n,t))||vC(n,t)?t.preventDefault():Gr(n,"key")};Dt.keyup=(n,e)=>{e.keyCode==16&&(n.input.shiftKey=!1)};Dt.keypress=(n,e)=>{let t=e;if(ev(n,t)||!t.charCode||t.ctrlKey&&!t.altKey||mn&&t.metaKey)return;if(n.someProp("handleKeyPress",l=>l(n,t))){t.preventDefault();return}let s=n.state.selection;if(!(s instanceof be)||!s.$from.sameParent(s.$to)){let l=String.fromCharCode(t.charCode),a=()=>n.state.tr.insertText(l).scrollIntoView();!/[\r\n]/.test(l)&&!n.someProp("handleTextInput",c=>c(n,s.$from.pos,s.$to.pos,l,a))&&n.dispatch(a()),t.preventDefault()}};function fu(n){return{left:n.clientX,top:n.clientY}}function DC(n,e){let t=e.x-n.clientX,s=e.y-n.clientY;return t*t+s*s<100}function vp(n,e,t,s,l){if(s==-1)return!1;let a=n.state.doc.resolve(s);for(let c=a.depth+1;c>0;c--)if(n.someProp(e,d=>c>a.depth?d(n,t,a.nodeAfter,a.before(c),l,!0):d(n,t,a.node(c),a.before(c),l,!1)))return!0;return!1}function Ui(n,e,t){if(n.focused||n.focus(),n.state.selection.eq(e))return;let s=n.state.tr.setSelection(e);s.setMeta("pointer",!0),n.dispatch(s)}function zC(n,e){if(e==-1)return!1;let t=n.state.doc.resolve(e),s=t.nodeAfter;return s&&s.isAtom&&fe.isSelectable(s)?(Ui(n,new fe(t)),!0):!1}function LC(n,e){if(e==-1)return!1;let t=n.state.selection,s,l;t instanceof fe&&(s=t.node);let a=n.state.doc.resolve(e);for(let c=a.depth+1;c>0;c--){let d=c>a.depth?a.nodeAfter:a.node(c);if(fe.isSelectable(d)){s&&t.$from.depth>0&&c>=t.$from.depth&&a.before(t.$from.depth+1)==t.$from.pos?l=a.before(t.$from.depth):l=a.before(c);break}}return l!=null?(Ui(n,fe.create(n.state.doc,l)),!0):!1}function BC(n,e,t,s,l){return vp(n,"handleClickOn",e,t,s)||n.someProp("handleClick",a=>a(n,e,s))||(l?LC(n,t):zC(n,t))}function _C(n,e,t,s){return vp(n,"handleDoubleClickOn",e,t,s)||n.someProp("handleDoubleClick",l=>l(n,e,s))}function HC(n,e,t,s){return vp(n,"handleTripleClickOn",e,t,s)||n.someProp("handleTripleClick",l=>l(n,e,s))||UC(n,t,s)}function UC(n,e,t){if(t.button!=0)return!1;let s=n.state.doc;if(e==-1)return s.inlineContent?(Ui(n,be.create(s,0,s.content.size)),!0):!1;let l=s.resolve(e);for(let a=l.depth+1;a>0;a--){let c=a>l.depth?l.nodeAfter:l.node(a),d=l.before(a);if(c.inlineContent)Ui(n,be.create(s,d+1,d+1+c.content.size));else if(fe.isSelectable(c))Ui(n,fe.create(s,d));else continue;return!0}}function Sp(n){return wc(n)}const W1=mn?"metaKey":"ctrlKey";Rt.mousedown=(n,e)=>{let t=e;n.input.shiftKey=t.shiftKey;let s=Sp(n),l=Date.now(),a="singleClick";l-n.input.lastClick.time<500&&DC(t,n.input.lastClick)&&!t[W1]&&n.input.lastClick.button==t.button&&(n.input.lastClick.type=="singleClick"?a="doubleClick":n.input.lastClick.type=="doubleClick"&&(a="tripleClick")),n.input.lastClick={time:l,x:t.clientX,y:t.clientY,type:a,button:t.button};let c=n.posAtCoords(fu(t));c&&(a=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new PC(n,c,t,!!s)):(a=="doubleClick"?_C:HC)(n,c.pos,c.inside,t)?t.preventDefault():Gr(n,"pointer"))};class PC{constructor(e,t,s,l){this.view=e,this.pos=t,this.event=s,this.flushed=l,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!s[W1],this.allowDefault=s.shiftKey;let a,c;if(t.inside>-1)a=e.state.doc.nodeAt(t.inside),c=t.inside;else{let g=e.state.doc.resolve(t.pos);a=g.parent,c=g.depth?g.before():0}const d=l?null:s.target,h=d?e.docView.nearestDesc(d,!0):null;this.target=h&&h.dom.nodeType==1?h.dom:null;let{selection:p}=e.state;(s.button==0&&a.type.spec.draggable&&a.type.spec.selectable!==!1||p instanceof fe&&p.from<=c&&p.to>c)&&(this.mightDrag={node:a,pos:c,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&kn&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Gr(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>or(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(fu(e))),this.updateAllowDefault(e),this.allowDefault||!t?Gr(this.view,"pointer"):BC(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Ot&&this.mightDrag&&!this.mightDrag.node.isAtom||At&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(Ui(this.view,Se.near(this.view.state.doc.resolve(t.pos))),e.preventDefault()):Gr(this.view,"pointer")}move(e){this.updateAllowDefault(e),Gr(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Rt.touchstart=n=>{n.input.lastTouch=Date.now(),Sp(n),Gr(n,"pointer")};Rt.touchmove=n=>{n.input.lastTouch=Date.now(),Gr(n,"pointer")};Rt.contextmenu=n=>Sp(n);function ev(n,e){return n.composing?!0:Ot&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const IC=ir?5e3:-1;Dt.compositionstart=Dt.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,t=e.selection.$to;if(e.selection instanceof be&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(s=>s.type.spec.inclusive===!1)))n.markCursor=n.state.storedMarks||t.marks(),wc(n,!0),n.markCursor=null;else if(wc(n,!e.selection.empty),kn&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let s=n.domSelectionRange();for(let l=s.focusNode,a=s.focusOffset;l&&l.nodeType==1&&a!=0;){let c=a<0?l.lastChild:l.childNodes[a-1];if(!c)break;if(c.nodeType==3){let d=n.domSelection();d&&d.collapse(c,c.nodeValue.length);break}else l=c,a=-1}}n.input.composing=!0}tv(n,IC)};Dt.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,n.input.compositionPendingChanges=n.domObserver.pendingRecords().length?n.input.compositionID:0,n.input.compositionNode=null,n.input.compositionPendingChanges&&Promise.resolve().then(()=>n.domObserver.flush()),n.input.compositionID++,tv(n,20))};function tv(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>wc(n),e))}function nv(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=qC());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function VC(n){let e=n.domSelectionRange();if(!e.focusNode)return null;let t=zj(e.focusNode,e.focusOffset),s=Lj(e.focusNode,e.focusOffset);if(t&&s&&t!=s){let l=s.pmViewDesc,a=n.domObserver.lastChangedTextNode;if(t==a||s==a)return a;if(!l||!l.isText(s.nodeValue))return s;if(n.input.compositionNode==s){let c=t.pmViewDesc;if(!(!c||!c.isText(t.nodeValue)))return s}}return t||s}function qC(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function wc(n,e=!1){if(!(ir&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),nv(n),e||n.docView&&n.docView.dirty){let t=gp(n),s=n.state.selection;return t&&!t.eq(s)?n.dispatch(n.state.tr.setSelection(t)):(n.markCursor||e)&&!s.$from.node(s.$from.sharedDepth(s.to)).inlineContent?n.dispatch(n.state.tr.deleteSelection()):n.updateState(n.state),!0}return!1}}function FC(n,e){if(!n.dom.parentNode)return;let t=n.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let s=getSelection(),l=document.createRange();l.selectNodeContents(e),n.dom.blur(),s.removeAllRanges(),s.addRange(l),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),n.focus()},50)}const Sa=qt&&Jr<15||Fi&&Pj<604;Rt.copy=Dt.cut=(n,e)=>{let t=e,s=n.state.selection,l=t.type=="cut";if(s.empty)return;let a=Sa?null:t.clipboardData,c=s.content(),{dom:d,text:h}=yp(n,c);a?(t.preventDefault(),a.clearData(),a.setData("text/html",d.innerHTML),a.setData("text/plain",h)):FC(n,d),l&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function $C(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function GC(n,e){if(!n.dom.parentNode)return;let t=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,s=n.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(s.contentEditable="true"),s.style.cssText="position: fixed; left: -10000px; top: 10px",s.focus();let l=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),s.parentNode&&s.parentNode.removeChild(s),t?Na(n,s.value,null,l,e):Na(n,s.textContent,s.innerHTML,l,e)},50)}function Na(n,e,t,s,l){let a=Y1(n,e,t,s,n.state.selection.$from);if(n.someProp("handlePaste",h=>h(n,l,a||le.empty)))return!0;if(!a)return!1;let c=$C(a),d=c?n.state.tr.replaceSelectionWith(c,s):n.state.tr.replaceSelection(a);return n.dispatch(d.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function rv(n){let e=n.getData("text/plain")||n.getData("Text");if(e)return e;let t=n.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}Dt.paste=(n,e)=>{let t=e;if(n.composing&&!ir)return;let s=Sa?null:t.clipboardData,l=n.input.shiftKey&&n.input.lastKeyCode!=45;s&&Na(n,rv(s),s.getData("text/html"),l,t)?t.preventDefault():GC(n,t)};class sv{constructor(e,t,s){this.slice=e,this.move=t,this.node=s}}const YC=mn?"altKey":"ctrlKey";function iv(n,e){let t=n.someProp("dragCopies",s=>!s(e));return t??!e[YC]}Rt.dragstart=(n,e)=>{let t=e,s=n.input.mouseDown;if(s&&s.done(),!t.dataTransfer)return;let l=n.state.selection,a=l.empty?null:n.posAtCoords(fu(t)),c;if(!(a&&a.pos>=l.from&&a.pos<=(l instanceof fe?l.to-1:l.to))){if(s&&s.mightDrag)c=fe.create(n.state.doc,s.mightDrag.pos);else if(t.target&&t.target.nodeType==1){let y=n.docView.nearestDesc(t.target,!0);y&&y.node.type.spec.draggable&&y!=n.docView&&(c=fe.create(n.state.doc,y.posBefore))}}let d=(c||n.state.selection).content(),{dom:h,text:p,slice:g}=yp(n,d);(!t.dataTransfer.files.length||!At||O1>120)&&t.dataTransfer.clearData(),t.dataTransfer.setData(Sa?"Text":"text/html",h.innerHTML),t.dataTransfer.effectAllowed="copyMove",Sa||t.dataTransfer.setData("text/plain",p),n.dragging=new sv(g,iv(n,t),c)};Rt.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null)},50)};Dt.dragover=Dt.dragenter=(n,e)=>e.preventDefault();Dt.drop=(n,e)=>{let t=e,s=n.dragging;if(n.dragging=null,!t.dataTransfer)return;let l=n.posAtCoords(fu(t));if(!l)return;let a=n.state.doc.resolve(l.pos),c=s&&s.slice;c?n.someProp("transformPasted",v=>{c=v(c,n)}):c=Y1(n,rv(t.dataTransfer),Sa?null:t.dataTransfer.getData("text/html"),!1,a);let d=!!(s&&iv(n,t));if(n.someProp("handleDrop",v=>v(n,t,c||le.empty,d))){t.preventDefault();return}if(!c)return;t.preventDefault();let h=c?N1(n.state.doc,a.pos,c):a.pos;h==null&&(h=a.pos);let p=n.state.tr;if(d){let{node:v}=s;v?v.replace(p):p.deleteSelection()}let g=p.mapping.map(h),y=c.openStart==0&&c.openEnd==0&&c.content.childCount==1,b=p.doc;if(y?p.replaceRangeWith(g,g,c.content.firstChild):p.replaceRange(g,g,c),p.doc.eq(b))return;let S=p.doc.resolve(g);if(y&&fe.isSelectable(c.content.firstChild)&&S.nodeAfter&&S.nodeAfter.sameMarkup(c.content.firstChild))p.setSelection(new fe(S));else{let v=p.mapping.map(h);p.mapping.maps[p.mapping.maps.length-1].forEach((w,k,E,O)=>v=O),p.setSelection(xp(n,S,p.doc.resolve(v)))}n.focus(),n.dispatch(p.setMeta("uiEvent","drop"))};Rt.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&or(n)},20))};Rt.blur=(n,e)=>{let t=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),t.relatedTarget&&n.dom.contains(t.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};Rt.beforeinput=(n,e)=>{if(At&&ir&&e.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:s}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=s||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",a=>a(n,ks(8,"Backspace")))))return;let{$cursor:l}=n.state.selection;l&&l.pos>0&&n.dispatch(n.state.tr.delete(l.pos-1,l.pos).scrollIntoView())},50)}};for(let n in Dt)Rt[n]=Dt[n];function wa(n,e){if(n==e)return!0;for(let t in n)if(n[t]!==e[t])return!1;for(let t in e)if(!(t in n))return!1;return!0}class kc{constructor(e,t){this.toDOM=e,this.spec=t||Ds,this.side=this.spec.side||0}map(e,t,s,l){let{pos:a,deleted:c}=e.mapResult(t.from+l,this.side<0?-1:1);return c?null:new xn(a-s,a-s,this)}valid(){return!0}eq(e){return this==e||e instanceof kc&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&wa(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Xr{constructor(e,t){this.attrs=e,this.spec=t||Ds}map(e,t,s,l){let a=e.map(t.from+l,this.spec.inclusiveStart?-1:1)-s,c=e.map(t.to+l,this.spec.inclusiveEnd?1:-1)-s;return a>=c?null:new xn(a,c,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof Xr&&wa(this.attrs,e.attrs)&&wa(this.spec,e.spec)}static is(e){return e.type instanceof Xr}destroy(){}}class Np{constructor(e,t){this.attrs=e,this.spec=t||Ds}map(e,t,s,l){let a=e.mapResult(t.from+l,1);if(a.deleted)return null;let c=e.mapResult(t.to+l,-1);return c.deleted||c.pos<=a.pos?null:new xn(a.pos-s,c.pos-s,this)}valid(e,t){let{index:s,offset:l}=e.content.findIndex(t.from),a;return l==t.from&&!(a=e.child(s)).isText&&l+a.nodeSize==t.to}eq(e){return this==e||e instanceof Np&&wa(this.attrs,e.attrs)&&wa(this.spec,e.spec)}destroy(){}}class xn{constructor(e,t,s){this.from=e,this.to=t,this.type=s}copy(e,t){return new xn(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,s){return this.type.map(e,this,t,s)}static widget(e,t,s){return new xn(e,e,new kc(t,s))}static inline(e,t,s,l){return new xn(e,t,new Xr(s,l))}static node(e,t,s,l){return new xn(e,t,new Np(s,l))}get spec(){return this.type.spec}get inline(){return this.type instanceof Xr}get widget(){return this.type instanceof kc}}const Di=[],Ds={};class rt{constructor(e,t){this.local=e.length?e:Di,this.children=t.length?t:Di}static create(e,t){return t.length?jc(t,e,0,Ds):Ct}find(e,t,s){let l=[];return this.findInner(e??0,t??1e9,l,0,s),l}findInner(e,t,s,l,a){for(let c=0;c<this.local.length;c++){let d=this.local[c];d.from<=t&&d.to>=e&&(!a||a(d.spec))&&s.push(d.copy(d.from+l,d.to+l))}for(let c=0;c<this.children.length;c+=3)if(this.children[c]<t&&this.children[c+1]>e){let d=this.children[c]+1;this.children[c+2].findInner(e-d,t-d,s,l+d,a)}}map(e,t,s){return this==Ct||e.maps.length==0?this:this.mapInner(e,t,0,0,s||Ds)}mapInner(e,t,s,l,a){let c;for(let d=0;d<this.local.length;d++){let h=this.local[d].map(e,s,l);h&&h.type.valid(t,h)?(c||(c=[])).push(h):a.onRemove&&a.onRemove(this.local[d].spec)}return this.children.length?KC(this.children,c||[],e,t,s,l,a):c?new rt(c.sort(zs),Di):Ct}add(e,t){return t.length?this==Ct?rt.create(e,t):this.addInner(e,t,0):this}addInner(e,t,s){let l,a=0;e.forEach((d,h)=>{let p=h+s,g;if(g=av(t,d,p)){for(l||(l=this.children.slice());a<l.length&&l[a]<h;)a+=3;l[a]==h?l[a+2]=l[a+2].addInner(d,g,p+1):l.splice(a,0,h,h+d.nodeSize,jc(g,d,p+1,Ds)),a+=3}});let c=lv(a?ov(t):t,-s);for(let d=0;d<c.length;d++)c[d].type.valid(e,c[d])||c.splice(d--,1);return new rt(c.length?this.local.concat(c).sort(zs):this.local,l||this.children)}remove(e){return e.length==0||this==Ct?this:this.removeInner(e,0)}removeInner(e,t){let s=this.children,l=this.local;for(let a=0;a<s.length;a+=3){let c,d=s[a]+t,h=s[a+1]+t;for(let g=0,y;g<e.length;g++)(y=e[g])&&y.from>d&&y.to<h&&(e[g]=null,(c||(c=[])).push(y));if(!c)continue;s==this.children&&(s=this.children.slice());let p=s[a+2].removeInner(c,d+1);p!=Ct?s[a+2]=p:(s.splice(a,3),a-=3)}if(l.length){for(let a=0,c;a<e.length;a++)if(c=e[a])for(let d=0;d<l.length;d++)l[d].eq(c,t)&&(l==this.local&&(l=this.local.slice()),l.splice(d--,1))}return s==this.children&&l==this.local?this:l.length||s.length?new rt(l,s):Ct}forChild(e,t){if(this==Ct)return this;if(t.isLeaf)return rt.empty;let s,l;for(let d=0;d<this.children.length;d+=3)if(this.children[d]>=e){this.children[d]==e&&(s=this.children[d+2]);break}let a=e+1,c=a+t.content.size;for(let d=0;d<this.local.length;d++){let h=this.local[d];if(h.from<c&&h.to>a&&h.type instanceof Xr){let p=Math.max(a,h.from)-a,g=Math.min(c,h.to)-a;p<g&&(l||(l=[])).push(h.copy(p,g))}}if(l){let d=new rt(l.sort(zs),Di);return s?new Vr([d,s]):d}return s||Ct}eq(e){if(this==e)return!0;if(!(e instanceof rt)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return wp(this.localsInner(e))}localsInner(e){if(this==Ct)return Di;if(e.inlineContent||!this.local.some(Xr.is))return this.local;let t=[];for(let s=0;s<this.local.length;s++)this.local[s].type instanceof Xr||t.push(this.local[s]);return t}forEachSet(e){e(this)}}rt.empty=new rt([],[]);rt.removeOverlap=wp;const Ct=rt.empty;class Vr{constructor(e){this.members=e}map(e,t){const s=this.members.map(l=>l.map(e,t,Ds));return Vr.from(s)}forChild(e,t){if(t.isLeaf)return rt.empty;let s=[];for(let l=0;l<this.members.length;l++){let a=this.members[l].forChild(e,t);a!=Ct&&(a instanceof Vr?s=s.concat(a.members):s.push(a))}return Vr.from(s)}eq(e){if(!(e instanceof Vr)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,s=!0;for(let l=0;l<this.members.length;l++){let a=this.members[l].localsInner(e);if(a.length)if(!t)t=a;else{s&&(t=t.slice(),s=!1);for(let c=0;c<a.length;c++)t.push(a[c])}}return t?wp(s?t:t.sort(zs)):Di}static from(e){switch(e.length){case 0:return Ct;case 1:return e[0];default:return new Vr(e.every(t=>t instanceof rt)?e:e.reduce((t,s)=>t.concat(s instanceof rt?s:s.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function KC(n,e,t,s,l,a,c){let d=n.slice();for(let p=0,g=a;p<t.maps.length;p++){let y=0;t.maps[p].forEach((b,S,v,w)=>{let k=w-v-(S-b);for(let E=0;E<d.length;E+=3){let O=d[E+1];if(O<0||b>O+g-y)continue;let z=d[E]+g-y;S>=z?d[E+1]=b<=z?-2:-1:b>=g&&k&&(d[E]+=k,d[E+1]+=k)}y+=k}),g=t.maps[p].map(g,-1)}let h=!1;for(let p=0;p<d.length;p+=3)if(d[p+1]<0){if(d[p+1]==-2){h=!0,d[p+1]=-1;continue}let g=t.map(n[p]+a),y=g-l;if(y<0||y>=s.content.size){h=!0;continue}let b=t.map(n[p+1]+a,-1),S=b-l,{index:v,offset:w}=s.content.findIndex(y),k=s.maybeChild(v);if(k&&w==y&&w+k.nodeSize==S){let E=d[p+2].mapInner(t,k,g+1,n[p]+a+1,c);E!=Ct?(d[p]=y,d[p+1]=S,d[p+2]=E):(d[p+1]=-2,h=!0)}else h=!0}if(h){let p=JC(d,n,e,t,l,a,c),g=jc(p,s,0,c);e=g.local;for(let y=0;y<d.length;y+=3)d[y+1]<0&&(d.splice(y,3),y-=3);for(let y=0,b=0;y<g.children.length;y+=3){let S=g.children[y];for(;b<d.length&&d[b]<S;)b+=3;d.splice(b,0,g.children[y],g.children[y+1],g.children[y+2])}}return new rt(e.sort(zs),d)}function lv(n,e){if(!e||!n.length)return n;let t=[];for(let s=0;s<n.length;s++){let l=n[s];t.push(new xn(l.from+e,l.to+e,l.type))}return t}function JC(n,e,t,s,l,a,c){function d(h,p){for(let g=0;g<h.local.length;g++){let y=h.local[g].map(s,l,p);y?t.push(y):c.onRemove&&c.onRemove(h.local[g].spec)}for(let g=0;g<h.children.length;g+=3)d(h.children[g+2],h.children[g]+p+1)}for(let h=0;h<n.length;h+=3)n[h+1]==-1&&d(n[h+2],e[h]+a+1);return t}function av(n,e,t){if(e.isLeaf)return null;let s=t+e.nodeSize,l=null;for(let a=0,c;a<n.length;a++)(c=n[a])&&c.from>t&&c.to<s&&((l||(l=[])).push(c),n[a]=null);return l}function ov(n){let e=[];for(let t=0;t<n.length;t++)n[t]!=null&&e.push(n[t]);return e}function jc(n,e,t,s){let l=[],a=!1;e.forEach((d,h)=>{let p=av(n,d,h+t);if(p){a=!0;let g=jc(p,d,t+h+1,s);g!=Ct&&l.push(h,h+d.nodeSize,g)}});let c=lv(a?ov(n):n,-t).sort(zs);for(let d=0;d<c.length;d++)c[d].type.valid(e,c[d])||(s.onRemove&&s.onRemove(c[d].spec),c.splice(d--,1));return c.length||l.length?new rt(c,l):Ct}function zs(n,e){return n.from-e.from||n.to-e.to}function wp(n){let e=n;for(let t=0;t<e.length-1;t++){let s=e[t];if(s.from!=s.to)for(let l=t+1;l<e.length;l++){let a=e[l];if(a.from==s.from){a.to!=s.to&&(e==n&&(e=n.slice()),e[l]=a.copy(a.from,s.to),$y(e,l+1,a.copy(s.to,a.to)));continue}else{a.from<s.to&&(e==n&&(e=n.slice()),e[t]=s.copy(s.from,a.from),$y(e,l,s.copy(a.from,s.to)));break}}}return e}function $y(n,e,t){for(;e<n.length&&zs(t,n[e])>0;)e++;n.splice(e,0,t)}function th(n){let e=[];return n.someProp("decorations",t=>{let s=t(n.state);s&&s!=Ct&&e.push(s)}),n.cursorWrapper&&e.push(rt.create(n.state.doc,[n.cursorWrapper.deco])),Vr.from(e)}const QC={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},XC=qt&&Jr<=11;class ZC{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class WC{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new ZC,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(s=>{for(let l=0;l<s.length;l++)this.queue.push(s[l]);qt&&Jr<=11&&s.some(l=>l.type=="childList"&&l.removedNodes.length||l.type=="characterData"&&l.oldValue.length>l.target.nodeValue.length)?this.flushSoon():this.flush()}),XC&&(this.onCharData=s=>{this.queue.push({target:s.target,type:"characterData",oldValue:s.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,QC)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(_y(this.view)){if(this.suppressingSelectionUpdates)return or(this.view);if(qt&&Jr<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Hs(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,s;for(let a=e.focusNode;a;a=qi(a))t.add(a);for(let a=e.anchorNode;a;a=qi(a))if(t.has(a)){s=a;break}let l=s&&this.view.docView.nearestDesc(s);if(l&&l.ignoreMutation({type:"selection",target:s.nodeType==3?s.parentNode:s}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let s=e.domSelectionRange(),l=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(s)&&_y(e)&&!this.ignoreSelectionChange(s),a=-1,c=-1,d=!1,h=[];if(e.editable)for(let g=0;g<t.length;g++){let y=this.registerMutation(t[g],h);y&&(a=a<0?y.from:Math.min(y.from,a),c=c<0?y.to:Math.max(y.to,c),y.typeOver&&(d=!0))}if(kn&&h.length){let g=h.filter(y=>y.nodeName=="BR");if(g.length==2){let[y,b]=g;y.parentNode&&y.parentNode.parentNode==b.parentNode?b.remove():y.remove()}else{let{focusNode:y}=this.currentSelection;for(let b of g){let S=b.parentNode;S&&S.nodeName=="LI"&&(!y||nE(e,y)!=S)&&b.remove()}}}let p=null;a<0&&l&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&uu(s)&&(p=gp(e))&&p.eq(Se.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,or(e),this.currentSelection.set(s),e.scrollToSelection()):(a>-1||l)&&(a>-1&&(e.docView.markDirty(a,c),eE(e)),this.handleDOMChange(a,c,d,h),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(s)||or(e),this.currentSelection.set(s))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let s=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(s==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!s||s.ignoreMutation(e))return null;if(e.type=="childList"){for(let g=0;g<e.addedNodes.length;g++){let y=e.addedNodes[g];t.push(y),y.nodeType==3&&(this.lastChangedTextNode=y)}if(s.contentDOM&&s.contentDOM!=s.dom&&!s.contentDOM.contains(e.target))return{from:s.posBefore,to:s.posAfter};let l=e.previousSibling,a=e.nextSibling;if(qt&&Jr<=11&&e.addedNodes.length)for(let g=0;g<e.addedNodes.length;g++){let{previousSibling:y,nextSibling:b}=e.addedNodes[g];(!y||Array.prototype.indexOf.call(e.addedNodes,y)<0)&&(l=y),(!b||Array.prototype.indexOf.call(e.addedNodes,b)<0)&&(a=b)}let c=l&&l.parentNode==e.target?vt(l)+1:0,d=s.localPosFromDOM(e.target,c,-1),h=a&&a.parentNode==e.target?vt(a):e.target.childNodes.length,p=s.localPosFromDOM(e.target,h,1);return{from:d,to:p}}else return e.type=="attributes"?{from:s.posAtStart-s.border,to:s.posAtEnd+s.border}:(this.lastChangedTextNode=e.target,{from:s.posAtStart,to:s.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let Gy=new WeakMap,Yy=!1;function eE(n){if(!Gy.has(n)&&(Gy.set(n,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace)!==-1)){if(n.requiresGeckoHackNode=kn,Yy)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Yy=!0}}function Ky(n,e){let t=e.startContainer,s=e.startOffset,l=e.endContainer,a=e.endOffset,c=n.domAtPos(n.state.selection.anchor);return Hs(c.node,c.offset,l,a)&&([t,s,l,a]=[l,a,t,s]),{anchorNode:t,anchorOffset:s,focusNode:l,focusOffset:a}}function tE(n,e){if(e.getComposedRanges){let l=e.getComposedRanges(n.root)[0];if(l)return Ky(n,l)}let t;function s(l){l.preventDefault(),l.stopImmediatePropagation(),t=l.getTargetRanges()[0]}return n.dom.addEventListener("beforeinput",s,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",s,!0),t?Ky(n,t):null}function nE(n,e){for(let t=e.parentNode;t&&t!=n.dom;t=t.parentNode){let s=n.docView.nearestDesc(t,!0);if(s&&s.node.isBlock)return t}return null}function rE(n,e,t){let{node:s,fromOffset:l,toOffset:a,from:c,to:d}=n.docView.parseRange(e,t),h=n.domSelectionRange(),p,g=h.anchorNode;if(g&&n.dom.contains(g.nodeType==1?g:g.parentNode)&&(p=[{node:g,offset:h.anchorOffset}],uu(h)||p.push({node:h.focusNode,offset:h.focusOffset})),At&&n.input.lastKeyCode===8)for(let k=a;k>l;k--){let E=s.childNodes[k-1],O=E.pmViewDesc;if(E.nodeName=="BR"&&!O){a=k;break}if(!O||O.size)break}let y=n.state.doc,b=n.someProp("domParser")||Kr.fromSchema(n.state.schema),S=y.resolve(c),v=null,w=b.parse(s,{topNode:S.parent,topMatch:S.parent.contentMatchAt(S.index()),topOpen:!0,from:l,to:a,preserveWhitespace:S.parent.type.whitespace=="pre"?"full":!0,findPositions:p,ruleFromNode:sE,context:S});if(p&&p[0].pos!=null){let k=p[0].pos,E=p[1]&&p[1].pos;E==null&&(E=k),v={anchor:k+c,head:E+c}}return{doc:w,sel:v,from:c,to:d}}function sE(n){let e=n.pmViewDesc;if(e)return e.parseRule();if(n.nodeName=="BR"&&n.parentNode){if(Ot&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(n.parentNode.lastChild==n||Ot&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}const iE=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function lE(n,e,t,s,l){let a=n.input.compositionPendingChanges||(n.composing?n.input.compositionID:0);if(n.input.compositionPendingChanges=0,e<0){let G=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,ne=gp(n,G);if(ne&&!n.state.selection.eq(ne)){if(At&&ir&&n.input.lastKeyCode===13&&Date.now()-100<n.input.lastKeyCodeTime&&n.someProp("handleKeyDown",ue=>ue(n,ks(13,"Enter"))))return;let se=n.state.tr.setSelection(ne);G=="pointer"?se.setMeta("pointer",!0):G=="key"&&se.scrollIntoView(),a&&se.setMeta("composition",a),n.dispatch(se)}return}let c=n.state.doc.resolve(e),d=c.sharedDepth(t);e=c.before(d+1),t=n.state.doc.resolve(t).after(d+1);let h=n.state.selection,p=rE(n,e,t),g=n.state.doc,y=g.slice(p.from,p.to),b,S;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(b=n.state.selection.to,S="end"):(b=n.state.selection.from,S="start"),n.input.lastKeyCode=null;let v=cE(y.content,p.doc.content,p.from,b,S);if(v&&n.input.domChangeCount++,(Fi&&n.input.lastIOSEnter>Date.now()-225||ir)&&l.some(G=>G.nodeType==1&&!iE.test(G.nodeName))&&(!v||v.endA>=v.endB)&&n.someProp("handleKeyDown",G=>G(n,ks(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!v)if(s&&h instanceof be&&!h.empty&&h.$head.sameParent(h.$anchor)&&!n.composing&&!(p.sel&&p.sel.anchor!=p.sel.head))v={start:h.from,endA:h.to,endB:h.to};else{if(p.sel){let G=Jy(n,n.state.doc,p.sel);if(G&&!G.eq(n.state.selection)){let ne=n.state.tr.setSelection(G);a&&ne.setMeta("composition",a),n.dispatch(ne)}}return}n.state.selection.from<n.state.selection.to&&v.start==v.endB&&n.state.selection instanceof be&&(v.start>n.state.selection.from&&v.start<=n.state.selection.from+2&&n.state.selection.from>=p.from?v.start=n.state.selection.from:v.endA<n.state.selection.to&&v.endA>=n.state.selection.to-2&&n.state.selection.to<=p.to&&(v.endB+=n.state.selection.to-v.endA,v.endA=n.state.selection.to)),qt&&Jr<=11&&v.endB==v.start+1&&v.endA==v.start&&v.start>p.from&&p.doc.textBetween(v.start-p.from-1,v.start-p.from+1)=="  "&&(v.start--,v.endA--,v.endB--);let w=p.doc.resolveNoCache(v.start-p.from),k=p.doc.resolveNoCache(v.endB-p.from),E=g.resolve(v.start),O=w.sameParent(k)&&w.parent.inlineContent&&E.end()>=v.endA,z;if((Fi&&n.input.lastIOSEnter>Date.now()-225&&(!O||l.some(G=>G.nodeName=="DIV"||G.nodeName=="P"))||!O&&w.pos<p.doc.content.size&&(!w.sameParent(k)||!w.parent.inlineContent)&&!/\S/.test(p.doc.textBetween(w.pos,k.pos,"",""))&&(z=Se.findFrom(p.doc.resolve(w.pos+1),1,!0))&&z.head>w.pos)&&n.someProp("handleKeyDown",G=>G(n,ks(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>v.start&&oE(g,v.start,v.endA,w,k)&&n.someProp("handleKeyDown",G=>G(n,ks(8,"Backspace")))){ir&&At&&n.domObserver.suppressSelectionUpdates();return}At&&v.endB==v.start&&(n.input.lastChromeDelete=Date.now()),ir&&!O&&w.start()!=k.start()&&k.parentOffset==0&&w.depth==k.depth&&p.sel&&p.sel.anchor==p.sel.head&&p.sel.head==v.endA&&(v.endB-=2,k=p.doc.resolveNoCache(v.endB-p.from),setTimeout(()=>{n.someProp("handleKeyDown",function(G){return G(n,ks(13,"Enter"))})},20));let q=v.start,D=v.endA,I=G=>{let ne=G||n.state.tr.replace(q,D,p.doc.slice(v.start-p.from,v.endB-p.from));if(p.sel){let se=Jy(n,ne.doc,p.sel);se&&!(At&&n.composing&&se.empty&&(v.start!=v.endB||n.input.lastChromeDelete<Date.now()-100)&&(se.head==q||se.head==ne.mapping.map(D)-1)||qt&&se.empty&&se.head==q)&&ne.setSelection(se)}return a&&ne.setMeta("composition",a),ne.scrollIntoView()},L;if(O){if(w.pos==k.pos){qt&&Jr<=11&&w.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>or(n),20));let G=I(n.state.tr.delete(q,D)),ne=g.resolve(v.start).marksAcross(g.resolve(v.endA));ne&&G.ensureMarks(ne),n.dispatch(G)}else if(v.endA==v.endB&&(L=aE(w.parent.content.cut(w.parentOffset,k.parentOffset),E.parent.content.cut(E.parentOffset,v.endA-E.start())))){let G=I(n.state.tr);L.type=="add"?G.addMark(q,D,L.mark):G.removeMark(q,D,L.mark),n.dispatch(G)}else if(w.parent.child(w.index()).isText&&w.index()==k.index()-(k.textOffset?0:1)){let G=w.parent.textBetween(w.parentOffset,k.parentOffset),ne=()=>I(n.state.tr.insertText(G,q,D));n.someProp("handleTextInput",se=>se(n,q,D,G,ne))||n.dispatch(ne())}}else n.dispatch(I())}function Jy(n,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:xp(n,e.resolve(t.anchor),e.resolve(t.head))}function aE(n,e){let t=n.firstChild.marks,s=e.firstChild.marks,l=t,a=s,c,d,h;for(let g=0;g<s.length;g++)l=s[g].removeFromSet(l);for(let g=0;g<t.length;g++)a=t[g].removeFromSet(a);if(l.length==1&&a.length==0)d=l[0],c="add",h=g=>g.mark(d.addToSet(g.marks));else if(l.length==0&&a.length==1)d=a[0],c="remove",h=g=>g.mark(d.removeFromSet(g.marks));else return null;let p=[];for(let g=0;g<e.childCount;g++)p.push(h(e.child(g)));if(W.from(p).eq(n))return{mark:d,type:c}}function oE(n,e,t,s,l){if(t-e<=l.pos-s.pos||nh(s,!0,!1)<l.pos)return!1;let a=n.resolve(e);if(!s.parent.isTextblock){let d=a.nodeAfter;return d!=null&&t==e+d.nodeSize}if(a.parentOffset<a.parent.content.size||!a.parent.isTextblock)return!1;let c=n.resolve(nh(a,!0,!0));return!c.parent.isTextblock||c.pos>t||nh(c,!0,!1)<t?!1:s.parent.content.cut(s.parentOffset).eq(c.parent.content)}function nh(n,e,t){let s=n.depth,l=e?n.end():n.pos;for(;s>0&&(e||n.indexAfter(s)==n.node(s).childCount);)s--,l++,e=!1;if(t){let a=n.node(s).maybeChild(n.indexAfter(s));for(;a&&!a.isLeaf;)a=a.firstChild,l++}return l}function cE(n,e,t,s,l){let a=n.findDiffStart(e,t);if(a==null)return null;let{a:c,b:d}=n.findDiffEnd(e,t+n.size,t+e.size);if(l=="end"){let h=Math.max(0,a-Math.min(c,d));s-=c+h-a}if(c<a&&n.size<e.size){let h=s<=a&&s>=c?a-s:0;a-=h,a&&a<e.size&&Qy(e.textBetween(a-1,a+1))&&(a+=h?1:-1),d=a+(d-c),c=a}else if(d<a){let h=s<=a&&s>=d?a-s:0;a-=h,a&&a<n.size&&Qy(n.textBetween(a-1,a+1))&&(a+=h?1:-1),c=a+(c-d),d=a}return{start:a,endA:c,endB:d}}function Qy(n){if(n.length!=2)return!1;let e=n.charCodeAt(0),t=n.charCodeAt(1);return e>=56320&&e<=57343&&t>=55296&&t<=56319}class cv{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new AC,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(tb),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=Wy(this),Zy(this),this.nodeViews=eb(this),this.docView=Oy(this.state.doc,Xy(this),th(this),this.dom,this),this.domObserver=new WC(this,(s,l,a,c)=>lE(this,s,l,a,c)),this.domObserver.start(),TC(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&_h(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(tb),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let s in this._props)t[s]=this._props[s];t.state=this.state;for(let s in e)t[s]=e[s];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var s;let l=this.state,a=!1,c=!1;e.storedMarks&&this.composing&&(nv(this),c=!0),this.state=e;let d=l.plugins!=e.plugins||this._props.plugins!=t.plugins;if(d||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let S=eb(this);dE(S,this.nodeViews)&&(this.nodeViews=S,a=!0)}(d||t.handleDOMEvents!=this._props.handleDOMEvents)&&_h(this),this.editable=Wy(this),Zy(this);let h=th(this),p=Xy(this),g=l.plugins!=e.plugins&&!l.doc.eq(e.doc)?"reset":e.scrollToSelection>l.scrollToSelection?"to selection":"preserve",y=a||!this.docView.matchesNode(e.doc,p,h);(y||!e.selection.eq(l.selection))&&(c=!0);let b=g=="preserve"&&c&&this.dom.style.overflowAnchor==null&&qj(this);if(c){this.domObserver.stop();let S=y&&(qt||At)&&!this.composing&&!l.selection.empty&&!e.selection.empty&&uE(l.selection,e.selection);if(y){let v=At?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=VC(this)),(a||!this.docView.update(e.doc,p,h,this))&&(this.docView.updateOuterDeco(p),this.docView.destroy(),this.docView=Oy(e.doc,p,h,this.dom,this)),v&&!this.trackWrites&&(S=!0)}S||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&hC(this))?or(this,S):(F1(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(l),!((s=this.dragging)===null||s===void 0)&&s.node&&!l.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,l),g=="reset"?this.dom.scrollTop=0:g=="to selection"?this.scrollToSelection():b&&Fj(b)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof fe){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&jy(this,t.getBoundingClientRect(),e)}else jy(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let s=this.directPlugins[t];s.spec.view&&this.pluginViews.push(s.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let s=this.state.plugins[t];s.spec.view&&this.pluginViews.push(s.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let s=this.pluginViews[t];s.update&&s.update(this,e)}}updateDraggedNode(e,t){let s=e.node,l=-1;if(this.state.doc.nodeAt(s.from)==s.node)l=s.from;else{let a=s.from+(this.state.doc.content.size-t.doc.content.size);(a>0&&this.state.doc.nodeAt(a))==s.node&&(l=a)}this.dragging=new sv(e.slice,e.move,l<0?void 0:fe.create(this.state.doc,l))}someProp(e,t){let s=this._props&&this._props[e],l;if(s!=null&&(l=t?t(s):s))return l;for(let c=0;c<this.directPlugins.length;c++){let d=this.directPlugins[c].props[e];if(d!=null&&(l=t?t(d):d))return l}let a=this.state.plugins;if(a)for(let c=0;c<a.length;c++){let d=a[c].props[e];if(d!=null&&(l=t?t(d):d))return l}}hasFocus(){if(qt){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&$j(this.dom),or(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}updateRoot(){this._root=null}posAtCoords(e){return Qj(this,e)}coordsAtPos(e,t=1){return B1(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,s=-1){let l=this.docView.posFromDOM(e,t,s);if(l==null)throw new RangeError("DOM position not inside the editor");return l}endOfTextblock(e,t){return tC(this,t||this.state,e)}pasteHTML(e,t){return Na(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return Na(this,e,null,!0,t||new ClipboardEvent("paste"))}serializeForClipboard(e){return yp(this,e)}destroy(){this.docView&&(MC(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],th(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,Rj())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return RC(this,e)}domSelectionRange(){let e=this.domSelection();return e?Ot&&this.root.nodeType===11&&_j(this.dom.ownerDocument)==this.dom&&tE(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}cv.prototype.dispatch=function(n){let e=this._props.dispatchTransaction;e?e.call(this,n):this.updateState(this.state.apply(n))};function Xy(n){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(n.editable),n.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(n.state)),t)for(let s in t)s=="class"?e.class+=" "+t[s]:s=="style"?e.style=(e.style?e.style+";":"")+t[s]:!e[s]&&s!="contenteditable"&&s!="nodeName"&&(e[s]=String(t[s]))}),e.translate||(e.translate="no"),[xn.node(0,n.state.doc.content.size,e)]}function Zy(n){if(n.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),n.cursorWrapper={dom:e,deco:xn.widget(n.state.selection.from,e,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function Wy(n){return!n.someProp("editable",e=>e(n.state)===!1)}function uE(n,e){let t=Math.min(n.$anchor.sharedDepth(n.head),e.$anchor.sharedDepth(e.head));return n.$anchor.start(t)!=e.$anchor.start(t)}function eb(n){let e=Object.create(null);function t(s){for(let l in s)Object.prototype.hasOwnProperty.call(e,l)||(e[l]=s[l])}return n.someProp("nodeViews",t),n.someProp("markViews",t),e}function dE(n,e){let t=0,s=0;for(let l in n){if(n[l]!=e[l])return!0;t++}for(let l in e)s++;return t!=s}function tb(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Zr={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Cc={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},fE=typeof navigator<"u"&&/Mac/.test(navigator.platform),hE=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var St=0;St<10;St++)Zr[48+St]=Zr[96+St]=String(St);for(var St=1;St<=24;St++)Zr[St+111]="F"+St;for(var St=65;St<=90;St++)Zr[St]=String.fromCharCode(St+32),Cc[St]=String.fromCharCode(St);for(var rh in Zr)Cc.hasOwnProperty(rh)||(Cc[rh]=Zr[rh]);function pE(n){var e=fE&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||hE&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?Cc:Zr)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}const mE=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),gE=typeof navigator<"u"&&/Win/.test(navigator.platform);function xE(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let s,l,a,c;for(let d=0;d<e.length-1;d++){let h=e[d];if(/^(cmd|meta|m)$/i.test(h))c=!0;else if(/^a(lt)?$/i.test(h))s=!0;else if(/^(c|ctrl|control)$/i.test(h))l=!0;else if(/^s(hift)?$/i.test(h))a=!0;else if(/^mod$/i.test(h))mE?c=!0:l=!0;else throw new Error("Unrecognized modifier name: "+h)}return s&&(t="Alt-"+t),l&&(t="Ctrl-"+t),c&&(t="Meta-"+t),a&&(t="Shift-"+t),t}function yE(n){let e=Object.create(null);for(let t in n)e[xE(t)]=n[t];return e}function sh(n,e,t=!0){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t&&e.shiftKey&&(n="Shift-"+n),n}function bE(n){return new Nt({props:{handleKeyDown:uv(n)}})}function uv(n){let e=yE(n);return function(t,s){let l=pE(s),a,c=e[sh(l,s)];if(c&&c(t.state,t.dispatch,t))return!0;if(l.length==1&&l!=" "){if(s.shiftKey){let d=e[sh(l,s,!1)];if(d&&d(t.state,t.dispatch,t))return!0}if((s.altKey||s.metaKey||s.ctrlKey)&&!(gE&&s.ctrlKey&&s.altKey)&&(a=Zr[s.keyCode])&&a!=l){let d=e[sh(a,s)];if(d&&d(t.state,t.dispatch,t))return!0}}return!1}}const kp=(n,e)=>n.selection.empty?!1:(e&&e(n.tr.deleteSelection().scrollIntoView()),!0);function dv(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("backward",n):t.parentOffset>0)?null:t}const fv=(n,e,t)=>{let s=dv(n,t);if(!s)return!1;let l=jp(s);if(!l){let c=s.blockRange(),d=c&&Xi(c);return d==null?!1:(e&&e(n.tr.lift(c,d).scrollIntoView()),!0)}let a=l.nodeBefore;if(Sv(n,l,e,-1))return!0;if(s.parent.content.size==0&&($i(a,"end")||fe.isSelectable(a)))for(let c=s.depth;;c--){let d=ou(n.doc,s.before(c),s.after(c),le.empty);if(d&&d.slice.size<d.to-d.from){if(e){let h=n.tr.step(d);h.setSelection($i(a,"end")?Se.findFrom(h.doc.resolve(h.mapping.map(l.pos,-1)),-1):fe.create(h.doc,l.pos-a.nodeSize)),e(h.scrollIntoView())}return!0}if(c==1||s.node(c-1).childCount>1)break}return a.isAtom&&l.depth==s.depth-1?(e&&e(n.tr.delete(l.pos-a.nodeSize,l.pos).scrollIntoView()),!0):!1},vE=(n,e,t)=>{let s=dv(n,t);if(!s)return!1;let l=jp(s);return l?hv(n,l,e):!1},SE=(n,e,t)=>{let s=mv(n,t);if(!s)return!1;let l=Cp(s);return l?hv(n,l,e):!1};function hv(n,e,t){let s=e.nodeBefore,l=s,a=e.pos-1;for(;!l.isTextblock;a--){if(l.type.spec.isolating)return!1;let g=l.lastChild;if(!g)return!1;l=g}let c=e.nodeAfter,d=c,h=e.pos+1;for(;!d.isTextblock;h++){if(d.type.spec.isolating)return!1;let g=d.firstChild;if(!g)return!1;d=g}let p=ou(n.doc,a,h,le.empty);if(!p||p.from!=a||p instanceof dt&&p.slice.size>=h-a)return!1;if(t){let g=n.tr.step(p);g.setSelection(be.create(g.doc,a)),t(g.scrollIntoView())}return!0}function $i(n,e,t=!1){for(let s=n;s;s=e=="start"?s.firstChild:s.lastChild){if(s.isTextblock)return!0;if(t&&s.childCount!=1)return!1}return!1}const pv=(n,e,t)=>{let{$head:s,empty:l}=n.selection,a=s;if(!l)return!1;if(s.parent.isTextblock){if(t?!t.endOfTextblock("backward",n):s.parentOffset>0)return!1;a=jp(s)}let c=a&&a.nodeBefore;return!c||!fe.isSelectable(c)?!1:(e&&e(n.tr.setSelection(fe.create(n.doc,a.pos-c.nodeSize)).scrollIntoView()),!0)};function jp(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){if(n.index(e)>0)return n.doc.resolve(n.before(e+1));if(n.node(e).type.spec.isolating)break}return null}function mv(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("forward",n):t.parentOffset<t.parent.content.size)?null:t}const gv=(n,e,t)=>{let s=mv(n,t);if(!s)return!1;let l=Cp(s);if(!l)return!1;let a=l.nodeAfter;if(Sv(n,l,e,1))return!0;if(s.parent.content.size==0&&($i(a,"start")||fe.isSelectable(a))){let c=ou(n.doc,s.before(),s.after(),le.empty);if(c&&c.slice.size<c.to-c.from){if(e){let d=n.tr.step(c);d.setSelection($i(a,"start")?Se.findFrom(d.doc.resolve(d.mapping.map(l.pos)),1):fe.create(d.doc,d.mapping.map(l.pos))),e(d.scrollIntoView())}return!0}}return a.isAtom&&l.depth==s.depth-1?(e&&e(n.tr.delete(l.pos,l.pos+a.nodeSize).scrollIntoView()),!0):!1},xv=(n,e,t)=>{let{$head:s,empty:l}=n.selection,a=s;if(!l)return!1;if(s.parent.isTextblock){if(t?!t.endOfTextblock("forward",n):s.parentOffset<s.parent.content.size)return!1;a=Cp(s)}let c=a&&a.nodeAfter;return!c||!fe.isSelectable(c)?!1:(e&&e(n.tr.setSelection(fe.create(n.doc,a.pos)).scrollIntoView()),!0)};function Cp(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){let t=n.node(e);if(n.index(e)+1<t.childCount)return n.doc.resolve(n.after(e+1));if(t.type.spec.isolating)break}return null}const NE=(n,e)=>{let t=n.selection,s=t instanceof fe,l;if(s){if(t.node.isTextblock||!Wr(n.doc,t.from))return!1;l=t.from}else if(l=au(n.doc,t.from,-1),l==null)return!1;if(e){let a=n.tr.join(l);s&&a.setSelection(fe.create(a.doc,l-n.doc.resolve(l).nodeBefore.nodeSize)),e(a.scrollIntoView())}return!0},wE=(n,e)=>{let t=n.selection,s;if(t instanceof fe){if(t.node.isTextblock||!Wr(n.doc,t.to))return!1;s=t.to}else if(s=au(n.doc,t.to,1),s==null)return!1;return e&&e(n.tr.join(s).scrollIntoView()),!0},kE=(n,e)=>{let{$from:t,$to:s}=n.selection,l=t.blockRange(s),a=l&&Xi(l);return a==null?!1:(e&&e(n.tr.lift(l,a).scrollIntoView()),!0)},yv=(n,e)=>{let{$head:t,$anchor:s}=n.selection;return!t.parent.type.spec.code||!t.sameParent(s)?!1:(e&&e(n.tr.insertText(`
`).scrollIntoView()),!0)};function Ep(n){for(let e=0;e<n.edgeCount;e++){let{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const jE=(n,e)=>{let{$head:t,$anchor:s}=n.selection;if(!t.parent.type.spec.code||!t.sameParent(s))return!1;let l=t.node(-1),a=t.indexAfter(-1),c=Ep(l.contentMatchAt(a));if(!c||!l.canReplaceWith(a,a,c))return!1;if(e){let d=t.after(),h=n.tr.replaceWith(d,d,c.createAndFill());h.setSelection(Se.near(h.doc.resolve(d),1)),e(h.scrollIntoView())}return!0},bv=(n,e)=>{let t=n.selection,{$from:s,$to:l}=t;if(t instanceof tn||s.parent.inlineContent||l.parent.inlineContent)return!1;let a=Ep(l.parent.contentMatchAt(l.indexAfter()));if(!a||!a.isTextblock)return!1;if(e){let c=(!s.parentOffset&&l.index()<l.parent.childCount?s:l).pos,d=n.tr.insert(c,a.createAndFill());d.setSelection(be.create(d.doc,c+1)),e(d.scrollIntoView())}return!0},vv=(n,e)=>{let{$cursor:t}=n.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let a=t.before();if(ar(n.doc,a))return e&&e(n.tr.split(a).scrollIntoView()),!0}let s=t.blockRange(),l=s&&Xi(s);return l==null?!1:(e&&e(n.tr.lift(s,l).scrollIntoView()),!0)};function CE(n){return(e,t)=>{let{$from:s,$to:l}=e.selection;if(e.selection instanceof fe&&e.selection.node.isBlock)return!s.parentOffset||!ar(e.doc,s.pos)?!1:(t&&t(e.tr.split(s.pos).scrollIntoView()),!0);if(!s.depth)return!1;let a=[],c,d,h=!1,p=!1;for(let S=s.depth;;S--)if(s.node(S).isBlock){h=s.end(S)==s.pos+(s.depth-S),p=s.start(S)==s.pos-(s.depth-S),d=Ep(s.node(S-1).contentMatchAt(s.indexAfter(S-1))),a.unshift(h&&d?{type:d}:null),c=S;break}else{if(S==1)return!1;a.unshift(null)}let g=e.tr;(e.selection instanceof be||e.selection instanceof tn)&&g.deleteSelection();let y=g.mapping.map(s.pos),b=ar(g.doc,y,a.length,a);if(b||(a[0]=d?{type:d}:null,b=ar(g.doc,y,a.length,a)),!b)return!1;if(g.split(y,a.length,a),!h&&p&&s.node(c).type!=d){let S=g.mapping.map(s.before(c)),v=g.doc.resolve(S);d&&s.node(c-1).canReplaceWith(v.index(),v.index()+1,d)&&g.setNodeMarkup(g.mapping.map(s.before(c)),d)}return t&&t(g.scrollIntoView()),!0}}const EE=CE(),AE=(n,e)=>{let{$from:t,to:s}=n.selection,l,a=t.sharedDepth(s);return a==0?!1:(l=t.before(a),e&&e(n.tr.setSelection(fe.create(n.doc,l))),!0)};function TE(n,e,t){let s=e.nodeBefore,l=e.nodeAfter,a=e.index();return!s||!l||!s.type.compatibleContent(l.type)?!1:!s.content.size&&e.parent.canReplace(a-1,a)?(t&&t(n.tr.delete(e.pos-s.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(a,a+1)||!(l.isTextblock||Wr(n.doc,e.pos))?!1:(t&&t(n.tr.join(e.pos).scrollIntoView()),!0)}function Sv(n,e,t,s){let l=e.nodeBefore,a=e.nodeAfter,c,d,h=l.type.spec.isolating||a.type.spec.isolating;if(!h&&TE(n,e,t))return!0;let p=!h&&e.parent.canReplace(e.index(),e.index()+1);if(p&&(c=(d=l.contentMatchAt(l.childCount)).findWrapping(a.type))&&d.matchType(c[0]||a.type).validEnd){if(t){let S=e.pos+a.nodeSize,v=W.empty;for(let E=c.length-1;E>=0;E--)v=W.from(c[E].create(null,v));v=W.from(l.copy(v));let w=n.tr.step(new ft(e.pos-1,S,e.pos,S,new le(v,1,0),c.length,!0)),k=w.doc.resolve(S+2*c.length);k.nodeAfter&&k.nodeAfter.type==l.type&&Wr(w.doc,k.pos)&&w.join(k.pos),t(w.scrollIntoView())}return!0}let g=a.type.spec.isolating||s>0&&h?null:Se.findFrom(e,1),y=g&&g.$from.blockRange(g.$to),b=y&&Xi(y);if(b!=null&&b>=e.depth)return t&&t(n.tr.lift(y,b).scrollIntoView()),!0;if(p&&$i(a,"start",!0)&&$i(l,"end")){let S=l,v=[];for(;v.push(S),!S.isTextblock;)S=S.lastChild;let w=a,k=1;for(;!w.isTextblock;w=w.firstChild)k++;if(S.canReplace(S.childCount,S.childCount,w.content)){if(t){let E=W.empty;for(let z=v.length-1;z>=0;z--)E=W.from(v[z].copy(E));let O=n.tr.step(new ft(e.pos-v.length,e.pos+a.nodeSize,e.pos+k,e.pos+a.nodeSize-k,new le(E,v.length,0),0,!0));t(O.scrollIntoView())}return!0}}return!1}function Nv(n){return function(e,t){let s=e.selection,l=n<0?s.$from:s.$to,a=l.depth;for(;l.node(a).isInline;){if(!a)return!1;a--}return l.node(a).isTextblock?(t&&t(e.tr.setSelection(be.create(e.doc,n<0?l.start(a):l.end(a)))),!0):!1}}const ME=Nv(-1),OE=Nv(1);function RE(n,e=null){return function(t,s){let{$from:l,$to:a}=t.selection,c=l.blockRange(a),d=c&&hp(c,n,e);return d?(s&&s(t.tr.wrap(c,d).scrollIntoView()),!0):!1}}function nb(n,e=null){return function(t,s){let l=!1;for(let a=0;a<t.selection.ranges.length&&!l;a++){let{$from:{pos:c},$to:{pos:d}}=t.selection.ranges[a];t.doc.nodesBetween(c,d,(h,p)=>{if(l)return!1;if(!(!h.isTextblock||h.hasMarkup(n,e)))if(h.type==n)l=!0;else{let g=t.doc.resolve(p),y=g.index();l=g.parent.canReplaceWith(y,y+1,n)}})}if(!l)return!1;if(s){let a=t.tr;for(let c=0;c<t.selection.ranges.length;c++){let{$from:{pos:d},$to:{pos:h}}=t.selection.ranges[c];a.setBlockType(d,h,n,e)}s(a.scrollIntoView())}return!0}}function Ap(...n){return function(e,t,s){for(let l=0;l<n.length;l++)if(n[l](e,t,s))return!0;return!1}}Ap(kp,fv,pv);Ap(kp,gv,xv);Ap(yv,bv,vv,EE);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function DE(n,e=null){return function(t,s){let{$from:l,$to:a}=t.selection,c=l.blockRange(a);if(!c)return!1;let d=s?t.tr:null;return zE(d,c,n,e)?(s&&s(d.scrollIntoView()),!0):!1}}function zE(n,e,t,s=null){let l=!1,a=e,c=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(t)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let h=c.resolve(e.start-2);a=new bc(h,h,e.depth),e.endIndex<e.parent.childCount&&(e=new bc(e.$from,c.resolve(e.$to.end(e.depth)),e.depth)),l=!0}let d=hp(a,t,s,e);return d?(n&&LE(n,e,d,l,t),!0):!1}function LE(n,e,t,s,l){let a=W.empty;for(let g=t.length-1;g>=0;g--)a=W.from(t[g].type.create(t[g].attrs,a));n.step(new ft(e.start-(s?2:0),e.end,e.start,e.end,new le(a,0,0),t.length,!0));let c=0;for(let g=0;g<t.length;g++)t[g].type==l&&(c=g+1);let d=t.length-c,h=e.start+t.length-(s?2:0),p=e.parent;for(let g=e.startIndex,y=e.endIndex,b=!0;g<y;g++,b=!1)!b&&ar(n.doc,h,d)&&(n.split(h,d),h+=2*d),h+=p.child(g).nodeSize;return n}function BE(n){return function(e,t){let{$from:s,$to:l}=e.selection,a=s.blockRange(l,c=>c.childCount>0&&c.firstChild.type==n);return a?t?s.node(a.depth-1).type==n?_E(e,t,n,a):HE(e,t,a):!0:!1}}function _E(n,e,t,s){let l=n.tr,a=s.end,c=s.$to.end(s.depth);a<c&&(l.step(new ft(a-1,c,a,c,new le(W.from(t.create(null,s.parent.copy())),1,0),1,!0)),s=new bc(l.doc.resolve(s.$from.pos),l.doc.resolve(c),s.depth));const d=Xi(s);if(d==null)return!1;l.lift(s,d);let h=l.doc.resolve(l.mapping.map(a,-1)-1);return Wr(l.doc,h.pos)&&h.nodeBefore.type==h.nodeAfter.type&&l.join(h.pos),e(l.scrollIntoView()),!0}function HE(n,e,t){let s=n.tr,l=t.parent;for(let S=t.end,v=t.endIndex-1,w=t.startIndex;v>w;v--)S-=l.child(v).nodeSize,s.delete(S-1,S+1);let a=s.doc.resolve(t.start),c=a.nodeAfter;if(s.mapping.map(t.end)!=t.start+a.nodeAfter.nodeSize)return!1;let d=t.startIndex==0,h=t.endIndex==l.childCount,p=a.node(-1),g=a.index(-1);if(!p.canReplace(g+(d?0:1),g+1,c.content.append(h?W.empty:W.from(l))))return!1;let y=a.pos,b=y+c.nodeSize;return s.step(new ft(y-(d?1:0),b+(h?1:0),y+1,b-1,new le((d?W.empty:W.from(l.copy(W.empty))).append(h?W.empty:W.from(l.copy(W.empty))),d?0:1,h?0:1),d?0:1)),e(s.scrollIntoView()),!0}function UE(n){return function(e,t){let{$from:s,$to:l}=e.selection,a=s.blockRange(l,p=>p.childCount>0&&p.firstChild.type==n);if(!a)return!1;let c=a.startIndex;if(c==0)return!1;let d=a.parent,h=d.child(c-1);if(h.type!=n)return!1;if(t){let p=h.lastChild&&h.lastChild.type==d.type,g=W.from(p?n.create():null),y=new le(W.from(n.create(null,W.from(d.type.create(null,g)))),p?3:1,0),b=a.start,S=a.end;t(e.tr.step(new ft(b-(p?3:1),S,b,S,y,1,!0)).scrollIntoView())}return!0}}function hu(n){const{state:e,transaction:t}=n;let{selection:s}=t,{doc:l}=t,{storedMarks:a}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return a},get selection(){return s},get doc(){return l},get tr(){return s=t.selection,l=t.doc,a=t.storedMarks,t}}}class pu{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:s}=this,{view:l}=t,{tr:a}=s,c=this.buildProps(a);return Object.fromEntries(Object.entries(e).map(([d,h])=>[d,(...g)=>{const y=h(...g)(c);return!a.getMeta("preventDispatch")&&!this.hasCustomState&&l.dispatch(a),y}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:s,editor:l,state:a}=this,{view:c}=l,d=[],h=!!e,p=e||a.tr,g=()=>(!h&&t&&!p.getMeta("preventDispatch")&&!this.hasCustomState&&c.dispatch(p),d.every(b=>b===!0)),y={...Object.fromEntries(Object.entries(s).map(([b,S])=>[b,(...w)=>{const k=this.buildProps(p,t),E=S(...w)(k);return d.push(E),y}])),run:g};return y}createCan(e){const{rawCommands:t,state:s}=this,l=!1,a=e||s.tr,c=this.buildProps(a,l);return{...Object.fromEntries(Object.entries(t).map(([h,p])=>[h,(...g)=>p(...g)({...c,dispatch:void 0})])),chain:()=>this.createChain(a,l)}}buildProps(e,t=!0){const{rawCommands:s,editor:l,state:a}=this,{view:c}=l,d={tr:e,editor:l,view:c,state:hu({state:a,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(s).map(([h,p])=>[h,(...g)=>p(...g)(d)]))}};return d}}class PE{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const s=this.callbacks[e];return s&&s.forEach(l=>l.apply(this,t)),this}off(e,t){const s=this.callbacks[e];return s&&(t?this.callbacks[e]=s.filter(l=>l!==t):delete this.callbacks[e]),this}once(e,t){const s=(...l)=>{this.off(e,s),t.apply(this,l)};return this.on(e,s)}removeAllListeners(){this.callbacks={}}}function ce(n,e,t){return n.config[e]===void 0&&n.parent?ce(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?ce(n.parent,e,t):null}):n.config[e]}function mu(n){const e=n.filter(l=>l.type==="extension"),t=n.filter(l=>l.type==="node"),s=n.filter(l=>l.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:s}}function wv(n){const e=[],{nodeExtensions:t,markExtensions:s}=mu(n),l=[...t,...s],a={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return n.forEach(c=>{const d={name:c.name,options:c.options,storage:c.storage,extensions:l},h=ce(c,"addGlobalAttributes",d);if(!h)return;h().forEach(g=>{g.types.forEach(y=>{Object.entries(g.attributes).forEach(([b,S])=>{e.push({type:y,name:b,attribute:{...a,...S}})})})})}),l.forEach(c=>{const d={name:c.name,options:c.options,storage:c.storage},h=ce(c,"addAttributes",d);if(!h)return;const p=h();Object.entries(p).forEach(([g,y])=>{const b={...a,...y};typeof(b==null?void 0:b.default)=="function"&&(b.default=b.default()),b!=null&&b.isRequired&&(b==null?void 0:b.default)===void 0&&delete b.default,e.push({type:c.name,name:g,attribute:b})})}),e}function pt(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}function mt(...n){return n.filter(e=>!!e).reduce((e,t)=>{const s={...e};return Object.entries(t).forEach(([l,a])=>{if(!s[l]){s[l]=a;return}if(l==="class"){const d=a?String(a).split(" "):[],h=s[l]?s[l].split(" "):[],p=d.filter(g=>!h.includes(g));s[l]=[...h,...p].join(" ")}else if(l==="style"){const d=a?a.split(";").map(g=>g.trim()).filter(Boolean):[],h=s[l]?s[l].split(";").map(g=>g.trim()).filter(Boolean):[],p=new Map;h.forEach(g=>{const[y,b]=g.split(":").map(S=>S.trim());p.set(y,b)}),d.forEach(g=>{const[y,b]=g.split(":").map(S=>S.trim());p.set(y,b)}),s[l]=Array.from(p.entries()).map(([g,y])=>`${g}: ${y}`).join("; ")}else s[l]=a}),s},{})}function Hh(n,e){return e.filter(t=>t.type===n.type.name).filter(t=>t.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(n.attrs)||{}:{[t.name]:n.attrs[t.name]}).reduce((t,s)=>mt(t,s),{})}function kv(n){return typeof n=="function"}function ke(n,e=void 0,...t){return kv(n)?e?n.bind(e)(...t):n(...t):n}function IE(n={}){return Object.keys(n).length===0&&n.constructor===Object}function VE(n){return typeof n!="string"?n:n.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(n):n==="true"?!0:n==="false"?!1:n}function rb(n,e){return"style"in n?n:{...n,getAttrs:t=>{const s=n.getAttrs?n.getAttrs(t):n.attrs;if(s===!1)return!1;const l=e.reduce((a,c)=>{const d=c.attribute.parseHTML?c.attribute.parseHTML(t):VE(t.getAttribute(c.name));return d==null?a:{...a,[c.name]:d}},{});return{...s,...l}}}}function sb(n){return Object.fromEntries(Object.entries(n).filter(([e,t])=>e==="attrs"&&IE(t)?!1:t!=null))}function qE(n,e){var t;const s=wv(n),{nodeExtensions:l,markExtensions:a}=mu(n),c=(t=l.find(p=>ce(p,"topNode")))===null||t===void 0?void 0:t.name,d=Object.fromEntries(l.map(p=>{const g=s.filter(E=>E.type===p.name),y={name:p.name,options:p.options,storage:p.storage,editor:e},b=n.reduce((E,O)=>{const z=ce(O,"extendNodeSchema",y);return{...E,...z?z(p):{}}},{}),S=sb({...b,content:ke(ce(p,"content",y)),marks:ke(ce(p,"marks",y)),group:ke(ce(p,"group",y)),inline:ke(ce(p,"inline",y)),atom:ke(ce(p,"atom",y)),selectable:ke(ce(p,"selectable",y)),draggable:ke(ce(p,"draggable",y)),code:ke(ce(p,"code",y)),whitespace:ke(ce(p,"whitespace",y)),linebreakReplacement:ke(ce(p,"linebreakReplacement",y)),defining:ke(ce(p,"defining",y)),isolating:ke(ce(p,"isolating",y)),attrs:Object.fromEntries(g.map(E=>{var O;return[E.name,{default:(O=E==null?void 0:E.attribute)===null||O===void 0?void 0:O.default}]}))}),v=ke(ce(p,"parseHTML",y));v&&(S.parseDOM=v.map(E=>rb(E,g)));const w=ce(p,"renderHTML",y);w&&(S.toDOM=E=>w({node:E,HTMLAttributes:Hh(E,g)}));const k=ce(p,"renderText",y);return k&&(S.toText=k),[p.name,S]})),h=Object.fromEntries(a.map(p=>{const g=s.filter(k=>k.type===p.name),y={name:p.name,options:p.options,storage:p.storage,editor:e},b=n.reduce((k,E)=>{const O=ce(E,"extendMarkSchema",y);return{...k,...O?O(p):{}}},{}),S=sb({...b,inclusive:ke(ce(p,"inclusive",y)),excludes:ke(ce(p,"excludes",y)),group:ke(ce(p,"group",y)),spanning:ke(ce(p,"spanning",y)),code:ke(ce(p,"code",y)),attrs:Object.fromEntries(g.map(k=>{var E;return[k.name,{default:(E=k==null?void 0:k.attribute)===null||E===void 0?void 0:E.default}]}))}),v=ke(ce(p,"parseHTML",y));v&&(S.parseDOM=v.map(k=>rb(k,g)));const w=ce(p,"renderHTML",y);return w&&(S.toDOM=k=>w({mark:k,HTMLAttributes:Hh(k,g)})),[p.name,S]}));return new d1({topNode:c,nodes:d,marks:h})}function ih(n,e){return e.nodes[n]||e.marks[n]||null}function ib(n,e){return Array.isArray(e)?e.some(t=>(typeof t=="string"?t:t.name)===n.name):e}function Tp(n,e){const t=Is.fromSchema(e).serializeFragment(n),l=document.implementation.createHTMLDocument().createElement("div");return l.appendChild(t),l.innerHTML}const FE=(n,e=500)=>{let t="";const s=n.parentOffset;return n.parent.nodesBetween(Math.max(0,s-e),s,(l,a,c,d)=>{var h,p;const g=((p=(h=l.type.spec).toText)===null||p===void 0?void 0:p.call(h,{node:l,pos:a,parent:c,index:d}))||l.textContent||"%leaf%";t+=l.isAtom&&!l.isText?g:g.slice(0,Math.max(0,s-a))}),t};function Mp(n){return Object.prototype.toString.call(n)==="[object RegExp]"}class gu{constructor(e){this.find=e.find,this.handler=e.handler}}const $E=(n,e)=>{if(Mp(e))return e.exec(n);const t=e(n);if(!t)return null;const s=[t.text];return s.index=t.index,s.input=n,s.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),s.push(t.replaceWith)),s};function Wo(n){var e;const{editor:t,from:s,to:l,text:a,rules:c,plugin:d}=n,{view:h}=t;if(h.composing)return!1;const p=h.state.doc.resolve(s);if(p.parent.type.spec.code||!((e=p.nodeBefore||p.nodeAfter)===null||e===void 0)&&e.marks.find(b=>b.type.spec.code))return!1;let g=!1;const y=FE(p)+a;return c.forEach(b=>{if(g)return;const S=$E(y,b.find);if(!S)return;const v=h.state.tr,w=hu({state:h.state,transaction:v}),k={from:s-(S[0].length-a.length),to:l},{commands:E,chain:O,can:z}=new pu({editor:t,state:w});b.handler({state:w,range:k,match:S,commands:E,chain:O,can:z})===null||!v.steps.length||(v.setMeta(d,{transform:v,from:s,to:l,text:a}),h.dispatch(v),g=!0)}),g}function GE(n){const{editor:e,rules:t}=n,s=new Nt({state:{init(){return null},apply(l,a,c){const d=l.getMeta(s);if(d)return d;const h=l.getMeta("applyInputRules");return!!h&&setTimeout(()=>{let{text:g}=h;typeof g=="string"?g=g:g=Tp(W.from(g),c.schema);const{from:y}=h,b=y+g.length;Wo({editor:e,from:y,to:b,text:g,rules:t,plugin:s})}),l.selectionSet||l.docChanged?null:a}},props:{handleTextInput(l,a,c,d){return Wo({editor:e,from:a,to:c,text:d,rules:t,plugin:s})},handleDOMEvents:{compositionend:l=>(setTimeout(()=>{const{$cursor:a}=l.state.selection;a&&Wo({editor:e,from:a.pos,to:a.pos,text:"",rules:t,plugin:s})}),!1)},handleKeyDown(l,a){if(a.key!=="Enter")return!1;const{$cursor:c}=l.state.selection;return c?Wo({editor:e,from:c.pos,to:c.pos,text:`
`,rules:t,plugin:s}):!1}},isInputRules:!0});return s}function YE(n){return Object.prototype.toString.call(n).slice(8,-1)}function ec(n){return YE(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function xu(n,e){const t={...n};return ec(n)&&ec(e)&&Object.keys(e).forEach(s=>{ec(e[s])&&ec(n[s])?t[s]=xu(n[s],e[s]):t[s]=e[s]}),t}class ur{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ke(ce(this,"addOptions",{name:this.name}))),this.storage=ke(ce(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new ur(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>xu(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new ur(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=ke(ce(t,"addOptions",{name:t.name})),t.storage=ke(ce(t,"addStorage",{name:t.name,options:t.options})),t}static handleExit({editor:e,mark:t}){const{tr:s}=e.state,l=e.state.selection.$from;if(l.pos===l.end()){const c=l.marks();if(!!!c.find(p=>(p==null?void 0:p.type.name)===t.name))return!1;const h=c.find(p=>(p==null?void 0:p.type.name)===t.name);return h&&s.removeStoredMark(h),s.insertText(" ",l.pos),e.view.dispatch(s),!0}return!1}}function KE(n){return typeof n=="number"}class JE{constructor(e){this.find=e.find,this.handler=e.handler}}const QE=(n,e,t)=>{if(Mp(e))return[...n.matchAll(e)];const s=e(n,t);return s?s.map(l=>{const a=[l.text];return a.index=l.index,a.input=n,a.data=l.data,l.replaceWith&&(l.text.includes(l.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),a.push(l.replaceWith)),a}):[]};function XE(n){const{editor:e,state:t,from:s,to:l,rule:a,pasteEvent:c,dropEvent:d}=n,{commands:h,chain:p,can:g}=new pu({editor:e,state:t}),y=[];return t.doc.nodesBetween(s,l,(S,v)=>{if(!S.isTextblock||S.type.spec.code)return;const w=Math.max(s,v),k=Math.min(l,v+S.content.size),E=S.textBetween(w-v,k-v,void 0,"￼");QE(E,a.find,c).forEach(z=>{if(z.index===void 0)return;const q=w+z.index+1,D=q+z[0].length,I={from:t.tr.mapping.map(q),to:t.tr.mapping.map(D)},L=a.handler({state:t,range:I,match:z,commands:h,chain:p,can:g,pasteEvent:c,dropEvent:d});y.push(L)})}),y.every(S=>S!==null)}let tc=null;const ZE=n=>{var e;const t=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=t.clipboardData)===null||e===void 0||e.setData("text/html",n),t};function WE(n){const{editor:e,rules:t}=n;let s=null,l=!1,a=!1,c=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,d;try{d=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{d=null}const h=({state:g,from:y,to:b,rule:S,pasteEvt:v})=>{const w=g.tr,k=hu({state:g,transaction:w});if(!(!XE({editor:e,state:k,from:Math.max(y-1,0),to:b.b-1,rule:S,pasteEvent:v,dropEvent:d})||!w.steps.length)){try{d=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{d=null}return c=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,w}};return t.map(g=>new Nt({view(y){const b=v=>{var w;s=!((w=y.dom.parentElement)===null||w===void 0)&&w.contains(v.target)?y.dom.parentElement:null,s&&(tc=e)},S=()=>{tc&&(tc=null)};return window.addEventListener("dragstart",b),window.addEventListener("dragend",S),{destroy(){window.removeEventListener("dragstart",b),window.removeEventListener("dragend",S)}}},props:{handleDOMEvents:{drop:(y,b)=>{if(a=s===y.dom.parentElement,d=b,!a){const S=tc;S&&setTimeout(()=>{const v=S.state.selection;v&&S.commands.deleteRange({from:v.from,to:v.to})},10)}return!1},paste:(y,b)=>{var S;const v=(S=b.clipboardData)===null||S===void 0?void 0:S.getData("text/html");return c=b,l=!!(v!=null&&v.includes("data-pm-slice")),!1}}},appendTransaction:(y,b,S)=>{const v=y[0],w=v.getMeta("uiEvent")==="paste"&&!l,k=v.getMeta("uiEvent")==="drop"&&!a,E=v.getMeta("applyPasteRules"),O=!!E;if(!w&&!k&&!O)return;if(O){let{text:D}=E;typeof D=="string"?D=D:D=Tp(W.from(D),S.schema);const{from:I}=E,L=I+D.length,G=ZE(D);return h({rule:g,state:S,from:I,to:{b:L},pasteEvt:G})}const z=b.doc.content.findDiffStart(S.doc.content),q=b.doc.content.findDiffEnd(S.doc.content);if(!(!KE(z)||!q||z===q.b))return h({rule:g,state:S,from:z,to:q,pasteEvt:c})}}))}function e3(n){const e=n.filter((t,s)=>n.indexOf(t)!==s);return Array.from(new Set(e))}class Bi{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=Bi.resolve(e),this.schema=qE(this.extensions,t),this.setupExtensions()}static resolve(e){const t=Bi.sort(Bi.flatten(e)),s=e3(t.map(l=>l.name));return s.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${s.map(l=>`'${l}'`).join(", ")}]. This can lead to issues.`),t}static flatten(e){return e.map(t=>{const s={name:t.name,options:t.options,storage:t.storage},l=ce(t,"addExtensions",s);return l?[t,...this.flatten(l())]:t}).flat(10)}static sort(e){return e.sort((s,l)=>{const a=ce(s,"priority")||100,c=ce(l,"priority")||100;return a>c?-1:a<c?1:0})}get commands(){return this.extensions.reduce((e,t)=>{const s={name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:ih(t.name,this.schema)},l=ce(t,"addCommands",s);return l?{...e,...l()}:e},{})}get plugins(){const{editor:e}=this,t=Bi.sort([...this.extensions].reverse()),s=[],l=[],a=t.map(c=>{const d={name:c.name,options:c.options,storage:c.storage,editor:e,type:ih(c.name,this.schema)},h=[],p=ce(c,"addKeyboardShortcuts",d);let g={};if(c.type==="mark"&&ce(c,"exitable",d)&&(g.ArrowRight=()=>ur.handleExit({editor:e,mark:c})),p){const w=Object.fromEntries(Object.entries(p()).map(([k,E])=>[k,()=>E({editor:e})]));g={...g,...w}}const y=bE(g);h.push(y);const b=ce(c,"addInputRules",d);ib(c,e.options.enableInputRules)&&b&&s.push(...b());const S=ce(c,"addPasteRules",d);ib(c,e.options.enablePasteRules)&&S&&l.push(...S());const v=ce(c,"addProseMirrorPlugins",d);if(v){const w=v();h.push(...w)}return h}).flat();return[GE({editor:e,rules:s}),...WE({editor:e,rules:l}),...a]}get attributes(){return wv(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=mu(this.extensions);return Object.fromEntries(t.filter(s=>!!ce(s,"addNodeView")).map(s=>{const l=this.attributes.filter(h=>h.type===s.name),a={name:s.name,options:s.options,storage:s.storage,editor:e,type:pt(s.name,this.schema)},c=ce(s,"addNodeView",a);if(!c)return[];const d=(h,p,g,y,b)=>{const S=Hh(h,l);return c()({node:h,view:p,getPos:g,decorations:y,innerDecorations:b,editor:e,extension:s,HTMLAttributes:S})};return[s.name,d]}))}setupExtensions(){this.extensions.forEach(e=>{var t;this.editor.extensionStorage[e.name]=e.storage;const s={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:ih(e.name,this.schema)};e.type==="mark"&&(!((t=ke(ce(e,"keepOnSplit",s)))!==null&&t!==void 0)||t)&&this.splittableMarks.push(e.name);const l=ce(e,"onBeforeCreate",s),a=ce(e,"onCreate",s),c=ce(e,"onUpdate",s),d=ce(e,"onSelectionUpdate",s),h=ce(e,"onTransaction",s),p=ce(e,"onFocus",s),g=ce(e,"onBlur",s),y=ce(e,"onDestroy",s);l&&this.editor.on("beforeCreate",l),a&&this.editor.on("create",a),c&&this.editor.on("update",c),d&&this.editor.on("selectionUpdate",d),h&&this.editor.on("transaction",h),p&&this.editor.on("focus",p),g&&this.editor.on("blur",g),y&&this.editor.on("destroy",y)})}}class zt{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ke(ce(this,"addOptions",{name:this.name}))),this.storage=ke(ce(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new zt(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>xu(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new zt({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=ke(ce(t,"addOptions",{name:t.name})),t.storage=ke(ce(t,"addStorage",{name:t.name,options:t.options})),t}}function jv(n,e,t){const{from:s,to:l}=e,{blockSeparator:a=`

`,textSerializers:c={}}=t||{};let d="";return n.nodesBetween(s,l,(h,p,g,y)=>{var b;h.isBlock&&p>s&&(d+=a);const S=c==null?void 0:c[h.type.name];if(S)return g&&(d+=S({node:h,pos:p,parent:g,index:y,range:e})),!1;h.isText&&(d+=(b=h==null?void 0:h.text)===null||b===void 0?void 0:b.slice(Math.max(s,p)-p,l-p))}),d}function Cv(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}const t3=zt.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Nt({key:new nn("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:s,selection:l}=e,{ranges:a}=l,c=Math.min(...a.map(g=>g.$from.pos)),d=Math.max(...a.map(g=>g.$to.pos)),h=Cv(t);return jv(s,{from:c,to:d},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:h})}}})]}}),n3=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())===null||t===void 0||t.removeAllRanges())}),!0),r3=(n=!1)=>({commands:e})=>e.setContent("",n),s3=()=>({state:n,tr:e,dispatch:t})=>{const{selection:s}=e,{ranges:l}=s;return t&&l.forEach(({$from:a,$to:c})=>{n.doc.nodesBetween(a.pos,c.pos,(d,h)=>{if(d.type.isText)return;const{doc:p,mapping:g}=e,y=p.resolve(g.map(h)),b=p.resolve(g.map(h+d.nodeSize)),S=y.blockRange(b);if(!S)return;const v=Xi(S);if(d.type.isTextblock){const{defaultType:w}=y.parent.contentMatchAt(y.index());e.setNodeMarkup(S.start,w)}(v||v===0)&&e.lift(S,v)})}),!0},i3=n=>e=>n(e),l3=()=>({state:n,dispatch:e})=>bv(n,e),a3=(n,e)=>({editor:t,tr:s})=>{const{state:l}=t,a=l.doc.slice(n.from,n.to);s.deleteRange(n.from,n.to);const c=s.mapping.map(e);return s.insert(c,a.content),s.setSelection(new be(s.doc.resolve(c-1))),!0},o3=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,s=t.$anchor.node();if(s.content.size>0)return!1;const l=n.selection.$anchor;for(let a=l.depth;a>0;a-=1)if(l.node(a).type===s.type){if(e){const d=l.before(a),h=l.after(a);n.delete(d,h).scrollIntoView()}return!0}return!1},c3=n=>({tr:e,state:t,dispatch:s})=>{const l=pt(n,t.schema),a=e.selection.$anchor;for(let c=a.depth;c>0;c-=1)if(a.node(c).type===l){if(s){const h=a.before(c),p=a.after(c);e.delete(h,p).scrollIntoView()}return!0}return!1},u3=n=>({tr:e,dispatch:t})=>{const{from:s,to:l}=n;return t&&e.delete(s,l),!0},d3=()=>({state:n,dispatch:e})=>kp(n,e),f3=()=>({commands:n})=>n.keyboardShortcut("Enter"),h3=()=>({state:n,dispatch:e})=>jE(n,e);function Ec(n,e,t={strict:!0}){const s=Object.keys(e);return s.length?s.every(l=>t.strict?e[l]===n[l]:Mp(e[l])?e[l].test(n[l]):e[l]===n[l]):!0}function Ev(n,e,t={}){return n.find(s=>s.type===e&&Ec(Object.fromEntries(Object.keys(t).map(l=>[l,s.attrs[l]])),t))}function lb(n,e,t={}){return!!Ev(n,e,t)}function Op(n,e,t){var s;if(!n||!e)return;let l=n.parent.childAfter(n.parentOffset);if((!l.node||!l.node.marks.some(g=>g.type===e))&&(l=n.parent.childBefore(n.parentOffset)),!l.node||!l.node.marks.some(g=>g.type===e)||(t=t||((s=l.node.marks[0])===null||s===void 0?void 0:s.attrs),!Ev([...l.node.marks],e,t)))return;let c=l.index,d=n.start()+l.offset,h=c+1,p=d+l.node.nodeSize;for(;c>0&&lb([...n.parent.child(c-1).marks],e,t);)c-=1,d-=n.parent.child(c).nodeSize;for(;h<n.parent.childCount&&lb([...n.parent.child(h).marks],e,t);)p+=n.parent.child(h).nodeSize,h+=1;return{from:d,to:p}}function ts(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}const p3=(n,e={})=>({tr:t,state:s,dispatch:l})=>{const a=ts(n,s.schema),{doc:c,selection:d}=t,{$from:h,from:p,to:g}=d;if(l){const y=Op(h,a,e);if(y&&y.from<=p&&y.to>=g){const b=be.create(c,y.from,y.to);t.setSelection(b)}}return!0},m3=n=>e=>{const t=typeof n=="function"?n(e):n;for(let s=0;s<t.length;s+=1)if(t[s](e))return!0;return!1};function Av(n){return n instanceof be}function As(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function Tv(n,e=null){if(!e)return null;const t=Se.atStart(n),s=Se.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return s;const l=t.from,a=s.to;return e==="all"?be.create(n,As(0,l,a),As(n.content.size,l,a)):be.create(n,As(e,l,a),As(e,l,a))}function g3(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function Rp(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const x3=(n=null,e={})=>({editor:t,view:s,tr:l,dispatch:a})=>{e={scrollIntoView:!0,...e};const c=()=>{(Rp()||g3())&&s.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(s.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};if(s.hasFocus()&&n===null||n===!1)return!0;if(a&&n===null&&!Av(t.state.selection))return c(),!0;const d=Tv(l.doc,n)||t.state.selection,h=t.state.selection.eq(d);return a&&(h||l.setSelection(d),h&&l.storedMarks&&l.setStoredMarks(l.storedMarks),c()),!0},y3=(n,e)=>t=>n.every((s,l)=>e(s,{...t,index:l})),b3=(n,e)=>({tr:t,commands:s})=>s.insertContentAt({from:t.selection.from,to:t.selection.to},n,e),Mv=n=>{const e=n.childNodes;for(let t=e.length-1;t>=0;t-=1){const s=e[t];s.nodeType===3&&s.nodeValue&&/^(\n\s\s|\n)$/.test(s.nodeValue)?n.removeChild(s):s.nodeType===1&&Mv(s)}return n};function nc(n){const e=`<body>${n}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return Mv(t)}function ka(n,e,t){if(n instanceof Yr||n instanceof W)return n;t={slice:!0,parseOptions:{},...t};const s=typeof n=="object"&&n!==null,l=typeof n=="string";if(s)try{if(Array.isArray(n)&&n.length>0)return W.fromArray(n.map(d=>e.nodeFromJSON(d)));const c=e.nodeFromJSON(n);return t.errorOnInvalidContent&&c.check(),c}catch(a){if(t.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:a});return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",a),ka("",e,t)}if(l){if(t.errorOnInvalidContent){let c=!1,d="";const h=new d1({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:p=>(c=!0,d=typeof p=="string"?p:p.outerHTML,null)}]}})});if(t.slice?Kr.fromSchema(h).parseSlice(nc(n),t.parseOptions):Kr.fromSchema(h).parse(nc(n),t.parseOptions),t.errorOnInvalidContent&&c)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${d}`)})}const a=Kr.fromSchema(e);return t.slice?a.parseSlice(nc(n),t.parseOptions).content:a.parse(nc(n),t.parseOptions)}return ka("",e,t)}function v3(n,e,t){const s=n.steps.length-1;if(s<e)return;const l=n.steps[s];if(!(l instanceof dt||l instanceof ft))return;const a=n.mapping.maps[s];let c=0;a.forEach((d,h,p,g)=>{c===0&&(c=g)}),n.setSelection(Se.near(n.doc.resolve(c),t))}const S3=n=>!("type"in n),N3=(n,e,t)=>({tr:s,dispatch:l,editor:a})=>{var c;if(l){t={parseOptions:a.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...t};let d;const h=k=>{a.emit("contentError",{editor:a,error:k,disableCollaboration:()=>{a.storage.collaboration&&(a.storage.collaboration.isDisabled=!0)}})},p={preserveWhitespace:"full",...t.parseOptions};if(!t.errorOnInvalidContent&&!a.options.enableContentCheck&&a.options.emitContentError)try{ka(e,a.schema,{parseOptions:p,errorOnInvalidContent:!0})}catch(k){h(k)}try{d=ka(e,a.schema,{parseOptions:p,errorOnInvalidContent:(c=t.errorOnInvalidContent)!==null&&c!==void 0?c:a.options.enableContentCheck})}catch(k){return h(k),!1}let{from:g,to:y}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},b=!0,S=!0;if((S3(d)?d:[d]).forEach(k=>{k.check(),b=b?k.isText&&k.marks.length===0:!1,S=S?k.isBlock:!1}),g===y&&S){const{parent:k}=s.doc.resolve(g);k.isTextblock&&!k.type.spec.code&&!k.childCount&&(g-=1,y+=1)}let w;if(b){if(Array.isArray(e))w=e.map(k=>k.text||"").join("");else if(e instanceof W){let k="";e.forEach(E=>{E.text&&(k+=E.text)}),w=k}else typeof e=="object"&&e&&e.text?w=e.text:w=e;s.insertText(w,g,y)}else w=d,s.replaceWith(g,y,w);t.updateSelection&&v3(s,s.steps.length-1,-1),t.applyInputRules&&s.setMeta("applyInputRules",{from:g,text:w}),t.applyPasteRules&&s.setMeta("applyPasteRules",{from:g,text:w})}return!0},w3=()=>({state:n,dispatch:e})=>NE(n,e),k3=()=>({state:n,dispatch:e})=>wE(n,e),j3=()=>({state:n,dispatch:e})=>fv(n,e),C3=()=>({state:n,dispatch:e})=>gv(n,e),E3=()=>({state:n,dispatch:e,tr:t})=>{try{const s=au(n.doc,n.selection.$from.pos,-1);return s==null?!1:(t.join(s,2),e&&e(t),!0)}catch{return!1}},A3=()=>({state:n,dispatch:e,tr:t})=>{try{const s=au(n.doc,n.selection.$from.pos,1);return s==null?!1:(t.join(s,2),e&&e(t),!0)}catch{return!1}},T3=()=>({state:n,dispatch:e})=>vE(n,e),M3=()=>({state:n,dispatch:e})=>SE(n,e);function Ov(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function O3(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let s,l,a,c;for(let d=0;d<e.length-1;d+=1){const h=e[d];if(/^(cmd|meta|m)$/i.test(h))c=!0;else if(/^a(lt)?$/i.test(h))s=!0;else if(/^(c|ctrl|control)$/i.test(h))l=!0;else if(/^s(hift)?$/i.test(h))a=!0;else if(/^mod$/i.test(h))Rp()||Ov()?c=!0:l=!0;else throw new Error(`Unrecognized modifier name: ${h}`)}return s&&(t=`Alt-${t}`),l&&(t=`Ctrl-${t}`),c&&(t=`Meta-${t}`),a&&(t=`Shift-${t}`),t}const R3=n=>({editor:e,view:t,tr:s,dispatch:l})=>{const a=O3(n).split(/-(?!$)/),c=a.find(p=>!["Alt","Ctrl","Meta","Shift"].includes(p)),d=new KeyboardEvent("keydown",{key:c==="Space"?" ":c,altKey:a.includes("Alt"),ctrlKey:a.includes("Ctrl"),metaKey:a.includes("Meta"),shiftKey:a.includes("Shift"),bubbles:!0,cancelable:!0}),h=e.captureTransaction(()=>{t.someProp("handleKeyDown",p=>p(t,d))});return h==null||h.steps.forEach(p=>{const g=p.map(s.mapping);g&&l&&s.maybeStep(g)}),!0};function ja(n,e,t={}){const{from:s,to:l,empty:a}=n.selection,c=e?pt(e,n.schema):null,d=[];n.doc.nodesBetween(s,l,(y,b)=>{if(y.isText)return;const S=Math.max(s,b),v=Math.min(l,b+y.nodeSize);d.push({node:y,from:S,to:v})});const h=l-s,p=d.filter(y=>c?c.name===y.node.type.name:!0).filter(y=>Ec(y.node.attrs,t,{strict:!1}));return a?!!p.length:p.reduce((y,b)=>y+b.to-b.from,0)>=h}const D3=(n,e={})=>({state:t,dispatch:s})=>{const l=pt(n,t.schema);return ja(t,l,e)?kE(t,s):!1},z3=()=>({state:n,dispatch:e})=>vv(n,e),L3=n=>({state:e,dispatch:t})=>{const s=pt(n,e.schema);return BE(s)(e,t)},B3=()=>({state:n,dispatch:e})=>yv(n,e);function yu(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function ab(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((s,l)=>(t.includes(l)||(s[l]=n[l]),s),{})}const _3=(n,e)=>({tr:t,state:s,dispatch:l})=>{let a=null,c=null;const d=yu(typeof n=="string"?n:n.name,s.schema);return d?(d==="node"&&(a=pt(n,s.schema)),d==="mark"&&(c=ts(n,s.schema)),l&&t.selection.ranges.forEach(h=>{s.doc.nodesBetween(h.$from.pos,h.$to.pos,(p,g)=>{a&&a===p.type&&t.setNodeMarkup(g,void 0,ab(p.attrs,e)),c&&p.marks.length&&p.marks.forEach(y=>{c===y.type&&t.addMark(g,g+p.nodeSize,c.create(ab(y.attrs,e)))})})}),!0):!1},H3=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),U3=()=>({tr:n,dispatch:e})=>{if(e){const t=new tn(n.doc);n.setSelection(t)}return!0},P3=()=>({state:n,dispatch:e})=>pv(n,e),I3=()=>({state:n,dispatch:e})=>xv(n,e),V3=()=>({state:n,dispatch:e})=>AE(n,e),q3=()=>({state:n,dispatch:e})=>OE(n,e),F3=()=>({state:n,dispatch:e})=>ME(n,e);function Uh(n,e,t={},s={}){return ka(n,e,{slice:!1,parseOptions:t,errorOnInvalidContent:s.errorOnInvalidContent})}const $3=(n,e=!1,t={},s={})=>({editor:l,tr:a,dispatch:c,commands:d})=>{var h,p;const{doc:g}=a;if(t.preserveWhitespace!=="full"){const y=Uh(n,l.schema,t,{errorOnInvalidContent:(h=s.errorOnInvalidContent)!==null&&h!==void 0?h:l.options.enableContentCheck});return c&&a.replaceWith(0,g.content.size,y).setMeta("preventUpdate",!e),!0}return c&&a.setMeta("preventUpdate",!e),d.insertContentAt({from:0,to:g.content.size},n,{parseOptions:t,errorOnInvalidContent:(p=s.errorOnInvalidContent)!==null&&p!==void 0?p:l.options.enableContentCheck})};function Rv(n,e){const t=ts(e,n.schema),{from:s,to:l,empty:a}=n.selection,c=[];a?(n.storedMarks&&c.push(...n.storedMarks),c.push(...n.selection.$head.marks())):n.doc.nodesBetween(s,l,h=>{c.push(...h.marks)});const d=c.find(h=>h.type.name===t.name);return d?{...d.attrs}:{}}function G3(n,e){const t=new E1(n);return e.forEach(s=>{s.steps.forEach(l=>{t.step(l)})}),t}function Y3(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function K3(n,e,t){const s=[];return n.nodesBetween(e.from,e.to,(l,a)=>{t(l)&&s.push({node:l,pos:a})}),s}function J3(n,e){for(let t=n.depth;t>0;t-=1){const s=n.node(t);if(e(s))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:s}}}function Dp(n){return e=>J3(e.$from,n)}function Q3(n,e){const t={from:0,to:n.content.size};return jv(n,t,e)}function X3(n,e){const t=pt(e,n.schema),{from:s,to:l}=n.selection,a=[];n.doc.nodesBetween(s,l,d=>{a.push(d)});const c=a.reverse().find(d=>d.type.name===t.name);return c?{...c.attrs}:{}}function Dv(n,e){const t=yu(typeof e=="string"?e:e.name,n.schema);return t==="node"?X3(n,e):t==="mark"?Rv(n,e):{}}function Z3(n,e=JSON.stringify){const t={};return n.filter(s=>{const l=e(s);return Object.prototype.hasOwnProperty.call(t,l)?!1:t[l]=!0})}function W3(n){const e=Z3(n);return e.length===1?e:e.filter((t,s)=>!e.filter((a,c)=>c!==s).some(a=>t.oldRange.from>=a.oldRange.from&&t.oldRange.to<=a.oldRange.to&&t.newRange.from>=a.newRange.from&&t.newRange.to<=a.newRange.to))}function e4(n){const{mapping:e,steps:t}=n,s=[];return e.maps.forEach((l,a)=>{const c=[];if(l.ranges.length)l.forEach((d,h)=>{c.push({from:d,to:h})});else{const{from:d,to:h}=t[a];if(d===void 0||h===void 0)return;c.push({from:d,to:h})}c.forEach(({from:d,to:h})=>{const p=e.slice(a).map(d,-1),g=e.slice(a).map(h),y=e.invert().map(p,-1),b=e.invert().map(g);s.push({oldRange:{from:y,to:b},newRange:{from:p,to:g}})})}),W3(s)}function zp(n,e,t){const s=[];return n===e?t.resolve(n).marks().forEach(l=>{const a=t.resolve(n),c=Op(a,l.type);c&&s.push({mark:l,...c})}):t.nodesBetween(n,e,(l,a)=>{!l||(l==null?void 0:l.nodeSize)===void 0||s.push(...l.marks.map(c=>({from:a,to:a+l.nodeSize,mark:c})))}),s}function fc(n,e,t){return Object.fromEntries(Object.entries(t).filter(([s])=>{const l=n.find(a=>a.type===e&&a.name===s);return l?l.attribute.keepOnSplit:!1}))}function Ph(n,e,t={}){const{empty:s,ranges:l}=n.selection,a=e?ts(e,n.schema):null;if(s)return!!(n.storedMarks||n.selection.$from.marks()).filter(y=>a?a.name===y.type.name:!0).find(y=>Ec(y.attrs,t,{strict:!1}));let c=0;const d=[];if(l.forEach(({$from:y,$to:b})=>{const S=y.pos,v=b.pos;n.doc.nodesBetween(S,v,(w,k)=>{if(!w.isText&&!w.marks.length)return;const E=Math.max(S,k),O=Math.min(v,k+w.nodeSize),z=O-E;c+=z,d.push(...w.marks.map(q=>({mark:q,from:E,to:O})))})}),c===0)return!1;const h=d.filter(y=>a?a.name===y.mark.type.name:!0).filter(y=>Ec(y.mark.attrs,t,{strict:!1})).reduce((y,b)=>y+b.to-b.from,0),p=d.filter(y=>a?y.mark.type!==a&&y.mark.type.excludes(a):!0).reduce((y,b)=>y+b.to-b.from,0);return(h>0?h+p:h)>=c}function t4(n,e,t={}){if(!e)return ja(n,null,t)||Ph(n,null,t);const s=yu(e,n.schema);return s==="node"?ja(n,e,t):s==="mark"?Ph(n,e,t):!1}function ob(n,e){const{nodeExtensions:t}=mu(e),s=t.find(c=>c.name===n);if(!s)return!1;const l={name:s.name,options:s.options,storage:s.storage},a=ke(ce(s,"group",l));return typeof a!="string"?!1:a.split(" ").includes("list")}function Lp(n,{checkChildren:e=!0,ignoreWhitespace:t=!1}={}){var s;if(t){if(n.type.name==="hardBreak")return!0;if(n.isText)return/^\s*$/m.test((s=n.text)!==null&&s!==void 0?s:"")}if(n.isText)return!n.text;if(n.isAtom||n.isLeaf)return!1;if(n.content.childCount===0)return!0;if(e){let l=!0;return n.content.forEach(a=>{l!==!1&&(Lp(a,{ignoreWhitespace:t,checkChildren:e})||(l=!1))}),l}return!1}function n4(n){return n instanceof fe}function r4(n,e,t){var s;const{selection:l}=e;let a=null;if(Av(l)&&(a=l.$cursor),a){const d=(s=n.storedMarks)!==null&&s!==void 0?s:a.marks();return!!t.isInSet(d)||!d.some(h=>h.type.excludes(t))}const{ranges:c}=l;return c.some(({$from:d,$to:h})=>{let p=d.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(d.pos,h.pos,(g,y,b)=>{if(p)return!1;if(g.isInline){const S=!b||b.type.allowsMarkType(t),v=!!t.isInSet(g.marks)||!g.marks.some(w=>w.type.excludes(t));p=S&&v}return!p}),p})}const s4=(n,e={})=>({tr:t,state:s,dispatch:l})=>{const{selection:a}=t,{empty:c,ranges:d}=a,h=ts(n,s.schema);if(l)if(c){const p=Rv(s,h);t.addStoredMark(h.create({...p,...e}))}else d.forEach(p=>{const g=p.$from.pos,y=p.$to.pos;s.doc.nodesBetween(g,y,(b,S)=>{const v=Math.max(S,g),w=Math.min(S+b.nodeSize,y);b.marks.find(E=>E.type===h)?b.marks.forEach(E=>{h===E.type&&t.addMark(v,w,h.create({...E.attrs,...e}))}):t.addMark(v,w,h.create(e))})});return r4(s,t,h)},i4=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),l4=(n,e={})=>({state:t,dispatch:s,chain:l})=>{const a=pt(n,t.schema);let c;return t.selection.$anchor.sameParent(t.selection.$head)&&(c=t.selection.$anchor.parent.attrs),a.isTextblock?l().command(({commands:d})=>nb(a,{...c,...e})(t)?!0:d.clearNodes()).command(({state:d})=>nb(a,{...c,...e})(d,s)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},a4=n=>({tr:e,dispatch:t})=>{if(t){const{doc:s}=e,l=As(n,0,s.content.size),a=fe.create(s,l);e.setSelection(a)}return!0},o4=n=>({tr:e,dispatch:t})=>{if(t){const{doc:s}=e,{from:l,to:a}=typeof n=="number"?{from:n,to:n}:n,c=be.atStart(s).from,d=be.atEnd(s).to,h=As(l,c,d),p=As(a,c,d),g=be.create(s,h,p);e.setSelection(g)}return!0},c4=n=>({state:e,dispatch:t})=>{const s=pt(n,e.schema);return UE(s)(e,t)};function cb(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const s=t.filter(l=>e==null?void 0:e.includes(l.type.name));n.tr.ensureMarks(s)}}const u4=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:s,editor:l})=>{const{selection:a,doc:c}=e,{$from:d,$to:h}=a,p=l.extensionManager.attributes,g=fc(p,d.node().type.name,d.node().attrs);if(a instanceof fe&&a.node.isBlock)return!d.parentOffset||!ar(c,d.pos)?!1:(s&&(n&&cb(t,l.extensionManager.splittableMarks),e.split(d.pos).scrollIntoView()),!0);if(!d.parent.isBlock)return!1;const y=h.parentOffset===h.parent.content.size,b=d.depth===0?void 0:Y3(d.node(-1).contentMatchAt(d.indexAfter(-1)));let S=y&&b?[{type:b,attrs:g}]:void 0,v=ar(e.doc,e.mapping.map(d.pos),1,S);if(!S&&!v&&ar(e.doc,e.mapping.map(d.pos),1,b?[{type:b}]:void 0)&&(v=!0,S=b?[{type:b,attrs:g}]:void 0),s){if(v&&(a instanceof be&&e.deleteSelection(),e.split(e.mapping.map(d.pos),1,S),b&&!y&&!d.parentOffset&&d.parent.type!==b)){const w=e.mapping.map(d.before()),k=e.doc.resolve(w);d.node(-1).canReplaceWith(k.index(),k.index()+1,b)&&e.setNodeMarkup(e.mapping.map(d.before()),b)}n&&cb(t,l.extensionManager.splittableMarks),e.scrollIntoView()}return v},d4=(n,e={})=>({tr:t,state:s,dispatch:l,editor:a})=>{var c;const d=pt(n,s.schema),{$from:h,$to:p}=s.selection,g=s.selection.node;if(g&&g.isBlock||h.depth<2||!h.sameParent(p))return!1;const y=h.node(-1);if(y.type!==d)return!1;const b=a.extensionManager.attributes;if(h.parent.content.size===0&&h.node(-1).childCount===h.indexAfter(-1)){if(h.depth===2||h.node(-3).type!==d||h.index(-2)!==h.node(-2).childCount-1)return!1;if(l){let E=W.empty;const O=h.index(-1)?1:h.index(-2)?2:3;for(let G=h.depth-O;G>=h.depth-3;G-=1)E=W.from(h.node(G).copy(E));const z=h.indexAfter(-1)<h.node(-2).childCount?1:h.indexAfter(-2)<h.node(-3).childCount?2:3,q={...fc(b,h.node().type.name,h.node().attrs),...e},D=((c=d.contentMatch.defaultType)===null||c===void 0?void 0:c.createAndFill(q))||void 0;E=E.append(W.from(d.createAndFill(null,D)||void 0));const I=h.before(h.depth-(O-1));t.replace(I,h.after(-z),new le(E,4-O,0));let L=-1;t.doc.nodesBetween(I,t.doc.content.size,(G,ne)=>{if(L>-1)return!1;G.isTextblock&&G.content.size===0&&(L=ne+1)}),L>-1&&t.setSelection(be.near(t.doc.resolve(L))),t.scrollIntoView()}return!0}const S=p.pos===h.end()?y.contentMatchAt(0).defaultType:null,v={...fc(b,y.type.name,y.attrs),...e},w={...fc(b,h.node().type.name,h.node().attrs),...e};t.delete(h.pos,p.pos);const k=S?[{type:d,attrs:v},{type:S,attrs:w}]:[{type:d,attrs:v}];if(!ar(t.doc,h.pos,2))return!1;if(l){const{selection:E,storedMarks:O}=s,{splittableMarks:z}=a.extensionManager,q=O||E.$to.parentOffset&&E.$from.marks();if(t.split(h.pos,2,k).scrollIntoView(),!q||!l)return!0;const D=q.filter(I=>z.includes(I.type.name));t.ensureMarks(D)}return!0},lh=(n,e)=>{const t=Dp(c=>c.type===e)(n.selection);if(!t)return!0;const s=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(s===void 0)return!0;const l=n.doc.nodeAt(s);return t.node.type===(l==null?void 0:l.type)&&Wr(n.doc,t.pos)&&n.join(t.pos),!0},ah=(n,e)=>{const t=Dp(c=>c.type===e)(n.selection);if(!t)return!0;const s=n.doc.resolve(t.start).after(t.depth);if(s===void 0)return!0;const l=n.doc.nodeAt(s);return t.node.type===(l==null?void 0:l.type)&&Wr(n.doc,s)&&n.join(s),!0},f4=(n,e,t,s={})=>({editor:l,tr:a,state:c,dispatch:d,chain:h,commands:p,can:g})=>{const{extensions:y,splittableMarks:b}=l.extensionManager,S=pt(n,c.schema),v=pt(e,c.schema),{selection:w,storedMarks:k}=c,{$from:E,$to:O}=w,z=E.blockRange(O),q=k||w.$to.parentOffset&&w.$from.marks();if(!z)return!1;const D=Dp(I=>ob(I.type.name,y))(w);if(z.depth>=1&&D&&z.depth-D.depth<=1){if(D.node.type===S)return p.liftListItem(v);if(ob(D.node.type.name,y)&&S.validContent(D.node.content)&&d)return h().command(()=>(a.setNodeMarkup(D.pos,S),!0)).command(()=>lh(a,S)).command(()=>ah(a,S)).run()}return!t||!q||!d?h().command(()=>g().wrapInList(S,s)?!0:p.clearNodes()).wrapInList(S,s).command(()=>lh(a,S)).command(()=>ah(a,S)).run():h().command(()=>{const I=g().wrapInList(S,s),L=q.filter(G=>b.includes(G.type.name));return a.ensureMarks(L),I?!0:p.clearNodes()}).wrapInList(S,s).command(()=>lh(a,S)).command(()=>ah(a,S)).run()},h4=(n,e={},t={})=>({state:s,commands:l})=>{const{extendEmptyMarkRange:a=!1}=t,c=ts(n,s.schema);return Ph(s,c,e)?l.unsetMark(c,{extendEmptyMarkRange:a}):l.setMark(c,e)},p4=(n,e,t={})=>({state:s,commands:l})=>{const a=pt(n,s.schema),c=pt(e,s.schema),d=ja(s,a,t);let h;return s.selection.$anchor.sameParent(s.selection.$head)&&(h=s.selection.$anchor.parent.attrs),d?l.setNode(c,h):l.setNode(a,{...h,...t})},m4=(n,e={})=>({state:t,commands:s})=>{const l=pt(n,t.schema);return ja(t,l,e)?s.lift(l):s.wrapIn(l,e)},g4=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let s=0;s<t.length;s+=1){const l=t[s];let a;if(l.spec.isInputRules&&(a=l.getState(n))){if(e){const c=n.tr,d=a.transform;for(let h=d.steps.length-1;h>=0;h-=1)c.step(d.steps[h].invert(d.docs[h]));if(a.text){const h=c.doc.resolve(a.from).marks();c.replaceWith(a.from,a.to,n.schema.text(a.text,h))}else c.delete(a.from,a.to)}return!0}}return!1},x4=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:s,ranges:l}=t;return s||e&&l.forEach(a=>{n.removeMark(a.$from.pos,a.$to.pos)}),!0},y4=(n,e={})=>({tr:t,state:s,dispatch:l})=>{var a;const{extendEmptyMarkRange:c=!1}=e,{selection:d}=t,h=ts(n,s.schema),{$from:p,empty:g,ranges:y}=d;if(!l)return!0;if(g&&c){let{from:b,to:S}=d;const v=(a=p.marks().find(k=>k.type===h))===null||a===void 0?void 0:a.attrs,w=Op(p,h,v);w&&(b=w.from,S=w.to),t.removeMark(b,S,h)}else y.forEach(b=>{t.removeMark(b.$from.pos,b.$to.pos,h)});return t.removeStoredMark(h),!0},b4=(n,e={})=>({tr:t,state:s,dispatch:l})=>{let a=null,c=null;const d=yu(typeof n=="string"?n:n.name,s.schema);return d?(d==="node"&&(a=pt(n,s.schema)),d==="mark"&&(c=ts(n,s.schema)),l&&t.selection.ranges.forEach(h=>{const p=h.$from.pos,g=h.$to.pos;let y,b,S,v;t.selection.empty?s.doc.nodesBetween(p,g,(w,k)=>{a&&a===w.type&&(S=Math.max(k,p),v=Math.min(k+w.nodeSize,g),y=k,b=w)}):s.doc.nodesBetween(p,g,(w,k)=>{k<p&&a&&a===w.type&&(S=Math.max(k,p),v=Math.min(k+w.nodeSize,g),y=k,b=w),k>=p&&k<=g&&(a&&a===w.type&&t.setNodeMarkup(k,void 0,{...w.attrs,...e}),c&&w.marks.length&&w.marks.forEach(E=>{if(c===E.type){const O=Math.max(k,p),z=Math.min(k+w.nodeSize,g);t.addMark(O,z,c.create({...E.attrs,...e}))}}))}),b&&(y!==void 0&&t.setNodeMarkup(y,void 0,{...b.attrs,...e}),c&&b.marks.length&&b.marks.forEach(w=>{c===w.type&&t.addMark(S,v,c.create({...w.attrs,...e}))}))}),!0):!1},v4=(n,e={})=>({state:t,dispatch:s})=>{const l=pt(n,t.schema);return RE(l,e)(t,s)},S4=(n,e={})=>({state:t,dispatch:s})=>{const l=pt(n,t.schema);return DE(l,e)(t,s)};var N4=Object.freeze({__proto__:null,blur:n3,clearContent:r3,clearNodes:s3,command:i3,createParagraphNear:l3,cut:a3,deleteCurrentNode:o3,deleteNode:c3,deleteRange:u3,deleteSelection:d3,enter:f3,exitCode:h3,extendMarkRange:p3,first:m3,focus:x3,forEach:y3,insertContent:b3,insertContentAt:N3,joinBackward:j3,joinDown:k3,joinForward:C3,joinItemBackward:E3,joinItemForward:A3,joinTextblockBackward:T3,joinTextblockForward:M3,joinUp:w3,keyboardShortcut:R3,lift:D3,liftEmptyBlock:z3,liftListItem:L3,newlineInCode:B3,resetAttributes:_3,scrollIntoView:H3,selectAll:U3,selectNodeBackward:P3,selectNodeForward:I3,selectParentNode:V3,selectTextblockEnd:q3,selectTextblockStart:F3,setContent:$3,setMark:s4,setMeta:i4,setNode:l4,setNodeSelection:a4,setTextSelection:o4,sinkListItem:c4,splitBlock:u4,splitListItem:d4,toggleList:f4,toggleMark:h4,toggleNode:p4,toggleWrap:m4,undoInputRule:g4,unsetAllMarks:x4,unsetMark:y4,updateAttributes:b4,wrapIn:v4,wrapInList:S4});const w4=zt.create({name:"commands",addCommands(){return{...N4}}}),k4=zt.create({name:"drop",addProseMirrorPlugins(){return[new Nt({key:new nn("tiptapDrop"),props:{handleDrop:(n,e,t,s)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:t,moved:s})}}})]}}),j4=zt.create({name:"editable",addProseMirrorPlugins(){return[new Nt({key:new nn("editable"),props:{editable:()=>this.editor.options.editable}})]}}),C4=new nn("focusEvents"),E4=zt.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new Nt({key:C4,props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const s=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(s),!1},blur:(e,t)=>{n.isFocused=!1;const s=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(s),!1}}}})]}}),A4=zt.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:c})=>[()=>c.undoInputRule(),()=>c.command(({tr:d})=>{const{selection:h,doc:p}=d,{empty:g,$anchor:y}=h,{pos:b,parent:S}=y,v=y.parent.isTextblock&&b>0?d.doc.resolve(b-1):y,w=v.parent.type.spec.isolating,k=y.pos-y.parentOffset,E=w&&v.parent.childCount===1?k===y.pos:Se.atStart(p).from===b;return!g||!S.type.isTextblock||S.textContent.length||!E||E&&y.parent.type.name==="paragraph"?!1:c.clearNodes()}),()=>c.deleteSelection(),()=>c.joinBackward(),()=>c.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:c})=>[()=>c.deleteSelection(),()=>c.deleteCurrentNode(),()=>c.joinForward(),()=>c.selectNodeForward()]),s={Enter:()=>this.editor.commands.first(({commands:c})=>[()=>c.newlineInCode(),()=>c.createParagraphNear(),()=>c.liftEmptyBlock(),()=>c.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},l={...s},a={...s,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Rp()||Ov()?a:l},addProseMirrorPlugins(){return[new Nt({key:new nn("clearDocument"),appendTransaction:(n,e,t)=>{if(n.some(w=>w.getMeta("composition")))return;const s=n.some(w=>w.docChanged)&&!e.doc.eq(t.doc),l=n.some(w=>w.getMeta("preventClearDocument"));if(!s||l)return;const{empty:a,from:c,to:d}=e.selection,h=Se.atStart(e.doc).from,p=Se.atEnd(e.doc).to;if(a||!(c===h&&d===p)||!Lp(t.doc))return;const b=t.tr,S=hu({state:t,transaction:b}),{commands:v}=new pu({editor:this.editor,state:S});if(v.clearNodes(),!!b.steps.length)return b}})]}}),T4=zt.create({name:"paste",addProseMirrorPlugins(){return[new Nt({key:new nn("tiptapPaste"),props:{handlePaste:(n,e,t)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:t})}}})]}}),M4=zt.create({name:"tabindex",addProseMirrorPlugins(){return[new Nt({key:new nn("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class js{get name(){return this.node.type.name}constructor(e,t,s=!1,l=null){this.currentNode=null,this.actualDepth=null,this.isBlock=s,this.resolvedPos=e,this.editor=t,this.currentNode=l}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let t=this.from,s=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You can’t set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}t=this.from+1,s=this.to-1}this.editor.commands.insertContentAt({from:t,to:s},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),t=this.resolvedPos.doc.resolve(e);return new js(t,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new js(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new js(e,this.editor)}get children(){const e=[];return this.node.content.forEach((t,s)=>{const l=t.isBlock&&!t.isTextblock,a=t.isAtom&&!t.isText,c=this.pos+s+(a?0:1),d=this.resolvedPos.doc.resolve(c);if(!l&&d.depth<=this.depth)return;const h=new js(d,this.editor,l,l?t:null);l&&(h.actualDepth=this.depth+1),e.push(new js(d,this.editor,l,l?t:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,t={}){let s=null,l=this.parent;for(;l&&!s;){if(l.node.type.name===e)if(Object.keys(t).length>0){const a=l.node.attrs,c=Object.keys(t);for(let d=0;d<c.length;d+=1){const h=c[d];if(a[h]!==t[h])break}}else s=l;l=l.parent}return s}querySelector(e,t={}){return this.querySelectorAll(e,t,!0)[0]||null}querySelectorAll(e,t={},s=!1){let l=[];if(!this.children||this.children.length===0)return l;const a=Object.keys(t);return this.children.forEach(c=>{s&&l.length>0||(c.node.type.name===e&&a.every(h=>t[h]===c.node.attrs[h])&&l.push(c),!(s&&l.length>0)&&(l=l.concat(c.querySelectorAll(e,t,s))))}),l}setAttribute(e){const{tr:t}=this.editor.state;t.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(t)}}const O4=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function R4(n,e,t){const s=document.querySelector("style[data-tiptap-style]");if(s!==null)return s;const l=document.createElement("style");return e&&l.setAttribute("nonce",e),l.setAttribute("data-tiptap-style",""),l.innerHTML=n,document.getElementsByTagName("head")[0].appendChild(l),l}class D4 extends PE{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:t})=>{throw t},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:t,slice:s,moved:l})=>this.options.onDrop(t,s,l)),this.on("paste",({event:t,slice:s})=>this.options.onPaste(t,s)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=R4(O4,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,t){const s=kv(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],l=this.state.reconfigure({plugins:s});return this.view.updateState(l),l}unregisterPlugin(e){if(this.isDestroyed)return;const t=this.state.plugins;let s=t;if([].concat(e).forEach(a=>{const c=typeof a=="string"?`${a}$`:a.key;s=s.filter(d=>!d.key.startsWith(c))}),t.length===s.length)return;const l=this.state.reconfigure({plugins:s});return this.view.updateState(l),l}createExtensionManager(){var e,t;const l=[...this.options.enableCoreExtensions?[j4,t3.configure({blockSeparator:(t=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||t===void 0?void 0:t.blockSeparator}),w4,E4,A4,M4,k4,T4].filter(a=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[a.name]!==!1:!0):[],...this.options.extensions].filter(a=>["extension","node","mark"].includes(a==null?void 0:a.type));this.extensionManager=new Bi(l,this)}createCommandManager(){this.commandManager=new pu({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let t;try{t=Uh(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(c){if(!(c instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(c.message))throw c;this.emit("contentError",{editor:this,error:c,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(d=>d.name!=="collaboration"),this.createExtensionManager()}}),t=Uh(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const s=Tv(t,this.options.autofocus);this.view=new cv(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:Li.create({doc:t,selection:s||void 0})});const l=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(l),this.createNodeViews(),this.prependClass();const a=this.view.dom;a.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(c=>{var d;return(d=this.capturedTransaction)===null||d===void 0?void 0:d.step(c)});return}const t=this.state.apply(e),s=!this.state.selection.eq(t.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e}),s&&this.emit("selectionUpdate",{editor:this,transaction:e});const l=e.getMeta("focus"),a=e.getMeta("blur");l&&this.emit("focus",{editor:this,event:l.event,transaction:e}),a&&this.emit("blur",{editor:this,event:a.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return Dv(this.state,e)}isActive(e,t){const s=typeof e=="string"?e:null,l=typeof e=="string"?t:e;return t4(this.state,s,l)}getJSON(){return this.state.doc.toJSON()}getHTML(){return Tp(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:s={}}=e||{};return Q3(this.state.doc,{blockSeparator:t,textSerializers:{...Cv(this.schema),...s}})}get isEmpty(){return Lp(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,t){var s;return((s=this.$doc)===null||s===void 0?void 0:s.querySelector(e,t))||null}$nodes(e,t){var s;return((s=this.$doc)===null||s===void 0?void 0:s.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new js(t,this)}get $doc(){return this.$pos(0)}}function Gi(n){return new gu({find:n.find,handler:({state:e,range:t,match:s})=>{const l=ke(n.getAttributes,void 0,s);if(l===!1||l===null)return null;const{tr:a}=e,c=s[s.length-1],d=s[0];if(c){const h=d.search(/\S/),p=t.from+d.indexOf(c),g=p+c.length;if(zp(t.from,t.to,e.doc).filter(S=>S.mark.type.excluded.find(w=>w===n.type&&w!==S.mark.type)).filter(S=>S.to>p).length)return null;g<t.to&&a.delete(g,t.to),p>t.from&&a.delete(t.from+h,p);const b=t.from+h+c.length;a.addMark(t.from+h,b,n.type.create(l||{})),a.removeStoredMark(n.type)}}})}function zv(n){return new gu({find:n.find,handler:({state:e,range:t,match:s})=>{const l=ke(n.getAttributes,void 0,s)||{},{tr:a}=e,c=t.from;let d=t.to;const h=n.type.create(l);if(s[1]){const p=s[0].lastIndexOf(s[1]);let g=c+p;g>d?g=d:d=g+s[1].length;const y=s[0][s[0].length-1];a.insertText(y,c+s[0].length-1),a.replaceWith(g,d,h)}else if(s[0]){const p=n.type.isInline?c:c-1;a.insert(p,n.type.create(l)).delete(a.mapping.map(c),a.mapping.map(d))}a.scrollIntoView()}})}function Ih(n){return new gu({find:n.find,handler:({state:e,range:t,match:s})=>{const l=e.doc.resolve(t.from),a=ke(n.getAttributes,void 0,s)||{};if(!l.node(-1).canReplaceWith(l.index(-1),l.indexAfter(-1),n.type))return null;e.tr.delete(t.from,t.to).setBlockType(t.from,t.from,n.type,a)}})}function Ca(n){return new gu({find:n.find,handler:({state:e,range:t,match:s,chain:l})=>{const a=ke(n.getAttributes,void 0,s)||{},c=e.tr.delete(t.from,t.to),h=c.doc.resolve(t.from).blockRange(),p=h&&hp(h,n.type,a);if(!p)return null;if(c.wrap(h,p),n.keepMarks&&n.editor){const{selection:y,storedMarks:b}=e,{splittableMarks:S}=n.editor.extensionManager,v=b||y.$to.parentOffset&&y.$from.marks();if(v){const w=v.filter(k=>S.includes(k.type.name));c.ensureMarks(w)}}if(n.keepAttributes){const y=n.type.name==="bulletList"||n.type.name==="orderedList"?"listItem":"taskList";l().updateAttributes(y,a).run()}const g=c.doc.resolve(t.from-1).nodeBefore;g&&g.type===n.type&&Wr(c.doc,t.from-1)&&(!n.joinPredicate||n.joinPredicate(s,g))&&c.join(t.from-1)}})}class Lt{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ke(ce(this,"addOptions",{name:this.name}))),this.storage=ke(ce(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Lt(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>xu(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new Lt(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=ke(ce(t,"addOptions",{name:t.name})),t.storage=ke(ce(t,"addStorage",{name:t.name,options:t.options})),t}}function Ps(n){return new JE({find:n.find,handler:({state:e,range:t,match:s,pasteEvent:l})=>{const a=ke(n.getAttributes,void 0,s,l);if(a===!1||a===null)return null;const{tr:c}=e,d=s[s.length-1],h=s[0];let p=t.to;if(d){const g=h.search(/\S/),y=t.from+h.indexOf(d),b=y+d.length;if(zp(t.from,t.to,e.doc).filter(v=>v.mark.type.excluded.find(k=>k===n.type&&k!==v.mark.type)).filter(v=>v.to>y).length)return null;b<t.to&&c.delete(b,t.to),y>t.from&&c.delete(t.from+g,y),p=t.from+g+d.length,c.addMark(t.from+g,p,n.type.create(a||{})),c.removeStoredMark(n.type)}}})}function z4(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Lv={exports:{}},oh={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ub;function L4(){if(ub)return oh;ub=1;var n=Et;function e(y,b){return y===b&&(y!==0||1/y===1/b)||y!==y&&b!==b}var t=typeof Object.is=="function"?Object.is:e,s=n.useState,l=n.useEffect,a=n.useLayoutEffect,c=n.useDebugValue;function d(y,b){var S=b(),v=s({inst:{value:S,getSnapshot:b}}),w=v[0].inst,k=v[1];return a(function(){w.value=S,w.getSnapshot=b,h(w)&&k({inst:w})},[y,S,b]),l(function(){return h(w)&&k({inst:w}),y(function(){h(w)&&k({inst:w})})},[y]),c(S),S}function h(y){var b=y.getSnapshot;y=y.value;try{var S=b();return!t(y,S)}catch{return!0}}function p(y,b){return b()}var g=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:d;return oh.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:g,oh}Lv.exports=L4();var Bp=Lv.exports;const B4=(...n)=>e=>{n.forEach(t=>{typeof t=="function"?t(e):t&&(t.current=e)})},_4=({contentComponent:n})=>{const e=Bp.useSyncExternalStore(n.subscribe,n.getSnapshot,n.getServerSnapshot);return Et.createElement(Et.Fragment,null,Object.values(e))};function H4(){const n=new Set;let e={};return{subscribe(t){return n.add(t),()=>{n.delete(t)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(t,s){e={...e,[t]:nk.createPortal(s.reactElement,s.element,t)},n.forEach(l=>l())},removeRenderer(t){const s={...e};delete s[t],e=s,n.forEach(l=>l())}}}class U4 extends Et.Component{constructor(e){var t;super(e),this.editorContentRef=Et.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(!((t=e.editor)===null||t===void 0)&&t.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const t=this.editorContentRef.current;t.append(...e.options.element.childNodes),e.setOptions({element:t}),e.contentComponent=H4(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(s=>s.hasContentComponentInitialized?s:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild))return;const t=document.createElement("div");t.append(...e.options.element.childNodes),e.setOptions({element:t})}render(){const{editor:e,innerRef:t,...s}=this.props;return Et.createElement(Et.Fragment,null,Et.createElement("div",{ref:B4(t,this.editorContentRef),...s}),(e==null?void 0:e.contentComponent)&&Et.createElement(_4,{contentComponent:e.contentComponent}))}}const P4=C.forwardRef((n,e)=>{const t=Et.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[n.editor]);return Et.createElement(U4,{key:t,innerRef:e,...n})}),I4=Et.memo(P4);var V4=function n(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var s,l,a;if(Array.isArray(e)){if(s=e.length,s!=t.length)return!1;for(l=s;l--!==0;)if(!n(e[l],t[l]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(l of e.entries())if(!t.has(l[0]))return!1;for(l of e.entries())if(!n(l[1],t.get(l[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(l of e.entries())if(!t.has(l[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(s=e.length,s!=t.length)return!1;for(l=s;l--!==0;)if(e[l]!==t[l])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(a=Object.keys(e),s=a.length,s!==Object.keys(t).length)return!1;for(l=s;l--!==0;)if(!Object.prototype.hasOwnProperty.call(t,a[l]))return!1;for(l=s;l--!==0;){var c=a[l];if(!(c==="_owner"&&e.$$typeof)&&!n(e[c],t[c]))return!1}return!0}return e!==e&&t!==t},q4=z4(V4),Bv={exports:{}},ch={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var db;function F4(){if(db)return ch;db=1;var n=Et,e=Bp;function t(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var s=typeof Object.is=="function"?Object.is:t,l=e.useSyncExternalStore,a=n.useRef,c=n.useEffect,d=n.useMemo,h=n.useDebugValue;return ch.useSyncExternalStoreWithSelector=function(p,g,y,b,S){var v=a(null);if(v.current===null){var w={hasValue:!1,value:null};v.current=w}else w=v.current;v=d(function(){function E(I){if(!O){if(O=!0,z=I,I=b(I),S!==void 0&&w.hasValue){var L=w.value;if(S(L,I))return q=L}return q=I}if(L=q,s(z,I))return L;var G=b(I);return S!==void 0&&S(L,G)?L:(z=I,q=G)}var O=!1,z,q,D=y===void 0?null:y;return[function(){return E(g())},D===null?void 0:function(){return E(D())}]},[g,y,b,S]);var k=l(p,v[0],v[1]);return c(function(){w.hasValue=!0,w.value=k},[k]),h(k),k},ch}Bv.exports=F4();var $4=Bv.exports;const G4=typeof window<"u"?C.useLayoutEffect:C.useEffect;class Y4{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const t=()=>{this.transactionNumber+=1,this.subscribers.forEach(l=>l())},s=this.editor;return s.on("transaction",t),()=>{s.off("transaction",t)}}}}function K4(n){var e;const[t]=C.useState(()=>new Y4(n.editor)),s=$4.useSyncExternalStoreWithSelector(t.subscribe,t.getSnapshot,t.getServerSnapshot,n.selector,(e=n.equalityFn)!==null&&e!==void 0?e:q4);return G4(()=>t.watch(n.editor),[n.editor,t]),C.useDebugValue(s),s}const J4=!1,Vh=typeof window>"u",Q4=Vh||!!(typeof window<"u"&&window.next);class _p{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(t=>t())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?Vh||Q4?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...s)=>{var l,a;return(a=(l=this.options.current).onBeforeCreate)===null||a===void 0?void 0:a.call(l,...s)},onBlur:(...s)=>{var l,a;return(a=(l=this.options.current).onBlur)===null||a===void 0?void 0:a.call(l,...s)},onCreate:(...s)=>{var l,a;return(a=(l=this.options.current).onCreate)===null||a===void 0?void 0:a.call(l,...s)},onDestroy:(...s)=>{var l,a;return(a=(l=this.options.current).onDestroy)===null||a===void 0?void 0:a.call(l,...s)},onFocus:(...s)=>{var l,a;return(a=(l=this.options.current).onFocus)===null||a===void 0?void 0:a.call(l,...s)},onSelectionUpdate:(...s)=>{var l,a;return(a=(l=this.options.current).onSelectionUpdate)===null||a===void 0?void 0:a.call(l,...s)},onTransaction:(...s)=>{var l,a;return(a=(l=this.options.current).onTransaction)===null||a===void 0?void 0:a.call(l,...s)},onUpdate:(...s)=>{var l,a;return(a=(l=this.options.current).onUpdate)===null||a===void 0?void 0:a.call(l,...s)},onContentError:(...s)=>{var l,a;return(a=(l=this.options.current).onContentError)===null||a===void 0?void 0:a.call(l,...s)},onDrop:(...s)=>{var l,a;return(a=(l=this.options.current).onDrop)===null||a===void 0?void 0:a.call(l,...s)},onPaste:(...s)=>{var l,a;return(a=(l=this.options.current).onPaste)===null||a===void 0?void 0:a.call(l,...s)}};return new D4(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,t){return Object.keys(e).every(s=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(s)?!0:s==="extensions"&&e.extensions&&t.extensions?e.extensions.length!==t.extensions.length?!1:e.extensions.every((l,a)=>{var c;return l===((c=t.extensions)===null||c===void 0?void 0:c[a])}):e[s]===t[s])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?_p.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((s,l)=>s===e[l]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,t=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){t&&t.setOptions(this.options.current);return}t&&!t.isDestroyed&&(t.destroy(),this.instanceId===e&&this.setEditor(null))},1)}}function X4(n={},e=[]){const t=C.useRef(n);t.current=n;const[s]=C.useState(()=>new _p(t)),l=Bp.useSyncExternalStore(s.subscribe,s.getEditor,s.getServerSnapshot);return C.useDebugValue(l),C.useEffect(s.onRender(e)),K4({editor:l,selector:({transactionNumber:a})=>n.shouldRerenderOnTransaction===!1?null:n.immediatelyRender&&a===0?0:a+1}),l}const Z4=C.createContext({editor:null});Z4.Consumer;const W4=C.createContext({onDragStart:void 0}),eA=()=>C.useContext(W4);Et.forwardRef((n,e)=>{const{onDragStart:t}=eA(),s=n.as||"div";return Et.createElement(s,{...n,ref:e,"data-node-view-wrapper":"",onDragStart:t,style:{whiteSpace:"normal",...n.style}})});const tA=/^\s*>\s$/,nA=Lt.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:n}){return["blockquote",mt(this.options.HTMLAttributes,n),0]},addCommands(){return{setBlockquote:()=>({commands:n})=>n.wrapIn(this.name),toggleBlockquote:()=>({commands:n})=>n.toggleWrap(this.name),unsetBlockquote:()=>({commands:n})=>n.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Ca({find:tA,type:this.type})]}}),rA=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,sA=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,iA=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,lA=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,aA=ur.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:n=>n.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:n=>n.type.name===this.name},{style:"font-weight",getAttrs:n=>/^(bold(er)?|[5-9]\d{2,})$/.test(n)&&null}]},renderHTML({HTMLAttributes:n}){return["strong",mt(this.options.HTMLAttributes,n),0]},addCommands(){return{setBold:()=>({commands:n})=>n.setMark(this.name),toggleBold:()=>({commands:n})=>n.toggleMark(this.name),unsetBold:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Gi({find:rA,type:this.type}),Gi({find:iA,type:this.type})]},addPasteRules(){return[Ps({find:sA,type:this.type}),Ps({find:lA,type:this.type})]}}),oA="listItem",fb="textStyle",hb=/^\s*([-+*])\s$/,cA=Lt.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:n}){return["ul",mt(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleBulletList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(oA,this.editor.getAttributes(fb)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let n=Ca({find:hb,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(n=Ca({find:hb,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(fb),editor:this.editor})),[n]}}),uA=/(^|[^`])`([^`]+)`(?!`)/,dA=/(^|[^`])`([^`]+)`(?!`)/g,fA=ur.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:n}){return["code",mt(this.options.HTMLAttributes,n),0]},addCommands(){return{setCode:()=>({commands:n})=>n.setMark(this.name),toggleCode:()=>({commands:n})=>n.toggleMark(this.name),unsetCode:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Gi({find:uA,type:this.type})]},addPasteRules(){return[Ps({find:dA,type:this.type})]}}),hA=/^```([a-z]+)?[\s\n]$/,pA=/^~~~([a-z]+)?[\s\n]$/,mA=Lt.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:n=>{var e;const{languageClassPrefix:t}=this.options,a=[...((e=n.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(c=>c.startsWith(t)).map(c=>c.replace(t,""))[0];return a||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:n,HTMLAttributes:e}){return["pre",mt(this.options.HTMLAttributes,e),["code",{class:n.attrs.language?this.options.languageClassPrefix+n.attrs.language:null},0]]},addCommands(){return{setCodeBlock:n=>({commands:e})=>e.setNode(this.name,n),toggleCodeBlock:n=>({commands:e})=>e.toggleNode(this.name,"paragraph",n)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:n,$anchor:e}=this.editor.state.selection,t=e.pos===1;return!n||e.parent.type.name!==this.name?!1:t||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:n})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=n,{selection:t}=e,{$from:s,empty:l}=t;if(!l||s.parent.type!==this.type)return!1;const a=s.parentOffset===s.parent.nodeSize-2,c=s.parent.textContent.endsWith(`

`);return!a||!c?!1:n.chain().command(({tr:d})=>(d.delete(s.pos-2,s.pos),!0)).exitCode().run()},ArrowDown:({editor:n})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=n,{selection:t,doc:s}=e,{$from:l,empty:a}=t;if(!a||l.parent.type!==this.type||!(l.parentOffset===l.parent.nodeSize-2))return!1;const d=l.after();return d===void 0?!1:s.nodeAt(d)?n.commands.command(({tr:p})=>(p.setSelection(Se.near(s.resolve(d))),!0)):n.commands.exitCode()}}},addInputRules(){return[Ih({find:hA,type:this.type,getAttributes:n=>({language:n[1]})}),Ih({find:pA,type:this.type,getAttributes:n=>({language:n[1]})})]},addProseMirrorPlugins(){return[new Nt({key:new nn("codeBlockVSCodeHandler"),props:{handlePaste:(n,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const t=e.clipboardData.getData("text/plain"),s=e.clipboardData.getData("vscode-editor-data"),l=s?JSON.parse(s):void 0,a=l==null?void 0:l.mode;if(!t||!a)return!1;const{tr:c,schema:d}=n.state,h=d.text(t.replace(/\r\n?/g,`
`));return c.replaceSelectionWith(this.type.create({language:a},h)),c.selection.$from.parent.type!==this.type&&c.setSelection(be.near(c.doc.resolve(Math.max(0,c.selection.from-2)))),c.setMeta("paste",!0),n.dispatch(c),!0}}})]}}),gA=Lt.create({name:"doc",topNode:!0,content:"block+"});function xA(n={}){return new Nt({view(e){return new yA(e,n)}})}class yA{constructor(e,t){var s;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(s=t.width)!==null&&s!==void 0?s:1,this.color=t.color===!1?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(l=>{let a=c=>{this[l](c)};return e.dom.addEventListener(l,a),{name:l,handler:a}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){this.cursorPos!=null&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),t=!e.parent.inlineContent,s,l=this.editorView.dom,a=l.getBoundingClientRect(),c=a.width/l.offsetWidth,d=a.height/l.offsetHeight;if(t){let y=e.nodeBefore,b=e.nodeAfter;if(y||b){let S=this.editorView.nodeDOM(this.cursorPos-(y?y.nodeSize:0));if(S){let v=S.getBoundingClientRect(),w=y?v.bottom:v.top;y&&b&&(w=(w+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let k=this.width/2*d;s={left:v.left,right:v.right,top:w-k,bottom:w+k}}}}if(!s){let y=this.editorView.coordsAtPos(this.cursorPos),b=this.width/2*c;s={left:y.left-b,right:y.left+b,top:y.top,bottom:y.bottom}}let h=this.editorView.dom.offsetParent;this.element||(this.element=h.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",t),this.element.classList.toggle("prosemirror-dropcursor-inline",!t);let p,g;if(!h||h==document.body&&getComputedStyle(h).position=="static")p=-pageXOffset,g=-pageYOffset;else{let y=h.getBoundingClientRect(),b=y.width/h.offsetWidth,S=y.height/h.offsetHeight;p=y.left-h.scrollLeft*b,g=y.top-h.scrollTop*S}this.element.style.left=(s.left-p)/c+"px",this.element.style.top=(s.top-g)/d+"px",this.element.style.width=(s.right-s.left)/c+"px",this.element.style.height=(s.bottom-s.top)/d+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),s=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),l=s&&s.type.spec.disableDropCursor,a=typeof l=="function"?l(this.editorView,t,e):l;if(t&&!a){let c=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let d=N1(this.editorView.state.doc,c,this.editorView.dragging.slice);d!=null&&(c=d)}this.setCursor(c),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}const bA=zt.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[xA(this.options)]}});class Je extends Se{constructor(e){super(e,e)}map(e,t){let s=e.resolve(t.map(this.head));return Je.valid(s)?new Je(s):Se.near(s)}content(){return le.empty}eq(e){return e instanceof Je&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Je(e.resolve(t.pos))}getBookmark(){return new Hp(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!vA(e)||!SA(e))return!1;let s=t.type.spec.allowGapCursor;if(s!=null)return s;let l=t.contentMatchAt(e.index()).defaultType;return l&&l.isTextblock}static findGapCursorFrom(e,t,s=!1){e:for(;;){if(!s&&Je.valid(e))return e;let l=e.pos,a=null;for(let c=e.depth;;c--){let d=e.node(c);if(t>0?e.indexAfter(c)<d.childCount:e.index(c)>0){a=d.child(t>0?e.indexAfter(c):e.index(c)-1);break}else if(c==0)return null;l+=t;let h=e.doc.resolve(l);if(Je.valid(h))return h}for(;;){let c=t>0?a.firstChild:a.lastChild;if(!c){if(a.isAtom&&!a.isText&&!fe.isSelectable(a)){e=e.doc.resolve(l+a.nodeSize*t),s=!1;continue e}break}a=c,l+=t;let d=e.doc.resolve(l);if(Je.valid(d))return d}return null}}}Je.prototype.visible=!1;Je.findFrom=Je.findGapCursorFrom;Se.jsonID("gapcursor",Je);class Hp{constructor(e){this.pos=e}map(e){return new Hp(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return Je.valid(t)?new Je(t):Se.near(t)}}function vA(n){for(let e=n.depth;e>=0;e--){let t=n.index(e),s=n.node(e);if(t==0){if(s.type.spec.isolating)return!0;continue}for(let l=s.child(t-1);;l=l.lastChild){if(l.childCount==0&&!l.inlineContent||l.isAtom||l.type.spec.isolating)return!0;if(l.inlineContent)return!1}}return!0}function SA(n){for(let e=n.depth;e>=0;e--){let t=n.indexAfter(e),s=n.node(e);if(t==s.childCount){if(s.type.spec.isolating)return!0;continue}for(let l=s.child(t);;l=l.firstChild){if(l.childCount==0&&!l.inlineContent||l.isAtom||l.type.spec.isolating)return!0;if(l.inlineContent)return!1}}return!0}function NA(){return new Nt({props:{decorations:CA,createSelectionBetween(n,e,t){return e.pos==t.pos&&Je.valid(t)?new Je(t):null},handleClick:kA,handleKeyDown:wA,handleDOMEvents:{beforeinput:jA}}})}const wA=uv({ArrowLeft:rc("horiz",-1),ArrowRight:rc("horiz",1),ArrowUp:rc("vert",-1),ArrowDown:rc("vert",1)});function rc(n,e){const t=n=="vert"?e>0?"down":"up":e>0?"right":"left";return function(s,l,a){let c=s.selection,d=e>0?c.$to:c.$from,h=c.empty;if(c instanceof be){if(!a.endOfTextblock(t)||d.depth==0)return!1;h=!1,d=s.doc.resolve(e>0?d.after():d.before())}let p=Je.findGapCursorFrom(d,e,h);return p?(l&&l(s.tr.setSelection(new Je(p))),!0):!1}}function kA(n,e,t){if(!n||!n.editable)return!1;let s=n.state.doc.resolve(e);if(!Je.valid(s))return!1;let l=n.posAtCoords({left:t.clientX,top:t.clientY});return l&&l.inside>-1&&fe.isSelectable(n.state.doc.nodeAt(l.inside))?!1:(n.dispatch(n.state.tr.setSelection(new Je(s))),!0)}function jA(n,e){if(e.inputType!="insertCompositionText"||!(n.state.selection instanceof Je))return!1;let{$from:t}=n.state.selection,s=t.parent.contentMatchAt(t.index()).findWrapping(n.state.schema.nodes.text);if(!s)return!1;let l=W.empty;for(let c=s.length-1;c>=0;c--)l=W.from(s[c].createAndFill(null,l));let a=n.state.tr.replace(t.pos,t.pos,new le(l,0,0));return a.setSelection(be.near(a.doc.resolve(t.pos+1))),n.dispatch(a),!1}function CA(n){if(!(n.selection instanceof Je))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",rt.create(n.doc,[xn.widget(n.selection.head,e,{key:"gapcursor"})])}const EA=zt.create({name:"gapCursor",addProseMirrorPlugins(){return[NA()]},extendNodeSchema(n){var e;const t={name:n.name,options:n.options,storage:n.storage};return{allowGapCursor:(e=ke(ce(n,"allowGapCursor",t)))!==null&&e!==void 0?e:null}}}),AA=Lt.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:n}){return["br",mt(this.options.HTMLAttributes,n)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:n,chain:e,state:t,editor:s})=>n.first([()=>n.exitCode(),()=>n.command(()=>{const{selection:l,storedMarks:a}=t;if(l.$from.parent.type.spec.isolating)return!1;const{keepMarks:c}=this.options,{splittableMarks:d}=s.extensionManager,h=a||l.$to.parentOffset&&l.$from.marks();return e().insertContent({type:this.name}).command(({tr:p,dispatch:g})=>{if(g&&h&&c){const y=h.filter(b=>d.includes(b.type.name));p.ensureMarks(y)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),TA=Lt.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(n=>({tag:`h${n}`,attrs:{level:n}}))},renderHTML({node:n,HTMLAttributes:e}){return[`h${this.options.levels.includes(n.attrs.level)?n.attrs.level:this.options.levels[0]}`,mt(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.setNode(this.name,n):!1,toggleHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.toggleNode(this.name,"paragraph",n):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((n,e)=>({...n,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(n=>Ih({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${n}})\\s$`),type:this.type,getAttributes:{level:n}}))}});var Ac=200,ht=function(){};ht.prototype.append=function(e){return e.length?(e=ht.from(e),!this.length&&e||e.length<Ac&&this.leafAppend(e)||this.length<Ac&&e.leafPrepend(this)||this.appendInner(e)):this};ht.prototype.prepend=function(e){return e.length?ht.from(e).append(this):this};ht.prototype.appendInner=function(e){return new MA(this,e)};ht.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?ht.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};ht.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};ht.prototype.forEach=function(e,t,s){t===void 0&&(t=0),s===void 0&&(s=this.length),t<=s?this.forEachInner(e,t,s,0):this.forEachInvertedInner(e,t,s,0)};ht.prototype.map=function(e,t,s){t===void 0&&(t=0),s===void 0&&(s=this.length);var l=[];return this.forEach(function(a,c){return l.push(e(a,c))},t,s),l};ht.from=function(e){return e instanceof ht?e:e&&e.length?new _v(e):ht.empty};var _v=function(n){function e(s){n.call(this),this.values=s}n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(l,a){return l==0&&a==this.length?this:new e(this.values.slice(l,a))},e.prototype.getInner=function(l){return this.values[l]},e.prototype.forEachInner=function(l,a,c,d){for(var h=a;h<c;h++)if(l(this.values[h],d+h)===!1)return!1},e.prototype.forEachInvertedInner=function(l,a,c,d){for(var h=a-1;h>=c;h--)if(l(this.values[h],d+h)===!1)return!1},e.prototype.leafAppend=function(l){if(this.length+l.length<=Ac)return new e(this.values.concat(l.flatten()))},e.prototype.leafPrepend=function(l){if(this.length+l.length<=Ac)return new e(l.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e}(ht);ht.empty=new _v([]);var MA=function(n){function e(t,s){n.call(this),this.left=t,this.right=s,this.length=t.length+s.length,this.depth=Math.max(t.depth,s.depth)+1}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(s){return s<this.left.length?this.left.get(s):this.right.get(s-this.left.length)},e.prototype.forEachInner=function(s,l,a,c){var d=this.left.length;if(l<d&&this.left.forEachInner(s,l,Math.min(a,d),c)===!1||a>d&&this.right.forEachInner(s,Math.max(l-d,0),Math.min(this.length,a)-d,c+d)===!1)return!1},e.prototype.forEachInvertedInner=function(s,l,a,c){var d=this.left.length;if(l>d&&this.right.forEachInvertedInner(s,l-d,Math.max(a,d)-d,c+d)===!1||a<d&&this.left.forEachInvertedInner(s,Math.min(l,d),a,c)===!1)return!1},e.prototype.sliceInner=function(s,l){if(s==0&&l==this.length)return this;var a=this.left.length;return l<=a?this.left.slice(s,l):s>=a?this.right.slice(s-a,l-a):this.left.slice(s,a).append(this.right.slice(0,l-a))},e.prototype.leafAppend=function(s){var l=this.right.leafAppend(s);if(l)return new e(this.left,l)},e.prototype.leafPrepend=function(s){var l=this.left.leafPrepend(s);if(l)return new e(l,this.right)},e.prototype.appendInner=function(s){return this.left.depth>=Math.max(this.right.depth,s.depth)+1?new e(this.left,new e(this.right,s)):new e(this,s)},e}(ht);const OA=500;class Nn{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let s=this.items.length;for(;;s--)if(this.items.get(s-1).selection){--s;break}let l,a;t&&(l=this.remapping(s,this.items.length),a=l.maps.length);let c=e.tr,d,h,p=[],g=[];return this.items.forEach((y,b)=>{if(!y.step){l||(l=this.remapping(s,b+1),a=l.maps.length),a--,g.push(y);return}if(l){g.push(new Dn(y.map));let S=y.step.map(l.slice(a)),v;S&&c.maybeStep(S).doc&&(v=c.mapping.maps[c.mapping.maps.length-1],p.push(new Dn(v,void 0,void 0,p.length+g.length))),a--,v&&l.appendMap(v,a)}else c.maybeStep(y.step);if(y.selection)return d=l?y.selection.map(l.slice(a)):y.selection,h=new Nn(this.items.slice(0,s).append(g.reverse().concat(p)),this.eventCount-1),!1},this.items.length,0),{remaining:h,transform:c,selection:d}}addTransform(e,t,s,l){let a=[],c=this.eventCount,d=this.items,h=!l&&d.length?d.get(d.length-1):null;for(let g=0;g<e.steps.length;g++){let y=e.steps[g].invert(e.docs[g]),b=new Dn(e.mapping.maps[g],y,t),S;(S=h&&h.merge(b))&&(b=S,g?a.pop():d=d.slice(0,d.length-1)),a.push(b),t&&(c++,t=void 0),l||(h=b)}let p=c-s.depth;return p>DA&&(d=RA(d,p),c-=p),new Nn(d.append(a),c)}remapping(e,t){let s=new ba;return this.items.forEach((l,a)=>{let c=l.mirrorOffset!=null&&a-l.mirrorOffset>=e?s.maps.length-l.mirrorOffset:void 0;s.appendMap(l.map,c)},e,t),s}addMaps(e){return this.eventCount==0?this:new Nn(this.items.append(e.map(t=>new Dn(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let s=[],l=Math.max(0,this.items.length-t),a=e.mapping,c=e.steps.length,d=this.eventCount;this.items.forEach(b=>{b.selection&&d--},l);let h=t;this.items.forEach(b=>{let S=a.getMirror(--h);if(S==null)return;c=Math.min(c,S);let v=a.maps[S];if(b.step){let w=e.steps[S].invert(e.docs[S]),k=b.selection&&b.selection.map(a.slice(h+1,S));k&&d++,s.push(new Dn(v,w,k))}else s.push(new Dn(v))},l);let p=[];for(let b=t;b<c;b++)p.push(new Dn(a.maps[b]));let g=this.items.slice(0,l).append(p).append(s),y=new Nn(g,d);return y.emptyItemCount()>OA&&(y=y.compress(this.items.length-s.length)),y}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),s=t.maps.length,l=[],a=0;return this.items.forEach((c,d)=>{if(d>=e)l.push(c),c.selection&&a++;else if(c.step){let h=c.step.map(t.slice(s)),p=h&&h.getMap();if(s--,p&&t.appendMap(p,s),h){let g=c.selection&&c.selection.map(t.slice(s));g&&a++;let y=new Dn(p.invert(),h,g),b,S=l.length-1;(b=l.length&&l[S].merge(y))?l[S]=b:l.push(y)}}else c.map&&s--},this.items.length,0),new Nn(ht.from(l.reverse()),a)}}Nn.empty=new Nn(ht.empty,0);function RA(n,e){let t;return n.forEach((s,l)=>{if(s.selection&&e--==0)return t=l,!1}),n.slice(t)}class Dn{constructor(e,t,s,l){this.map=e,this.step=t,this.selection=s,this.mirrorOffset=l}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new Dn(t.getMap().invert(),t,this.selection)}}}class Pr{constructor(e,t,s,l,a){this.done=e,this.undone=t,this.prevRanges=s,this.prevTime=l,this.prevComposition=a}}const DA=20;function zA(n,e,t,s){let l=t.getMeta(Ls),a;if(l)return l.historyState;t.getMeta(_A)&&(n=new Pr(n.done,n.undone,null,0,-1));let c=t.getMeta("appendedTransaction");if(t.steps.length==0)return n;if(c&&c.getMeta(Ls))return c.getMeta(Ls).redo?new Pr(n.done.addTransform(t,void 0,s,hc(e)),n.undone,pb(t.mapping.maps),n.prevTime,n.prevComposition):new Pr(n.done,n.undone.addTransform(t,void 0,s,hc(e)),null,n.prevTime,n.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(c&&c.getMeta("addToHistory")===!1)){let d=t.getMeta("composition"),h=n.prevTime==0||!c&&n.prevComposition!=d&&(n.prevTime<(t.time||0)-s.newGroupDelay||!LA(t,n.prevRanges)),p=c?uh(n.prevRanges,t.mapping):pb(t.mapping.maps);return new Pr(n.done.addTransform(t,h?e.selection.getBookmark():void 0,s,hc(e)),Nn.empty,p,t.time,d??n.prevComposition)}else return(a=t.getMeta("rebased"))?new Pr(n.done.rebased(t,a),n.undone.rebased(t,a),uh(n.prevRanges,t.mapping),n.prevTime,n.prevComposition):new Pr(n.done.addMaps(t.mapping.maps),n.undone.addMaps(t.mapping.maps),uh(n.prevRanges,t.mapping),n.prevTime,n.prevComposition)}function LA(n,e){if(!e)return!1;if(!n.docChanged)return!0;let t=!1;return n.mapping.maps[0].forEach((s,l)=>{for(let a=0;a<e.length;a+=2)s<=e[a+1]&&l>=e[a]&&(t=!0)}),t}function pb(n){let e=[];for(let t=n.length-1;t>=0&&e.length==0;t--)n[t].forEach((s,l,a,c)=>e.push(a,c));return e}function uh(n,e){if(!n)return null;let t=[];for(let s=0;s<n.length;s+=2){let l=e.map(n[s],1),a=e.map(n[s+1],-1);l<=a&&t.push(l,a)}return t}function BA(n,e,t){let s=hc(e),l=Ls.get(e).spec.config,a=(t?n.undone:n.done).popEvent(e,s);if(!a)return null;let c=a.selection.resolve(a.transform.doc),d=(t?n.done:n.undone).addTransform(a.transform,e.selection.getBookmark(),l,s),h=new Pr(t?d:a.remaining,t?a.remaining:d,null,0,-1);return a.transform.setSelection(c).setMeta(Ls,{redo:t,historyState:h})}let dh=!1,mb=null;function hc(n){let e=n.plugins;if(mb!=e){dh=!1,mb=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){dh=!0;break}}return dh}const Ls=new nn("history"),_A=new nn("closeHistory");function HA(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new Nt({key:Ls,state:{init(){return new Pr(Nn.empty,Nn.empty,null,0,-1)},apply(e,t,s){return zA(t,s,e,n)}},config:n,props:{handleDOMEvents:{beforeinput(e,t){let s=t.inputType,l=s=="historyUndo"?Uv:s=="historyRedo"?Pv:null;return l?(t.preventDefault(),l(e.state,e.dispatch)):!1}}}})}function Hv(n,e){return(t,s)=>{let l=Ls.getState(t);if(!l||(n?l.undone:l.done).eventCount==0)return!1;if(s){let a=BA(l,t,n);a&&s(e?a.scrollIntoView():a)}return!0}}const Uv=Hv(!1,!0),Pv=Hv(!0,!0),UA=zt.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:n,dispatch:e})=>Uv(n,e),redo:()=>({state:n,dispatch:e})=>Pv(n,e)}},addProseMirrorPlugins(){return[HA(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-я":()=>this.editor.commands.undo(),"Shift-Mod-я":()=>this.editor.commands.redo()}}}),PA=Lt.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:n}){return["hr",mt(this.options.HTMLAttributes,n)]},addCommands(){return{setHorizontalRule:()=>({chain:n,state:e})=>{const{selection:t}=e,{$from:s,$to:l}=t,a=n();return s.parentOffset===0?a.insertContentAt({from:Math.max(s.pos-1,0),to:l.pos},{type:this.name}):n4(t)?a.insertContentAt(l.pos,{type:this.name}):a.insertContent({type:this.name}),a.command(({tr:c,dispatch:d})=>{var h;if(d){const{$to:p}=c.selection,g=p.end();if(p.nodeAfter)p.nodeAfter.isTextblock?c.setSelection(be.create(c.doc,p.pos+1)):p.nodeAfter.isBlock?c.setSelection(fe.create(c.doc,p.pos)):c.setSelection(be.create(c.doc,p.pos));else{const y=(h=p.parent.type.contentMatch.defaultType)===null||h===void 0?void 0:h.create();y&&(c.insert(g,y),c.setSelection(be.create(c.doc,g+1)))}c.scrollIntoView()}return!0}).run()}}},addInputRules(){return[zv({find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type})]}}),IA=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,VA=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,qA=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,FA=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,$A=ur.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:n=>n.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:n=>n.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:n}){return["em",mt(this.options.HTMLAttributes,n),0]},addCommands(){return{setItalic:()=>({commands:n})=>n.setMark(this.name),toggleItalic:()=>({commands:n})=>n.toggleMark(this.name),unsetItalic:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Gi({find:IA,type:this.type}),Gi({find:qA,type:this.type})]},addPasteRules(){return[Ps({find:VA,type:this.type}),Ps({find:FA,type:this.type})]}}),GA=Lt.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",mt(this.options.HTMLAttributes,n),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),YA="listItem",gb="textStyle",xb=/^(\d+)\.\s$/,KA=Lt.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:n=>n.hasAttribute("start")?parseInt(n.getAttribute("start")||"",10):1},type:{default:null,parseHTML:n=>n.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:n}){const{start:e,...t}=n;return e===1?["ol",mt(this.options.HTMLAttributes,t),0]:["ol",mt(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleOrderedList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(YA,this.editor.getAttributes(gb)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let n=Ca({find:xb,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(n=Ca({find:xb,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(gb)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[n]}}),JA=Lt.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:n}){return["p",mt(this.options.HTMLAttributes,n),0]},addCommands(){return{setParagraph:()=>({commands:n})=>n.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),QA=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,XA=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,ZA=ur.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["s",mt(this.options.HTMLAttributes,n),0]},addCommands(){return{setStrike:()=>({commands:n})=>n.setMark(this.name),toggleStrike:()=>({commands:n})=>n.toggleMark(this.name),unsetStrike:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Gi({find:QA,type:this.type})]},addPasteRules(){return[Ps({find:XA,type:this.type})]}}),WA=Lt.create({name:"text",group:"inline"}),eT=zt.create({name:"starterKit",addExtensions(){const n=[];return this.options.bold!==!1&&n.push(aA.configure(this.options.bold)),this.options.blockquote!==!1&&n.push(nA.configure(this.options.blockquote)),this.options.bulletList!==!1&&n.push(cA.configure(this.options.bulletList)),this.options.code!==!1&&n.push(fA.configure(this.options.code)),this.options.codeBlock!==!1&&n.push(mA.configure(this.options.codeBlock)),this.options.document!==!1&&n.push(gA.configure(this.options.document)),this.options.dropcursor!==!1&&n.push(bA.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&n.push(EA.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&n.push(AA.configure(this.options.hardBreak)),this.options.heading!==!1&&n.push(TA.configure(this.options.heading)),this.options.history!==!1&&n.push(UA.configure(this.options.history)),this.options.horizontalRule!==!1&&n.push(PA.configure(this.options.horizontalRule)),this.options.italic!==!1&&n.push($A.configure(this.options.italic)),this.options.listItem!==!1&&n.push(GA.configure(this.options.listItem)),this.options.orderedList!==!1&&n.push(KA.configure(this.options.orderedList)),this.options.paragraph!==!1&&n.push(JA.configure(this.options.paragraph)),this.options.strike!==!1&&n.push(ZA.configure(this.options.strike)),this.options.text!==!1&&n.push(WA.configure(this.options.text)),n}}),tT="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0america6xi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mögensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",nT="ελ1υ2бг1ел3дети4ею2католик6ом3мкд2он1сква6онлайн5рг3рус2ф2сайт3рб3укр3қаз3հայ3ישראל5קום3ابوظبي5رامكو5لاردن4بحرين5جزائر5سعودية6عليان5مغرب5مارات5یران5بارت2زار4يتك3ھارت5تونس4سودان3رية5شبكة4عراق2ب2مان4فلسطين6قطر3كاثوليك6وم3مصر2ليسيا5وريتانيا7قع4همراه5پاکستان7ڀارت4कॉम3नेट3भारत0म्3ोत5संगठन5বাংলা5ভারত2ৰত4ਭਾਰਤ4ભારત4ଭାରତ4இந்தியா6லங்கை6சிங்கப்பூர்11భారత్5ಭಾರತ4ഭാരതം5ලංකා4คอม3ไทย3ລາວ3გე2みんな3アマゾン4クラウド4グーグル4コム2ストア3セール3ファッション6ポイント4世界2中信1国1國1文网3亚马逊3企业2佛山2信息2健康2八卦2公司1益2台湾1灣2商城1店1标2嘉里0大酒店5在线2大拿2天主教3娱乐2家電2广东2微博2慈善2我爱你3手机2招聘2政务1府2新加坡2闻2时尚2書籍2机构2淡马锡3游戏2澳門2点看2移动2组织机构4网址1店1站1络2联通2谷歌2购物2通販2集团2電訊盈科4飞利浦3食品2餐厅2香格里拉3港2닷넷1컴2삼성2한국2",Yi=(n,e)=>{for(const t in e)n[t]=e[t];return n},qh="numeric",Fh="ascii",$h="alpha",ua="asciinumeric",la="alphanumeric",Gh="domain",Iv="emoji",rT="scheme",sT="slashscheme",fh="whitespace";function iT(n,e){return n in e||(e[n]=[]),e[n]}function Ts(n,e,t){e[qh]&&(e[ua]=!0,e[la]=!0),e[Fh]&&(e[ua]=!0,e[$h]=!0),e[ua]&&(e[la]=!0),e[$h]&&(e[la]=!0),e[la]&&(e[Gh]=!0),e[Iv]&&(e[Gh]=!0);for(const s in e){const l=iT(s,t);l.indexOf(n)<0&&l.push(n)}}function lT(n,e){const t={};for(const s in e)e[s].indexOf(n)>=0&&(t[s]=!0);return t}function Vt(n=null){this.j={},this.jr=[],this.jd=null,this.t=n}Vt.groups={};Vt.prototype={accepts(){return!!this.t},go(n){const e=this,t=e.j[n];if(t)return t;for(let s=0;s<e.jr.length;s++){const l=e.jr[s][0],a=e.jr[s][1];if(a&&l.test(n))return a}return e.jd},has(n,e=!1){return e?n in this.j:!!this.go(n)},ta(n,e,t,s){for(let l=0;l<n.length;l++)this.tt(n[l],e,t,s)},tr(n,e,t,s){s=s||Vt.groups;let l;return e&&e.j?l=e:(l=new Vt(e),t&&s&&Ts(e,t,s)),this.jr.push([n,l]),l},ts(n,e,t,s){let l=this;const a=n.length;if(!a)return l;for(let c=0;c<a-1;c++)l=l.tt(n[c]);return l.tt(n[a-1],e,t,s)},tt(n,e,t,s){s=s||Vt.groups;const l=this;if(e&&e.j)return l.j[n]=e,e;const a=e;let c,d=l.go(n);if(d?(c=new Vt,Yi(c.j,d.j),c.jr.push.apply(c.jr,d.jr),c.jd=d.jd,c.t=d.t):c=new Vt,a){if(s)if(c.t&&typeof c.t=="string"){const h=Yi(lT(c.t,s),t);Ts(a,h,s)}else t&&Ts(a,t,s);c.t=a}return l.j[n]=c,c}};const Ne=(n,e,t,s,l)=>n.ta(e,t,s,l),Ke=(n,e,t,s,l)=>n.tr(e,t,s,l),yb=(n,e,t,s,l)=>n.ts(e,t,s,l),ee=(n,e,t,s,l)=>n.tt(e,t,s,l),rr="WORD",Yh="UWORD",Vv="ASCIINUMERICAL",qv="ALPHANUMERICAL",Ea="LOCALHOST",Kh="TLD",Jh="UTLD",pc="SCHEME",zi="SLASH_SCHEME",Up="NUM",Qh="WS",Pp="NL",da="OPENBRACE",fa="CLOSEBRACE",Tc="OPENBRACKET",Mc="CLOSEBRACKET",Oc="OPENPAREN",Rc="CLOSEPAREN",Dc="OPENANGLEBRACKET",zc="CLOSEANGLEBRACKET",Lc="FULLWIDTHLEFTPAREN",Bc="FULLWIDTHRIGHTPAREN",_c="LEFTCORNERBRACKET",Hc="RIGHTCORNERBRACKET",Uc="LEFTWHITECORNERBRACKET",Pc="RIGHTWHITECORNERBRACKET",Ic="FULLWIDTHLESSTHAN",Vc="FULLWIDTHGREATERTHAN",qc="AMPERSAND",Fc="APOSTROPHE",$c="ASTERISK",Ir="AT",Gc="BACKSLASH",Yc="BACKTICK",Kc="CARET",qr="COLON",Ip="COMMA",Jc="DOLLAR",zn="DOT",Qc="EQUALS",Vp="EXCLAMATION",pn="HYPHEN",ha="PERCENT",Xc="PIPE",Zc="PLUS",Wc="POUND",pa="QUERY",qp="QUOTE",Fv="FULLWIDTHMIDDLEDOT",Fp="SEMI",Ln="SLASH",ma="TILDE",eu="UNDERSCORE",$v="EMOJI",tu="SYM";var Gv=Object.freeze({__proto__:null,ALPHANUMERICAL:qv,AMPERSAND:qc,APOSTROPHE:Fc,ASCIINUMERICAL:Vv,ASTERISK:$c,AT:Ir,BACKSLASH:Gc,BACKTICK:Yc,CARET:Kc,CLOSEANGLEBRACKET:zc,CLOSEBRACE:fa,CLOSEBRACKET:Mc,CLOSEPAREN:Rc,COLON:qr,COMMA:Ip,DOLLAR:Jc,DOT:zn,EMOJI:$v,EQUALS:Qc,EXCLAMATION:Vp,FULLWIDTHGREATERTHAN:Vc,FULLWIDTHLEFTPAREN:Lc,FULLWIDTHLESSTHAN:Ic,FULLWIDTHMIDDLEDOT:Fv,FULLWIDTHRIGHTPAREN:Bc,HYPHEN:pn,LEFTCORNERBRACKET:_c,LEFTWHITECORNERBRACKET:Uc,LOCALHOST:Ea,NL:Pp,NUM:Up,OPENANGLEBRACKET:Dc,OPENBRACE:da,OPENBRACKET:Tc,OPENPAREN:Oc,PERCENT:ha,PIPE:Xc,PLUS:Zc,POUND:Wc,QUERY:pa,QUOTE:qp,RIGHTCORNERBRACKET:Hc,RIGHTWHITECORNERBRACKET:Pc,SCHEME:pc,SEMI:Fp,SLASH:Ln,SLASH_SCHEME:zi,SYM:tu,TILDE:ma,TLD:Kh,UNDERSCORE:eu,UTLD:Jh,UWORD:Yh,WORD:rr,WS:Qh});const tr=/[a-z]/,ta=new RegExp("\\p{L}","u"),hh=new RegExp("\\p{Emoji}","u"),nr=/\d/,ph=/\s/,bb="\r",mh=`
`,aT="️",oT="‍",gh="￼";let sc=null,ic=null;function cT(n=[]){const e={};Vt.groups=e;const t=new Vt;sc==null&&(sc=vb(tT)),ic==null&&(ic=vb(nT)),ee(t,"'",Fc),ee(t,"{",da),ee(t,"}",fa),ee(t,"[",Tc),ee(t,"]",Mc),ee(t,"(",Oc),ee(t,")",Rc),ee(t,"<",Dc),ee(t,">",zc),ee(t,"（",Lc),ee(t,"）",Bc),ee(t,"「",_c),ee(t,"」",Hc),ee(t,"『",Uc),ee(t,"』",Pc),ee(t,"＜",Ic),ee(t,"＞",Vc),ee(t,"&",qc),ee(t,"*",$c),ee(t,"@",Ir),ee(t,"`",Yc),ee(t,"^",Kc),ee(t,":",qr),ee(t,",",Ip),ee(t,"$",Jc),ee(t,".",zn),ee(t,"=",Qc),ee(t,"!",Vp),ee(t,"-",pn),ee(t,"%",ha),ee(t,"|",Xc),ee(t,"+",Zc),ee(t,"#",Wc),ee(t,"?",pa),ee(t,'"',qp),ee(t,"/",Ln),ee(t,";",Fp),ee(t,"~",ma),ee(t,"_",eu),ee(t,"\\",Gc),ee(t,"・",Fv);const s=Ke(t,nr,Up,{[qh]:!0});Ke(s,nr,s);const l=Ke(s,tr,Vv,{[ua]:!0}),a=Ke(s,ta,qv,{[la]:!0}),c=Ke(t,tr,rr,{[Fh]:!0});Ke(c,nr,l),Ke(c,tr,c),Ke(l,nr,l),Ke(l,tr,l);const d=Ke(t,ta,Yh,{[$h]:!0});Ke(d,tr),Ke(d,nr,a),Ke(d,ta,d),Ke(a,nr,a),Ke(a,tr),Ke(a,ta,a);const h=ee(t,mh,Pp,{[fh]:!0}),p=ee(t,bb,Qh,{[fh]:!0}),g=Ke(t,ph,Qh,{[fh]:!0});ee(t,gh,g),ee(p,mh,h),ee(p,gh,g),Ke(p,ph,g),ee(g,bb),ee(g,mh),Ke(g,ph,g),ee(g,gh,g);const y=Ke(t,hh,$v,{[Iv]:!0});ee(y,"#"),Ke(y,hh,y),ee(y,aT,y);const b=ee(y,oT);ee(b,"#"),Ke(b,hh,y);const S=[[tr,c],[nr,l]],v=[[tr,null],[ta,d],[nr,a]];for(let w=0;w<sc.length;w++)_r(t,sc[w],Kh,rr,S);for(let w=0;w<ic.length;w++)_r(t,ic[w],Jh,Yh,v);Ts(Kh,{tld:!0,ascii:!0},e),Ts(Jh,{utld:!0,alpha:!0},e),_r(t,"file",pc,rr,S),_r(t,"mailto",pc,rr,S),_r(t,"http",zi,rr,S),_r(t,"https",zi,rr,S),_r(t,"ftp",zi,rr,S),_r(t,"ftps",zi,rr,S),Ts(pc,{scheme:!0,ascii:!0},e),Ts(zi,{slashscheme:!0,ascii:!0},e),n=n.sort((w,k)=>w[0]>k[0]?1:-1);for(let w=0;w<n.length;w++){const k=n[w][0],O=n[w][1]?{[rT]:!0}:{[sT]:!0};k.indexOf("-")>=0?O[Gh]=!0:tr.test(k)?nr.test(k)?O[ua]=!0:O[Fh]=!0:O[qh]=!0,yb(t,k,k,O)}return yb(t,"localhost",Ea,{ascii:!0}),t.jd=new Vt(tu),{start:t,tokens:Yi({groups:e},Gv)}}function Yv(n,e){const t=uT(e.replace(/[A-Z]/g,d=>d.toLowerCase())),s=t.length,l=[];let a=0,c=0;for(;c<s;){let d=n,h=null,p=0,g=null,y=-1,b=-1;for(;c<s&&(h=d.go(t[c]));)d=h,d.accepts()?(y=0,b=0,g=d):y>=0&&(y+=t[c].length,b++),p+=t[c].length,a+=t[c].length,c++;a-=y,c-=b,p-=y,l.push({t:g.t,v:e.slice(a-p,a),s:a-p,e:a})}return l}function uT(n){const e=[],t=n.length;let s=0;for(;s<t;){let l=n.charCodeAt(s),a,c=l<55296||l>56319||s+1===t||(a=n.charCodeAt(s+1))<56320||a>57343?n[s]:n.slice(s,s+2);e.push(c),s+=c.length}return e}function _r(n,e,t,s,l){let a;const c=e.length;for(let d=0;d<c-1;d++){const h=e[d];n.j[h]?a=n.j[h]:(a=new Vt(s),a.jr=l.slice(),n.j[h]=a),n=a}return a=new Vt(t),a.jr=l.slice(),n.j[e[c-1]]=a,a}function vb(n){const e=[],t=[];let s=0,l="0123456789";for(;s<n.length;){let a=0;for(;l.indexOf(n[s+a])>=0;)a++;if(a>0){e.push(t.join(""));for(let c=parseInt(n.substring(s,s+a),10);c>0;c--)t.pop();s+=a}else t.push(n[s]),s++}return e}const Aa={defaultProtocol:"http",events:null,format:Sb,formatHref:Sb,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function $p(n,e=null){let t=Yi({},Aa);n&&(t=Yi(t,n instanceof $p?n.o:n));const s=t.ignoreTags,l=[];for(let a=0;a<s.length;a++)l.push(s[a].toUpperCase());this.o=t,e&&(this.defaultRender=e),this.ignoreTags=l}$p.prototype={o:Aa,ignoreTags:[],defaultRender(n){return n},check(n){return this.get("validate",n.toString(),n)},get(n,e,t){const s=e!=null;let l=this.o[n];return l&&(typeof l=="object"?(l=t.t in l?l[t.t]:Aa[n],typeof l=="function"&&s&&(l=l(e,t))):typeof l=="function"&&s&&(l=l(e,t.t,t)),l)},getObj(n,e,t){let s=this.o[n];return typeof s=="function"&&e!=null&&(s=s(e,t.t,t)),s},render(n){const e=n.render(this);return(this.get("render",null,n)||this.defaultRender)(e,n.t,n)}};function Sb(n){return n}function Kv(n,e){this.t="token",this.v=n,this.tk=e}Kv.prototype={isLink:!1,toString(){return this.v},toHref(n){return this.toString()},toFormattedString(n){const e=this.toString(),t=n.get("truncate",e,this),s=n.get("format",e,this);return t&&s.length>t?s.substring(0,t)+"…":s},toFormattedHref(n){return n.get("formatHref",this.toHref(n.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(n=Aa.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(n),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(n){return{type:this.t,value:this.toFormattedString(n),isLink:this.isLink,href:this.toFormattedHref(n),start:this.startIndex(),end:this.endIndex()}},validate(n){return n.get("validate",this.toString(),this)},render(n){const e=this,t=this.toHref(n.get("defaultProtocol")),s=n.get("formatHref",t,this),l=n.get("tagName",t,e),a=this.toFormattedString(n),c={},d=n.get("className",t,e),h=n.get("target",t,e),p=n.get("rel",t,e),g=n.getObj("attributes",t,e),y=n.getObj("events",t,e);return c.href=s,d&&(c.class=d),h&&(c.target=h),p&&(c.rel=p),g&&Yi(c,g),{tagName:l,attributes:c,content:a,eventListeners:y}}};function bu(n,e){class t extends Kv{constructor(l,a){super(l,a),this.t=n}}for(const s in e)t.prototype[s]=e[s];return t.t=n,t}const Nb=bu("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),wb=bu("text"),dT=bu("nl"),lc=bu("url",{isLink:!0,toHref(n=Aa.defaultProtocol){return this.hasProtocol()?this.v:`${n}://${this.v}`},hasProtocol(){const n=this.tk;return n.length>=2&&n[0].t!==Ea&&n[1].t===qr}}),hn=n=>new Vt(n);function fT({groups:n}){const e=n.domain.concat([qc,$c,Ir,Gc,Yc,Kc,Jc,Qc,pn,Up,ha,Xc,Zc,Wc,Ln,tu,ma,eu]),t=[Fc,qr,Ip,zn,Vp,ha,pa,qp,Fp,Dc,zc,da,fa,Mc,Tc,Oc,Rc,Lc,Bc,_c,Hc,Uc,Pc,Ic,Vc],s=[qc,Fc,$c,Gc,Yc,Kc,Jc,Qc,pn,da,fa,ha,Xc,Zc,Wc,pa,Ln,tu,ma,eu],l=hn(),a=ee(l,ma);Ne(a,s,a),Ne(a,n.domain,a);const c=hn(),d=hn(),h=hn();Ne(l,n.domain,c),Ne(l,n.scheme,d),Ne(l,n.slashscheme,h),Ne(c,s,a),Ne(c,n.domain,c);const p=ee(c,Ir);ee(a,Ir,p),ee(d,Ir,p),ee(h,Ir,p);const g=ee(a,zn);Ne(g,s,a),Ne(g,n.domain,a);const y=hn();Ne(p,n.domain,y),Ne(y,n.domain,y);const b=ee(y,zn);Ne(b,n.domain,y);const S=hn(Nb);Ne(b,n.tld,S),Ne(b,n.utld,S),ee(p,Ea,S);const v=ee(y,pn);ee(v,pn,v),Ne(v,n.domain,y),Ne(S,n.domain,y),ee(S,zn,b),ee(S,pn,v);const w=ee(S,qr);Ne(w,n.numeric,Nb);const k=ee(c,pn),E=ee(c,zn);ee(k,pn,k),Ne(k,n.domain,c),Ne(E,s,a),Ne(E,n.domain,c);const O=hn(lc);Ne(E,n.tld,O),Ne(E,n.utld,O),Ne(O,n.domain,c),Ne(O,s,a),ee(O,zn,E),ee(O,pn,k),ee(O,Ir,p);const z=ee(O,qr),q=hn(lc);Ne(z,n.numeric,q);const D=hn(lc),I=hn();Ne(D,e,D),Ne(D,t,I),Ne(I,e,D),Ne(I,t,I),ee(O,Ln,D),ee(q,Ln,D);const L=ee(d,qr),G=ee(h,qr),ne=ee(G,Ln),se=ee(ne,Ln);Ne(d,n.domain,c),ee(d,zn,E),ee(d,pn,k),Ne(h,n.domain,c),ee(h,zn,E),ee(h,pn,k),Ne(L,n.domain,D),ee(L,Ln,D),ee(L,pa,D),Ne(se,n.domain,D),Ne(se,e,D),ee(se,Ln,D);const ue=[[da,fa],[Tc,Mc],[Oc,Rc],[Dc,zc],[Lc,Bc],[_c,Hc],[Uc,Pc],[Ic,Vc]];for(let Z=0;Z<ue.length;Z++){const[ye,ge]=ue[Z],Te=ee(D,ye);ee(I,ye,Te),ee(Te,ge,D);const P=hn(lc);Ne(Te,e,P);const te=hn();Ne(Te,t),Ne(P,e,P),Ne(P,t,te),Ne(te,e,P),Ne(te,t,te),ee(P,ge,D),ee(te,ge,D)}return ee(l,Ea,O),ee(l,Pp,dT),{start:l,tokens:Gv}}function hT(n,e,t){let s=t.length,l=0,a=[],c=[];for(;l<s;){let d=n,h=null,p=null,g=0,y=null,b=-1;for(;l<s&&!(h=d.go(t[l].t));)c.push(t[l++]);for(;l<s&&(p=h||d.go(t[l].t));)h=null,d=p,d.accepts()?(b=0,y=d):b>=0&&b++,l++,g++;if(b<0)l-=g,l<s&&(c.push(t[l]),l++);else{c.length>0&&(a.push(xh(wb,e,c)),c=[]),l-=b,g-=b;const S=y.t,v=t.slice(l-g,l);a.push(xh(S,e,v))}}return c.length>0&&a.push(xh(wb,e,c)),a}function xh(n,e,t){const s=t[0].s,l=t[t.length-1].e,a=e.slice(s,l);return new n(a,t)}const pT=typeof console<"u"&&console&&console.warn||(()=>{}),mT="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Ve={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function gT(){return Vt.groups={},Ve.scanner=null,Ve.parser=null,Ve.tokenQueue=[],Ve.pluginQueue=[],Ve.customSchemes=[],Ve.initialized=!1,Ve}function kb(n,e=!1){if(Ve.initialized&&pT(`linkifyjs: already initialized - will not register custom scheme "${n}" ${mT}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(n))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);Ve.customSchemes.push([n,e])}function xT(){Ve.scanner=cT(Ve.customSchemes);for(let n=0;n<Ve.tokenQueue.length;n++)Ve.tokenQueue[n][1]({scanner:Ve.scanner});Ve.parser=fT(Ve.scanner.tokens);for(let n=0;n<Ve.pluginQueue.length;n++)Ve.pluginQueue[n][1]({scanner:Ve.scanner,parser:Ve.parser});return Ve.initialized=!0,Ve}function Gp(n){return Ve.initialized||xT(),hT(Ve.parser.start,n,Yv(Ve.scanner.start,n))}Gp.scan=Yv;function Jv(n,e=null,t=null){if(e&&typeof e=="object"){if(t)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);t=e,e=null}const s=new $p(t),l=Gp(n),a=[];for(let c=0;c<l.length;c++){const d=l[c];d.isLink&&(!e||d.t===e)&&s.check(d)&&a.push(d.toFormattedObject(s))}return a}function yT(n){return n.length===1?n[0].isLink:n.length===3&&n[1].isLink?["()","[]"].includes(n[0].value+n[2].value):!1}function bT(n){return new Nt({key:new nn("autolink"),appendTransaction:(e,t,s)=>{const l=e.some(p=>p.docChanged)&&!t.doc.eq(s.doc),a=e.some(p=>p.getMeta("preventAutolink"));if(!l||a)return;const{tr:c}=s,d=G3(t.doc,[...e]);if(e4(d).forEach(({newRange:p})=>{const g=K3(s.doc,p,S=>S.isTextblock);let y,b;if(g.length>1?(y=g[0],b=s.doc.textBetween(y.pos,y.pos+y.node.nodeSize,void 0," ")):g.length&&s.doc.textBetween(p.from,p.to," "," ").endsWith(" ")&&(y=g[0],b=s.doc.textBetween(y.pos,p.to,void 0," ")),y&&b){const S=b.split(" ").filter(E=>E!=="");if(S.length<=0)return!1;const v=S[S.length-1],w=y.pos+b.lastIndexOf(v);if(!v)return!1;const k=Gp(v).map(E=>E.toObject(n.defaultProtocol));if(!yT(k))return!1;k.filter(E=>E.isLink).map(E=>({...E,from:w+E.start+1,to:w+E.end+1})).filter(E=>s.schema.marks.code?!s.doc.rangeHasMark(E.from,E.to,s.schema.marks.code):!0).filter(E=>n.validate(E.value)).filter(E=>n.shouldAutoLink(E.value)).forEach(E=>{zp(E.from,E.to,s.doc).some(O=>O.mark.type===n.type)||c.addMark(E.from,E.to,n.type.create({href:E.href}))})}}),!!c.steps.length)return c}})}function vT(n){return new Nt({key:new nn("handleClickLink"),props:{handleClick:(e,t,s)=>{var l,a;if(s.button!==0||!e.editable)return!1;let c=s.target;const d=[];for(;c.nodeName!=="DIV";)d.push(c),c=c.parentNode;if(!d.find(b=>b.nodeName==="A"))return!1;const h=Dv(e.state,n.type.name),p=s.target,g=(l=p==null?void 0:p.href)!==null&&l!==void 0?l:h.href,y=(a=p==null?void 0:p.target)!==null&&a!==void 0?a:h.target;return p&&g?(window.open(g,y),!0):!1}}})}function ST(n){return new Nt({key:new nn("handlePasteLink"),props:{handlePaste:(e,t,s)=>{const{state:l}=e,{selection:a}=l,{empty:c}=a;if(c)return!1;let d="";s.content.forEach(p=>{d+=p.textContent});const h=Jv(d,{defaultProtocol:n.defaultProtocol}).find(p=>p.isLink&&p.value===d);return!d||!h?!1:n.editor.commands.setMark(n.type,{href:h.href})}}})}const NT=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g;function Ss(n,e){const t=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(s=>{const l=typeof s=="string"?s:s.scheme;l&&t.push(l)}),!n||n.replace(NT,"").match(new RegExp(`^(?:(?:${t.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}const wT=ur.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(n=>{if(typeof n=="string"){kb(n);return}kb(n.scheme,n.optionalSlashes)})},onDestroy(){gT()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(n,e)=>!!Ss(n,e.protocols),validate:n=>!!n,shouldAutoLink:n=>!!n}},addAttributes(){return{href:{default:null,parseHTML(n){return n.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:n=>{const e=n.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:t=>!!Ss(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:n}){return this.options.isAllowedUri(n.href,{defaultValidate:e=>!!Ss(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",mt(this.options.HTMLAttributes,n),0]:["a",mt(this.options.HTMLAttributes,{...n,href:""}),0]},addCommands(){return{setLink:n=>({chain:e})=>{const{href:t}=n;return this.options.isAllowedUri(t,{defaultValidate:s=>!!Ss(s,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,n).setMeta("preventAutolink",!0).run():!1},toggleLink:n=>({chain:e})=>{const{href:t}=n;return this.options.isAllowedUri(t,{defaultValidate:s=>!!Ss(s,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().toggleMark(this.name,n,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run():!1},unsetLink:()=>({chain:n})=>n().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Ps({find:n=>{const e=[];if(n){const{protocols:t,defaultProtocol:s}=this.options,l=Jv(n).filter(a=>a.isLink&&this.options.isAllowedUri(a.value,{defaultValidate:c=>!!Ss(c,t),protocols:t,defaultProtocol:s}));l.length&&l.forEach(a=>e.push({text:a.value,data:{href:a.href},index:a.start}))}return e},type:this.type,getAttributes:n=>{var e;return{href:(e=n.data)===null||e===void 0?void 0:e.href}}})]},addProseMirrorPlugins(){const n=[],{protocols:e,defaultProtocol:t}=this.options;return this.options.autolink&&n.push(bT({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:s=>this.options.isAllowedUri(s,{defaultValidate:l=>!!Ss(l,e),protocols:e,defaultProtocol:t}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&n.push(vT({type:this.type})),this.options.linkOnPaste&&n.push(ST({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),n}}),kT=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,jT=Lt.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{}}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:n}){return["img",mt(this.options.HTMLAttributes,n)]},addCommands(){return{setImage:n=>({commands:e})=>e.insertContent({type:this.name,attrs:n})}},addInputRules(){return[zv({find:kT,type:this.type,getAttributes:n=>{const[,,e,t,s]=n;return{src:t,alt:e,title:s}}})]}}),jb=({value:n,onChange:e})=>{const t=X4({extensions:[eT,wT.configure({openOnClick:!1,HTMLAttributes:{class:"text-blue-600 hover:underline"}}),jT.configure({HTMLAttributes:{class:"max-w-full h-auto rounded"}})],content:n,onUpdate:({editor:s})=>{e(s.getHTML())},editorProps:{attributes:{class:"prose prose-sm max-w-none focus:outline-none min-h-[150px]"}}});return t?f.jsxs("div",{className:"border border-gray-300 rounded-md shadow-sm",children:[f.jsxs("div",{className:"border-b border-gray-300 bg-gray-50 p-2 flex gap-2",children:[f.jsx("button",{onClick:()=>t.chain().focus().toggleBold().run(),className:`p-1 rounded ${t.isActive("bold")?"bg-gray-200":"hover:bg-gray-100"}`,title:"Bold",children:f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[f.jsx("path",{d:"M6 4h8a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"}),f.jsx("path",{d:"M6 12h9a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"})]})}),f.jsx("button",{onClick:()=>t.chain().focus().toggleItalic().run(),className:`p-1 rounded ${t.isActive("italic")?"bg-gray-200":"hover:bg-gray-100"}`,title:"Italic",children:f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[f.jsx("line",{x1:"19",y1:"4",x2:"10",y2:"4"}),f.jsx("line",{x1:"14",y1:"20",x2:"5",y2:"20"}),f.jsx("line",{x1:"15",y1:"4",x2:"9",y2:"20"})]})}),f.jsx("button",{onClick:()=>t.chain().focus().toggleBulletList().run(),className:`p-1 rounded ${t.isActive("bulletList")?"bg-gray-200":"hover:bg-gray-100"}`,title:"Bullet List",children:f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[f.jsx("line",{x1:"8",y1:"6",x2:"21",y2:"6"}),f.jsx("line",{x1:"8",y1:"12",x2:"21",y2:"12"}),f.jsx("line",{x1:"8",y1:"18",x2:"21",y2:"18"}),f.jsx("line",{x1:"3",y1:"6",x2:"3.01",y2:"6"}),f.jsx("line",{x1:"3",y1:"12",x2:"3.01",y2:"12"}),f.jsx("line",{x1:"3",y1:"18",x2:"3.01",y2:"18"})]})}),f.jsx("button",{onClick:()=>t.chain().focus().toggleOrderedList().run(),className:`p-1 rounded ${t.isActive("orderedList")?"bg-gray-200":"hover:bg-gray-100"}`,title:"Ordered List",children:f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[f.jsx("line",{x1:"10",y1:"6",x2:"21",y2:"6"}),f.jsx("line",{x1:"10",y1:"12",x2:"21",y2:"12"}),f.jsx("line",{x1:"10",y1:"18",x2:"21",y2:"18"}),f.jsx("path",{d:"M4 6h1v4"}),f.jsx("path",{d:"M4 10h2"}),f.jsx("path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1"})]})}),f.jsx("button",{onClick:()=>{const s=window.prompt("Enter the URL");s&&t.chain().focus().setLink({href:s}).run()},className:`p-1 rounded ${t.isActive("link")?"bg-gray-200":"hover:bg-gray-100"}`,title:"Add Link",children:f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[f.jsx("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}),f.jsx("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"})]})})]}),f.jsx(I4,{editor:t,className:"p-3"})]}):null},CT=({onSuccess:n,onError:e})=>{const{token:t}=st(),[s,l]=C.useState(80),[a,c]=C.useState(120),[d,h]=C.useState(0),[p,g]=C.useState(5e3),[y,b]=C.useState([]),[S,v]=C.useState(!1),[w,k]=C.useState(null),[E,O]=C.useState({image:null,title:"",subtitle:"",link:"",order:0,is_active:!0}),[z,q]=C.useState({}),[D,I]=C.useState({message:"",type:"success",visible:!1}),[L,G]=C.useState(!0),[ne,se]=C.useState(!1),ue=C.useRef(null),[Z,ye]=C.useState(""),[ge,Te]=C.useState(""),P=(X,ae)=>{I({message:X,type:ae,visible:!0}),ae==="success"&&n&&n(X),ae==="error"&&e&&e(X)},te=async()=>{G(!0);try{if(!t)return;const X=await Sh.getAllSettings(t),ae=X.find(Bt=>Bt.key==="delivery_fee_ncr"),ie=X.find(Bt=>Bt.key==="delivery_fee_outside_ncr"),it=X.find(Bt=>Bt.key==="free_delivery_threshold"),De=X.find(Bt=>Bt.key==="payment_options_description"),Ft=X.find(Bt=>Bt.key==="what_happens_after_payment");ae&&l(parseInt(ae.value)),ie&&c(parseInt(ie.value)),it&&h(parseInt(it.value)),De&&ye(De.value||""),Ft&&Te(Ft.value||"");const Vs=await na.getAll(t);b(Vs.data.carousels),g(Vs.data.interval)}catch{P("Failed to load settings","error")}finally{G(!1)}};C.useEffect(()=>{te()},[t]);const re=async X=>{if(X.preventDefault(),!!t){se(!0);try{await Sh.updateMultipleSettings(t,[{key:"delivery_fee_ncr",value:s},{key:"delivery_fee_outside_ncr",value:a},{key:"free_delivery_threshold",value:d},{key:"hero_carousel_interval",value:p},{key:"payment_options_description",value:Z},{key:"what_happens_after_payment",value:ge}]),P("Settings updated successfully.","success")}catch{P("Failed to update settings.","error")}finally{se(!1)}}},K=X=>{k(X),O({...X,image:null}),v(!0)},T=async X=>{if(t&&window.confirm("Delete this slide?"))try{await na.delete(t,X),P("Slide deleted successfully.","success"),te()}catch{P("Failed to delete slide.","error")}},_=X=>{const{name:ae,value:ie,type:it}=X.target;let De=ie;it==="checkbox"&&X.target instanceof HTMLInputElement&&(De=X.target.checked),O(Ft=>({...Ft,[ae]:De}))},F=X=>{X.target.files&&X.target.files[0]&&O(ae=>({...ae,image:X.target.files[0]}))},Q=async X=>{if(X.preventDefault(),!t)return;q({});const ae=new FormData;E.image&&ae.append("image",E.image),ae.append("title",E.title||""),ae.append("subtitle",E.subtitle||""),ae.append("link",E.link||""),ae.append("order",String(E.order||0)),ae.append("is_active",E.is_active?"1":"0");try{w?(await na.update(t,w.id,ae),P("Slide updated successfully.","success")):(await na.create(t,ae),P("Slide created successfully.","success")),v(!1),k(null),O({image:null,title:"",subtitle:"",link:"",order:0,is_active:!0}),te()}catch(ie){console.log(ie),ie&&ie.message&&ie.message.includes("422")?ie.response&&ie.response.errors?q(ie.response.errors):ie.errors?q(ie.errors):P("Validation error. Please check your input.","error"):ie&&ie.errors?(q(ie.errors),P("Validation error. Please check your input.","error")):P(ie.message||"Failed to save.","error")}};return L?f.jsx("div",{className:"p-4",children:"Loading settings..."}):f.jsxs("div",{className:"bg-white p-6 rounded shadow",children:[f.jsx(Lk,{message:D.message,type:D.type,isVisible:D.visible,onClose:()=>I(X=>({...X,visible:!1}))}),f.jsx("h2",{className:"text-xl font-medium mb-6",children:"Shop Settings"}),f.jsxs("form",{onSubmit:re,children:[f.jsxs("div",{className:"mb-4",children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Standard Delivery Fee Within NCR (₱)"}),f.jsx("input",{type:"number",min:0,step:1,value:s,onChange:X=>l(parseInt(X.target.value)||0),className:"w-full border-gray-300 rounded-md shadow-sm p-2 border",required:!0}),f.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"The standard delivery fee for addresses within NCR."})]}),f.jsxs("div",{className:"mb-4",children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Standard Delivery Fee Outside NCR (₱)"}),f.jsx("input",{type:"number",min:0,step:1,value:a,onChange:X=>c(parseInt(X.target.value)||0),className:"w-full border-gray-300 rounded-md shadow-sm p-2 border",required:!0}),f.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"The standard delivery fee for addresses outside NCR."})]}),f.jsxs("div",{className:"mb-4",children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Free Delivery Threshold (₱)"}),f.jsx("input",{type:"number",min:0,step:1,value:d,onChange:X=>h(parseInt(X.target.value)||0),className:"w-full border-gray-300 rounded-md shadow-sm p-2 border"}),f.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Orders above this amount will qualify for free delivery. Set to 0 to disable free delivery."})]}),f.jsxs("div",{className:"mb-6",children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Options Description"}),f.jsx(jb,{value:Z,onChange:ye}),f.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"This description will be shown to customers at checkout. You can use formatting, links, and images."})]}),f.jsxs("div",{className:"mb-6",children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"What Happens After Payment"}),f.jsx(jb,{value:ge,onChange:Te}),f.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"This description will be shown to customers after they place an order. You can use formatting, links, and images."})]}),f.jsxs("div",{className:"mb-6",children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hero Carousel Image Change Interval (ms)"}),f.jsx("input",{type:"number",min:1e3,step:100,value:p,onChange:X=>g(parseInt(X.target.value,10)),className:"w-40 border-gray-300 rounded-md shadow-sm p-2 border"})]}),f.jsx("div",{className:"flex justify-end",children:f.jsx("button",{type:"submit",disabled:ne,className:"bg-black text-white px-4 py-2 rounded hover:bg-gray-800 disabled:bg-gray-400",children:ne?"Saving...":"Save Settings"})})]}),f.jsxs("div",{className:"mt-10",children:[f.jsxs("div",{className:"flex justify-between items-center mb-4",children:[f.jsx("h3",{className:"text-lg font-semibold",children:"Hero Carousel Slides"}),f.jsx("button",{className:"bg-black text-white px-4 py-2 rounded hover:bg-gray-800",onClick:()=>{v(!0),k(null),O({image:null,title:"",subtitle:"",link:"",order:0,is_active:!0})},children:"Add Slide"})]}),f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"min-w-full divide-y divide-gray-200 mb-6",children:[f.jsx("thead",{className:"bg-gray-50",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-4 py-2",children:"Image"}),f.jsx("th",{className:"px-4 py-2",children:"Title"}),f.jsx("th",{className:"px-4 py-2",children:"Subtitle"}),f.jsx("th",{className:"px-4 py-2",children:"Link"}),f.jsx("th",{className:"px-4 py-2",children:"Order"}),f.jsx("th",{className:"px-4 py-2",children:"Active"}),f.jsx("th",{className:"px-4 py-2",children:"Actions"})]})}),f.jsx("tbody",{children:y.map(X=>f.jsxs("tr",{className:"border-b",children:[f.jsx("td",{className:"px-4 py-2",children:X.image_url&&f.jsx("img",{src:X.image_url,alt:"",className:"h-16 w-32 object-cover rounded"})}),f.jsx("td",{className:"px-4 py-2",children:X.title}),f.jsx("td",{className:"px-4 py-2",children:X.subtitle}),f.jsx("td",{className:"px-4 py-2",children:X.link}),f.jsx("td",{className:"px-4 py-2",children:X.order}),f.jsx("td",{className:"px-4 py-2",children:X.is_active?"Yes":"No"}),f.jsxs("td",{className:"px-4 py-2 space-x-2",children:[f.jsx("button",{className:"text-blue-600 hover:underline",onClick:()=>K(X),children:"Edit"}),f.jsx("button",{className:"text-red-600 hover:underline",onClick:()=>T(X.id),children:"Delete"})]})]},X.id))})]})})]}),f.jsx(Bk,{isOpen:S,onClose:()=>{v(!1),k(null),q({})},title:w?"Edit Slide":"Add Slide",children:f.jsxs("form",{onSubmit:Q,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Image"}),f.jsx("input",{type:"file",accept:"image/*",onChange:F,ref:ue}),E.image&&f.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Selected: ",E.image.name]}),!E.image&&E.image_url&&f.jsx("img",{src:E.image_url,alt:"",className:"h-16 w-32 object-cover rounded mt-2"}),z.image&&f.jsx("div",{className:"text-red-600 text-xs mt-1",children:z.image.join(", ")})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Title"}),f.jsx("input",{type:"text",name:"title",value:E.title||"",onChange:_,className:"w-full border-gray-300 rounded-md shadow-sm p-2 border"}),z.title&&f.jsx("div",{className:"text-red-600 text-xs mt-1",children:z.title.join(", ")})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Subtitle"}),f.jsx("input",{type:"text",name:"subtitle",value:E.subtitle||"",onChange:_,className:"w-full border-gray-300 rounded-md shadow-sm p-2 border"}),z.subtitle&&f.jsx("div",{className:"text-red-600 text-xs mt-1",children:z.subtitle.join(", ")})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Link"}),f.jsx("input",{type:"text",name:"link",value:E.link||"",onChange:_,className:"w-full border-gray-300 rounded-md shadow-sm p-2 border"}),z.link&&f.jsx("div",{className:"text-red-600 text-xs mt-1",children:z.link.join(", ")})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Order"}),f.jsx("input",{type:"number",name:"order",value:E.order||0,onChange:_,className:"w-full border-gray-300 rounded-md shadow-sm p-2 border"}),z.order&&f.jsx("div",{className:"text-red-600 text-xs mt-1",children:z.order.join(", ")})]}),f.jsxs("div",{children:[f.jsxs("label",{className:"inline-flex items-center",children:[f.jsx("input",{type:"checkbox",name:"is_active",checked:!!E.is_active,onChange:_,className:"mr-2"}),"Active"]}),z.is_active&&f.jsx("div",{className:"text-red-600 text-xs mt-1",children:z.is_active.join(", ")})]}),f.jsxs("div",{className:"flex space-x-2",children:[f.jsx("button",{type:"submit",className:"bg-black text-white px-4 py-2 rounded hover:bg-gray-800",children:w?"Update":"Create"}),f.jsx("button",{type:"button",className:"bg-gray-200 text-gray-700 px-4 py-2 rounded",onClick:()=>{v(!1),k(null),q({})},children:"Cancel"})]})]})})]})},ET=({tabs:n,activeTab:e,onTabChange:t,className:s="",darkMode:l=!1})=>f.jsxs("div",{className:`border-b ${l?"border-gray-700":"border-gray-200"} ${s}`,children:[f.jsx("nav",{className:"hidden md:flex overflow-x-auto",children:n.map(a=>f.jsxs("button",{className:`px-4 lg:px-6 py-3 font-medium text-sm transition-colors whitespace-nowrap ${e===a.id?l?"border-b-2 border-white text-white bg-gray-800":"border-b-2 border-black text-black bg-white":l?"text-gray-400 hover:text-white hover:bg-gray-700":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,onClick:()=>t(a.id),children:[a.label,a.count!==void 0&&f.jsx("span",{className:`ml-2 px-2 py-0.5 rounded-full text-xs ${e===a.id?l?"bg-white text-gray-800":"bg-black text-white":l?"bg-gray-700 text-gray-200":"bg-gray-200 text-gray-700"}`,children:a.count})]},a.id))}),f.jsx("nav",{className:"md:hidden flex overflow-x-auto hide-scrollbar",children:n.map(a=>f.jsxs("button",{className:`px-3 py-2 font-medium text-xs transition-colors whitespace-nowrap flex items-center ${e===a.id?l?"border-b-2 border-white text-white bg-gray-800":"border-b-2 border-black text-black bg-white":l?"text-gray-400 hover:text-white hover:bg-gray-700":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,onClick:()=>t(a.id),children:[f.jsx("span",{children:a.label}),a.count!==void 0&&f.jsx("span",{className:`ml-1 px-1.5 py-0.5 rounded-full text-xs ${e===a.id?l?"bg-white text-gray-800":"bg-black text-white":l?"bg-gray-700 text-gray-200":"bg-gray-200 text-gray-700"}`,children:a.count})]},a.id))})]}),Qv=({children:n,title:e,showBackButton:t=!1,backButtonPath:s="/admin",backButtonText:l="Back to Admin",tabs:a,activeTab:c,onTabChange:d,darkTabs:h=!1})=>{const{isAdmin:p}=st();return p?f.jsxs("div",{className:"container mx-auto px-4 py-8",children:[f.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[f.jsx("h1",{className:"text-2xl font-bold",children:e}),t&&f.jsx(me,{to:s,className:"bg-black text-white px-4 py-2 rounded whitespace-nowrap",children:l})]}),a&&c&&d&&f.jsx("div",{className:`${h?"bg-gray-900":"bg-white"} shadow rounded mb-6`,children:f.jsx(ET,{tabs:a,activeTab:c,onTabChange:d,darkMode:h})}),n]}):f.jsx("div",{className:"container mx-auto px-4 py-8",children:f.jsx("div",{className:"bg-red-100 text-red-700 p-4 rounded",children:f.jsx("p",{children:"You do not have permission to access this page."})})})},Cb=()=>{const{isAdmin:n,token:e}=st(),{tab:t}=ru(),s=fr(),[l,a]=C.useState("products"),[c,d]=C.useState(null),[h,p]=C.useState(null),g=[{id:"products",label:"Products"},{id:"orders",label:"Orders"},{id:"announcements",label:"Announcements"},{id:"settings",label:"Settings"}];C.useEffect(()=>{t&&g.some(w=>w.id===t)&&a(t)},[t]);const y=w=>{a(w),s(`/admin/${w}`),d(null),p(null)},b=w=>{d(w),p(null),setTimeout(()=>{d(null)},5e3)},S=w=>{p(w),d(null)},v=()=>l==="products"?null:l==="orders"?f.jsx(me,{to:"/admin-orders",className:"mt-4 sm:mt-0 inline-block bg-black text-white px-4 py-2 rounded",children:"Manage Orders"}):l==="announcements"?f.jsx(me,{to:"/admin/announcements/new",className:"mt-4 sm:mt-0 inline-block bg-black text-white px-4 py-2",children:"Create New Announcement"}):null;return n?f.jsxs(Qv,{title:"Admin Dashboard",tabs:g,activeTab:l,onTabChange:y,darkTabs:!0,children:[f.jsx("div",{className:"flex justify-end mb-4",children:f.jsx(v,{})}),c&&f.jsx("div",{className:"mb-4 p-4 bg-green-100 text-green-700 rounded",children:c}),h&&f.jsx("div",{className:"mb-4 p-4 bg-red-100 text-red-700 rounded",children:h}),f.jsxs("div",{className:"bg-white shadow rounded overflow-hidden p-4",children:[l==="products"&&f.jsx(Rk,{onSuccess:b,onError:S}),l==="orders"&&f.jsx(Dk,{}),l==="announcements"&&f.jsx(zk,{token:e||""}),l==="settings"&&f.jsx("div",{className:"space-y-8",children:f.jsx(CT,{onSuccess:b,onError:S})})]})]}):f.jsx("div",{className:"container mx-auto px-4 py-8",children:f.jsx("div",{className:"bg-red-100 text-red-700 p-4 rounded",children:f.jsx("p",{children:"You do not have permission to access this page."})})})},Xv=({productId:n,onSuccess:e,onError:t})=>{const{token:s}=st(),[l,a]=C.useState({sku:"",name:"",price:0,description:"",careInstructions:`* Machine wash cold
* Tumble dry low
* Do not bleach`,image:"",imageFile:null,additionalImages:["","",""],additionalImageFiles:[null,null,null],size:"small",isNewArrival:!1,isSale:!1,stock:0}),[c,d]=C.useState(!1),[h,p]=C.useState(!!n),[g,y]=C.useState([]),b=C.useRef(null),S=[C.useRef(null),C.useRef(null),C.useRef(null)],v=["small","medium","large","xlarge","xxlarge","xxxlarge"];C.useEffect(()=>{(async()=>{var D;if(!n){p(!1);return}try{p(!0);const L=(await _i.getProductById(n)).data,G=[L.image];L.images&&L.images.length>0&&G.push(...L.images),y(G);let ne=["","",""];if(L.images&&L.images.length>0)for(let ge=0;ge<Math.min(3,L.images.length);ge++)ne[ge]=L.images[ge];const se=L.category==="new_arrival"||L.isNewArrival||!1,ue=L.category==="sale"||L.isSale||!1,Z=L.sizes&&L.sizes.length>0?L.sizes[0]:"small",ye=L.sizeStock&&L.sizeStock.length>0&&((D=L.sizeStock.find(ge=>ge.size===Z))==null?void 0:D.stock)||0;a({sku:L.sku||"",name:L.name,price:L.price,description:L.description||"",careInstructions:L.careInstructions||`* Machine wash cold
* Tumble dry low
* Do not bleach`,image:L.image,imageFile:null,additionalImages:ne,additionalImageFiles:[null,null,null],size:Z,isNewArrival:se,isSale:ue,stock:ye})}catch(I){console.error("Error fetching product:",I),t("Failed to load product data. Please try again.")}finally{p(!1)}})()},[n,t]);const w=q=>{const{name:D,value:I,type:L}=q.target;if(L==="checkbox"){const G=q.target;a({...l,[D]:G.checked})}else a(D==="price"?{...l,[D]:parseFloat(I)||0}:{...l,[D]:I})},k=()=>{a({sku:"",name:"",price:0,description:"",careInstructions:`* Machine wash cold
* Tumble dry low
* Do not bleach`,image:"",imageFile:null,additionalImages:["","",""],additionalImageFiles:[null,null,null],size:"small",isNewArrival:!1,isSale:!1,stock:0}),b.current&&(b.current.value=""),S.forEach(q=>{q.current&&(q.current.value="")})},E=q=>{if(q.target.files&&q.target.files[0]){const D=q.target.files[0];if(D.size>2*1024*1024){t("Image size must not exceed 2MB (2048 kilobytes)"),q.target.value="";return}const I=URL.createObjectURL(D);a({...l,image:I,imageFile:D})}},O=(q,D)=>{if(D.target.files&&D.target.files[0]){const I=D.target.files[0];if(I.size>2*1024*1024){t("Image size must not exceed 2MB (2048 kilobytes)"),D.target.value="";return}const L=URL.createObjectURL(I),G=[...l.additionalImages];G[q]=L;const ne=[...l.additionalImageFiles];ne[q]=I,a({...l,additionalImages:G,additionalImageFiles:ne})}},z=async q=>{if(q.preventDefault(),!s){t("Authentication token is missing. Please log in again.");return}if(!l.name){t("Product name is required");return}if(l.price<=0){t("Product price must be greater than 0");return}if(!l.image&&!l.imageFile){t("Product image is required");return}d(!0);try{const D=new FormData;D.append("name",l.name),D.append("price",l.price.toString()),D.append("description",l.description),D.append("care_instructions",l.careInstructions),D.append("sku",l.sku||"");const I=l.isNewArrival?"new_arrival":l.isSale?"sale":"all";D.append("category",I),D.append("is_best_seller","false"),D.append("is_new_arrival",l.isNewArrival?"true":"false"),D.append("is_sale",l.isSale?"true":"false"),D.append("sizes",JSON.stringify([l.size]));const L=[{size:l.size,stock:l.stock}];D.append("size_stock",JSON.stringify(L)),l.imageFile?D.append("image",l.imageFile):n&&l.image&&D.append("keepMainImage","1");let G=0;if(l.additionalImageFiles.forEach(ne=>{ne&&(D.append(`additional_images[${G}]`,ne),G++)}),n){const ne=[];l.additionalImages.forEach((se,ue)=>{if(!l.additionalImageFiles[ue]&&se&&g.includes(se)){const Z=g.indexOf(se);Z>0&&ne.push(Z)}}),ne.length>0&&D.append("keep_additional_images",JSON.stringify(ne))}n?await _i.updateProduct(s,n,D):await _i.createProduct(s,D),e(n?"Product updated successfully":"Product created successfully"),n||k()}catch(D){console.error("Error saving product:",D),t(D instanceof Error?D.message:"An error occurred while saving the product")}finally{d(!1)}};return h?f.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[f.jsx("div",{className:"animate-pulse flex space-x-4",children:f.jsxs("div",{className:"flex-1 space-y-6 py-1",children:[f.jsx("div",{className:"h-6 bg-gray-200 rounded w-3/4"}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[f.jsx("div",{className:"h-10 bg-gray-200 rounded col-span-2"}),f.jsx("div",{className:"h-10 bg-gray-200 rounded col-span-1"})]}),f.jsx("div",{className:"h-10 bg-gray-200 rounded"})]})]})}),f.jsx("p",{className:"text-center mt-4",children:"Loading product data..."})]}):f.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[f.jsx("h2",{className:"text-xl font-semibold mb-6",children:n?"Edit Product":"Add New Product"}),f.jsxs("form",{onSubmit:z,className:"space-y-6",children:[f.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"sku",className:"block text-sm font-medium text-gray-700",children:"SKU*"}),f.jsx("input",{type:"text",id:"sku",name:"sku",value:l.sku,onChange:w,placeholder:"e.g., BLK-TS-001",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-black focus:border-black sm:text-sm",required:!0}),f.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Unique Stock Keeping Unit identifier (e.g., BLK-TS-001)"})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Product Name*"}),f.jsx("input",{type:"text",id:"name",name:"name",value:l.name,onChange:w,placeholder:"e.g., Classic Black Tee",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-black focus:border-black sm:text-sm",required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"price",className:"block text-sm font-medium text-gray-700",children:"Price (₱)*"}),f.jsx("input",{type:"number",id:"price",name:"price",value:l.price||"",onChange:w,min:"0",step:"0.01",placeholder:"e.g., 49.99",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-black focus:border-black sm:text-sm",required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"isNewArrival",className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Type"}),f.jsxs("div",{className:"flex items-center",children:[f.jsx("input",{type:"checkbox",id:"isNewArrival",name:"isNewArrival",checked:l.isNewArrival,onChange:w,className:"form-checkbox h-5 w-5 text-black"}),f.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"New Arrival"})]}),f.jsxs("div",{className:"flex items-center mt-2",children:[f.jsx("input",{type:"checkbox",id:"isSale",name:"isSale",checked:l.isSale,onChange:w,className:"form-checkbox h-5 w-5 text-black"}),f.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Sale"})]}),f.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Mark this product as a new arrival or sale item"})]}),f.jsxs("div",{className:"md:col-span-2",children:[f.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Product Description"}),f.jsx("textarea",{id:"description",name:"description",value:l.description,onChange:w,placeholder:"Describe your product in detail...",rows:3,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-black focus:border-black sm:text-sm"})]}),f.jsxs("div",{className:"md:col-span-2",children:[f.jsx("label",{htmlFor:"careInstructions",className:"block text-sm font-medium text-gray-700",children:"Before You Buy"}),f.jsx("textarea",{id:"careInstructions",name:"careInstructions",value:l.careInstructions,onChange:w,placeholder:"Washing instructions, handling advice, etc.",rows:3,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-black focus:border-black sm:text-sm font-mono"}),f.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Use asterisks (*) for bullet points"})]})]}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-medium mb-4",children:"Product Images"}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"imageFile",className:"block text-sm font-medium text-gray-700",children:"Main Product Image*"}),f.jsxs("div",{className:"mt-1 flex flex-col sm:flex-row items-start sm:items-center gap-3",children:[l.image&&f.jsx("div",{className:"mb-2 sm:mb-0 sm:mr-3",children:f.jsx("img",{src:l.image,alt:"Product preview",className:"h-32 w-32 object-cover rounded-md border border-gray-200"})}),f.jsx("input",{type:"file",id:"imageFile",ref:b,onChange:E,className:`block w-full text-sm text-gray-500
                    file:mr-4 file:py-2 file:px-4
                    file:rounded-md file:border-0
                    file:text-sm file:font-semibold
                    file:bg-black file:text-white
                    hover:file:bg-gray-700`,accept:"image/*"})]})]}),f.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[f.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Additional Images (Optional)"}),l.additionalImages.map((q,D)=>f.jsxs("div",{className:"mb-4",children:[f.jsxs("label",{htmlFor:`additionalImageFile${D}`,className:"block text-sm font-medium text-gray-700",children:["Additional Image ",D+1]}),f.jsxs("div",{className:"mt-1 flex flex-col sm:flex-row items-start sm:items-center gap-3",children:[q&&f.jsx("div",{className:"mb-2 sm:mb-0 sm:mr-3",children:f.jsx("img",{src:q,alt:`Additional image ${D+1} preview`,className:"h-32 w-32 object-cover rounded-md border border-gray-200"})}),f.jsx("input",{type:"file",id:`additionalImageFile${D}`,ref:S[D],onChange:I=>O(D,I),className:`block w-full text-sm text-gray-500
                        file:mr-4 file:py-2 file:px-4
                        file:rounded-md file:border-0
                        file:text-sm file:font-semibold
                        file:bg-black file:text-white
                        hover:file:bg-gray-700`,accept:"image/*"})]})]},D))]})]})]}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-medium mb-4",children:"Size and Stock"}),f.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[f.jsxs("div",{children:[f.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Size*"}),f.jsx("select",{id:"size",name:"size",value:l.size,onChange:q=>a({...l,size:q.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-black focus:border-black sm:text-sm",required:!0,children:v.map(q=>f.jsx("option",{value:q,children:q.toUpperCase()},q))})]}),f.jsxs("div",{children:[f.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Stock*"}),f.jsx("div",{className:"space-y-2",children:f.jsx("div",{className:"flex items-center",children:f.jsx("input",{type:"number",name:"stock",value:l.stock,onChange:q=>a({...l,stock:parseInt(q.target.value)||0}),min:"0",className:"block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-black focus:border-black sm:text-sm"})})})]})]})]}),f.jsx("div",{className:"mt-6",children:f.jsx("button",{type:"submit",disabled:c,className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-black hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-black",children:c?n?"Saving...":"Adding...":n?"Save Changes":"Add Product"})})]})]})},AT=()=>{const{isAdmin:n}=st(),{productId:e}=ru(),[t,s]=C.useState(null),[l,a]=C.useState(null),c=h=>{s(h),a(null),setTimeout(()=>{s(null)},5e3)},d=h=>{a(h),s(null)};return n?f.jsxs("div",{className:"container mx-auto px-4 py-8",children:[f.jsxs("div",{className:"flex justify-between items-center mb-6",children:[f.jsx("h1",{className:"text-2xl font-bold",children:"Edit Product"}),f.jsx(me,{to:"/admin/products",className:"bg-black text-white px-4 py-2 rounded whitespace-nowrap",children:"Back to Products"})]}),t&&f.jsx("div",{className:"mb-4 p-4 bg-green-100 text-green-700 rounded",children:t}),l&&f.jsx("div",{className:"mb-4 p-4 bg-red-100 text-red-700 rounded",children:l}),f.jsx("div",{className:"bg-white shadow rounded p-6",children:f.jsx(Xv,{productId:e,onSuccess:c,onError:d})})]}):f.jsx("div",{className:"container mx-auto px-4 py-8",children:f.jsx("div",{className:"bg-red-100 text-red-700 p-4 rounded",children:f.jsx("p",{children:"You do not have permission to access this page."})})})},TT=()=>{const{isAdmin:n}=st(),[e,t]=C.useState(null),[s,l]=C.useState(null),a=d=>{t(d),l(null),setTimeout(()=>{t(null)},5e3)},c=d=>{l(d),t(null)};return n?f.jsxs("div",{className:"container mx-auto px-4 py-8",children:[f.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[f.jsx("h1",{className:"text-2xl font-bold",children:"Add Product"}),f.jsx(me,{to:"/admin/products",className:"bg-black text-white px-4 py-2 rounded whitespace-nowrap w-full sm:w-auto text-center",children:"Back to Products"})]}),e&&f.jsx("div",{className:"mb-4 p-4 bg-green-100 text-green-700 rounded",children:e}),s&&f.jsx("div",{className:"mb-4 p-4 bg-red-100 text-red-700 rounded",children:s}),f.jsx("div",{className:"bg-white shadow rounded p-4 sm:p-6",children:f.jsx(Xv,{onSuccess:a,onError:c})})]}):f.jsx("div",{className:"container mx-auto px-4 py-8",children:f.jsx("div",{className:"bg-red-100 text-red-700 p-4 rounded",children:f.jsx("p",{children:"You do not have permission to access this page."})})})},Zv=({filteredOrders:n,selectedOrder:e,onSelectOrder:t,loading:s,error:l,tabs:a,activeTab:c,onTabChange:d,onClearFilters:h,searchQuery:p,onSearchQueryChange:g,mobileView:y=!1,adminMode:b=!1,updateStatus:S="",onUpdateStatus:v,adminNotes:w="",onAdminNotesChange:k,onStatusUpdate:E,isUpdating:O=!1,updateSuccess:z=!1,getStatusBadgeClass:q,formatDate:D})=>{var I;return f.jsxs(f.Fragment,{children:[l&&f.jsx("div",{className:"mb-4 p-4 bg-red-100 text-red-700 rounded",children:l}),b&&f.jsx("div",{className:"bg-white shadow rounded p-4 mb-6",children:f.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4",children:[f.jsxs("div",{className:"flex-1",children:[f.jsx("label",{htmlFor:"search",className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),f.jsx("input",{type:"text",id:"search",className:"w-full p-2 border border-gray-300 rounded",placeholder:"Search by name, username, or order #",value:p||"",onChange:L=>g&&g(L.target.value)})]}),f.jsx("div",{className:"mt-2 md:mt-6",children:f.jsx("button",{className:"bg-gray-100 text-gray-800 px-6 py-2 rounded inline-block hover:bg-gray-200 transition-colors",onClick:h,children:"Clear Filters"})})]})}),f.jsx("div",{className:"flex gap-2 mb-4",children:a.map(L=>f.jsxs("button",{className:`px-4 py-2 rounded ${c===L.id?"bg-black text-white":"bg-gray-100 text-gray-800"} font-medium`,onClick:()=>d(L.id),children:[L.label," ",typeof L.count=="number"&&f.jsxs("span",{children:["(",L.count,")"]})]},L.id))}),s?f.jsx("div",{className:"bg-white shadow rounded p-6 text-center",children:f.jsx("p",{className:"text-gray-600",children:"Loading orders..."})}):n.length===0?f.jsx("div",{className:"bg-white shadow rounded p-6",children:f.jsxs("div",{className:"text-center py-8",children:[f.jsx("h2",{className:"text-lg font-medium mb-2",children:"No orders found"}),f.jsx("p",{className:"text-gray-600 mb-4",children:"Try adjusting your filters to see more results."}),h&&f.jsx("button",{onClick:h,className:"bg-gray-100 text-gray-800 px-6 py-2 rounded inline-block hover:bg-gray-200 transition-colors",children:"Clear Filters"})]})}):f.jsxs("div",{className:"grid md:grid-cols-12 gap-6",children:[f.jsxs("div",{className:`${e&&y?"hidden":""} md:col-span-5 lg:col-span-4 bg-white shadow rounded overflow-auto`,style:{maxHeight:"calc(100vh - 200px)"},children:[f.jsxs("div",{className:"p-4 bg-gray-50 border-b border-gray-200 flex justify-between items-center",children:[f.jsxs("h2",{className:"font-semibold",children:["Orders (",n.length,")"]}),y&&e&&f.jsx("button",{className:"text-sm text-blue-600",onClick:()=>t(null),children:"← Back to List"})]}),f.jsx("div",{className:"divide-y divide-gray-200",children:n.map(L=>f.jsxs("div",{className:`p-4 cursor-pointer hover:bg-gray-50 ${(e==null?void 0:e.id)===L.id?"bg-gray-100":""}`,onClick:()=>t(L),children:[f.jsxs("div",{className:"flex justify-between",children:[f.jsxs("span",{className:"font-medium",children:["Order #",L.id]}),f.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${q(L.status)}`,children:L.status.charAt(0).toUpperCase()+L.status.slice(1)})]}),f.jsx("p",{className:"text-sm text-gray-600 mt-1",children:L.customer_name}),f.jsxs("p",{className:"text-sm text-gray-600",children:["@",L.instagram_username]}),f.jsxs("div",{className:"mt-2 flex justify-between items-center",children:[f.jsx("p",{className:"text-sm text-gray-500",children:new Date(L.created_at).toLocaleDateString()}),f.jsxs("p",{className:"font-medium",children:["₱",parseFloat(L.total_amount.toString()).toFixed(2)]})]})]},L.id))})]}),f.jsx("div",{className:`${!e&&y?"hidden":""} md:col-span-7 lg:col-span-8 bg-white shadow rounded overflow-auto`,style:{maxHeight:"calc(100vh - 200px)"},children:e?f.jsxs("div",{className:"p-6",children:[f.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start gap-4 mb-6",children:[f.jsxs("div",{children:[f.jsxs("h2",{className:"text-xl font-semibold",children:["Order #",e.id]}),f.jsxs("p",{className:"text-sm text-gray-500",children:["Placed on ",D(e.created_at)]})]}),y&&f.jsx("button",{className:"text-sm text-blue-600",onClick:()=>t(null),children:"← Back to List"})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-md font-medium mb-2",children:"Customer Information"}),f.jsxs("p",{className:"mb-1",children:[f.jsx("span",{className:"font-medium",children:"Name:"})," ",e.customer_name]}),f.jsxs("p",{className:"mb-1",children:[f.jsx("span",{className:"font-medium",children:"Email:"})," ",((I=e.user)==null?void 0:I.email)||"No email available"]}),f.jsxs("p",{className:"mb-1",children:[f.jsx("span",{className:"font-medium",children:"Instagram:"})," @",e.instagram_username]}),f.jsxs("p",{className:"mb-1",children:[f.jsx("span",{className:"font-medium",children:"Address:"})," ",e.address_line1,", ",e.barangay,", ",e.city,", ",e.province]}),f.jsxs("p",{className:"mb-1",children:[f.jsx("span",{className:"font-medium",children:"Mobile:"})," ",e.mobile_number]})]}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-md font-medium mb-2",children:"Order Information"}),f.jsxs("p",{className:"mb-1",children:[f.jsx("span",{className:"font-medium",children:"Status:"}),f.jsx("span",{className:`ml-2 px-2 py-1 text-xs rounded-full ${q(e.status)}`,children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})]}),f.jsxs("p",{className:"mb-1",children:[f.jsx("span",{className:"font-medium",children:"Payment Method:"})," ",e.payment_method]}),f.jsxs("p",{className:"mb-1",children:[f.jsx("span",{className:"font-medium",children:"Total Amount:"})," ₱",parseFloat(e.total_amount.toString()).toFixed(2)]}),f.jsxs("p",{className:"mb-1",children:[f.jsx("span",{className:"font-medium",children:"Shipping Fee:"})," ₱",parseFloat((e.shipping_fee||0).toString()).toFixed(2)]}),f.jsxs("p",{className:"mb-1",children:[f.jsx("span",{className:"font-medium",children:"Grand Total:"})," ₱",(parseFloat(e.total_amount.toString())+parseFloat((e.shipping_fee||0).toString())).toFixed(2)]}),e.approved_at&&f.jsxs("p",{className:"mb-1",children:[f.jsx("span",{className:"font-medium",children:"Approved:"})," ",D(e.approved_at)]})]})]}),e.payment_proof&&f.jsxs("div",{className:"mb-6",children:[f.jsx("h3",{className:"text-md font-medium mb-2",children:"Payment Proof"}),f.jsx("div",{className:"w-full max-w-sm border border-gray-200 rounded overflow-hidden",children:f.jsx("img",{src:`${Pi.BASE_URL.replace("/api","")}/storage/${e.payment_proof}`,alt:"Payment Proof",className:"w-full h-auto"})})]}),f.jsxs("div",{className:"mb-6",children:[f.jsx("h3",{className:"text-md font-medium mb-2",children:"Order Items"}),f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[f.jsx("thead",{className:"bg-gray-50",children:f.jsxs("tr",{children:[f.jsx("th",{scope:"col",className:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),f.jsx("th",{scope:"col",className:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Size"}),f.jsx("th",{scope:"col",className:"px-2 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantity"}),f.jsx("th",{scope:"col",className:"px-2 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"})]})}),f.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.items&&e.items.map(L=>f.jsxs("tr",{children:[f.jsx("td",{className:"px-2 py-2 text-xs sm:text-sm text-gray-900",children:L.product_name}),f.jsx("td",{className:"px-2 py-2 text-xs sm:text-sm text-gray-500",children:L.size.toUpperCase()}),f.jsx("td",{className:"px-2 py-2 text-xs sm:text-sm text-gray-500 text-right",children:L.quantity}),f.jsxs("td",{className:"px-2 py-2 text-xs sm:text-sm text-gray-500 text-right",children:["₱",parseFloat(L.price.toString()).toFixed(2)]})]},L.id))})]})})]}),b&&f.jsxs("div",{children:[f.jsx("h3",{className:"text-md font-medium mb-4",children:"Update Order Status"}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),f.jsxs("select",{id:"status",className:"w-full p-2 border border-gray-300 rounded",value:S,onChange:L=>v&&v(L.target.value),children:[f.jsx("option",{value:"pending",children:"Pending"}),f.jsx("option",{value:"approved",children:"Approved"}),f.jsx("option",{value:"shipped",children:"Shipped"}),f.jsx("option",{value:"delivered",children:"Delivered"}),f.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700 mb-2",children:"Admin Notes"}),f.jsx("textarea",{id:"notes",className:"w-full p-2 border border-gray-300 rounded",value:w,onChange:L=>k&&k(L.target.value),rows:3,placeholder:"Add notes visible to customer (optional)"})]})]}),f.jsx("button",{className:"bg-black text-white px-4 py-2 rounded disabled:bg-gray-400",onClick:E,disabled:O,children:O?"Updating...":"Update Order"}),z&&f.jsx("div",{className:"mt-4 p-3 bg-green-100 text-green-700 rounded",children:"Order status updated successfully."})]})]}):f.jsx("div",{className:"p-6 text-center text-gray-500",children:f.jsx("p",{children:"Select an order to view details"})})})]})]})},MT=()=>{const{token:n,isAdmin:e}=st(),[t,s]=C.useState([]),[l,a]=C.useState([]),[c,d]=C.useState(!0),[h,p]=C.useState(null),[g,y]=C.useState(null),[b,S]=C.useState(""),[v,w]=C.useState(""),[k,E]=C.useState(!1),[O,z]=C.useState(!1),[q,D]=C.useState(""),[I,L]=C.useState(""),[G,ne]=C.useState(!1),[se,ue]=C.useState("all"),ye=(()=>{const _={all:t.length,pending:0,approved:0,shipped:0,delivered:0,cancelled:0};return t.forEach(F=>{_[F.status]!==void 0&&_[F.status]++}),_})(),ge=[{id:"all",label:"All Orders",count:ye.all},{id:"pending",label:"Pending",count:ye.pending},{id:"approved",label:"Approved",count:ye.approved},{id:"shipped",label:"Shipped",count:ye.shipped},{id:"delivered",label:"Delivered",count:ye.delivered},{id:"cancelled",label:"Cancelled",count:ye.cancelled}],Te=_=>{ue(_),D(_==="all"?"":_)};C.useEffect(()=>{const _=()=>{ne(window.innerWidth<768)};return _(),window.addEventListener("resize",_),()=>{window.removeEventListener("resize",_)}},[]),C.useEffect(()=>{e&&P()},[e]),C.useEffect(()=>{te()},[t,q,I]);const P=async()=>{if(n){d(!0),p(null);try{const _=await Ii.getAllOrders(n);s(_.data.orders)}catch(_){console.error("Error fetching orders:",_),p(_ instanceof Error?_.message:"An error occurred while fetching orders")}finally{d(!1)}}},te=()=>{let _=[...t];if(q&&(_=_.filter(F=>F.status===q)),I){const F=I.toLowerCase();_=_.filter(Q=>Q.customer_name.toLowerCase().includes(F)||Q.instagram_username.toLowerCase().includes(F)||String(Q.id).includes(F)||Q.mobile_number.includes(F))}a(_)},re=async()=>{if(!(!n||!g)){E(!0),z(!1);try{if(await Ii.updateOrderStatus(n,g.id,b,v),g){const _={...g,status:b,admin_notes:v};y(_)}P(),z(!0)}catch(_){console.error("Error updating order status:",_),p(_ instanceof Error?_.message:"An error occurred while updating order status")}finally{E(!1)}}},K=_=>{switch(_){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-green-100 text-green-800";case"shipped":return"bg-blue-100 text-blue-800";case"delivered":return"bg-indigo-100 text-indigo-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},T=_=>{if(!_)return"N/A";const F=new Date(_);return F.toLocaleDateString()+" "+F.toLocaleTimeString()};return e?f.jsx(Qv,{title:"Order Management",showBackButton:!0,tabs:ge,activeTab:se,onTabChange:Te,darkTabs:!0,children:f.jsx(Zv,{filteredOrders:l,selectedOrder:g,onSelectOrder:_=>{y(_),S((_==null?void 0:_.status)||""),w((_==null?void 0:_.admin_notes)||""),z(!1)},loading:c,error:h,tabs:ge,activeTab:se,onTabChange:Te,onClearFilters:()=>{L(""),D(""),ue("all")},searchQuery:I,onSearchQueryChange:L,mobileView:G,adminMode:!0,updateStatus:b,onUpdateStatus:S,adminNotes:v,onAdminNotesChange:w,onStatusUpdate:re,isUpdating:k,updateSuccess:O,getStatusBadgeClass:K,formatDate:T})}):null},OT=()=>{const{token:n}=st(),[e,t]=C.useState([]),[s,l]=C.useState([]),[a,c]=C.useState(!0),[d,h]=C.useState(null),[p,g]=C.useState(null),[y,b]=C.useState("all"),[S,v]=C.useState(!1),[w,k]=C.useState(null),E=[{id:"all",label:"All Orders"},{id:"pending",label:"Pending"},{id:"approved",label:"Approved"},{id:"shipped",label:"Shipped"},{id:"delivered",label:"Delivered"},{id:"cancelled",label:"Cancelled"}];C.useEffect(()=>{k(localStorage.getItem("guest_id"))},[]),C.useEffect(()=>{I()},[n,w]),C.useEffect(()=>{e.length>0&&(L(),D())},[e,y]),C.useEffect(()=>{const ue=()=>{v(window.innerWidth<768)};return ue(),window.addEventListener("resize",ue),()=>{window.removeEventListener("resize",ue)}},[]);const O=()=>{const ue={all:e.length,pending:0,approved:0,shipped:0,delivered:0,cancelled:0};return e.forEach(Z=>{ue[Z.status]!==void 0&&ue[Z.status]++}),ue},[z,q]=C.useState(E),D=()=>{const ue=O(),Z=E.map(ye=>({...ye,count:ue[ye.id]}));q(Z)},I=async()=>{if(n){c(!0),h(null);try{const Z=(await Ii.getUserOrders(n)).data.orders;t(Z),l(Z),Z.length>0&&g(Z[0])}catch(ue){h(ue instanceof Error?ue.message:"An error occurred while fetching orders")}finally{c(!1)}}else if(w){c(!0),h(null);try{const Z=(await Ii.getGuestOrders(w)).data.orders;t(Z),l(Z),Z.length>0&&g(Z[0])}catch(ue){h(ue instanceof Error?ue.message:"An error occurred while fetching guest orders")}finally{c(!1)}}else t([]),l([]),c(!1)},L=()=>{l(y==="all"?e:e.filter(ue=>ue.status===y))},G=ue=>{b(ue)},ne=ue=>{switch(ue){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-green-100 text-green-800";case"shipped":return"bg-blue-100 text-blue-800";case"delivered":return"bg-indigo-100 text-indigo-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},se=ue=>{const Z=new Date(ue);return Z.toLocaleDateString()+" "+Z.toLocaleTimeString()};return!n&&!w?f.jsx("div",{className:"container mx-auto px-4 py-8",children:f.jsxs("div",{className:"text-center py-12",children:[f.jsx("h2",{className:"text-2xl font-bold mb-4",children:"No Orders Found"}),f.jsx("p",{className:"text-gray-600 mb-4",children:"You are not logged in and have not placed any guest orders yet."}),f.jsx(me,{to:"/products",className:"bg-black text-white px-6 py-2 rounded inline-block",children:"Browse Products"})]})}):f.jsxs("div",{className:"container mx-auto px-4 py-8",children:[f.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[f.jsx("h1",{className:"text-2xl font-bold",children:"My Orders"}),f.jsx(me,{to:"/",className:"bg-black text-white px-4 py-2 rounded whitespace-nowrap",children:"Continue Shopping"})]}),f.jsx(Zv,{filteredOrders:s,selectedOrder:p,onSelectOrder:g,loading:a,error:d,tabs:z,activeTab:y,onTabChange:G,getStatusBadgeClass:ne,formatDate:se,adminMode:!1,mobileView:S})]})},RT=()=>f.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[f.jsxs("div",{className:"text-center mb-16",children:[f.jsx("div",{className:"flex justify-center mb-6",children:f.jsx("img",{src:"/app-logo.jpg",alt:"ShopMara PH Logo",className:"h-28 w-auto",onError:n=>{const e=n.target;e.src="https://via.placeholder.com/180x180?text=ShopMara+PH"}})}),f.jsx("h1",{className:"text-4xl font-como font-light text-gray-900 mb-4",children:"About ShopMara PH"}),f.jsx("div",{className:"w-20 h-1 bg-[#ad688f] mx-auto"})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-12 items-center mb-16",children:[f.jsx("div",{children:f.jsx("img",{src:"/mara.png",alt:"ShopMara PH",className:"rounded-lg shadow-lg w-full h-auto object-cover",onError:n=>{const e=n.target;e.src="https://via.placeholder.com/600x800?text=ShopMara+PH"}})}),f.jsxs("div",{children:[f.jsx("h2",{className:"text-3xl font-como font-light text-gray-900 mb-6",children:"Story Time!"}),f.jsx("p",{className:"text-gray-700 mb-4 leading-relaxed font-como font-light",children:'ShopMaraPH started in 2022 on Instagram, born from a love of vintage fashion and sustainability. After a heartbreaking loss that year, we lent the name "Mara" to our business as a tribute to our angel baby.'}),f.jsx("p",{className:"text-gray-700 mb-4 leading-relaxed font-como font-light",children:"In 2023, we paused operations due to severe nausea. Little did we know, we were expecting our rainbow baby, who would one day carry the name Mara, just as it was meant to be."}),f.jsx("p",{className:"text-gray-700 mb-4 leading-relaxed font-como font-light",children:"Now a proud mom of two, I spend my days curating timeless pieces I love—elegant, confident styles that help modern women build a conscious wardrobe for work and beyond."}),f.jsx("p",{className:"text-gray-700 font-como font-light italic",children:"This journey is for her, and we can't wait to grow with you."})]})]}),f.jsx("div",{className:"bg-gray-50 rounded-lg p-8 shadow-sm",children:f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-[#ad688f]/20 text-[#ad688f] mb-4",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),f.jsx("h3",{className:"text-lg font-como font-normal mb-2",children:"Sustainable Fashion"}),f.jsx("p",{className:"text-gray-600 font-como font-light",children:"Curated pieces that are timeless and eco-conscious"})]}),f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-[#ad688f]/20 text-[#ad688f] mb-4",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})}),f.jsx("h3",{className:"text-lg font-como font-normal mb-2",children:"Made with Love"}),f.jsx("p",{className:"text-gray-600 font-como font-light",children:"Each piece is selected with purpose and meaning"})]}),f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-[#ad688f]/20 text-[#ad688f] mb-4",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v13m0-13V6a2 2 0 112 2h-2zm0 0V5.5A2.5 2.5 0 109.5 8H12zm-7 4h14M5 12a2 2 0 110-4h14a2 2 0 110 4M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"})})}),f.jsx("h3",{className:"text-lg font-como font-normal mb-2",children:"Elegant Designs"}),f.jsx("p",{className:"text-gray-600 font-como font-light",children:"Confident styles for the modern woman"})]})]})}),f.jsxs("div",{className:"mt-16 text-center",children:[f.jsx("h3",{className:"text-2xl font-como font-normal mb-6",children:"Connect With Us"}),f.jsxs("div",{className:"flex justify-center space-x-6",children:[f.jsxs("a",{href:"https://instagram.com/shopmaraph",target:"_blank",rel:"noopener noreferrer",className:"text-gray-500 hover:text-[#ad688f]",children:[f.jsx("span",{className:"sr-only",children:"Instagram"}),f.jsx("svg",{className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:f.jsx("path",{fillRule:"evenodd",d:"M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.218 2.427.465a4.902 4.902 0 011.772 1.153 4.902 4.902 0 011.153 1.772c.247.636.416 1.363.465 2.427.048 1.067.06 1.407.06 4.123v.08c0 2.643-.012 2.987-.06 4.043-.049 1.064-.218 1.791-.465 2.427a4.902 4.902 0 01-1.153 1.772 4.902 4.902 0 01-1.772 1.153c-.636.247-1.363.416-2.427.465-1.067.048-1.407.06-4.123.06h-.08c-2.643 0-2.987-.012-4.043-.06-1.064-.049-1.791-.218-2.427-.465a4.902 4.902 0 01-1.772-1.153 4.902 4.902 0 01-1.153-1.772c-.247-.636-.416-1.363-.465-2.427-.047-1.024-.06-1.379-.06-3.808v-.63c0-2.43.013-2.784.06-3.808.049-1.064.218-1.791.465-2.427a4.902 4.902 0 011.153-1.772A4.902 4.902 0 015.45 2.525c.636-.247 1.363-.416 2.427-.465C8.901 2.013 9.256 2 11.685 2h.63zm-.081 1.802h-.468c-2.456 0-2.784.011-3.807.058-.975.045-1.504.207-1.857.344-.467.182-.8.398-1.15.748-.35.35-.566.683-.748 1.15-.137.353-.3.882-.344 1.857-.047 1.023-.058 1.351-.058 3.807v.468c0 2.456.011 2.784.058 3.807.045.975.207 1.504.344 1.857.182.466.399.8.748 1.15.35.35.683.566 1.15.748.353.137.882.3 1.857.344 1.054.048 1.37.058 4.041.058h.08c2.597 0 2.917-.01 3.96-.058.976-.045 1.505-.207 1.858-.344.466-.182.8-.398 1.15-.748.35-.35.566-.683.748-1.15.137-.353.3-.882.344-1.857.048-1.055.058-1.37.058-4.041v-.08c0-2.597-.01-2.917-.058-3.96-.045-.976-.207-1.505-.344-1.858a3.097 3.097 0 00-.748-1.15 3.098 3.098 0 00-1.15-.748c-.353-.137-.882-.3-1.857-.344-1.023-.047-1.351-.058-3.807-.058zM12 6.865a5.135 5.135 0 110 10.27 5.135 5.135 0 010-10.27zm0 1.802a3.333 3.333 0 100 6.666 3.333 3.333 0 000-6.666zm5.338-3.205a1.2 1.2 0 110 2.4 1.2 1.2 0 010-2.4z",clipRule:"evenodd"})})]}),f.jsxs("a",{href:"https://facebook.com/shopmaraph",target:"_blank",rel:"noopener noreferrer",className:"text-gray-500 hover:text-[#ad688f]",children:[f.jsx("span",{className:"sr-only",children:"Facebook"}),f.jsx("svg",{className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:f.jsx("path",{fillRule:"evenodd",d:"M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z",clipRule:"evenodd"})})]}),f.jsxs("a",{href:"mailto:contact@shopmaraph.com",className:"text-gray-500 hover:text-[#ad688f]",children:[f.jsx("span",{className:"sr-only",children:"Email"}),f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})]})]})]})]}),DT=({token:n})=>{const e=fr(),{id:t}=ru(),s=!!t,[l,a]=C.useState({text:"",isActive:!0,displayOrder:0,buttonText:null,buttonLink:null,backgroundColor:"#000000",textColor:"#FFFFFF"}),[c,d]=C.useState(s),[h,p]=C.useState(!1),[g,y]=C.useState(null),[b,S]=C.useState(null);C.useEffect(()=>{(async()=>{if(s)try{d(!0);const O=await Ms.getAnnouncementById(n,Number(t));a({text:O.text,isActive:O.isActive,displayOrder:O.displayOrder,buttonText:O.buttonText,buttonLink:O.buttonLink,backgroundColor:O.backgroundColor,textColor:O.textColor})}catch(O){y("Failed to load announcement data. Please try again."),console.error("Error fetching announcement:",O)}finally{d(!1)}})()},[t,s,n]);const v=E=>{const{name:O,value:z,type:q}=E.target;if(O==="isActive"&&q==="checkbox"){const D=E.target;a(I=>({...I,[O]:D.checked}))}else a(D=>({...D,[O]:z}))},w=async E=>{E.preventDefault(),y(null),S(null),p(!0);try{s?(await Ms.updateAnnouncement(n,Number(t),l),S("Announcement updated successfully!")):(await Ms.createAnnouncement(n,l),S("Announcement created successfully!"),a({text:"",isActive:!0,displayOrder:0,buttonText:null,buttonLink:null,backgroundColor:"#000000",textColor:"#FFFFFF"}))}catch(O){y(`Failed to ${s?"update":"create"} announcement. Please try again.`),console.error(`Error ${s?"updating":"creating"} announcement:`,O)}finally{p(!1)}},k=()=>{e("/admin/announcements")};return c?f.jsx("div",{className:"p-4",children:"Loading announcement data..."}):f.jsxs("div",{className:"p-4 max-w-2xl mx-auto",children:[f.jsx("h2",{className:"text-2xl font-como mb-6",children:s?"Edit Announcement":"Create New Announcement"}),g&&f.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:g}),b&&f.jsx("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4",children:b}),f.jsxs("form",{onSubmit:w,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"text",className:"block mb-1 font-medium",children:"Announcement Text*"}),f.jsx("input",{type:"text",id:"text",name:"text",value:l.text,onChange:v,required:!0,className:"w-full p-2 border border-gray-300",placeholder:"Enter announcement text"})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"displayOrder",className:"block mb-1 font-medium",children:"Display Order"}),f.jsx("input",{type:"number",id:"displayOrder",name:"displayOrder",value:l.displayOrder,onChange:v,className:"w-full p-2 border border-gray-300",min:"0"}),f.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Lower numbers appear first. Announcements with the same order are sorted by creation date."})]}),f.jsxs("div",{className:"flex items-center",children:[f.jsx("input",{type:"checkbox",id:"isActive",name:"isActive",checked:l.isActive,onChange:v,className:"mr-2"}),f.jsx("label",{htmlFor:"isActive",className:"font-medium",children:"Active (visible to users)"})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"buttonText",className:"block mb-1 font-medium",children:"Button Text (Optional)"}),f.jsx("input",{type:"text",id:"buttonText",name:"buttonText",value:l.buttonText||"",onChange:v,className:"w-full p-2 border border-gray-300",placeholder:"e.g., Shop Now"})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"buttonLink",className:"block mb-1 font-medium",children:"Button Link (Optional)"}),f.jsx("input",{type:"text",id:"buttonLink",name:"buttonLink",value:l.buttonLink||"",onChange:v,className:"w-full p-2 border border-gray-300",placeholder:"e.g., /sale"})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"backgroundColor",className:"block mb-1 font-medium",children:"Background Color"}),f.jsxs("div",{className:"flex items-center",children:[f.jsx("input",{type:"color",id:"backgroundColor",name:"backgroundColor",value:l.backgroundColor,onChange:v,className:"h-10 w-10 mr-2"}),f.jsx("input",{type:"text",name:"backgroundColor",value:l.backgroundColor,onChange:v,className:"flex-1 p-2 border border-gray-300",placeholder:"#000000"})]})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"textColor",className:"block mb-1 font-medium",children:"Text Color"}),f.jsxs("div",{className:"flex items-center",children:[f.jsx("input",{type:"color",id:"textColor",name:"textColor",value:l.textColor,onChange:v,className:"h-10 w-10 mr-2"}),f.jsx("input",{type:"text",name:"textColor",value:l.textColor,onChange:v,className:"flex-1 p-2 border border-gray-300",placeholder:"#FFFFFF"})]})]})]}),f.jsxs("div",{className:"mt-6",children:[f.jsx("h3",{className:"font-medium mb-2",children:"Preview"}),f.jsxs("div",{className:"p-3 flex items-center justify-center",style:{backgroundColor:l.backgroundColor,color:l.textColor},children:[f.jsx("span",{children:l.text}),l.buttonText&&f.jsx("button",{className:"ml-4 px-3 py-1 border border-current",style:{color:l.textColor},children:l.buttonText})]})]}),f.jsxs("div",{className:"flex justify-end space-x-4 pt-4",children:[f.jsx("button",{type:"button",onClick:k,className:"px-4 py-2 border border-gray-300 hover:bg-gray-100",disabled:h,children:"Cancel"}),f.jsx("button",{type:"submit",className:"px-4 py-2 bg-black text-white hover:bg-gray-800",disabled:h,children:h?"Saving...":s?"Update Announcement":"Create Announcement"})]})]})]})},Eb=()=>{const{token:n}=st();return f.jsx("div",{className:"container mx-auto py-8",children:f.jsx(DT,{token:n||""})})},zT=({children:n})=>{const{isAuthenticated:e}=st(),t=typeof window<"u"&&localStorage.getItem("guest_id");return!e&&!t?f.jsx(bh,{to:"/login"}):n},Ns=({children:n})=>{const{isAuthenticated:e,isAdmin:t}=st();return e?t?n:f.jsx(bh,{to:"/"}):f.jsx(bh,{to:"/login"})};function LT(){return f.jsx(rk,{children:f.jsx(Nk,{children:f.jsx(lk,{children:f.jsx(wk,{children:f.jsx(ok,{children:f.jsxs("div",{className:"min-h-screen bg-white flex flex-col",children:[f.jsx(ck,{}),f.jsx("main",{className:"flex-grow",children:f.jsxs(Sw,{children:[f.jsx(ut,{path:"/",element:f.jsx(gk,{})}),f.jsx(ut,{path:"/new",element:f.jsx(yk,{})}),f.jsx(ut,{path:"/sale",element:f.jsx(bk,{})}),f.jsx(ut,{path:"/about",element:f.jsx(RT,{})}),f.jsx(ut,{path:"/login",element:f.jsx(vk,{})}),f.jsx(ut,{path:"/register",element:f.jsx(Sk,{})}),f.jsx(ut,{path:"/cart",element:f.jsx(Tk,{})}),f.jsx(ut,{path:"/my-orders",element:f.jsx(zT,{children:f.jsx(OT,{})})}),f.jsx(ut,{path:"/products",element:f.jsx(Mk,{})}),f.jsx(ut,{path:"/product/:productId",element:f.jsx(Ok,{})}),f.jsx(ut,{path:"/admin",element:f.jsx(Ns,{children:f.jsx(Cb,{})})}),f.jsx(ut,{path:"/admin/:tab",element:f.jsx(Ns,{children:f.jsx(Cb,{})})}),f.jsx(ut,{path:"/add-product",element:f.jsx(Ns,{children:f.jsx(TT,{})})}),f.jsx(ut,{path:"/edit-product/:productId",element:f.jsx(Ns,{children:f.jsx(AT,{})})}),f.jsx(ut,{path:"/admin-orders",element:f.jsx(Ns,{children:f.jsx(MT,{})})}),f.jsx(ut,{path:"/admin/announcements/new",element:f.jsx(Ns,{children:f.jsx(Eb,{})})}),f.jsx(ut,{path:"/admin/announcements/edit/:id",element:f.jsx(Ns,{children:f.jsx(Eb,{})})})]})}),f.jsx(uk,{})]})})})})})})}MN.createRoot(document.getElementById("root")).render(f.jsx(Et.StrictMode,{children:f.jsx($w,{children:f.jsx(LT,{})})}));
