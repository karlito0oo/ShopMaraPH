(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(i){if(i.ep)return;i.ep=!0;const l=t(i);fetch(i.href,l)}})();function Xp(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var sh={exports:{}},gl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lx;function W2(){if(Lx)return gl;Lx=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,i,l){var c=null;if(l!==void 0&&(c=""+l),i.key!==void 0&&(c=""+i.key),"key"in i){l={};for(var d in i)d!=="key"&&(l[d]=i[d])}else l=i;return i=l.ref,{$$typeof:n,type:r,key:c,ref:i!==void 0?i:null,props:l}}return gl.Fragment=e,gl.jsx=t,gl.jsxs=t,gl}var _x;function eC(){return _x||(_x=1,sh.exports=W2()),sh.exports}var p=eC(),ih={exports:{}},Ne={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zx;function tC(){if(zx)return Ne;zx=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.iterator;function b(R){return R===null||typeof R!="object"?null:(R=y&&R[y]||R["@@iterator"],typeof R=="function"?R:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,N={};function C(R,U,ne){this.props=R,this.context=U,this.refs=N,this.updater=ne||v}C.prototype.isReactComponent={},C.prototype.setState=function(R,U){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,U,"setState")},C.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function j(){}j.prototype=C.prototype;function O(R,U,ne){this.props=R,this.context=U,this.refs=N,this.updater=ne||v}var M=O.prototype=new j;M.constructor=O,w(M,C.prototype),M.isPureReactComponent=!0;var A=Array.isArray,L={H:null,A:null,T:null,S:null,V:null},B=Object.prototype.hasOwnProperty;function F(R,U,ne,K,Z,ce){return ne=ce.ref,{$$typeof:n,type:R,key:U,ref:ne!==void 0?ne:null,props:ce}}function _(R,U){return F(R.type,U,void 0,void 0,void 0,R.props)}function re(R){return typeof R=="object"&&R!==null&&R.$$typeof===n}function le(R){var U={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(ne){return U[ne]})}var $=/\/+/g;function se(R,U){return typeof R=="object"&&R!==null&&R.key!=null?le(""+R.key):U.toString(36)}function pe(){}function Ge(R){switch(R.status){case"fulfilled":return R.value;case"rejected":throw R.reason;default:switch(typeof R.status=="string"?R.then(pe,pe):(R.status="pending",R.then(function(U){R.status==="pending"&&(R.status="fulfilled",R.value=U)},function(U){R.status==="pending"&&(R.status="rejected",R.reason=U)})),R.status){case"fulfilled":return R.value;case"rejected":throw R.reason}}throw R}function Oe(R,U,ne,K,Z){var ce=typeof R;(ce==="undefined"||ce==="boolean")&&(R=null);var ie=!1;if(R===null)ie=!0;else switch(ce){case"bigint":case"string":case"number":ie=!0;break;case"object":switch(R.$$typeof){case n:case e:ie=!0;break;case g:return ie=R._init,Oe(ie(R._payload),U,ne,K,Z)}}if(ie)return Z=Z(R),ie=K===""?"."+se(R,0):K,A(Z)?(ne="",ie!=null&&(ne=ie.replace($,"$&/")+"/"),Oe(Z,U,ne,"",function(Jt){return Jt})):Z!=null&&(re(Z)&&(Z=_(Z,ne+(Z.key==null||R&&R.key===Z.key?"":(""+Z.key).replace($,"$&/")+"/")+ie)),U.push(Z)),1;ie=0;var Le=K===""?".":K+":";if(A(R))for(var qe=0;qe<R.length;qe++)K=R[qe],ce=Le+se(K,qe),ie+=Oe(K,U,ne,ce,Z);else if(qe=b(R),typeof qe=="function")for(R=qe.call(R),qe=0;!(K=R.next()).done;)K=K.value,ce=Le+se(K,qe++),ie+=Oe(K,U,ne,ce,Z);else if(ce==="object"){if(typeof R.then=="function")return Oe(Ge(R),U,ne,K,Z);throw U=String(R),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.")}return ie}function V(R,U,ne){if(R==null)return R;var K=[],Z=0;return Oe(R,K,"","",function(ce){return U.call(ne,ce,Z++)}),K}function te(R){if(R._status===-1){var U=R._result;U=U(),U.then(function(ne){(R._status===0||R._status===-1)&&(R._status=1,R._result=ne)},function(ne){(R._status===0||R._status===-1)&&(R._status=2,R._result=ne)}),R._status===-1&&(R._status=0,R._result=U)}if(R._status===1)return R._result.default;throw R._result}var de=typeof reportError=="function"?reportError:function(R){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var U=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof R=="object"&&R!==null&&typeof R.message=="string"?String(R.message):String(R),error:R});if(!window.dispatchEvent(U))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",R);return}console.error(R)};function Se(){}return Ne.Children={map:V,forEach:function(R,U,ne){V(R,function(){U.apply(this,arguments)},ne)},count:function(R){var U=0;return V(R,function(){U++}),U},toArray:function(R){return V(R,function(U){return U})||[]},only:function(R){if(!re(R))throw Error("React.Children.only expected to receive a single React element child.");return R}},Ne.Component=C,Ne.Fragment=t,Ne.Profiler=i,Ne.PureComponent=O,Ne.StrictMode=r,Ne.Suspense=f,Ne.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=L,Ne.__COMPILER_RUNTIME={__proto__:null,c:function(R){return L.H.useMemoCache(R)}},Ne.cache=function(R){return function(){return R.apply(null,arguments)}},Ne.cloneElement=function(R,U,ne){if(R==null)throw Error("The argument must be a React element, but you passed "+R+".");var K=w({},R.props),Z=R.key,ce=void 0;if(U!=null)for(ie in U.ref!==void 0&&(ce=void 0),U.key!==void 0&&(Z=""+U.key),U)!B.call(U,ie)||ie==="key"||ie==="__self"||ie==="__source"||ie==="ref"&&U.ref===void 0||(K[ie]=U[ie]);var ie=arguments.length-2;if(ie===1)K.children=ne;else if(1<ie){for(var Le=Array(ie),qe=0;qe<ie;qe++)Le[qe]=arguments[qe+2];K.children=Le}return F(R.type,Z,void 0,void 0,ce,K)},Ne.createContext=function(R){return R={$$typeof:c,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null},R.Provider=R,R.Consumer={$$typeof:l,_context:R},R},Ne.createElement=function(R,U,ne){var K,Z={},ce=null;if(U!=null)for(K in U.key!==void 0&&(ce=""+U.key),U)B.call(U,K)&&K!=="key"&&K!=="__self"&&K!=="__source"&&(Z[K]=U[K]);var ie=arguments.length-2;if(ie===1)Z.children=ne;else if(1<ie){for(var Le=Array(ie),qe=0;qe<ie;qe++)Le[qe]=arguments[qe+2];Z.children=Le}if(R&&R.defaultProps)for(K in ie=R.defaultProps,ie)Z[K]===void 0&&(Z[K]=ie[K]);return F(R,ce,void 0,void 0,null,Z)},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(R){return{$$typeof:d,render:R}},Ne.isValidElement=re,Ne.lazy=function(R){return{$$typeof:g,_payload:{_status:-1,_result:R},_init:te}},Ne.memo=function(R,U){return{$$typeof:h,type:R,compare:U===void 0?null:U}},Ne.startTransition=function(R){var U=L.T,ne={};L.T=ne;try{var K=R(),Z=L.S;Z!==null&&Z(ne,K),typeof K=="object"&&K!==null&&typeof K.then=="function"&&K.then(Se,de)}catch(ce){de(ce)}finally{L.T=U}},Ne.unstable_useCacheRefresh=function(){return L.H.useCacheRefresh()},Ne.use=function(R){return L.H.use(R)},Ne.useActionState=function(R,U,ne){return L.H.useActionState(R,U,ne)},Ne.useCallback=function(R,U){return L.H.useCallback(R,U)},Ne.useContext=function(R){return L.H.useContext(R)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(R,U){return L.H.useDeferredValue(R,U)},Ne.useEffect=function(R,U,ne){var K=L.H;if(typeof ne=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return K.useEffect(R,U)},Ne.useId=function(){return L.H.useId()},Ne.useImperativeHandle=function(R,U,ne){return L.H.useImperativeHandle(R,U,ne)},Ne.useInsertionEffect=function(R,U){return L.H.useInsertionEffect(R,U)},Ne.useLayoutEffect=function(R,U){return L.H.useLayoutEffect(R,U)},Ne.useMemo=function(R,U){return L.H.useMemo(R,U)},Ne.useOptimistic=function(R,U){return L.H.useOptimistic(R,U)},Ne.useReducer=function(R,U,ne){return L.H.useReducer(R,U,ne)},Ne.useRef=function(R){return L.H.useRef(R)},Ne.useState=function(R){return L.H.useState(R)},Ne.useSyncExternalStore=function(R,U,ne){return L.H.useSyncExternalStore(R,U,ne)},Ne.useTransition=function(){return L.H.useTransition()},Ne.version="19.1.0",Ne}var Bx;function Jp(){return Bx||(Bx=1,ih.exports=tC()),ih.exports}var E=Jp();const we=Xp(E);var ah={exports:{}},yl={},lh={exports:{}},oh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Px;function nC(){return Px||(Px=1,function(n){function e(V,te){var de=V.length;V.push(te);e:for(;0<de;){var Se=de-1>>>1,R=V[Se];if(0<i(R,te))V[Se]=te,V[de]=R,de=Se;else break e}}function t(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var te=V[0],de=V.pop();if(de!==te){V[0]=de;e:for(var Se=0,R=V.length,U=R>>>1;Se<U;){var ne=2*(Se+1)-1,K=V[ne],Z=ne+1,ce=V[Z];if(0>i(K,de))Z<R&&0>i(ce,K)?(V[Se]=ce,V[Z]=de,Se=Z):(V[Se]=K,V[ne]=de,Se=ne);else if(Z<R&&0>i(ce,de))V[Se]=ce,V[Z]=de,Se=Z;else break e}}return te}function i(V,te){var de=V.sortIndex-te.sortIndex;return de!==0?de:V.id-te.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var f=[],h=[],g=1,y=null,b=3,v=!1,w=!1,N=!1,C=!1,j=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;function A(V){for(var te=t(h);te!==null;){if(te.callback===null)r(h);else if(te.startTime<=V)r(h),te.sortIndex=te.expirationTime,e(f,te);else break;te=t(h)}}function L(V){if(N=!1,A(V),!w)if(t(f)!==null)w=!0,B||(B=!0,se());else{var te=t(h);te!==null&&Oe(L,te.startTime-V)}}var B=!1,F=-1,_=5,re=-1;function le(){return C?!0:!(n.unstable_now()-re<_)}function $(){if(C=!1,B){var V=n.unstable_now();re=V;var te=!0;try{e:{w=!1,N&&(N=!1,O(F),F=-1),v=!0;var de=b;try{t:{for(A(V),y=t(f);y!==null&&!(y.expirationTime>V&&le());){var Se=y.callback;if(typeof Se=="function"){y.callback=null,b=y.priorityLevel;var R=Se(y.expirationTime<=V);if(V=n.unstable_now(),typeof R=="function"){y.callback=R,A(V),te=!0;break t}y===t(f)&&r(f),A(V)}else r(f);y=t(f)}if(y!==null)te=!0;else{var U=t(h);U!==null&&Oe(L,U.startTime-V),te=!1}}break e}finally{y=null,b=de,v=!1}te=void 0}}finally{te?se():B=!1}}}var se;if(typeof M=="function")se=function(){M($)};else if(typeof MessageChannel<"u"){var pe=new MessageChannel,Ge=pe.port2;pe.port1.onmessage=$,se=function(){Ge.postMessage(null)}}else se=function(){j($,0)};function Oe(V,te){F=j(function(){V(n.unstable_now())},te)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(V){V.callback=null},n.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<V?Math.floor(1e3/V):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_next=function(V){switch(b){case 1:case 2:case 3:var te=3;break;default:te=b}var de=b;b=te;try{return V()}finally{b=de}},n.unstable_requestPaint=function(){C=!0},n.unstable_runWithPriority=function(V,te){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var de=b;b=V;try{return te()}finally{b=de}},n.unstable_scheduleCallback=function(V,te,de){var Se=n.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?Se+de:Se):de=Se,V){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=de+R,V={id:g++,callback:te,priorityLevel:V,startTime:de,expirationTime:R,sortIndex:-1},de>Se?(V.sortIndex=de,e(h,V),t(f)===null&&V===t(h)&&(N?(O(F),F=-1):N=!0,Oe(L,de-Se))):(V.sortIndex=R,e(f,V),w||v||(w=!0,B||(B=!0,se()))),V},n.unstable_shouldYield=le,n.unstable_wrapCallback=function(V){var te=b;return function(){var de=b;b=te;try{return V.apply(this,arguments)}finally{b=de}}}}(oh)),oh}var Hx;function rC(){return Hx||(Hx=1,lh.exports=nC()),lh.exports}var ch={exports:{}},Ht={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ux;function sC(){if(Ux)return Ht;Ux=1;var n=Jp();function e(f){var h="https://react.dev/errors/"+f;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)h+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+f+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function l(f,h,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:y==null?null:""+y,children:f,containerInfo:h,implementation:g}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(f,h){if(f==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Ht.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Ht.createPortal=function(f,h){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return l(f,h,null,g)},Ht.flushSync=function(f){var h=c.T,g=r.p;try{if(c.T=null,r.p=2,f)return f()}finally{c.T=h,r.p=g,r.d.f()}},Ht.preconnect=function(f,h){typeof f=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(f,h))},Ht.prefetchDNS=function(f){typeof f=="string"&&r.d.D(f)},Ht.preinit=function(f,h){if(typeof f=="string"&&h&&typeof h.as=="string"){var g=h.as,y=d(g,h.crossOrigin),b=typeof h.integrity=="string"?h.integrity:void 0,v=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;g==="style"?r.d.S(f,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:y,integrity:b,fetchPriority:v}):g==="script"&&r.d.X(f,{crossOrigin:y,integrity:b,fetchPriority:v,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Ht.preinitModule=function(f,h){if(typeof f=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var g=d(h.as,h.crossOrigin);r.d.M(f,{crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(f)},Ht.preload=function(f,h){if(typeof f=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var g=h.as,y=d(g,h.crossOrigin);r.d.L(f,g,{crossOrigin:y,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Ht.preloadModule=function(f,h){if(typeof f=="string")if(h){var g=d(h.as,h.crossOrigin);r.d.m(f,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(f)},Ht.requestFormReset=function(f){r.d.r(f)},Ht.unstable_batchedUpdates=function(f,h){return f(h)},Ht.useFormState=function(f,h,g){return c.H.useFormState(f,h,g)},Ht.useFormStatus=function(){return c.H.useHostTransitionStatus()},Ht.version="19.1.0",Ht}var Ix;function n1(){if(Ix)return ch.exports;Ix=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),ch.exports=sC(),ch.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qx;function iC(){if(qx)return yl;qx=1;var n=rC(),e=Jp(),t=n1();function r(s){var a="https://react.dev/errors/"+s;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)a+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function l(s){var a=s,o=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(o=a.return),s=a.return;while(s)}return a.tag===3?o:null}function c(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function d(s){if(l(s)!==s)throw Error(r(188))}function f(s){var a=s.alternate;if(!a){if(a=l(s),a===null)throw Error(r(188));return a!==s?null:s}for(var o=s,u=a;;){var m=o.return;if(m===null)break;var x=m.alternate;if(x===null){if(u=m.return,u!==null){o=u;continue}break}if(m.child===x.child){for(x=m.child;x;){if(x===o)return d(m),s;if(x===u)return d(m),a;x=x.sibling}throw Error(r(188))}if(o.return!==u.return)o=m,u=x;else{for(var S=!1,k=m.child;k;){if(k===o){S=!0,o=m,u=x;break}if(k===u){S=!0,u=m,o=x;break}k=k.sibling}if(!S){for(k=x.child;k;){if(k===o){S=!0,o=x,u=m;break}if(k===u){S=!0,u=x,o=m;break}k=k.sibling}if(!S)throw Error(r(189))}}if(o.alternate!==u)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?s:a}function h(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s;for(s=s.child;s!==null;){if(a=h(s),a!==null)return a;s=s.sibling}return null}var g=Object.assign,y=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),j=Symbol.for("react.provider"),O=Symbol.for("react.consumer"),M=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),re=Symbol.for("react.activity"),le=Symbol.for("react.memo_cache_sentinel"),$=Symbol.iterator;function se(s){return s===null||typeof s!="object"?null:(s=$&&s[$]||s["@@iterator"],typeof s=="function"?s:null)}var pe=Symbol.for("react.client.reference");function Ge(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===pe?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case w:return"Fragment";case C:return"Profiler";case N:return"StrictMode";case L:return"Suspense";case B:return"SuspenseList";case re:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case v:return"Portal";case M:return(s.displayName||"Context")+".Provider";case O:return(s._context.displayName||"Context")+".Consumer";case A:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case F:return a=s.displayName||null,a!==null?a:Ge(s.type)||"Memo";case _:a=s._payload,s=s._init;try{return Ge(s(a))}catch{}}return null}var Oe=Array.isArray,V=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de={pending:!1,data:null,method:null,action:null},Se=[],R=-1;function U(s){return{current:s}}function ne(s){0>R||(s.current=Se[R],Se[R]=null,R--)}function K(s,a){R++,Se[R]=s.current,s.current=a}var Z=U(null),ce=U(null),ie=U(null),Le=U(null);function qe(s,a){switch(K(ie,a),K(ce,s),K(Z,null),a.nodeType){case 9:case 11:s=(s=a.documentElement)&&(s=s.namespaceURI)?ox(s):0;break;default:if(s=a.tagName,a=a.namespaceURI)a=ox(a),s=cx(a,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}ne(Z),K(Z,s)}function Jt(){ne(Z),ne(ce),ne(ie)}function Wn(s){s.memoizedState!==null&&K(Le,s);var a=Z.current,o=cx(a,s.type);a!==o&&(K(ce,s),K(Z,o))}function gn(s){ce.current===s&&(ne(Z),ne(ce)),Le.current===s&&(ne(Le),dl._currentValue=de)}var ws=Object.prototype.hasOwnProperty,Ss=n.unstable_scheduleCallback,Ns=n.unstable_cancelCallback,Cs=n.unstable_shouldYield,Y=n.unstable_requestPaint,Q=n.unstable_now,he=n.unstable_getCurrentPriorityLevel,Ee=n.unstable_ImmediatePriority,He=n.unstable_UserBlockingPriority,gt=n.unstable_NormalPriority,Qe=n.unstable_LowPriority,zt=n.unstable_IdlePriority,nt=n.log,Be=n.unstable_setDisableYieldValue,Ar=null,At=null;function Rn(s){if(typeof nt=="function"&&Be(s),At&&typeof At.setStrictMode=="function")try{At.setStrictMode(Ar,s)}catch{}}var yt=Math.clz32?Math.clz32:HS,$u=Math.log,PS=Math.LN2;function HS(s){return s>>>=0,s===0?32:31-($u(s)/PS|0)|0}var io=256,ao=4194304;function Es(s){var a=s&42;if(a!==0)return a;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function lo(s,a,o){var u=s.pendingLanes;if(u===0)return 0;var m=0,x=s.suspendedLanes,S=s.pingedLanes;s=s.warmLanes;var k=u&134217727;return k!==0?(u=k&~x,u!==0?m=Es(u):(S&=k,S!==0?m=Es(S):o||(o=k&~s,o!==0&&(m=Es(o))))):(k=u&~x,k!==0?m=Es(k):S!==0?m=Es(S):o||(o=u&~s,o!==0&&(m=Es(o)))),m===0?0:a!==0&&a!==m&&(a&x)===0&&(x=m&-m,o=a&-a,x>=o||x===32&&(o&4194048)!==0)?a:m}function va(s,a){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&a)===0}function US(s,a){switch(s){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $m(){var s=io;return io<<=1,(io&4194048)===0&&(io=256),s}function Gm(){var s=ao;return ao<<=1,(ao&62914560)===0&&(ao=4194304),s}function Gu(s){for(var a=[],o=0;31>o;o++)a.push(s);return a}function wa(s,a){s.pendingLanes|=a,a!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function IS(s,a,o,u,m,x){var S=s.pendingLanes;s.pendingLanes=o,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=o,s.entangledLanes&=o,s.errorRecoveryDisabledLanes&=o,s.shellSuspendCounter=0;var k=s.entanglements,T=s.expirationTimes,H=s.hiddenUpdates;for(o=S&~o;0<o;){var G=31-yt(o),J=1<<G;k[G]=0,T[G]=-1;var I=H[G];if(I!==null)for(H[G]=null,G=0;G<I.length;G++){var q=I[G];q!==null&&(q.lane&=-536870913)}o&=~J}u!==0&&Ym(s,u,0),x!==0&&m===0&&s.tag!==0&&(s.suspendedLanes|=x&~(S&~a))}function Ym(s,a,o){s.pendingLanes|=a,s.suspendedLanes&=~a;var u=31-yt(a);s.entangledLanes|=a,s.entanglements[u]=s.entanglements[u]|1073741824|o&4194090}function Km(s,a){var o=s.entangledLanes|=a;for(s=s.entanglements;o;){var u=31-yt(o),m=1<<u;m&a|s[u]&a&&(s[u]|=a),o&=~m}}function Yu(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Ku(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Xm(){var s=te.p;return s!==0?s:(s=window.event,s===void 0?32:Ax(s.type))}function qS(s,a){var o=te.p;try{return te.p=s,a()}finally{te.p=o}}var Tr=Math.random().toString(36).slice(2),Bt="__reactFiber$"+Tr,Qt="__reactProps$"+Tr,ui="__reactContainer$"+Tr,Xu="__reactEvents$"+Tr,VS="__reactListeners$"+Tr,FS="__reactHandles$"+Tr,Jm="__reactResources$"+Tr,Sa="__reactMarker$"+Tr;function Ju(s){delete s[Bt],delete s[Qt],delete s[Xu],delete s[VS],delete s[FS]}function di(s){var a=s[Bt];if(a)return a;for(var o=s.parentNode;o;){if(a=o[ui]||o[Bt]){if(o=a.alternate,a.child!==null||o!==null&&o.child!==null)for(s=hx(s);s!==null;){if(o=s[Bt])return o;s=hx(s)}return a}s=o,o=s.parentNode}return null}function fi(s){if(s=s[Bt]||s[ui]){var a=s.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return s}return null}function Na(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s.stateNode;throw Error(r(33))}function hi(s){var a=s[Jm];return a||(a=s[Jm]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function xt(s){s[Sa]=!0}var Qm=new Set,Zm={};function ks(s,a){pi(s,a),pi(s+"Capture",a)}function pi(s,a){for(Zm[s]=a,s=0;s<a.length;s++)Qm.add(a[s])}var $S=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Wm={},eg={};function GS(s){return ws.call(eg,s)?!0:ws.call(Wm,s)?!1:$S.test(s)?eg[s]=!0:(Wm[s]=!0,!1)}function oo(s,a,o){if(GS(a))if(o===null)s.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":s.removeAttribute(a);return;case"boolean":var u=a.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){s.removeAttribute(a);return}}s.setAttribute(a,""+o)}}function co(s,a,o){if(o===null)s.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(a);return}s.setAttribute(a,""+o)}}function er(s,a,o,u){if(u===null)s.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(o);return}s.setAttributeNS(a,o,""+u)}}var Qu,tg;function mi(s){if(Qu===void 0)try{throw Error()}catch(o){var a=o.stack.trim().match(/\n( *(at )?)/);Qu=a&&a[1]||"",tg=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Qu+s+tg}var Zu=!1;function Wu(s,a){if(!s||Zu)return"";Zu=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(a){var J=function(){throw Error()};if(Object.defineProperty(J.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(J,[])}catch(q){var I=q}Reflect.construct(s,[],J)}else{try{J.call()}catch(q){I=q}s.call(J.prototype)}}else{try{throw Error()}catch(q){I=q}(J=s())&&typeof J.catch=="function"&&J.catch(function(){})}}catch(q){if(q&&I&&typeof q.stack=="string")return[q.stack,I.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var x=u.DetermineComponentFrameRoot(),S=x[0],k=x[1];if(S&&k){var T=S.split(`
`),H=k.split(`
`);for(m=u=0;u<T.length&&!T[u].includes("DetermineComponentFrameRoot");)u++;for(;m<H.length&&!H[m].includes("DetermineComponentFrameRoot");)m++;if(u===T.length||m===H.length)for(u=T.length-1,m=H.length-1;1<=u&&0<=m&&T[u]!==H[m];)m--;for(;1<=u&&0<=m;u--,m--)if(T[u]!==H[m]){if(u!==1||m!==1)do if(u--,m--,0>m||T[u]!==H[m]){var G=`
`+T[u].replace(" at new "," at ");return s.displayName&&G.includes("<anonymous>")&&(G=G.replace("<anonymous>",s.displayName)),G}while(1<=u&&0<=m);break}}}finally{Zu=!1,Error.prepareStackTrace=o}return(o=s?s.displayName||s.name:"")?mi(o):""}function YS(s){switch(s.tag){case 26:case 27:case 5:return mi(s.type);case 16:return mi("Lazy");case 13:return mi("Suspense");case 19:return mi("SuspenseList");case 0:case 15:return Wu(s.type,!1);case 11:return Wu(s.type.render,!1);case 1:return Wu(s.type,!0);case 31:return mi("Activity");default:return""}}function ng(s){try{var a="";do a+=YS(s),s=s.return;while(s);return a}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function yn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function rg(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function KS(s){var a=rg(s)?"checked":"value",o=Object.getOwnPropertyDescriptor(s.constructor.prototype,a),u=""+s[a];if(!s.hasOwnProperty(a)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var m=o.get,x=o.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return m.call(this)},set:function(S){u=""+S,x.call(this,S)}}),Object.defineProperty(s,a,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(S){u=""+S},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function uo(s){s._valueTracker||(s._valueTracker=KS(s))}function sg(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var o=a.getValue(),u="";return s&&(u=rg(s)?s.checked?"true":"false":s.value),s=u,s!==o?(a.setValue(s),!0):!1}function fo(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var XS=/[\n"\\]/g;function xn(s){return s.replace(XS,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function ed(s,a,o,u,m,x,S,k){s.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?s.type=S:s.removeAttribute("type"),a!=null?S==="number"?(a===0&&s.value===""||s.value!=a)&&(s.value=""+yn(a)):s.value!==""+yn(a)&&(s.value=""+yn(a)):S!=="submit"&&S!=="reset"||s.removeAttribute("value"),a!=null?td(s,S,yn(a)):o!=null?td(s,S,yn(o)):u!=null&&s.removeAttribute("value"),m==null&&x!=null&&(s.defaultChecked=!!x),m!=null&&(s.checked=m&&typeof m!="function"&&typeof m!="symbol"),k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?s.name=""+yn(k):s.removeAttribute("name")}function ig(s,a,o,u,m,x,S,k){if(x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(s.type=x),a!=null||o!=null){if(!(x!=="submit"&&x!=="reset"||a!=null))return;o=o!=null?""+yn(o):"",a=a!=null?""+yn(a):o,k||a===s.value||(s.value=a),s.defaultValue=a}u=u??m,u=typeof u!="function"&&typeof u!="symbol"&&!!u,s.checked=k?s.checked:!!u,s.defaultChecked=!!u,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(s.name=S)}function td(s,a,o){a==="number"&&fo(s.ownerDocument)===s||s.defaultValue===""+o||(s.defaultValue=""+o)}function gi(s,a,o,u){if(s=s.options,a){a={};for(var m=0;m<o.length;m++)a["$"+o[m]]=!0;for(o=0;o<s.length;o++)m=a.hasOwnProperty("$"+s[o].value),s[o].selected!==m&&(s[o].selected=m),m&&u&&(s[o].defaultSelected=!0)}else{for(o=""+yn(o),a=null,m=0;m<s.length;m++){if(s[m].value===o){s[m].selected=!0,u&&(s[m].defaultSelected=!0);return}a!==null||s[m].disabled||(a=s[m])}a!==null&&(a.selected=!0)}}function ag(s,a,o){if(a!=null&&(a=""+yn(a),a!==s.value&&(s.value=a),o==null)){s.defaultValue!==a&&(s.defaultValue=a);return}s.defaultValue=o!=null?""+yn(o):""}function lg(s,a,o,u){if(a==null){if(u!=null){if(o!=null)throw Error(r(92));if(Oe(u)){if(1<u.length)throw Error(r(93));u=u[0]}o=u}o==null&&(o=""),a=o}o=yn(a),s.defaultValue=o,u=s.textContent,u===o&&u!==""&&u!==null&&(s.value=u)}function yi(s,a){if(a){var o=s.firstChild;if(o&&o===s.lastChild&&o.nodeType===3){o.nodeValue=a;return}}s.textContent=a}var JS=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function og(s,a,o){var u=a.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?s.setProperty(a,""):a==="float"?s.cssFloat="":s[a]="":u?s.setProperty(a,o):typeof o!="number"||o===0||JS.has(a)?a==="float"?s.cssFloat=o:s[a]=(""+o).trim():s[a]=o+"px"}function cg(s,a,o){if(a!=null&&typeof a!="object")throw Error(r(62));if(s=s.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||a!=null&&a.hasOwnProperty(u)||(u.indexOf("--")===0?s.setProperty(u,""):u==="float"?s.cssFloat="":s[u]="");for(var m in a)u=a[m],a.hasOwnProperty(m)&&o[m]!==u&&og(s,m,u)}else for(var x in a)a.hasOwnProperty(x)&&og(s,x,a[x])}function nd(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var QS=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ZS=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ho(s){return ZS.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var rd=null;function sd(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var xi=null,bi=null;function ug(s){var a=fi(s);if(a&&(s=a.stateNode)){var o=s[Qt]||null;e:switch(s=a.stateNode,a.type){case"input":if(ed(s,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),a=o.name,o.type==="radio"&&a!=null){for(o=s;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+xn(""+a)+'"][type="radio"]'),a=0;a<o.length;a++){var u=o[a];if(u!==s&&u.form===s.form){var m=u[Qt]||null;if(!m)throw Error(r(90));ed(u,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(a=0;a<o.length;a++)u=o[a],u.form===s.form&&sg(u)}break e;case"textarea":ag(s,o.value,o.defaultValue);break e;case"select":a=o.value,a!=null&&gi(s,!!o.multiple,a,!1)}}}var id=!1;function dg(s,a,o){if(id)return s(a,o);id=!0;try{var u=s(a);return u}finally{if(id=!1,(xi!==null||bi!==null)&&(Zo(),xi&&(a=xi,s=bi,bi=xi=null,ug(a),s)))for(a=0;a<s.length;a++)ug(s[a])}}function Ca(s,a){var o=s.stateNode;if(o===null)return null;var u=o[Qt]||null;if(u===null)return null;o=u[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(s=s.type,u=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!u;break e;default:s=!1}if(s)return null;if(o&&typeof o!="function")throw Error(r(231,a,typeof o));return o}var tr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ad=!1;if(tr)try{var Ea={};Object.defineProperty(Ea,"passive",{get:function(){ad=!0}}),window.addEventListener("test",Ea,Ea),window.removeEventListener("test",Ea,Ea)}catch{ad=!1}var Mr=null,ld=null,po=null;function fg(){if(po)return po;var s,a=ld,o=a.length,u,m="value"in Mr?Mr.value:Mr.textContent,x=m.length;for(s=0;s<o&&a[s]===m[s];s++);var S=o-s;for(u=1;u<=S&&a[o-u]===m[x-u];u++);return po=m.slice(s,1<u?1-u:void 0)}function mo(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function go(){return!0}function hg(){return!1}function Zt(s){function a(o,u,m,x,S){this._reactName=o,this._targetInst=m,this.type=u,this.nativeEvent=x,this.target=S,this.currentTarget=null;for(var k in s)s.hasOwnProperty(k)&&(o=s[k],this[k]=o?o(x):x[k]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?go:hg,this.isPropagationStopped=hg,this}return g(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=go)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=go)},persist:function(){},isPersistent:go}),a}var js={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yo=Zt(js),ka=g({},js,{view:0,detail:0}),WS=Zt(ka),od,cd,ja,xo=g({},ka,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dd,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==ja&&(ja&&s.type==="mousemove"?(od=s.screenX-ja.screenX,cd=s.screenY-ja.screenY):cd=od=0,ja=s),od)},movementY:function(s){return"movementY"in s?s.movementY:cd}}),pg=Zt(xo),eN=g({},xo,{dataTransfer:0}),tN=Zt(eN),nN=g({},ka,{relatedTarget:0}),ud=Zt(nN),rN=g({},js,{animationName:0,elapsedTime:0,pseudoElement:0}),sN=Zt(rN),iN=g({},js,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),aN=Zt(iN),lN=g({},js,{data:0}),mg=Zt(lN),oN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dN(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=uN[s])?!!a[s]:!1}function dd(){return dN}var fN=g({},ka,{key:function(s){if(s.key){var a=oN[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=mo(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?cN[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dd,charCode:function(s){return s.type==="keypress"?mo(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?mo(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),hN=Zt(fN),pN=g({},xo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gg=Zt(pN),mN=g({},ka,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dd}),gN=Zt(mN),yN=g({},js,{propertyName:0,elapsedTime:0,pseudoElement:0}),xN=Zt(yN),bN=g({},xo,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),vN=Zt(bN),wN=g({},js,{newState:0,oldState:0}),SN=Zt(wN),NN=[9,13,27,32],fd=tr&&"CompositionEvent"in window,Aa=null;tr&&"documentMode"in document&&(Aa=document.documentMode);var CN=tr&&"TextEvent"in window&&!Aa,yg=tr&&(!fd||Aa&&8<Aa&&11>=Aa),xg=" ",bg=!1;function vg(s,a){switch(s){case"keyup":return NN.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wg(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var vi=!1;function EN(s,a){switch(s){case"compositionend":return wg(a);case"keypress":return a.which!==32?null:(bg=!0,xg);case"textInput":return s=a.data,s===xg&&bg?null:s;default:return null}}function kN(s,a){if(vi)return s==="compositionend"||!fd&&vg(s,a)?(s=fg(),po=ld=Mr=null,vi=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return yg&&a.locale!=="ko"?null:a.data;default:return null}}var jN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sg(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!jN[s.type]:a==="textarea"}function Ng(s,a,o,u){xi?bi?bi.push(u):bi=[u]:xi=u,a=sc(a,"onChange"),0<a.length&&(o=new yo("onChange","change",null,o,u),s.push({event:o,listeners:a}))}var Ta=null,Ma=null;function AN(s){rx(s,0)}function bo(s){var a=Na(s);if(sg(a))return s}function Cg(s,a){if(s==="change")return a}var Eg=!1;if(tr){var hd;if(tr){var pd="oninput"in document;if(!pd){var kg=document.createElement("div");kg.setAttribute("oninput","return;"),pd=typeof kg.oninput=="function"}hd=pd}else hd=!1;Eg=hd&&(!document.documentMode||9<document.documentMode)}function jg(){Ta&&(Ta.detachEvent("onpropertychange",Ag),Ma=Ta=null)}function Ag(s){if(s.propertyName==="value"&&bo(Ma)){var a=[];Ng(a,Ma,s,sd(s)),dg(AN,a)}}function TN(s,a,o){s==="focusin"?(jg(),Ta=a,Ma=o,Ta.attachEvent("onpropertychange",Ag)):s==="focusout"&&jg()}function MN(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return bo(Ma)}function ON(s,a){if(s==="click")return bo(a)}function RN(s,a){if(s==="input"||s==="change")return bo(a)}function DN(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var sn=typeof Object.is=="function"?Object.is:DN;function Oa(s,a){if(sn(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var o=Object.keys(s),u=Object.keys(a);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var m=o[u];if(!ws.call(a,m)||!sn(s[m],a[m]))return!1}return!0}function Tg(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Mg(s,a){var o=Tg(s);s=0;for(var u;o;){if(o.nodeType===3){if(u=s+o.textContent.length,s<=a&&u>=a)return{node:o,offset:a-s};s=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Tg(o)}}function Og(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?Og(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function Rg(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var a=fo(s.document);a instanceof s.HTMLIFrameElement;){try{var o=typeof a.contentWindow.location.href=="string"}catch{o=!1}if(o)s=a.contentWindow;else break;a=fo(s.document)}return a}function md(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}var LN=tr&&"documentMode"in document&&11>=document.documentMode,wi=null,gd=null,Ra=null,yd=!1;function Dg(s,a,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;yd||wi==null||wi!==fo(u)||(u=wi,"selectionStart"in u&&md(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Ra&&Oa(Ra,u)||(Ra=u,u=sc(gd,"onSelect"),0<u.length&&(a=new yo("onSelect","select",null,a,o),s.push({event:a,listeners:u}),a.target=wi)))}function As(s,a){var o={};return o[s.toLowerCase()]=a.toLowerCase(),o["Webkit"+s]="webkit"+a,o["Moz"+s]="moz"+a,o}var Si={animationend:As("Animation","AnimationEnd"),animationiteration:As("Animation","AnimationIteration"),animationstart:As("Animation","AnimationStart"),transitionrun:As("Transition","TransitionRun"),transitionstart:As("Transition","TransitionStart"),transitioncancel:As("Transition","TransitionCancel"),transitionend:As("Transition","TransitionEnd")},xd={},Lg={};tr&&(Lg=document.createElement("div").style,"AnimationEvent"in window||(delete Si.animationend.animation,delete Si.animationiteration.animation,delete Si.animationstart.animation),"TransitionEvent"in window||delete Si.transitionend.transition);function Ts(s){if(xd[s])return xd[s];if(!Si[s])return s;var a=Si[s],o;for(o in a)if(a.hasOwnProperty(o)&&o in Lg)return xd[s]=a[o];return s}var _g=Ts("animationend"),zg=Ts("animationiteration"),Bg=Ts("animationstart"),_N=Ts("transitionrun"),zN=Ts("transitionstart"),BN=Ts("transitioncancel"),Pg=Ts("transitionend"),Hg=new Map,bd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");bd.push("scrollEnd");function Dn(s,a){Hg.set(s,a),ks(a,[s])}var Ug=new WeakMap;function bn(s,a){if(typeof s=="object"&&s!==null){var o=Ug.get(s);return o!==void 0?o:(a={value:s,source:a,stack:ng(a)},Ug.set(s,a),a)}return{value:s,source:a,stack:ng(a)}}var vn=[],Ni=0,vd=0;function vo(){for(var s=Ni,a=vd=Ni=0;a<s;){var o=vn[a];vn[a++]=null;var u=vn[a];vn[a++]=null;var m=vn[a];vn[a++]=null;var x=vn[a];if(vn[a++]=null,u!==null&&m!==null){var S=u.pending;S===null?m.next=m:(m.next=S.next,S.next=m),u.pending=m}x!==0&&Ig(o,m,x)}}function wo(s,a,o,u){vn[Ni++]=s,vn[Ni++]=a,vn[Ni++]=o,vn[Ni++]=u,vd|=u,s.lanes|=u,s=s.alternate,s!==null&&(s.lanes|=u)}function wd(s,a,o,u){return wo(s,a,o,u),So(s)}function Ci(s,a){return wo(s,null,null,a),So(s)}function Ig(s,a,o){s.lanes|=o;var u=s.alternate;u!==null&&(u.lanes|=o);for(var m=!1,x=s.return;x!==null;)x.childLanes|=o,u=x.alternate,u!==null&&(u.childLanes|=o),x.tag===22&&(s=x.stateNode,s===null||s._visibility&1||(m=!0)),s=x,x=x.return;return s.tag===3?(x=s.stateNode,m&&a!==null&&(m=31-yt(o),s=x.hiddenUpdates,u=s[m],u===null?s[m]=[a]:u.push(a),a.lane=o|536870912),x):null}function So(s){if(50<rl)throw rl=0,Af=null,Error(r(185));for(var a=s.return;a!==null;)s=a,a=s.return;return s.tag===3?s.stateNode:null}var Ei={};function PN(s,a,o,u){this.tag=s,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function an(s,a,o,u){return new PN(s,a,o,u)}function Sd(s){return s=s.prototype,!(!s||!s.isReactComponent)}function nr(s,a){var o=s.alternate;return o===null?(o=an(s.tag,a,s.key,s.mode),o.elementType=s.elementType,o.type=s.type,o.stateNode=s.stateNode,o.alternate=s,s.alternate=o):(o.pendingProps=a,o.type=s.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=s.flags&65011712,o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,a=s.dependencies,o.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},o.sibling=s.sibling,o.index=s.index,o.ref=s.ref,o.refCleanup=s.refCleanup,o}function qg(s,a){s.flags&=65011714;var o=s.alternate;return o===null?(s.childLanes=0,s.lanes=a,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,a=o.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),s}function No(s,a,o,u,m,x){var S=0;if(u=s,typeof s=="function")Sd(s)&&(S=1);else if(typeof s=="string")S=U2(s,o,Z.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case re:return s=an(31,o,a,m),s.elementType=re,s.lanes=x,s;case w:return Ms(o.children,m,x,a);case N:S=8,m|=24;break;case C:return s=an(12,o,a,m|2),s.elementType=C,s.lanes=x,s;case L:return s=an(13,o,a,m),s.elementType=L,s.lanes=x,s;case B:return s=an(19,o,a,m),s.elementType=B,s.lanes=x,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case j:case M:S=10;break e;case O:S=9;break e;case A:S=11;break e;case F:S=14;break e;case _:S=16,u=null;break e}S=29,o=Error(r(130,s===null?"null":typeof s,"")),u=null}return a=an(S,o,a,m),a.elementType=s,a.type=u,a.lanes=x,a}function Ms(s,a,o,u){return s=an(7,s,u,a),s.lanes=o,s}function Nd(s,a,o){return s=an(6,s,null,a),s.lanes=o,s}function Cd(s,a,o){return a=an(4,s.children!==null?s.children:[],s.key,a),a.lanes=o,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}var ki=[],ji=0,Co=null,Eo=0,wn=[],Sn=0,Os=null,rr=1,sr="";function Rs(s,a){ki[ji++]=Eo,ki[ji++]=Co,Co=s,Eo=a}function Vg(s,a,o){wn[Sn++]=rr,wn[Sn++]=sr,wn[Sn++]=Os,Os=s;var u=rr;s=sr;var m=32-yt(u)-1;u&=~(1<<m),o+=1;var x=32-yt(a)+m;if(30<x){var S=m-m%5;x=(u&(1<<S)-1).toString(32),u>>=S,m-=S,rr=1<<32-yt(a)+m|o<<m|u,sr=x+s}else rr=1<<x|o<<m|u,sr=s}function Ed(s){s.return!==null&&(Rs(s,1),Vg(s,1,0))}function kd(s){for(;s===Co;)Co=ki[--ji],ki[ji]=null,Eo=ki[--ji],ki[ji]=null;for(;s===Os;)Os=wn[--Sn],wn[Sn]=null,sr=wn[--Sn],wn[Sn]=null,rr=wn[--Sn],wn[Sn]=null}var Ft=null,rt=null,Pe=!1,Ds=null,qn=!1,jd=Error(r(519));function Ls(s){var a=Error(r(418,""));throw _a(bn(a,s)),jd}function Fg(s){var a=s.stateNode,o=s.type,u=s.memoizedProps;switch(a[Bt]=s,a[Qt]=u,o){case"dialog":De("cancel",a),De("close",a);break;case"iframe":case"object":case"embed":De("load",a);break;case"video":case"audio":for(o=0;o<il.length;o++)De(il[o],a);break;case"source":De("error",a);break;case"img":case"image":case"link":De("error",a),De("load",a);break;case"details":De("toggle",a);break;case"input":De("invalid",a),ig(a,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),uo(a);break;case"select":De("invalid",a);break;case"textarea":De("invalid",a),lg(a,u.value,u.defaultValue,u.children),uo(a)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||a.textContent===""+o||u.suppressHydrationWarning===!0||lx(a.textContent,o)?(u.popover!=null&&(De("beforetoggle",a),De("toggle",a)),u.onScroll!=null&&De("scroll",a),u.onScrollEnd!=null&&De("scrollend",a),u.onClick!=null&&(a.onclick=ic),a=!0):a=!1,a||Ls(s)}function $g(s){for(Ft=s.return;Ft;)switch(Ft.tag){case 5:case 13:qn=!1;return;case 27:case 3:qn=!0;return;default:Ft=Ft.return}}function Da(s){if(s!==Ft)return!1;if(!Pe)return $g(s),Pe=!0,!1;var a=s.tag,o;if((o=a!==3&&a!==27)&&((o=a===5)&&(o=s.type,o=!(o!=="form"&&o!=="button")||Ff(s.type,s.memoizedProps)),o=!o),o&&rt&&Ls(s),$g(s),a===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));e:{for(s=s.nextSibling,a=0;s;){if(s.nodeType===8)if(o=s.data,o==="/$"){if(a===0){rt=_n(s.nextSibling);break e}a--}else o!=="$"&&o!=="$!"&&o!=="$?"||a++;s=s.nextSibling}rt=null}}else a===27?(a=rt,Gr(s.type)?(s=Kf,Kf=null,rt=s):rt=a):rt=Ft?_n(s.stateNode.nextSibling):null;return!0}function La(){rt=Ft=null,Pe=!1}function Gg(){var s=Ds;return s!==null&&(tn===null?tn=s:tn.push.apply(tn,s),Ds=null),s}function _a(s){Ds===null?Ds=[s]:Ds.push(s)}var Ad=U(null),_s=null,ir=null;function Or(s,a,o){K(Ad,a._currentValue),a._currentValue=o}function ar(s){s._currentValue=Ad.current,ne(Ad)}function Td(s,a,o){for(;s!==null;){var u=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,u!==null&&(u.childLanes|=a)):u!==null&&(u.childLanes&a)!==a&&(u.childLanes|=a),s===o)break;s=s.return}}function Md(s,a,o,u){var m=s.child;for(m!==null&&(m.return=s);m!==null;){var x=m.dependencies;if(x!==null){var S=m.child;x=x.firstContext;e:for(;x!==null;){var k=x;x=m;for(var T=0;T<a.length;T++)if(k.context===a[T]){x.lanes|=o,k=x.alternate,k!==null&&(k.lanes|=o),Td(x.return,o,s),u||(S=null);break e}x=k.next}}else if(m.tag===18){if(S=m.return,S===null)throw Error(r(341));S.lanes|=o,x=S.alternate,x!==null&&(x.lanes|=o),Td(S,o,s),S=null}else S=m.child;if(S!==null)S.return=m;else for(S=m;S!==null;){if(S===s){S=null;break}if(m=S.sibling,m!==null){m.return=S.return,S=m;break}S=S.return}m=S}}function za(s,a,o,u){s=null;for(var m=a,x=!1;m!==null;){if(!x){if((m.flags&524288)!==0)x=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var S=m.alternate;if(S===null)throw Error(r(387));if(S=S.memoizedProps,S!==null){var k=m.type;sn(m.pendingProps.value,S.value)||(s!==null?s.push(k):s=[k])}}else if(m===Le.current){if(S=m.alternate,S===null)throw Error(r(387));S.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(s!==null?s.push(dl):s=[dl])}m=m.return}s!==null&&Md(a,s,o,u),a.flags|=262144}function ko(s){for(s=s.firstContext;s!==null;){if(!sn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function zs(s){_s=s,ir=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Pt(s){return Yg(_s,s)}function jo(s,a){return _s===null&&zs(s),Yg(s,a)}function Yg(s,a){var o=a._currentValue;if(a={context:a,memoizedValue:o,next:null},ir===null){if(s===null)throw Error(r(308));ir=a,s.dependencies={lanes:0,firstContext:a},s.flags|=524288}else ir=ir.next=a;return o}var HN=typeof AbortController<"u"?AbortController:function(){var s=[],a=this.signal={aborted:!1,addEventListener:function(o,u){s.push(u)}};this.abort=function(){a.aborted=!0,s.forEach(function(o){return o()})}},UN=n.unstable_scheduleCallback,IN=n.unstable_NormalPriority,ht={$$typeof:M,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Od(){return{controller:new HN,data:new Map,refCount:0}}function Ba(s){s.refCount--,s.refCount===0&&UN(IN,function(){s.controller.abort()})}var Pa=null,Rd=0,Ai=0,Ti=null;function qN(s,a){if(Pa===null){var o=Pa=[];Rd=0,Ai=_f(),Ti={status:"pending",value:void 0,then:function(u){o.push(u)}}}return Rd++,a.then(Kg,Kg),a}function Kg(){if(--Rd===0&&Pa!==null){Ti!==null&&(Ti.status="fulfilled");var s=Pa;Pa=null,Ai=0,Ti=null;for(var a=0;a<s.length;a++)(0,s[a])()}}function VN(s,a){var o=[],u={status:"pending",value:null,reason:null,then:function(m){o.push(m)}};return s.then(function(){u.status="fulfilled",u.value=a;for(var m=0;m<o.length;m++)(0,o[m])(a)},function(m){for(u.status="rejected",u.reason=m,m=0;m<o.length;m++)(0,o[m])(void 0)}),u}var Xg=V.S;V.S=function(s,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&qN(s,a),Xg!==null&&Xg(s,a)};var Bs=U(null);function Dd(){var s=Bs.current;return s!==null?s:Xe.pooledCache}function Ao(s,a){a===null?K(Bs,Bs.current):K(Bs,a.pool)}function Jg(){var s=Dd();return s===null?null:{parent:ht._currentValue,pool:s}}var Ha=Error(r(460)),Qg=Error(r(474)),To=Error(r(542)),Ld={then:function(){}};function Zg(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Mo(){}function Wg(s,a,o){switch(o=s[o],o===void 0?s.push(a):o!==a&&(a.then(Mo,Mo),a=o),a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,t0(s),s;default:if(typeof a.status=="string")a.then(Mo,Mo);else{if(s=Xe,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=a,s.status="pending",s.then(function(u){if(a.status==="pending"){var m=a;m.status="fulfilled",m.value=u}},function(u){if(a.status==="pending"){var m=a;m.status="rejected",m.reason=u}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,t0(s),s}throw Ua=a,Ha}}var Ua=null;function e0(){if(Ua===null)throw Error(r(459));var s=Ua;return Ua=null,s}function t0(s){if(s===Ha||s===To)throw Error(r(483))}var Rr=!1;function _d(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function zd(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Dr(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Lr(s,a,o){var u=s.updateQueue;if(u===null)return null;if(u=u.shared,(Ue&2)!==0){var m=u.pending;return m===null?a.next=a:(a.next=m.next,m.next=a),u.pending=a,a=So(s),Ig(s,null,o),a}return wo(s,u,a,o),So(s)}function Ia(s,a,o){if(a=a.updateQueue,a!==null&&(a=a.shared,(o&4194048)!==0)){var u=a.lanes;u&=s.pendingLanes,o|=u,a.lanes=o,Km(s,o)}}function Bd(s,a){var o=s.updateQueue,u=s.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var m=null,x=null;if(o=o.firstBaseUpdate,o!==null){do{var S={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};x===null?m=x=S:x=x.next=S,o=o.next}while(o!==null);x===null?m=x=a:x=x.next=a}else m=x=a;o={baseState:u.baseState,firstBaseUpdate:m,lastBaseUpdate:x,shared:u.shared,callbacks:u.callbacks},s.updateQueue=o;return}s=o.lastBaseUpdate,s===null?o.firstBaseUpdate=a:s.next=a,o.lastBaseUpdate=a}var Pd=!1;function qa(){if(Pd){var s=Ti;if(s!==null)throw s}}function Va(s,a,o,u){Pd=!1;var m=s.updateQueue;Rr=!1;var x=m.firstBaseUpdate,S=m.lastBaseUpdate,k=m.shared.pending;if(k!==null){m.shared.pending=null;var T=k,H=T.next;T.next=null,S===null?x=H:S.next=H,S=T;var G=s.alternate;G!==null&&(G=G.updateQueue,k=G.lastBaseUpdate,k!==S&&(k===null?G.firstBaseUpdate=H:k.next=H,G.lastBaseUpdate=T))}if(x!==null){var J=m.baseState;S=0,G=H=T=null,k=x;do{var I=k.lane&-536870913,q=I!==k.lane;if(q?(_e&I)===I:(u&I)===I){I!==0&&I===Ai&&(Pd=!0),G!==null&&(G=G.next={lane:0,tag:k.tag,payload:k.payload,callback:null,next:null});e:{var be=s,ge=k;I=a;var $e=o;switch(ge.tag){case 1:if(be=ge.payload,typeof be=="function"){J=be.call($e,J,I);break e}J=be;break e;case 3:be.flags=be.flags&-65537|128;case 0:if(be=ge.payload,I=typeof be=="function"?be.call($e,J,I):be,I==null)break e;J=g({},J,I);break e;case 2:Rr=!0}}I=k.callback,I!==null&&(s.flags|=64,q&&(s.flags|=8192),q=m.callbacks,q===null?m.callbacks=[I]:q.push(I))}else q={lane:I,tag:k.tag,payload:k.payload,callback:k.callback,next:null},G===null?(H=G=q,T=J):G=G.next=q,S|=I;if(k=k.next,k===null){if(k=m.shared.pending,k===null)break;q=k,k=q.next,q.next=null,m.lastBaseUpdate=q,m.shared.pending=null}}while(!0);G===null&&(T=J),m.baseState=T,m.firstBaseUpdate=H,m.lastBaseUpdate=G,x===null&&(m.shared.lanes=0),qr|=S,s.lanes=S,s.memoizedState=J}}function n0(s,a){if(typeof s!="function")throw Error(r(191,s));s.call(a)}function r0(s,a){var o=s.callbacks;if(o!==null)for(s.callbacks=null,s=0;s<o.length;s++)n0(o[s],a)}var Mi=U(null),Oo=U(0);function s0(s,a){s=hr,K(Oo,s),K(Mi,a),hr=s|a.baseLanes}function Hd(){K(Oo,hr),K(Mi,Mi.current)}function Ud(){hr=Oo.current,ne(Mi),ne(Oo)}var _r=0,Ae=null,Ve=null,ct=null,Ro=!1,Oi=!1,Ps=!1,Do=0,Fa=0,Ri=null,FN=0;function lt(){throw Error(r(321))}function Id(s,a){if(a===null)return!1;for(var o=0;o<a.length&&o<s.length;o++)if(!sn(s[o],a[o]))return!1;return!0}function qd(s,a,o,u,m,x){return _r=x,Ae=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,V.H=s===null||s.memoizedState===null?I0:q0,Ps=!1,x=o(u,m),Ps=!1,Oi&&(x=a0(a,o,u,m)),i0(s),x}function i0(s){V.H=Ho;var a=Ve!==null&&Ve.next!==null;if(_r=0,ct=Ve=Ae=null,Ro=!1,Fa=0,Ri=null,a)throw Error(r(300));s===null||bt||(s=s.dependencies,s!==null&&ko(s)&&(bt=!0))}function a0(s,a,o,u){Ae=s;var m=0;do{if(Oi&&(Ri=null),Fa=0,Oi=!1,25<=m)throw Error(r(301));if(m+=1,ct=Ve=null,s.updateQueue!=null){var x=s.updateQueue;x.lastEffect=null,x.events=null,x.stores=null,x.memoCache!=null&&(x.memoCache.index=0)}V.H=QN,x=a(o,u)}while(Oi);return x}function $N(){var s=V.H,a=s.useState()[0];return a=typeof a.then=="function"?$a(a):a,s=s.useState()[0],(Ve!==null?Ve.memoizedState:null)!==s&&(Ae.flags|=1024),a}function Vd(){var s=Do!==0;return Do=0,s}function Fd(s,a,o){a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~o}function $d(s){if(Ro){for(s=s.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}Ro=!1}_r=0,ct=Ve=Ae=null,Oi=!1,Fa=Do=0,Ri=null}function Wt(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ct===null?Ae.memoizedState=ct=s:ct=ct.next=s,ct}function ut(){if(Ve===null){var s=Ae.alternate;s=s!==null?s.memoizedState:null}else s=Ve.next;var a=ct===null?Ae.memoizedState:ct.next;if(a!==null)ct=a,Ve=s;else{if(s===null)throw Ae.alternate===null?Error(r(467)):Error(r(310));Ve=s,s={memoizedState:Ve.memoizedState,baseState:Ve.baseState,baseQueue:Ve.baseQueue,queue:Ve.queue,next:null},ct===null?Ae.memoizedState=ct=s:ct=ct.next=s}return ct}function Gd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function $a(s){var a=Fa;return Fa+=1,Ri===null&&(Ri=[]),s=Wg(Ri,s,a),a=Ae,(ct===null?a.memoizedState:ct.next)===null&&(a=a.alternate,V.H=a===null||a.memoizedState===null?I0:q0),s}function Lo(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return $a(s);if(s.$$typeof===M)return Pt(s)}throw Error(r(438,String(s)))}function Yd(s){var a=null,o=Ae.updateQueue;if(o!==null&&(a=o.memoCache),a==null){var u=Ae.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(a={data:u.data.map(function(m){return m.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),o===null&&(o=Gd(),Ae.updateQueue=o),o.memoCache=a,o=a.data[a.index],o===void 0)for(o=a.data[a.index]=Array(s),u=0;u<s;u++)o[u]=le;return a.index++,o}function lr(s,a){return typeof a=="function"?a(s):a}function _o(s){var a=ut();return Kd(a,Ve,s)}function Kd(s,a,o){var u=s.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=o;var m=s.baseQueue,x=u.pending;if(x!==null){if(m!==null){var S=m.next;m.next=x.next,x.next=S}a.baseQueue=m=x,u.pending=null}if(x=s.baseState,m===null)s.memoizedState=x;else{a=m.next;var k=S=null,T=null,H=a,G=!1;do{var J=H.lane&-536870913;if(J!==H.lane?(_e&J)===J:(_r&J)===J){var I=H.revertLane;if(I===0)T!==null&&(T=T.next={lane:0,revertLane:0,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),J===Ai&&(G=!0);else if((_r&I)===I){H=H.next,I===Ai&&(G=!0);continue}else J={lane:0,revertLane:H.revertLane,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},T===null?(k=T=J,S=x):T=T.next=J,Ae.lanes|=I,qr|=I;J=H.action,Ps&&o(x,J),x=H.hasEagerState?H.eagerState:o(x,J)}else I={lane:J,revertLane:H.revertLane,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},T===null?(k=T=I,S=x):T=T.next=I,Ae.lanes|=J,qr|=J;H=H.next}while(H!==null&&H!==a);if(T===null?S=x:T.next=k,!sn(x,s.memoizedState)&&(bt=!0,G&&(o=Ti,o!==null)))throw o;s.memoizedState=x,s.baseState=S,s.baseQueue=T,u.lastRenderedState=x}return m===null&&(u.lanes=0),[s.memoizedState,u.dispatch]}function Xd(s){var a=ut(),o=a.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=s;var u=o.dispatch,m=o.pending,x=a.memoizedState;if(m!==null){o.pending=null;var S=m=m.next;do x=s(x,S.action),S=S.next;while(S!==m);sn(x,a.memoizedState)||(bt=!0),a.memoizedState=x,a.baseQueue===null&&(a.baseState=x),o.lastRenderedState=x}return[x,u]}function l0(s,a,o){var u=Ae,m=ut(),x=Pe;if(x){if(o===void 0)throw Error(r(407));o=o()}else o=a();var S=!sn((Ve||m).memoizedState,o);S&&(m.memoizedState=o,bt=!0),m=m.queue;var k=u0.bind(null,u,m,s);if(Ga(2048,8,k,[s]),m.getSnapshot!==a||S||ct!==null&&ct.memoizedState.tag&1){if(u.flags|=2048,Di(9,zo(),c0.bind(null,u,m,o,a),null),Xe===null)throw Error(r(349));x||(_r&124)!==0||o0(u,a,o)}return o}function o0(s,a,o){s.flags|=16384,s={getSnapshot:a,value:o},a=Ae.updateQueue,a===null?(a=Gd(),Ae.updateQueue=a,a.stores=[s]):(o=a.stores,o===null?a.stores=[s]:o.push(s))}function c0(s,a,o,u){a.value=o,a.getSnapshot=u,d0(a)&&f0(s)}function u0(s,a,o){return o(function(){d0(a)&&f0(s)})}function d0(s){var a=s.getSnapshot;s=s.value;try{var o=a();return!sn(s,o)}catch{return!0}}function f0(s){var a=Ci(s,2);a!==null&&dn(a,s,2)}function Jd(s){var a=Wt();if(typeof s=="function"){var o=s;if(s=o(),Ps){Rn(!0);try{o()}finally{Rn(!1)}}}return a.memoizedState=a.baseState=s,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:lr,lastRenderedState:s},a}function h0(s,a,o,u){return s.baseState=o,Kd(s,Ve,typeof u=="function"?u:lr)}function GN(s,a,o,u,m){if(Po(s))throw Error(r(485));if(s=a.action,s!==null){var x={payload:m,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){x.listeners.push(S)}};V.T!==null?o(!0):x.isTransition=!1,u(x),o=a.pending,o===null?(x.next=a.pending=x,p0(a,x)):(x.next=o.next,a.pending=o.next=x)}}function p0(s,a){var o=a.action,u=a.payload,m=s.state;if(a.isTransition){var x=V.T,S={};V.T=S;try{var k=o(m,u),T=V.S;T!==null&&T(S,k),m0(s,a,k)}catch(H){Qd(s,a,H)}finally{V.T=x}}else try{x=o(m,u),m0(s,a,x)}catch(H){Qd(s,a,H)}}function m0(s,a,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){g0(s,a,u)},function(u){return Qd(s,a,u)}):g0(s,a,o)}function g0(s,a,o){a.status="fulfilled",a.value=o,y0(a),s.state=o,a=s.pending,a!==null&&(o=a.next,o===a?s.pending=null:(o=o.next,a.next=o,p0(s,o)))}function Qd(s,a,o){var u=s.pending;if(s.pending=null,u!==null){u=u.next;do a.status="rejected",a.reason=o,y0(a),a=a.next;while(a!==u)}s.action=null}function y0(s){s=s.listeners;for(var a=0;a<s.length;a++)(0,s[a])()}function x0(s,a){return a}function b0(s,a){if(Pe){var o=Xe.formState;if(o!==null){e:{var u=Ae;if(Pe){if(rt){t:{for(var m=rt,x=qn;m.nodeType!==8;){if(!x){m=null;break t}if(m=_n(m.nextSibling),m===null){m=null;break t}}x=m.data,m=x==="F!"||x==="F"?m:null}if(m){rt=_n(m.nextSibling),u=m.data==="F!";break e}}Ls(u)}u=!1}u&&(a=o[0])}}return o=Wt(),o.memoizedState=o.baseState=a,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:x0,lastRenderedState:a},o.queue=u,o=P0.bind(null,Ae,u),u.dispatch=o,u=Jd(!1),x=nf.bind(null,Ae,!1,u.queue),u=Wt(),m={state:a,dispatch:null,action:s,pending:null},u.queue=m,o=GN.bind(null,Ae,m,x,o),m.dispatch=o,u.memoizedState=s,[a,o,!1]}function v0(s){var a=ut();return w0(a,Ve,s)}function w0(s,a,o){if(a=Kd(s,a,x0)[0],s=_o(lr)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var u=$a(a)}catch(S){throw S===Ha?To:S}else u=a;a=ut();var m=a.queue,x=m.dispatch;return o!==a.memoizedState&&(Ae.flags|=2048,Di(9,zo(),YN.bind(null,m,o),null)),[u,x,s]}function YN(s,a){s.action=a}function S0(s){var a=ut(),o=Ve;if(o!==null)return w0(a,o,s);ut(),a=a.memoizedState,o=ut();var u=o.queue.dispatch;return o.memoizedState=s,[a,u,!1]}function Di(s,a,o,u){return s={tag:s,create:o,deps:u,inst:a,next:null},a=Ae.updateQueue,a===null&&(a=Gd(),Ae.updateQueue=a),o=a.lastEffect,o===null?a.lastEffect=s.next=s:(u=o.next,o.next=s,s.next=u,a.lastEffect=s),s}function zo(){return{destroy:void 0,resource:void 0}}function N0(){return ut().memoizedState}function Bo(s,a,o,u){var m=Wt();u=u===void 0?null:u,Ae.flags|=s,m.memoizedState=Di(1|a,zo(),o,u)}function Ga(s,a,o,u){var m=ut();u=u===void 0?null:u;var x=m.memoizedState.inst;Ve!==null&&u!==null&&Id(u,Ve.memoizedState.deps)?m.memoizedState=Di(a,x,o,u):(Ae.flags|=s,m.memoizedState=Di(1|a,x,o,u))}function C0(s,a){Bo(8390656,8,s,a)}function E0(s,a){Ga(2048,8,s,a)}function k0(s,a){return Ga(4,2,s,a)}function j0(s,a){return Ga(4,4,s,a)}function A0(s,a){if(typeof a=="function"){s=s();var o=a(s);return function(){typeof o=="function"?o():a(null)}}if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function T0(s,a,o){o=o!=null?o.concat([s]):null,Ga(4,4,A0.bind(null,a,s),o)}function Zd(){}function M0(s,a){var o=ut();a=a===void 0?null:a;var u=o.memoizedState;return a!==null&&Id(a,u[1])?u[0]:(o.memoizedState=[s,a],s)}function O0(s,a){var o=ut();a=a===void 0?null:a;var u=o.memoizedState;if(a!==null&&Id(a,u[1]))return u[0];if(u=s(),Ps){Rn(!0);try{s()}finally{Rn(!1)}}return o.memoizedState=[u,a],u}function Wd(s,a,o){return o===void 0||(_r&1073741824)!==0?s.memoizedState=a:(s.memoizedState=o,s=Ly(),Ae.lanes|=s,qr|=s,o)}function R0(s,a,o,u){return sn(o,a)?o:Mi.current!==null?(s=Wd(s,o,u),sn(s,a)||(bt=!0),s):(_r&42)===0?(bt=!0,s.memoizedState=o):(s=Ly(),Ae.lanes|=s,qr|=s,a)}function D0(s,a,o,u,m){var x=te.p;te.p=x!==0&&8>x?x:8;var S=V.T,k={};V.T=k,nf(s,!1,a,o);try{var T=m(),H=V.S;if(H!==null&&H(k,T),T!==null&&typeof T=="object"&&typeof T.then=="function"){var G=VN(T,u);Ya(s,a,G,un(s))}else Ya(s,a,u,un(s))}catch(J){Ya(s,a,{then:function(){},status:"rejected",reason:J},un())}finally{te.p=x,V.T=S}}function KN(){}function ef(s,a,o,u){if(s.tag!==5)throw Error(r(476));var m=L0(s).queue;D0(s,m,a,de,o===null?KN:function(){return _0(s),o(u)})}function L0(s){var a=s.memoizedState;if(a!==null)return a;a={memoizedState:de,baseState:de,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:lr,lastRenderedState:de},next:null};var o={};return a.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:lr,lastRenderedState:o},next:null},s.memoizedState=a,s=s.alternate,s!==null&&(s.memoizedState=a),a}function _0(s){var a=L0(s).next.queue;Ya(s,a,{},un())}function tf(){return Pt(dl)}function z0(){return ut().memoizedState}function B0(){return ut().memoizedState}function XN(s){for(var a=s.return;a!==null;){switch(a.tag){case 24:case 3:var o=un();s=Dr(o);var u=Lr(a,s,o);u!==null&&(dn(u,a,o),Ia(u,a,o)),a={cache:Od()},s.payload=a;return}a=a.return}}function JN(s,a,o){var u=un();o={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},Po(s)?H0(a,o):(o=wd(s,a,o,u),o!==null&&(dn(o,s,u),U0(o,a,u)))}function P0(s,a,o){var u=un();Ya(s,a,o,u)}function Ya(s,a,o,u){var m={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(Po(s))H0(a,m);else{var x=s.alternate;if(s.lanes===0&&(x===null||x.lanes===0)&&(x=a.lastRenderedReducer,x!==null))try{var S=a.lastRenderedState,k=x(S,o);if(m.hasEagerState=!0,m.eagerState=k,sn(k,S))return wo(s,a,m,0),Xe===null&&vo(),!1}catch{}finally{}if(o=wd(s,a,m,u),o!==null)return dn(o,s,u),U0(o,a,u),!0}return!1}function nf(s,a,o,u){if(u={lane:2,revertLane:_f(),action:u,hasEagerState:!1,eagerState:null,next:null},Po(s)){if(a)throw Error(r(479))}else a=wd(s,o,u,2),a!==null&&dn(a,s,2)}function Po(s){var a=s.alternate;return s===Ae||a!==null&&a===Ae}function H0(s,a){Oi=Ro=!0;var o=s.pending;o===null?a.next=a:(a.next=o.next,o.next=a),s.pending=a}function U0(s,a,o){if((o&4194048)!==0){var u=a.lanes;u&=s.pendingLanes,o|=u,a.lanes=o,Km(s,o)}}var Ho={readContext:Pt,use:Lo,useCallback:lt,useContext:lt,useEffect:lt,useImperativeHandle:lt,useLayoutEffect:lt,useInsertionEffect:lt,useMemo:lt,useReducer:lt,useRef:lt,useState:lt,useDebugValue:lt,useDeferredValue:lt,useTransition:lt,useSyncExternalStore:lt,useId:lt,useHostTransitionStatus:lt,useFormState:lt,useActionState:lt,useOptimistic:lt,useMemoCache:lt,useCacheRefresh:lt},I0={readContext:Pt,use:Lo,useCallback:function(s,a){return Wt().memoizedState=[s,a===void 0?null:a],s},useContext:Pt,useEffect:C0,useImperativeHandle:function(s,a,o){o=o!=null?o.concat([s]):null,Bo(4194308,4,A0.bind(null,a,s),o)},useLayoutEffect:function(s,a){return Bo(4194308,4,s,a)},useInsertionEffect:function(s,a){Bo(4,2,s,a)},useMemo:function(s,a){var o=Wt();a=a===void 0?null:a;var u=s();if(Ps){Rn(!0);try{s()}finally{Rn(!1)}}return o.memoizedState=[u,a],u},useReducer:function(s,a,o){var u=Wt();if(o!==void 0){var m=o(a);if(Ps){Rn(!0);try{o(a)}finally{Rn(!1)}}}else m=a;return u.memoizedState=u.baseState=m,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:m},u.queue=s,s=s.dispatch=JN.bind(null,Ae,s),[u.memoizedState,s]},useRef:function(s){var a=Wt();return s={current:s},a.memoizedState=s},useState:function(s){s=Jd(s);var a=s.queue,o=P0.bind(null,Ae,a);return a.dispatch=o,[s.memoizedState,o]},useDebugValue:Zd,useDeferredValue:function(s,a){var o=Wt();return Wd(o,s,a)},useTransition:function(){var s=Jd(!1);return s=D0.bind(null,Ae,s.queue,!0,!1),Wt().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,a,o){var u=Ae,m=Wt();if(Pe){if(o===void 0)throw Error(r(407));o=o()}else{if(o=a(),Xe===null)throw Error(r(349));(_e&124)!==0||o0(u,a,o)}m.memoizedState=o;var x={value:o,getSnapshot:a};return m.queue=x,C0(u0.bind(null,u,x,s),[s]),u.flags|=2048,Di(9,zo(),c0.bind(null,u,x,o,a),null),o},useId:function(){var s=Wt(),a=Xe.identifierPrefix;if(Pe){var o=sr,u=rr;o=(u&~(1<<32-yt(u)-1)).toString(32)+o,a="«"+a+"R"+o,o=Do++,0<o&&(a+="H"+o.toString(32)),a+="»"}else o=FN++,a="«"+a+"r"+o.toString(32)+"»";return s.memoizedState=a},useHostTransitionStatus:tf,useFormState:b0,useActionState:b0,useOptimistic:function(s){var a=Wt();a.memoizedState=a.baseState=s;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=o,a=nf.bind(null,Ae,!0,o),o.dispatch=a,[s,a]},useMemoCache:Yd,useCacheRefresh:function(){return Wt().memoizedState=XN.bind(null,Ae)}},q0={readContext:Pt,use:Lo,useCallback:M0,useContext:Pt,useEffect:E0,useImperativeHandle:T0,useInsertionEffect:k0,useLayoutEffect:j0,useMemo:O0,useReducer:_o,useRef:N0,useState:function(){return _o(lr)},useDebugValue:Zd,useDeferredValue:function(s,a){var o=ut();return R0(o,Ve.memoizedState,s,a)},useTransition:function(){var s=_o(lr)[0],a=ut().memoizedState;return[typeof s=="boolean"?s:$a(s),a]},useSyncExternalStore:l0,useId:z0,useHostTransitionStatus:tf,useFormState:v0,useActionState:v0,useOptimistic:function(s,a){var o=ut();return h0(o,Ve,s,a)},useMemoCache:Yd,useCacheRefresh:B0},QN={readContext:Pt,use:Lo,useCallback:M0,useContext:Pt,useEffect:E0,useImperativeHandle:T0,useInsertionEffect:k0,useLayoutEffect:j0,useMemo:O0,useReducer:Xd,useRef:N0,useState:function(){return Xd(lr)},useDebugValue:Zd,useDeferredValue:function(s,a){var o=ut();return Ve===null?Wd(o,s,a):R0(o,Ve.memoizedState,s,a)},useTransition:function(){var s=Xd(lr)[0],a=ut().memoizedState;return[typeof s=="boolean"?s:$a(s),a]},useSyncExternalStore:l0,useId:z0,useHostTransitionStatus:tf,useFormState:S0,useActionState:S0,useOptimistic:function(s,a){var o=ut();return Ve!==null?h0(o,Ve,s,a):(o.baseState=s,[s,o.queue.dispatch])},useMemoCache:Yd,useCacheRefresh:B0},Li=null,Ka=0;function Uo(s){var a=Ka;return Ka+=1,Li===null&&(Li=[]),Wg(Li,s,a)}function Xa(s,a){a=a.props.ref,s.ref=a!==void 0?a:null}function Io(s,a){throw a.$$typeof===y?Error(r(525)):(s=Object.prototype.toString.call(a),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s)))}function V0(s){var a=s._init;return a(s._payload)}function F0(s){function a(z,D){if(s){var P=z.deletions;P===null?(z.deletions=[D],z.flags|=16):P.push(D)}}function o(z,D){if(!s)return null;for(;D!==null;)a(z,D),D=D.sibling;return null}function u(z){for(var D=new Map;z!==null;)z.key!==null?D.set(z.key,z):D.set(z.index,z),z=z.sibling;return D}function m(z,D){return z=nr(z,D),z.index=0,z.sibling=null,z}function x(z,D,P){return z.index=P,s?(P=z.alternate,P!==null?(P=P.index,P<D?(z.flags|=67108866,D):P):(z.flags|=67108866,D)):(z.flags|=1048576,D)}function S(z){return s&&z.alternate===null&&(z.flags|=67108866),z}function k(z,D,P,X){return D===null||D.tag!==6?(D=Nd(P,z.mode,X),D.return=z,D):(D=m(D,P),D.return=z,D)}function T(z,D,P,X){var oe=P.type;return oe===w?G(z,D,P.props.children,X,P.key):D!==null&&(D.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===_&&V0(oe)===D.type)?(D=m(D,P.props),Xa(D,P),D.return=z,D):(D=No(P.type,P.key,P.props,null,z.mode,X),Xa(D,P),D.return=z,D)}function H(z,D,P,X){return D===null||D.tag!==4||D.stateNode.containerInfo!==P.containerInfo||D.stateNode.implementation!==P.implementation?(D=Cd(P,z.mode,X),D.return=z,D):(D=m(D,P.children||[]),D.return=z,D)}function G(z,D,P,X,oe){return D===null||D.tag!==7?(D=Ms(P,z.mode,X,oe),D.return=z,D):(D=m(D,P),D.return=z,D)}function J(z,D,P){if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return D=Nd(""+D,z.mode,P),D.return=z,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case b:return P=No(D.type,D.key,D.props,null,z.mode,P),Xa(P,D),P.return=z,P;case v:return D=Cd(D,z.mode,P),D.return=z,D;case _:var X=D._init;return D=X(D._payload),J(z,D,P)}if(Oe(D)||se(D))return D=Ms(D,z.mode,P,null),D.return=z,D;if(typeof D.then=="function")return J(z,Uo(D),P);if(D.$$typeof===M)return J(z,jo(z,D),P);Io(z,D)}return null}function I(z,D,P,X){var oe=D!==null?D.key:null;if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return oe!==null?null:k(z,D,""+P,X);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case b:return P.key===oe?T(z,D,P,X):null;case v:return P.key===oe?H(z,D,P,X):null;case _:return oe=P._init,P=oe(P._payload),I(z,D,P,X)}if(Oe(P)||se(P))return oe!==null?null:G(z,D,P,X,null);if(typeof P.then=="function")return I(z,D,Uo(P),X);if(P.$$typeof===M)return I(z,D,jo(z,P),X);Io(z,P)}return null}function q(z,D,P,X,oe){if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return z=z.get(P)||null,k(D,z,""+X,oe);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case b:return z=z.get(X.key===null?P:X.key)||null,T(D,z,X,oe);case v:return z=z.get(X.key===null?P:X.key)||null,H(D,z,X,oe);case _:var Me=X._init;return X=Me(X._payload),q(z,D,P,X,oe)}if(Oe(X)||se(X))return z=z.get(P)||null,G(D,z,X,oe,null);if(typeof X.then=="function")return q(z,D,P,Uo(X),oe);if(X.$$typeof===M)return q(z,D,P,jo(D,X),oe);Io(D,X)}return null}function be(z,D,P,X){for(var oe=null,Me=null,fe=D,xe=D=0,wt=null;fe!==null&&xe<P.length;xe++){fe.index>xe?(wt=fe,fe=null):wt=fe.sibling;var ze=I(z,fe,P[xe],X);if(ze===null){fe===null&&(fe=wt);break}s&&fe&&ze.alternate===null&&a(z,fe),D=x(ze,D,xe),Me===null?oe=ze:Me.sibling=ze,Me=ze,fe=wt}if(xe===P.length)return o(z,fe),Pe&&Rs(z,xe),oe;if(fe===null){for(;xe<P.length;xe++)fe=J(z,P[xe],X),fe!==null&&(D=x(fe,D,xe),Me===null?oe=fe:Me.sibling=fe,Me=fe);return Pe&&Rs(z,xe),oe}for(fe=u(fe);xe<P.length;xe++)wt=q(fe,z,xe,P[xe],X),wt!==null&&(s&&wt.alternate!==null&&fe.delete(wt.key===null?xe:wt.key),D=x(wt,D,xe),Me===null?oe=wt:Me.sibling=wt,Me=wt);return s&&fe.forEach(function(Qr){return a(z,Qr)}),Pe&&Rs(z,xe),oe}function ge(z,D,P,X){if(P==null)throw Error(r(151));for(var oe=null,Me=null,fe=D,xe=D=0,wt=null,ze=P.next();fe!==null&&!ze.done;xe++,ze=P.next()){fe.index>xe?(wt=fe,fe=null):wt=fe.sibling;var Qr=I(z,fe,ze.value,X);if(Qr===null){fe===null&&(fe=wt);break}s&&fe&&Qr.alternate===null&&a(z,fe),D=x(Qr,D,xe),Me===null?oe=Qr:Me.sibling=Qr,Me=Qr,fe=wt}if(ze.done)return o(z,fe),Pe&&Rs(z,xe),oe;if(fe===null){for(;!ze.done;xe++,ze=P.next())ze=J(z,ze.value,X),ze!==null&&(D=x(ze,D,xe),Me===null?oe=ze:Me.sibling=ze,Me=ze);return Pe&&Rs(z,xe),oe}for(fe=u(fe);!ze.done;xe++,ze=P.next())ze=q(fe,z,xe,ze.value,X),ze!==null&&(s&&ze.alternate!==null&&fe.delete(ze.key===null?xe:ze.key),D=x(ze,D,xe),Me===null?oe=ze:Me.sibling=ze,Me=ze);return s&&fe.forEach(function(Z2){return a(z,Z2)}),Pe&&Rs(z,xe),oe}function $e(z,D,P,X){if(typeof P=="object"&&P!==null&&P.type===w&&P.key===null&&(P=P.props.children),typeof P=="object"&&P!==null){switch(P.$$typeof){case b:e:{for(var oe=P.key;D!==null;){if(D.key===oe){if(oe=P.type,oe===w){if(D.tag===7){o(z,D.sibling),X=m(D,P.props.children),X.return=z,z=X;break e}}else if(D.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===_&&V0(oe)===D.type){o(z,D.sibling),X=m(D,P.props),Xa(X,P),X.return=z,z=X;break e}o(z,D);break}else a(z,D);D=D.sibling}P.type===w?(X=Ms(P.props.children,z.mode,X,P.key),X.return=z,z=X):(X=No(P.type,P.key,P.props,null,z.mode,X),Xa(X,P),X.return=z,z=X)}return S(z);case v:e:{for(oe=P.key;D!==null;){if(D.key===oe)if(D.tag===4&&D.stateNode.containerInfo===P.containerInfo&&D.stateNode.implementation===P.implementation){o(z,D.sibling),X=m(D,P.children||[]),X.return=z,z=X;break e}else{o(z,D);break}else a(z,D);D=D.sibling}X=Cd(P,z.mode,X),X.return=z,z=X}return S(z);case _:return oe=P._init,P=oe(P._payload),$e(z,D,P,X)}if(Oe(P))return be(z,D,P,X);if(se(P)){if(oe=se(P),typeof oe!="function")throw Error(r(150));return P=oe.call(P),ge(z,D,P,X)}if(typeof P.then=="function")return $e(z,D,Uo(P),X);if(P.$$typeof===M)return $e(z,D,jo(z,P),X);Io(z,P)}return typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint"?(P=""+P,D!==null&&D.tag===6?(o(z,D.sibling),X=m(D,P),X.return=z,z=X):(o(z,D),X=Nd(P,z.mode,X),X.return=z,z=X),S(z)):o(z,D)}return function(z,D,P,X){try{Ka=0;var oe=$e(z,D,P,X);return Li=null,oe}catch(fe){if(fe===Ha||fe===To)throw fe;var Me=an(29,fe,null,z.mode);return Me.lanes=X,Me.return=z,Me}finally{}}}var _i=F0(!0),$0=F0(!1),Nn=U(null),Vn=null;function zr(s){var a=s.alternate;K(pt,pt.current&1),K(Nn,s),Vn===null&&(a===null||Mi.current!==null||a.memoizedState!==null)&&(Vn=s)}function G0(s){if(s.tag===22){if(K(pt,pt.current),K(Nn,s),Vn===null){var a=s.alternate;a!==null&&a.memoizedState!==null&&(Vn=s)}}else Br()}function Br(){K(pt,pt.current),K(Nn,Nn.current)}function or(s){ne(Nn),Vn===s&&(Vn=null),ne(pt)}var pt=U(0);function qo(s){for(var a=s;a!==null;){if(a.tag===13){var o=a.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||Yf(o)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function rf(s,a,o,u){a=s.memoizedState,o=o(u,a),o=o==null?a:g({},a,o),s.memoizedState=o,s.lanes===0&&(s.updateQueue.baseState=o)}var sf={enqueueSetState:function(s,a,o){s=s._reactInternals;var u=un(),m=Dr(u);m.payload=a,o!=null&&(m.callback=o),a=Lr(s,m,u),a!==null&&(dn(a,s,u),Ia(a,s,u))},enqueueReplaceState:function(s,a,o){s=s._reactInternals;var u=un(),m=Dr(u);m.tag=1,m.payload=a,o!=null&&(m.callback=o),a=Lr(s,m,u),a!==null&&(dn(a,s,u),Ia(a,s,u))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var o=un(),u=Dr(o);u.tag=2,a!=null&&(u.callback=a),a=Lr(s,u,o),a!==null&&(dn(a,s,o),Ia(a,s,o))}};function Y0(s,a,o,u,m,x,S){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(u,x,S):a.prototype&&a.prototype.isPureReactComponent?!Oa(o,u)||!Oa(m,x):!0}function K0(s,a,o,u){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(o,u),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(o,u),a.state!==s&&sf.enqueueReplaceState(a,a.state,null)}function Hs(s,a){var o=a;if("ref"in a){o={};for(var u in a)u!=="ref"&&(o[u]=a[u])}if(s=s.defaultProps){o===a&&(o=g({},o));for(var m in s)o[m]===void 0&&(o[m]=s[m])}return o}var Vo=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function X0(s){Vo(s)}function J0(s){console.error(s)}function Q0(s){Vo(s)}function Fo(s,a){try{var o=s.onUncaughtError;o(a.value,{componentStack:a.stack})}catch(u){setTimeout(function(){throw u})}}function Z0(s,a,o){try{var u=s.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function af(s,a,o){return o=Dr(o),o.tag=3,o.payload={element:null},o.callback=function(){Fo(s,a)},o}function W0(s){return s=Dr(s),s.tag=3,s}function ey(s,a,o,u){var m=o.type.getDerivedStateFromError;if(typeof m=="function"){var x=u.value;s.payload=function(){return m(x)},s.callback=function(){Z0(a,o,u)}}var S=o.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(s.callback=function(){Z0(a,o,u),typeof m!="function"&&(Vr===null?Vr=new Set([this]):Vr.add(this));var k=u.stack;this.componentDidCatch(u.value,{componentStack:k!==null?k:""})})}function ZN(s,a,o,u,m){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(a=o.alternate,a!==null&&za(a,o,m,!0),o=Nn.current,o!==null){switch(o.tag){case 13:return Vn===null?Mf():o.alternate===null&&st===0&&(st=3),o.flags&=-257,o.flags|=65536,o.lanes=m,u===Ld?o.flags|=16384:(a=o.updateQueue,a===null?o.updateQueue=new Set([u]):a.add(u),Rf(s,u,m)),!1;case 22:return o.flags|=65536,u===Ld?o.flags|=16384:(a=o.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=a):(o=a.retryQueue,o===null?a.retryQueue=new Set([u]):o.add(u)),Rf(s,u,m)),!1}throw Error(r(435,o.tag))}return Rf(s,u,m),Mf(),!1}if(Pe)return a=Nn.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=m,u!==jd&&(s=Error(r(422),{cause:u}),_a(bn(s,o)))):(u!==jd&&(a=Error(r(423),{cause:u}),_a(bn(a,o))),s=s.current.alternate,s.flags|=65536,m&=-m,s.lanes|=m,u=bn(u,o),m=af(s.stateNode,u,m),Bd(s,m),st!==4&&(st=2)),!1;var x=Error(r(520),{cause:u});if(x=bn(x,o),nl===null?nl=[x]:nl.push(x),st!==4&&(st=2),a===null)return!0;u=bn(u,o),o=a;do{switch(o.tag){case 3:return o.flags|=65536,s=m&-m,o.lanes|=s,s=af(o.stateNode,u,s),Bd(o,s),!1;case 1:if(a=o.type,x=o.stateNode,(o.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Vr===null||!Vr.has(x))))return o.flags|=65536,m&=-m,o.lanes|=m,m=W0(m),ey(m,s,o,u),Bd(o,m),!1}o=o.return}while(o!==null);return!1}var ty=Error(r(461)),bt=!1;function Tt(s,a,o,u){a.child=s===null?$0(a,null,o,u):_i(a,s.child,o,u)}function ny(s,a,o,u,m){o=o.render;var x=a.ref;if("ref"in u){var S={};for(var k in u)k!=="ref"&&(S[k]=u[k])}else S=u;return zs(a),u=qd(s,a,o,S,x,m),k=Vd(),s!==null&&!bt?(Fd(s,a,m),cr(s,a,m)):(Pe&&k&&Ed(a),a.flags|=1,Tt(s,a,u,m),a.child)}function ry(s,a,o,u,m){if(s===null){var x=o.type;return typeof x=="function"&&!Sd(x)&&x.defaultProps===void 0&&o.compare===null?(a.tag=15,a.type=x,sy(s,a,x,u,m)):(s=No(o.type,null,u,a,a.mode,m),s.ref=a.ref,s.return=a,a.child=s)}if(x=s.child,!pf(s,m)){var S=x.memoizedProps;if(o=o.compare,o=o!==null?o:Oa,o(S,u)&&s.ref===a.ref)return cr(s,a,m)}return a.flags|=1,s=nr(x,u),s.ref=a.ref,s.return=a,a.child=s}function sy(s,a,o,u,m){if(s!==null){var x=s.memoizedProps;if(Oa(x,u)&&s.ref===a.ref)if(bt=!1,a.pendingProps=u=x,pf(s,m))(s.flags&131072)!==0&&(bt=!0);else return a.lanes=s.lanes,cr(s,a,m)}return lf(s,a,o,u,m)}function iy(s,a,o){var u=a.pendingProps,m=u.children,x=s!==null?s.memoizedState:null;if(u.mode==="hidden"){if((a.flags&128)!==0){if(u=x!==null?x.baseLanes|o:o,s!==null){for(m=a.child=s.child,x=0;m!==null;)x=x|m.lanes|m.childLanes,m=m.sibling;a.childLanes=x&~u}else a.childLanes=0,a.child=null;return ay(s,a,u,o)}if((o&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},s!==null&&Ao(a,x!==null?x.cachePool:null),x!==null?s0(a,x):Hd(),G0(a);else return a.lanes=a.childLanes=536870912,ay(s,a,x!==null?x.baseLanes|o:o,o)}else x!==null?(Ao(a,x.cachePool),s0(a,x),Br(),a.memoizedState=null):(s!==null&&Ao(a,null),Hd(),Br());return Tt(s,a,m,o),a.child}function ay(s,a,o,u){var m=Dd();return m=m===null?null:{parent:ht._currentValue,pool:m},a.memoizedState={baseLanes:o,cachePool:m},s!==null&&Ao(a,null),Hd(),G0(a),s!==null&&za(s,a,u,!0),null}function $o(s,a){var o=a.ref;if(o===null)s!==null&&s.ref!==null&&(a.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(s===null||s.ref!==o)&&(a.flags|=4194816)}}function lf(s,a,o,u,m){return zs(a),o=qd(s,a,o,u,void 0,m),u=Vd(),s!==null&&!bt?(Fd(s,a,m),cr(s,a,m)):(Pe&&u&&Ed(a),a.flags|=1,Tt(s,a,o,m),a.child)}function ly(s,a,o,u,m,x){return zs(a),a.updateQueue=null,o=a0(a,u,o,m),i0(s),u=Vd(),s!==null&&!bt?(Fd(s,a,x),cr(s,a,x)):(Pe&&u&&Ed(a),a.flags|=1,Tt(s,a,o,x),a.child)}function oy(s,a,o,u,m){if(zs(a),a.stateNode===null){var x=Ei,S=o.contextType;typeof S=="object"&&S!==null&&(x=Pt(S)),x=new o(u,x),a.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=sf,a.stateNode=x,x._reactInternals=a,x=a.stateNode,x.props=u,x.state=a.memoizedState,x.refs={},_d(a),S=o.contextType,x.context=typeof S=="object"&&S!==null?Pt(S):Ei,x.state=a.memoizedState,S=o.getDerivedStateFromProps,typeof S=="function"&&(rf(a,o,S,u),x.state=a.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(S=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),S!==x.state&&sf.enqueueReplaceState(x,x.state,null),Va(a,u,x,m),qa(),x.state=a.memoizedState),typeof x.componentDidMount=="function"&&(a.flags|=4194308),u=!0}else if(s===null){x=a.stateNode;var k=a.memoizedProps,T=Hs(o,k);x.props=T;var H=x.context,G=o.contextType;S=Ei,typeof G=="object"&&G!==null&&(S=Pt(G));var J=o.getDerivedStateFromProps;G=typeof J=="function"||typeof x.getSnapshotBeforeUpdate=="function",k=a.pendingProps!==k,G||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(k||H!==S)&&K0(a,x,u,S),Rr=!1;var I=a.memoizedState;x.state=I,Va(a,u,x,m),qa(),H=a.memoizedState,k||I!==H||Rr?(typeof J=="function"&&(rf(a,o,J,u),H=a.memoizedState),(T=Rr||Y0(a,o,T,u,I,H,S))?(G||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(a.flags|=4194308)):(typeof x.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=u,a.memoizedState=H),x.props=u,x.state=H,x.context=S,u=T):(typeof x.componentDidMount=="function"&&(a.flags|=4194308),u=!1)}else{x=a.stateNode,zd(s,a),S=a.memoizedProps,G=Hs(o,S),x.props=G,J=a.pendingProps,I=x.context,H=o.contextType,T=Ei,typeof H=="object"&&H!==null&&(T=Pt(H)),k=o.getDerivedStateFromProps,(H=typeof k=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(S!==J||I!==T)&&K0(a,x,u,T),Rr=!1,I=a.memoizedState,x.state=I,Va(a,u,x,m),qa();var q=a.memoizedState;S!==J||I!==q||Rr||s!==null&&s.dependencies!==null&&ko(s.dependencies)?(typeof k=="function"&&(rf(a,o,k,u),q=a.memoizedState),(G=Rr||Y0(a,o,G,u,I,q,T)||s!==null&&s.dependencies!==null&&ko(s.dependencies))?(H||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(u,q,T),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(u,q,T)),typeof x.componentDidUpdate=="function"&&(a.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof x.componentDidUpdate!="function"||S===s.memoizedProps&&I===s.memoizedState||(a.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||S===s.memoizedProps&&I===s.memoizedState||(a.flags|=1024),a.memoizedProps=u,a.memoizedState=q),x.props=u,x.state=q,x.context=T,u=G):(typeof x.componentDidUpdate!="function"||S===s.memoizedProps&&I===s.memoizedState||(a.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||S===s.memoizedProps&&I===s.memoizedState||(a.flags|=1024),u=!1)}return x=u,$o(s,a),u=(a.flags&128)!==0,x||u?(x=a.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:x.render(),a.flags|=1,s!==null&&u?(a.child=_i(a,s.child,null,m),a.child=_i(a,null,o,m)):Tt(s,a,o,m),a.memoizedState=x.state,s=a.child):s=cr(s,a,m),s}function cy(s,a,o,u){return La(),a.flags|=256,Tt(s,a,o,u),a.child}var of={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function cf(s){return{baseLanes:s,cachePool:Jg()}}function uf(s,a,o){return s=s!==null?s.childLanes&~o:0,a&&(s|=Cn),s}function uy(s,a,o){var u=a.pendingProps,m=!1,x=(a.flags&128)!==0,S;if((S=x)||(S=s!==null&&s.memoizedState===null?!1:(pt.current&2)!==0),S&&(m=!0,a.flags&=-129),S=(a.flags&32)!==0,a.flags&=-33,s===null){if(Pe){if(m?zr(a):Br(),Pe){var k=rt,T;if(T=k){e:{for(T=k,k=qn;T.nodeType!==8;){if(!k){k=null;break e}if(T=_n(T.nextSibling),T===null){k=null;break e}}k=T}k!==null?(a.memoizedState={dehydrated:k,treeContext:Os!==null?{id:rr,overflow:sr}:null,retryLane:536870912,hydrationErrors:null},T=an(18,null,null,0),T.stateNode=k,T.return=a,a.child=T,Ft=a,rt=null,T=!0):T=!1}T||Ls(a)}if(k=a.memoizedState,k!==null&&(k=k.dehydrated,k!==null))return Yf(k)?a.lanes=32:a.lanes=536870912,null;or(a)}return k=u.children,u=u.fallback,m?(Br(),m=a.mode,k=Go({mode:"hidden",children:k},m),u=Ms(u,m,o,null),k.return=a,u.return=a,k.sibling=u,a.child=k,m=a.child,m.memoizedState=cf(o),m.childLanes=uf(s,S,o),a.memoizedState=of,u):(zr(a),df(a,k))}if(T=s.memoizedState,T!==null&&(k=T.dehydrated,k!==null)){if(x)a.flags&256?(zr(a),a.flags&=-257,a=ff(s,a,o)):a.memoizedState!==null?(Br(),a.child=s.child,a.flags|=128,a=null):(Br(),m=u.fallback,k=a.mode,u=Go({mode:"visible",children:u.children},k),m=Ms(m,k,o,null),m.flags|=2,u.return=a,m.return=a,u.sibling=m,a.child=u,_i(a,s.child,null,o),u=a.child,u.memoizedState=cf(o),u.childLanes=uf(s,S,o),a.memoizedState=of,a=m);else if(zr(a),Yf(k)){if(S=k.nextSibling&&k.nextSibling.dataset,S)var H=S.dgst;S=H,u=Error(r(419)),u.stack="",u.digest=S,_a({value:u,source:null,stack:null}),a=ff(s,a,o)}else if(bt||za(s,a,o,!1),S=(o&s.childLanes)!==0,bt||S){if(S=Xe,S!==null&&(u=o&-o,u=(u&42)!==0?1:Yu(u),u=(u&(S.suspendedLanes|o))!==0?0:u,u!==0&&u!==T.retryLane))throw T.retryLane=u,Ci(s,u),dn(S,s,u),ty;k.data==="$?"||Mf(),a=ff(s,a,o)}else k.data==="$?"?(a.flags|=192,a.child=s.child,a=null):(s=T.treeContext,rt=_n(k.nextSibling),Ft=a,Pe=!0,Ds=null,qn=!1,s!==null&&(wn[Sn++]=rr,wn[Sn++]=sr,wn[Sn++]=Os,rr=s.id,sr=s.overflow,Os=a),a=df(a,u.children),a.flags|=4096);return a}return m?(Br(),m=u.fallback,k=a.mode,T=s.child,H=T.sibling,u=nr(T,{mode:"hidden",children:u.children}),u.subtreeFlags=T.subtreeFlags&65011712,H!==null?m=nr(H,m):(m=Ms(m,k,o,null),m.flags|=2),m.return=a,u.return=a,u.sibling=m,a.child=u,u=m,m=a.child,k=s.child.memoizedState,k===null?k=cf(o):(T=k.cachePool,T!==null?(H=ht._currentValue,T=T.parent!==H?{parent:H,pool:H}:T):T=Jg(),k={baseLanes:k.baseLanes|o,cachePool:T}),m.memoizedState=k,m.childLanes=uf(s,S,o),a.memoizedState=of,u):(zr(a),o=s.child,s=o.sibling,o=nr(o,{mode:"visible",children:u.children}),o.return=a,o.sibling=null,s!==null&&(S=a.deletions,S===null?(a.deletions=[s],a.flags|=16):S.push(s)),a.child=o,a.memoizedState=null,o)}function df(s,a){return a=Go({mode:"visible",children:a},s.mode),a.return=s,s.child=a}function Go(s,a){return s=an(22,s,null,a),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function ff(s,a,o){return _i(a,s.child,null,o),s=df(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function dy(s,a,o){s.lanes|=a;var u=s.alternate;u!==null&&(u.lanes|=a),Td(s.return,a,o)}function hf(s,a,o,u,m){var x=s.memoizedState;x===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:m}:(x.isBackwards=a,x.rendering=null,x.renderingStartTime=0,x.last=u,x.tail=o,x.tailMode=m)}function fy(s,a,o){var u=a.pendingProps,m=u.revealOrder,x=u.tail;if(Tt(s,a,u.children,o),u=pt.current,(u&2)!==0)u=u&1|2,a.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&dy(s,o,a);else if(s.tag===19)dy(s,o,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}u&=1}switch(K(pt,u),m){case"forwards":for(o=a.child,m=null;o!==null;)s=o.alternate,s!==null&&qo(s)===null&&(m=o),o=o.sibling;o=m,o===null?(m=a.child,a.child=null):(m=o.sibling,o.sibling=null),hf(a,!1,m,o,x);break;case"backwards":for(o=null,m=a.child,a.child=null;m!==null;){if(s=m.alternate,s!==null&&qo(s)===null){a.child=m;break}s=m.sibling,m.sibling=o,o=m,m=s}hf(a,!0,o,null,x);break;case"together":hf(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function cr(s,a,o){if(s!==null&&(a.dependencies=s.dependencies),qr|=a.lanes,(o&a.childLanes)===0)if(s!==null){if(za(s,a,o,!1),(o&a.childLanes)===0)return null}else return null;if(s!==null&&a.child!==s.child)throw Error(r(153));if(a.child!==null){for(s=a.child,o=nr(s,s.pendingProps),a.child=o,o.return=a;s.sibling!==null;)s=s.sibling,o=o.sibling=nr(s,s.pendingProps),o.return=a;o.sibling=null}return a.child}function pf(s,a){return(s.lanes&a)!==0?!0:(s=s.dependencies,!!(s!==null&&ko(s)))}function WN(s,a,o){switch(a.tag){case 3:qe(a,a.stateNode.containerInfo),Or(a,ht,s.memoizedState.cache),La();break;case 27:case 5:Wn(a);break;case 4:qe(a,a.stateNode.containerInfo);break;case 10:Or(a,a.type,a.memoizedProps.value);break;case 13:var u=a.memoizedState;if(u!==null)return u.dehydrated!==null?(zr(a),a.flags|=128,null):(o&a.child.childLanes)!==0?uy(s,a,o):(zr(a),s=cr(s,a,o),s!==null?s.sibling:null);zr(a);break;case 19:var m=(s.flags&128)!==0;if(u=(o&a.childLanes)!==0,u||(za(s,a,o,!1),u=(o&a.childLanes)!==0),m){if(u)return fy(s,a,o);a.flags|=128}if(m=a.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),K(pt,pt.current),u)break;return null;case 22:case 23:return a.lanes=0,iy(s,a,o);case 24:Or(a,ht,s.memoizedState.cache)}return cr(s,a,o)}function hy(s,a,o){if(s!==null)if(s.memoizedProps!==a.pendingProps)bt=!0;else{if(!pf(s,o)&&(a.flags&128)===0)return bt=!1,WN(s,a,o);bt=(s.flags&131072)!==0}else bt=!1,Pe&&(a.flags&1048576)!==0&&Vg(a,Eo,a.index);switch(a.lanes=0,a.tag){case 16:e:{s=a.pendingProps;var u=a.elementType,m=u._init;if(u=m(u._payload),a.type=u,typeof u=="function")Sd(u)?(s=Hs(u,s),a.tag=1,a=oy(null,a,u,s,o)):(a.tag=0,a=lf(null,a,u,s,o));else{if(u!=null){if(m=u.$$typeof,m===A){a.tag=11,a=ny(null,a,u,s,o);break e}else if(m===F){a.tag=14,a=ry(null,a,u,s,o);break e}}throw a=Ge(u)||u,Error(r(306,a,""))}}return a;case 0:return lf(s,a,a.type,a.pendingProps,o);case 1:return u=a.type,m=Hs(u,a.pendingProps),oy(s,a,u,m,o);case 3:e:{if(qe(a,a.stateNode.containerInfo),s===null)throw Error(r(387));u=a.pendingProps;var x=a.memoizedState;m=x.element,zd(s,a),Va(a,u,null,o);var S=a.memoizedState;if(u=S.cache,Or(a,ht,u),u!==x.cache&&Md(a,[ht],o,!0),qa(),u=S.element,x.isDehydrated)if(x={element:u,isDehydrated:!1,cache:S.cache},a.updateQueue.baseState=x,a.memoizedState=x,a.flags&256){a=cy(s,a,u,o);break e}else if(u!==m){m=bn(Error(r(424)),a),_a(m),a=cy(s,a,u,o);break e}else{switch(s=a.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(rt=_n(s.firstChild),Ft=a,Pe=!0,Ds=null,qn=!0,o=$0(a,null,u,o),a.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(La(),u===m){a=cr(s,a,o);break e}Tt(s,a,u,o)}a=a.child}return a;case 26:return $o(s,a),s===null?(o=yx(a.type,null,a.pendingProps,null))?a.memoizedState=o:Pe||(o=a.type,s=a.pendingProps,u=ac(ie.current).createElement(o),u[Bt]=a,u[Qt]=s,Ot(u,o,s),xt(u),a.stateNode=u):a.memoizedState=yx(a.type,s.memoizedProps,a.pendingProps,s.memoizedState),null;case 27:return Wn(a),s===null&&Pe&&(u=a.stateNode=px(a.type,a.pendingProps,ie.current),Ft=a,qn=!0,m=rt,Gr(a.type)?(Kf=m,rt=_n(u.firstChild)):rt=m),Tt(s,a,a.pendingProps.children,o),$o(s,a),s===null&&(a.flags|=4194304),a.child;case 5:return s===null&&Pe&&((m=u=rt)&&(u=j2(u,a.type,a.pendingProps,qn),u!==null?(a.stateNode=u,Ft=a,rt=_n(u.firstChild),qn=!1,m=!0):m=!1),m||Ls(a)),Wn(a),m=a.type,x=a.pendingProps,S=s!==null?s.memoizedProps:null,u=x.children,Ff(m,x)?u=null:S!==null&&Ff(m,S)&&(a.flags|=32),a.memoizedState!==null&&(m=qd(s,a,$N,null,null,o),dl._currentValue=m),$o(s,a),Tt(s,a,u,o),a.child;case 6:return s===null&&Pe&&((s=o=rt)&&(o=A2(o,a.pendingProps,qn),o!==null?(a.stateNode=o,Ft=a,rt=null,s=!0):s=!1),s||Ls(a)),null;case 13:return uy(s,a,o);case 4:return qe(a,a.stateNode.containerInfo),u=a.pendingProps,s===null?a.child=_i(a,null,u,o):Tt(s,a,u,o),a.child;case 11:return ny(s,a,a.type,a.pendingProps,o);case 7:return Tt(s,a,a.pendingProps,o),a.child;case 8:return Tt(s,a,a.pendingProps.children,o),a.child;case 12:return Tt(s,a,a.pendingProps.children,o),a.child;case 10:return u=a.pendingProps,Or(a,a.type,u.value),Tt(s,a,u.children,o),a.child;case 9:return m=a.type._context,u=a.pendingProps.children,zs(a),m=Pt(m),u=u(m),a.flags|=1,Tt(s,a,u,o),a.child;case 14:return ry(s,a,a.type,a.pendingProps,o);case 15:return sy(s,a,a.type,a.pendingProps,o);case 19:return fy(s,a,o);case 31:return u=a.pendingProps,o=a.mode,u={mode:u.mode,children:u.children},s===null?(o=Go(u,o),o.ref=a.ref,a.child=o,o.return=a,a=o):(o=nr(s.child,u),o.ref=a.ref,a.child=o,o.return=a,a=o),a;case 22:return iy(s,a,o);case 24:return zs(a),u=Pt(ht),s===null?(m=Dd(),m===null&&(m=Xe,x=Od(),m.pooledCache=x,x.refCount++,x!==null&&(m.pooledCacheLanes|=o),m=x),a.memoizedState={parent:u,cache:m},_d(a),Or(a,ht,m)):((s.lanes&o)!==0&&(zd(s,a),Va(a,null,null,o),qa()),m=s.memoizedState,x=a.memoizedState,m.parent!==u?(m={parent:u,cache:u},a.memoizedState=m,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=m),Or(a,ht,u)):(u=x.cache,Or(a,ht,u),u!==m.cache&&Md(a,[ht],o,!0))),Tt(s,a,a.pendingProps.children,o),a.child;case 29:throw a.pendingProps}throw Error(r(156,a.tag))}function ur(s){s.flags|=4}function py(s,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!Sx(a)){if(a=Nn.current,a!==null&&((_e&4194048)===_e?Vn!==null:(_e&62914560)!==_e&&(_e&536870912)===0||a!==Vn))throw Ua=Ld,Qg;s.flags|=8192}}function Yo(s,a){a!==null&&(s.flags|=4),s.flags&16384&&(a=s.tag!==22?Gm():536870912,s.lanes|=a,Hi|=a)}function Ja(s,a){if(!Pe)switch(s.tailMode){case"hidden":a=s.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?s.tail=null:o.sibling=null;break;case"collapsed":o=s.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:u.sibling=null}}function tt(s){var a=s.alternate!==null&&s.alternate.child===s.child,o=0,u=0;if(a)for(var m=s.child;m!==null;)o|=m.lanes|m.childLanes,u|=m.subtreeFlags&65011712,u|=m.flags&65011712,m.return=s,m=m.sibling;else for(m=s.child;m!==null;)o|=m.lanes|m.childLanes,u|=m.subtreeFlags,u|=m.flags,m.return=s,m=m.sibling;return s.subtreeFlags|=u,s.childLanes=o,a}function e2(s,a,o){var u=a.pendingProps;switch(kd(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tt(a),null;case 1:return tt(a),null;case 3:return o=a.stateNode,u=null,s!==null&&(u=s.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),ar(ht),Jt(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(s===null||s.child===null)&&(Da(a)?ur(a):s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Gg())),tt(a),null;case 26:return o=a.memoizedState,s===null?(ur(a),o!==null?(tt(a),py(a,o)):(tt(a),a.flags&=-16777217)):o?o!==s.memoizedState?(ur(a),tt(a),py(a,o)):(tt(a),a.flags&=-16777217):(s.memoizedProps!==u&&ur(a),tt(a),a.flags&=-16777217),null;case 27:gn(a),o=ie.current;var m=a.type;if(s!==null&&a.stateNode!=null)s.memoizedProps!==u&&ur(a);else{if(!u){if(a.stateNode===null)throw Error(r(166));return tt(a),null}s=Z.current,Da(a)?Fg(a):(s=px(m,u,o),a.stateNode=s,ur(a))}return tt(a),null;case 5:if(gn(a),o=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==u&&ur(a);else{if(!u){if(a.stateNode===null)throw Error(r(166));return tt(a),null}if(s=Z.current,Da(a))Fg(a);else{switch(m=ac(ie.current),s){case 1:s=m.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:s=m.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":s=m.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":s=m.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":s=m.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof u.is=="string"?m.createElement("select",{is:u.is}):m.createElement("select"),u.multiple?s.multiple=!0:u.size&&(s.size=u.size);break;default:s=typeof u.is=="string"?m.createElement(o,{is:u.is}):m.createElement(o)}}s[Bt]=a,s[Qt]=u;e:for(m=a.child;m!==null;){if(m.tag===5||m.tag===6)s.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===a)break e;for(;m.sibling===null;){if(m.return===null||m.return===a)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}a.stateNode=s;e:switch(Ot(s,o,u),o){case"button":case"input":case"select":case"textarea":s=!!u.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&ur(a)}}return tt(a),a.flags&=-16777217,null;case 6:if(s&&a.stateNode!=null)s.memoizedProps!==u&&ur(a);else{if(typeof u!="string"&&a.stateNode===null)throw Error(r(166));if(s=ie.current,Da(a)){if(s=a.stateNode,o=a.memoizedProps,u=null,m=Ft,m!==null)switch(m.tag){case 27:case 5:u=m.memoizedProps}s[Bt]=a,s=!!(s.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||lx(s.nodeValue,o)),s||Ls(a)}else s=ac(s).createTextNode(u),s[Bt]=a,a.stateNode=s}return tt(a),null;case 13:if(u=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(m=Da(a),u!==null&&u.dehydrated!==null){if(s===null){if(!m)throw Error(r(318));if(m=a.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(r(317));m[Bt]=a}else La(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;tt(a),m=!1}else m=Gg(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=m),m=!0;if(!m)return a.flags&256?(or(a),a):(or(a),null)}if(or(a),(a.flags&128)!==0)return a.lanes=o,a;if(o=u!==null,s=s!==null&&s.memoizedState!==null,o){u=a.child,m=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(m=u.alternate.memoizedState.cachePool.pool);var x=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(x=u.memoizedState.cachePool.pool),x!==m&&(u.flags|=2048)}return o!==s&&o&&(a.child.flags|=8192),Yo(a,a.updateQueue),tt(a),null;case 4:return Jt(),s===null&&Hf(a.stateNode.containerInfo),tt(a),null;case 10:return ar(a.type),tt(a),null;case 19:if(ne(pt),m=a.memoizedState,m===null)return tt(a),null;if(u=(a.flags&128)!==0,x=m.rendering,x===null)if(u)Ja(m,!1);else{if(st!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(x=qo(s),x!==null){for(a.flags|=128,Ja(m,!1),s=x.updateQueue,a.updateQueue=s,Yo(a,s),a.subtreeFlags=0,s=o,o=a.child;o!==null;)qg(o,s),o=o.sibling;return K(pt,pt.current&1|2),a.child}s=s.sibling}m.tail!==null&&Q()>Jo&&(a.flags|=128,u=!0,Ja(m,!1),a.lanes=4194304)}else{if(!u)if(s=qo(x),s!==null){if(a.flags|=128,u=!0,s=s.updateQueue,a.updateQueue=s,Yo(a,s),Ja(m,!0),m.tail===null&&m.tailMode==="hidden"&&!x.alternate&&!Pe)return tt(a),null}else 2*Q()-m.renderingStartTime>Jo&&o!==536870912&&(a.flags|=128,u=!0,Ja(m,!1),a.lanes=4194304);m.isBackwards?(x.sibling=a.child,a.child=x):(s=m.last,s!==null?s.sibling=x:a.child=x,m.last=x)}return m.tail!==null?(a=m.tail,m.rendering=a,m.tail=a.sibling,m.renderingStartTime=Q(),a.sibling=null,s=pt.current,K(pt,u?s&1|2:s&1),a):(tt(a),null);case 22:case 23:return or(a),Ud(),u=a.memoizedState!==null,s!==null?s.memoizedState!==null!==u&&(a.flags|=8192):u&&(a.flags|=8192),u?(o&536870912)!==0&&(a.flags&128)===0&&(tt(a),a.subtreeFlags&6&&(a.flags|=8192)):tt(a),o=a.updateQueue,o!==null&&Yo(a,o.retryQueue),o=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),u=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),u!==o&&(a.flags|=2048),s!==null&&ne(Bs),null;case 24:return o=null,s!==null&&(o=s.memoizedState.cache),a.memoizedState.cache!==o&&(a.flags|=2048),ar(ht),tt(a),null;case 25:return null;case 30:return null}throw Error(r(156,a.tag))}function t2(s,a){switch(kd(a),a.tag){case 1:return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return ar(ht),Jt(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 26:case 27:case 5:return gn(a),null;case 13:if(or(a),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(r(340));La()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return ne(pt),null;case 4:return Jt(),null;case 10:return ar(a.type),null;case 22:case 23:return or(a),Ud(),s!==null&&ne(Bs),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 24:return ar(ht),null;case 25:return null;default:return null}}function my(s,a){switch(kd(a),a.tag){case 3:ar(ht),Jt();break;case 26:case 27:case 5:gn(a);break;case 4:Jt();break;case 13:or(a);break;case 19:ne(pt);break;case 10:ar(a.type);break;case 22:case 23:or(a),Ud(),s!==null&&ne(Bs);break;case 24:ar(ht)}}function Qa(s,a){try{var o=a.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var m=u.next;o=m;do{if((o.tag&s)===s){u=void 0;var x=o.create,S=o.inst;u=x(),S.destroy=u}o=o.next}while(o!==m)}}catch(k){Ye(a,a.return,k)}}function Pr(s,a,o){try{var u=a.updateQueue,m=u!==null?u.lastEffect:null;if(m!==null){var x=m.next;u=x;do{if((u.tag&s)===s){var S=u.inst,k=S.destroy;if(k!==void 0){S.destroy=void 0,m=a;var T=o,H=k;try{H()}catch(G){Ye(m,T,G)}}}u=u.next}while(u!==x)}}catch(G){Ye(a,a.return,G)}}function gy(s){var a=s.updateQueue;if(a!==null){var o=s.stateNode;try{r0(a,o)}catch(u){Ye(s,s.return,u)}}}function yy(s,a,o){o.props=Hs(s.type,s.memoizedProps),o.state=s.memoizedState;try{o.componentWillUnmount()}catch(u){Ye(s,a,u)}}function Za(s,a){try{var o=s.ref;if(o!==null){switch(s.tag){case 26:case 27:case 5:var u=s.stateNode;break;case 30:u=s.stateNode;break;default:u=s.stateNode}typeof o=="function"?s.refCleanup=o(u):o.current=u}}catch(m){Ye(s,a,m)}}function Fn(s,a){var o=s.ref,u=s.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(m){Ye(s,a,m)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(m){Ye(s,a,m)}else o.current=null}function xy(s){var a=s.type,o=s.memoizedProps,u=s.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(m){Ye(s,s.return,m)}}function mf(s,a,o){try{var u=s.stateNode;S2(u,s.type,o,a),u[Qt]=a}catch(m){Ye(s,s.return,m)}}function by(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Gr(s.type)||s.tag===4}function gf(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||by(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Gr(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function yf(s,a,o){var u=s.tag;if(u===5||u===6)s=s.stateNode,a?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(s,a):(a=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,a.appendChild(s),o=o._reactRootContainer,o!=null||a.onclick!==null||(a.onclick=ic));else if(u!==4&&(u===27&&Gr(s.type)&&(o=s.stateNode,a=null),s=s.child,s!==null))for(yf(s,a,o),s=s.sibling;s!==null;)yf(s,a,o),s=s.sibling}function Ko(s,a,o){var u=s.tag;if(u===5||u===6)s=s.stateNode,a?o.insertBefore(s,a):o.appendChild(s);else if(u!==4&&(u===27&&Gr(s.type)&&(o=s.stateNode),s=s.child,s!==null))for(Ko(s,a,o),s=s.sibling;s!==null;)Ko(s,a,o),s=s.sibling}function vy(s){var a=s.stateNode,o=s.memoizedProps;try{for(var u=s.type,m=a.attributes;m.length;)a.removeAttributeNode(m[0]);Ot(a,u,o),a[Bt]=s,a[Qt]=o}catch(x){Ye(s,s.return,x)}}var dr=!1,ot=!1,xf=!1,wy=typeof WeakSet=="function"?WeakSet:Set,vt=null;function n2(s,a){if(s=s.containerInfo,qf=fc,s=Rg(s),md(s)){if("selectionStart"in s)var o={start:s.selectionStart,end:s.selectionEnd};else e:{o=(o=s.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var m=u.anchorOffset,x=u.focusNode;u=u.focusOffset;try{o.nodeType,x.nodeType}catch{o=null;break e}var S=0,k=-1,T=-1,H=0,G=0,J=s,I=null;t:for(;;){for(var q;J!==o||m!==0&&J.nodeType!==3||(k=S+m),J!==x||u!==0&&J.nodeType!==3||(T=S+u),J.nodeType===3&&(S+=J.nodeValue.length),(q=J.firstChild)!==null;)I=J,J=q;for(;;){if(J===s)break t;if(I===o&&++H===m&&(k=S),I===x&&++G===u&&(T=S),(q=J.nextSibling)!==null)break;J=I,I=J.parentNode}J=q}o=k===-1||T===-1?null:{start:k,end:T}}else o=null}o=o||{start:0,end:0}}else o=null;for(Vf={focusedElem:s,selectionRange:o},fc=!1,vt=a;vt!==null;)if(a=vt,s=a.child,(a.subtreeFlags&1024)!==0&&s!==null)s.return=a,vt=s;else for(;vt!==null;){switch(a=vt,x=a.alternate,s=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&x!==null){s=void 0,o=a,m=x.memoizedProps,x=x.memoizedState,u=o.stateNode;try{var be=Hs(o.type,m,o.elementType===o.type);s=u.getSnapshotBeforeUpdate(be,x),u.__reactInternalSnapshotBeforeUpdate=s}catch(ge){Ye(o,o.return,ge)}}break;case 3:if((s&1024)!==0){if(s=a.stateNode.containerInfo,o=s.nodeType,o===9)Gf(s);else if(o===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Gf(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=a.sibling,s!==null){s.return=a.return,vt=s;break}vt=a.return}}function Sy(s,a,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:Hr(s,o),u&4&&Qa(5,o);break;case 1:if(Hr(s,o),u&4)if(s=o.stateNode,a===null)try{s.componentDidMount()}catch(S){Ye(o,o.return,S)}else{var m=Hs(o.type,a.memoizedProps);a=a.memoizedState;try{s.componentDidUpdate(m,a,s.__reactInternalSnapshotBeforeUpdate)}catch(S){Ye(o,o.return,S)}}u&64&&gy(o),u&512&&Za(o,o.return);break;case 3:if(Hr(s,o),u&64&&(s=o.updateQueue,s!==null)){if(a=null,o.child!==null)switch(o.child.tag){case 27:case 5:a=o.child.stateNode;break;case 1:a=o.child.stateNode}try{r0(s,a)}catch(S){Ye(o,o.return,S)}}break;case 27:a===null&&u&4&&vy(o);case 26:case 5:Hr(s,o),a===null&&u&4&&xy(o),u&512&&Za(o,o.return);break;case 12:Hr(s,o);break;case 13:Hr(s,o),u&4&&Ey(s,o),u&64&&(s=o.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(o=d2.bind(null,o),T2(s,o))));break;case 22:if(u=o.memoizedState!==null||dr,!u){a=a!==null&&a.memoizedState!==null||ot,m=dr;var x=ot;dr=u,(ot=a)&&!x?Ur(s,o,(o.subtreeFlags&8772)!==0):Hr(s,o),dr=m,ot=x}break;case 30:break;default:Hr(s,o)}}function Ny(s){var a=s.alternate;a!==null&&(s.alternate=null,Ny(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&Ju(a)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Ze=null,en=!1;function fr(s,a,o){for(o=o.child;o!==null;)Cy(s,a,o),o=o.sibling}function Cy(s,a,o){if(At&&typeof At.onCommitFiberUnmount=="function")try{At.onCommitFiberUnmount(Ar,o)}catch{}switch(o.tag){case 26:ot||Fn(o,a),fr(s,a,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:ot||Fn(o,a);var u=Ze,m=en;Gr(o.type)&&(Ze=o.stateNode,en=!1),fr(s,a,o),ll(o.stateNode),Ze=u,en=m;break;case 5:ot||Fn(o,a);case 6:if(u=Ze,m=en,Ze=null,fr(s,a,o),Ze=u,en=m,Ze!==null)if(en)try{(Ze.nodeType===9?Ze.body:Ze.nodeName==="HTML"?Ze.ownerDocument.body:Ze).removeChild(o.stateNode)}catch(x){Ye(o,a,x)}else try{Ze.removeChild(o.stateNode)}catch(x){Ye(o,a,x)}break;case 18:Ze!==null&&(en?(s=Ze,fx(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,o.stateNode),ml(s)):fx(Ze,o.stateNode));break;case 4:u=Ze,m=en,Ze=o.stateNode.containerInfo,en=!0,fr(s,a,o),Ze=u,en=m;break;case 0:case 11:case 14:case 15:ot||Pr(2,o,a),ot||Pr(4,o,a),fr(s,a,o);break;case 1:ot||(Fn(o,a),u=o.stateNode,typeof u.componentWillUnmount=="function"&&yy(o,a,u)),fr(s,a,o);break;case 21:fr(s,a,o);break;case 22:ot=(u=ot)||o.memoizedState!==null,fr(s,a,o),ot=u;break;default:fr(s,a,o)}}function Ey(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{ml(s)}catch(o){Ye(a,a.return,o)}}function r2(s){switch(s.tag){case 13:case 19:var a=s.stateNode;return a===null&&(a=s.stateNode=new wy),a;case 22:return s=s.stateNode,a=s._retryCache,a===null&&(a=s._retryCache=new wy),a;default:throw Error(r(435,s.tag))}}function bf(s,a){var o=r2(s);a.forEach(function(u){var m=f2.bind(null,s,u);o.has(u)||(o.add(u),u.then(m,m))})}function ln(s,a){var o=a.deletions;if(o!==null)for(var u=0;u<o.length;u++){var m=o[u],x=s,S=a,k=S;e:for(;k!==null;){switch(k.tag){case 27:if(Gr(k.type)){Ze=k.stateNode,en=!1;break e}break;case 5:Ze=k.stateNode,en=!1;break e;case 3:case 4:Ze=k.stateNode.containerInfo,en=!0;break e}k=k.return}if(Ze===null)throw Error(r(160));Cy(x,S,m),Ze=null,en=!1,x=m.alternate,x!==null&&(x.return=null),m.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)ky(a,s),a=a.sibling}var Ln=null;function ky(s,a){var o=s.alternate,u=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:ln(a,s),on(s),u&4&&(Pr(3,s,s.return),Qa(3,s),Pr(5,s,s.return));break;case 1:ln(a,s),on(s),u&512&&(ot||o===null||Fn(o,o.return)),u&64&&dr&&(s=s.updateQueue,s!==null&&(u=s.callbacks,u!==null&&(o=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var m=Ln;if(ln(a,s),on(s),u&512&&(ot||o===null||Fn(o,o.return)),u&4){var x=o!==null?o.memoizedState:null;if(u=s.memoizedState,o===null)if(u===null)if(s.stateNode===null){e:{u=s.type,o=s.memoizedProps,m=m.ownerDocument||m;t:switch(u){case"title":x=m.getElementsByTagName("title")[0],(!x||x[Sa]||x[Bt]||x.namespaceURI==="http://www.w3.org/2000/svg"||x.hasAttribute("itemprop"))&&(x=m.createElement(u),m.head.insertBefore(x,m.querySelector("head > title"))),Ot(x,u,o),x[Bt]=s,xt(x),u=x;break e;case"link":var S=vx("link","href",m).get(u+(o.href||""));if(S){for(var k=0;k<S.length;k++)if(x=S[k],x.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&x.getAttribute("rel")===(o.rel==null?null:o.rel)&&x.getAttribute("title")===(o.title==null?null:o.title)&&x.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){S.splice(k,1);break t}}x=m.createElement(u),Ot(x,u,o),m.head.appendChild(x);break;case"meta":if(S=vx("meta","content",m).get(u+(o.content||""))){for(k=0;k<S.length;k++)if(x=S[k],x.getAttribute("content")===(o.content==null?null:""+o.content)&&x.getAttribute("name")===(o.name==null?null:o.name)&&x.getAttribute("property")===(o.property==null?null:o.property)&&x.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&x.getAttribute("charset")===(o.charSet==null?null:o.charSet)){S.splice(k,1);break t}}x=m.createElement(u),Ot(x,u,o),m.head.appendChild(x);break;default:throw Error(r(468,u))}x[Bt]=s,xt(x),u=x}s.stateNode=u}else wx(m,s.type,s.stateNode);else s.stateNode=bx(m,u,s.memoizedProps);else x!==u?(x===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):x.count--,u===null?wx(m,s.type,s.stateNode):bx(m,u,s.memoizedProps)):u===null&&s.stateNode!==null&&mf(s,s.memoizedProps,o.memoizedProps)}break;case 27:ln(a,s),on(s),u&512&&(ot||o===null||Fn(o,o.return)),o!==null&&u&4&&mf(s,s.memoizedProps,o.memoizedProps);break;case 5:if(ln(a,s),on(s),u&512&&(ot||o===null||Fn(o,o.return)),s.flags&32){m=s.stateNode;try{yi(m,"")}catch(q){Ye(s,s.return,q)}}u&4&&s.stateNode!=null&&(m=s.memoizedProps,mf(s,m,o!==null?o.memoizedProps:m)),u&1024&&(xf=!0);break;case 6:if(ln(a,s),on(s),u&4){if(s.stateNode===null)throw Error(r(162));u=s.memoizedProps,o=s.stateNode;try{o.nodeValue=u}catch(q){Ye(s,s.return,q)}}break;case 3:if(cc=null,m=Ln,Ln=lc(a.containerInfo),ln(a,s),Ln=m,on(s),u&4&&o!==null&&o.memoizedState.isDehydrated)try{ml(a.containerInfo)}catch(q){Ye(s,s.return,q)}xf&&(xf=!1,jy(s));break;case 4:u=Ln,Ln=lc(s.stateNode.containerInfo),ln(a,s),on(s),Ln=u;break;case 12:ln(a,s),on(s);break;case 13:ln(a,s),on(s),s.child.flags&8192&&s.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Ef=Q()),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,bf(s,u)));break;case 22:m=s.memoizedState!==null;var T=o!==null&&o.memoizedState!==null,H=dr,G=ot;if(dr=H||m,ot=G||T,ln(a,s),ot=G,dr=H,on(s),u&8192)e:for(a=s.stateNode,a._visibility=m?a._visibility&-2:a._visibility|1,m&&(o===null||T||dr||ot||Us(s)),o=null,a=s;;){if(a.tag===5||a.tag===26){if(o===null){T=o=a;try{if(x=T.stateNode,m)S=x.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{k=T.stateNode;var J=T.memoizedProps.style,I=J!=null&&J.hasOwnProperty("display")?J.display:null;k.style.display=I==null||typeof I=="boolean"?"":(""+I).trim()}}catch(q){Ye(T,T.return,q)}}}else if(a.tag===6){if(o===null){T=a;try{T.stateNode.nodeValue=m?"":T.memoizedProps}catch(q){Ye(T,T.return,q)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===s)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break e;for(;a.sibling===null;){if(a.return===null||a.return===s)break e;o===a&&(o=null),a=a.return}o===a&&(o=null),a.sibling.return=a.return,a=a.sibling}u&4&&(u=s.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,bf(s,o))));break;case 19:ln(a,s),on(s),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,bf(s,u)));break;case 30:break;case 21:break;default:ln(a,s),on(s)}}function on(s){var a=s.flags;if(a&2){try{for(var o,u=s.return;u!==null;){if(by(u)){o=u;break}u=u.return}if(o==null)throw Error(r(160));switch(o.tag){case 27:var m=o.stateNode,x=gf(s);Ko(s,x,m);break;case 5:var S=o.stateNode;o.flags&32&&(yi(S,""),o.flags&=-33);var k=gf(s);Ko(s,k,S);break;case 3:case 4:var T=o.stateNode.containerInfo,H=gf(s);yf(s,H,T);break;default:throw Error(r(161))}}catch(G){Ye(s,s.return,G)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function jy(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var a=s;jy(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),s=s.sibling}}function Hr(s,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Sy(s,a.alternate,a),a=a.sibling}function Us(s){for(s=s.child;s!==null;){var a=s;switch(a.tag){case 0:case 11:case 14:case 15:Pr(4,a,a.return),Us(a);break;case 1:Fn(a,a.return);var o=a.stateNode;typeof o.componentWillUnmount=="function"&&yy(a,a.return,o),Us(a);break;case 27:ll(a.stateNode);case 26:case 5:Fn(a,a.return),Us(a);break;case 22:a.memoizedState===null&&Us(a);break;case 30:Us(a);break;default:Us(a)}s=s.sibling}}function Ur(s,a,o){for(o=o&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var u=a.alternate,m=s,x=a,S=x.flags;switch(x.tag){case 0:case 11:case 15:Ur(m,x,o),Qa(4,x);break;case 1:if(Ur(m,x,o),u=x,m=u.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(H){Ye(u,u.return,H)}if(u=x,m=u.updateQueue,m!==null){var k=u.stateNode;try{var T=m.shared.hiddenCallbacks;if(T!==null)for(m.shared.hiddenCallbacks=null,m=0;m<T.length;m++)n0(T[m],k)}catch(H){Ye(u,u.return,H)}}o&&S&64&&gy(x),Za(x,x.return);break;case 27:vy(x);case 26:case 5:Ur(m,x,o),o&&u===null&&S&4&&xy(x),Za(x,x.return);break;case 12:Ur(m,x,o);break;case 13:Ur(m,x,o),o&&S&4&&Ey(m,x);break;case 22:x.memoizedState===null&&Ur(m,x,o),Za(x,x.return);break;case 30:break;default:Ur(m,x,o)}a=a.sibling}}function vf(s,a){var o=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),s=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(s=a.memoizedState.cachePool.pool),s!==o&&(s!=null&&s.refCount++,o!=null&&Ba(o))}function wf(s,a){s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&Ba(s))}function $n(s,a,o,u){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Ay(s,a,o,u),a=a.sibling}function Ay(s,a,o,u){var m=a.flags;switch(a.tag){case 0:case 11:case 15:$n(s,a,o,u),m&2048&&Qa(9,a);break;case 1:$n(s,a,o,u);break;case 3:$n(s,a,o,u),m&2048&&(s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&Ba(s)));break;case 12:if(m&2048){$n(s,a,o,u),s=a.stateNode;try{var x=a.memoizedProps,S=x.id,k=x.onPostCommit;typeof k=="function"&&k(S,a.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(T){Ye(a,a.return,T)}}else $n(s,a,o,u);break;case 13:$n(s,a,o,u);break;case 23:break;case 22:x=a.stateNode,S=a.alternate,a.memoizedState!==null?x._visibility&2?$n(s,a,o,u):Wa(s,a):x._visibility&2?$n(s,a,o,u):(x._visibility|=2,zi(s,a,o,u,(a.subtreeFlags&10256)!==0)),m&2048&&vf(S,a);break;case 24:$n(s,a,o,u),m&2048&&wf(a.alternate,a);break;default:$n(s,a,o,u)}}function zi(s,a,o,u,m){for(m=m&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var x=s,S=a,k=o,T=u,H=S.flags;switch(S.tag){case 0:case 11:case 15:zi(x,S,k,T,m),Qa(8,S);break;case 23:break;case 22:var G=S.stateNode;S.memoizedState!==null?G._visibility&2?zi(x,S,k,T,m):Wa(x,S):(G._visibility|=2,zi(x,S,k,T,m)),m&&H&2048&&vf(S.alternate,S);break;case 24:zi(x,S,k,T,m),m&&H&2048&&wf(S.alternate,S);break;default:zi(x,S,k,T,m)}a=a.sibling}}function Wa(s,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var o=s,u=a,m=u.flags;switch(u.tag){case 22:Wa(o,u),m&2048&&vf(u.alternate,u);break;case 24:Wa(o,u),m&2048&&wf(u.alternate,u);break;default:Wa(o,u)}a=a.sibling}}var el=8192;function Bi(s){if(s.subtreeFlags&el)for(s=s.child;s!==null;)Ty(s),s=s.sibling}function Ty(s){switch(s.tag){case 26:Bi(s),s.flags&el&&s.memoizedState!==null&&q2(Ln,s.memoizedState,s.memoizedProps);break;case 5:Bi(s);break;case 3:case 4:var a=Ln;Ln=lc(s.stateNode.containerInfo),Bi(s),Ln=a;break;case 22:s.memoizedState===null&&(a=s.alternate,a!==null&&a.memoizedState!==null?(a=el,el=16777216,Bi(s),el=a):Bi(s));break;default:Bi(s)}}function My(s){var a=s.alternate;if(a!==null&&(s=a.child,s!==null)){a.child=null;do a=s.sibling,s.sibling=null,s=a;while(s!==null)}}function tl(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var o=0;o<a.length;o++){var u=a[o];vt=u,Ry(u,s)}My(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Oy(s),s=s.sibling}function Oy(s){switch(s.tag){case 0:case 11:case 15:tl(s),s.flags&2048&&Pr(9,s,s.return);break;case 3:tl(s);break;case 12:tl(s);break;case 22:var a=s.stateNode;s.memoizedState!==null&&a._visibility&2&&(s.return===null||s.return.tag!==13)?(a._visibility&=-3,Xo(s)):tl(s);break;default:tl(s)}}function Xo(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var o=0;o<a.length;o++){var u=a[o];vt=u,Ry(u,s)}My(s)}for(s=s.child;s!==null;){switch(a=s,a.tag){case 0:case 11:case 15:Pr(8,a,a.return),Xo(a);break;case 22:o=a.stateNode,o._visibility&2&&(o._visibility&=-3,Xo(a));break;default:Xo(a)}s=s.sibling}}function Ry(s,a){for(;vt!==null;){var o=vt;switch(o.tag){case 0:case 11:case 15:Pr(8,o,a);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Ba(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,vt=u;else e:for(o=s;vt!==null;){u=vt;var m=u.sibling,x=u.return;if(Ny(u),u===o){vt=null;break e}if(m!==null){m.return=x,vt=m;break e}vt=x}}}var s2={getCacheForType:function(s){var a=Pt(ht),o=a.data.get(s);return o===void 0&&(o=s(),a.data.set(s,o)),o}},i2=typeof WeakMap=="function"?WeakMap:Map,Ue=0,Xe=null,Re=null,_e=0,Ie=0,cn=null,Ir=!1,Pi=!1,Sf=!1,hr=0,st=0,qr=0,Is=0,Nf=0,Cn=0,Hi=0,nl=null,tn=null,Cf=!1,Ef=0,Jo=1/0,Qo=null,Vr=null,Mt=0,Fr=null,Ui=null,Ii=0,kf=0,jf=null,Dy=null,rl=0,Af=null;function un(){if((Ue&2)!==0&&_e!==0)return _e&-_e;if(V.T!==null){var s=Ai;return s!==0?s:_f()}return Xm()}function Ly(){Cn===0&&(Cn=(_e&536870912)===0||Pe?$m():536870912);var s=Nn.current;return s!==null&&(s.flags|=32),Cn}function dn(s,a,o){(s===Xe&&(Ie===2||Ie===9)||s.cancelPendingCommit!==null)&&(qi(s,0),$r(s,_e,Cn,!1)),wa(s,o),((Ue&2)===0||s!==Xe)&&(s===Xe&&((Ue&2)===0&&(Is|=o),st===4&&$r(s,_e,Cn,!1)),Gn(s))}function _y(s,a,o){if((Ue&6)!==0)throw Error(r(327));var u=!o&&(a&124)===0&&(a&s.expiredLanes)===0||va(s,a),m=u?o2(s,a):Of(s,a,!0),x=u;do{if(m===0){Pi&&!u&&$r(s,a,0,!1);break}else{if(o=s.current.alternate,x&&!a2(o)){m=Of(s,a,!1),x=!1;continue}if(m===2){if(x=a,s.errorRecoveryDisabledLanes&x)var S=0;else S=s.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){a=S;e:{var k=s;m=nl;var T=k.current.memoizedState.isDehydrated;if(T&&(qi(k,S).flags|=256),S=Of(k,S,!1),S!==2){if(Sf&&!T){k.errorRecoveryDisabledLanes|=x,Is|=x,m=4;break e}x=tn,tn=m,x!==null&&(tn===null?tn=x:tn.push.apply(tn,x))}m=S}if(x=!1,m!==2)continue}}if(m===1){qi(s,0),$r(s,a,0,!0);break}e:{switch(u=s,x=m,x){case 0:case 1:throw Error(r(345));case 4:if((a&4194048)!==a)break;case 6:$r(u,a,Cn,!Ir);break e;case 2:tn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((a&62914560)===a&&(m=Ef+300-Q(),10<m)){if($r(u,a,Cn,!Ir),lo(u,0,!0)!==0)break e;u.timeoutHandle=ux(zy.bind(null,u,o,tn,Qo,Cf,a,Cn,Is,Hi,Ir,x,2,-0,0),m);break e}zy(u,o,tn,Qo,Cf,a,Cn,Is,Hi,Ir,x,0,-0,0)}}break}while(!0);Gn(s)}function zy(s,a,o,u,m,x,S,k,T,H,G,J,I,q){if(s.timeoutHandle=-1,J=a.subtreeFlags,(J&8192||(J&16785408)===16785408)&&(ul={stylesheets:null,count:0,unsuspend:I2},Ty(a),J=V2(),J!==null)){s.cancelPendingCommit=J(Vy.bind(null,s,a,x,o,u,m,S,k,T,G,1,I,q)),$r(s,x,S,!H);return}Vy(s,a,x,o,u,m,S,k,T)}function a2(s){for(var a=s;;){var o=a.tag;if((o===0||o===11||o===15)&&a.flags&16384&&(o=a.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var m=o[u],x=m.getSnapshot;m=m.value;try{if(!sn(x(),m))return!1}catch{return!1}}if(o=a.child,a.subtreeFlags&16384&&o!==null)o.return=a,a=o;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function $r(s,a,o,u){a&=~Nf,a&=~Is,s.suspendedLanes|=a,s.pingedLanes&=~a,u&&(s.warmLanes|=a),u=s.expirationTimes;for(var m=a;0<m;){var x=31-yt(m),S=1<<x;u[x]=-1,m&=~S}o!==0&&Ym(s,o,a)}function Zo(){return(Ue&6)===0?(sl(0),!1):!0}function Tf(){if(Re!==null){if(Ie===0)var s=Re.return;else s=Re,ir=_s=null,$d(s),Li=null,Ka=0,s=Re;for(;s!==null;)my(s.alternate,s),s=s.return;Re=null}}function qi(s,a){var o=s.timeoutHandle;o!==-1&&(s.timeoutHandle=-1,C2(o)),o=s.cancelPendingCommit,o!==null&&(s.cancelPendingCommit=null,o()),Tf(),Xe=s,Re=o=nr(s.current,null),_e=a,Ie=0,cn=null,Ir=!1,Pi=va(s,a),Sf=!1,Hi=Cn=Nf=Is=qr=st=0,tn=nl=null,Cf=!1,(a&8)!==0&&(a|=a&32);var u=s.entangledLanes;if(u!==0)for(s=s.entanglements,u&=a;0<u;){var m=31-yt(u),x=1<<m;a|=s[m],u&=~x}return hr=a,vo(),o}function By(s,a){Ae=null,V.H=Ho,a===Ha||a===To?(a=e0(),Ie=3):a===Qg?(a=e0(),Ie=4):Ie=a===ty?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,cn=a,Re===null&&(st=1,Fo(s,bn(a,s.current)))}function Py(){var s=V.H;return V.H=Ho,s===null?Ho:s}function Hy(){var s=V.A;return V.A=s2,s}function Mf(){st=4,Ir||(_e&4194048)!==_e&&Nn.current!==null||(Pi=!0),(qr&134217727)===0&&(Is&134217727)===0||Xe===null||$r(Xe,_e,Cn,!1)}function Of(s,a,o){var u=Ue;Ue|=2;var m=Py(),x=Hy();(Xe!==s||_e!==a)&&(Qo=null,qi(s,a)),a=!1;var S=st;e:do try{if(Ie!==0&&Re!==null){var k=Re,T=cn;switch(Ie){case 8:Tf(),S=6;break e;case 3:case 2:case 9:case 6:Nn.current===null&&(a=!0);var H=Ie;if(Ie=0,cn=null,Vi(s,k,T,H),o&&Pi){S=0;break e}break;default:H=Ie,Ie=0,cn=null,Vi(s,k,T,H)}}l2(),S=st;break}catch(G){By(s,G)}while(!0);return a&&s.shellSuspendCounter++,ir=_s=null,Ue=u,V.H=m,V.A=x,Re===null&&(Xe=null,_e=0,vo()),S}function l2(){for(;Re!==null;)Uy(Re)}function o2(s,a){var o=Ue;Ue|=2;var u=Py(),m=Hy();Xe!==s||_e!==a?(Qo=null,Jo=Q()+500,qi(s,a)):Pi=va(s,a);e:do try{if(Ie!==0&&Re!==null){a=Re;var x=cn;t:switch(Ie){case 1:Ie=0,cn=null,Vi(s,a,x,1);break;case 2:case 9:if(Zg(x)){Ie=0,cn=null,Iy(a);break}a=function(){Ie!==2&&Ie!==9||Xe!==s||(Ie=7),Gn(s)},x.then(a,a);break e;case 3:Ie=7;break e;case 4:Ie=5;break e;case 7:Zg(x)?(Ie=0,cn=null,Iy(a)):(Ie=0,cn=null,Vi(s,a,x,7));break;case 5:var S=null;switch(Re.tag){case 26:S=Re.memoizedState;case 5:case 27:var k=Re;if(!S||Sx(S)){Ie=0,cn=null;var T=k.sibling;if(T!==null)Re=T;else{var H=k.return;H!==null?(Re=H,Wo(H)):Re=null}break t}}Ie=0,cn=null,Vi(s,a,x,5);break;case 6:Ie=0,cn=null,Vi(s,a,x,6);break;case 8:Tf(),st=6;break e;default:throw Error(r(462))}}c2();break}catch(G){By(s,G)}while(!0);return ir=_s=null,V.H=u,V.A=m,Ue=o,Re!==null?0:(Xe=null,_e=0,vo(),st)}function c2(){for(;Re!==null&&!Cs();)Uy(Re)}function Uy(s){var a=hy(s.alternate,s,hr);s.memoizedProps=s.pendingProps,a===null?Wo(s):Re=a}function Iy(s){var a=s,o=a.alternate;switch(a.tag){case 15:case 0:a=ly(o,a,a.pendingProps,a.type,void 0,_e);break;case 11:a=ly(o,a,a.pendingProps,a.type.render,a.ref,_e);break;case 5:$d(a);default:my(o,a),a=Re=qg(a,hr),a=hy(o,a,hr)}s.memoizedProps=s.pendingProps,a===null?Wo(s):Re=a}function Vi(s,a,o,u){ir=_s=null,$d(a),Li=null,Ka=0;var m=a.return;try{if(ZN(s,m,a,o,_e)){st=1,Fo(s,bn(o,s.current)),Re=null;return}}catch(x){if(m!==null)throw Re=m,x;st=1,Fo(s,bn(o,s.current)),Re=null;return}a.flags&32768?(Pe||u===1?s=!0:Pi||(_e&536870912)!==0?s=!1:(Ir=s=!0,(u===2||u===9||u===3||u===6)&&(u=Nn.current,u!==null&&u.tag===13&&(u.flags|=16384))),qy(a,s)):Wo(a)}function Wo(s){var a=s;do{if((a.flags&32768)!==0){qy(a,Ir);return}s=a.return;var o=e2(a.alternate,a,hr);if(o!==null){Re=o;return}if(a=a.sibling,a!==null){Re=a;return}Re=a=s}while(a!==null);st===0&&(st=5)}function qy(s,a){do{var o=t2(s.alternate,s);if(o!==null){o.flags&=32767,Re=o;return}if(o=s.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!a&&(s=s.sibling,s!==null)){Re=s;return}Re=s=o}while(s!==null);st=6,Re=null}function Vy(s,a,o,u,m,x,S,k,T){s.cancelPendingCommit=null;do ec();while(Mt!==0);if((Ue&6)!==0)throw Error(r(327));if(a!==null){if(a===s.current)throw Error(r(177));if(x=a.lanes|a.childLanes,x|=vd,IS(s,o,x,S,k,T),s===Xe&&(Re=Xe=null,_e=0),Ui=a,Fr=s,Ii=o,kf=x,jf=m,Dy=u,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,h2(gt,function(){return Ky(),null})):(s.callbackNode=null,s.callbackPriority=0),u=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||u){u=V.T,V.T=null,m=te.p,te.p=2,S=Ue,Ue|=4;try{n2(s,a,o)}finally{Ue=S,te.p=m,V.T=u}}Mt=1,Fy(),$y(),Gy()}}function Fy(){if(Mt===1){Mt=0;var s=Fr,a=Ui,o=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||o){o=V.T,V.T=null;var u=te.p;te.p=2;var m=Ue;Ue|=4;try{ky(a,s);var x=Vf,S=Rg(s.containerInfo),k=x.focusedElem,T=x.selectionRange;if(S!==k&&k&&k.ownerDocument&&Og(k.ownerDocument.documentElement,k)){if(T!==null&&md(k)){var H=T.start,G=T.end;if(G===void 0&&(G=H),"selectionStart"in k)k.selectionStart=H,k.selectionEnd=Math.min(G,k.value.length);else{var J=k.ownerDocument||document,I=J&&J.defaultView||window;if(I.getSelection){var q=I.getSelection(),be=k.textContent.length,ge=Math.min(T.start,be),$e=T.end===void 0?ge:Math.min(T.end,be);!q.extend&&ge>$e&&(S=$e,$e=ge,ge=S);var z=Mg(k,ge),D=Mg(k,$e);if(z&&D&&(q.rangeCount!==1||q.anchorNode!==z.node||q.anchorOffset!==z.offset||q.focusNode!==D.node||q.focusOffset!==D.offset)){var P=J.createRange();P.setStart(z.node,z.offset),q.removeAllRanges(),ge>$e?(q.addRange(P),q.extend(D.node,D.offset)):(P.setEnd(D.node,D.offset),q.addRange(P))}}}}for(J=[],q=k;q=q.parentNode;)q.nodeType===1&&J.push({element:q,left:q.scrollLeft,top:q.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<J.length;k++){var X=J[k];X.element.scrollLeft=X.left,X.element.scrollTop=X.top}}fc=!!qf,Vf=qf=null}finally{Ue=m,te.p=u,V.T=o}}s.current=a,Mt=2}}function $y(){if(Mt===2){Mt=0;var s=Fr,a=Ui,o=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||o){o=V.T,V.T=null;var u=te.p;te.p=2;var m=Ue;Ue|=4;try{Sy(s,a.alternate,a)}finally{Ue=m,te.p=u,V.T=o}}Mt=3}}function Gy(){if(Mt===4||Mt===3){Mt=0,Y();var s=Fr,a=Ui,o=Ii,u=Dy;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Mt=5:(Mt=0,Ui=Fr=null,Yy(s,s.pendingLanes));var m=s.pendingLanes;if(m===0&&(Vr=null),Ku(o),a=a.stateNode,At&&typeof At.onCommitFiberRoot=="function")try{At.onCommitFiberRoot(Ar,a,void 0,(a.current.flags&128)===128)}catch{}if(u!==null){a=V.T,m=te.p,te.p=2,V.T=null;try{for(var x=s.onRecoverableError,S=0;S<u.length;S++){var k=u[S];x(k.value,{componentStack:k.stack})}}finally{V.T=a,te.p=m}}(Ii&3)!==0&&ec(),Gn(s),m=s.pendingLanes,(o&4194090)!==0&&(m&42)!==0?s===Af?rl++:(rl=0,Af=s):rl=0,sl(0)}}function Yy(s,a){(s.pooledCacheLanes&=a)===0&&(a=s.pooledCache,a!=null&&(s.pooledCache=null,Ba(a)))}function ec(s){return Fy(),$y(),Gy(),Ky()}function Ky(){if(Mt!==5)return!1;var s=Fr,a=kf;kf=0;var o=Ku(Ii),u=V.T,m=te.p;try{te.p=32>o?32:o,V.T=null,o=jf,jf=null;var x=Fr,S=Ii;if(Mt=0,Ui=Fr=null,Ii=0,(Ue&6)!==0)throw Error(r(331));var k=Ue;if(Ue|=4,Oy(x.current),Ay(x,x.current,S,o),Ue=k,sl(0,!1),At&&typeof At.onPostCommitFiberRoot=="function")try{At.onPostCommitFiberRoot(Ar,x)}catch{}return!0}finally{te.p=m,V.T=u,Yy(s,a)}}function Xy(s,a,o){a=bn(o,a),a=af(s.stateNode,a,2),s=Lr(s,a,2),s!==null&&(wa(s,2),Gn(s))}function Ye(s,a,o){if(s.tag===3)Xy(s,s,o);else for(;a!==null;){if(a.tag===3){Xy(a,s,o);break}else if(a.tag===1){var u=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Vr===null||!Vr.has(u))){s=bn(o,s),o=W0(2),u=Lr(a,o,2),u!==null&&(ey(o,u,a,s),wa(u,2),Gn(u));break}}a=a.return}}function Rf(s,a,o){var u=s.pingCache;if(u===null){u=s.pingCache=new i2;var m=new Set;u.set(a,m)}else m=u.get(a),m===void 0&&(m=new Set,u.set(a,m));m.has(o)||(Sf=!0,m.add(o),s=u2.bind(null,s,a,o),a.then(s,s))}function u2(s,a,o){var u=s.pingCache;u!==null&&u.delete(a),s.pingedLanes|=s.suspendedLanes&o,s.warmLanes&=~o,Xe===s&&(_e&o)===o&&(st===4||st===3&&(_e&62914560)===_e&&300>Q()-Ef?(Ue&2)===0&&qi(s,0):Nf|=o,Hi===_e&&(Hi=0)),Gn(s)}function Jy(s,a){a===0&&(a=Gm()),s=Ci(s,a),s!==null&&(wa(s,a),Gn(s))}function d2(s){var a=s.memoizedState,o=0;a!==null&&(o=a.retryLane),Jy(s,o)}function f2(s,a){var o=0;switch(s.tag){case 13:var u=s.stateNode,m=s.memoizedState;m!==null&&(o=m.retryLane);break;case 19:u=s.stateNode;break;case 22:u=s.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(a),Jy(s,o)}function h2(s,a){return Ss(s,a)}var tc=null,Fi=null,Df=!1,nc=!1,Lf=!1,qs=0;function Gn(s){s!==Fi&&s.next===null&&(Fi===null?tc=Fi=s:Fi=Fi.next=s),nc=!0,Df||(Df=!0,m2())}function sl(s,a){if(!Lf&&nc){Lf=!0;do for(var o=!1,u=tc;u!==null;){if(s!==0){var m=u.pendingLanes;if(m===0)var x=0;else{var S=u.suspendedLanes,k=u.pingedLanes;x=(1<<31-yt(42|s)+1)-1,x&=m&~(S&~k),x=x&201326741?x&201326741|1:x?x|2:0}x!==0&&(o=!0,ex(u,x))}else x=_e,x=lo(u,u===Xe?x:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(x&3)===0||va(u,x)||(o=!0,ex(u,x));u=u.next}while(o);Lf=!1}}function p2(){Qy()}function Qy(){nc=Df=!1;var s=0;qs!==0&&(N2()&&(s=qs),qs=0);for(var a=Q(),o=null,u=tc;u!==null;){var m=u.next,x=Zy(u,a);x===0?(u.next=null,o===null?tc=m:o.next=m,m===null&&(Fi=o)):(o=u,(s!==0||(x&3)!==0)&&(nc=!0)),u=m}sl(s)}function Zy(s,a){for(var o=s.suspendedLanes,u=s.pingedLanes,m=s.expirationTimes,x=s.pendingLanes&-62914561;0<x;){var S=31-yt(x),k=1<<S,T=m[S];T===-1?((k&o)===0||(k&u)!==0)&&(m[S]=US(k,a)):T<=a&&(s.expiredLanes|=k),x&=~k}if(a=Xe,o=_e,o=lo(s,s===a?o:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),u=s.callbackNode,o===0||s===a&&(Ie===2||Ie===9)||s.cancelPendingCommit!==null)return u!==null&&u!==null&&Ns(u),s.callbackNode=null,s.callbackPriority=0;if((o&3)===0||va(s,o)){if(a=o&-o,a===s.callbackPriority)return a;switch(u!==null&&Ns(u),Ku(o)){case 2:case 8:o=He;break;case 32:o=gt;break;case 268435456:o=zt;break;default:o=gt}return u=Wy.bind(null,s),o=Ss(o,u),s.callbackPriority=a,s.callbackNode=o,a}return u!==null&&u!==null&&Ns(u),s.callbackPriority=2,s.callbackNode=null,2}function Wy(s,a){if(Mt!==0&&Mt!==5)return s.callbackNode=null,s.callbackPriority=0,null;var o=s.callbackNode;if(ec()&&s.callbackNode!==o)return null;var u=_e;return u=lo(s,s===Xe?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),u===0?null:(_y(s,u,a),Zy(s,Q()),s.callbackNode!=null&&s.callbackNode===o?Wy.bind(null,s):null)}function ex(s,a){if(ec())return null;_y(s,a,!0)}function m2(){E2(function(){(Ue&6)!==0?Ss(Ee,p2):Qy()})}function _f(){return qs===0&&(qs=$m()),qs}function tx(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:ho(""+s)}function nx(s,a){var o=a.ownerDocument.createElement("input");return o.name=a.name,o.value=a.value,s.id&&o.setAttribute("form",s.id),a.parentNode.insertBefore(o,a),s=new FormData(s),o.parentNode.removeChild(o),s}function g2(s,a,o,u,m){if(a==="submit"&&o&&o.stateNode===m){var x=tx((m[Qt]||null).action),S=u.submitter;S&&(a=(a=S[Qt]||null)?tx(a.formAction):S.getAttribute("formAction"),a!==null&&(x=a,S=null));var k=new yo("action","action",null,u,m);s.push({event:k,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(qs!==0){var T=S?nx(m,S):new FormData(m);ef(o,{pending:!0,data:T,method:m.method,action:x},null,T)}}else typeof x=="function"&&(k.preventDefault(),T=S?nx(m,S):new FormData(m),ef(o,{pending:!0,data:T,method:m.method,action:x},x,T))},currentTarget:m}]})}}for(var zf=0;zf<bd.length;zf++){var Bf=bd[zf],y2=Bf.toLowerCase(),x2=Bf[0].toUpperCase()+Bf.slice(1);Dn(y2,"on"+x2)}Dn(_g,"onAnimationEnd"),Dn(zg,"onAnimationIteration"),Dn(Bg,"onAnimationStart"),Dn("dblclick","onDoubleClick"),Dn("focusin","onFocus"),Dn("focusout","onBlur"),Dn(_N,"onTransitionRun"),Dn(zN,"onTransitionStart"),Dn(BN,"onTransitionCancel"),Dn(Pg,"onTransitionEnd"),pi("onMouseEnter",["mouseout","mouseover"]),pi("onMouseLeave",["mouseout","mouseover"]),pi("onPointerEnter",["pointerout","pointerover"]),pi("onPointerLeave",["pointerout","pointerover"]),ks("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ks("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ks("onBeforeInput",["compositionend","keypress","textInput","paste"]),ks("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ks("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ks("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var il="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),b2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(il));function rx(s,a){a=(a&4)!==0;for(var o=0;o<s.length;o++){var u=s[o],m=u.event;u=u.listeners;e:{var x=void 0;if(a)for(var S=u.length-1;0<=S;S--){var k=u[S],T=k.instance,H=k.currentTarget;if(k=k.listener,T!==x&&m.isPropagationStopped())break e;x=k,m.currentTarget=H;try{x(m)}catch(G){Vo(G)}m.currentTarget=null,x=T}else for(S=0;S<u.length;S++){if(k=u[S],T=k.instance,H=k.currentTarget,k=k.listener,T!==x&&m.isPropagationStopped())break e;x=k,m.currentTarget=H;try{x(m)}catch(G){Vo(G)}m.currentTarget=null,x=T}}}}function De(s,a){var o=a[Xu];o===void 0&&(o=a[Xu]=new Set);var u=s+"__bubble";o.has(u)||(sx(a,s,2,!1),o.add(u))}function Pf(s,a,o){var u=0;a&&(u|=4),sx(o,s,u,a)}var rc="_reactListening"+Math.random().toString(36).slice(2);function Hf(s){if(!s[rc]){s[rc]=!0,Qm.forEach(function(o){o!=="selectionchange"&&(b2.has(o)||Pf(o,!1,s),Pf(o,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[rc]||(a[rc]=!0,Pf("selectionchange",!1,a))}}function sx(s,a,o,u){switch(Ax(a)){case 2:var m=G2;break;case 8:m=Y2;break;default:m=Wf}o=m.bind(null,a,o,s),m=void 0,!ad||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(m=!0),u?m!==void 0?s.addEventListener(a,o,{capture:!0,passive:m}):s.addEventListener(a,o,!0):m!==void 0?s.addEventListener(a,o,{passive:m}):s.addEventListener(a,o,!1)}function Uf(s,a,o,u,m){var x=u;if((a&1)===0&&(a&2)===0&&u!==null)e:for(;;){if(u===null)return;var S=u.tag;if(S===3||S===4){var k=u.stateNode.containerInfo;if(k===m)break;if(S===4)for(S=u.return;S!==null;){var T=S.tag;if((T===3||T===4)&&S.stateNode.containerInfo===m)return;S=S.return}for(;k!==null;){if(S=di(k),S===null)return;if(T=S.tag,T===5||T===6||T===26||T===27){u=x=S;continue e}k=k.parentNode}}u=u.return}dg(function(){var H=x,G=sd(o),J=[];e:{var I=Hg.get(s);if(I!==void 0){var q=yo,be=s;switch(s){case"keypress":if(mo(o)===0)break e;case"keydown":case"keyup":q=hN;break;case"focusin":be="focus",q=ud;break;case"focusout":be="blur",q=ud;break;case"beforeblur":case"afterblur":q=ud;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":q=pg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":q=tN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":q=gN;break;case _g:case zg:case Bg:q=sN;break;case Pg:q=xN;break;case"scroll":case"scrollend":q=WS;break;case"wheel":q=vN;break;case"copy":case"cut":case"paste":q=aN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":q=gg;break;case"toggle":case"beforetoggle":q=SN}var ge=(a&4)!==0,$e=!ge&&(s==="scroll"||s==="scrollend"),z=ge?I!==null?I+"Capture":null:I;ge=[];for(var D=H,P;D!==null;){var X=D;if(P=X.stateNode,X=X.tag,X!==5&&X!==26&&X!==27||P===null||z===null||(X=Ca(D,z),X!=null&&ge.push(al(D,X,P))),$e)break;D=D.return}0<ge.length&&(I=new q(I,be,null,o,G),J.push({event:I,listeners:ge}))}}if((a&7)===0){e:{if(I=s==="mouseover"||s==="pointerover",q=s==="mouseout"||s==="pointerout",I&&o!==rd&&(be=o.relatedTarget||o.fromElement)&&(di(be)||be[ui]))break e;if((q||I)&&(I=G.window===G?G:(I=G.ownerDocument)?I.defaultView||I.parentWindow:window,q?(be=o.relatedTarget||o.toElement,q=H,be=be?di(be):null,be!==null&&($e=l(be),ge=be.tag,be!==$e||ge!==5&&ge!==27&&ge!==6)&&(be=null)):(q=null,be=H),q!==be)){if(ge=pg,X="onMouseLeave",z="onMouseEnter",D="mouse",(s==="pointerout"||s==="pointerover")&&(ge=gg,X="onPointerLeave",z="onPointerEnter",D="pointer"),$e=q==null?I:Na(q),P=be==null?I:Na(be),I=new ge(X,D+"leave",q,o,G),I.target=$e,I.relatedTarget=P,X=null,di(G)===H&&(ge=new ge(z,D+"enter",be,o,G),ge.target=P,ge.relatedTarget=$e,X=ge),$e=X,q&&be)t:{for(ge=q,z=be,D=0,P=ge;P;P=$i(P))D++;for(P=0,X=z;X;X=$i(X))P++;for(;0<D-P;)ge=$i(ge),D--;for(;0<P-D;)z=$i(z),P--;for(;D--;){if(ge===z||z!==null&&ge===z.alternate)break t;ge=$i(ge),z=$i(z)}ge=null}else ge=null;q!==null&&ix(J,I,q,ge,!1),be!==null&&$e!==null&&ix(J,$e,be,ge,!0)}}e:{if(I=H?Na(H):window,q=I.nodeName&&I.nodeName.toLowerCase(),q==="select"||q==="input"&&I.type==="file")var oe=Cg;else if(Sg(I))if(Eg)oe=RN;else{oe=MN;var Me=TN}else q=I.nodeName,!q||q.toLowerCase()!=="input"||I.type!=="checkbox"&&I.type!=="radio"?H&&nd(H.elementType)&&(oe=Cg):oe=ON;if(oe&&(oe=oe(s,H))){Ng(J,oe,o,G);break e}Me&&Me(s,I,H),s==="focusout"&&H&&I.type==="number"&&H.memoizedProps.value!=null&&td(I,"number",I.value)}switch(Me=H?Na(H):window,s){case"focusin":(Sg(Me)||Me.contentEditable==="true")&&(wi=Me,gd=H,Ra=null);break;case"focusout":Ra=gd=wi=null;break;case"mousedown":yd=!0;break;case"contextmenu":case"mouseup":case"dragend":yd=!1,Dg(J,o,G);break;case"selectionchange":if(LN)break;case"keydown":case"keyup":Dg(J,o,G)}var fe;if(fd)e:{switch(s){case"compositionstart":var xe="onCompositionStart";break e;case"compositionend":xe="onCompositionEnd";break e;case"compositionupdate":xe="onCompositionUpdate";break e}xe=void 0}else vi?vg(s,o)&&(xe="onCompositionEnd"):s==="keydown"&&o.keyCode===229&&(xe="onCompositionStart");xe&&(yg&&o.locale!=="ko"&&(vi||xe!=="onCompositionStart"?xe==="onCompositionEnd"&&vi&&(fe=fg()):(Mr=G,ld="value"in Mr?Mr.value:Mr.textContent,vi=!0)),Me=sc(H,xe),0<Me.length&&(xe=new mg(xe,s,null,o,G),J.push({event:xe,listeners:Me}),fe?xe.data=fe:(fe=wg(o),fe!==null&&(xe.data=fe)))),(fe=CN?EN(s,o):kN(s,o))&&(xe=sc(H,"onBeforeInput"),0<xe.length&&(Me=new mg("onBeforeInput","beforeinput",null,o,G),J.push({event:Me,listeners:xe}),Me.data=fe)),g2(J,s,H,o,G)}rx(J,a)})}function al(s,a,o){return{instance:s,listener:a,currentTarget:o}}function sc(s,a){for(var o=a+"Capture",u=[];s!==null;){var m=s,x=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||x===null||(m=Ca(s,o),m!=null&&u.unshift(al(s,m,x)),m=Ca(s,a),m!=null&&u.push(al(s,m,x))),s.tag===3)return u;s=s.return}return[]}function $i(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function ix(s,a,o,u,m){for(var x=a._reactName,S=[];o!==null&&o!==u;){var k=o,T=k.alternate,H=k.stateNode;if(k=k.tag,T!==null&&T===u)break;k!==5&&k!==26&&k!==27||H===null||(T=H,m?(H=Ca(o,x),H!=null&&S.unshift(al(o,H,T))):m||(H=Ca(o,x),H!=null&&S.push(al(o,H,T)))),o=o.return}S.length!==0&&s.push({event:a,listeners:S})}var v2=/\r\n?/g,w2=/\u0000|\uFFFD/g;function ax(s){return(typeof s=="string"?s:""+s).replace(v2,`
`).replace(w2,"")}function lx(s,a){return a=ax(a),ax(s)===a}function ic(){}function Fe(s,a,o,u,m,x){switch(o){case"children":typeof u=="string"?a==="body"||a==="textarea"&&u===""||yi(s,u):(typeof u=="number"||typeof u=="bigint")&&a!=="body"&&yi(s,""+u);break;case"className":co(s,"class",u);break;case"tabIndex":co(s,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":co(s,o,u);break;case"style":cg(s,u,x);break;case"data":if(a!=="object"){co(s,"data",u);break}case"src":case"href":if(u===""&&(a!=="a"||o!=="href")){s.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(o);break}u=ho(""+u),s.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){s.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof x=="function"&&(o==="formAction"?(a!=="input"&&Fe(s,a,"name",m.name,m,null),Fe(s,a,"formEncType",m.formEncType,m,null),Fe(s,a,"formMethod",m.formMethod,m,null),Fe(s,a,"formTarget",m.formTarget,m,null)):(Fe(s,a,"encType",m.encType,m,null),Fe(s,a,"method",m.method,m,null),Fe(s,a,"target",m.target,m,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(o);break}u=ho(""+u),s.setAttribute(o,u);break;case"onClick":u!=null&&(s.onclick=ic);break;case"onScroll":u!=null&&De("scroll",s);break;case"onScrollEnd":u!=null&&De("scrollend",s);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(m.children!=null)throw Error(r(60));s.innerHTML=o}}break;case"multiple":s.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":s.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){s.removeAttribute("xlink:href");break}o=ho(""+u),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(o,""+u):s.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(o,""):s.removeAttribute(o);break;case"capture":case"download":u===!0?s.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(o,u):s.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?s.setAttribute(o,u):s.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?s.removeAttribute(o):s.setAttribute(o,u);break;case"popover":De("beforetoggle",s),De("toggle",s),oo(s,"popover",u);break;case"xlinkActuate":er(s,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":er(s,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":er(s,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":er(s,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":er(s,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":er(s,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":er(s,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":er(s,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":er(s,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":oo(s,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=QS.get(o)||o,oo(s,o,u))}}function If(s,a,o,u,m,x){switch(o){case"style":cg(s,u,x);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(m.children!=null)throw Error(r(60));s.innerHTML=o}}break;case"children":typeof u=="string"?yi(s,u):(typeof u=="number"||typeof u=="bigint")&&yi(s,""+u);break;case"onScroll":u!=null&&De("scroll",s);break;case"onScrollEnd":u!=null&&De("scrollend",s);break;case"onClick":u!=null&&(s.onclick=ic);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Zm.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(m=o.endsWith("Capture"),a=o.slice(2,m?o.length-7:void 0),x=s[Qt]||null,x=x!=null?x[o]:null,typeof x=="function"&&s.removeEventListener(a,x,m),typeof u=="function")){typeof x!="function"&&x!==null&&(o in s?s[o]=null:s.hasAttribute(o)&&s.removeAttribute(o)),s.addEventListener(a,u,m);break e}o in s?s[o]=u:u===!0?s.setAttribute(o,""):oo(s,o,u)}}}function Ot(s,a,o){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":De("error",s),De("load",s);var u=!1,m=!1,x;for(x in o)if(o.hasOwnProperty(x)){var S=o[x];if(S!=null)switch(x){case"src":u=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:Fe(s,a,x,S,o,null)}}m&&Fe(s,a,"srcSet",o.srcSet,o,null),u&&Fe(s,a,"src",o.src,o,null);return;case"input":De("invalid",s);var k=x=S=m=null,T=null,H=null;for(u in o)if(o.hasOwnProperty(u)){var G=o[u];if(G!=null)switch(u){case"name":m=G;break;case"type":S=G;break;case"checked":T=G;break;case"defaultChecked":H=G;break;case"value":x=G;break;case"defaultValue":k=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(r(137,a));break;default:Fe(s,a,u,G,o,null)}}ig(s,x,k,T,H,S,m,!1),uo(s);return;case"select":De("invalid",s),u=S=x=null;for(m in o)if(o.hasOwnProperty(m)&&(k=o[m],k!=null))switch(m){case"value":x=k;break;case"defaultValue":S=k;break;case"multiple":u=k;default:Fe(s,a,m,k,o,null)}a=x,o=S,s.multiple=!!u,a!=null?gi(s,!!u,a,!1):o!=null&&gi(s,!!u,o,!0);return;case"textarea":De("invalid",s),x=m=u=null;for(S in o)if(o.hasOwnProperty(S)&&(k=o[S],k!=null))switch(S){case"value":u=k;break;case"defaultValue":m=k;break;case"children":x=k;break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(r(91));break;default:Fe(s,a,S,k,o,null)}lg(s,u,m,x),uo(s);return;case"option":for(T in o)if(o.hasOwnProperty(T)&&(u=o[T],u!=null))switch(T){case"selected":s.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Fe(s,a,T,u,o,null)}return;case"dialog":De("beforetoggle",s),De("toggle",s),De("cancel",s),De("close",s);break;case"iframe":case"object":De("load",s);break;case"video":case"audio":for(u=0;u<il.length;u++)De(il[u],s);break;case"image":De("error",s),De("load",s);break;case"details":De("toggle",s);break;case"embed":case"source":case"link":De("error",s),De("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in o)if(o.hasOwnProperty(H)&&(u=o[H],u!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:Fe(s,a,H,u,o,null)}return;default:if(nd(a)){for(G in o)o.hasOwnProperty(G)&&(u=o[G],u!==void 0&&If(s,a,G,u,o,void 0));return}}for(k in o)o.hasOwnProperty(k)&&(u=o[k],u!=null&&Fe(s,a,k,u,o,null))}function S2(s,a,o,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,x=null,S=null,k=null,T=null,H=null,G=null;for(q in o){var J=o[q];if(o.hasOwnProperty(q)&&J!=null)switch(q){case"checked":break;case"value":break;case"defaultValue":T=J;default:u.hasOwnProperty(q)||Fe(s,a,q,null,u,J)}}for(var I in u){var q=u[I];if(J=o[I],u.hasOwnProperty(I)&&(q!=null||J!=null))switch(I){case"type":x=q;break;case"name":m=q;break;case"checked":H=q;break;case"defaultChecked":G=q;break;case"value":S=q;break;case"defaultValue":k=q;break;case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(r(137,a));break;default:q!==J&&Fe(s,a,I,q,u,J)}}ed(s,S,k,T,H,G,x,m);return;case"select":q=S=k=I=null;for(x in o)if(T=o[x],o.hasOwnProperty(x)&&T!=null)switch(x){case"value":break;case"multiple":q=T;default:u.hasOwnProperty(x)||Fe(s,a,x,null,u,T)}for(m in u)if(x=u[m],T=o[m],u.hasOwnProperty(m)&&(x!=null||T!=null))switch(m){case"value":I=x;break;case"defaultValue":k=x;break;case"multiple":S=x;default:x!==T&&Fe(s,a,m,x,u,T)}a=k,o=S,u=q,I!=null?gi(s,!!o,I,!1):!!u!=!!o&&(a!=null?gi(s,!!o,a,!0):gi(s,!!o,o?[]:"",!1));return;case"textarea":q=I=null;for(k in o)if(m=o[k],o.hasOwnProperty(k)&&m!=null&&!u.hasOwnProperty(k))switch(k){case"value":break;case"children":break;default:Fe(s,a,k,null,u,m)}for(S in u)if(m=u[S],x=o[S],u.hasOwnProperty(S)&&(m!=null||x!=null))switch(S){case"value":I=m;break;case"defaultValue":q=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(r(91));break;default:m!==x&&Fe(s,a,S,m,u,x)}ag(s,I,q);return;case"option":for(var be in o)if(I=o[be],o.hasOwnProperty(be)&&I!=null&&!u.hasOwnProperty(be))switch(be){case"selected":s.selected=!1;break;default:Fe(s,a,be,null,u,I)}for(T in u)if(I=u[T],q=o[T],u.hasOwnProperty(T)&&I!==q&&(I!=null||q!=null))switch(T){case"selected":s.selected=I&&typeof I!="function"&&typeof I!="symbol";break;default:Fe(s,a,T,I,u,q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ge in o)I=o[ge],o.hasOwnProperty(ge)&&I!=null&&!u.hasOwnProperty(ge)&&Fe(s,a,ge,null,u,I);for(H in u)if(I=u[H],q=o[H],u.hasOwnProperty(H)&&I!==q&&(I!=null||q!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if(I!=null)throw Error(r(137,a));break;default:Fe(s,a,H,I,u,q)}return;default:if(nd(a)){for(var $e in o)I=o[$e],o.hasOwnProperty($e)&&I!==void 0&&!u.hasOwnProperty($e)&&If(s,a,$e,void 0,u,I);for(G in u)I=u[G],q=o[G],!u.hasOwnProperty(G)||I===q||I===void 0&&q===void 0||If(s,a,G,I,u,q);return}}for(var z in o)I=o[z],o.hasOwnProperty(z)&&I!=null&&!u.hasOwnProperty(z)&&Fe(s,a,z,null,u,I);for(J in u)I=u[J],q=o[J],!u.hasOwnProperty(J)||I===q||I==null&&q==null||Fe(s,a,J,I,u,q)}var qf=null,Vf=null;function ac(s){return s.nodeType===9?s:s.ownerDocument}function ox(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function cx(s,a){if(s===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&a==="foreignObject"?0:s}function Ff(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var $f=null;function N2(){var s=window.event;return s&&s.type==="popstate"?s===$f?!1:($f=s,!0):($f=null,!1)}var ux=typeof setTimeout=="function"?setTimeout:void 0,C2=typeof clearTimeout=="function"?clearTimeout:void 0,dx=typeof Promise=="function"?Promise:void 0,E2=typeof queueMicrotask=="function"?queueMicrotask:typeof dx<"u"?function(s){return dx.resolve(null).then(s).catch(k2)}:ux;function k2(s){setTimeout(function(){throw s})}function Gr(s){return s==="head"}function fx(s,a){var o=a,u=0,m=0;do{var x=o.nextSibling;if(s.removeChild(o),x&&x.nodeType===8)if(o=x.data,o==="/$"){if(0<u&&8>u){o=u;var S=s.ownerDocument;if(o&1&&ll(S.documentElement),o&2&&ll(S.body),o&4)for(o=S.head,ll(o),S=o.firstChild;S;){var k=S.nextSibling,T=S.nodeName;S[Sa]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&S.rel.toLowerCase()==="stylesheet"||o.removeChild(S),S=k}}if(m===0){s.removeChild(x),ml(a);return}m--}else o==="$"||o==="$?"||o==="$!"?m++:u=o.charCodeAt(0)-48;else u=0;o=x}while(o);ml(a)}function Gf(s){var a=s.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var o=a;switch(a=a.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Gf(o),Ju(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}s.removeChild(o)}}function j2(s,a,o,u){for(;s.nodeType===1;){var m=o;if(s.nodeName.toLowerCase()!==a.toLowerCase()){if(!u&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(u){if(!s[Sa])switch(a){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(x=s.getAttribute("rel"),x==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(x!==m.rel||s.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||s.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||s.getAttribute("title")!==(m.title==null?null:m.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(x=s.getAttribute("src"),(x!==(m.src==null?null:m.src)||s.getAttribute("type")!==(m.type==null?null:m.type)||s.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&x&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(a==="input"&&s.type==="hidden"){var x=m.name==null?null:""+m.name;if(m.type==="hidden"&&s.getAttribute("name")===x)return s}else return s;if(s=_n(s.nextSibling),s===null)break}return null}function A2(s,a,o){if(a==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!o||(s=_n(s.nextSibling),s===null))return null;return s}function Yf(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function T2(s,a){var o=s.ownerDocument;if(s.data!=="$?"||o.readyState==="complete")a();else{var u=function(){a(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),s._reactRetry=u}}function _n(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return s}var Kf=null;function hx(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var o=s.data;if(o==="$"||o==="$!"||o==="$?"){if(a===0)return s;a--}else o==="/$"&&a++}s=s.previousSibling}return null}function px(s,a,o){switch(a=ac(o),s){case"html":if(s=a.documentElement,!s)throw Error(r(452));return s;case"head":if(s=a.head,!s)throw Error(r(453));return s;case"body":if(s=a.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function ll(s){for(var a=s.attributes;a.length;)s.removeAttributeNode(a[0]);Ju(s)}var En=new Map,mx=new Set;function lc(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var pr=te.d;te.d={f:M2,r:O2,D:R2,C:D2,L:L2,m:_2,X:B2,S:z2,M:P2};function M2(){var s=pr.f(),a=Zo();return s||a}function O2(s){var a=fi(s);a!==null&&a.tag===5&&a.type==="form"?_0(a):pr.r(s)}var Gi=typeof document>"u"?null:document;function gx(s,a,o){var u=Gi;if(u&&typeof a=="string"&&a){var m=xn(a);m='link[rel="'+s+'"][href="'+m+'"]',typeof o=="string"&&(m+='[crossorigin="'+o+'"]'),mx.has(m)||(mx.add(m),s={rel:s,crossOrigin:o,href:a},u.querySelector(m)===null&&(a=u.createElement("link"),Ot(a,"link",s),xt(a),u.head.appendChild(a)))}}function R2(s){pr.D(s),gx("dns-prefetch",s,null)}function D2(s,a){pr.C(s,a),gx("preconnect",s,a)}function L2(s,a,o){pr.L(s,a,o);var u=Gi;if(u&&s&&a){var m='link[rel="preload"][as="'+xn(a)+'"]';a==="image"&&o&&o.imageSrcSet?(m+='[imagesrcset="'+xn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(m+='[imagesizes="'+xn(o.imageSizes)+'"]')):m+='[href="'+xn(s)+'"]';var x=m;switch(a){case"style":x=Yi(s);break;case"script":x=Ki(s)}En.has(x)||(s=g({rel:"preload",href:a==="image"&&o&&o.imageSrcSet?void 0:s,as:a},o),En.set(x,s),u.querySelector(m)!==null||a==="style"&&u.querySelector(ol(x))||a==="script"&&u.querySelector(cl(x))||(a=u.createElement("link"),Ot(a,"link",s),xt(a),u.head.appendChild(a)))}}function _2(s,a){pr.m(s,a);var o=Gi;if(o&&s){var u=a&&typeof a.as=="string"?a.as:"script",m='link[rel="modulepreload"][as="'+xn(u)+'"][href="'+xn(s)+'"]',x=m;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":x=Ki(s)}if(!En.has(x)&&(s=g({rel:"modulepreload",href:s},a),En.set(x,s),o.querySelector(m)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(cl(x)))return}u=o.createElement("link"),Ot(u,"link",s),xt(u),o.head.appendChild(u)}}}function z2(s,a,o){pr.S(s,a,o);var u=Gi;if(u&&s){var m=hi(u).hoistableStyles,x=Yi(s);a=a||"default";var S=m.get(x);if(!S){var k={loading:0,preload:null};if(S=u.querySelector(ol(x)))k.loading=5;else{s=g({rel:"stylesheet",href:s,"data-precedence":a},o),(o=En.get(x))&&Xf(s,o);var T=S=u.createElement("link");xt(T),Ot(T,"link",s),T._p=new Promise(function(H,G){T.onload=H,T.onerror=G}),T.addEventListener("load",function(){k.loading|=1}),T.addEventListener("error",function(){k.loading|=2}),k.loading|=4,oc(S,a,u)}S={type:"stylesheet",instance:S,count:1,state:k},m.set(x,S)}}}function B2(s,a){pr.X(s,a);var o=Gi;if(o&&s){var u=hi(o).hoistableScripts,m=Ki(s),x=u.get(m);x||(x=o.querySelector(cl(m)),x||(s=g({src:s,async:!0},a),(a=En.get(m))&&Jf(s,a),x=o.createElement("script"),xt(x),Ot(x,"link",s),o.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},u.set(m,x))}}function P2(s,a){pr.M(s,a);var o=Gi;if(o&&s){var u=hi(o).hoistableScripts,m=Ki(s),x=u.get(m);x||(x=o.querySelector(cl(m)),x||(s=g({src:s,async:!0,type:"module"},a),(a=En.get(m))&&Jf(s,a),x=o.createElement("script"),xt(x),Ot(x,"link",s),o.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},u.set(m,x))}}function yx(s,a,o,u){var m=(m=ie.current)?lc(m):null;if(!m)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(a=Yi(o.href),o=hi(m).hoistableStyles,u=o.get(a),u||(u={type:"style",instance:null,count:0,state:null},o.set(a,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){s=Yi(o.href);var x=hi(m).hoistableStyles,S=x.get(s);if(S||(m=m.ownerDocument||m,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},x.set(s,S),(x=m.querySelector(ol(s)))&&!x._p&&(S.instance=x,S.state.loading=5),En.has(s)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},En.set(s,o),x||H2(m,s,o,S.state))),a&&u===null)throw Error(r(528,""));return S}if(a&&u!==null)throw Error(r(529,""));return null;case"script":return a=o.async,o=o.src,typeof o=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Ki(o),o=hi(m).hoistableScripts,u=o.get(a),u||(u={type:"script",instance:null,count:0,state:null},o.set(a,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function Yi(s){return'href="'+xn(s)+'"'}function ol(s){return'link[rel="stylesheet"]['+s+"]"}function xx(s){return g({},s,{"data-precedence":s.precedence,precedence:null})}function H2(s,a,o,u){s.querySelector('link[rel="preload"][as="style"]['+a+"]")?u.loading=1:(a=s.createElement("link"),u.preload=a,a.addEventListener("load",function(){return u.loading|=1}),a.addEventListener("error",function(){return u.loading|=2}),Ot(a,"link",o),xt(a),s.head.appendChild(a))}function Ki(s){return'[src="'+xn(s)+'"]'}function cl(s){return"script[async]"+s}function bx(s,a,o){if(a.count++,a.instance===null)switch(a.type){case"style":var u=s.querySelector('style[data-href~="'+xn(o.href)+'"]');if(u)return a.instance=u,xt(u),u;var m=g({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(s.ownerDocument||s).createElement("style"),xt(u),Ot(u,"style",m),oc(u,o.precedence,s),a.instance=u;case"stylesheet":m=Yi(o.href);var x=s.querySelector(ol(m));if(x)return a.state.loading|=4,a.instance=x,xt(x),x;u=xx(o),(m=En.get(m))&&Xf(u,m),x=(s.ownerDocument||s).createElement("link"),xt(x);var S=x;return S._p=new Promise(function(k,T){S.onload=k,S.onerror=T}),Ot(x,"link",u),a.state.loading|=4,oc(x,o.precedence,s),a.instance=x;case"script":return x=Ki(o.src),(m=s.querySelector(cl(x)))?(a.instance=m,xt(m),m):(u=o,(m=En.get(x))&&(u=g({},o),Jf(u,m)),s=s.ownerDocument||s,m=s.createElement("script"),xt(m),Ot(m,"link",u),s.head.appendChild(m),a.instance=m);case"void":return null;default:throw Error(r(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(u=a.instance,a.state.loading|=4,oc(u,o.precedence,s));return a.instance}function oc(s,a,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=u.length?u[u.length-1]:null,x=m,S=0;S<u.length;S++){var k=u[S];if(k.dataset.precedence===a)x=k;else if(x!==m)break}x?x.parentNode.insertBefore(s,x.nextSibling):(a=o.nodeType===9?o.head:o,a.insertBefore(s,a.firstChild))}function Xf(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.title==null&&(s.title=a.title)}function Jf(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.integrity==null&&(s.integrity=a.integrity)}var cc=null;function vx(s,a,o){if(cc===null){var u=new Map,m=cc=new Map;m.set(o,u)}else m=cc,u=m.get(o),u||(u=new Map,m.set(o,u));if(u.has(s))return u;for(u.set(s,null),o=o.getElementsByTagName(s),m=0;m<o.length;m++){var x=o[m];if(!(x[Sa]||x[Bt]||s==="link"&&x.getAttribute("rel")==="stylesheet")&&x.namespaceURI!=="http://www.w3.org/2000/svg"){var S=x.getAttribute(a)||"";S=s+S;var k=u.get(S);k?k.push(x):u.set(S,[x])}}return u}function wx(s,a,o){s=s.ownerDocument||s,s.head.insertBefore(o,a==="title"?s.querySelector("head > title"):null)}function U2(s,a,o){if(o===1||a.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return s=a.disabled,typeof a.precedence=="string"&&s==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Sx(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var ul=null;function I2(){}function q2(s,a,o){if(ul===null)throw Error(r(475));var u=ul;if(a.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var m=Yi(o.href),x=s.querySelector(ol(m));if(x){s=x._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(u.count++,u=uc.bind(u),s.then(u,u)),a.state.loading|=4,a.instance=x,xt(x);return}x=s.ownerDocument||s,o=xx(o),(m=En.get(m))&&Xf(o,m),x=x.createElement("link"),xt(x);var S=x;S._p=new Promise(function(k,T){S.onload=k,S.onerror=T}),Ot(x,"link",o),a.instance=x}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(u.count++,a=uc.bind(u),s.addEventListener("load",a),s.addEventListener("error",a))}}function V2(){if(ul===null)throw Error(r(475));var s=ul;return s.stylesheets&&s.count===0&&Qf(s,s.stylesheets),0<s.count?function(a){var o=setTimeout(function(){if(s.stylesheets&&Qf(s,s.stylesheets),s.unsuspend){var u=s.unsuspend;s.unsuspend=null,u()}},6e4);return s.unsuspend=a,function(){s.unsuspend=null,clearTimeout(o)}}:null}function uc(){if(this.count--,this.count===0){if(this.stylesheets)Qf(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var dc=null;function Qf(s,a){s.stylesheets=null,s.unsuspend!==null&&(s.count++,dc=new Map,a.forEach(F2,s),dc=null,uc.call(s))}function F2(s,a){if(!(a.state.loading&4)){var o=dc.get(s);if(o)var u=o.get(null);else{o=new Map,dc.set(s,o);for(var m=s.querySelectorAll("link[data-precedence],style[data-precedence]"),x=0;x<m.length;x++){var S=m[x];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(o.set(S.dataset.precedence,S),u=S)}u&&o.set(null,u)}m=a.instance,S=m.getAttribute("data-precedence"),x=o.get(S)||u,x===u&&o.set(null,m),o.set(S,m),this.count++,u=uc.bind(this),m.addEventListener("load",u),m.addEventListener("error",u),x?x.parentNode.insertBefore(m,x.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(m,s.firstChild)),a.state.loading|=4}}var dl={$$typeof:M,Provider:null,Consumer:null,_currentValue:de,_currentValue2:de,_threadCount:0};function $2(s,a,o,u,m,x,S,k){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Gu(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gu(0),this.hiddenUpdates=Gu(null),this.identifierPrefix=u,this.onUncaughtError=m,this.onCaughtError=x,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function Nx(s,a,o,u,m,x,S,k,T,H,G,J){return s=new $2(s,a,o,S,k,T,H,J),a=1,x===!0&&(a|=24),x=an(3,null,null,a),s.current=x,x.stateNode=s,a=Od(),a.refCount++,s.pooledCache=a,a.refCount++,x.memoizedState={element:u,isDehydrated:o,cache:a},_d(x),s}function Cx(s){return s?(s=Ei,s):Ei}function Ex(s,a,o,u,m,x){m=Cx(m),u.context===null?u.context=m:u.pendingContext=m,u=Dr(a),u.payload={element:o},x=x===void 0?null:x,x!==null&&(u.callback=x),o=Lr(s,u,a),o!==null&&(dn(o,s,a),Ia(o,s,a))}function kx(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var o=s.retryLane;s.retryLane=o!==0&&o<a?o:a}}function Zf(s,a){kx(s,a),(s=s.alternate)&&kx(s,a)}function jx(s){if(s.tag===13){var a=Ci(s,67108864);a!==null&&dn(a,s,67108864),Zf(s,67108864)}}var fc=!0;function G2(s,a,o,u){var m=V.T;V.T=null;var x=te.p;try{te.p=2,Wf(s,a,o,u)}finally{te.p=x,V.T=m}}function Y2(s,a,o,u){var m=V.T;V.T=null;var x=te.p;try{te.p=8,Wf(s,a,o,u)}finally{te.p=x,V.T=m}}function Wf(s,a,o,u){if(fc){var m=eh(u);if(m===null)Uf(s,a,u,hc,o),Tx(s,u);else if(X2(m,s,a,o,u))u.stopPropagation();else if(Tx(s,u),a&4&&-1<K2.indexOf(s)){for(;m!==null;){var x=fi(m);if(x!==null)switch(x.tag){case 3:if(x=x.stateNode,x.current.memoizedState.isDehydrated){var S=Es(x.pendingLanes);if(S!==0){var k=x;for(k.pendingLanes|=2,k.entangledLanes|=2;S;){var T=1<<31-yt(S);k.entanglements[1]|=T,S&=~T}Gn(x),(Ue&6)===0&&(Jo=Q()+500,sl(0))}}break;case 13:k=Ci(x,2),k!==null&&dn(k,x,2),Zo(),Zf(x,2)}if(x=eh(u),x===null&&Uf(s,a,u,hc,o),x===m)break;m=x}m!==null&&u.stopPropagation()}else Uf(s,a,u,null,o)}}function eh(s){return s=sd(s),th(s)}var hc=null;function th(s){if(hc=null,s=di(s),s!==null){var a=l(s);if(a===null)s=null;else{var o=a.tag;if(o===13){if(s=c(a),s!==null)return s;s=null}else if(o===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null)}}return hc=s,null}function Ax(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(he()){case Ee:return 2;case He:return 8;case gt:case Qe:return 32;case zt:return 268435456;default:return 32}default:return 32}}var nh=!1,Yr=null,Kr=null,Xr=null,fl=new Map,hl=new Map,Jr=[],K2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Tx(s,a){switch(s){case"focusin":case"focusout":Yr=null;break;case"dragenter":case"dragleave":Kr=null;break;case"mouseover":case"mouseout":Xr=null;break;case"pointerover":case"pointerout":fl.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":hl.delete(a.pointerId)}}function pl(s,a,o,u,m,x){return s===null||s.nativeEvent!==x?(s={blockedOn:a,domEventName:o,eventSystemFlags:u,nativeEvent:x,targetContainers:[m]},a!==null&&(a=fi(a),a!==null&&jx(a)),s):(s.eventSystemFlags|=u,a=s.targetContainers,m!==null&&a.indexOf(m)===-1&&a.push(m),s)}function X2(s,a,o,u,m){switch(a){case"focusin":return Yr=pl(Yr,s,a,o,u,m),!0;case"dragenter":return Kr=pl(Kr,s,a,o,u,m),!0;case"mouseover":return Xr=pl(Xr,s,a,o,u,m),!0;case"pointerover":var x=m.pointerId;return fl.set(x,pl(fl.get(x)||null,s,a,o,u,m)),!0;case"gotpointercapture":return x=m.pointerId,hl.set(x,pl(hl.get(x)||null,s,a,o,u,m)),!0}return!1}function Mx(s){var a=di(s.target);if(a!==null){var o=l(a);if(o!==null){if(a=o.tag,a===13){if(a=c(o),a!==null){s.blockedOn=a,qS(s.priority,function(){if(o.tag===13){var u=un();u=Yu(u);var m=Ci(o,u);m!==null&&dn(m,o,u),Zf(o,u)}});return}}else if(a===3&&o.stateNode.current.memoizedState.isDehydrated){s.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}s.blockedOn=null}function pc(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var o=eh(s.nativeEvent);if(o===null){o=s.nativeEvent;var u=new o.constructor(o.type,o);rd=u,o.target.dispatchEvent(u),rd=null}else return a=fi(o),a!==null&&jx(a),s.blockedOn=o,!1;a.shift()}return!0}function Ox(s,a,o){pc(s)&&o.delete(a)}function J2(){nh=!1,Yr!==null&&pc(Yr)&&(Yr=null),Kr!==null&&pc(Kr)&&(Kr=null),Xr!==null&&pc(Xr)&&(Xr=null),fl.forEach(Ox),hl.forEach(Ox)}function mc(s,a){s.blockedOn===a&&(s.blockedOn=null,nh||(nh=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,J2)))}var gc=null;function Rx(s){gc!==s&&(gc=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){gc===s&&(gc=null);for(var a=0;a<s.length;a+=3){var o=s[a],u=s[a+1],m=s[a+2];if(typeof u!="function"){if(th(u||o)===null)continue;break}var x=fi(o);x!==null&&(s.splice(a,3),a-=3,ef(x,{pending:!0,data:m,method:o.method,action:u},u,m))}}))}function ml(s){function a(T){return mc(T,s)}Yr!==null&&mc(Yr,s),Kr!==null&&mc(Kr,s),Xr!==null&&mc(Xr,s),fl.forEach(a),hl.forEach(a);for(var o=0;o<Jr.length;o++){var u=Jr[o];u.blockedOn===s&&(u.blockedOn=null)}for(;0<Jr.length&&(o=Jr[0],o.blockedOn===null);)Mx(o),o.blockedOn===null&&Jr.shift();if(o=(s.ownerDocument||s).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var m=o[u],x=o[u+1],S=m[Qt]||null;if(typeof x=="function")S||Rx(o);else if(S){var k=null;if(x&&x.hasAttribute("formAction")){if(m=x,S=x[Qt]||null)k=S.formAction;else if(th(m)!==null)continue}else k=S.action;typeof k=="function"?o[u+1]=k:(o.splice(u,3),u-=3),Rx(o)}}}function rh(s){this._internalRoot=s}yc.prototype.render=rh.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(r(409));var o=a.current,u=un();Ex(o,u,s,a,null,null)},yc.prototype.unmount=rh.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;Ex(s.current,2,null,s,null,null),Zo(),a[ui]=null}};function yc(s){this._internalRoot=s}yc.prototype.unstable_scheduleHydration=function(s){if(s){var a=Xm();s={blockedOn:null,target:s,priority:a};for(var o=0;o<Jr.length&&a!==0&&a<Jr[o].priority;o++);Jr.splice(o,0,s),o===0&&Mx(s)}};var Dx=e.version;if(Dx!=="19.1.0")throw Error(r(527,Dx,"19.1.0"));te.findDOMNode=function(s){var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=f(a),s=s!==null?h(s):null,s=s===null?null:s.stateNode,s};var Q2={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:V,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xc.isDisabled&&xc.supportsFiber)try{Ar=xc.inject(Q2),At=xc}catch{}}return yl.createRoot=function(s,a){if(!i(s))throw Error(r(299));var o=!1,u="",m=X0,x=J0,S=Q0,k=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(u=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(x=a.onCaughtError),a.onRecoverableError!==void 0&&(S=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(k=a.unstable_transitionCallbacks)),a=Nx(s,1,!1,null,null,o,u,m,x,S,k,null),s[ui]=a.current,Hf(s),new rh(a)},yl.hydrateRoot=function(s,a,o){if(!i(s))throw Error(r(299));var u=!1,m="",x=X0,S=J0,k=Q0,T=null,H=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(x=o.onUncaughtError),o.onCaughtError!==void 0&&(S=o.onCaughtError),o.onRecoverableError!==void 0&&(k=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(T=o.unstable_transitionCallbacks),o.formState!==void 0&&(H=o.formState)),a=Nx(s,1,!0,a,o??null,u,m,x,S,k,T,H),a.context=Cx(null),o=a.current,u=un(),u=Yu(u),m=Dr(u),m.callback=null,Lr(o,m,u),o=u,a.current.lanes=o,wa(a,o),Gn(a),s[ui]=a.current,Hf(s),new yc(a)},yl.version="19.1.0",yl}var Vx;function aC(){if(Vx)return ah.exports;Vx=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),ah.exports=iC(),ah.exports}var lC=aC();const oC=Xp(lC);var xl={},Fx;function cC(){if(Fx)return xl;Fx=1,Object.defineProperty(xl,"__esModule",{value:!0}),xl.parse=c,xl.serialize=h;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,l=(()=>{const b=function(){};return b.prototype=Object.create(null),b})();function c(b,v){const w=new l,N=b.length;if(N<2)return w;const C=(v==null?void 0:v.decode)||g;let j=0;do{const O=b.indexOf("=",j);if(O===-1)break;const M=b.indexOf(";",j),A=M===-1?N:M;if(O>A){j=b.lastIndexOf(";",O-1)+1;continue}const L=d(b,j,O),B=f(b,O,L),F=b.slice(L,B);if(w[F]===void 0){let _=d(b,O+1,A),re=f(b,A,_);const le=C(b.slice(_,re));w[F]=le}j=A+1}while(j<N);return w}function d(b,v,w){do{const N=b.charCodeAt(v);if(N!==32&&N!==9)return v}while(++v<w);return w}function f(b,v,w){for(;v>w;){const N=b.charCodeAt(--v);if(N!==32&&N!==9)return v+1}return w}function h(b,v,w){const N=(w==null?void 0:w.encode)||encodeURIComponent;if(!n.test(b))throw new TypeError(`argument name is invalid: ${b}`);const C=N(v);if(!e.test(C))throw new TypeError(`argument val is invalid: ${v}`);let j=b+"="+C;if(!w)return j;if(w.maxAge!==void 0){if(!Number.isInteger(w.maxAge))throw new TypeError(`option maxAge is invalid: ${w.maxAge}`);j+="; Max-Age="+w.maxAge}if(w.domain){if(!t.test(w.domain))throw new TypeError(`option domain is invalid: ${w.domain}`);j+="; Domain="+w.domain}if(w.path){if(!r.test(w.path))throw new TypeError(`option path is invalid: ${w.path}`);j+="; Path="+w.path}if(w.expires){if(!y(w.expires)||!Number.isFinite(w.expires.valueOf()))throw new TypeError(`option expires is invalid: ${w.expires}`);j+="; Expires="+w.expires.toUTCString()}if(w.httpOnly&&(j+="; HttpOnly"),w.secure&&(j+="; Secure"),w.partitioned&&(j+="; Partitioned"),w.priority)switch(typeof w.priority=="string"?w.priority.toLowerCase():void 0){case"low":j+="; Priority=Low";break;case"medium":j+="; Priority=Medium";break;case"high":j+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${w.priority}`)}if(w.sameSite)switch(typeof w.sameSite=="string"?w.sameSite.toLowerCase():w.sameSite){case!0:case"strict":j+="; SameSite=Strict";break;case"lax":j+="; SameSite=Lax";break;case"none":j+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${w.sameSite}`)}return j}function g(b){if(b.indexOf("%")===-1)return b;try{return decodeURIComponent(b)}catch{return b}}function y(b){return i.call(b)==="[object Date]"}return xl}cC();var $x="popstate";function uC(n={}){function e(r,i){let{pathname:l,search:c,hash:d}=r.location;return mp("",{pathname:l,search:c,hash:d},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:Hl(i)}return fC(e,t,null,n)}function et(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Pn(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function dC(){return Math.random().toString(36).substring(2,10)}function Gx(n,e){return{usr:n.state,key:n.key,idx:e}}function mp(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?ma(e):e,state:t,key:e&&e.key||r||dC()}}function Hl({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function ma(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function fC(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:l=!1}=r,c=i.history,d="POP",f=null,h=g();h==null&&(h=0,c.replaceState({...c.state,idx:h},""));function g(){return(c.state||{idx:null}).idx}function y(){d="POP";let C=g(),j=C==null?null:C-h;h=C,f&&f({action:d,location:N.location,delta:j})}function b(C,j){d="PUSH";let O=mp(N.location,C,j);h=g()+1;let M=Gx(O,h),A=N.createHref(O);try{c.pushState(M,"",A)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;i.location.assign(A)}l&&f&&f({action:d,location:N.location,delta:1})}function v(C,j){d="REPLACE";let O=mp(N.location,C,j);h=g();let M=Gx(O,h),A=N.createHref(O);c.replaceState(M,"",A),l&&f&&f({action:d,location:N.location,delta:0})}function w(C){return hC(C)}let N={get action(){return d},get location(){return n(i,c)},listen(C){if(f)throw new Error("A history only accepts one active listener");return i.addEventListener($x,y),f=C,()=>{i.removeEventListener($x,y),f=null}},createHref(C){return e(i,C)},createURL:w,encodeLocation(C){let j=w(C);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:b,replace:v,go(C){return c.go(C)}};return N}function hC(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),et(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:Hl(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function r1(n,e,t="/"){return pC(n,e,t,!1)}function pC(n,e,t,r){let i=typeof e=="string"?ma(e):e,l=Cr(i.pathname||"/",t);if(l==null)return null;let c=s1(n);mC(c);let d=null;for(let f=0;d==null&&f<c.length;++f){let h=kC(l);d=CC(c[f],h,r)}return d}function s1(n,e=[],t=[],r=""){let i=(l,c,d)=>{let f={relativePath:d===void 0?l.path||"":d,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};f.relativePath.startsWith("/")&&(et(f.relativePath.startsWith(r),`Absolute route path "${f.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(r.length));let h=wr([r,f.relativePath]),g=t.concat(f);l.children&&l.children.length>0&&(et(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),s1(l.children,e,g,h)),!(l.path==null&&!l.index)&&e.push({path:h,score:SC(h,l.index),routesMeta:g})};return n.forEach((l,c)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))i(l,c);else for(let f of i1(l.path))i(l,c,f)}),e}function i1(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),l=t.replace(/\?$/,"");if(r.length===0)return i?[l,""]:[l];let c=i1(r.join("/")),d=[];return d.push(...c.map(f=>f===""?l:[l,f].join("/"))),i&&d.push(...c),d.map(f=>n.startsWith("/")&&f===""?"/":f)}function mC(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:NC(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var gC=/^:[\w-]+$/,yC=3,xC=2,bC=1,vC=10,wC=-2,Yx=n=>n==="*";function SC(n,e){let t=n.split("/"),r=t.length;return t.some(Yx)&&(r+=wC),e&&(r+=xC),t.filter(i=>!Yx(i)).reduce((i,l)=>i+(gC.test(l)?yC:l===""?bC:vC),r)}function NC(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function CC(n,e,t=!1){let{routesMeta:r}=n,i={},l="/",c=[];for(let d=0;d<r.length;++d){let f=r[d],h=d===r.length-1,g=l==="/"?e:e.slice(l.length)||"/",y=Hc({path:f.relativePath,caseSensitive:f.caseSensitive,end:h},g),b=f.route;if(!y&&h&&t&&!r[r.length-1].route.index&&(y=Hc({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},g)),!y)return null;Object.assign(i,y.params),c.push({params:i,pathname:wr([l,y.pathname]),pathnameBase:MC(wr([l,y.pathnameBase])),route:b}),y.pathnameBase!=="/"&&(l=wr([l,y.pathnameBase]))}return c}function Hc(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=EC(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let l=i[0],c=l.replace(/(.)\/+$/,"$1"),d=i.slice(1);return{params:r.reduce((h,{paramName:g,isOptional:y},b)=>{if(g==="*"){let w=d[b]||"";c=l.slice(0,l.length-w.length).replace(/(.)\/+$/,"$1")}const v=d[b];return y&&!v?h[g]=void 0:h[g]=(v||"").replace(/%2F/g,"/"),h},{}),pathname:l,pathnameBase:c,pattern:n}}function EC(n,e=!1,t=!0){Pn(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,f)=>(r.push({paramName:d,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function kC(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Pn(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Cr(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function jC(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?ma(n):n;return{pathname:t?t.startsWith("/")?t:AC(t,e):e,search:OC(r),hash:RC(i)}}function AC(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function uh(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function TC(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Qp(n){let e=TC(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function Zp(n,e,t,r=!1){let i;typeof n=="string"?i=ma(n):(i={...n},et(!i.pathname||!i.pathname.includes("?"),uh("?","pathname","search",i)),et(!i.pathname||!i.pathname.includes("#"),uh("#","pathname","hash",i)),et(!i.search||!i.search.includes("#"),uh("#","search","hash",i)));let l=n===""||i.pathname==="",c=l?"/":i.pathname,d;if(c==null)d=t;else{let y=e.length-1;if(!r&&c.startsWith("..")){let b=c.split("/");for(;b[0]==="..";)b.shift(),y-=1;i.pathname=b.join("/")}d=y>=0?e[y]:"/"}let f=jC(i,d),h=c&&c!=="/"&&c.endsWith("/"),g=(l||c===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(h||g)&&(f.pathname+="/"),f}var wr=n=>n.join("/").replace(/\/\/+/g,"/"),MC=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),OC=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,RC=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function DC(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var a1=["POST","PUT","PATCH","DELETE"];new Set(a1);var LC=["GET",...a1];new Set(LC);var ga=E.createContext(null);ga.displayName="DataRouter";var Au=E.createContext(null);Au.displayName="DataRouterState";var l1=E.createContext({isTransitioning:!1});l1.displayName="ViewTransition";var _C=E.createContext(new Map);_C.displayName="Fetchers";var zC=E.createContext(null);zC.displayName="Await";var Un=E.createContext(null);Un.displayName="Navigation";var Wl=E.createContext(null);Wl.displayName="Location";var In=E.createContext({outlet:null,matches:[],isDataRoute:!1});In.displayName="Route";var Wp=E.createContext(null);Wp.displayName="RouteError";function BC(n,{relative:e}={}){et(ya(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=E.useContext(Un),{hash:i,pathname:l,search:c}=eo(n,{relative:e}),d=l;return t!=="/"&&(d=l==="/"?t:wr([t,l])),r.createHref({pathname:d,search:c,hash:i})}function ya(){return E.useContext(Wl)!=null}function kr(){return et(ya(),"useLocation() may be used only in the context of a <Router> component."),E.useContext(Wl).location}var o1="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function c1(n){E.useContext(Un).static||E.useLayoutEffect(n)}function jr(){let{isDataRoute:n}=E.useContext(In);return n?JC():PC()}function PC(){et(ya(),"useNavigate() may be used only in the context of a <Router> component.");let n=E.useContext(ga),{basename:e,navigator:t}=E.useContext(Un),{matches:r}=E.useContext(In),{pathname:i}=kr(),l=JSON.stringify(Qp(r)),c=E.useRef(!1);return c1(()=>{c.current=!0}),E.useCallback((f,h={})=>{if(Pn(c.current,o1),!c.current)return;if(typeof f=="number"){t.go(f);return}let g=Zp(f,JSON.parse(l),i,h.relative==="path");n==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:wr([e,g.pathname])),(h.replace?t.replace:t.push)(g,h.state,h)},[e,t,l,i,n])}E.createContext(null);function Tu(){let{matches:n}=E.useContext(In),e=n[n.length-1];return e?e.params:{}}function eo(n,{relative:e}={}){let{matches:t}=E.useContext(In),{pathname:r}=kr(),i=JSON.stringify(Qp(t));return E.useMemo(()=>Zp(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function HC(n,e){return u1(n,e)}function u1(n,e,t,r){var O;et(ya(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i,static:l}=E.useContext(Un),{matches:c}=E.useContext(In),d=c[c.length-1],f=d?d.params:{},h=d?d.pathname:"/",g=d?d.pathnameBase:"/",y=d&&d.route;{let M=y&&y.path||"";d1(h,!y||M.endsWith("*")||M.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${M}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${M}"> to <Route path="${M==="/"?"*":`${M}/*`}">.`)}let b=kr(),v;if(e){let M=typeof e=="string"?ma(e):e;et(g==="/"||((O=M.pathname)==null?void 0:O.startsWith(g)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${M.pathname}" was given in the \`location\` prop.`),v=M}else v=b;let w=v.pathname||"/",N=w;if(g!=="/"){let M=g.replace(/^\//,"").split("/");N="/"+w.replace(/^\//,"").split("/").slice(M.length).join("/")}let C=!l&&t&&t.matches&&t.matches.length>0?t.matches:r1(n,{pathname:N});Pn(y||C!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),Pn(C==null||C[C.length-1].route.element!==void 0||C[C.length-1].route.Component!==void 0||C[C.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let j=FC(C&&C.map(M=>Object.assign({},M,{params:Object.assign({},f,M.params),pathname:wr([g,i.encodeLocation?i.encodeLocation(M.pathname).pathname:M.pathname]),pathnameBase:M.pathnameBase==="/"?g:wr([g,i.encodeLocation?i.encodeLocation(M.pathnameBase).pathname:M.pathnameBase])})),c,t,r);return e&&j?E.createElement(Wl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},j):j}function UC(){let n=XC(),e=DC(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},l={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=E.createElement(E.Fragment,null,E.createElement("p",null,"💿 Hey developer 👋"),E.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",E.createElement("code",{style:l},"ErrorBoundary")," or"," ",E.createElement("code",{style:l},"errorElement")," prop on your route.")),E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},e),t?E.createElement("pre",{style:i},t):null,c)}var IC=E.createElement(UC,null),qC=class extends E.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?E.createElement(In.Provider,{value:this.props.routeContext},E.createElement(Wp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function VC({routeContext:n,match:e,children:t}){let r=E.useContext(ga);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),E.createElement(In.Provider,{value:n},t)}function FC(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let i=n,l=t==null?void 0:t.errors;if(l!=null){let f=i.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);et(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),i=i.slice(0,Math.min(i.length,f+1))}let c=!1,d=-1;if(t)for(let f=0;f<i.length;f++){let h=i[f];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(d=f),h.route.id){let{loaderData:g,errors:y}=t,b=h.route.loader&&!g.hasOwnProperty(h.route.id)&&(!y||y[h.route.id]===void 0);if(h.route.lazy||b){c=!0,d>=0?i=i.slice(0,d+1):i=[i[0]];break}}}return i.reduceRight((f,h,g)=>{let y,b=!1,v=null,w=null;t&&(y=l&&h.route.id?l[h.route.id]:void 0,v=h.route.errorElement||IC,c&&(d<0&&g===0?(d1("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,w=null):d===g&&(b=!0,w=h.route.hydrateFallbackElement||null)));let N=e.concat(i.slice(0,g+1)),C=()=>{let j;return y?j=v:b?j=w:h.route.Component?j=E.createElement(h.route.Component,null):h.route.element?j=h.route.element:j=f,E.createElement(VC,{match:h,routeContext:{outlet:f,matches:N,isDataRoute:t!=null},children:j})};return t&&(h.route.ErrorBoundary||h.route.errorElement||g===0)?E.createElement(qC,{location:t.location,revalidation:t.revalidation,component:v,error:y,children:C(),routeContext:{outlet:null,matches:N,isDataRoute:!0}}):C()},null)}function em(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function $C(n){let e=E.useContext(ga);return et(e,em(n)),e}function GC(n){let e=E.useContext(Au);return et(e,em(n)),e}function YC(n){let e=E.useContext(In);return et(e,em(n)),e}function tm(n){let e=YC(n),t=e.matches[e.matches.length-1];return et(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function KC(){return tm("useRouteId")}function XC(){var r;let n=E.useContext(Wp),e=GC("useRouteError"),t=tm("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function JC(){let{router:n}=$C("useNavigate"),e=tm("useNavigate"),t=E.useRef(!1);return c1(()=>{t.current=!0}),E.useCallback(async(i,l={})=>{Pn(t.current,o1),t.current&&(typeof i=="number"?n.navigate(i):await n.navigate(i,{fromRouteId:e,...l}))},[n,e])}var Kx={};function d1(n,e,t){!e&&!Kx[n]&&(Kx[n]=!0,Pn(!1,t))}E.memo(QC);function QC({routes:n,future:e,state:t}){return u1(n,void 0,t,e)}function gp({to:n,replace:e,state:t,relative:r}){et(ya(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=E.useContext(Un);Pn(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=E.useContext(In),{pathname:c}=kr(),d=jr(),f=Zp(n,Qp(l),c,r==="path"),h=JSON.stringify(f);return E.useEffect(()=>{d(JSON.parse(h),{replace:e,state:t,relative:r})},[d,h,r,e,t]),null}function St(n){et(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function ZC({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:l=!1}){et(!ya(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=n.replace(/^\/*/,"/"),d=E.useMemo(()=>({basename:c,navigator:i,static:l,future:{}}),[c,i,l]);typeof t=="string"&&(t=ma(t));let{pathname:f="/",search:h="",hash:g="",state:y=null,key:b="default"}=t,v=E.useMemo(()=>{let w=Cr(f,c);return w==null?null:{location:{pathname:w,search:h,hash:g,state:y,key:b},navigationType:r}},[c,f,h,g,y,b,r]);return Pn(v!=null,`<Router basename="${c}"> is not able to match the URL "${f}${h}${g}" because it does not start with the basename, so the <Router> won't render anything.`),v==null?null:E.createElement(Un.Provider,{value:d},E.createElement(Wl.Provider,{children:e,value:v}))}function WC({children:n,location:e}){return HC(yp(n),e)}function yp(n,e=[]){let t=[];return E.Children.forEach(n,(r,i)=>{if(!E.isValidElement(r))return;let l=[...e,i];if(r.type===E.Fragment){t.push.apply(t,yp(r.props.children,l));return}et(r.type===St,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),et(!r.props.index||!r.props.children,"An index route cannot have child routes.");let c={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=yp(r.props.children,l)),t.push(c)}),t}var Oc="get",Rc="application/x-www-form-urlencoded";function Mu(n){return n!=null&&typeof n.tagName=="string"}function eE(n){return Mu(n)&&n.tagName.toLowerCase()==="button"}function tE(n){return Mu(n)&&n.tagName.toLowerCase()==="form"}function nE(n){return Mu(n)&&n.tagName.toLowerCase()==="input"}function rE(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function sE(n,e){return n.button===0&&(!e||e==="_self")&&!rE(n)}var bc=null;function iE(){if(bc===null)try{new FormData(document.createElement("form"),0),bc=!1}catch{bc=!0}return bc}var aE=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function dh(n){return n!=null&&!aE.has(n)?(Pn(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Rc}"`),null):n}function lE(n,e){let t,r,i,l,c;if(tE(n)){let d=n.getAttribute("action");r=d?Cr(d,e):null,t=n.getAttribute("method")||Oc,i=dh(n.getAttribute("enctype"))||Rc,l=new FormData(n)}else if(eE(n)||nE(n)&&(n.type==="submit"||n.type==="image")){let d=n.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=n.getAttribute("formaction")||d.getAttribute("action");if(r=f?Cr(f,e):null,t=n.getAttribute("formmethod")||d.getAttribute("method")||Oc,i=dh(n.getAttribute("formenctype"))||dh(d.getAttribute("enctype"))||Rc,l=new FormData(d,n),!iE()){let{name:h,type:g,value:y}=n;if(g==="image"){let b=h?`${h}.`:"";l.append(`${b}x`,"0"),l.append(`${b}y`,"0")}else h&&l.append(h,y)}}else{if(Mu(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Oc,r=null,i=Rc,c=n}return l&&i==="text/plain"&&(c=l,l=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:l,body:c}}function nm(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function oE(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function cE(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function uE(n,e,t){let r=await Promise.all(n.map(async i=>{let l=e.routes[i.route.id];if(l){let c=await oE(l,t);return c.links?c.links():[]}return[]}));return pE(r.flat(1).filter(cE).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function Xx(n,e,t,r,i,l){let c=(f,h)=>t[h]?f.route.id!==t[h].route.id:!0,d=(f,h)=>{var g;return t[h].pathname!==f.pathname||((g=t[h].route.path)==null?void 0:g.endsWith("*"))&&t[h].params["*"]!==f.params["*"]};return l==="assets"?e.filter((f,h)=>c(f,h)||d(f,h)):l==="data"?e.filter((f,h)=>{var y;let g=r.routes[f.route.id];if(!g||!g.hasLoader)return!1;if(c(f,h)||d(f,h))return!0;if(f.route.shouldRevalidate){let b=f.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((y=t[0])==null?void 0:y.params)||{},nextUrl:new URL(n,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function dE(n,e,{includeHydrateFallback:t}={}){return fE(n.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let l=[i.module];return i.clientActionModule&&(l=l.concat(i.clientActionModule)),i.clientLoaderModule&&(l=l.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(l=l.concat(i.hydrateFallbackModule)),i.imports&&(l=l.concat(i.imports)),l}).flat(1))}function fE(n){return[...new Set(n)]}function hE(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function pE(n,e){let t=new Set;return new Set(e),n.reduce((r,i)=>{let l=JSON.stringify(hE(i));return t.has(l)||(t.add(l),r.push({key:l,link:i})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var mE=new Set([100,101,204,205]);function gE(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&Cr(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function f1(){let n=E.useContext(ga);return nm(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function yE(){let n=E.useContext(Au);return nm(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var rm=E.createContext(void 0);rm.displayName="FrameworkContext";function h1(){let n=E.useContext(rm);return nm(n,"You must render this element inside a <HydratedRouter> element"),n}function xE(n,e){let t=E.useContext(rm),[r,i]=E.useState(!1),[l,c]=E.useState(!1),{onFocus:d,onBlur:f,onMouseEnter:h,onMouseLeave:g,onTouchStart:y}=e,b=E.useRef(null);E.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let N=j=>{j.forEach(O=>{c(O.isIntersecting)})},C=new IntersectionObserver(N,{threshold:.5});return b.current&&C.observe(b.current),()=>{C.disconnect()}}},[n]),E.useEffect(()=>{if(r){let N=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(N)}}},[r]);let v=()=>{i(!0)},w=()=>{i(!1),c(!1)};return t?n!=="intent"?[l,b,{}]:[l,b,{onFocus:bl(d,v),onBlur:bl(f,w),onMouseEnter:bl(h,v),onMouseLeave:bl(g,w),onTouchStart:bl(y,v)}]:[!1,b,{}]}function bl(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function bE({page:n,...e}){let{router:t}=f1(),r=E.useMemo(()=>r1(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?E.createElement(wE,{page:n,matches:r,...e}):null}function vE(n){let{manifest:e,routeModules:t}=h1(),[r,i]=E.useState([]);return E.useEffect(()=>{let l=!1;return uE(n,e,t).then(c=>{l||i(c)}),()=>{l=!0}},[n,e,t]),r}function wE({page:n,matches:e,...t}){let r=kr(),{manifest:i,routeModules:l}=h1(),{basename:c}=f1(),{loaderData:d,matches:f}=yE(),h=E.useMemo(()=>Xx(n,e,f,i,r,"data"),[n,e,f,i,r]),g=E.useMemo(()=>Xx(n,e,f,i,r,"assets"),[n,e,f,i,r]),y=E.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let w=new Set,N=!1;if(e.forEach(j=>{var M;let O=i.routes[j.route.id];!O||!O.hasLoader||(!h.some(A=>A.route.id===j.route.id)&&j.route.id in d&&((M=l[j.route.id])!=null&&M.shouldRevalidate)||O.hasClientLoader?N=!0:w.add(j.route.id))}),w.size===0)return[];let C=gE(n,c);return N&&w.size>0&&C.searchParams.set("_routes",e.filter(j=>w.has(j.route.id)).map(j=>j.route.id).join(",")),[C.pathname+C.search]},[c,d,r,i,h,e,n,l]),b=E.useMemo(()=>dE(g,i),[g,i]),v=vE(g);return E.createElement(E.Fragment,null,y.map(w=>E.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...t})),b.map(w=>E.createElement("link",{key:w,rel:"modulepreload",href:w,...t})),v.map(({key:w,link:N})=>E.createElement("link",{key:w,...N})))}function SE(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var p1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{p1&&(window.__reactRouterVersion="7.6.0")}catch{}function NE({basename:n,children:e,window:t}){let r=E.useRef();r.current==null&&(r.current=uC({window:t,v5Compat:!0}));let i=r.current,[l,c]=E.useState({action:i.action,location:i.location}),d=E.useCallback(f=>{E.startTransition(()=>c(f))},[c]);return E.useLayoutEffect(()=>i.listen(d),[i,d]),E.createElement(ZC,{basename:n,children:e,location:l.location,navigationType:l.action,navigator:i})}var m1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ye=E.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:l,replace:c,state:d,target:f,to:h,preventScrollReset:g,viewTransition:y,...b},v){let{basename:w}=E.useContext(Un),N=typeof h=="string"&&m1.test(h),C,j=!1;if(typeof h=="string"&&N&&(C=h,p1))try{let re=new URL(window.location.href),le=h.startsWith("//")?new URL(re.protocol+h):new URL(h),$=Cr(le.pathname,w);le.origin===re.origin&&$!=null?h=$+le.search+le.hash:j=!0}catch{Pn(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let O=BC(h,{relative:i}),[M,A,L]=xE(r,b),B=jE(h,{replace:c,state:d,target:f,preventScrollReset:g,relative:i,viewTransition:y});function F(re){e&&e(re),re.defaultPrevented||B(re)}let _=E.createElement("a",{...b,...L,href:C||O,onClick:j||l?e:F,ref:SE(v,A),target:f,"data-discover":!N&&t==="render"?"true":void 0});return M&&!N?E.createElement(E.Fragment,null,_,E.createElement(bE,{page:O})):_});ye.displayName="Link";var CE=E.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:l,to:c,viewTransition:d,children:f,...h},g){let y=eo(c,{relative:h.relative}),b=kr(),v=E.useContext(Au),{navigator:w,basename:N}=E.useContext(Un),C=v!=null&&RE(y)&&d===!0,j=w.encodeLocation?w.encodeLocation(y).pathname:y.pathname,O=b.pathname,M=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;t||(O=O.toLowerCase(),M=M?M.toLowerCase():null,j=j.toLowerCase()),M&&N&&(M=Cr(M,N)||M);const A=j!=="/"&&j.endsWith("/")?j.length-1:j.length;let L=O===j||!i&&O.startsWith(j)&&O.charAt(A)==="/",B=M!=null&&(M===j||!i&&M.startsWith(j)&&M.charAt(j.length)==="/"),F={isActive:L,isPending:B,isTransitioning:C},_=L?e:void 0,re;typeof r=="function"?re=r(F):re=[r,L?"active":null,B?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let le=typeof l=="function"?l(F):l;return E.createElement(ye,{...h,"aria-current":_,className:re,ref:g,style:le,to:c,viewTransition:d},typeof f=="function"?f(F):f)});CE.displayName="NavLink";var EE=E.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:l,method:c=Oc,action:d,onSubmit:f,relative:h,preventScrollReset:g,viewTransition:y,...b},v)=>{let w=ME(),N=OE(d,{relative:h}),C=c.toLowerCase()==="get"?"get":"post",j=typeof d=="string"&&m1.test(d),O=M=>{if(f&&f(M),M.defaultPrevented)return;M.preventDefault();let A=M.nativeEvent.submitter,L=(A==null?void 0:A.getAttribute("formmethod"))||c;w(A||M.currentTarget,{fetcherKey:e,method:L,navigate:t,replace:i,state:l,relative:h,preventScrollReset:g,viewTransition:y})};return E.createElement("form",{ref:v,method:C,action:N,onSubmit:r?f:O,...b,"data-discover":!j&&n==="render"?"true":void 0})});EE.displayName="Form";function kE(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function g1(n){let e=E.useContext(ga);return et(e,kE(n)),e}function jE(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:l,viewTransition:c}={}){let d=jr(),f=kr(),h=eo(n,{relative:l});return E.useCallback(g=>{if(sE(g,e)){g.preventDefault();let y=t!==void 0?t:Hl(f)===Hl(h);d(n,{replace:y,state:r,preventScrollReset:i,relative:l,viewTransition:c})}},[f,d,h,t,r,e,n,i,l,c])}var AE=0,TE=()=>`__${String(++AE)}__`;function ME(){let{router:n}=g1("useSubmit"),{basename:e}=E.useContext(Un),t=KC();return E.useCallback(async(r,i={})=>{let{action:l,method:c,encType:d,formData:f,body:h}=lE(r,e);if(i.navigate===!1){let g=i.fetcherKey||TE();await n.fetch(g,t,i.action||l,{preventScrollReset:i.preventScrollReset,formData:f,body:h,formMethod:i.method||c,formEncType:i.encType||d,flushSync:i.flushSync})}else await n.navigate(i.action||l,{preventScrollReset:i.preventScrollReset,formData:f,body:h,formMethod:i.method||c,formEncType:i.encType||d,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[n,e,t])}function OE(n,{relative:e}={}){let{basename:t}=E.useContext(Un),r=E.useContext(In);et(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),l={...eo(n||".",{relative:e})},c=kr();if(n==null){l.search=c.search;let d=new URLSearchParams(l.search),f=d.getAll("index");if(f.some(g=>g==="")){d.delete("index"),f.filter(y=>y).forEach(y=>d.append("index",y));let g=d.toString();l.search=g?`?${g}`:""}}return(!n||n===".")&&i.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:wr([t,l.pathname])),Hl(l)}function RE(n,e={}){let t=E.useContext(l1);et(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=g1("useViewTransitionState"),i=eo(n,{relative:e.relative});if(!t.isTransitioning)return!1;let l=Cr(t.currentLocation.pathname,r)||t.currentLocation.pathname,c=Cr(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Hc(i.pathname,c)!=null||Hc(i.pathname,l)!=null}[...mE];var DE=n1();const LE=Xp(DE),Ul={BASE_URL:"https://api.shopmaraph.com/api"},y1=E.createContext(void 0),vl=Ul.BASE_URL,_E=({children:n})=>{const[e,t]=E.useState(null),[r,i]=E.useState(null),[l,c]=E.useState(!0);E.useEffect(()=>{(async()=>{try{const N=localStorage.getItem("user"),C=localStorage.getItem("token");if(N&&C){t(JSON.parse(N)),i(C);const j=await fetch(`${vl}/user`,{method:"GET",headers:{Authorization:`Bearer ${C}`,Accept:"application/json"},credentials:"include"});if(!j.ok)t(null),i(null),localStorage.removeItem("user"),localStorage.removeItem("token"),console.log("Token validation failed during initialization");else{const O=await j.json();O.success&&O.user&&(t(O.user),localStorage.setItem("user",JSON.stringify(O.user)))}}}catch(N){console.error("Error loading user or validating token:",N),t(null),i(null),localStorage.removeItem("user"),localStorage.removeItem("token")}finally{c(!1)}})()},[]);const d=!!e&&!!r,f=(e==null?void 0:e.role)==="admin",h=async()=>!!r,g=async(w,N,C,j,O)=>{try{const M={name:w,email:N,password:C,password_confirmation:j};O&&(M.cart_items=O);const A=await fetch(`${vl}/register`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify(M)});if(!A.ok){const B=await A.json();throw new Error(B.message||"Registration failed")}const L=await A.json();return t(L.user),i(L.token),localStorage.setItem("user",JSON.stringify(L.user)),localStorage.setItem("token",L.token),{user:L.user,token:L.token}}catch(M){throw console.error("Registration error:",M),M}},y=async(w,N)=>{try{const C=await fetch(`${vl}/login`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({email:w,password:N})});if(!C.ok){const O=await C.json();throw new Error(O.message||"Login failed")}const j=await C.json();t(j.user),i(j.token),localStorage.setItem("user",JSON.stringify(j.user)),localStorage.setItem("token",j.token)}catch(C){throw console.error("Login error:",C),C}},b=async()=>{if(r)try{await fetch(`${vl}/logout`,{method:"POST",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json",Accept:"application/json"},credentials:"include"})}catch(w){console.error("Logout error:",w)}t(null),i(null),localStorage.removeItem("user"),localStorage.removeItem("token")},v=async()=>{if(console.log("migrateGuestCart called, token:",r?r.substring(0,10)+"...":"missing"),!r)return console.log("No token available, cannot migrate cart"),!1;try{const w="guest_cart",N=localStorage.getItem(w);if(console.log("Guest cart from localStorage:",N?"found":"not found","Key:",w),!N)return!1;const C=JSON.parse(N);if(console.log("Parsed guest cart:",C.length,"items"),!C||!C.length)return!1;for(const j of C){console.log("Adding item to cart:",j.product.id,j.size,j.quantity);const M=await(await fetch(`${vl}/cart/add`,{method:"POST",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({product_id:j.product.id,size:j.size,quantity:j.quantity})})).json();console.log("API response:",M.success?"success":"failed",M)}return localStorage.removeItem(w),console.log("Guest cart cleared from localStorage"),!0}catch(w){return console.error("Error migrating guest cart:",w),!1}};return l?p.jsx("div",{children:"Loading..."}):p.jsx(y1.Provider,{value:{user:e,token:r,isAuthenticated:d,isAdmin:f,login:y,register:g,logout:b,validateToken:h,migrateGuestCart:v},children:n})},ft=()=>{const n=E.useContext(y1);if(n===void 0)throw new Error("useAuth must be used within an AuthProvider");return n},zE=Ul.BASE_URL,je=async(n,e="GET",t,r,i=!1)=>{const l=`${zE}${n}`,c={...r,Accept:"application/json"};!i&&e!=="GET"&&(c["Content-Type"]="application/json");const d={method:e,headers:c,credentials:"include"};e!=="GET"&&t&&(d.body=i?t:JSON.stringify(t));try{const f=await fetch(l,d),h=await f.json();if(!f.ok){if(h.errors){const g=Object.values(h.errors).flat().join("; ");throw new Error(g??"")}throw h.message?new Error(h.message):new Error("Something went wrong")}return h}catch(f){throw console.error(`API Request Error (${n}):`,f),f}},gs={getAllProducts:n=>{const e=n?`?${Object.entries(n).filter(([t,r])=>r!=null&&r!=="").map(([t,r])=>`${t}=${encodeURIComponent(String(r))}`).join("&")}`:"";return je(`/products${e}`)},getProductById:n=>je(`/products/${n}`),createProduct:(n,e)=>je("/products","POST",e,{Authorization:`Bearer ${n}`},!0),updateProduct:(n,e,t)=>(t.append("_method","PUT"),je(`/products/${e}`,"POST",t,{Authorization:`Bearer ${n}`},!0)),deleteProduct:(n,e)=>je(`/products/${e}`,"DELETE",null,{Authorization:`Bearer ${n}`}),restockProduct:(n,e,t)=>je(`/products/${e}/restock`,"POST",t,{Authorization:`Bearer ${n}`})},wl={getCart:n=>{console.log(n);const t=n["X-Guest-ID"]?"/guest/cart":"/cart";return je(t,"GET",null,n)},addToCart:(n,e)=>{const r=n["X-Guest-ID"]?"/guest/cart/add":"/cart/add";return je(r,"POST",{product_id:e},n)},removeFromCart:(n,e)=>{const r=n["X-Guest-ID"]?"/guest/cart/remove":"/cart/remove";return je(r,"POST",{cart_item_id:e},n)},clearCart:n=>{const t=n["X-Guest-ID"]?"/guest/cart/clear":"/cart/clear";return je(t,"POST",null,n)},putProductsOnHold:n=>{const t=n["X-Guest-ID"]?"/guest/cart/hold":"/cart/hold";return je(t,"POST",null,n)}},oa={createOrder:(n,e)=>je("/orders","POST",e,{Authorization:`Bearer ${n}`},!0),createGuestOrder:n=>je("/guest-orders","POST",n,{},!0),getUserOrders:n=>je("/orders","GET",null,{Authorization:`Bearer ${n}`}),getUserOrder:(n,e)=>je(`/orders/${e}`,"GET",null,{Authorization:`Bearer ${n}`}),getAllOrders:(n,e)=>{const t=e?`?status=${e}`:"";return je(`/admin/orders${t}`,"GET",null,{Authorization:`Bearer ${n}`})},getOrder:(n,e)=>je(`/admin/orders/${e}`,"GET",null,{Authorization:`Bearer ${n}`}),updateOrderStatus:(n,e,t,r)=>je(`/admin/orders/${e}/status`,"POST",{status:t,admin_notes:r},{Authorization:`Bearer ${n}`}),getGuestOrders:n=>je(`/guest-orders/${n}`,"GET",null,{})},Cl={getAll:n=>je("/admin/hero-carousel","GET",null,{Authorization:`Bearer ${n}`}),create:(n,e)=>je("/admin/hero-carousel","POST",e,{Authorization:`Bearer ${n}`},!0),update:(n,e,t)=>(t.append("_method","PUT"),je(`/admin/hero-carousel/${e}`,"POST",t,{Authorization:`Bearer ${n}`},!0)),delete:(n,e)=>je(`/admin/hero-carousel/${e}`,"DELETE",null,{Authorization:`Bearer ${n}`}),updateInterval:(n,e)=>je("/admin/hero-carousel/interval","POST",{interval:e},{Authorization:`Bearer ${n}`}),getPublic:()=>je("/hero-carousel","GET")},Jx={getAllUsers:n=>je("/admin/users","GET",null,{Authorization:`Bearer ${n}`}),changeUserPassword:(n,e,t,r)=>je(`/admin/users/${e}/change-password`,"POST",{password:t,password_confirmation:r},{Authorization:`Bearer ${n}`})},Qx={getProfile:n=>je("/guest/profile","GET",null,n),saveProfile:(n,e)=>je("/guest/profile","POST",e,n)},BE=({message:n,type:e="info",duration:t=3e3,onClose:r,isVisible:i})=>{if(E.useEffect(()=>{if(i){const c=setTimeout(()=>{r()},t);return()=>clearTimeout(c)}},[i,t,r]),!i)return null;const l={success:"bg-green-500",error:"bg-red-500",warning:"bg-yellow-500",info:"bg-blue-500"}[e];return p.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:p.jsxs("div",{className:`${l} text-white px-4 py-3 rounded-md shadow-lg flex items-center`,children:[p.jsx("div",{className:"mr-3",children:n}),p.jsx("button",{onClick:r,className:"text-white hover:text-gray-200",children:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:p.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})})},x1=E.createContext(void 0),PE=({children:n})=>{const[e,t]=E.useState({message:"",type:"info",isVisible:!1}),r=(l,c="info")=>{t({message:l,type:c,isVisible:!0})},i=()=>{t(l=>({...l,isVisible:!1}))};return p.jsxs(x1.Provider,{value:{showToast:r},children:[n,p.jsx(BE,{message:e.message,type:e.type,isVisible:e.isVisible,onClose:i})]})},xa=()=>{const n=E.useContext(x1);if(!n)throw new Error("useToast must be used within a ToastProvider");return n},b1=E.createContext(void 0),Zx="guest_id",HE=({children:n})=>{const{token:e,isAuthenticated:t}=ft(),[r,i]=E.useState([]),[l,c]=E.useState(!1),[d,f]=E.useState(null),{showToast:h}=xa(),g=()=>{let A=localStorage.getItem(Zx);return A||(A=`guest-${Date.now()}-${Math.random().toString(36).substring(2,11)}`,localStorage.setItem(Zx,A)),A},y=()=>{const A={};return t&&e?A.Authorization=`Bearer ${e}`:A["X-Guest-ID"]=g(),A};E.useEffect(()=>{b()},[t,e]);const b=async()=>{c(!0),f(null);try{const A=await wl.getCart(y());i(A.data.items||[])}catch(A){console.error("Error fetching cart:",A),f(A instanceof Error?A.message:"An error occurred while fetching the cart")}finally{c(!1)}},v=async A=>{c(!0),f(null);try{const B=(await gs.getProductById(A.id)).data;if(B.status!=="Available")throw new Error(B.status==="Sold"?"This product is no longer available as it has been sold.":"This product is currently on hold by another customer.");const F=y();await wl.addToCart(F,A.id),await b(),h("Product added to cart!","success")}catch(L){const B=L.message||"Failed to add product to cart";throw h(B,"error"),f(B),L}finally{c(!1)}},w=async A=>{c(!0),f(null);try{const L=await wl.removeFromCart(y(),A.toString());i(L.data.items||[]),h("Item removed from cart","info")}catch(L){console.error("Error removing from cart:",L),f(L instanceof Error?L.message:"An error occurred while removing from cart"),h("Failed to remove item from cart","error")}finally{c(!1)}},N=async()=>{c(!0),f(null);try{const A=await wl.clearCart(y());i(A.data.items||[]),h("Cart cleared successfully","info")}catch(A){console.error("Error clearing cart:",A),f(A instanceof Error?A.message:"An error occurred while clearing cart"),h("Failed to clear cart","error")}finally{c(!1)}},C=async()=>{var A;c(!0),f(null);try{const L=await wl.putProductsOnHold(y());return(A=L.data)!=null&&A.items&&i(L.data.items),b(),{success:L.success,message:L.message,hold_duration:L.hold_duration,hold_expiry_time_in_seconds:L.hold_expiry_time_in_seconds,is_hold_expired:L.is_hold_expired}}catch(L){throw console.error("Error holding products:",L),f(L instanceof Error?L.message:"An error occurred while holding products"),h("Some items in your cart are no longer available. Please remove them before proceeding to checkout.","error"),L}finally{c(!1)}},j=()=>r.length,O=()=>r.reduce((A,L)=>A+Number(L.product.price||0),0),M=A=>r.some(L=>L.product.id===A);return p.jsx(b1.Provider,{value:{cartItems:r,addToCart:v,removeFromCart:w,clearCart:N,getTotalItems:j,getTotalPrice:O,isInCart:M,isLoading:l,error:d,token:e,fetchCart:b,holdProducts:C},children:n})},to=()=>{const n=E.useContext(b1);if(n===void 0)throw new Error("useCart must be used within a CartProvider");return n},UE=()=>{const[n,e]=E.useState(!1),[t,r]=E.useState(!1),{getTotalItems:i}=to(),{user:l,isAuthenticated:c,isAdmin:d,logout:f}=ft(),h=E.useRef(null),[g,y]=E.useState(!1);E.useEffect(()=>{y(!!localStorage.getItem("guest_id"));const N=j=>{j.key==="guest_id"&&y(!!j.newValue)};window.addEventListener("storage",N);const C=()=>y(!0);return window.addEventListener("guest_id_set",C),()=>{window.removeEventListener("storage",N),window.removeEventListener("guest_id_set",C)}},[]),E.useEffect(()=>{n&&y(!!localStorage.getItem("guest_id"))},[n]);const b=()=>{e(!n),t&&r(!1)},v=()=>{r(!t),n&&e(!1)},w=async()=>{await f(),e(!1),r(!1)};return p.jsxs("nav",{className:"bg-white shadow-sm fixed w-full top-0 z-50 ",children:[p.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:p.jsxs("div",{className:"flex justify-between items-center h-16",children:[p.jsx("div",{className:"bg-[rgb(173,104,143)] rounded flex items-center justify-center",style:{height:"100%",width:"200px"},children:p.jsx(ye,{to:"/",className:"p-2",children:p.jsx("img",{src:"/app-logo.jpg",alt:"SHOPMARA PH",className:"h-12 w-auto bg-[rgb(173,104,143)] px-2 py-1 rounded",onError:N=>{const C=N.target;C.src="https://via.placeholder.com/120x40?text=SHOPMARA+PH"}})})}),p.jsxs("div",{className:"hidden md:flex items-center space-x-8",children:[p.jsx(ye,{to:"/products",className:"text-gray-700 hover:text-black transition-colors",children:"All Products"}),p.jsx(ye,{to:"/new",className:"text-gray-700 hover:text-black transition-colors",children:"New Arrivals"}),p.jsx(ye,{to:"/sale",className:"text-gray-700 hover:text-black transition-colors",children:"Sale"}),p.jsx(ye,{to:"/about",className:"text-gray-700 hover:text-black transition-colors",children:"About Us"})]}),p.jsxs("div",{className:"hidden md:flex items-center space-x-6",children:[p.jsxs(ye,{to:"/cart",className:"text-gray-700 hover:text-black transition-colors relative",children:[p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),i()>0&&p.jsx("span",{className:"absolute -top-2 -right-2 bg-black text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:i()})]}),p.jsxs("div",{className:"relative",ref:h,children:[p.jsxs("button",{onClick:v,className:"flex items-center space-x-2 text-gray-700 hover:text-black transition-colors focus:outline-none",children:[p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),p.jsx("span",{className:"text-sm",children:"Account"})]}),t&&p.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50",children:c?p.jsxs(p.Fragment,{children:[d&&p.jsx(ye,{to:"/admin",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:()=>r(!1),children:"Admin Dashboard"}),p.jsx(ye,{to:"/my-orders",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:()=>r(!1),children:"My Orders"}),p.jsxs("button",{onClick:w,className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:["Logout ",l&&`(${l.name})`]})]}):p.jsxs(p.Fragment,{children:[p.jsx(ye,{to:"/login",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:()=>r(!1),children:"Login"}),p.jsx(ye,{to:"/register",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:()=>r(!1),children:"Sign Up"}),g&&p.jsx(ye,{to:"/my-orders",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:()=>r(!1),children:"My Orders"})]})})]})]}),p.jsxs("div",{className:"flex md:hidden items-center space-x-4",children:[p.jsxs(ye,{to:"/cart",className:"text-gray-700 hover:text-black transition-colors relative",children:[p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),i()>0&&p.jsx("span",{className:"absolute -top-2 -right-2 bg-black text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:i()})]}),p.jsx("button",{onClick:b,className:"text-gray-700 hover:text-black focus:outline-none",children:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:n?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16"})})})]})]})}),p.jsx("div",{className:`md:hidden transition-all duration-300 ease-in-out ${n?"max-h-screen":"max-h-0"} overflow-hidden bg-white border-t border-gray-200`,children:p.jsxs("div",{className:"px-4 pt-2 pb-3 space-y-1",children:[p.jsx(ye,{to:"/products",className:"block px-3 py-2 text-base font-medium text-gray-700 hover:text-black hover:bg-gray-50 rounded-md",onClick:()=>e(!1),children:"All Products"}),p.jsx(ye,{to:"/new",className:"block px-3 py-2 text-base font-medium text-gray-700 hover:text-black hover:bg-gray-50 rounded-md",onClick:()=>e(!1),children:"New Arrivals"}),p.jsx(ye,{to:"/sale",className:"block px-3 py-2 text-base font-medium text-gray-700 hover:text-black hover:bg-gray-50 rounded-md",onClick:()=>e(!1),children:"Sale"}),p.jsx(ye,{to:"/about",className:"block px-3 py-2 text-base font-medium text-gray-700 hover:text-black hover:bg-gray-50 rounded-md",onClick:()=>e(!1),children:"About Us"}),p.jsx("div",{className:"pt-4 pb-3 border-t border-gray-200",children:p.jsx("div",{className:"px-3 space-y-1",children:c?p.jsxs(p.Fragment,{children:[d&&p.jsx(ye,{to:"/admin",className:"block px-3 py-2 text-base font-medium text-gray-700 hover:text-black hover:bg-gray-50 rounded-md",onClick:()=>e(!1),children:"Admin Dashboard"}),p.jsx(ye,{to:"/my-orders",className:"block px-3 py-2 text-base font-medium text-gray-700 hover:text-black hover:bg-gray-50 rounded-md",onClick:()=>e(!1),children:"My Orders"}),p.jsxs("button",{onClick:w,className:"block w-full text-left px-3 py-2 text-base font-medium text-gray-700 hover:text-black hover:bg-gray-50 rounded-md",children:["Logout ",l&&`(${l.name})`]})]}):p.jsxs(p.Fragment,{children:[p.jsx(ye,{to:"/login",className:"block px-3 py-2 text-base font-medium text-gray-700 hover:text-black hover:bg-gray-50 rounded-md",onClick:()=>e(!1),children:"Login"}),p.jsx(ye,{to:"/register",className:"block px-3 py-2 text-base font-medium text-gray-700 hover:text-black hover:bg-gray-50 rounded-md",onClick:()=>e(!1),children:"Sign Up"}),g&&p.jsx(ye,{to:"/my-orders",className:"block px-3 py-2 text-base font-medium text-gray-700 hover:text-black hover:bg-gray-50 rounded-md",onClick:()=>e(!1),children:"My Orders"})]})})})]})})]})},IE=()=>{const n=new Date().getFullYear();return p.jsx("footer",{className:"bg-gray-100 pt-12 pb-8 font-body font-light",children:p.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mb-12",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"header-font font-light text-lg mb-4",children:"SHOPMARA PH"}),p.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"ShopMaraPH curates stylish, sustainable vintage pieces that empower modern women to wear confidence and elegance—from office to everyday. With ShopMaraPH, wear your story."}),p.jsxs("div",{className:"flex items-center mb-4 text-gray-600",children:[p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),p.jsx("span",{className:"text-sm",children:"Located in Pasig City, PH"})]}),p.jsxs("div",{className:"flex space-x-4",children:[p.jsx("a",{href:"#",className:"text-gray-500 hover:text-black",children:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{d:"M22.675 0h-21.35c-.732 0-1.325.593-1.325 1.325v21.351c0 .731.593 1.324 1.325 1.324h11.495v-9.294h-3.128v-3.622h3.128v-2.671c0-3.1 1.893-4.788 4.659-4.788 1.325 0 2.463.099 2.795.143v3.24l-1.918.001c-1.504 0-1.795.715-1.795 1.763v2.313h3.587l-.467 3.622h-3.12v9.293h6.116c.73 0 1.323-.593 1.323-1.325v-21.35c0-.732-.593-1.325-1.325-1.325z"})})}),p.jsx("a",{href:"#",className:"text-gray-500 hover:text-black",children:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"})})}),p.jsx("a",{href:"#",className:"text-gray-500 hover:text-black",children:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{d:"M19.59 6.69a4.83 4.83 0 0 1-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 0 1-5.2 1.74 2.89 2.89 0 0 1 2.31-4.64 2.93 2.93 0 0 1 .88.13V9.4a6.84 6.84 0 0 0-1-.05A6.33 6.33 0 0 0 5 20.1a6.34 6.34 0 0 0 10.86-4.43v-7a8.16 8.16 0 0 0 4.77 1.52v-3.4a4.85 4.85 0 0 1-1-.1z"})})})]})]}),p.jsxs("div",{children:[p.jsx("h3",{className:"header-font font-light text-lg mb-4",children:"Shop"}),p.jsxs("ul",{className:"space-y-2",children:[p.jsx("li",{children:p.jsx(ye,{to:"/products",className:"text-gray-600 hover:text-black text-sm",children:"All Products"})}),p.jsx("li",{children:p.jsx(ye,{to:"/new",className:"text-gray-600 hover:text-black text-sm",children:"New Arrivals"})}),p.jsx("li",{children:p.jsx(ye,{to:"/sale",className:"text-gray-600 hover:text-black text-sm",children:"Sale"})})]})]}),p.jsxs("div",{children:[p.jsx("h3",{className:"header-font font-light text-lg mb-4",children:"Company"}),p.jsxs("ul",{className:"space-y-2",children:[p.jsx("li",{children:p.jsx(ye,{to:"/about",className:"text-gray-600 hover:text-black text-sm",children:"About Us"})}),p.jsx("li",{children:p.jsx(ye,{to:"/contact",className:"text-gray-600 hover:text-black text-sm",children:"Contact"})}),p.jsx("li",{children:p.jsx(ye,{to:"/terms",className:"text-gray-600 hover:text-black text-sm",children:"Terms & Conditions"})}),p.jsx("li",{children:p.jsx(ye,{to:"/privacy",className:"text-gray-600 hover:text-black text-sm",children:"Privacy Policy"})})]})]})]}),p.jsxs("div",{className:"border-t border-gray-200 pt-8",children:[p.jsxs("p",{className:"text-sm text-gray-500 text-center",children:["© ",n," SHOPMARA PH. All rights reserved."]}),p.jsx("p",{className:"text-xs text-gray-400 text-center mt-2",children:"All product names, logos, and brands are property of their respective owners. ShopMaraPH is not affiliated with or endorsed by any brand featured."})]})]})})},Xi=n=>({id:n.id,text:n.text,isActive:n.is_active,displayOrder:n.display_order,buttonText:n.button_text,buttonLink:n.button_link,backgroundColor:n.background_color,textColor:n.text_color,createdAt:n.created_at,updatedAt:n.updated_at}),Zs={getActiveAnnouncements:async()=>{try{return(await je("/announcements")).data.map(Xi)}catch(n){return console.error("Error fetching announcements:",n),[]}},getAllAnnouncements:async n=>{const e={};return e.Authorization=`Bearer ${n}`,(await je("/admin/announcements","GET",null,e)).data.map(Xi)},getAnnouncementById:async(n,e)=>{const t={};t.Authorization=`Bearer ${n}`;const r=await je(`/admin/announcements/${e}`,"GET",null,t);return Xi(r.data)},createAnnouncement:async(n,e)=>{const t={text:e.text,is_active:e.isActive,display_order:e.displayOrder,button_text:e.buttonText,button_link:e.buttonLink,background_color:e.backgroundColor,text_color:e.textColor},r={};r.Authorization=`Bearer ${n}`;const i=await je("/admin/announcements","POST",t,r);return Xi(i.data)},updateAnnouncement:async(n,e,t)=>{const r={};t.text!==void 0&&(r.text=t.text),t.isActive!==void 0&&(r.is_active=t.isActive),t.displayOrder!==void 0&&(r.display_order=t.displayOrder),t.buttonText!==void 0&&(r.button_text=t.buttonText),t.buttonLink!==void 0&&(r.button_link=t.buttonLink),t.backgroundColor!==void 0&&(r.background_color=t.backgroundColor),t.textColor!==void 0&&(r.text_color=t.textColor);const i={};i.Authorization=`Bearer ${n}`;const l=await je(`/admin/announcements/${e}`,"PUT",r,i);return Xi(l.data)},deleteAnnouncement:async(n,e)=>{const t={};return t.Authorization=`Bearer ${n}`,await je(`/admin/announcements/${e}`,"DELETE",null,t),!0},toggleAnnouncementStatus:async(n,e,t)=>{const r={};r.Authorization=`Bearer ${n}`;const i=await je(`/admin/announcements/${e}/toggle`,"POST",{is_active:t},r);return Xi(i.data)}},qE=()=>{const[n,e]=E.useState([]),[t,r]=E.useState(0),[i,l]=E.useState(!0);E.useEffect(()=>{(async()=>{try{l(!0);const g=[...await Zs.getActiveAnnouncements()].sort((y,b)=>y.displayOrder-b.displayOrder);e(g)}catch(h){console.error("Failed to fetch announcements:",h)}finally{l(!1)}})()},[]),E.useEffect(()=>{if(n.length<=1)return;const f=setInterval(()=>{r(h=>(h+1)%n.length)},5e3);return()=>clearInterval(f)},[n.length]);const c=E.useCallback(f=>{r(f)},[]);if(i||n.length===0)return null;const d=n[t];return p.jsx("div",{className:"w-full",children:p.jsxs("div",{className:"w-full py-3 px-4 flex items-center justify-center transition-all duration-300",style:{backgroundColor:d.backgroundColor,color:d.textColor},children:[p.jsxs("div",{className:"flex items-center justify-center flex-1",children:[p.jsx("p",{className:"text-center font-body font-light",children:d.text}),d.buttonText&&d.buttonLink&&p.jsx(ye,{to:d.buttonLink,className:"ml-4 px-3 py-1 border border-current hover:bg-opacity-20 hover:bg-white transition-colors",children:d.buttonText})]}),n.length>1&&p.jsx("div",{className:"flex gap-2 ml-4",children:n.map((f,h)=>p.jsx("button",{onClick:()=>c(h),className:`w-2 h-2 rounded-full ${h===t?"bg-current opacity-100":"bg-current opacity-50"}`,"aria-label":`Go to announcement ${h+1}`},h))})]})})},Wx=["https://images.unsplash.com/photo-1512436991641-6745cdb1723f?auto=format&fit=crop&w=1200&q=80","https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=1200&q=80","https://images.unsplash.com/photo-1465101046530-73398c7f28ca?auto=format&fit=crop&w=1200&q=80"],VE=()=>{var C,j,O;const[n,e]=E.useState([]),[t,r]=E.useState([]),[i,l]=E.useState(4e3),[c,d]=E.useState(0),[f,h]=E.useState(0),[g,y]=E.useState(!1),[b,v]=E.useState(!1),w=E.useRef(null);E.useEffect(()=>{Cl.getPublic().then(M=>{M.data.carousels&&M.data.carousels.length>0?(e(M.data.carousels),l(M.data.interval||4e3)):(e(Wx.map(A=>({image_url:A,view_type:"desktop"}))),l(4e3))}).catch(()=>{e(Wx.map(M=>({image_url:M,view_type:"desktop"}))),l(4e3)})},[]),E.useEffect(()=>{const M=()=>{v(window.innerWidth<768)};return M(),window.addEventListener("resize",M),()=>window.removeEventListener("resize",M)},[]),E.useEffect(()=>{if(n.length===0)return;const M=b?"mobile":"desktop",A=n.filter(L=>L.view_type===M&&L.is_active!==!1);A.length===0?r(n.filter(L=>L.is_active!==!1)):r(A),d(0),h(0)},[n,b]),E.useEffect(()=>{if(t.length===0)return;const M=setInterval(()=>{h(c),d(A=>(A+1)%t.length),y(!0),w.current&&clearTimeout(w.current),w.current=setTimeout(()=>y(!1),700)},i);return()=>{clearInterval(M),w.current&&clearTimeout(w.current)}},[t,i,c]);const N=M=>M===c&&g?{transform:"translateX(0%)",transition:"transform 0.7s cubic-bezier(0.4,0,0.2,1)",zIndex:2,opacity:1}:M===f&&g?{transform:"translateX(-100%)",transition:"transform 0.7s cubic-bezier(0.4,0,0.2,1)",zIndex:1,opacity:1}:M===c&&!g?{transform:"translateX(0%)",transition:"none",zIndex:2,opacity:1}:{transform:"translateX(100%)",transition:"none",zIndex:0,opacity:0};return p.jsxs("div",{className:"relative w-full h-[450px] md:h-[700px] flex items-center justify-center overflow-hidden border-b border-gray-200 bg-black -mt-20",children:[p.jsx("div",{className:"absolute top-0 left-0 w-full h-full",children:t.map((M,A)=>p.jsx("img",{src:M.image_url,alt:"carousel background",className:"absolute top-0 left-0 w-full h-full object-cover",style:N(A)},M.image_url+A))}),p.jsx("div",{className:"absolute inset-0 bg-opacity-40 z-10"}),p.jsx("div",{className:"relative z-20 w-full h-full flex items-center justify-center",children:p.jsxs("div",{className:"bg-white bg-opacity-50 backdrop-blur-sm rounded-lg p-8 md:p-12 max-w-4xl mx-4 shadow-lg flex flex-col items-center justify-center",children:[(C=t[c])!=null&&C.title?p.jsx("h1",{className:"text-5xl md:text-7xl header-font font-light mb-4 text-center text-black drop-shadow-lg",children:t[c].title}):p.jsx("h1",{className:"text-5xl md:text-7xl header-font font-light mb-4 text-center text-black drop-shadow-lg",children:"SHOPMARA PH"}),(j=t[c])!=null&&j.subtitle?p.jsx("div",{className:"bg-[#ad688f] px-6 py-2 mb-8 bg-opacity-90 rounded",children:p.jsx("p",{className:"text-lg font-body font-light text-white",children:t[c].subtitle})}):p.jsx("div",{className:"bg-[#ad688f] px-6 py-2 mb-8 bg-opacity-90 rounded",children:p.jsx("p",{className:"text-lg font-body font-light text-white text-center",children:"Carefully Curated Timeless Finds"})}),p.jsxs("div",{className:"max-w-2xl text-center mx-auto px-4",children:[(O=t[c])!=null&&O.link?p.jsx("p",{className:"text-black mb-8 font-body font-light drop-shadow",children:t[c].link}):p.jsx("p",{className:"text-black mb-8 font-body font-light drop-shadow",children:"ShopMaraPH is a passion project rooted in timeless style and conscious living. We offer carefully handpicked vintage polos—elegant, versatile pieces made for modern women who lead, whether in the office or off-duty. Beautifully curated, sustainably sourced."}),p.jsx(qE,{})]})]})})]})},sm=async()=>{try{return((await gs.getAllProducts()).data||[]).map(e=>({...e,price:Number(e.price)}))}catch(n){throw console.error("Error fetching products:",n),n}},v1=async()=>{try{return(await sm()).filter(e=>e.isNewArrival)}catch(n){throw console.error("Error fetching new arrival products:",n),n}},FE=async()=>{try{return(await sm()).filter(e=>e.isSale)}catch(n){throw console.error("Error fetching sale products:",n),n}},w1=({product:n})=>{var c;const{addToCart:e,isInCart:t}=to(),[r,i]=E.useState(!1),l=async d=>{if(d.preventDefault(),d.stopPropagation(),n.status==="Available"&&n.size)try{i(!0),await e(n)}catch(f){console.error("Error adding to cart:",f)}finally{i(!1)}};return p.jsxs("div",{className:"product-card",children:[p.jsxs("div",{className:"absolute top-0 right-0 z-10 flex flex-col gap-1 m-2",children:[n.isNewArrival&&p.jsx("div",{className:"bg-green-500 text-white text-xs font-bold px-2 py-1 rounded",children:"New Arrival"}),n.isSale&&p.jsx("div",{className:"bg-red-500 text-white text-xs font-bold px-2 py-1 rounded",children:"Sale"})]}),p.jsx(ye,{to:`/product/${n.id}`,className:"no-underline text-inherit block",children:p.jsxs("div",{className:"product-card__image-container",children:[p.jsx("img",{src:n.image,alt:n.name,className:"product-card__image"}),(n.status==="Sold"||n.status==="OnHold"||n.status==="Pending")&&p.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-60 flex items-center justify-center",children:p.jsx("span",{className:`text-2xl font-bold header-font ${n.status==="Sold"?"text-black":n.status==="OnHold"?"text-yellow-800":"text-black"}`,children:n.status==="Sold"?"SOLD":n.status==="OnHold"?"ON HOLD":"PENDING"})})]})}),p.jsxs("div",{className:"p-4",children:[p.jsxs("div",{className:"flex items-start justify-between mb-1",style:{height:"20px"},children:[p.jsx(ye,{to:`/product/${n.id}`,className:"no-underline text-inherit flex-1",children:p.jsx("h3",{className:"product-card__title text-sm font-medium line-clamp-1 m-0",children:n.name})}),p.jsxs("span",{className:"ml-2 bg-gray-100 text-gray-800 text-xs font-medium px-2 py-0.5 rounded whitespace-nowrap",children:["Size: ",(c=n.size)==null?void 0:c.toUpperCase()]})]}),p.jsxs("div",{className:"product-card__price text-sm font-semibold mb-2",children:["₱",n.price.toFixed(2)]}),p.jsx("button",{type:"button",onClick:l,disabled:n.status!=="Available"||!n.size||r||t(n.id),className:`w-full py-1.5 px-3 text-sm font-medium rounded transition-colors ${n.status!=="Available"||!n.size?"bg-gray-200 text-gray-500 cursor-not-allowed":t(n.id)?"bg-green-600 text-white cursor-not-allowed":"bg-black text-white hover:bg-gray-800"}`,children:r?p.jsxs("div",{className:"flex items-center justify-center",children:[p.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Adding..."]}):n.status==="Sold"?"Sold":n.status==="OnHold"?"On Hold":t(n.id)?"In Cart":"Add to Cart"})]})]})},$E=()=>{const[n,e]=E.useState([]),[t,r]=E.useState(!0),[i,l]=E.useState(null);return E.useEffect(()=>{(async()=>{try{r(!0);const f=(await v1()).filter(h=>h.status!=="OnHold"&&h.status!=="Pending"&&h.status!=="Sold");e(f.slice(0,8))}catch(d){console.error("Error fetching new arrivals:",d),l("Failed to load new arrivals")}finally{r(!1)}})()},[]),t?p.jsx("div",{className:"py-16 bg-white",children:p.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[p.jsx("h2",{className:"text-3xl font-bold mb-8",children:"New Drops"}),p.jsx("div",{className:"text-center py-8",children:p.jsx("p",{children:"Loading new arrivals..."})})]})}):i?p.jsx("div",{className:"py-16 bg-white",children:p.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[p.jsx("h2",{className:"text-3xl font-bold mb-8",children:"New Drops"}),p.jsx("div",{className:"text-center py-8",children:p.jsx("p",{className:"text-red-500",children:i})})]})}):n.length===0?p.jsx("div",{className:"py-16 bg-white",children:p.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[p.jsx("h2",{className:"text-3xl font-bold mb-8",children:"New Drops"}),p.jsx("div",{className:"text-center py-8",children:p.jsx("p",{children:"No new arrivals found at the moment. Check back soon!"})})]})}):p.jsx("div",{className:"py-16 bg-white",children:p.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[p.jsx("h2",{className:"text-3xl font-bold mb-8",children:"New Drops"}),p.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:n.map(c=>p.jsx(w1,{product:c},c.id))}),p.jsx("div",{className:"text-center mt-12",children:p.jsx(ye,{to:"/products",className:"inline-block border border-black px-8 py-3 hover:bg-black hover:text-white transition-colors no-underline text-black",children:"View All Products"})})]})})},GE=()=>p.jsxs(p.Fragment,{children:[p.jsx(VE,{}),p.jsx($E,{}),p.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8"})]}),im=({activeCategory:n="all",onCategoryChange:e,activeSize:t,onSizeChange:r,searchKeyword:i,onKeywordChange:l,showCategoryFilter:c=!0,hideSoldProducts:d=!1,onHideSoldChange:f})=>p.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm space-y-6",children:[p.jsxs("div",{className:"mb-6",children:[p.jsx("h3",{className:"text-gray-800 font-semibold text-sm uppercase tracking-wider mb-3",children:"Search"}),p.jsx("input",{type:"text",value:i,onChange:h=>l(h.target.value),placeholder:"Search products...",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent transition-all"})]}),p.jsxs("div",{className:"mb-6",children:[p.jsx("h3",{className:"text-gray-800 font-semibold text-sm uppercase tracking-wider mb-3",children:"Availability"}),p.jsxs("div",{className:"flex items-center",children:[p.jsx("input",{type:"checkbox",id:"hideSold",checked:d,onChange:h=>f==null?void 0:f(h.target.checked),className:"form-checkbox h-4 w-4 text-black focus:ring-black rounded"}),p.jsx("label",{htmlFor:"hideSold",className:"ml-2 text-gray-700 cursor-pointer select-none",children:"Hide Sold Products"})]})]}),c&&e&&p.jsxs("div",{className:"mb-6",children:[p.jsx("h3",{className:"text-gray-800 font-semibold text-sm uppercase tracking-wider mb-3",children:"Category"}),p.jsxs("div",{className:"space-y-3",children:[p.jsxs("label",{className:"flex items-center cursor-pointer group",children:[p.jsx("input",{type:"radio",id:"all",name:"category",checked:n==="all",onChange:()=>e("all"),className:"form-radio text-black focus:ring-black h-4 w-4"}),p.jsx("span",{className:"ml-3 text-gray-700 group-hover:text-black transition-colors",children:"All Products"})]}),p.jsxs("label",{className:"flex items-center cursor-pointer group",children:[p.jsx("input",{type:"radio",id:"men",name:"category",checked:n==="men",onChange:()=>e("men"),className:"form-radio text-black focus:ring-black h-4 w-4"}),p.jsx("span",{className:"ml-3 text-gray-700 group-hover:text-black transition-colors",children:"Men"})]}),p.jsxs("label",{className:"flex items-center cursor-pointer group",children:[p.jsx("input",{type:"radio",id:"women",name:"category",checked:n==="women",onChange:()=>e("women"),className:"form-radio text-black focus:ring-black h-4 w-4"}),p.jsx("span",{className:"ml-3 text-gray-700 group-hover:text-black transition-colors",children:"Women"})]})]})]}),p.jsxs("div",{className:"mb-6",children:[p.jsx("h3",{className:"text-gray-800 font-semibold text-sm uppercase tracking-wider mb-3",children:"Size"}),p.jsxs("div",{className:"space-y-3",children:[p.jsxs("label",{className:"flex items-center cursor-pointer group",children:[p.jsx("input",{type:"radio",id:"size-all",name:"size",checked:t==="all",onChange:()=>r("all"),className:"form-radio text-black focus:ring-black h-4 w-4"}),p.jsx("span",{className:"ml-3 text-gray-700 group-hover:text-black transition-colors",children:"All Sizes"})]}),["xs","s","m","l","xl","xxl"].map(h=>p.jsxs("label",{className:"flex items-center cursor-pointer group",children:[p.jsx("input",{type:"radio",id:`size-${h}`,name:"size",checked:t===h,onChange:()=>r(h),className:"form-radio text-black focus:ring-black h-4 w-4"}),p.jsx("span",{className:"ml-3 text-gray-700 group-hover:text-black transition-colors",children:h.toUpperCase()})]},h))]})]})]}),am=({products:n,onResetFilters:e,searchKeyword:t=""})=>p.jsxs("div",{className:"md:col-span-3",children:[t&&p.jsx("div",{className:"mb-6",children:p.jsx("h2",{className:"text-lg font-medium mb-2",children:n.length>0?`Search results for "${t}" (${n.length} ${n.length===1?"product":"products"})`:`No products found for "${t}"`})}),n.length>0?p.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-3 gap-4 md:gap-6 equal-height-grid",children:n.map(r=>p.jsx("div",{className:"h-full",children:p.jsx(w1,{product:r})},r.id))}):p.jsxs("div",{className:"bg-white p-8 rounded shadow text-center",children:[p.jsx("p",{className:"text-gray-600",children:t?`No products found matching "${t}". Try a different search term or reset filters.`:"No products found with the selected filters."}),p.jsx("button",{onClick:e,className:"mt-4 px-4 py-2 bg-black text-white rounded",children:"Reset Filters"})]})]}),lm=(n,e="all",t="",r=!1)=>{let i=[...n];if(e!=="all"&&(i=i.filter(l=>l.size===e)),t){const l=t.toLowerCase();i=i.filter(c=>{var d;return c.name.toLowerCase().includes(l)||(((d=c.description)==null?void 0:d.toLowerCase().includes(l))??!1)})}return r&&(i=i.filter(l=>l.status!=="Sold")),i.sort((l,c)=>l.status==="Sold"&&c.status!=="Sold"?1:l.status!=="Sold"&&c.status==="Sold"?-1:0)},YE=()=>{const[n,e]=E.useState("all"),[t,r]=E.useState(""),[i,l]=E.useState([]),[c,d]=E.useState([]),[f,h]=E.useState(!0),[g,y]=E.useState(null),[b,v]=E.useState(!1);E.useEffect(()=>{(async()=>{try{h(!0);const C=await v1();l(C)}catch(C){console.error("Error fetching new arrival products:",C),y("Failed to load new arrival products")}finally{h(!1)}})()},[]),E.useEffect(()=>{i.length>0&&d(lm(i,n,t,b))},[i,n,t,b]);const w=()=>{e("all"),r(""),v(!1)};return f?p.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[p.jsx("h1",{className:"text-3xl font-bold mb-8",children:"New Arrivals"}),p.jsx("div",{className:"text-center py-12",children:p.jsx("p",{children:"Loading products..."})})]}):g?p.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[p.jsx("h1",{className:"text-3xl font-bold mb-8",children:"New Arrivals"}),p.jsx("div",{className:"text-center py-12",children:p.jsx("p",{className:"text-red-500",children:g})})]}):p.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[p.jsx("h1",{className:"text-3xl font-bold mb-8",children:"New Arrivals"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8 mb-8",children:[p.jsx("div",{className:"md:col-span-1",children:p.jsx(im,{activeSize:n,searchKeyword:t,onSizeChange:e,onKeywordChange:r,showCategoryFilter:!1,hideSoldProducts:b,onHideSoldChange:v})}),p.jsx("div",{className:"md:col-span-3",children:p.jsx(am,{products:c,onResetFilters:w,searchKeyword:t})})]})]})},KE=()=>{const[n,e]=E.useState([]),[t,r]=E.useState([]),[i,l]=E.useState(!0),[c,d]=E.useState("all"),[f,h]=E.useState(""),[g,y]=E.useState(!1);E.useEffect(()=>{(async()=>{l(!0);try{const C=await FE();e(C)}catch(C){console.error("Error fetching sale products:",C)}finally{l(!1)}})()},[]),E.useEffect(()=>{const N=lm(n,c,f,g);r(N)},[n,c,f,g]);const b=N=>{d(N)},v=N=>{h(N)},w=()=>{d("all"),h(""),y(!1)};return i?p.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[p.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Sale"}),p.jsx("div",{className:"animate-pulse",children:p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[p.jsx("div",{className:"h-64 bg-gray-200 rounded"}),p.jsx("div",{className:"h-64 bg-gray-200 rounded"}),p.jsx("div",{className:"h-64 bg-gray-200 rounded"}),p.jsx("div",{className:"h-64 bg-gray-200 rounded"})]})})]}):p.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[p.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Sale"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[p.jsx("div",{className:"md:col-span-1",children:p.jsx(im,{activeSize:c,searchKeyword:f,onSizeChange:b,onKeywordChange:v,showCategoryFilter:!1,hideSoldProducts:g,onHideSoldChange:y})}),p.jsx("div",{className:"md:col-span-3",children:p.jsx(am,{products:t,onResetFilters:w,searchKeyword:f})})]})]})},XE=()=>p.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[p.jsxs("div",{className:"text-center mb-16",children:[p.jsx("h1",{className:"text-4xl header-font font-light text-gray-900 mb-4",children:"About ShopMara PH"}),p.jsx("div",{className:"w-20 h-1 bg-[#ad688f] mx-auto"})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-12 items-center mb-16",children:[p.jsx("div",{children:p.jsx("img",{src:"/Mara.jpg",alt:"ShopMara PH",className:"rounded-lg shadow-lg w-full h-auto object-cover",onError:n=>{const e=n.target;e.src="https://via.placeholder.com/600x800?text=ShopMara+PH"}})}),p.jsxs("div",{children:[p.jsx("h2",{className:"text-3xl header-font font-light text-gray-900 mb-6",children:"Story Time!"}),p.jsx("p",{className:"text-gray-700 mb-4 leading-relaxed font-body font-light",children:'ShopMaraPH started in 2022 on Instagram, born from a love of vintage fashion and sustainability. After a heartbreaking loss that year, we lent the name "Mara" to our business as a tribute to our angel baby.'}),p.jsx("p",{className:"text-gray-700 mb-4 leading-relaxed font-body font-light",children:"In 2023, we paused operations due to severe nausea. Little did we know, we were expecting our rainbow baby, who would one day carry the name Mara, just as it was meant to be."}),p.jsx("p",{className:"text-gray-700 mb-4 leading-relaxed font-body font-light",children:"Now a proud mom of two, I spend my days curating timeless pieces I love—elegant, confident styles that help modern women build a conscious wardrobe for work and beyond."}),p.jsx("p",{className:"text-gray-700 font-body font-light italic",children:"This journey is for her, and we can't wait to grow with you."})]})]}),p.jsxs("div",{className:"mt-16 text-center",children:[p.jsx("h3",{className:"text-2xl header-font font-normal mb-6",children:"Connect With Us"}),p.jsxs("div",{className:"flex justify-center space-x-6",children:[p.jsxs("a",{href:"https://instagram.com/shopmaraph",target:"_blank",rel:"noopener noreferrer",className:"text-gray-500 hover:text-[#ad688f]",children:[p.jsx("span",{className:"sr-only",children:"Instagram"}),p.jsx("svg",{className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:p.jsx("path",{fillRule:"evenodd",d:"M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.218 2.427.465a4.902 4.902 0 011.772 1.153 4.902 4.902 0 011.153 1.772c.247.636.416 1.363.465 2.427.048 1.067.06 1.407.06 4.123v.08c0 2.643-.012 2.987-.06 4.043-.049 1.064-.218 1.791-.465 2.427a4.902 4.902 0 01-1.153 1.772 4.902 4.902 0 01-1.772 1.153c-.636.247-1.363.416-2.427.465-1.067.048-1.407.06-4.123.06h-.08c-2.643 0-2.987-.012-4.043-.06-1.064-.049-1.791-.218-2.427-.465a4.902 4.902 0 01-1.772-1.153 4.902 4.902 0 01-1.153-1.772c-.247-.636-.416-1.363-.465-2.427-.047-1.024-.06-1.379-.06-3.808v-.63c0-2.43.013-2.784.06-3.808.049-1.064.218-1.791.465-2.427a4.902 4.902 0 011.153-1.772A4.902 4.902 0 015.45 2.525c.636-.247 1.363-.416 2.427-.465C8.901 2.013 9.256 2 11.685 2h.63zm-.081 1.802h-.468c-2.456 0-2.784.011-3.807.058-.975.045-1.504.207-1.857.344-.467.182-.8.398-1.15.748-.35.35-.566.683-.748 1.15-.137.353-.3.882-.344 1.857-.047 1.023-.058 1.351-.058 3.807v.468c0 2.456.011 2.784.058 3.807.045.975.207 1.504.344 1.857.182.466.399.8.748 1.15.35.35.683.566 1.15.748.353.137.882.3 1.857.344 1.054.048 1.37.058 4.041.058h.08c2.597 0 2.917-.01 3.96-.058.976-.045 1.505-.207 1.858-.344.466-.182.8-.398 1.15-.748.35-.35.566-.683.748-1.15.137-.353.3-.882.344-1.857.048-1.055.058-1.37.058-4.041v-.08c0-2.597-.01-2.917-.058-3.96-.045-.976-.207-1.505-.344-1.858a3.097 3.097 0 00-.748-1.15 3.098 3.098 0 00-1.15-.748c-.353-.137-.882-.3-1.857-.344-1.023-.047-1.351-.058-3.807-.058zM12 6.865a5.135 5.135 0 110 10.27 5.135 5.135 0 010-10.27zm0 1.802a3.333 3.333 0 100 6.666 3.333 3.333 0 000-6.666zm5.338-3.205a1.2 1.2 0 110 2.4 1.2 1.2 0 010-2.4z",clipRule:"evenodd"})})]}),p.jsxs("a",{href:"https://facebook.com/shopmaraph",target:"_blank",rel:"noopener noreferrer",className:"text-gray-500 hover:text-[#ad688f]",children:[p.jsx("span",{className:"sr-only",children:"Facebook"}),p.jsx("svg",{className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:p.jsx("path",{fillRule:"evenodd",d:"M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z",clipRule:"evenodd"})})]}),p.jsxs("a",{href:"mailto:contact@shopmaraph.com",className:"text-gray-500 hover:text-[#ad688f]",children:[p.jsx("span",{className:"sr-only",children:"Email"}),p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})]})]})]})]}),JE=()=>{const[n,e]=E.useState(""),[t,r]=E.useState(""),[i,l]=E.useState(""),[c,d]=E.useState(!1),[f,h]=E.useState("/"),{login:g}=ft(),y=jr(),b=kr();E.useEffect(()=>{const N=new URLSearchParams(b.search).get("returnUrl");N&&h(N)},[b.search]);const v=async w=>{w.preventDefault(),l(""),d(!0);try{await g(n,t),y(f)}catch(N){l("Invalid email or password"),console.error(N)}finally{d(!1)}};return p.jsxs("div",{className:"max-w-md mx-auto px-4 py-16",children:[p.jsx("h1",{className:"text-3xl font-bold mb-6 text-center",children:"Login"}),i&&p.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",role:"alert",children:p.jsx("p",{children:i})}),f!=="/"&&p.jsx("div",{className:"bg-blue-100 border border-blue-400 text-blue-700 px-4 py-3 rounded mb-4",role:"alert",children:p.jsx("p",{children:"You need to log in to access that page"})}),p.jsxs("form",{className:"bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4",onSubmit:v,children:[p.jsxs("div",{className:"mb-4",children:[p.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"email",children:"Email"}),p.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"email",type:"email",placeholder:"Email",value:n,onChange:w=>e(w.target.value),required:!0})]}),p.jsxs("div",{className:"mb-6",children:[p.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"password",children:"Password"}),p.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline",id:"password",type:"password",placeholder:"******************",value:t,onChange:w=>r(w.target.value),required:!0})]}),p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("button",{className:`bg-black ${c?"opacity-50 cursor-not-allowed":"hover:bg-gray-800"} text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline`,type:"submit",disabled:c,children:c?"Signing In...":"Sign In"}),p.jsx(ye,{className:"inline-block align-baseline font-bold text-sm text-black hover:text-gray-800",to:"/forgot-password",children:"Forgot Password?"})]})]}),p.jsxs("p",{className:"text-center text-gray-500 text-sm",children:["Don't have an account? ",p.jsx(ye,{to:"/register",className:"text-black font-bold",children:"Sign up"})]})]})},QE=()=>{const[n,e]=E.useState(""),[t,r]=E.useState(""),[i,l]=E.useState(""),[c,d]=E.useState(""),[f,h]=E.useState(""),[g,y]=E.useState(!1),{register:b}=ft(),v=jr(),w=async N=>{if(N.preventDefault(),h(""),y(!0),i!==c){h("Passwords do not match"),y(!1);return}try{await b(n,t,i,c),v("/")}catch(C){h("Registration failed. Please check your information and try again."),console.error(C)}finally{y(!1)}};return p.jsxs("div",{className:"max-w-md mx-auto px-4 py-16",children:[p.jsx("h1",{className:"text-3xl font-bold mb-6 text-center",children:"Register"}),f&&p.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",role:"alert",children:p.jsx("p",{children:f})}),p.jsxs("form",{className:"bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4",onSubmit:w,children:[p.jsxs("div",{className:"mb-4",children:[p.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"name",children:"Name"}),p.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"name",type:"text",placeholder:"Full Name",value:n,onChange:N=>e(N.target.value),required:!0})]}),p.jsxs("div",{className:"mb-4",children:[p.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"email",children:"Email"}),p.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"email",type:"email",placeholder:"Email",value:t,onChange:N=>r(N.target.value),required:!0})]}),p.jsxs("div",{className:"mb-4",children:[p.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"password",children:"Password"}),p.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"password",type:"password",placeholder:"******************",value:i,onChange:N=>l(N.target.value),required:!0,minLength:8})]}),p.jsxs("div",{className:"mb-6",children:[p.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"password-confirmation",children:"Confirm Password"}),p.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"password-confirmation",type:"password",placeholder:"******************",value:c,onChange:N=>d(N.target.value),required:!0,minLength:8})]}),p.jsx("div",{className:"flex items-center justify-between",children:p.jsx("button",{className:`bg-black ${g?"opacity-50 cursor-not-allowed":"hover:bg-gray-800"} text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline w-full`,type:"submit",disabled:g,children:g?"Creating Account...":"Create Account"})})]}),p.jsxs("p",{className:"text-center text-gray-500 text-sm",children:["Already have an account? ",p.jsx(ye,{to:"/login",className:"text-black font-bold",children:"Sign in"})]})]})};var vc={exports:{}},fh,eb;function S1(){return eb||(eb=1,fh=function(e,t){return function(){for(var i=new Array(arguments.length),l=0;l<i.length;l++)i[l]=arguments[l];return e.apply(t,i)}}),fh}var hh,tb;function pn(){if(tb)return hh;tb=1;var n=S1(),e=Object.prototype.toString;function t(_){return e.call(_)==="[object Array]"}function r(_){return typeof _>"u"}function i(_){return _!==null&&!r(_)&&_.constructor!==null&&!r(_.constructor)&&typeof _.constructor.isBuffer=="function"&&_.constructor.isBuffer(_)}function l(_){return e.call(_)==="[object ArrayBuffer]"}function c(_){return typeof FormData<"u"&&_ instanceof FormData}function d(_){var re;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?re=ArrayBuffer.isView(_):re=_&&_.buffer&&_.buffer instanceof ArrayBuffer,re}function f(_){return typeof _=="string"}function h(_){return typeof _=="number"}function g(_){return _!==null&&typeof _=="object"}function y(_){if(e.call(_)!=="[object Object]")return!1;var re=Object.getPrototypeOf(_);return re===null||re===Object.prototype}function b(_){return e.call(_)==="[object Date]"}function v(_){return e.call(_)==="[object File]"}function w(_){return e.call(_)==="[object Blob]"}function N(_){return e.call(_)==="[object Function]"}function C(_){return g(_)&&N(_.pipe)}function j(_){return typeof URLSearchParams<"u"&&_ instanceof URLSearchParams}function O(_){return _.trim?_.trim():_.replace(/^\s+|\s+$/g,"")}function M(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function A(_,re){if(!(_===null||typeof _>"u"))if(typeof _!="object"&&(_=[_]),t(_))for(var le=0,$=_.length;le<$;le++)re.call(null,_[le],le,_);else for(var se in _)Object.prototype.hasOwnProperty.call(_,se)&&re.call(null,_[se],se,_)}function L(){var _={};function re(se,pe){y(_[pe])&&y(se)?_[pe]=L(_[pe],se):y(se)?_[pe]=L({},se):t(se)?_[pe]=se.slice():_[pe]=se}for(var le=0,$=arguments.length;le<$;le++)A(arguments[le],re);return _}function B(_,re,le){return A(re,function(se,pe){le&&typeof se=="function"?_[pe]=n(se,le):_[pe]=se}),_}function F(_){return _.charCodeAt(0)===65279&&(_=_.slice(1)),_}return hh={isArray:t,isArrayBuffer:l,isBuffer:i,isFormData:c,isArrayBufferView:d,isString:f,isNumber:h,isObject:g,isPlainObject:y,isUndefined:r,isDate:b,isFile:v,isBlob:w,isFunction:N,isStream:C,isURLSearchParams:j,isStandardBrowserEnv:M,forEach:A,merge:L,extend:B,trim:O,stripBOM:F},hh}var ph,nb;function N1(){if(nb)return ph;nb=1;var n=pn();function e(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}return ph=function(r,i,l){if(!i)return r;var c;if(l)c=l(i);else if(n.isURLSearchParams(i))c=i.toString();else{var d=[];n.forEach(i,function(g,y){g===null||typeof g>"u"||(n.isArray(g)?y=y+"[]":g=[g],n.forEach(g,function(v){n.isDate(v)?v=v.toISOString():n.isObject(v)&&(v=JSON.stringify(v)),d.push(e(y)+"="+e(v))}))}),c=d.join("&")}if(c){var f=r.indexOf("#");f!==-1&&(r=r.slice(0,f)),r+=(r.indexOf("?")===-1?"?":"&")+c}return r},ph}var mh,rb;function ZE(){if(rb)return mh;rb=1;var n=pn();function e(){this.handlers=[]}return e.prototype.use=function(r,i,l){return this.handlers.push({fulfilled:r,rejected:i,synchronous:l?l.synchronous:!1,runWhen:l?l.runWhen:null}),this.handlers.length-1},e.prototype.eject=function(r){this.handlers[r]&&(this.handlers[r]=null)},e.prototype.forEach=function(r){n.forEach(this.handlers,function(l){l!==null&&r(l)})},mh=e,mh}var gh,sb;function WE(){if(sb)return gh;sb=1;var n=pn();return gh=function(t,r){n.forEach(t,function(l,c){c!==r&&c.toUpperCase()===r.toUpperCase()&&(t[r]=l,delete t[c])})},gh}var yh,ib;function C1(){return ib||(ib=1,yh=function(e,t,r,i,l){return e.config=t,r&&(e.code=r),e.request=i,e.response=l,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}),yh}var xh,ab;function E1(){if(ab)return xh;ab=1;var n=C1();return xh=function(t,r,i,l,c){var d=new Error(t);return n(d,r,i,l,c)},xh}var bh,lb;function ek(){if(lb)return bh;lb=1;var n=E1();return bh=function(t,r,i){var l=i.config.validateStatus;!i.status||!l||l(i.status)?t(i):r(n("Request failed with status code "+i.status,i.config,null,i.request,i))},bh}var vh,ob;function tk(){if(ob)return vh;ob=1;var n=pn();return vh=n.isStandardBrowserEnv()?function(){return{write:function(r,i,l,c,d,f){var h=[];h.push(r+"="+encodeURIComponent(i)),n.isNumber(l)&&h.push("expires="+new Date(l).toGMTString()),n.isString(c)&&h.push("path="+c),n.isString(d)&&h.push("domain="+d),f===!0&&h.push("secure"),document.cookie=h.join("; ")},read:function(r){var i=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),vh}var wh,cb;function nk(){return cb||(cb=1,wh=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}),wh}var Sh,ub;function rk(){return ub||(ub=1,Sh=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}),Sh}var Nh,db;function sk(){if(db)return Nh;db=1;var n=nk(),e=rk();return Nh=function(r,i){return r&&!n(i)?e(r,i):i},Nh}var Ch,fb;function ik(){if(fb)return Ch;fb=1;var n=pn(),e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return Ch=function(r){var i={},l,c,d;return r&&n.forEach(r.split(`
`),function(h){if(d=h.indexOf(":"),l=n.trim(h.substr(0,d)).toLowerCase(),c=n.trim(h.substr(d+1)),l){if(i[l]&&e.indexOf(l)>=0)return;l==="set-cookie"?i[l]=(i[l]?i[l]:[]).concat([c]):i[l]=i[l]?i[l]+", "+c:c}}),i},Ch}var Eh,hb;function ak(){if(hb)return Eh;hb=1;var n=pn();return Eh=n.isStandardBrowserEnv()?function(){var t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),i;function l(c){var d=c;return t&&(r.setAttribute("href",d),d=r.href),r.setAttribute("href",d),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return i=l(window.location.href),function(d){var f=n.isString(d)?l(d):d;return f.protocol===i.protocol&&f.host===i.host}}():function(){return function(){return!0}}(),Eh}var kh,pb;function mb(){if(pb)return kh;pb=1;var n=pn(),e=ek(),t=tk(),r=N1(),i=sk(),l=ik(),c=ak(),d=E1();return kh=function(h){return new Promise(function(y,b){var v=h.data,w=h.headers,N=h.responseType;n.isFormData(v)&&delete w["Content-Type"];var C=new XMLHttpRequest;if(h.auth){var j=h.auth.username||"",O=h.auth.password?unescape(encodeURIComponent(h.auth.password)):"";w.Authorization="Basic "+btoa(j+":"+O)}var M=i(h.baseURL,h.url);C.open(h.method.toUpperCase(),r(M,h.params,h.paramsSerializer),!0),C.timeout=h.timeout;function A(){if(C){var B="getAllResponseHeaders"in C?l(C.getAllResponseHeaders()):null,F=!N||N==="text"||N==="json"?C.responseText:C.response,_={data:F,status:C.status,statusText:C.statusText,headers:B,config:h,request:C};e(y,b,_),C=null}}if("onloadend"in C?C.onloadend=A:C.onreadystatechange=function(){!C||C.readyState!==4||C.status===0&&!(C.responseURL&&C.responseURL.indexOf("file:")===0)||setTimeout(A)},C.onabort=function(){C&&(b(d("Request aborted",h,"ECONNABORTED",C)),C=null)},C.onerror=function(){b(d("Network Error",h,null,C)),C=null},C.ontimeout=function(){var F="timeout of "+h.timeout+"ms exceeded";h.timeoutErrorMessage&&(F=h.timeoutErrorMessage),b(d(F,h,h.transitional&&h.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",C)),C=null},n.isStandardBrowserEnv()){var L=(h.withCredentials||c(M))&&h.xsrfCookieName?t.read(h.xsrfCookieName):void 0;L&&(w[h.xsrfHeaderName]=L)}"setRequestHeader"in C&&n.forEach(w,function(F,_){typeof v>"u"&&_.toLowerCase()==="content-type"?delete w[_]:C.setRequestHeader(_,F)}),n.isUndefined(h.withCredentials)||(C.withCredentials=!!h.withCredentials),N&&N!=="json"&&(C.responseType=h.responseType),typeof h.onDownloadProgress=="function"&&C.addEventListener("progress",h.onDownloadProgress),typeof h.onUploadProgress=="function"&&C.upload&&C.upload.addEventListener("progress",h.onUploadProgress),h.cancelToken&&h.cancelToken.promise.then(function(F){C&&(C.abort(),b(F),C=null)}),v||(v=null),C.send(v)})},kh}var jh,gb;function om(){if(gb)return jh;gb=1;var n=pn(),e=WE(),t=C1(),r={"Content-Type":"application/x-www-form-urlencoded"};function i(f,h){!n.isUndefined(f)&&n.isUndefined(f["Content-Type"])&&(f["Content-Type"]=h)}function l(){var f;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(f=mb()),f}function c(f,h,g){if(n.isString(f))try{return(h||JSON.parse)(f),n.trim(f)}catch(y){if(y.name!=="SyntaxError")throw y}return(g||JSON.stringify)(f)}var d={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:l(),transformRequest:[function(h,g){return e(g,"Accept"),e(g,"Content-Type"),n.isFormData(h)||n.isArrayBuffer(h)||n.isBuffer(h)||n.isStream(h)||n.isFile(h)||n.isBlob(h)?h:n.isArrayBufferView(h)?h.buffer:n.isURLSearchParams(h)?(i(g,"application/x-www-form-urlencoded;charset=utf-8"),h.toString()):n.isObject(h)||g&&g["Content-Type"]==="application/json"?(i(g,"application/json"),c(h)):h}],transformResponse:[function(h){var g=this.transitional,y=g&&g.silentJSONParsing,b=g&&g.forcedJSONParsing,v=!y&&this.responseType==="json";if(v||b&&n.isString(h)&&h.length)try{return JSON.parse(h)}catch(w){if(v)throw w.name==="SyntaxError"?t(w,this,"E_JSON_PARSE"):w}return h}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(h){return h>=200&&h<300}};return d.headers={common:{Accept:"application/json, text/plain, */*"}},n.forEach(["delete","get","head"],function(h){d.headers[h]={}}),n.forEach(["post","put","patch"],function(h){d.headers[h]=n.merge(r)}),jh=d,jh}var Ah,yb;function lk(){if(yb)return Ah;yb=1;var n=pn(),e=om();return Ah=function(r,i,l){var c=this||e;return n.forEach(l,function(f){r=f.call(c,r,i)}),r},Ah}var Th,xb;function k1(){return xb||(xb=1,Th=function(e){return!!(e&&e.__CANCEL__)}),Th}var Mh,bb;function ok(){if(bb)return Mh;bb=1;var n=pn(),e=lk(),t=k1(),r=om();function i(l){l.cancelToken&&l.cancelToken.throwIfRequested()}return Mh=function(c){i(c),c.headers=c.headers||{},c.data=e.call(c,c.data,c.headers,c.transformRequest),c.headers=n.merge(c.headers.common||{},c.headers[c.method]||{},c.headers),n.forEach(["delete","get","head","post","put","patch","common"],function(h){delete c.headers[h]});var d=c.adapter||r.adapter;return d(c).then(function(h){return i(c),h.data=e.call(c,h.data,h.headers,c.transformResponse),h},function(h){return t(h)||(i(c),h&&h.response&&(h.response.data=e.call(c,h.response.data,h.response.headers,c.transformResponse))),Promise.reject(h)})},Mh}var Oh,vb;function j1(){if(vb)return Oh;vb=1;var n=pn();return Oh=function(t,r){r=r||{};var i={},l=["url","method","data"],c=["headers","auth","proxy","params"],d=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],f=["validateStatus"];function h(v,w){return n.isPlainObject(v)&&n.isPlainObject(w)?n.merge(v,w):n.isPlainObject(w)?n.merge({},w):n.isArray(w)?w.slice():w}function g(v){n.isUndefined(r[v])?n.isUndefined(t[v])||(i[v]=h(void 0,t[v])):i[v]=h(t[v],r[v])}n.forEach(l,function(w){n.isUndefined(r[w])||(i[w]=h(void 0,r[w]))}),n.forEach(c,g),n.forEach(d,function(w){n.isUndefined(r[w])?n.isUndefined(t[w])||(i[w]=h(void 0,t[w])):i[w]=h(void 0,r[w])}),n.forEach(f,function(w){w in r?i[w]=h(t[w],r[w]):w in t&&(i[w]=h(void 0,t[w]))});var y=l.concat(c).concat(d).concat(f),b=Object.keys(t).concat(Object.keys(r)).filter(function(w){return y.indexOf(w)===-1});return n.forEach(b,g),i},Oh}const ck="0.21.4",uk={version:ck};var Rh,wb;function dk(){if(wb)return Rh;wb=1;var n=uk,e={};["object","boolean","number","function","string","symbol"].forEach(function(c,d){e[c]=function(h){return typeof h===c||"a"+(d<1?"n ":" ")+c}});var t={},r=n.version.split(".");function i(c,d){for(var f=d?d.split("."):r,h=c.split("."),g=0;g<3;g++){if(f[g]>h[g])return!0;if(f[g]<h[g])return!1}return!1}e.transitional=function(d,f,h){var g=f&&i(f);function y(b,v){return"[Axios v"+n.version+"] Transitional option '"+b+"'"+v+(h?". "+h:"")}return function(b,v,w){if(d===!1)throw new Error(y(v," has been removed in "+f));return g&&!t[v]&&(t[v]=!0,console.warn(y(v," has been deprecated since v"+f+" and will be removed in the near future"))),d?d(b,v,w):!0}};function l(c,d,f){if(typeof c!="object")throw new TypeError("options must be an object");for(var h=Object.keys(c),g=h.length;g-- >0;){var y=h[g],b=d[y];if(b){var v=c[y],w=v===void 0||b(v,y,c);if(w!==!0)throw new TypeError("option "+y+" must be "+w);continue}if(f!==!0)throw Error("Unknown option "+y)}}return Rh={isOlderVersion:i,assertOptions:l,validators:e},Rh}var Dh,Sb;function fk(){if(Sb)return Dh;Sb=1;var n=pn(),e=N1(),t=ZE(),r=ok(),i=j1(),l=dk(),c=l.validators;function d(f){this.defaults=f,this.interceptors={request:new t,response:new t}}return d.prototype.request=function(h){typeof h=="string"?(h=arguments[1]||{},h.url=arguments[0]):h=h||{},h=i(this.defaults,h),h.method?h.method=h.method.toLowerCase():this.defaults.method?h.method=this.defaults.method.toLowerCase():h.method="get";var g=h.transitional;g!==void 0&&l.assertOptions(g,{silentJSONParsing:c.transitional(c.boolean,"1.0.0"),forcedJSONParsing:c.transitional(c.boolean,"1.0.0"),clarifyTimeoutError:c.transitional(c.boolean,"1.0.0")},!1);var y=[],b=!0;this.interceptors.request.forEach(function(A){typeof A.runWhen=="function"&&A.runWhen(h)===!1||(b=b&&A.synchronous,y.unshift(A.fulfilled,A.rejected))});var v=[];this.interceptors.response.forEach(function(A){v.push(A.fulfilled,A.rejected)});var w;if(!b){var N=[r,void 0];for(Array.prototype.unshift.apply(N,y),N=N.concat(v),w=Promise.resolve(h);N.length;)w=w.then(N.shift(),N.shift());return w}for(var C=h;y.length;){var j=y.shift(),O=y.shift();try{C=j(C)}catch(M){O(M);break}}try{w=r(C)}catch(M){return Promise.reject(M)}for(;v.length;)w=w.then(v.shift(),v.shift());return w},d.prototype.getUri=function(h){return h=i(this.defaults,h),e(h.url,h.params,h.paramsSerializer).replace(/^\?/,"")},n.forEach(["delete","get","head","options"],function(h){d.prototype[h]=function(g,y){return this.request(i(y||{},{method:h,url:g,data:(y||{}).data}))}}),n.forEach(["post","put","patch"],function(h){d.prototype[h]=function(g,y,b){return this.request(i(b||{},{method:h,url:g,data:y}))}}),Dh=d,Dh}var Lh,Nb;function A1(){if(Nb)return Lh;Nb=1;function n(e){this.message=e}return n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,Lh=n,Lh}var _h,Cb;function hk(){if(Cb)return _h;Cb=1;var n=A1();function e(t){if(typeof t!="function")throw new TypeError("executor must be a function.");var r;this.promise=new Promise(function(c){r=c});var i=this;t(function(c){i.reason||(i.reason=new n(c),r(i.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.source=function(){var r,i=new e(function(c){r=c});return{token:i,cancel:r}},_h=e,_h}var zh,Eb;function pk(){return Eb||(Eb=1,zh=function(e){return function(r){return e.apply(null,r)}}),zh}var Bh,kb;function mk(){return kb||(kb=1,Bh=function(e){return typeof e=="object"&&e.isAxiosError===!0}),Bh}var jb;function gk(){if(jb)return vc.exports;jb=1;var n=pn(),e=S1(),t=fk(),r=j1(),i=om();function l(d){var f=new t(d),h=e(t.prototype.request,f);return n.extend(h,t.prototype,f),n.extend(h,f),h}var c=l(i);return c.Axios=t,c.create=function(f){return l(r(c.defaults,f))},c.Cancel=A1(),c.CancelToken=hk(),c.isCancel=k1(),c.all=function(f){return Promise.all(f)},c.spread=pk(),c.isAxiosError=mk(),vc.exports=c,vc.exports.default=c,vc.exports}var Ph,Ab;function yk(){return Ab||(Ab=1,Ph=gk()),Ph}var Hh,Tb;function xk(){if(Tb)return Hh;Tb=1;const n=yk(),e=h=>n.get(`https://isaacdarcilla.github.io/philippine-addresses/${h}.json`);return Hh={regions:async()=>{try{return(await e("region")).data.map(g=>({id:g.id,psgc_code:g.psgc_code,region_name:g.region_name,region_code:g.region_code}))}catch(h){return h.message}},regionByCode:async h=>{try{return(await e("region")).data.find(({region_code:y})=>y===h)}catch(g){return g.message}},provinces:async h=>{try{return(await e("province")).data.filter(y=>y.region_code===h).map(y=>({psgc_code:y.psgc_code,province_name:y.province_name,province_code:y.province_code,region_code:y.region_code}))}catch(g){return g.message}},provincesByCode:async h=>{try{return(await e("province")).data.filter(y=>y.region_code===h).map(y=>({psgc_code:y.psgc_code,province_name:y.province_name,province_code:y.province_code,region_code:y.region_code}))}catch(g){return g.message}},provinceByName:async h=>{try{return(await e("province")).data.find(({province_name:y})=>y===h)}catch(g){return g.message}},cities:async h=>{try{return(await e("city")).data.filter(y=>y.province_code===h).map(y=>({city_name:y.city_name,city_code:y.city_code,province_code:y.province_code,region_desc:y.region_desc}))}catch(g){return g.message}},barangays:async h=>{try{return(await e("barangay")).data.filter(y=>y.city_code===h).map(y=>({brgy_name:y.brgy_name,brgy_code:y.brgy_code,province_code:y.province_code,region_code:y.region_code}))}catch(g){return g.message}}},Hh}var Ut=xk();const T1=E.createContext(void 0),bk=({children:n})=>{const{token:e,isAuthenticated:t}=ft(),[r,i]=E.useState(null),[l,c]=E.useState(!1),[d,f]=E.useState(null);E.useEffect(()=>{t&&e?h():i(null)},[t,e]);const h=async()=>{if(!(!t||!e)){c(!0),f(null);try{const y=await fetch(`${Ul.BASE_URL}/profile`,{method:"GET",headers:{Authorization:`Bearer ${e}`,Accept:"application/json"},credentials:"include"});if(!y.ok)throw new Error("Failed to fetch profile");const b=await y.json();i(b.data.profile)}catch(y){console.error("Error fetching profile:",y),f(y instanceof Error?y.message:"An error occurred while fetching the profile")}finally{c(!1)}}},g=async y=>{if(!(!t||!e)){c(!0),f(null);try{const b=await fetch(`${Ul.BASE_URL}/profile`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`,Accept:"application/json"},credentials:"include",body:JSON.stringify(y)});if(!b.ok){const w=await b.json();throw new Error(w.message||"Failed to update profile")}const v=await b.json();i(v.data.profile)}catch(b){throw console.error("Error updating profile:",b),f(b instanceof Error?b.message:"An error occurred while updating the profile"),b}finally{c(!1)}}};return p.jsx(T1.Provider,{value:{profile:r,isLoading:l,error:d,fetchProfile:h,updateProfile:g},children:n})},M1=()=>{const n=E.useContext(T1);if(n===void 0)throw new Error("useProfile must be used within a ProfileProvider");return n},Uc="guest_id",O1=E.createContext(void 0),vk=({children:n})=>{const[e,t]=E.useState(null),[r,i]=E.useState(!1),[l,c]=E.useState(null),{showToast:d}=xa(),f=async()=>{const g=localStorage.getItem(Uc);if(!g){t(null);return}i(!0),c(null);try{const y={"X-Guest-ID":g},b=await Qx.getProfile(y);t(b.data)}catch(y){console.error("Error fetching guest profile:",y),c(y instanceof Error?y.message:"An error occurred while fetching the profile")}finally{i(!1)}},h=async g=>{const y=localStorage.getItem(Uc);if(!y){d("Guest ID not found","error");return}i(!0),c(null);try{const b={"X-Guest-ID":y},v=await Qx.saveProfile(b,g);t(v.data),d("Profile saved successfully","success")}catch(b){console.error("Error saving guest profile:",b),c(b instanceof Error?b.message:"An error occurred while saving the profile"),d("Failed to save profile","error")}finally{i(!1)}};return E.useEffect(()=>{f()},[]),p.jsx(O1.Provider,{value:{profile:e,isLoading:r,error:l,fetchProfile:f,saveProfile:h},children:n})},R1=()=>{const n=E.useContext(O1);if(n===void 0)throw new Error("useGuestProfile must be used within a GuestProfileProvider");return n},xp={getPublicSettings:async()=>{try{return(await je("/settings")).data}catch(n){return console.error("Error fetching public settings:",n),{delivery_fee_ncr:80,delivery_fee_outside_ncr:120,free_delivery_threshold:0,payment_options_description:"",what_happens_after_payment:"",thanks_message:""}}},getAllSettings:async n=>{const e={};return e.Authorization=`Bearer ${n}`,(await je("/admin/settings","GET",null,e)).data},updateSetting:async(n,e,t)=>{const r={};return r.Authorization=`Bearer ${n}`,(await je(`/admin/settings/${e}`,"PUT",{value:t},r)).data},updateMultipleSettings:async(n,e)=>{const t={};return t.Authorization=`Bearer ${n}`,(await je("/admin/settings","POST",{settings:e},t)).data}},$s={deliveryFeeNcr:80,deliveryFeeOutsideNcr:120,freeDeliveryThreshold:0,paymentOptionsDescription:"",whatHappensAfterPayment:"",thanksMessage:"",isLoading:!0,refreshSettings:async()=>{}},D1=E.createContext($s),L1=()=>E.useContext(D1),wk=({children:n})=>{const[e,t]=E.useState($s.deliveryFeeNcr),[r,i]=E.useState($s.deliveryFeeOutsideNcr),[l,c]=E.useState($s.freeDeliveryThreshold),[d,f]=E.useState($s.paymentOptionsDescription),[h,g]=E.useState($s.whatHappensAfterPayment),[y,b]=E.useState(!0),[v,w]=E.useState($s.whatHappensAfterPayment),N=async()=>{try{b(!0);const O=await xp.getPublicSettings();t(O.delivery_fee_ncr),i(O.delivery_fee_outside_ncr),c(O.free_delivery_threshold),f(O.payment_options_description||""),g(O.what_happens_after_payment||""),w(O.thanks_message||"")}catch(O){console.error("Error fetching settings:",O)}finally{b(!1)}};E.useEffect(()=>{N()},[]);const j={deliveryFeeNcr:e,deliveryFeeOutsideNcr:r,freeDeliveryThreshold:l,paymentOptionsDescription:d,whatHappensAfterPayment:h,thanksMessage:v,isLoading:y,refreshSettings:async()=>{await N()}};return p.jsx(D1.Provider,{value:j,children:n})},Sk="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let Nk=(n=21)=>{let e="",t=crypto.getRandomValues(new Uint8Array(n|=0));for(;n--;)e+=Sk[t[n]&63];return e};const Ck=({expiryTime:n,handleExpired:e})=>{const[t,r]=E.useState(Math.abs(n));E.useEffect(()=>{if(t<=0)return;const l=setInterval(()=>{r(c=>c<=1?(clearInterval(l),0):c-1)},1e3);return()=>clearInterval(l)},[t]);const i=l=>{if(l<=0)return e(),"Expired";const c=Math.floor(l),d=Math.floor(c/60),f=c%60;return`${d}:${f.toString().padStart(2,"0")}`};return p.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-md p-4 mb-4",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-yellow-800 font-medium",children:"Reserved for you!"}),p.jsx("p",{className:"text-sm text-yellow-600",children:"Time left to complete your order:"})]}),p.jsx("div",{className:"text-2xl font-bold header-font text-yellow-800",children:i(t)})]})})},Uh={name:"",email:"",password:"",password_confirmation:"",instagramUsername:"",addressLine1:"",barangay:"",province:"",city:"",mobileNumber:"",paymentProof:null},Ek=({isOpen:n,onClose:e,totalAmount:t,onOrderSuccess:r,province:i})=>{const{user:l,isAuthenticated:c,register:d}=ft(),{profile:f,updateProfile:h}=M1(),{profile:g}=R1(),y=L1(),{cartItems:b,clearCart:v,holdProducts:w,fetchCart:N}=to(),[C,j]=E.useState(c?"checkout":"initial"),[O,M]=E.useState(1),[A,L]=E.useState({...Uh}),[B,F]=E.useState({}),[_,re]=E.useState(!1),[le,$]=E.useState(!1),[se,pe]=E.useState(null),[Ge,Oe]=E.useState(!1),[V,te]=E.useState(null),[de,Se]=E.useState([]),[R,U]=E.useState([]),[ne,K]=E.useState([]),Z=async()=>{try{const Y=await Ut.regions(),Q=[];let he=!1;for(const Ee of Y){const He=await Ut.provinces(Ee.region_code);if(He.filter(Qe=>Qe.province_name.toLowerCase().includes("ncr")||Qe.province_name.toLowerCase().includes("metro manila")||Qe.province_name.toLowerCase().includes("national capital region")).length>0&&!he)Q.push({psgc_code:"NCR",province_name:"Metro-Manila",province_code:"NCR",region_code:Ee.region_code}),he=!0;else{const zt=He.filter(nt=>!nt.province_name.toLowerCase().includes("ncr")&&!nt.province_name.toLowerCase().includes("metro manila")&&!nt.province_name.toLowerCase().includes("national capital region")).map(nt=>({...nt,province_name:nt.province_name.replace(/ /g,"-")}));Q.push(...zt)}}return Q.sort((Ee,He)=>Ee.province_name.localeCompare(He.province_name))}catch(Y){return console.error("Error fetching provinces:",Y),[]}},ce=async Y=>{try{const Q=Y.replace(/-/g," ");if(Q==="Metro Manila"){const Ee=await Ut.regions(),He=[];for(const Qe of Ee){const nt=(await Ut.provinces(Qe.region_code)).filter(Be=>Be.province_name.toLowerCase().includes("ncr")||Be.province_name.toLowerCase().includes("metro manila")||Be.province_name.toLowerCase().includes("national capital region"));for(const Be of nt){const Ar=await Ut.cities(Be.province_code);He.push(...Ar)}}return He.filter((Qe,zt,nt)=>zt===nt.findIndex(Be=>Be.city_name===Qe.city_name)).map(Qe=>({...Qe,city_name:Qe.city_name.replace(/ /g,"-")})).sort((Qe,zt)=>Qe.city_name.localeCompare(zt.city_name))}const he=await Ut.provinceByName(Q);return he&&he.province_code?(await Ut.cities(he.province_code)).map(He=>({...He,city_name:He.city_name.replace(/ /g,"-")})).sort((He,gt)=>He.city_name.localeCompare(gt.city_name)):[]}catch(Q){return console.error("Error fetching cities:",Q),[]}},ie=async(Y,Q)=>{try{const he=Y.replace(/-/g," "),Ee=Q.replace(/-/g," ");if(Ee==="Metro Manila"){const gt=await Ut.regions();for(const Qe of gt){const nt=(await Ut.provinces(Qe.region_code)).filter(Be=>Be.province_name.toLowerCase().includes("ncr")||Be.province_name.toLowerCase().includes("metro manila")||Be.province_name.toLowerCase().includes("national capital region"));for(const Be of nt){const At=(await Ut.cities(Be.province_code)).find(Rn=>Rn.city_name===he);if(At&&At.city_code)return(await Ut.barangays(At.city_code)).map(yt=>({...yt,brgy_name:yt.brgy_name.replace(/ /g,"-")})).sort((yt,$u)=>yt.brgy_name.localeCompare($u.brgy_name))}}return[]}const He=await Ut.provinceByName(Ee);if(He&&He.province_code){const Qe=(await Ut.cities(He.province_code)).find(zt=>zt.city_name===he);if(Qe&&Qe.city_code)return(await Ut.barangays(Qe.city_code)).map(nt=>({...nt,brgy_name:nt.brgy_name.replace(/ /g,"-")})).sort((nt,Be)=>nt.brgy_name.localeCompare(Be.brgy_name))}return[]}catch(he){return console.error("Error fetching barangays:",he),[]}};if(E.useEffect(()=>{Z().then(Se)},[]),E.useEffect(()=>{A.province&&(ce(A.province).then(Y=>{if(U(Y),!A.city&&(f!=null&&f.city||g!=null&&g.city)){const Q=c?f==null?void 0:f.city:g==null?void 0:g.city;Q&&L(he=>({...he,city:Q}))}}),A.city&&A.barangay&&(c&&f||!c&&g||(L(Q=>({...Q,city:"",barangay:""})),K([]))))},[A.province,f,g,c]),E.useEffect(()=>{A.city&&A.province&&(ie(A.city,A.province).then(Q=>{if(K(Q),!A.barangay&&(f!=null&&f.barangay||g!=null&&g.barangay)){const he=c?f==null?void 0:f.barangay:g==null?void 0:g.barangay;he&&L(Ee=>({...Ee,barangay:he}))}}),!(c&&f||!c&&g)&&A.barangay&&L(Q=>({...Q,barangay:""})))},[A.city,A.province,f,g,c]),E.useEffect(()=>{(async()=>{if(O===2){const Q=await w();if(console.log(Q),Q.success)Q.is_hold_expired||te(Q.hold_expiry_time_in_seconds);else{e(),await N();return}}})()},[O]),E.useEffect(()=>{if(n){let Y=i||"";if(c&&l){const Q={name:l.name||"",email:l.email||""};if(f){const he={instagramUsername:f.instagram_username||"",addressLine1:f.address_line1||"",barangay:f.barangay||"",city:f.city||"",mobileNumber:f.mobile_number||"",province:Y||f.province||""};L(Ee=>({...Ee,...Q,...he}))}else L(he=>({...he,...Q,province:Y}))}else if(g){const Q={name:g.customer_name||"",email:g.email||"",instagramUsername:g.instagram_username||"",addressLine1:g.address_line1||"",barangay:g.barangay||"",city:g.city||"",mobileNumber:g.mobile_number||"",province:Y||g.province||""};L(()=>({...Uh,...Q}))}else L(()=>({...Uh,province:Y}));j(c?"checkout":"initial"),M(1),F({}),$(!1),pe(null),re(!1),Oe(!1),U([]),K([])}},[n,c,l,f,g,i]),!n)return null;const Le=Y=>{const{name:Q,value:he}=Y.target;L({...A,[Q]:he}),B[Q]&&F({...B,[Q]:""})},qe=Y=>{Y.target.files&&Y.target.files[0]&&(L({...A,paymentProof:Y.target.files[0]}),B.paymentProof&&F({...B,paymentProof:""}))},Jt=Y=>{const{name:Q,value:he}=Y.target;L({...A,[Q]:he}),B[Q]&&F({...B,[Q]:""})},Wn=Y=>{const Q={};return C==="register"?(A.name.trim()||(Q.name="Name is required"),A.email.trim()?/\S+@\S+\.\S+/.test(A.email)||(Q.email="Email is invalid"):Q.email="Email is required",A.password.trim()?A.password.length<8&&(Q.password="Password must be at least 8 characters"):Q.password="Password is required",A.password!==A.password_confirmation&&(Q.password_confirmation="Passwords do not match")):Y===1?(A.name.trim()||(Q.name="Name is required"),!c&&!A.email.trim()?Q.email="Email is required":!c&&!/\S+@\S+\.\S+/.test(A.email)&&(Q.email="Email is invalid"),A.instagramUsername.trim()||(Q.instagramUsername="Instagram username is required"),A.addressLine1.trim()||(Q.addressLine1="Address is required"),A.barangay.trim()||(Q.barangay="Barangay is required"),A.city.trim()||(Q.city="City is required"),A.mobileNumber.trim()||(Q.mobileNumber="Mobile number is required"),A.province||(Q.province="Province is required")):Y===2&&(A.paymentProof||(Q.paymentProof="Proof of payment is required")),F(Q),Object.keys(Q).length===0},gn=()=>{Wn(O)&&M(Y=>Y<3?Y+1:Y)},ws=()=>M(Y=>Y>1?Y-1:Y),Ss=async Y=>{if(Y.preventDefault(),!!Wn(1)){re(!0);try{await d(A.name,A.email,A.password,A.password_confirmation,JSON.stringify(b.map(Q=>({product_id:Q.product.id})))),Oe(!0),j("checkout")}catch(Q){F({form:Q.message||"Registration failed"})}finally{re(!1)}}},Ns=async Y=>{if(Y.preventDefault(),!!Wn(O)){re(!0),pe(null);try{let Q=0;A.province&&(Q=A.province==="Metro-Manila"?y.deliveryFeeNcr:y.deliveryFeeOutsideNcr);const he=t+Q,Ee=new FormData;if(Ee.append("customer_name",A.name),Ee.append("instagram_username",A.instagramUsername),Ee.append("address_line1",A.addressLine1),Ee.append("barangay",A.barangay),Ee.append("province",A.province),Ee.append("city",A.city),Ee.append("mobile_number",A.mobileNumber),Ee.append("payment_proof",A.paymentProof),Ee.append("shipping_fee",Q.toString()),Ee.append("grand_total",he.toString()),c)await h({instagram_username:A.instagramUsername,address_line1:A.addressLine1,barangay:A.barangay,province:A.province,city:A.city,mobile_number:A.mobileNumber}),await oa.createOrder(localStorage.getItem("token"),Ee);else{let He=localStorage.getItem("guest_id");He||(He=Nk(),localStorage.setItem("guest_id",He),window.dispatchEvent(new Event("guest_id_set"))),Ee.append("guest_id",He),Ee.append("email",A.email),Ee.append("cart_items",JSON.stringify(b.map(gt=>({product_id:gt.product.id})))),await oa.createGuestOrder(Ee)}$(!0),v(),r&&r()}catch(Q){pe(Q.message||"An error occurred while processing your order")}finally{re(!1)}}},Cs=({title:Y})=>p.jsxs("div",{className:"flex justify-between items-center mb-4",children:[p.jsx("h3",{className:"text-xl leading-6 font-medium text-gray-900",id:"modal-headline",children:Y}),p.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 focus:outline-none","aria-label":"Close",children:"x"})]});return p.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:p.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[p.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:p.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75",onClick:e})}),p.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"​"}),p.jsx("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline",children:p.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:p.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:text-left w-full",children:[!c&&C==="initial"&&p.jsxs(p.Fragment,{children:[p.jsx(Cs,{title:"Before you checkout"}),p.jsx("p",{className:"text-gray-600 mb-6",children:"Would you like to save your cart by creating an account, or continue as a guest?"}),p.jsxs("div",{className:"space-y-3",children:[p.jsx("button",{onClick:()=>j("register"),className:"w-full bg-[#ad688f] text-white px-4 py-3 rounded hover:bg-[#96577b] transition-colors",children:"Create an Account"}),p.jsx("button",{onClick:()=>j("checkout"),className:"w-full border border-gray-300 bg-white text-gray-700 px-4 py-3 rounded hover:bg-gray-50 transition-colors",children:"Continue as Guest"})]})]}),C==="register"&&!Ge&&p.jsxs(p.Fragment,{children:[p.jsx(Cs,{title:"Create Your Account"}),p.jsxs("form",{onSubmit:Ss,className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Name"}),p.jsx("input",{type:"text",id:"name",name:"name",value:A.name,onChange:Le,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-[#ad688f] focus:border-[#ad688f] sm:text-sm"}),B.name&&p.jsx("p",{className:"mt-1 text-sm text-red-600",children:B.name})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),p.jsx("input",{type:"email",id:"email",name:"email",value:A.email,onChange:Le,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-[#ad688f] focus:border-[#ad688f] sm:text-sm"}),B.email&&p.jsx("p",{className:"mt-1 text-sm text-red-600",children:B.email})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),p.jsx("input",{type:"password",id:"password",name:"password",value:A.password,onChange:Le,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-[#ad688f] focus:border-[#ad688f] sm:text-sm"}),B.password&&p.jsx("p",{className:"mt-1 text-sm text-red-600",children:B.password})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"password_confirmation",className:"block text-sm font-medium text-gray-700",children:"Confirm Password"}),p.jsx("input",{type:"password",id:"password_confirmation",name:"password_confirmation",value:A.password_confirmation,onChange:Le,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-[#ad688f] focus:border-[#ad688f] sm:text-sm"}),B.password_confirmation&&p.jsx("p",{className:"mt-1 text-sm text-red-600",children:B.password_confirmation})]}),B.form&&p.jsx("div",{className:"mb-4 p-3 bg-red-50 text-red-700 rounded border border-red-200",children:B.form}),p.jsxs("div",{className:"pt-3",children:[p.jsx("button",{type:"submit",disabled:_,className:"w-full bg-[#ad688f] text-white px-4 py-3 rounded hover:bg-[#96577b] transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:_?"Creating Account...":"Create Account & Continue"}),p.jsx("button",{type:"button",onClick:()=>j("initial"),className:"w-full text-gray-600 mt-2 text-sm",children:"Back to options"})]})]})]}),(C==="checkout"||C==="register"&&Ge)&&!le&&p.jsxs(p.Fragment,{children:[p.jsx(Cs,{title:"Checkout"}),p.jsxs("div",{className:"mt-4 mb-6",children:[p.jsxs("div",{className:"flex items-center",children:[p.jsx("div",{className:`flex items-center justify-center h-8 w-8 rounded-full ${O>=1?"bg-[#ad688f] text-white":"bg-gray-200"}`,children:"1"}),p.jsx("div",{className:`flex-1 h-1 mx-2 ${O>=2?"bg-[#ad688f]":"bg-gray-200"}`}),p.jsx("div",{className:`flex items-center justify-center h-8 w-8 rounded-full ${O>=2?"bg-[#ad688f] text-white":"bg-gray-200"}`,children:"2"}),p.jsx("div",{className:`flex-1 h-1 mx-2 ${O>=3?"bg-[#ad688f]":"bg-gray-200"}`}),p.jsx("div",{className:`flex items-center justify-center h-8 w-8 rounded-full ${O>=3?"bg-[#ad688f] text-white":"bg-gray-200"}`,children:"3"})]}),p.jsxs("div",{className:"flex justify-between mt-1 text-xs text-gray-500",children:[p.jsx("span",{children:"Customer Info"}),p.jsx("span",{children:"Payment"}),p.jsx("span",{children:"Place Order"})]})]}),se&&p.jsxs("div",{className:"bg-red-50 p-4 rounded border border-red-200 mb-4",children:[p.jsx("p",{className:"text-red-800",children:se}),p.jsx("p",{className:"text-sm text-red-600 mt-1",children:"Please try again or contact support for assistance."})]}),V&&p.jsx(Ck,{expiryTime:V,handleExpired:async()=>{await N(),e()}}),p.jsxs("form",{onSubmit:Ns,children:[O===1&&p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Full Name"}),p.jsx("input",{type:"text",id:"name",name:"name",value:A.name,onChange:Le,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-[#ad688f] focus:border-[#ad688f] sm:text-sm"}),B.name&&p.jsx("p",{className:"mt-1 text-sm text-red-600",children:B.name})]}),!c&&p.jsxs("div",{children:[p.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),p.jsx("input",{type:"email",id:"email",name:"email",value:A.email,onChange:Le,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-[#ad688f] focus:border-[#ad688f] sm:text-sm"}),B.email&&p.jsx("p",{className:"mt-1 text-sm text-red-600",children:B.email})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"instagramUsername",className:"block text-sm font-medium text-gray-700",children:"Instagram Username"}),p.jsxs("div",{className:"mt-1 flex rounded-md shadow-sm",children:[p.jsx("span",{className:"inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500 sm:text-sm",children:"@"}),p.jsx("input",{type:"text",id:"instagramUsername",name:"instagramUsername",value:A.instagramUsername,onChange:Le,className:"flex-1 block w-full border border-gray-300 rounded-none rounded-r-md shadow-sm py-2 px-3 focus:outline-none focus:ring-[#ad688f] focus:border-[#ad688f] sm:text-sm"})]}),B.instagramUsername&&p.jsx("p",{className:"mt-1 text-sm text-red-600",children:B.instagramUsername})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"province",className:"block text-sm font-medium text-gray-700",children:"Province"}),p.jsxs("select",{id:"province",name:"province",value:A.province,onChange:Jt,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-[#ad688f] focus:border-[#ad688f] sm:text-sm",children:[p.jsx("option",{value:"",children:"Select Province"}),de.map(Y=>p.jsx("option",{value:Y.province_name,children:Y.province_name},Y.province_code))]}),B.province&&p.jsx("p",{className:"mt-1 text-sm text-red-600",children:B.province})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700",children:"City"}),p.jsxs("select",{id:"city",name:"city",value:A.city,onChange:Jt,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-[#ad688f] focus:border-[#ad688f] sm:text-sm",disabled:!A.province,children:[p.jsx("option",{value:"",children:"Select City"}),R.map(Y=>p.jsx("option",{value:Y.city_name,children:Y.city_name},Y.city_code))]}),B.city&&p.jsx("p",{className:"mt-1 text-sm text-red-600",children:B.city})]})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"barangay",className:"block text-sm font-medium text-gray-700",children:"Barangay"}),p.jsxs("select",{id:"barangay",name:"barangay",value:A.barangay,onChange:Jt,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-[#ad688f] focus:border-[#ad688f] sm:text-sm",disabled:!A.city,children:[p.jsx("option",{value:"",children:"Select Barangay"}),ne.map(Y=>p.jsx("option",{value:Y.brgy_name,children:Y.brgy_name},Y.brgy_code))]}),B.barangay&&p.jsx("p",{className:"mt-1 text-sm text-red-600",children:B.barangay})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"addressLine1",className:"block text-sm font-medium text-gray-700",children:"Address Line 1"}),p.jsx("input",{type:"text",id:"addressLine1",name:"addressLine1",value:A.addressLine1,onChange:Le,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-[#ad688f] focus:border-[#ad688f] sm:text-sm"}),B.addressLine1&&p.jsx("p",{className:"mt-1 text-sm text-red-600",children:B.addressLine1})]})]}),p.jsx("div",{className:"grid grid-cols-1 gap-4",children:p.jsxs("div",{children:[p.jsx("label",{htmlFor:"mobileNumber",className:"block text-sm font-medium text-gray-700",children:"Mobile Number"}),p.jsx("input",{type:"text",id:"mobileNumber",name:"mobileNumber",value:A.mobileNumber,onChange:Le,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-[#ad688f] focus:border-[#ad688f] sm:text-sm"}),B.mobileNumber&&p.jsx("p",{className:"mt-1 text-sm text-red-600",children:B.mobileNumber})]})})]}),O===2&&p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"bg-green-50 p-4 rounded border border-green-200",children:[p.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Order Summary"}),p.jsxs("ul",{className:"text-sm text-gray-700 space-y-2",children:[p.jsxs("li",{children:[p.jsx("span",{className:"font-medium",children:"Name:"})," ",A.name]}),!c&&p.jsxs("li",{children:[p.jsx("span",{className:"font-medium",children:"Email:"})," ",A.email]}),p.jsxs("li",{children:[p.jsx("span",{className:"font-medium",children:"Instagram:"})," ","@",A.instagramUsername]}),p.jsxs("li",{children:[p.jsx("span",{className:"font-medium",children:"Address:"})," ",A.addressLine1,", ",A.barangay,","," ",A.city,", ",A.province]}),p.jsxs("li",{children:[p.jsx("span",{className:"font-medium",children:"Mobile:"})," ",A.mobileNumber]}),p.jsxs("li",{children:[p.jsx("span",{className:"font-medium",children:"Item total:"})," ","₱",t.toFixed(2)]}),p.jsxs("li",{children:[p.jsx("span",{className:"font-medium",children:"Shipping Fee:"})," ",y.isLoading?"Loading...":`₱${A.province?(A.province.replace(/-/g," ")==="Metro Manila"?y.deliveryFeeNcr:y.deliveryFeeOutsideNcr).toFixed(2):"0.00"}`]}),p.jsxs("li",{children:[p.jsx("span",{className:"font-bold",children:"ORDER TOTAL:"})," ",y.isLoading?"Loading...":p.jsxs("span",{className:"font-bold",children:["₱",(A.province,t.toFixed(2))]})]})]})]}),!!y.paymentOptionsDescription&&p.jsx("div",{className:"mt-4",children:p.jsx("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:y.paymentOptionsDescription}})}),p.jsxs("div",{className:"mt-4",children:[p.jsx("label",{htmlFor:"paymentProof",className:"block text-sm font-medium text-gray-700",children:"Proof of Payment"}),p.jsx("input",{type:"file",id:"paymentProof",name:"paymentProof",accept:"image/*",onChange:qe,className:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-black focus:border-black sm:text-sm"}),p.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Please upload a screenshot of your payment receipt."}),B.paymentProof&&p.jsx("p",{className:"mt-1 text-sm text-red-600",children:B.paymentProof})]})]}),O===3&&y.whatHappensAfterPayment&&p.jsx("div",{className:"bg-yellow-50 p-4 rounded border border-yellow-200",children:p.jsx("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:y.whatHappensAfterPayment}})}),p.jsxs("div",{className:"flex justify-between mt-6",children:[O>1&&p.jsx("button",{type:"button",onClick:ws,className:"inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:w-auto sm:text-sm",children:"Back"}),O<3&&p.jsx("button",{type:"button",onClick:gn,className:"inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-[#ad688f] text-base font-medium text-white hover:bg-[#96577b] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#ad688f] sm:ml-3 sm:w-auto sm:text-sm",children:"Continue"}),O===3&&p.jsx("button",{type:"submit",disabled:_,className:"inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-[#ad688f] text-base font-medium text-white hover:bg-[#96577b] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#ad688f] disabled:bg-gray-400 disabled:cursor-not-allowed sm:ml-3 sm:w-auto sm:text-sm",children:_?"Processing...":"Place Order"})]})]})]}),le&&p.jsx("div",{className:"space-y-4",children:p.jsx("div",{className:"bg-green-50 p-4 rounded border border-green-200",children:p.jsx("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:y.thanksMessage}})})})]})})})]})})},kk=()=>{const{isAuthenticated:n,user:e}=ft(),[t,r]=E.useState(!1),{cartItems:i,removeFromCart:l,getTotalPrice:c,clearCart:d}=to(),{profile:f}=M1(),{profile:h}=R1(),{deliveryFeeNcr:g,deliveryFeeOutsideNcr:y,isLoading:b}=L1(),{showToast:v}=xa(),[w,N]=E.useState(""),[C,j]=E.useState([]),O=async()=>{try{const $=await Ut.regions(),se=[];let pe=!1;for(const Ge of $){const Oe=await Ut.provinces(Ge.region_code);if(Oe.filter(te=>te.province_name.toLowerCase().includes("ncr")||te.province_name.toLowerCase().includes("metro manila")||te.province_name.toLowerCase().includes("national capital region")).length>0&&!pe)se.push({psgc_code:"NCR",province_name:"Metro-Manila",province_code:"NCR",region_code:Ge.region_code}),pe=!0;else{const de=Oe.filter(Se=>!Se.province_name.toLowerCase().includes("ncr")&&!Se.province_name.toLowerCase().includes("metro manila")&&!Se.province_name.toLowerCase().includes("national capital region")).map(Se=>({...Se,province_name:Se.province_name.replace(/ /g,"-")}));se.push(...de)}}return se.sort((Ge,Oe)=>Ge.province_name.localeCompare(Oe.province_name))}catch($){return console.error("Error fetching provinces:",$),[]}};E.useEffect(()=>{O().then(j)},[]);const M=i.some($=>{if($.product.status==="Sold")return!0;if($.product.status==="OnHold"){const se=n?e==null?void 0:e.id:localStorage.getItem(Uc),pe=$.product.onhold_by_id==se&&$.product.onhold_by_type==(n?"user":"guest");return console.log({isHeldByCurrentUser:pe,currentUserId:se,isAuthenticated:n,item:$,profile:f}),!pe}return!1});E.useEffect(()=>{if(n&&(f!=null&&f.province)){const $=f.province==="Metro Manila"?"Metro-Manila":f.province.replace(/ /g,"-");N($)}else if(!n&&(h!=null&&h.province)){const $=h.province==="Metro Manila"?"Metro-Manila":h.province.replace(/ /g,"-");N($)}},[n,f,h]);const A=c();let L=0;i.length>0&&(w?L=w==="Metro-Manila"?g:y:L=0);const B=A+L,F=()=>{if(M){v("Please remove unavailable items from your cart before proceeding to checkout.","error");return}r(!0)},_=()=>{r(!1)},re=$=>{N($.target.value)},le=$=>{if($.status==="Sold")return p.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-red-100 text-red-800",children:"Sold"});if($.status==="OnHold"){const se=n?e==null?void 0:e.id:localStorage.getItem(Uc),pe=$.onhold_by_id==se&&$.onhold_by_type==(n?"user":"guest");return console.log("getProductStatusBadge"),console.log({isHeldByCurrentUser:pe,currentUserId:se,isAuthenticated:n,product:$}),p.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded text-xs font-medium ${pe?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:pe?"Reserved by You":"On hold by other user"})}return null};return p.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[p.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Your Cart"}),i.length===0?p.jsxs("div",{className:"text-center py-12 bg-white shadow rounded p-8",children:[p.jsx("p",{className:"text-xl mb-6",children:"Your cart is empty"}),p.jsx(ye,{to:"/products",className:"inline-block border border-black px-8 py-3 hover:bg-black hover:text-white transition-colors no-underline text-black",children:"Continue Shopping"})]}):p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[p.jsx("div",{className:"lg:col-span-2",children:p.jsxs("div",{className:"bg-white shadow rounded overflow-hidden",children:[p.jsx("div",{className:"hidden md:block",children:p.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[p.jsx("thead",{className:"bg-gray-50",children:p.jsxs("tr",{children:[p.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),p.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),p.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),p.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),p.jsx("tbody",{className:"divide-y divide-gray-200",children:i.map($=>{var se;return p.jsxs("tr",{className:$.product.status!=="Available"?"bg-gray-50":"",children:[p.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:p.jsxs("div",{className:"flex items-center",children:[p.jsx("div",{className:"h-16 w-16 bg-gray-200 rounded flex-shrink-0 overflow-hidden",children:p.jsx("img",{src:$.product.image,alt:$.product.name,className:"h-full w-full object-cover"})}),p.jsxs("div",{className:"ml-4",children:[p.jsx("div",{className:"text-sm font-medium text-gray-900",children:$.product.name}),p.jsxs("div",{className:"text-sm text-gray-500",children:["Size: ",(se=$.product.size)==null?void 0:se.toUpperCase()]})]})]})}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:p.jsxs("div",{className:"text-sm font-medium text-gray-900",children:["₱",Number($.product.price).toFixed(2)]})}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:le($.product)}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:p.jsx("button",{className:"text-red-600 hover:text-red-800 font-medium",onClick:()=>$.id!==void 0?l($.id):null,children:"Remove"})})]},`desktop-${$.product.id}`)})})]})}),p.jsx("div",{className:"md:hidden",children:p.jsx("div",{className:"divide-y divide-gray-200",children:i.map($=>{var se;return p.jsxs("div",{className:`p-4 ${$.product.status!=="Available"?"bg-gray-50":""}`,children:[p.jsxs("div",{className:"flex mb-4",children:[p.jsx("div",{className:"h-20 w-20 bg-gray-200 rounded flex-shrink-0 overflow-hidden",children:p.jsx("img",{src:$.product.image,alt:$.product.name,className:"h-full w-full object-cover"})}),p.jsxs("div",{className:"ml-4 flex-grow",children:[p.jsx("div",{className:"text-sm font-medium text-gray-900",children:$.product.name}),p.jsxs("div",{className:"text-sm text-gray-500",children:["Size: ",(se=$.product.size)==null?void 0:se.toUpperCase()]}),p.jsxs("div",{className:"text-sm font-medium text-gray-900 mt-1",children:["₱",Number($.product.price).toFixed(2)]}),p.jsx("div",{className:"mt-2",children:le($.product)})]})]}),p.jsx("div",{className:"flex justify-end items-center mt-2",children:p.jsx("button",{className:"text-red-600 hover:text-red-800 font-medium",onClick:()=>$.id!==void 0?l($.id):null,children:"Remove"})})]},`mobile-${$.product.id}`)})})}),p.jsxs("div",{className:"p-4 flex justify-between border-t border-gray-200",children:[p.jsx(ye,{to:"/products",className:"text-sm font-medium text-gray-700 hover:text-black",children:"Continue Shopping"}),p.jsx("button",{onClick:d,className:"text-sm font-medium text-red-600 hover:text-red-800",children:"Clear Cart"})]})]})}),p.jsxs("div",{className:"bg-white shadow rounded p-6",children:[p.jsx("h2",{className:"text-lg font-medium mb-4",children:"Order Summary"}),M&&p.jsx("div",{className:"mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:p.jsx("p",{className:"text-sm text-yellow-800",children:"Some items in your cart are no longer available. Please remove them before proceeding to checkout."})}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"flex justify-between",children:[p.jsxs("span",{className:"text-gray-600",children:["Item total (",i.length," ",i.length===1?"item":"items",")"]}),p.jsxs("span",{className:"font-medium",children:["₱",Number(A).toFixed(2)]})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{className:"text-gray-600",children:"Shipping"}),p.jsxs("select",{className:"border border-gray-300 rounded-md py-1 px-2 focus:outline-none focus:ring-black focus:border-black text-sm",value:w,onChange:re,disabled:b,children:[p.jsx("option",{value:"",children:"Select Province"}),C.map($=>p.jsx("option",{value:$.province_name,children:$.province_name},$.province_code))]})]}),p.jsx("div",{className:"flex justify-end",children:p.jsx("span",{className:"font-medium",children:w?b?"Loading...":`₱${Number(L).toFixed(2)}`:"—"})})]}),p.jsxs("div",{className:"flex justify-between border-t border-gray-200 pt-4",children:[p.jsx("span",{className:"font-medium text-lg",children:"Total"}),p.jsxs("span",{className:"font-medium text-lg",children:["₱",Number(B).toFixed(2)]})]}),p.jsx("button",{onClick:F,disabled:M,className:`w-full py-3 px-4 font-medium rounded transition-colors ${M?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-[#ad688f] text-white hover:bg-[#96577b]"}`,children:M?"Remove Unavailable Items":"Checkout"}),n&&p.jsx(ye,{to:"/my-orders",className:"w-full text-center block text-gray-700 hover:text-black py-2 text-sm font-medium",children:"View Your Orders"})]})]})]}),p.jsx(Ek,{isOpen:t,onClose:_,totalAmount:B,province:w})]})},_1=({filteredOrders:n,selectedOrder:e,onSelectOrder:t,loading:r,error:i,tabs:l,activeTab:c,onTabChange:d,onClearFilters:f,searchQuery:h,onSearchQueryChange:g,mobileView:y=!1,adminMode:b=!1,updateStatus:v="",onUpdateStatus:w,adminNotes:N="",onAdminNotesChange:C,onStatusUpdate:j,isUpdating:O=!1,updateSuccess:M=!1,getStatusBadgeClass:A,formatDate:L})=>{var B;return p.jsxs(p.Fragment,{children:[i&&p.jsx("div",{className:"mb-4 p-4 bg-red-100 text-red-700 rounded",children:i}),b&&p.jsx("div",{className:"bg-white shadow rounded p-4 mb-6",children:p.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4",children:[p.jsxs("div",{className:"flex-1",children:[p.jsx("label",{htmlFor:"search",className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),p.jsx("input",{type:"text",id:"search",className:"w-full p-2 border border-gray-300 rounded",placeholder:"Search by name, username, or order #",value:h||"",onChange:F=>g&&g(F.target.value)})]}),p.jsx("div",{className:"mt-2 md:mt-6",children:p.jsx("button",{className:"bg-gray-100 text-gray-800 px-6 py-2 rounded inline-block hover:bg-gray-200 transition-colors",onClick:f,children:"Clear Filters"})})]})}),p.jsx("div",{className:"flex gap-2 mb-4",children:l.map(F=>p.jsxs("button",{className:`px-4 py-2 rounded ${c===F.id?"bg-black text-white":"bg-gray-100 text-gray-800"} font-medium`,onClick:()=>d(F.id),children:[F.label," ",typeof F.count=="number"&&p.jsxs("span",{children:["(",F.count,")"]})]},F.id))}),r?p.jsx("div",{className:"bg-white shadow rounded p-6 text-center",children:p.jsx("p",{className:"text-gray-600",children:"Loading orders..."})}):(n==null?void 0:n.length)===0?p.jsx("div",{className:"bg-white shadow rounded p-6",children:p.jsxs("div",{className:"text-center py-8",children:[p.jsx("h2",{className:"text-lg font-medium mb-2",children:"No orders found"}),p.jsx("p",{className:"text-gray-600 mb-4",children:"Try adjusting your filters to see more results."}),f&&p.jsx("button",{onClick:f,className:"bg-gray-100 text-gray-800 px-6 py-2 rounded inline-block hover:bg-gray-200 transition-colors",children:"Clear Filters"})]})}):p.jsxs("div",{className:"grid md:grid-cols-12 gap-6",children:[p.jsxs("div",{className:`${e&&y?"hidden":""} md:col-span-5 lg:col-span-4 bg-white shadow rounded overflow-auto`,style:{maxHeight:"calc(100vh - 200px)"},children:[p.jsxs("div",{className:"p-4 bg-gray-50 border-b border-gray-200 flex justify-between items-center",children:[p.jsxs("h2",{className:"font-semibold",children:["Orders (",n==null?void 0:n.length,")"]}),y&&e&&p.jsx("button",{className:"text-sm text-blue-600",onClick:()=>t(null),children:"← Back to List"})]}),p.jsx("div",{className:"divide-y divide-gray-200",children:n==null?void 0:n.map(F=>p.jsxs("div",{className:`p-4 cursor-pointer hover:bg-gray-50 ${(e==null?void 0:e.id)===F.id?"bg-gray-100":""}`,onClick:()=>t(F),children:[p.jsxs("div",{className:"flex justify-between",children:[p.jsxs("span",{className:"font-medium",children:["Order #",F.id]}),p.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${A(F.status)}`,children:F.status.charAt(0).toUpperCase()+F.status.slice(1)})]}),p.jsx("p",{className:"text-sm text-gray-600 mt-1",children:F.customer_name}),p.jsxs("p",{className:"text-sm text-gray-600",children:["@",F.instagram_username]}),p.jsxs("div",{className:"mt-2 flex justify-between items-center",children:[p.jsx("p",{className:"text-sm text-gray-500",children:new Date(F.created_at).toLocaleDateString()}),p.jsxs("p",{className:"font-medium",children:["₱",parseFloat(F.total_amount.toString()).toFixed(2)]})]})]},F.id))})]}),p.jsx("div",{className:`${!e&&y?"hidden":""} md:col-span-7 lg:col-span-8 bg-white shadow rounded overflow-auto`,style:{maxHeight:"calc(100vh - 200px)"},children:e?p.jsxs("div",{className:"p-6",children:[p.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start gap-4 mb-6",children:[p.jsxs("div",{children:[p.jsxs("h2",{className:"text-xl font-semibold",children:["Order #",e.id]}),p.jsxs("p",{className:"text-sm text-gray-500",children:["Placed on ",L(e.created_at)]})]}),y&&p.jsx("button",{className:"text-sm text-blue-600",onClick:()=>t(null),children:"← Back to List"})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-md font-medium mb-2",children:"Customer Information"}),p.jsxs("p",{className:"mb-1",children:[p.jsx("span",{className:"font-medium",children:"Name:"})," ",e.customer_name]}),p.jsxs("p",{className:"mb-1",children:[p.jsx("span",{className:"font-medium",children:"Email:"})," ",((B=e.user)==null?void 0:B.email)||"No email available"]}),p.jsxs("p",{className:"mb-1",children:[p.jsx("span",{className:"font-medium",children:"Instagram:"})," @",e.instagram_username]}),p.jsxs("p",{className:"mb-1",children:[p.jsx("span",{className:"font-medium",children:"Address:"})," ",e.address_line1,", ",e.barangay,", ",e.city,", ",e.province]}),p.jsxs("p",{className:"mb-1",children:[p.jsx("span",{className:"font-medium",children:"Mobile:"})," ",e.mobile_number]})]}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-md font-medium mb-2",children:"Order Information"}),p.jsxs("p",{className:"mb-1",children:[p.jsx("span",{className:"font-medium",children:"Status:"}),p.jsx("span",{className:`ml-2 px-2 py-1 text-xs rounded-full ${A(e.status)}`,children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})]}),p.jsxs("p",{className:"mb-1",children:[p.jsx("span",{className:"font-medium",children:"Payment Method:"})," ",e.payment_method]}),p.jsxs("p",{className:"mb-1",children:[p.jsx("span",{className:"font-medium",children:"Total Amount:"})," ₱",parseFloat(e.total_amount.toString()).toFixed(2)]}),p.jsxs("p",{className:"mb-1",children:[p.jsx("span",{className:"font-medium",children:"Shipping Fee:"})," ₱",parseFloat((e.shipping_fee||0).toString()).toFixed(2)]}),p.jsxs("p",{className:"mb-1",children:[p.jsx("span",{className:"font-medium",children:"Grand Total:"})," ₱",(parseFloat(e.total_amount.toString())+parseFloat((e.shipping_fee||0).toString())).toFixed(2)]}),e.approved_at&&p.jsxs("p",{className:"mb-1",children:[p.jsx("span",{className:"font-medium",children:"Approved:"})," ",L(e.approved_at)]})]})]}),e.payment_proof&&p.jsxs("div",{className:"mb-6",children:[p.jsx("h3",{className:"text-md font-medium mb-2",children:"Payment Proof"}),p.jsx("div",{className:"w-full max-w-sm border border-gray-200 rounded overflow-hidden",children:p.jsx("img",{src:`${Ul.BASE_URL.replace("api.","")}/storage/${e.payment_proof}`,alt:"Payment Proof",className:"w-full h-auto"})})]}),p.jsxs("div",{className:"mb-6",children:[p.jsx("h3",{className:"text-md font-medium mb-2",children:"Order Items"}),p.jsx("div",{className:"overflow-x-auto",children:p.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[p.jsx("thead",{className:"bg-gray-50",children:p.jsxs("tr",{children:[p.jsx("th",{scope:"col",className:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),p.jsx("th",{scope:"col",className:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Size"}),p.jsx("th",{scope:"col",className:"px-2 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantity"}),p.jsx("th",{scope:"col",className:"px-2 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"})]})}),p.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.items&&e.items.map(F=>p.jsxs("tr",{children:[p.jsx("td",{className:"px-2 py-2 text-xs sm:text-sm text-gray-900",children:F.product_name}),p.jsxs("td",{className:"px-2 py-2 text-xs sm:text-sm text-gray-500 text-right",children:["₱",parseFloat(F.price.toString()).toFixed(2)]})]},F.id))})]})})]}),b&&p.jsxs("div",{children:[p.jsx("h3",{className:"text-md font-medium mb-4",children:"Update Order Status"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),p.jsxs("select",{id:"status",className:"w-full p-2 border border-gray-300 rounded",value:v,onChange:F=>w&&w(F.target.value),children:[p.jsx("option",{value:"pending",children:"Pending"}),p.jsx("option",{value:"approved",children:"Approved"}),p.jsx("option",{value:"shipped",children:"Shipped"}),p.jsx("option",{value:"delivered",children:"Delivered"}),p.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700 mb-2",children:"Admin Notes"}),p.jsx("textarea",{id:"notes",className:"w-full p-2 border border-gray-300 rounded",value:N,onChange:F=>C&&C(F.target.value),rows:3,placeholder:"Add notes visible to customer (optional)"})]})]}),p.jsx("button",{className:"bg-black text-white px-4 py-2 rounded disabled:bg-gray-400",onClick:j,disabled:O,children:O?"Updating...":"Update Order"}),M&&p.jsx("div",{className:"mt-4 p-3 bg-green-100 text-green-700 rounded",children:"Order status updated successfully."})]})]}):p.jsx("div",{className:"p-6 text-center text-gray-500",children:p.jsx("p",{children:"Select an order to view details"})})})]})]})},jk=()=>{const{token:n}=ft(),[e,t]=E.useState([]),[r,i]=E.useState([]),[l,c]=E.useState(!0),[d,f]=E.useState(null),[h,g]=E.useState(null),[y,b]=E.useState("all"),[v,w]=E.useState(!1),[N,C]=E.useState(null),j=[{id:"all",label:"All Orders"},{id:"pending",label:"Pending"},{id:"approved",label:"Approved"},{id:"shipped",label:"Shipped"},{id:"delivered",label:"Delivered"},{id:"cancelled",label:"Cancelled"}];E.useEffect(()=>{C(localStorage.getItem("guest_id"))},[]),E.useEffect(()=>{B()},[n,N]),E.useEffect(()=>{(e==null?void 0:e.length)>0&&(F(),L())},[e,y]),E.useEffect(()=>{const $=()=>{w(window.innerWidth<768)};return $(),window.addEventListener("resize",$),()=>{window.removeEventListener("resize",$)}},[]);const O=()=>{const $={all:e==null?void 0:e.length,pending:0,approved:0,shipped:0,delivered:0,cancelled:0};return e==null||e.forEach(se=>{$[se.status]!==void 0&&$[se.status]++}),$},[M,A]=E.useState(j),L=()=>{const $=O(),se=j.map(pe=>({...pe,count:$[pe.id]}));A(se)},B=async()=>{if(n){c(!0),f(null);try{const se=(await oa.getUserOrders(n)).data.orders;t(se),i(se),se.length>0&&g(se[0])}catch($){f($ instanceof Error?$.message:"An error occurred while fetching orders")}finally{c(!1)}}else if(N){c(!0),f(null);try{const se=(await oa.getGuestOrders(N)).data.orders;t(se),i(se),se.length>0&&g(se[0])}catch($){f($ instanceof Error?$.message:"An error occurred while fetching guest orders")}finally{c(!1)}}else t([]),i([]),c(!1)},F=()=>{i(y==="all"?e:e.filter($=>$.status===y))},_=$=>{b($)},re=$=>{switch($){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-green-100 text-green-800";case"shipped":return"bg-blue-100 text-blue-800";case"delivered":return"bg-indigo-100 text-indigo-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},le=$=>{const se=new Date($);return se.toLocaleDateString()+" "+se.toLocaleTimeString()};return!n&&!N?p.jsx("div",{className:"container mx-auto px-4 py-8",children:p.jsxs("div",{className:"text-center py-12",children:[p.jsx("h2",{className:"text-2xl font-bold mb-4",children:"No Orders Found"}),p.jsx("p",{className:"text-gray-600 mb-4",children:"You are not logged in and have not placed any guest orders yet."}),p.jsx(ye,{to:"/products",className:"bg-black text-white px-6 py-2 rounded inline-block",children:"Browse Products"})]})}):p.jsxs("div",{className:"container mx-auto px-4 py-8",children:[p.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[p.jsx("h1",{className:"text-2xl font-bold",children:"My Orders"}),p.jsx(ye,{to:"/",className:"bg-black text-white px-4 py-2 rounded whitespace-nowrap",children:"Continue Shopping"})]}),p.jsx(_1,{filteredOrders:r,selectedOrder:h,onSelectOrder:g,loading:l,error:d,tabs:M,activeTab:y,onTabChange:_,getStatusBadgeClass:re,formatDate:le,adminMode:!1,mobileView:v})]})},Ak=()=>{const[n,e]=E.useState("all"),[t,r]=E.useState(""),[i,l]=E.useState([]),[c,d]=E.useState([]),[f,h]=E.useState(!0),[g,y]=E.useState(null),[b,v]=E.useState(!1);E.useEffect(()=>{(async()=>{try{h(!0);const C=await sm();l(C)}catch(C){console.error("Error fetching products:",C),y("Failed to load products")}finally{h(!1)}})()},[]),E.useEffect(()=>{i.length>0&&d(lm(i,n,t,b))},[i,n,t,b]);const w=()=>{e("all"),r(""),v(!1)};return f?p.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[p.jsx("h1",{className:"text-3xl font-bold mb-8",children:"All Products"}),p.jsx("div",{className:"text-center py-12",children:p.jsx("p",{children:"Loading products..."})})]}):g?p.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[p.jsx("h1",{className:"text-3xl font-bold mb-8",children:"All Products"}),p.jsx("div",{className:"text-center py-12",children:p.jsx("p",{className:"text-red-500",children:g})})]}):p.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[p.jsx("h1",{className:"text-3xl font-bold mb-8",children:"All Products"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8 mb-8",children:[p.jsx("div",{className:"md:col-span-1",children:p.jsx(im,{activeSize:n,searchKeyword:t,onSizeChange:e,onKeywordChange:r,showCategoryFilter:!1,hideSoldProducts:b,onHideSoldChange:v})}),p.jsx("div",{className:"md:col-span-3",children:p.jsx(am,{products:c,onResetFilters:w,searchKeyword:t})})]})]})},Tk=()=>{const{id:n}=Tu(),{addToCart:e,isInCart:t}=to(),{showToast:r}=xa(),[i,l]=E.useState(null),[c,d]=E.useState(!0),[f,h]=E.useState(null),[g,y]=E.useState(0),[b,v]=E.useState(!1);E.useEffect(()=>{(async()=>{try{const M=await gs.getProductById(n||"");l(M.data)}catch(M){console.error("Error:",M),h("Failed to load product details")}finally{d(!1)}})()},[n]);const w=async()=>{if(!(!i||i.status!=="Available"))try{v(!0),await e(i),r("Product added to cart!","success")}catch(O){console.error("Error:",O),r("Failed to add product to cart","error")}finally{v(!1)}},N=()=>{if(!i)return[];const O=[i.image];if(i.images&&i.images.length>0){const M=i.images.filter(A=>A!==i.image);O.push(...M)}return O},C=O=>{y(O)};if(c)return p.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:p.jsxs("div",{className:"text-center",children:[p.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Loading Product"}),p.jsx("p",{children:"Please wait while we fetch the product details..."})]})});if(f||!i)return p.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:p.jsxs("div",{className:"text-center",children:[p.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Product Not Found"}),p.jsx("p",{className:"text-red-500 mb-4",children:f}),p.jsx(ye,{to:"/products",className:"inline-block border border-black px-8 py-3 hover:bg-black hover:text-white transition-colors no-underline text-black",children:"Back to Products"})]})});const j=N();return p.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[p.jsxs("div",{children:[p.jsxs("div",{className:"relative aspect-square mb-4 bg-gray-100 rounded-lg overflow-hidden",children:[p.jsx("img",{src:j[g],alt:i.name,className:"w-full h-full object-cover"}),(i.status==="Sold"||i.status==="OnHold"||i.status==="Pending")&&p.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-60 flex items-center justify-center",children:p.jsx("span",{className:`text-2xl font-bold header-font ${i.status==="Sold"?"text-black":"text-yellow-800"}`,children:i.status==="Sold"?"SOLD":i.status==="OnHold"?"ON HOLD":"PENDING"})})]}),j.length>1&&p.jsx("div",{className:"grid grid-cols-5 gap-2",children:j.map((O,M)=>p.jsx("button",{onClick:()=>C(M),className:`aspect-square bg-gray-100 rounded-lg overflow-hidden border-2 ${g===M?"border-black":"border-transparent"}`,children:p.jsx("img",{src:O,alt:`${i.name} thumbnail ${M+1}`,className:"w-full h-full object-cover"})},M))})]}),p.jsxs("div",{children:[p.jsxs("div",{className:"mb-6",children:[p.jsxs("div",{className:"flex justify-between items-start",children:[p.jsx("h1",{className:"text-2xl font-bold",children:i.name}),p.jsxs("div",{className:"flex space-x-2",children:[i.isNewArrival&&p.jsx("div",{className:"bg-green-500 text-white text-xs font-bold px-2 py-1 rounded",children:"New Arrival"}),i.isSale&&p.jsx("div",{className:"bg-red-500 text-white text-xs font-bold px-2 py-1 rounded",children:"Sale"})]})]}),p.jsx("div",{className:"mt-2",children:p.jsx("span",{className:`text-sm font-medium px-2 py-1 rounded ${i.status==="Sold"?"text-red-600":i.status==="OnHold"?"text-yellow-600":"text-green-600"}`,children:i.status})}),p.jsx("div",{className:"mt-4",children:p.jsxs("p",{className:"text-xl font-semibold",children:["₱",Number(i.price).toFixed(2)]})})]}),p.jsxs("div",{className:"mb-6",children:[p.jsx("h2",{className:"text-lg font-medium mb-2",children:"Description"}),p.jsx("div",{className:"text-gray-700 prose prose-sm",dangerouslySetInnerHTML:{__html:i.description||"No description available."}})]}),i.careInstructions&&p.jsxs("div",{className:"mb-6",children:[p.jsx("h2",{className:"text-lg font-medium mb-2",children:"Before You Buy"}),p.jsx("div",{className:"text-gray-700 prose prose-sm",dangerouslySetInnerHTML:{__html:i.careInstructions}})]}),p.jsx("button",{onClick:w,disabled:!i||i.status!=="Available"||b||t(i.id),className:`w-full py-3 px-6 text-center font-medium rounded-md transition-colors ${!i||i.status!=="Available"?"bg-gray-200 text-gray-500 cursor-not-allowed":t(i.id)?"bg-green-600 text-white cursor-not-allowed":"bg-black text-white hover:bg-gray-800"}`,children:b?p.jsxs("div",{className:"flex items-center justify-center",children:[p.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Adding to Cart..."]}):(i==null?void 0:i.status)==="Sold"?"Sold Out":(i==null?void 0:i.status)==="OnHold"?"On Hold":t(i==null?void 0:i.id)?"In Cart":"Add to Cart"})]})]})})},Mk=()=>{const[n,e]=E.useState([]),[t,r]=E.useState(!0),{showToast:i}=xa(),{token:l}=ft();E.useEffect(()=>{c()},[]);const c=async()=>{try{const h=(await gs.getAllProducts()).data.map(g=>({...g,price:Number(g.price)}));e(h)}catch(f){console.error("Error:",f),i("Failed to load products","error")}finally{r(!1)}},d=async f=>{if(window.confirm("Are you sure you want to delete this product?"))try{await gs.deleteProduct(l,f),i("Product deleted successfully","success"),c()}catch(h){console.error("Error:",h),i("Failed to delete product","error")}};return t?p.jsx("div",{children:"Loading..."}):p.jsxs("div",{className:"container mx-auto px-4 py-8",children:[p.jsxs("div",{className:"flex justify-between items-center mb-6",children:[p.jsx("h1",{className:"text-2xl font-bold",children:"Manage Products"}),p.jsx(ye,{to:"/admin/products/add",className:"bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700",children:"Add New Product"})]}),p.jsx("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:p.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[p.jsx("thead",{className:"bg-gray-50",children:p.jsxs("tr",{children:[p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),p.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(f=>p.jsxs("tr",{children:[p.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:p.jsxs("div",{className:"flex items-center",children:[p.jsx("div",{className:"h-10 w-10 flex-shrink-0",children:p.jsx("img",{className:"h-10 w-10 rounded-full object-cover",src:f.image,alt:f.name})}),p.jsx("div",{className:"ml-4",children:p.jsx("div",{className:"text-sm font-medium text-gray-900",children:f.name})})]})}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:p.jsxs("div",{className:"text-sm text-gray-900",children:["₱",f.price.toFixed(2)]})}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:p.jsx("div",{className:"text-sm text-gray-900",children:f.category})}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:p.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${f.status==="Available"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:f.status})}),p.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[p.jsx(ye,{to:`/admin/products/edit/${f.id}`,className:"text-indigo-600 hover:text-indigo-900 mr-4",children:"Edit"}),p.jsx("button",{onClick:()=>d(f.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},f.id))})]})})]})},Ok=()=>{const n=jr();return E.useEffect(()=>{n("/admin-orders")},[n]),p.jsx("div",{className:"bg-white shadow rounded-lg p-6 text-center",children:p.jsx("p",{className:"text-gray-700",children:"Redirecting to the order management system..."})})},Rk=({token:n})=>{const[e,t]=E.useState([]),[r,i]=E.useState(!0),[l,c]=E.useState(null),d=jr(),f=async()=>{try{i(!0),c(null);const w=[...await Zs.getAllAnnouncements(n)].sort((N,C)=>N.displayOrder-C.displayOrder);t(w)}catch(v){c("Failed to load announcements. Please try again."),console.error("Error fetching announcements:",v)}finally{i(!1)}};E.useEffect(()=>{f()},[n]);const h=async(v,w)=>{try{await Zs.toggleAnnouncementStatus(n,v,!w),t(N=>N.map(C=>C.id===v?{...C,isActive:!w}:C))}catch(N){c("Failed to update announcement status. Please try again."),console.error("Error updating announcement status:",N)}},g=async v=>{if(window.confirm("Are you sure you want to delete this announcement?"))try{await Zs.deleteAnnouncement(n,v),t(w=>w.filter(N=>N.id!==v))}catch(w){c("Failed to delete announcement. Please try again."),console.error("Error deleting announcement:",w)}},y=v=>{d(`/admin/announcements/edit/${v}`)},b=()=>{d("/admin/announcements/new")};return r?p.jsx("div",{className:"p-4",children:"Loading announcements..."}):p.jsxs("div",{className:"p-4",children:[p.jsxs("div",{className:"flex justify-between items-center mb-6",children:[p.jsx("h2",{className:"text-2xl header-font",children:"Manage Announcements"}),p.jsx("button",{onClick:b,className:"bg-black text-white px-4 py-2 hover:bg-gray-800",children:"Create New Announcement"})]}),l&&p.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:l}),e.length===0?p.jsx("div",{className:"text-gray-500",children:"No announcements found. Create your first one!"}):p.jsx("div",{className:"overflow-x-auto",children:p.jsxs("table",{className:"min-w-full bg-white",children:[p.jsx("thead",{className:"bg-gray-100",children:p.jsxs("tr",{children:[p.jsx("th",{className:"py-2 px-4 text-left",children:"Order"}),p.jsx("th",{className:"py-2 px-4 text-left",children:"Text"}),p.jsx("th",{className:"py-2 px-4 text-left",children:"Status"}),p.jsx("th",{className:"py-2 px-4 text-left",children:"Button"}),p.jsx("th",{className:"py-2 px-4 text-left",children:"Colors"}),p.jsx("th",{className:"py-2 px-4 text-left",children:"Actions"})]})}),p.jsx("tbody",{children:e.map(v=>p.jsxs("tr",{className:"border-t",children:[p.jsx("td",{className:"py-2 px-4",children:v.displayOrder}),p.jsx("td",{className:"py-2 px-4",children:v.text}),p.jsx("td",{className:"py-2 px-4",children:p.jsx("span",{className:`inline-block px-2 py-1 rounded ${v.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:v.isActive?"Active":"Inactive"})}),p.jsx("td",{className:"py-2 px-4",children:v.buttonText?p.jsxs("span",{className:"text-sm",children:[v.buttonText," → ",v.buttonLink]}):p.jsx("span",{className:"text-gray-400",children:"None"})}),p.jsx("td",{className:"py-2 px-4",children:p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:v.backgroundColor},title:`Background: ${v.backgroundColor}`}),p.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:v.textColor},title:`Text: ${v.textColor}`})]})}),p.jsx("td",{className:"py-2 px-4",children:p.jsxs("div",{className:"flex gap-2",children:[p.jsx("button",{onClick:()=>y(v.id),className:"text-blue-600 hover:text-blue-800",children:"Edit"}),p.jsx("button",{onClick:()=>h(v.id,v.isActive),className:"text-yellow-600 hover:text-yellow-800",children:v.isActive?"Deactivate":"Activate"}),p.jsx("button",{onClick:()=>g(v.id),className:"text-red-600 hover:text-red-800",children:"Delete"})]})})]},v.id))})]})})]})},Dk=({message:n,type:e,isVisible:t,onClose:r,autoClose:i=!0,duration:l=3e3})=>{if(E.useEffect(()=>{let d;return t&&i&&(d=setTimeout(()=>{r()},l)),()=>{d&&clearTimeout(d)}},[t,i,l,r]),!t)return null;const c={success:"bg-green-500",error:"bg-red-500",warning:"bg-yellow-500",info:"bg-blue-500"}[e];return p.jsx("div",{className:"fixed bottom-4 right-4 z-50 flex flex-col items-end",children:p.jsxs("div",{className:`${c} text-white px-4 py-3 rounded-md shadow-lg flex items-center max-w-sm`,children:[p.jsx("div",{className:"flex-grow mr-2",children:n}),p.jsx("button",{onClick:r,className:"text-white hover:text-gray-200 focus:outline-none",children:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:p.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})})},Lk=({isOpen:n,onClose:e,children:t,title:r,widthClass:i="max-w-lg"})=>n?p.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:p.jsxs("div",{className:`bg-white rounded shadow-lg w-full ${i} mx-4 relative`,children:[p.jsxs("div",{className:"flex justify-between items-center border-b px-6 py-4",children:[p.jsx("h3",{className:"text-lg font-semibold",children:r}),p.jsx("button",{onClick:e,className:"text-gray-500 hover:text-black text-2xl font-bold",children:"×"})]}),p.jsx("div",{className:"p-6",children:t})]})}):null;function Rt(n){this.content=n}Rt.prototype={constructor:Rt,find:function(n){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===n)return e;return-1},get:function(n){var e=this.find(n);return e==-1?void 0:this.content[e+1]},update:function(n,e,t){var r=t&&t!=n?this.remove(t):this,i=r.find(n),l=r.content.slice();return i==-1?l.push(t||n,e):(l[i+1]=e,t&&(l[i]=t)),new Rt(l)},remove:function(n){var e=this.find(n);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new Rt(t)},addToStart:function(n,e){return new Rt([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var t=this.remove(n).content.slice();return t.push(n,e),new Rt(t)},addBefore:function(n,e,t){var r=this.remove(e),i=r.content.slice(),l=r.find(n);return i.splice(l==-1?i.length:l,0,e,t),new Rt(i)},forEach:function(n){for(var e=0;e<this.content.length;e+=2)n(this.content[e],this.content[e+1])},prepend:function(n){return n=Rt.from(n),n.size?new Rt(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=Rt.from(n),n.size?new Rt(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=Rt.from(n);for(var t=0;t<n.content.length;t+=2)e=e.remove(n.content[t]);return e},toObject:function(){var n={};return this.forEach(function(e,t){n[e]=t}),n},get size(){return this.content.length>>1}};Rt.from=function(n){if(n instanceof Rt)return n;var e=[];if(n)for(var t in n)e.push(t,n[t]);return new Rt(e)};function z1(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let i=n.child(r),l=e.child(r);if(i==l){t+=i.nodeSize;continue}if(!i.sameMarkup(l))return t;if(i.isText&&i.text!=l.text){for(let c=0;i.text[c]==l.text[c];c++)t++;return t}if(i.content.size||l.content.size){let c=z1(i.content,l.content,t+1);if(c!=null)return c}t+=i.nodeSize}}function B1(n,e,t,r){for(let i=n.childCount,l=e.childCount;;){if(i==0||l==0)return i==l?null:{a:t,b:r};let c=n.child(--i),d=e.child(--l),f=c.nodeSize;if(c==d){t-=f,r-=f;continue}if(!c.sameMarkup(d))return{a:t,b:r};if(c.isText&&c.text!=d.text){let h=0,g=Math.min(c.text.length,d.text.length);for(;h<g&&c.text[c.text.length-h-1]==d.text[d.text.length-h-1];)h++,t--,r--;return{a:t,b:r}}if(c.content.size||d.content.size){let h=B1(c.content,d.content,t-1,r-1);if(h)return h}t-=f,r-=f}}class W{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,i=0,l){for(let c=0,d=0;d<t;c++){let f=this.content[c],h=d+f.nodeSize;if(h>e&&r(f,i+d,l||null,c)!==!1&&f.content.size){let g=d+1;f.nodesBetween(Math.max(0,e-g),Math.min(f.content.size,t-g),r,i+g)}d=h}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,i){let l="",c=!0;return this.nodesBetween(e,t,(d,f)=>{let h=d.isText?d.text.slice(Math.max(e,f)-f,t-f):d.isLeaf?i?typeof i=="function"?i(d):i:d.type.spec.leafText?d.type.spec.leafText(d):"":"";d.isBlock&&(d.isLeaf&&h||d.isTextblock)&&r&&(c?c=!1:l+=r),l+=h},0),l}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,i=this.content.slice(),l=0;for(t.isText&&t.sameMarkup(r)&&(i[i.length-1]=t.withText(t.text+r.text),l=1);l<e.content.length;l++)i.push(e.content[l]);return new W(i,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],i=0;if(t>e)for(let l=0,c=0;c<t;l++){let d=this.content[l],f=c+d.nodeSize;f>e&&((c<e||f>t)&&(d.isText?d=d.cut(Math.max(0,e-c),Math.min(d.text.length,t-c)):d=d.cut(Math.max(0,e-c-1),Math.min(d.content.size,t-c-1))),r.push(d),i+=d.nodeSize),c=f}return new W(r,i)}cutByIndex(e,t){return e==t?W.empty:e==0&&t==this.content.length?this:new W(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let i=this.content.slice(),l=this.size+t.nodeSize-r.nodeSize;return i[e]=t,new W(i,l)}addToStart(e){return new W([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new W(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let i=this.content[t];e(i,r,t),r+=i.nodeSize}}findDiffStart(e,t=0){return z1(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return B1(this,e,t,r)}findIndex(e,t=-1){if(e==0)return wc(0,e);if(e==this.size)return wc(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let l=this.child(r),c=i+l.nodeSize;if(c>=e)return c==e||t>0?wc(r+1,c):wc(r,i);i=c}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return W.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new W(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return W.empty;let t,r=0;for(let i=0;i<e.length;i++){let l=e[i];r+=l.nodeSize,i&&l.isText&&e[i-1].sameMarkup(l)?(t||(t=e.slice(0,i)),t[t.length-1]=l.withText(t[t.length-1].text+l.text)):t&&t.push(l)}return new W(t||e,r)}static from(e){if(!e)return W.empty;if(e instanceof W)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new W([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}W.empty=new W([],0);const Ih={index:0,offset:0};function wc(n,e){return Ih.index=n,Ih.offset=e,Ih}function Ic(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!Ic(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!Ic(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}let Ke=class bp{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let i=0;i<e.length;i++){let l=e[i];if(this.eq(l))return e;if(this.type.excludes(l.type))t||(t=e.slice(0,i));else{if(l.type.excludes(this.type))return e;!r&&l.type.rank>this.type.rank&&(t||(t=e.slice(0,i)),t.push(this),r=!0),t&&t.push(l)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Ic(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);let i=r.create(t.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return bp.none;if(e instanceof bp)return[e];let t=e.slice();return t.sort((r,i)=>r.type.rank-i.type.rank),t}};Ke.none=[];class qc extends Error{}class ae{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=H1(this.content,e+this.openStart,t);return r&&new ae(r,this.openStart,this.openEnd)}removeBetween(e,t){return new ae(P1(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return ae.empty;let r=t.openStart||0,i=t.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new ae(W.fromJSON(e,t.content),r,i)}static maxOpen(e,t=!0){let r=0,i=0;for(let l=e.firstChild;l&&!l.isLeaf&&(t||!l.type.spec.isolating);l=l.firstChild)r++;for(let l=e.lastChild;l&&!l.isLeaf&&(t||!l.type.spec.isolating);l=l.lastChild)i++;return new ae(e,r,i)}}ae.empty=new ae(W.empty,0,0);function P1(n,e,t){let{index:r,offset:i}=n.findIndex(e),l=n.maybeChild(r),{index:c,offset:d}=n.findIndex(t);if(i==e||l.isText){if(d!=t&&!n.child(c).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=c)throw new RangeError("Removing non-flat range");return n.replaceChild(r,l.copy(P1(l.content,e-i-1,t-i-1)))}function H1(n,e,t,r){let{index:i,offset:l}=n.findIndex(e),c=n.maybeChild(i);if(l==e||c.isText)return n.cut(0,e).append(t).append(n.cut(e));let d=H1(c.content,e-l-1,t);return d&&n.replaceChild(i,c.copy(d))}function _k(n,e,t){if(t.openStart>n.depth)throw new qc("Inserted content deeper than insertion position");if(n.depth-t.openStart!=e.depth-t.openEnd)throw new qc("Inconsistent open depths");return U1(n,e,t,0)}function U1(n,e,t,r){let i=n.index(r),l=n.node(r);if(i==e.index(r)&&r<n.depth-t.openStart){let c=U1(n,e,t,r+1);return l.copy(l.content.replaceChild(i,c))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&n.depth==r&&e.depth==r){let c=n.parent,d=c.content;return ei(c,d.cut(0,n.parentOffset).append(t.content).append(d.cut(e.parentOffset)))}else{let{start:c,end:d}=zk(t,n);return ei(l,q1(n,c,d,e,r))}else return ei(l,Vc(n,e,r))}function I1(n,e){if(!e.type.compatibleContent(n.type))throw new qc("Cannot join "+e.type.name+" onto "+n.type.name)}function vp(n,e,t){let r=n.node(t);return I1(r,e.node(t)),r}function Ws(n,e){let t=e.length-1;t>=0&&n.isText&&n.sameMarkup(e[t])?e[t]=n.withText(e[t].text+n.text):e.push(n)}function Tl(n,e,t,r){let i=(e||n).node(t),l=0,c=e?e.index(t):i.childCount;n&&(l=n.index(t),n.depth>t?l++:n.textOffset&&(Ws(n.nodeAfter,r),l++));for(let d=l;d<c;d++)Ws(i.child(d),r);e&&e.depth==t&&e.textOffset&&Ws(e.nodeBefore,r)}function ei(n,e){return n.type.checkContent(e),n.copy(e)}function q1(n,e,t,r,i){let l=n.depth>i&&vp(n,e,i+1),c=r.depth>i&&vp(t,r,i+1),d=[];return Tl(null,n,i,d),l&&c&&e.index(i)==t.index(i)?(I1(l,c),Ws(ei(l,q1(n,e,t,r,i+1)),d)):(l&&Ws(ei(l,Vc(n,e,i+1)),d),Tl(e,t,i,d),c&&Ws(ei(c,Vc(t,r,i+1)),d)),Tl(r,null,i,d),new W(d)}function Vc(n,e,t){let r=[];if(Tl(null,n,t,r),n.depth>t){let i=vp(n,e,t+1);Ws(ei(i,Vc(n,e,t+1)),r)}return Tl(e,null,t,r),new W(r)}function zk(n,e){let t=e.depth-n.openStart,i=e.node(t).copy(n.content);for(let l=t-1;l>=0;l--)i=e.node(l).copy(W.from(i));return{start:i.resolveNoCache(n.openStart+t),end:i.resolveNoCache(i.content.size-n.openEnd-t)}}class Il{constructor(e,t,r){this.pos=e,this.path=t,this.parentOffset=r,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(t);return r?e.child(t).cut(r):i}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let r=this.path[t*3],i=t==0?0:this.path[t*3-1]+1;for(let l=0;l<e;l++)i+=r.child(l).nodeSize;return i}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return Ke.none;if(this.textOffset)return e.child(t).marks;let r=e.maybeChild(t-1),i=e.maybeChild(t);if(!r){let d=r;r=i,i=d}let l=r.marks;for(var c=0;c<l.length;c++)l[c].type.spec.inclusive===!1&&(!i||!l[c].isInSet(i.marks))&&(l=l[c--].removeFromSet(l));return l}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let r=t.marks,i=e.parent.maybeChild(e.index());for(var l=0;l<r.length;l++)r[l].type.spec.inclusive===!1&&(!i||!r[l].isInSet(i.marks))&&(r=r[l--].removeFromSet(r));return r}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!t||t(this.node(r))))return new Fc(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let r=[],i=0,l=t;for(let c=e;;){let{index:d,offset:f}=c.content.findIndex(l),h=l-f;if(r.push(c,d,i+f),!h||(c=c.child(d),c.isText))break;l=h-1,i+=f+1}return new Il(t,r,l)}static resolveCached(e,t){let r=Mb.get(e);if(r)for(let l=0;l<r.elts.length;l++){let c=r.elts[l];if(c.pos==t)return c}else Mb.set(e,r=new Bk);let i=r.elts[r.i]=Il.resolve(e,t);return r.i=(r.i+1)%Pk,i}}class Bk{constructor(){this.elts=[],this.i=0}}const Pk=12,Mb=new WeakMap;class Fc{constructor(e,t,r){this.$from=e,this.$to=t,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const Hk=Object.create(null);let ds=class wp{constructor(e,t,r,i=Ke.none){this.type=e,this.attrs=t,this.marks=i,this.content=r||W.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,r,i=0){this.content.nodesBetween(e,t,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,r,i){return this.content.textBetween(e,t,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,r){return this.type==e&&Ic(this.attrs,t||e.defaultAttrs||Hk)&&Ke.sameSet(this.marks,r||Ke.none)}copy(e=null){return e==this.content?this:new wp(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new wp(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,r=!1){if(e==t)return ae.empty;let i=this.resolve(e),l=this.resolve(t),c=r?0:i.sharedDepth(t),d=i.start(c),h=i.node(c).content.cut(i.pos-d,l.pos-d);return new ae(h,i.depth-c,l.depth-c)}replace(e,t,r){return _k(this.resolve(e),this.resolve(t),r)}nodeAt(e){for(let t=this;;){let{index:r,offset:i}=t.content.findIndex(e);if(t=t.maybeChild(r),!t)return null;if(i==e||t.isText)return t;e-=i+1}}childAfter(e){let{index:t,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(t),index:t,offset:r};let i=this.content.child(t-1);return{node:i,index:t-1,offset:r-i.nodeSize}}resolve(e){return Il.resolveCached(this,e)}resolveNoCache(e){return Il.resolve(this,e)}rangeHasMark(e,t,r){let i=!1;return t>e&&this.nodesBetween(e,t,l=>(r.isInSet(l.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),V1(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,r=W.empty,i=0,l=r.childCount){let c=this.contentMatchAt(e).matchFragment(r,i,l),d=c&&c.matchFragment(this.content,t);if(!d||!d.validEnd)return!1;for(let f=i;f<l;f++)if(!this.type.allowsMarks(r.child(f).marks))return!1;return!0}canReplaceWith(e,t,r,i){if(i&&!this.type.allowsMarks(i))return!1;let l=this.contentMatchAt(e).matchType(r),c=l&&l.matchFragment(this.content,t);return c?c.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Ke.none;for(let t=0;t<this.marks.length;t++){let r=this.marks[t];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!Ke.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let r;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,r)}let i=W.fromJSON(e,t.content),l=e.nodeType(t.type).create(t.attrs,i,r);return l.type.checkAttrs(l.attrs),l}};ds.prototype.text=void 0;class $c extends ds{constructor(e,t,r,i){if(super(e,t,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):V1(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new $c(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new $c(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function V1(n,e){for(let t=n.length-1;t>=0;t--)e=n[t].type.name+"("+e+")";return e}class si{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let r=new Uk(e,t);if(r.next==null)return si.empty;let i=F1(r);r.next&&r.err("Unexpected trailing text");let l=Yk(Gk(i));return Kk(l,r),l}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,r=e.childCount){let i=this;for(let l=t;i&&l<r;l++)i=i.matchType(e.child(l).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let r=0;r<e.next.length;r++)if(this.next[t].type==e.next[r].type)return!0;return!1}fillBefore(e,t=!1,r=0){let i=[this];function l(c,d){let f=c.matchFragment(e,r);if(f&&(!t||f.validEnd))return W.from(d.map(h=>h.createAndFill()));for(let h=0;h<c.next.length;h++){let{type:g,next:y}=c.next[h];if(!(g.isText||g.hasRequiredAttrs())&&i.indexOf(y)==-1){i.push(y);let b=l(y,d.concat(g));if(b)return b}}return null}return l(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),l=i.match;if(l.matchType(e)){let c=[];for(let d=i;d.type;d=d.via)c.push(d.type);return c.reverse()}for(let c=0;c<l.next.length;c++){let{type:d,next:f}=l.next[c];!d.isLeaf&&!d.hasRequiredAttrs()&&!(d.name in t)&&(!i.type||f.validEnd)&&(r.push({match:d.contentMatch,type:d,via:i}),t[d.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&t(r.next[i].next)}return t(this),e.map((r,i)=>{let l=i+(r.validEnd?"*":" ")+" ";for(let c=0;c<r.next.length;c++)l+=(c?", ":"")+r.next[c].type.name+"->"+e.indexOf(r.next[c].next);return l}).join(`
`)}}si.empty=new si(!0);class Uk{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function F1(n){let e=[];do e.push(Ik(n));while(n.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function Ik(n){let e=[];do e.push(qk(n));while(n.next&&n.next!=")"&&n.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function qk(n){let e=$k(n);for(;;)if(n.eat("+"))e={type:"plus",expr:e};else if(n.eat("*"))e={type:"star",expr:e};else if(n.eat("?"))e={type:"opt",expr:e};else if(n.eat("{"))e=Vk(n,e);else break;return e}function Ob(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let e=Number(n.next);return n.pos++,e}function Vk(n,e){let t=Ob(n),r=t;return n.eat(",")&&(n.next!="}"?r=Ob(n):r=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:t,max:r,expr:e}}function Fk(n,e){let t=n.nodeTypes,r=t[e];if(r)return[r];let i=[];for(let l in t){let c=t[l];c.isInGroup(e)&&i.push(c)}return i.length==0&&n.err("No node type or group '"+e+"' found"),i}function $k(n){if(n.eat("(")){let e=F1(n);return n.eat(")")||n.err("Missing closing paren"),e}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let e=Fk(n,n.next).map(t=>(n.inline==null?n.inline=t.isInline:n.inline!=t.isInline&&n.err("Mixing inline and block content"),{type:"name",value:t}));return n.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function Gk(n){let e=[[]];return i(l(n,0),t()),e;function t(){return e.push([])-1}function r(c,d,f){let h={term:f,to:d};return e[c].push(h),h}function i(c,d){c.forEach(f=>f.to=d)}function l(c,d){if(c.type=="choice")return c.exprs.reduce((f,h)=>f.concat(l(h,d)),[]);if(c.type=="seq")for(let f=0;;f++){let h=l(c.exprs[f],d);if(f==c.exprs.length-1)return h;i(h,d=t())}else if(c.type=="star"){let f=t();return r(d,f),i(l(c.expr,f),f),[r(f)]}else if(c.type=="plus"){let f=t();return i(l(c.expr,d),f),i(l(c.expr,f),f),[r(f)]}else{if(c.type=="opt")return[r(d)].concat(l(c.expr,d));if(c.type=="range"){let f=d;for(let h=0;h<c.min;h++){let g=t();i(l(c.expr,f),g),f=g}if(c.max==-1)i(l(c.expr,f),f);else for(let h=c.min;h<c.max;h++){let g=t();r(f,g),i(l(c.expr,f),g),f=g}return[r(f)]}else{if(c.type=="name")return[r(d,void 0,c.value)];throw new Error("Unknown expr type")}}}}function $1(n,e){return e-n}function Rb(n,e){let t=[];return r(e),t.sort($1);function r(i){let l=n[i];if(l.length==1&&!l[0].term)return r(l[0].to);t.push(i);for(let c=0;c<l.length;c++){let{term:d,to:f}=l[c];!d&&t.indexOf(f)==-1&&r(f)}}}function Yk(n){let e=Object.create(null);return t(Rb(n,0));function t(r){let i=[];r.forEach(c=>{n[c].forEach(({term:d,to:f})=>{if(!d)return;let h;for(let g=0;g<i.length;g++)i[g][0]==d&&(h=i[g][1]);Rb(n,f).forEach(g=>{h||i.push([d,h=[]]),h.indexOf(g)==-1&&h.push(g)})})});let l=e[r.join(",")]=new si(r.indexOf(n.length-1)>-1);for(let c=0;c<i.length;c++){let d=i[c][1].sort($1);l.next.push({type:i[c][0],next:e[d.join(",")]||t(d)})}return l}}function Kk(n,e){for(let t=0,r=[n];t<r.length;t++){let i=r[t],l=!i.validEnd,c=[];for(let d=0;d<i.next.length;d++){let{type:f,next:h}=i.next[d];c.push(f.name),l&&!(f.isText||f.hasRequiredAttrs())&&(l=!1),r.indexOf(h)==-1&&r.push(h)}l&&e.err("Only non-generatable nodes ("+c.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function G1(n){let e=Object.create(null);for(let t in n){let r=n[t];if(!r.hasDefault)return null;e[t]=r.default}return e}function Y1(n,e){let t=Object.create(null);for(let r in n){let i=e&&e[r];if(i===void 0){let l=n[r];if(l.hasDefault)i=l.default;else throw new RangeError("No value supplied for attribute "+r)}t[r]=i}return t}function K1(n,e,t,r){for(let i in e)if(!(i in n))throw new RangeError(`Unsupported attribute ${i} for ${t} of type ${i}`);for(let i in n){let l=n[i];l.validate&&l.validate(e[i])}}function X1(n,e){let t=Object.create(null);if(e)for(let r in e)t[r]=new Jk(n,r,e[r]);return t}let Db=class J1{constructor(e,t,r){this.name=e,this.schema=t,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=X1(e,r.attrs),this.defaultAttrs=G1(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==si.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:Y1(this.attrs,e)}create(e=null,t,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new ds(this,this.computeAttrs(e),W.from(t),Ke.setFrom(r))}createChecked(e=null,t,r){return t=W.from(t),this.checkContent(t),new ds(this,this.computeAttrs(e),t,Ke.setFrom(r))}createAndFill(e=null,t,r){if(e=this.computeAttrs(e),t=W.from(t),t.size){let c=this.contentMatch.fillBefore(t);if(!c)return null;t=c.append(t)}let i=this.contentMatch.matchFragment(t),l=i&&i.fillBefore(W.empty,!0);return l?new ds(this,e,t.append(l),Ke.setFrom(r)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){K1(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?t&&t.push(e[r]):t||(t=e.slice(0,r));return t?t.length?t:Ke.none:e}static compile(e,t){let r=Object.create(null);e.forEach((l,c)=>r[l]=new J1(l,t,c));let i=t.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let l in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function Xk(n,e,t){let r=t.split("|");return i=>{let l=i===null?"null":typeof i;if(r.indexOf(l)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${n}, got ${l}`)}}class Jk{constructor(e,t,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?Xk(e,t,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class Ou{constructor(e,t,r,i){this.name=e,this.rank=t,this.schema=r,this.spec=i,this.attrs=X1(e,i.attrs),this.excluded=null;let l=G1(this.attrs);this.instance=l?new Ke(this,l):null}create(e=null){return!e&&this.instance?this.instance:new Ke(this,Y1(this.attrs,e))}static compile(e,t){let r=Object.create(null),i=0;return e.forEach((l,c)=>r[l]=new Ou(l,i++,t,c)),r}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){K1(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class Q1{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let i in e)t[i]=e[i];t.nodes=Rt.from(e.nodes),t.marks=Rt.from(e.marks||{}),this.nodes=Db.compile(this.spec.nodes,this),this.marks=Ou.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let l=this.nodes[i],c=l.spec.content||"",d=l.spec.marks;if(l.contentMatch=r[c]||(r[c]=si.parse(c,this.nodes)),l.inlineContent=l.contentMatch.inlineContent,l.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!l.isInline||!l.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=l}l.markSet=d=="_"?null:d?Lb(this,d.split(" ")):d==""||!l.inlineContent?[]:null}for(let i in this.marks){let l=this.marks[i],c=l.spec.excludes;l.excluded=c==null?[l]:c==""?[]:Lb(this,c.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof Db){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,r,i)}text(e,t){let r=this.nodes.text;return new $c(r,r.defaultAttrs,e,Ke.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return ds.fromJSON(this,e)}markFromJSON(e){return Ke.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function Lb(n,e){let t=[];for(let r=0;r<e.length;r++){let i=e[r],l=n.marks[i],c=l;if(l)t.push(l);else for(let d in n.marks){let f=n.marks[d];(i=="_"||f.spec.group&&f.spec.group.split(" ").indexOf(i)>-1)&&t.push(c=f)}if(!c)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return t}function Qk(n){return n.tag!=null}function Zk(n){return n.style!=null}class fs{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let r=this.matchedStyles=[];t.forEach(i=>{if(Qk(i))this.tags.push(i);else if(Zk(i)){let l=/[^=]*/.exec(i.style)[0];r.indexOf(l)<0&&r.push(l),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let l=e.nodes[i.node];return l.contentMatch.matchType(l)})}parse(e,t={}){let r=new zb(this,t,!1);return r.addAll(e,Ke.none,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new zb(this,t,!0);return r.addAll(e,Ke.none,t.from,t.to),ae.maxOpen(r.finish())}matchTag(e,t,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let l=this.tags[i];if(tj(e,l.tag)&&(l.namespace===void 0||e.namespaceURI==l.namespace)&&(!l.context||t.matchesContext(l.context))){if(l.getAttrs){let c=l.getAttrs(e);if(c===!1)continue;l.attrs=c||void 0}return l}}}matchStyle(e,t,r,i){for(let l=i?this.styles.indexOf(i)+1:0;l<this.styles.length;l++){let c=this.styles[l],d=c.style;if(!(d.indexOf(e)!=0||c.context&&!r.matchesContext(c.context)||d.length>e.length&&(d.charCodeAt(e.length)!=61||d.slice(e.length+1)!=t))){if(c.getAttrs){let f=c.getAttrs(t);if(f===!1)continue;c.attrs=f||void 0}return c}}}static schemaRules(e){let t=[];function r(i){let l=i.priority==null?50:i.priority,c=0;for(;c<t.length;c++){let d=t[c];if((d.priority==null?50:d.priority)<l)break}t.splice(c,0,i)}for(let i in e.marks){let l=e.marks[i].spec.parseDOM;l&&l.forEach(c=>{r(c=Bb(c)),c.mark||c.ignore||c.clearMark||(c.mark=i)})}for(let i in e.nodes){let l=e.nodes[i].spec.parseDOM;l&&l.forEach(c=>{r(c=Bb(c)),c.node||c.ignore||c.mark||(c.node=i)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new fs(e,fs.schemaRules(e)))}}const Z1={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Wk={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},W1={ol:!0,ul:!0},ql=1,Sp=2,Dc=4;function _b(n,e,t){return e!=null?(e?ql:0)|(e==="full"?Sp:0):n&&n.whitespace=="pre"?ql|Sp:t&-5}class Sc{constructor(e,t,r,i,l,c){this.type=e,this.attrs=t,this.marks=r,this.solid=i,this.options=c,this.content=[],this.activeMarks=Ke.none,this.match=l||(c&Dc?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(W.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&ql)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let l=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=l.withText(l.text.slice(0,l.text.length-i[0].length))}}let t=W.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(W.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!Z1.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class zb{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=t.topNode,l,c=_b(null,t.preserveWhitespace,0)|(r?Dc:0);i?l=new Sc(i.type,i.attrs,Ke.none,!0,t.topMatch||i.type.contentMatch,c):r?l=new Sc(null,null,Ke.none,!0,null,c):l=new Sc(e.schema.topNodeType,null,Ke.none,!0,null,c),this.nodes=[l],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){e.nodeType==3?this.addTextNode(e,t):e.nodeType==1&&this.addElement(e,t)}addTextNode(e,t){let r=e.nodeValue,i=this.top,l=i.options&Sp?"full":this.localPreserveWS||(i.options&ql)>0;if(l==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(l)l!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let c=i.content[i.content.length-1],d=e.previousSibling;(!c||d&&d.nodeName=="BR"||c.isText&&/[ \t\r\n\u000c]$/.test(c.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),t,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,t,r){let i=this.localPreserveWS,l=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let c=e.nodeName.toLowerCase(),d;W1.hasOwnProperty(c)&&this.parser.normalizeLists&&ej(e);let f=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(d=this.parser.matchTag(e,this,r));e:if(f?f.ignore:Wk.hasOwnProperty(c))this.findInside(e),this.ignoreFallback(e,t);else if(!f||f.skip||f.closeParent){f&&f.closeParent?this.open=Math.max(0,this.open-1):f&&f.skip.nodeType&&(e=f.skip);let h,g=this.needsBlock;if(Z1.hasOwnProperty(c))l.content.length&&l.content[0].isInline&&this.open&&(this.open--,l=this.top),h=!0,l.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let y=f&&f.skip?t:this.readStyles(e,t);y&&this.addAll(e,y),h&&this.sync(l),this.needsBlock=g}else{let h=this.readStyles(e,t);h&&this.addElementByRule(e,f,h,f.consuming===!1?d:void 0)}this.localPreserveWS=i}leafFallback(e,t){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),t)}ignoreFallback(e,t){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),t,!0)}readStyles(e,t){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let l=this.parser.matchedStyles[i],c=r.getPropertyValue(l);if(c)for(let d=void 0;;){let f=this.parser.matchStyle(l,c,this,d);if(!f)break;if(f.ignore)return null;if(f.clearMark?t=t.filter(h=>!f.clearMark(h)):t=t.concat(this.parser.schema.marks[f.mark].create(f.attrs)),f.consuming===!1)d=f;else break}}return t}addElementByRule(e,t,r,i){let l,c;if(t.node)if(c=this.parser.schema.nodes[t.node],c.isLeaf)this.insertNode(c.create(t.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let f=this.enter(c,t.attrs||null,r,t.preserveWhitespace);f&&(l=!0,r=f)}else{let f=this.parser.schema.marks[t.mark];r=r.concat(f.create(t.attrs))}let d=this.top;if(c&&c.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(f=>this.insertNode(f,r,!1));else{let f=e;typeof t.contentElement=="string"?f=e.querySelector(t.contentElement):typeof t.contentElement=="function"?f=t.contentElement(e):t.contentElement&&(f=t.contentElement),this.findAround(e,f,!0),this.addAll(f,r),this.findAround(e,f,!1)}l&&this.sync(d)&&this.open--}addAll(e,t,r,i){let l=r||0;for(let c=r?e.childNodes[r]:e.firstChild,d=i==null?null:e.childNodes[i];c!=d;c=c.nextSibling,++l)this.findAtPoint(e,l),this.addDOM(c,t);this.findAtPoint(e,l)}findPlace(e,t,r){let i,l;for(let c=this.open,d=0;c>=0;c--){let f=this.nodes[c],h=f.findWrapping(e);if(h&&(!i||i.length>h.length+d)&&(i=h,l=f,!h.length))break;if(f.solid){if(r)break;d+=2}}if(!i)return null;this.sync(l);for(let c=0;c<i.length;c++)t=this.enterInner(i[c],null,t,!1);return t}insertNode(e,t,r){if(e.isInline&&this.needsBlock&&!this.top.type){let l=this.textblockFromContext();l&&(t=this.enterInner(l,null,t))}let i=this.findPlace(e,t,r);if(i){this.closeExtra();let l=this.top;l.match&&(l.match=l.match.matchType(e.type));let c=Ke.none;for(let d of i.concat(e.marks))(l.type?l.type.allowsMarkType(d.type):Pb(d.type,e.type))&&(c=d.addToSet(c));return l.content.push(e.mark(c)),!0}return!1}enter(e,t,r,i){let l=this.findPlace(e.create(t),r,!1);return l&&(l=this.enterInner(e,t,r,!0,i)),l}enterInner(e,t,r,i=!1,l){this.closeExtra();let c=this.top;c.match=c.match&&c.match.matchType(e);let d=_b(e,l,c.options);c.options&Dc&&c.content.length==0&&(d|=Dc);let f=Ke.none;return r=r.filter(h=>(c.type?c.type.allowsMarkType(h.type):Pb(h.type,e))?(f=h.addToSet(f),!1):!0),this.nodes.push(new Sc(e,t,f,i,null,d)),this.open++,r}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=ql)}return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&t.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),l=-(r?r.depth+1:0)+(i?0:1),c=(d,f)=>{for(;d>=0;d--){let h=t[d];if(h==""){if(d==t.length-1||d==0)continue;for(;f>=l;f--)if(c(d-1,f))return!0;return!1}else{let g=f>0||f==0&&i?this.nodes[f].type:r&&f>=l?r.node(f-l).type:null;if(!g||g.name!=h&&!g.isInGroup(h))return!1;f--}}return!0};return c(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}}function ej(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&W1.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function tj(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function Bb(n){let e={};for(let t in n)e[t]=n[t];return e}function Pb(n,e){let t=e.schema.nodes;for(let r in t){let i=t[r];if(!i.allowsMarkType(n))continue;let l=[],c=d=>{l.push(d);for(let f=0;f<d.edgeCount;f++){let{type:h,next:g}=d.edge(f);if(h==e||l.indexOf(g)<0&&c(g))return!0}};if(c(i.contentMatch))return!0}}class ci{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},r){r||(r=qh(t).createDocumentFragment());let i=r,l=[];return e.forEach(c=>{if(l.length||c.marks.length){let d=0,f=0;for(;d<l.length&&f<c.marks.length;){let h=c.marks[f];if(!this.marks[h.type.name]){f++;continue}if(!h.eq(l[d][0])||h.type.spec.spanning===!1)break;d++,f++}for(;d<l.length;)i=l.pop()[1];for(;f<c.marks.length;){let h=c.marks[f++],g=this.serializeMark(h,c.isInline,t);g&&(l.push([h,i]),i.appendChild(g.dom),i=g.contentDOM||g.dom)}}i.appendChild(this.serializeNodeInner(c,t))}),r}serializeNodeInner(e,t){let{dom:r,contentDOM:i}=Lc(qh(t),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,i)}return r}serializeNode(e,t={}){let r=this.serializeNodeInner(e,t);for(let i=e.marks.length-1;i>=0;i--){let l=this.serializeMark(e.marks[i],e.isInline,t);l&&((l.contentDOM||l.dom).appendChild(r),r=l.dom)}return r}serializeMark(e,t,r={}){let i=this.marks[e.type.name];return i&&Lc(qh(r),i(e,t),null,e.attrs)}static renderSpec(e,t,r=null,i){return Lc(e,t,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new ci(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=Hb(e.nodes);return t.text||(t.text=r=>r.text),t}static marksFromSchema(e){return Hb(e.marks)}}function Hb(n){let e={};for(let t in n){let r=n[t].spec.toDOM;r&&(e[t]=r)}return e}function qh(n){return n.document||window.document}const Ub=new WeakMap;function nj(n){let e=Ub.get(n);return e===void 0&&Ub.set(n,e=rj(n)),e}function rj(n){let e=null;function t(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)t(r[i]);else for(let i in r)t(r[i])}return t(n),e}function Lc(n,e,t,r){if(typeof e=="string")return{dom:n.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],l;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(l=nj(r))&&l.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let c=i.indexOf(" ");c>0&&(t=i.slice(0,c),i=i.slice(c+1));let d,f=t?n.createElementNS(t,i):n.createElement(i),h=e[1],g=1;if(h&&typeof h=="object"&&h.nodeType==null&&!Array.isArray(h)){g=2;for(let y in h)if(h[y]!=null){let b=y.indexOf(" ");b>0?f.setAttributeNS(y.slice(0,b),y.slice(b+1),h[y]):f.setAttribute(y,h[y])}}for(let y=g;y<e.length;y++){let b=e[y];if(b===0){if(y<e.length-1||y>g)throw new RangeError("Content hole must be the only child of its parent node");return{dom:f,contentDOM:f}}else{let{dom:v,contentDOM:w}=Lc(n,b,t,r);if(f.appendChild(v),w){if(d)throw new RangeError("Multiple content holes");d=w}}}return{dom:f,contentDOM:d}}const ew=65535,tw=Math.pow(2,16);function sj(n,e){return n+e*tw}function Ib(n){return n&ew}function ij(n){return(n-(n&ew))/tw}const nw=1,rw=2,_c=4,sw=8;class Np{constructor(e,t,r){this.pos=e,this.delInfo=t,this.recover=r}get deleted(){return(this.delInfo&sw)>0}get deletedBefore(){return(this.delInfo&(nw|_c))>0}get deletedAfter(){return(this.delInfo&(rw|_c))>0}get deletedAcross(){return(this.delInfo&_c)>0}}class fn{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&fn.empty)return fn.empty}recover(e){let t=0,r=Ib(e);if(!this.inverted)for(let i=0;i<r;i++)t+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+t+ij(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,r){let i=0,l=this.inverted?2:1,c=this.inverted?1:2;for(let d=0;d<this.ranges.length;d+=3){let f=this.ranges[d]-(this.inverted?i:0);if(f>e)break;let h=this.ranges[d+l],g=this.ranges[d+c],y=f+h;if(e<=y){let b=h?e==f?-1:e==y?1:t:t,v=f+i+(b<0?0:g);if(r)return v;let w=e==(t<0?f:y)?null:sj(d/3,e-f),N=e==f?rw:e==y?nw:_c;return(t<0?e!=f:e!=y)&&(N|=sw),new Np(v,N,w)}i+=g-h}return r?e+i:new Np(e+i,0,null)}touches(e,t){let r=0,i=Ib(t),l=this.inverted?2:1,c=this.inverted?1:2;for(let d=0;d<this.ranges.length;d+=3){let f=this.ranges[d]-(this.inverted?r:0);if(f>e)break;let h=this.ranges[d+l],g=f+h;if(e<=g&&d==i*3)return!0;r+=this.ranges[d+c]-h}return!1}forEach(e){let t=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,l=0;i<this.ranges.length;i+=3){let c=this.ranges[i],d=c-(this.inverted?l:0),f=c+(this.inverted?0:l),h=this.ranges[i+t],g=this.ranges[i+r];e(d,d+h,f,f+g),l+=g-h}}invert(){return new fn(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?fn.empty:new fn(e<0?[0,-e,0]:[0,0,e])}}fn.empty=new fn([]);class Vl{constructor(e,t,r=0,i=e?e.length:0){this.mirror=t,this.from=r,this.to=i,this._maps=e||[],this.ownData=!(e||t)}get maps(){return this._maps}slice(e=0,t=this.maps.length){return new Vl(this._maps,this.mirror,e,t)}appendMap(e,t){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),t!=null&&this.setMirror(this._maps.length-1,t)}appendMapping(e){for(let t=0,r=this._maps.length;t<e._maps.length;t++){let i=e.getMirror(t);this.appendMap(e._maps[t],i!=null&&i<t?r+i:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,r=this._maps.length+e._maps.length;t>=0;t--){let i=e.getMirror(t);this.appendMap(e._maps[t].invert(),i!=null&&i>t?r-i-1:void 0)}}invert(){let e=new Vl;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,r){let i=0;for(let l=this.from;l<this.to;l++){let c=this._maps[l],d=c.mapResult(e,t);if(d.recover!=null){let f=this.getMirror(l);if(f!=null&&f>l&&f<this.to){l=f,e=this._maps[f].recover(d.recover);continue}}i|=d.delInfo,e=d.pos}return r?e:new Np(e,i,null)}}const Vh=Object.create(null);class Vt{getMap(){return fn.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Vh[t.stepType];if(!r)throw new RangeError(`No step type ${t.stepType} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in Vh)throw new RangeError("Duplicate use of step JSON ID "+e);return Vh[e]=t,t.prototype.jsonID=e,t}}class dt{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new dt(e,null)}static fail(e){return new dt(null,e)}static fromReplace(e,t,r,i){try{return dt.ok(e.replace(t,r,i))}catch(l){if(l instanceof qc)return dt.fail(l.message);throw l}}}function cm(n,e,t){let r=[];for(let i=0;i<n.childCount;i++){let l=n.child(i);l.content.size&&(l=l.copy(cm(l.content,e,l))),l.isInline&&(l=e(l,t,i)),r.push(l)}return W.fromArray(r)}class ls extends Vt{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),l=new ae(cm(t.content,(c,d)=>!c.isAtom||!d.type.allowsMarkType(this.mark.type)?c:c.mark(this.mark.addToSet(c.marks)),i),t.openStart,t.openEnd);return dt.fromReplace(e,this.from,this.to,l)}invert(){return new Jn(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new ls(t.pos,r.pos,this.mark)}merge(e){return e instanceof ls&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new ls(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new ls(t.from,t.to,e.markFromJSON(t.mark))}}Vt.jsonID("addMark",ls);class Jn extends Vt{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=new ae(cm(t.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),t.openStart,t.openEnd);return dt.fromReplace(e,this.from,this.to,r)}invert(){return new ls(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new Jn(t.pos,r.pos,this.mark)}merge(e){return e instanceof Jn&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Jn(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Jn(t.from,t.to,e.markFromJSON(t.mark))}}Vt.jsonID("removeMark",Jn);class cs extends Vt{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return dt.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return dt.fromReplace(e,this.pos,this.pos+1,new ae(W.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let r=this.mark.addToSet(t.marks);if(r.length==t.marks.length){for(let i=0;i<t.marks.length;i++)if(!t.marks[i].isInSet(r))return new cs(this.pos,t.marks[i]);return new cs(this.pos,this.mark)}}return new ii(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new cs(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new cs(t.pos,e.markFromJSON(t.mark))}}Vt.jsonID("addNodeMark",cs);class ii extends Vt{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return dt.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return dt.fromReplace(e,this.pos,this.pos+1,new ae(W.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new cs(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new ii(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new ii(t.pos,e.markFromJSON(t.mark))}}Vt.jsonID("removeNodeMark",ii);class Nt extends Vt{constructor(e,t,r,i=!1){super(),this.from=e,this.to=t,this.slice=r,this.structure=i}apply(e){return this.structure&&Cp(e,this.from,this.to)?dt.fail("Structure replace would overwrite content"):dt.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new fn([this.from,this.to-this.from,this.slice.size])}invert(e){return new Nt(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deletedAcross&&r.deletedAcross?null:new Nt(t.pos,Math.max(t.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof Nt)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?ae.empty:new ae(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Nt(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?ae.empty:new ae(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Nt(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Nt(t.from,t.to,ae.fromJSON(e,t.slice),!!t.structure)}}Vt.jsonID("replace",Nt);class Ct extends Vt{constructor(e,t,r,i,l,c,d=!1){super(),this.from=e,this.to=t,this.gapFrom=r,this.gapTo=i,this.slice=l,this.insert=c,this.structure=d}apply(e){if(this.structure&&(Cp(e,this.from,this.gapFrom)||Cp(e,this.gapTo,this.to)))return dt.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return dt.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,t.content);return r?dt.fromReplace(e,this.from,this.to,r):dt.fail("Content does not fit in gap")}getMap(){return new fn([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new Ct(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),l=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return t.deletedAcross&&r.deletedAcross||i<t.pos||l>r.pos?null:new Ct(t.pos,r.pos,i,l,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Ct(t.from,t.to,t.gapFrom,t.gapTo,ae.fromJSON(e,t.slice),t.insert,!!t.structure)}}Vt.jsonID("replaceAround",Ct);function Cp(n,e,t){let r=n.resolve(e),i=t-e,l=r.depth;for(;i>0&&l>0&&r.indexAfter(l)==r.node(l).childCount;)l--,i--;if(i>0){let c=r.node(l).maybeChild(r.indexAfter(l));for(;i>0;){if(!c||c.isLeaf)return!0;c=c.firstChild,i--}}return!1}function aj(n,e,t,r){let i=[],l=[],c,d;n.doc.nodesBetween(e,t,(f,h,g)=>{if(!f.isInline)return;let y=f.marks;if(!r.isInSet(y)&&g.type.allowsMarkType(r.type)){let b=Math.max(h,e),v=Math.min(h+f.nodeSize,t),w=r.addToSet(y);for(let N=0;N<y.length;N++)y[N].isInSet(w)||(c&&c.to==b&&c.mark.eq(y[N])?c.to=v:i.push(c=new Jn(b,v,y[N])));d&&d.to==b?d.to=v:l.push(d=new ls(b,v,r))}}),i.forEach(f=>n.step(f)),l.forEach(f=>n.step(f))}function lj(n,e,t,r){let i=[],l=0;n.doc.nodesBetween(e,t,(c,d)=>{if(!c.isInline)return;l++;let f=null;if(r instanceof Ou){let h=c.marks,g;for(;g=r.isInSet(h);)(f||(f=[])).push(g),h=g.removeFromSet(h)}else r?r.isInSet(c.marks)&&(f=[r]):f=c.marks;if(f&&f.length){let h=Math.min(d+c.nodeSize,t);for(let g=0;g<f.length;g++){let y=f[g],b;for(let v=0;v<i.length;v++){let w=i[v];w.step==l-1&&y.eq(i[v].style)&&(b=w)}b?(b.to=h,b.step=l):i.push({style:y,from:Math.max(d,e),to:h,step:l})}}}),i.forEach(c=>n.step(new Jn(c.from,c.to,c.style)))}function um(n,e,t,r=t.contentMatch,i=!0){let l=n.doc.nodeAt(e),c=[],d=e+1;for(let f=0;f<l.childCount;f++){let h=l.child(f),g=d+h.nodeSize,y=r.matchType(h.type);if(!y)c.push(new Nt(d,g,ae.empty));else{r=y;for(let b=0;b<h.marks.length;b++)t.allowsMarkType(h.marks[b].type)||n.step(new Jn(d,g,h.marks[b]));if(i&&h.isText&&t.whitespace!="pre"){let b,v=/\r?\n|\r/g,w;for(;b=v.exec(h.text);)w||(w=new ae(W.from(t.schema.text(" ",t.allowedMarks(h.marks))),0,0)),c.push(new Nt(d+b.index,d+b.index+b[0].length,w))}}d=g}if(!r.validEnd){let f=r.fillBefore(W.empty,!0);n.replace(d,d,new ae(f,0,0))}for(let f=c.length-1;f>=0;f--)n.step(c[f])}function oj(n,e,t){return(e==0||n.canReplace(e,n.childCount))&&(t==n.childCount||n.canReplace(0,t))}function ba(n){let t=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let r=n.depth;;--r){let i=n.$from.node(r),l=n.$from.index(r),c=n.$to.indexAfter(r);if(r<n.depth&&i.canReplace(l,c,t))return r;if(r==0||i.type.spec.isolating||!oj(i,l,c))break}return null}function cj(n,e,t){let{$from:r,$to:i,depth:l}=e,c=r.before(l+1),d=i.after(l+1),f=c,h=d,g=W.empty,y=0;for(let w=l,N=!1;w>t;w--)N||r.index(w)>0?(N=!0,g=W.from(r.node(w).copy(g)),y++):f--;let b=W.empty,v=0;for(let w=l,N=!1;w>t;w--)N||i.after(w+1)<i.end(w)?(N=!0,b=W.from(i.node(w).copy(b)),v++):h++;n.step(new Ct(f,h,c,d,new ae(g.append(b),y,v),g.size-y,!0))}function dm(n,e,t=null,r=n){let i=uj(n,e),l=i&&dj(r,e);return l?i.map(qb).concat({type:e,attrs:t}).concat(l.map(qb)):null}function qb(n){return{type:n,attrs:null}}function uj(n,e){let{parent:t,startIndex:r,endIndex:i}=n,l=t.contentMatchAt(r).findWrapping(e);if(!l)return null;let c=l.length?l[0]:e;return t.canReplaceWith(r,i,c)?l:null}function dj(n,e){let{parent:t,startIndex:r,endIndex:i}=n,l=t.child(r),c=e.contentMatch.findWrapping(l.type);if(!c)return null;let f=(c.length?c[c.length-1]:e).contentMatch;for(let h=r;f&&h<i;h++)f=f.matchType(t.child(h).type);return!f||!f.validEnd?null:c}function fj(n,e,t){let r=W.empty;for(let c=t.length-1;c>=0;c--){if(r.size){let d=t[c].type.contentMatch.matchFragment(r);if(!d||!d.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=W.from(t[c].type.create(t[c].attrs,r))}let i=e.start,l=e.end;n.step(new Ct(i,l,i,l,new ae(r,0,0),t.length,!0))}function hj(n,e,t,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let l=n.steps.length;n.doc.nodesBetween(e,t,(c,d)=>{let f=typeof i=="function"?i(c):i;if(c.isTextblock&&!c.hasMarkup(r,f)&&pj(n.doc,n.mapping.slice(l).map(d),r)){let h=null;if(r.schema.linebreakReplacement){let v=r.whitespace=="pre",w=!!r.contentMatch.matchType(r.schema.linebreakReplacement);v&&!w?h=!1:!v&&w&&(h=!0)}h===!1&&aw(n,c,d,l),um(n,n.mapping.slice(l).map(d,1),r,void 0,h===null);let g=n.mapping.slice(l),y=g.map(d,1),b=g.map(d+c.nodeSize,1);return n.step(new Ct(y,b,y+1,b-1,new ae(W.from(r.create(f,null,c.marks)),0,0),1,!0)),h===!0&&iw(n,c,d,l),!1}})}function iw(n,e,t,r){e.forEach((i,l)=>{if(i.isText){let c,d=/\r?\n|\r/g;for(;c=d.exec(i.text);){let f=n.mapping.slice(r).map(t+1+l+c.index);n.replaceWith(f,f+1,e.type.schema.linebreakReplacement.create())}}})}function aw(n,e,t,r){e.forEach((i,l)=>{if(i.type==i.type.schema.linebreakReplacement){let c=n.mapping.slice(r).map(t+1+l);n.replaceWith(c,c+1,e.type.schema.text(`
`))}})}function pj(n,e,t){let r=n.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,t)}function mj(n,e,t,r,i){let l=n.doc.nodeAt(e);if(!l)throw new RangeError("No node at given position");t||(t=l.type);let c=t.create(r,null,i||l.marks);if(l.isLeaf)return n.replaceWith(e,e+l.nodeSize,c);if(!t.validContent(l.content))throw new RangeError("Invalid content for node type "+t.name);n.step(new Ct(e,e+l.nodeSize,e+1,e+l.nodeSize-1,new ae(W.from(c),0,0),1,!0))}function Sr(n,e,t=1,r){let i=n.resolve(e),l=i.depth-t,c=r&&r[r.length-1]||i.parent;if(l<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!c.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let h=i.depth-1,g=t-2;h>l;h--,g--){let y=i.node(h),b=i.index(h);if(y.type.spec.isolating)return!1;let v=y.content.cutByIndex(b,y.childCount),w=r&&r[g+1];w&&(v=v.replaceChild(0,w.type.create(w.attrs)));let N=r&&r[g]||y;if(!y.canReplace(b+1,y.childCount)||!N.type.validContent(v))return!1}let d=i.indexAfter(l),f=r&&r[0];return i.node(l).canReplaceWith(d,d,f?f.type:i.node(l+1).type)}function gj(n,e,t=1,r){let i=n.doc.resolve(e),l=W.empty,c=W.empty;for(let d=i.depth,f=i.depth-t,h=t-1;d>f;d--,h--){l=W.from(i.node(d).copy(l));let g=r&&r[h];c=W.from(g?g.type.create(g.attrs,c):i.node(d).copy(c))}n.step(new Nt(e,e,new ae(l.append(c),t,t),!0))}function xs(n,e){let t=n.resolve(e),r=t.index();return lw(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(r,r+1)}function yj(n,e){e.content.size||n.type.compatibleContent(e.type);let t=n.contentMatchAt(n.childCount),{linebreakReplacement:r}=n.type.schema;for(let i=0;i<e.childCount;i++){let l=e.child(i),c=l.type==r?n.type.schema.nodes.text:l.type;if(t=t.matchType(c),!t||!n.type.allowsMarks(l.marks))return!1}return t.validEnd}function lw(n,e){return!!(n&&e&&!n.isLeaf&&yj(n,e))}function Ru(n,e,t=-1){let r=n.resolve(e);for(let i=r.depth;;i--){let l,c,d=r.index(i);if(i==r.depth?(l=r.nodeBefore,c=r.nodeAfter):t>0?(l=r.node(i+1),d++,c=r.node(i).maybeChild(d)):(l=r.node(i).maybeChild(d-1),c=r.node(i+1)),l&&!l.isTextblock&&lw(l,c)&&r.node(i).canReplace(d,d+1))return e;if(i==0)break;e=t<0?r.before(i):r.after(i)}}function xj(n,e,t){let r=null,{linebreakReplacement:i}=n.doc.type.schema,l=n.doc.resolve(e-t),c=l.node().type;if(i&&c.inlineContent){let g=c.whitespace=="pre",y=!!c.contentMatch.matchType(i);g&&!y?r=!1:!g&&y&&(r=!0)}let d=n.steps.length;if(r===!1){let g=n.doc.resolve(e+t);aw(n,g.node(),g.before(),d)}c.inlineContent&&um(n,e+t-1,c,l.node().contentMatchAt(l.index()),r==null);let f=n.mapping.slice(d),h=f.map(e-t);if(n.step(new Nt(h,f.map(e+t,-1),ae.empty,!0)),r===!0){let g=n.doc.resolve(h);iw(n,g.node(),g.before(),n.steps.length)}return n}function bj(n,e,t){let r=n.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),t))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let l=r.index(i);if(r.node(i).canReplaceWith(l,l,t))return r.before(i+1);if(l>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let l=r.indexAfter(i);if(r.node(i).canReplaceWith(l,l,t))return r.after(i+1);if(l<r.node(i).childCount)return null}return null}function ow(n,e,t){let r=n.resolve(e);if(!t.content.size)return e;let i=t.content;for(let l=0;l<t.openStart;l++)i=i.firstChild.content;for(let l=1;l<=(t.openStart==0&&t.size?2:1);l++)for(let c=r.depth;c>=0;c--){let d=c==r.depth?0:r.pos<=(r.start(c+1)+r.end(c+1))/2?-1:1,f=r.index(c)+(d>0?1:0),h=r.node(c),g=!1;if(l==1)g=h.canReplace(f,f,i);else{let y=h.contentMatchAt(f).findWrapping(i.firstChild.type);g=y&&h.canReplaceWith(f,f,y[0])}if(g)return d==0?r.pos:d<0?r.before(c+1):r.after(c+1)}return null}function Du(n,e,t=e,r=ae.empty){if(e==t&&!r.size)return null;let i=n.resolve(e),l=n.resolve(t);return cw(i,l,r)?new Nt(e,t,r):new vj(i,l,r).fit()}function cw(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}class vj{constructor(e,t,r){this.$from=e,this.$to=t,this.unplaced=r,this.frontier=[],this.placed=W.empty;for(let i=0;i<=e.depth;i++){let l=e.node(i);this.frontier.push({type:l.type,match:l.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=W.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let h=this.findFittable();h?this.placeNodes(h):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let l=this.placed,c=r.depth,d=i.depth;for(;c&&d&&l.childCount==1;)l=l.firstChild.content,c--,d--;let f=new ae(l,c,d);return e>-1?new Ct(r.pos,e,this.$to.pos,this.$to.end(),f,t):f.size||r.pos!=this.$to.pos?new Nt(r.pos,i.pos,f):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let l=t.firstChild;if(t.childCount>1&&(i=0),l.type.spec.isolating&&i<=r){e=r;break}t=l.content}for(let t=1;t<=2;t++)for(let r=t==1?e:this.unplaced.openStart;r>=0;r--){let i,l=null;r?(l=Fh(this.unplaced.content,r-1).firstChild,i=l.content):i=this.unplaced.content;let c=i.firstChild;for(let d=this.depth;d>=0;d--){let{type:f,match:h}=this.frontier[d],g,y=null;if(t==1&&(c?h.matchType(c.type)||(y=h.fillBefore(W.from(c),!1)):l&&f.compatibleContent(l.type)))return{sliceDepth:r,frontierDepth:d,parent:l,inject:y};if(t==2&&c&&(g=h.findWrapping(c.type)))return{sliceDepth:r,frontierDepth:d,parent:l,wrap:g};if(l&&h.matchType(l.type))break}}}openMore(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=Fh(e,t);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new ae(e,t+1,Math.max(r,i.size+t>=e.size-r?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=Fh(e,t);if(i.childCount<=1&&t>0){let l=e.size-t<=t+i.size;this.unplaced=new ae(El(e,t-1,1),t-1,l?t-1:r)}else this.unplaced=new ae(El(e,t,1),t,r)}placeNodes({sliceDepth:e,frontierDepth:t,parent:r,inject:i,wrap:l}){for(;this.depth>t;)this.closeFrontierNode();if(l)for(let N=0;N<l.length;N++)this.openFrontierNode(l[N]);let c=this.unplaced,d=r?r.content:c.content,f=c.openStart-e,h=0,g=[],{match:y,type:b}=this.frontier[t];if(i){for(let N=0;N<i.childCount;N++)g.push(i.child(N));y=y.matchFragment(i)}let v=d.size+e-(c.content.size-c.openEnd);for(;h<d.childCount;){let N=d.child(h),C=y.matchType(N.type);if(!C)break;h++,(h>1||f==0||N.content.size)&&(y=C,g.push(uw(N.mark(b.allowedMarks(N.marks)),h==1?f:0,h==d.childCount?v:-1)))}let w=h==d.childCount;w||(v=-1),this.placed=kl(this.placed,t,W.from(g)),this.frontier[t].match=y,w&&v<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let N=0,C=d;N<v;N++){let j=C.lastChild;this.frontier.push({type:j.type,match:j.contentMatchAt(j.childCount)}),C=j.content}this.unplaced=w?e==0?ae.empty:new ae(El(c.content,e-1,1),e-1,v<0?c.openEnd:e-1):new ae(El(c.content,e,h),c.openStart,c.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!$h(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:r,type:i}=this.frontier[t],l=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),c=$h(e,t,i,r,l);if(c){for(let d=t-1;d>=0;d--){let{match:f,type:h}=this.frontier[d],g=$h(e,d,h,f,!0);if(!g||g.childCount)continue e}return{depth:t,fit:c,move:l?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=kl(this.placed,t.depth,t.fit)),e=t.move;for(let r=t.depth+1;r<=e.depth;r++){let i=e.node(r),l=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,l)}return e}openFrontierNode(e,t=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=kl(this.placed,this.depth,W.from(e.create(t,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(W.empty,!0);t.childCount&&(this.placed=kl(this.placed,this.frontier.length,t))}}function El(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy(El(n.firstChild.content,e-1,t)))}function kl(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy(kl(n.lastChild.content,e-1,t)))}function Fh(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function uw(n,e,t){if(e<=0)return n;let r=n.content;return e>1&&(r=r.replaceChild(0,uw(r.firstChild,e-1,r.childCount==1?t-1:0))),e>0&&(r=n.type.contentMatch.fillBefore(r).append(r),t<=0&&(r=r.append(n.type.contentMatch.matchFragment(r).fillBefore(W.empty,!0)))),n.copy(r)}function $h(n,e,t,r,i){let l=n.node(e),c=i?n.indexAfter(e):n.index(e);if(c==l.childCount&&!t.compatibleContent(l.type))return null;let d=r.fillBefore(l.content,!0,c);return d&&!wj(t,l.content,c)?d:null}function wj(n,e,t){for(let r=t;r<e.childCount;r++)if(!n.allowsMarks(e.child(r).marks))return!0;return!1}function Sj(n){return n.spec.defining||n.spec.definingForContent}function Nj(n,e,t,r){if(!r.size)return n.deleteRange(e,t);let i=n.doc.resolve(e),l=n.doc.resolve(t);if(cw(i,l,r))return n.step(new Nt(e,t,r));let c=fw(i,n.doc.resolve(t));c[c.length-1]==0&&c.pop();let d=-(i.depth+1);c.unshift(d);for(let b=i.depth,v=i.pos-1;b>0;b--,v--){let w=i.node(b).type.spec;if(w.defining||w.definingAsContext||w.isolating)break;c.indexOf(b)>-1?d=b:i.before(b)==v&&c.splice(1,0,-b)}let f=c.indexOf(d),h=[],g=r.openStart;for(let b=r.content,v=0;;v++){let w=b.firstChild;if(h.push(w),v==r.openStart)break;b=w.content}for(let b=g-1;b>=0;b--){let v=h[b],w=Sj(v.type);if(w&&!v.sameMarkup(i.node(Math.abs(d)-1)))g=b;else if(w||!v.type.isTextblock)break}for(let b=r.openStart;b>=0;b--){let v=(b+g+1)%(r.openStart+1),w=h[v];if(w)for(let N=0;N<c.length;N++){let C=c[(N+f)%c.length],j=!0;C<0&&(j=!1,C=-C);let O=i.node(C-1),M=i.index(C-1);if(O.canReplaceWith(M,M,w.type,w.marks))return n.replace(i.before(C),j?l.after(C):t,new ae(dw(r.content,0,r.openStart,v),v,r.openEnd))}}let y=n.steps.length;for(let b=c.length-1;b>=0&&(n.replace(e,t,r),!(n.steps.length>y));b--){let v=c[b];v<0||(e=i.before(v),t=l.after(v))}}function dw(n,e,t,r,i){if(e<t){let l=n.firstChild;n=n.replaceChild(0,l.copy(dw(l.content,e+1,t,r,l)))}if(e>r){let l=i.contentMatchAt(0),c=l.fillBefore(n).append(n);n=c.append(l.matchFragment(c).fillBefore(W.empty,!0))}return n}function Cj(n,e,t,r){if(!r.isInline&&e==t&&n.doc.resolve(e).parent.content.size){let i=bj(n.doc,e,r.type);i!=null&&(e=t=i)}n.replaceRange(e,t,new ae(W.from(r),0,0))}function Ej(n,e,t){let r=n.doc.resolve(e),i=n.doc.resolve(t),l=fw(r,i);for(let c=0;c<l.length;c++){let d=l[c],f=c==l.length-1;if(f&&d==0||r.node(d).type.contentMatch.validEnd)return n.delete(r.start(d),i.end(d));if(d>0&&(f||r.node(d-1).canReplace(r.index(d-1),i.indexAfter(d-1))))return n.delete(r.before(d),i.after(d))}for(let c=1;c<=r.depth&&c<=i.depth;c++)if(e-r.start(c)==r.depth-c&&t>r.end(c)&&i.end(c)-t!=i.depth-c&&r.start(c-1)==i.start(c-1)&&r.node(c-1).canReplace(r.index(c-1),i.index(c-1)))return n.delete(r.before(c),t);n.delete(e,t)}function fw(n,e){let t=[],r=Math.min(n.depth,e.depth);for(let i=r;i>=0;i--){let l=n.start(i);if(l<n.pos-(n.depth-i)||e.end(i)>e.pos+(e.depth-i)||n.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(l==e.start(i)||i==n.depth&&i==e.depth&&n.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==l-1)&&t.push(i)}return t}class aa extends Vt{constructor(e,t,r){super(),this.pos=e,this.attr=t,this.value=r}apply(e){let t=e.nodeAt(this.pos);if(!t)return dt.fail("No node at attribute step's position");let r=Object.create(null);for(let l in t.attrs)r[l]=t.attrs[l];r[this.attr]=this.value;let i=t.type.create(r,null,t.marks);return dt.fromReplace(e,this.pos,this.pos+1,new ae(W.from(i),0,t.isLeaf?0:1))}getMap(){return fn.empty}invert(e){return new aa(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new aa(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new aa(t.pos,t.attr,t.value)}}Vt.jsonID("attr",aa);class Fl extends Vt{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let i in e.attrs)t[i]=e.attrs[i];t[this.attr]=this.value;let r=e.type.create(t,e.content,e.marks);return dt.ok(r)}getMap(){return fn.empty}invert(e){return new Fl(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Fl(t.attr,t.value)}}Vt.jsonID("docAttr",Fl);let ca=class extends Error{};ca=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};ca.prototype=Object.create(Error.prototype);ca.prototype.constructor=ca;ca.prototype.name="TransformError";class hw{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Vl}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new ca(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,r=ae.empty){let i=Du(this.doc,e,t,r);return i&&this.step(i),this}replaceWith(e,t,r){return this.replace(e,t,new ae(W.from(r),0,0))}delete(e,t){return this.replace(e,t,ae.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,r){return Nj(this,e,t,r),this}replaceRangeWith(e,t,r){return Cj(this,e,t,r),this}deleteRange(e,t){return Ej(this,e,t),this}lift(e,t){return cj(this,e,t),this}join(e,t=1){return xj(this,e,t),this}wrap(e,t){return fj(this,e,t),this}setBlockType(e,t=e,r,i=null){return hj(this,e,t,r,i),this}setNodeMarkup(e,t,r=null,i){return mj(this,e,t,r,i),this}setNodeAttribute(e,t,r){return this.step(new aa(e,t,r)),this}setDocAttribute(e,t){return this.step(new Fl(e,t)),this}addNodeMark(e,t){return this.step(new cs(e,t)),this}removeNodeMark(e,t){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(t instanceof Ke)t.isInSet(r.marks)&&this.step(new ii(e,t));else{let i=r.marks,l,c=[];for(;l=t.isInSet(i);)c.push(new ii(e,l)),i=l.removeFromSet(i);for(let d=c.length-1;d>=0;d--)this.step(c[d])}return this}split(e,t=1,r){return gj(this,e,t,r),this}addMark(e,t,r){return aj(this,e,t,r),this}removeMark(e,t,r){return lj(this,e,t,r),this}clearIncompatible(e,t,r){return um(this,e,t,r),this}}const Gh=Object.create(null);class Ce{constructor(e,t,r){this.$anchor=e,this.$head=t,this.ranges=r||[new kj(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=ae.empty){let r=t.content.lastChild,i=null;for(let d=0;d<t.openEnd;d++)i=r,r=r.lastChild;let l=e.steps.length,c=this.ranges;for(let d=0;d<c.length;d++){let{$from:f,$to:h}=c[d],g=e.mapping.slice(l);e.replaceRange(g.map(f.pos),g.map(h.pos),d?ae.empty:t),d==0&&$b(e,l,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,t){let r=e.steps.length,i=this.ranges;for(let l=0;l<i.length;l++){let{$from:c,$to:d}=i[l],f=e.mapping.slice(r),h=f.map(c.pos),g=f.map(d.pos);l?e.deleteRange(h,g):(e.replaceRangeWith(h,g,t),$b(e,r,t.isInline?-1:1))}}static findFrom(e,t,r=!1){let i=e.parent.inlineContent?new ve(e):ta(e.node(0),e.parent,e.pos,e.index(),t,r);if(i)return i;for(let l=e.depth-1;l>=0;l--){let c=t<0?ta(e.node(0),e.node(l),e.before(l+1),e.index(l),t,r):ta(e.node(0),e.node(l),e.after(l+1),e.index(l)+1,t,r);if(c)return c}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new hn(e.node(0))}static atStart(e){return ta(e,e,0,0,1)||new hn(e)}static atEnd(e){return ta(e,e,e.content.size,e.childCount,-1)||new hn(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Gh[t.type];if(!r)throw new RangeError(`No selection type ${t.type} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in Gh)throw new RangeError("Duplicate use of selection JSON ID "+e);return Gh[e]=t,t.prototype.jsonID=e,t}getBookmark(){return ve.between(this.$anchor,this.$head).getBookmark()}}Ce.prototype.visible=!0;class kj{constructor(e,t){this.$from=e,this.$to=t}}let Vb=!1;function Fb(n){!Vb&&!n.parent.inlineContent&&(Vb=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class ve extends Ce{constructor(e,t=e){Fb(e),Fb(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let r=e.resolve(t.map(this.head));if(!r.parent.inlineContent)return Ce.near(r);let i=e.resolve(t.map(this.anchor));return new ve(i.parent.inlineContent?i:r,r)}replace(e,t=ae.empty){if(super.replace(e,t),t==ae.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof ve&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Lu(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new ve(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r=t){let i=e.resolve(t);return new this(i,r==t?i:e.resolve(r))}static between(e,t,r){let i=e.pos-t.pos;if((!r||i)&&(r=i>=0?1:-1),!t.parent.inlineContent){let l=Ce.findFrom(t,r,!0)||Ce.findFrom(t,-r,!0);if(l)t=l.$head;else return Ce.near(t,r)}return e.parent.inlineContent||(i==0?e=t:(e=(Ce.findFrom(e,-r,!0)||Ce.findFrom(e,r,!0)).$anchor,e.pos<t.pos!=i<0&&(e=t))),new ve(e,t)}}Ce.jsonID("text",ve);class Lu{constructor(e,t){this.anchor=e,this.head=t}map(e){return new Lu(e.map(this.anchor),e.map(this.head))}resolve(e){return ve.between(e.resolve(this.anchor),e.resolve(this.head))}}class me extends Ce{constructor(e){let t=e.nodeAfter,r=e.node(0).resolve(e.pos+t.nodeSize);super(e,r),this.node=t}map(e,t){let{deleted:r,pos:i}=t.mapResult(this.anchor),l=e.resolve(i);return r?Ce.near(l):new me(l)}content(){return new ae(W.from(this.node),0,0)}eq(e){return e instanceof me&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new fm(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new me(e.resolve(t.anchor))}static create(e,t){return new me(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}me.prototype.visible=!1;Ce.jsonID("node",me);class fm{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:r}=e.mapResult(this.anchor);return t?new Lu(r,r):new fm(r)}resolve(e){let t=e.resolve(this.anchor),r=t.nodeAfter;return r&&me.isSelectable(r)?new me(t):Ce.near(t)}}class hn extends Ce{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=ae.empty){if(t==ae.empty){e.delete(0,e.doc.content.size);let r=Ce.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new hn(e)}map(e){return new hn(e)}eq(e){return e instanceof hn}getBookmark(){return jj}}Ce.jsonID("all",hn);const jj={map(){return this},resolve(n){return new hn(n)}};function ta(n,e,t,r,i,l=!1){if(e.inlineContent)return ve.create(n,t);for(let c=r-(i>0?0:1);i>0?c<e.childCount:c>=0;c+=i){let d=e.child(c);if(d.isAtom){if(!l&&me.isSelectable(d))return me.create(n,t-(i<0?d.nodeSize:0))}else{let f=ta(n,d,t+i,i<0?d.childCount:0,i,l);if(f)return f}t+=d.nodeSize*i}return null}function $b(n,e,t){let r=n.steps.length-1;if(r<e)return;let i=n.steps[r];if(!(i instanceof Nt||i instanceof Ct))return;let l=n.mapping.maps[r],c;l.forEach((d,f,h,g)=>{c==null&&(c=g)}),n.setSelection(Ce.near(n.doc.resolve(c),t))}const Gb=1,Yb=2,Kb=4;class Aj extends hw{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Gb)&-3,this.storedMarks=null,this}get selectionSet(){return(this.updated&Gb)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Yb,this}ensureMarks(e){return Ke.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Yb)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&-3,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let r=this.selection;return t&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||Ke.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,r){let i=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=t),r=r??t,!e)return this.deleteRange(t,r);let l=this.storedMarks;if(!l){let c=this.doc.resolve(t);l=r==t?c.marks():c.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(t,r,i.text(e,l)),this.selection.empty||this.setSelection(Ce.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=Kb,this}get scrolledIntoView(){return(this.updated&Kb)>0}}function Xb(n,e){return!e||!n?n:n.bind(e)}class jl{constructor(e,t,r){this.name=e,this.init=Xb(t.init,r),this.apply=Xb(t.apply,r)}}const Tj=[new jl("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new jl("selection",{init(n,e){return n.selection||Ce.atStart(e.doc)},apply(n){return n.selection}}),new jl("storedMarks",{init(n){return n.storedMarks||null},apply(n,e,t,r){return r.selection.$cursor?n.storedMarks:null}}),new jl("scrollToSelection",{init(){return 0},apply(n,e){return n.scrolledIntoView?e+1:e}})];class Yh{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Tj.slice(),t&&t.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new jl(r.key,r.spec.state,r))})}}class sa{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=t){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],r=this.applyInner(e),i=null;for(;;){let l=!1;for(let c=0;c<this.config.plugins.length;c++){let d=this.config.plugins[c];if(d.spec.appendTransaction){let f=i?i[c].n:0,h=i?i[c].state:this,g=f<t.length&&d.spec.appendTransaction.call(d,f?t.slice(f):t,h,r);if(g&&r.filterTransaction(g,c)){if(g.setMeta("appendedTransaction",e),!i){i=[];for(let y=0;y<this.config.plugins.length;y++)i.push(y<c?{state:r,n:t.length}:{state:this,n:0})}t.push(g),r=r.applyInner(g),l=!0}i&&(i[c]={state:r,n:t.length})}}if(!l)return{state:r,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new sa(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let l=r[i];t[l.name]=l.apply(e,this[l.name],this,t)}return t}get tr(){return new Aj(this)}static create(e){let t=new Yh(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new sa(t);for(let i=0;i<t.fields.length;i++)r[t.fields[i].name]=t.fields[i].init(e,r);return r}reconfigure(e){let t=new Yh(this.schema,e.plugins),r=t.fields,i=new sa(t);for(let l=0;l<r.length;l++){let c=r[l].name;i[c]=this.hasOwnProperty(c)?this[c]:r[l].init(e,i)}return i}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],l=i.spec.state;l&&l.toJSON&&(t[r]=l.toJSON.call(i,this[i.key]))}return t}static fromJSON(e,t,r){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new Yh(e.schema,e.plugins),l=new sa(i);return i.fields.forEach(c=>{if(c.name=="doc")l.doc=ds.fromJSON(e.schema,t.doc);else if(c.name=="selection")l.selection=Ce.fromJSON(l.doc,t.selection);else if(c.name=="storedMarks")t.storedMarks&&(l.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let d in r){let f=r[d],h=f.spec.state;if(f.key==c.name&&h&&h.fromJSON&&Object.prototype.hasOwnProperty.call(t,d)){l[c.name]=h.fromJSON.call(f,e,t[d],l);return}}l[c.name]=c.init(e,l)}}),l}}function pw(n,e,t){for(let r in n){let i=n[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=pw(i,e,{})),t[r]=i}return t}class _t{constructor(e){this.spec=e,this.props={},e.props&&pw(e.props,this,this.props),this.key=e.key?e.key.key:mw("plugin")}getState(e){return e[this.key]}}const Kh=Object.create(null);function mw(n){return n in Kh?n+"$"+ ++Kh[n]:(Kh[n]=0,n+"$")}class mn{constructor(e="key"){this.key=mw(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Dt=function(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e},ua=function(n){let e=n.assignedSlot||n.parentNode;return e&&e.nodeType==11?e.host:e};let Ep=null;const br=function(n,e,t){let r=Ep||(Ep=document.createRange());return r.setEnd(n,t??n.nodeValue.length),r.setStart(n,e||0),r},Mj=function(){Ep=null},ai=function(n,e,t,r){return t&&(Jb(n,e,t,r,-1)||Jb(n,e,t,r,1))},Oj=/^(img|br|input|textarea|hr)$/i;function Jb(n,e,t,r,i){for(var l;;){if(n==t&&e==r)return!0;if(e==(i<0?0:Tn(n))){let c=n.parentNode;if(!c||c.nodeType!=1||no(n)||Oj.test(n.nodeName)||n.contentEditable=="false")return!1;e=Dt(n)+(i<0?0:1),n=c}else if(n.nodeType==1){let c=n.childNodes[e+(i<0?-1:0)];if(c.nodeType==1&&c.contentEditable=="false")if(!((l=c.pmViewDesc)===null||l===void 0)&&l.ignoreForSelection)e+=i;else return!1;else n=c,e=i<0?Tn(n):0}else return!1}}function Tn(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function Rj(n,e){for(;;){if(n.nodeType==3&&e)return n;if(n.nodeType==1&&e>0){if(n.contentEditable=="false")return null;n=n.childNodes[e-1],e=Tn(n)}else if(n.parentNode&&!no(n))e=Dt(n),n=n.parentNode;else return null}}function Dj(n,e){for(;;){if(n.nodeType==3&&e<n.nodeValue.length)return n;if(n.nodeType==1&&e<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[e],e=0}else if(n.parentNode&&!no(n))e=Dt(n)+1,n=n.parentNode;else return null}}function Lj(n,e,t){for(let r=e==0,i=e==Tn(n);r||i;){if(n==t)return!0;let l=Dt(n);if(n=n.parentNode,!n)return!1;r=r&&l==0,i=i&&l==Tn(n)}}function no(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const _u=function(n){return n.focusNode&&ai(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function Gs(n,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=n,t.key=t.code=e,t}function _j(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function zj(n,e,t){if(n.caretPositionFromPoint)try{let r=n.caretPositionFromPoint(e,t);if(r)return{node:r.offsetNode,offset:Math.min(Tn(r.offsetNode),r.offset)}}catch{}if(n.caretRangeFromPoint){let r=n.caretRangeFromPoint(e,t);if(r)return{node:r.startContainer,offset:Math.min(Tn(r.startContainer),r.startOffset)}}}const Qn=typeof navigator<"u"?navigator:null,Qb=typeof document<"u"?document:null,bs=Qn&&Qn.userAgent||"",kp=/Edge\/(\d+)/.exec(bs),gw=/MSIE \d/.exec(bs),jp=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(bs),rn=!!(gw||jp||kp),hs=gw?document.documentMode:jp?+jp[1]:kp?+kp[1]:0,Hn=!rn&&/gecko\/(\d+)/i.test(bs);Hn&&+(/Firefox\/(\d+)/.exec(bs)||[0,0])[1];const Ap=!rn&&/Chrome\/(\d+)/.exec(bs),qt=!!Ap,yw=Ap?+Ap[1]:0,$t=!rn&&!!Qn&&/Apple Computer/.test(Qn.vendor),da=$t&&(/Mobile\/\w+/.test(bs)||!!Qn&&Qn.maxTouchPoints>2),An=da||(Qn?/Mac/.test(Qn.platform):!1),Bj=Qn?/Win/.test(Qn.platform):!1,vr=/Android \d/.test(bs),ro=!!Qb&&"webkitFontSmoothing"in Qb.documentElement.style,Pj=ro?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function Hj(n){let e=n.defaultView&&n.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function mr(n,e){return typeof n=="number"?n:n[e]}function Uj(n){let e=n.getBoundingClientRect(),t=e.width/n.offsetWidth||1,r=e.height/n.offsetHeight||1;return{left:e.left,right:e.left+n.clientWidth*t,top:e.top,bottom:e.top+n.clientHeight*r}}function Zb(n,e,t){let r=n.someProp("scrollThreshold")||0,i=n.someProp("scrollMargin")||5,l=n.dom.ownerDocument;for(let c=t||n.dom;c;){if(c.nodeType!=1){c=ua(c);continue}let d=c,f=d==l.body,h=f?Hj(l):Uj(d),g=0,y=0;if(e.top<h.top+mr(r,"top")?y=-(h.top-e.top+mr(i,"top")):e.bottom>h.bottom-mr(r,"bottom")&&(y=e.bottom-e.top>h.bottom-h.top?e.top+mr(i,"top")-h.top:e.bottom-h.bottom+mr(i,"bottom")),e.left<h.left+mr(r,"left")?g=-(h.left-e.left+mr(i,"left")):e.right>h.right-mr(r,"right")&&(g=e.right-h.right+mr(i,"right")),g||y)if(f)l.defaultView.scrollBy(g,y);else{let v=d.scrollLeft,w=d.scrollTop;y&&(d.scrollTop+=y),g&&(d.scrollLeft+=g);let N=d.scrollLeft-v,C=d.scrollTop-w;e={left:e.left-N,top:e.top-C,right:e.right-N,bottom:e.bottom-C}}let b=f?"fixed":getComputedStyle(c).position;if(/^(fixed|sticky)$/.test(b))break;c=b=="absolute"?c.offsetParent:ua(c)}}function Ij(n){let e=n.dom.getBoundingClientRect(),t=Math.max(0,e.top),r,i;for(let l=(e.left+e.right)/2,c=t+1;c<Math.min(innerHeight,e.bottom);c+=5){let d=n.root.elementFromPoint(l,c);if(!d||d==n.dom||!n.dom.contains(d))continue;let f=d.getBoundingClientRect();if(f.top>=t-20){r=d,i=f.top;break}}return{refDOM:r,refTop:i,stack:xw(n.dom)}}function xw(n){let e=[],t=n.ownerDocument;for(let r=n;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),n!=t);r=ua(r));return e}function qj({refDOM:n,refTop:e,stack:t}){let r=n?n.getBoundingClientRect().top:0;bw(t,r==0?0:r-e)}function bw(n,e){for(let t=0;t<n.length;t++){let{dom:r,top:i,left:l}=n[t];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=l&&(r.scrollLeft=l)}}let Ji=null;function Vj(n){if(n.setActive)return n.setActive();if(Ji)return n.focus(Ji);let e=xw(n);n.focus(Ji==null?{get preventScroll(){return Ji={preventScroll:!0},!0}}:void 0),Ji||(Ji=!1,bw(e,0))}function vw(n,e){let t,r=2e8,i,l=0,c=e.top,d=e.top,f,h;for(let g=n.firstChild,y=0;g;g=g.nextSibling,y++){let b;if(g.nodeType==1)b=g.getClientRects();else if(g.nodeType==3)b=br(g).getClientRects();else continue;for(let v=0;v<b.length;v++){let w=b[v];if(w.top<=c&&w.bottom>=d){c=Math.max(w.bottom,c),d=Math.min(w.top,d);let N=w.left>e.left?w.left-e.left:w.right<e.left?e.left-w.right:0;if(N<r){t=g,r=N,i=N&&t.nodeType==3?{left:w.right<e.left?w.right:w.left,top:e.top}:e,g.nodeType==1&&N&&(l=y+(e.left>=(w.left+w.right)/2?1:0));continue}}else w.top>e.top&&!f&&w.left<=e.left&&w.right>=e.left&&(f=g,h={left:Math.max(w.left,Math.min(w.right,e.left)),top:w.top});!t&&(e.left>=w.right&&e.top>=w.top||e.left>=w.left&&e.top>=w.bottom)&&(l=y+1)}}return!t&&f&&(t=f,i=h,r=0),t&&t.nodeType==3?Fj(t,i):!t||r&&t.nodeType==1?{node:n,offset:l}:vw(t,i)}function Fj(n,e){let t=n.nodeValue.length,r=document.createRange();for(let i=0;i<t;i++){r.setEnd(n,i+1),r.setStart(n,i);let l=es(r,1);if(l.top!=l.bottom&&hm(e,l))return{node:n,offset:i+(e.left>=(l.left+l.right)/2?1:0)}}return{node:n,offset:0}}function hm(n,e){return n.left>=e.left-1&&n.left<=e.right+1&&n.top>=e.top-1&&n.top<=e.bottom+1}function $j(n,e){let t=n.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<n.getBoundingClientRect().left?t:n}function Gj(n,e,t){let{node:r,offset:i}=vw(e,t),l=-1;if(r.nodeType==1&&!r.firstChild){let c=r.getBoundingClientRect();l=c.left!=c.right&&t.left>(c.left+c.right)/2?1:-1}return n.docView.posFromDOM(r,i,l)}function Yj(n,e,t,r){let i=-1;for(let l=e,c=!1;l!=n.dom;){let d=n.docView.nearestDesc(l,!0),f;if(!d)return null;if(d.dom.nodeType==1&&(d.node.isBlock&&d.parent||!d.contentDOM)&&((f=d.dom.getBoundingClientRect()).width||f.height)&&(d.node.isBlock&&d.parent&&(!c&&f.left>r.left||f.top>r.top?i=d.posBefore:(!c&&f.right<r.left||f.bottom<r.top)&&(i=d.posAfter),c=!0),!d.contentDOM&&i<0&&!d.node.isText))return(d.node.isBlock?r.top<(f.top+f.bottom)/2:r.left<(f.left+f.right)/2)?d.posBefore:d.posAfter;l=d.dom.parentNode}return i>-1?i:n.docView.posFromDOM(e,t,-1)}function ww(n,e,t){let r=n.childNodes.length;if(r&&t.top<t.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-t.top)/(t.bottom-t.top))-2)),l=i;;){let c=n.childNodes[l];if(c.nodeType==1){let d=c.getClientRects();for(let f=0;f<d.length;f++){let h=d[f];if(hm(e,h))return ww(c,e,h)}}if((l=(l+1)%r)==i)break}return n}function Kj(n,e){let t=n.dom.ownerDocument,r,i=0,l=zj(t,e.left,e.top);l&&({node:r,offset:i}=l);let c=(n.root.elementFromPoint?n.root:t).elementFromPoint(e.left,e.top),d;if(!c||!n.dom.contains(c.nodeType!=1?c.parentNode:c)){let h=n.dom.getBoundingClientRect();if(!hm(e,h)||(c=ww(n.dom,e,h),!c))return null}if($t)for(let h=c;r&&h;h=ua(h))h.draggable&&(r=void 0);if(c=$j(c,e),r){if(Hn&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let g=r.childNodes[i],y;g.nodeName=="IMG"&&(y=g.getBoundingClientRect()).right<=e.left&&y.bottom>e.top&&i++}let h;ro&&i&&r.nodeType==1&&(h=r.childNodes[i-1]).nodeType==1&&h.contentEditable=="false"&&h.getBoundingClientRect().top>=e.top&&i--,r==n.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?d=n.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(d=Yj(n,r,i,e))}d==null&&(d=Gj(n,c,e));let f=n.docView.nearestDesc(c,!0);return{pos:d,inside:f?f.posAtStart-f.border:-1}}function Wb(n){return n.top<n.bottom||n.left<n.right}function es(n,e){let t=n.getClientRects();if(t.length){let r=t[e<0?0:t.length-1];if(Wb(r))return r}return Array.prototype.find.call(t,Wb)||n.getBoundingClientRect()}const Xj=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Sw(n,e,t){let{node:r,offset:i,atom:l}=n.docView.domFromPos(e,t<0?-1:1),c=ro||Hn;if(r.nodeType==3)if(c&&(Xj.test(r.nodeValue)||(t<0?!i:i==r.nodeValue.length))){let f=es(br(r,i,i),t);if(Hn&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let h=es(br(r,i-1,i-1),-1);if(h.top==f.top){let g=es(br(r,i,i+1),-1);if(g.top!=f.top)return Sl(g,g.left<h.left)}}return f}else{let f=i,h=i,g=t<0?1:-1;return t<0&&!i?(h++,g=-1):t>=0&&i==r.nodeValue.length?(f--,g=1):t<0?f--:h++,Sl(es(br(r,f,h),g),g<0)}if(!n.state.doc.resolve(e-(l||0)).parent.inlineContent){if(l==null&&i&&(t<0||i==Tn(r))){let f=r.childNodes[i-1];if(f.nodeType==1)return Xh(f.getBoundingClientRect(),!1)}if(l==null&&i<Tn(r)){let f=r.childNodes[i];if(f.nodeType==1)return Xh(f.getBoundingClientRect(),!0)}return Xh(r.getBoundingClientRect(),t>=0)}if(l==null&&i&&(t<0||i==Tn(r))){let f=r.childNodes[i-1],h=f.nodeType==3?br(f,Tn(f)-(c?0:1)):f.nodeType==1&&(f.nodeName!="BR"||!f.nextSibling)?f:null;if(h)return Sl(es(h,1),!1)}if(l==null&&i<Tn(r)){let f=r.childNodes[i];for(;f.pmViewDesc&&f.pmViewDesc.ignoreForCoords;)f=f.nextSibling;let h=f?f.nodeType==3?br(f,0,c?0:1):f.nodeType==1?f:null:null;if(h)return Sl(es(h,-1),!0)}return Sl(es(r.nodeType==3?br(r):r,-t),t>=0)}function Sl(n,e){if(n.width==0)return n;let t=e?n.left:n.right;return{top:n.top,bottom:n.bottom,left:t,right:t}}function Xh(n,e){if(n.height==0)return n;let t=e?n.top:n.bottom;return{top:t,bottom:t,left:n.left,right:n.right}}function Nw(n,e,t){let r=n.state,i=n.root.activeElement;r!=e&&n.updateState(e),i!=n.dom&&n.focus();try{return t()}finally{r!=e&&n.updateState(r),i!=n.dom&&i&&i.focus()}}function Jj(n,e,t){let r=e.selection,i=t=="up"?r.$from:r.$to;return Nw(n,e,()=>{let{node:l}=n.docView.domFromPos(i.pos,t=="up"?-1:1);for(;;){let d=n.docView.nearestDesc(l,!0);if(!d)break;if(d.node.isBlock){l=d.contentDOM||d.dom;break}l=d.dom.parentNode}let c=Sw(n,i.pos,1);for(let d=l.firstChild;d;d=d.nextSibling){let f;if(d.nodeType==1)f=d.getClientRects();else if(d.nodeType==3)f=br(d,0,d.nodeValue.length).getClientRects();else continue;for(let h=0;h<f.length;h++){let g=f[h];if(g.bottom>g.top+1&&(t=="up"?c.top-g.top>(g.bottom-c.top)*2:g.bottom-c.bottom>(c.bottom-g.top)*2))return!1}}return!0})}const Qj=/[\u0590-\u08ac]/;function Zj(n,e,t){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,l=!i,c=i==r.parent.content.size,d=n.domSelection();return d?!Qj.test(r.parent.textContent)||!d.modify?t=="left"||t=="backward"?l:c:Nw(n,e,()=>{let{focusNode:f,focusOffset:h,anchorNode:g,anchorOffset:y}=n.domSelectionRange(),b=d.caretBidiLevel;d.modify("move",t,"character");let v=r.depth?n.docView.domAfterPos(r.before()):n.dom,{focusNode:w,focusOffset:N}=n.domSelectionRange(),C=w&&!v.contains(w.nodeType==1?w:w.parentNode)||f==w&&h==N;try{d.collapse(g,y),f&&(f!=g||h!=y)&&d.extend&&d.extend(f,h)}catch{}return b!=null&&(d.caretBidiLevel=b),C}):r.pos==r.start()||r.pos==r.end()}let ev=null,tv=null,nv=!1;function Wj(n,e,t){return ev==e&&tv==t?nv:(ev=e,tv=t,nv=t=="up"||t=="down"?Jj(n,e,t):Zj(n,e,t))}const On=0,rv=1,Ks=2,Zn=3;class so{constructor(e,t,r,i){this.parent=e,this.children=t,this.dom=r,this.contentDOM=i,this.dirty=On,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,r=this.posAtStart;;t++){let i=this.children[t];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let l,c;if(e==this.contentDOM)l=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;l=e.previousSibling}for(;l&&!((c=l.pmViewDesc)&&c.parent==this);)l=l.previousSibling;return l?this.posBeforeChild(c)+c.size:this.posAtStart}else{let l,c;if(e==this.contentDOM)l=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;l=e.nextSibling}for(;l&&!((c=l.pmViewDesc)&&c.parent==this);)l=l.nextSibling;return l?this.posBeforeChild(c):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=t>Dt(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let l=e;;l=l.parentNode){if(l==this.dom){i=!1;break}if(l.previousSibling)break}if(i==null&&t==e.childNodes.length)for(let l=e;;l=l.parentNode){if(l==this.dom){i=!0;break}if(l.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let r=!0,i=e;i;i=i.parentNode){let l=this.getDesc(i),c;if(l&&(!t||l.node))if(r&&(c=l.nodeDOM)&&!(c.nodeType==1?c.contains(e.nodeType==1?e:e.parentNode):c==e))r=!1;else return l}}getDesc(e){let t=e.pmViewDesc;for(let r=t;r;r=r.parent)if(r==this)return t}posFromDOM(e,t,r){for(let i=e;i;i=i.parentNode){let l=this.getDesc(i);if(l)return l.localPosFromDOM(e,t,r)}return-1}descAt(e){for(let t=0,r=0;t<this.children.length;t++){let i=this.children[t],l=r+i.size;if(r==e&&l!=r){for(;!i.border&&i.children.length;)for(let c=0;c<i.children.length;c++){let d=i.children[c];if(d.size){i=d;break}}return i}if(e<l)return i.descAt(e-r-i.border);r=l}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let l=0;r<this.children.length;r++){let c=this.children[r],d=l+c.size;if(d>e||c instanceof Ew){i=e-l;break}l=d}if(i)return this.children[r].domFromPos(i-this.children[r].border,t);for(let l;r&&!(l=this.children[r-1]).size&&l instanceof Cw&&l.side>=0;r--);if(t<=0){let l,c=!0;for(;l=r?this.children[r-1]:null,!(!l||l.dom.parentNode==this.contentDOM);r--,c=!1);return l&&t&&c&&!l.border&&!l.domAtom?l.domFromPos(l.size,t):{node:this.contentDOM,offset:l?Dt(l.dom)+1:0}}else{let l,c=!0;for(;l=r<this.children.length?this.children[r]:null,!(!l||l.dom.parentNode==this.contentDOM);r++,c=!1);return l&&c&&!l.border&&!l.domAtom?l.domFromPos(0,t):{node:this.contentDOM,offset:l?Dt(l.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,l=-1;for(let c=r,d=0;;d++){let f=this.children[d],h=c+f.size;if(i==-1&&e<=h){let g=c+f.border;if(e>=g&&t<=h-f.border&&f.node&&f.contentDOM&&this.contentDOM.contains(f.contentDOM))return f.parseRange(e,t,g);e=c;for(let y=d;y>0;y--){let b=this.children[y-1];if(b.size&&b.dom.parentNode==this.contentDOM&&!b.emptyChildAt(1)){i=Dt(b.dom)+1;break}e-=b.size}i==-1&&(i=0)}if(i>-1&&(h>t||d==this.children.length-1)){t=h;for(let g=d+1;g<this.children.length;g++){let y=this.children[g];if(y.size&&y.dom.parentNode==this.contentDOM&&!y.emptyChildAt(-1)){l=Dt(y.dom);break}t+=y.size}l==-1&&(l=this.contentDOM.childNodes.length);break}c=h}return{node:this.contentDOM,from:e,to:t,fromOffset:i,toOffset:l}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:r}=this.domFromPos(e,0);if(t.nodeType!=1||r==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[r]}setSelection(e,t,r,i=!1){let l=Math.min(e,t),c=Math.max(e,t);for(let v=0,w=0;v<this.children.length;v++){let N=this.children[v],C=w+N.size;if(l>w&&c<C)return N.setSelection(e-w-N.border,t-w-N.border,r,i);w=C}let d=this.domFromPos(e,e?-1:1),f=t==e?d:this.domFromPos(t,t?-1:1),h=r.root.getSelection(),g=r.domSelectionRange(),y=!1;if((Hn||$t)&&e==t){let{node:v,offset:w}=d;if(v.nodeType==3){if(y=!!(w&&v.nodeValue[w-1]==`
`),y&&w==v.nodeValue.length)for(let N=v,C;N;N=N.parentNode){if(C=N.nextSibling){C.nodeName=="BR"&&(d=f={node:C.parentNode,offset:Dt(C)+1});break}let j=N.pmViewDesc;if(j&&j.node&&j.node.isBlock)break}}else{let N=v.childNodes[w-1];y=N&&(N.nodeName=="BR"||N.contentEditable=="false")}}if(Hn&&g.focusNode&&g.focusNode!=f.node&&g.focusNode.nodeType==1){let v=g.focusNode.childNodes[g.focusOffset];v&&v.contentEditable=="false"&&(i=!0)}if(!(i||y&&$t)&&ai(d.node,d.offset,g.anchorNode,g.anchorOffset)&&ai(f.node,f.offset,g.focusNode,g.focusOffset))return;let b=!1;if((h.extend||e==t)&&!y){h.collapse(d.node,d.offset);try{e!=t&&h.extend(f.node,f.offset),b=!0}catch{}}if(!b){if(e>t){let w=d;d=f,f=w}let v=document.createRange();v.setEnd(f.node,f.offset),v.setStart(d.node,d.offset),h.removeAllRanges(),h.addRange(v)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let r=0,i=0;i<this.children.length;i++){let l=this.children[i],c=r+l.size;if(r==c?e<=c&&t>=r:e<c&&t>r){let d=r+l.border,f=c-l.border;if(e>=d&&t<=f){this.dirty=e==r||t==c?Ks:rv,e==d&&t==f&&(l.contentLost||l.dom.parentNode!=this.contentDOM)?l.dirty=Zn:l.markDirty(e-d,t-d);return}else l.dirty=l.dom==l.contentDOM&&l.dom.parentNode==this.contentDOM&&!l.children.length?Ks:Zn}r=c}this.dirty=Ks}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let r=e==1?Ks:rv;t.dirty<r&&(t.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class Cw extends so{constructor(e,t,r,i){let l,c=t.type.toDOM;if(typeof c=="function"&&(c=c(r,()=>{if(!l)return i;if(l.parent)return l.parent.posBeforeChild(l)})),!t.type.spec.raw){if(c.nodeType!=1){let d=document.createElement("span");d.appendChild(c),c=d}c.contentEditable="false",c.classList.add("ProseMirror-widget")}super(e,[],c,null),this.widget=t,this.widget=t,l=this}matchesWidget(e){return this.dirty==On&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class eA extends so{constructor(e,t,r,i){super(e,[],t,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class li extends so{constructor(e,t,r,i,l){super(e,[],r,i),this.mark=t,this.spec=l}static create(e,t,r,i){let l=i.nodeViews[t.type.name],c=l&&l(t,i,r);return(!c||!c.dom)&&(c=ci.renderSpec(document,t.type.spec.toDOM(t,r),null,t.attrs)),new li(e,t,c.dom,c.contentDOM||c.dom,c)}parseRule(){return this.dirty&Zn||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Zn&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=On){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=On}}slice(e,t,r){let i=li.create(this.parent,this.mark,!0,r),l=this.children,c=this.size;t<c&&(l=Mp(l,t,c,r)),e>0&&(l=Mp(l,0,e,r));for(let d=0;d<l.length;d++)l[d].parent=i;return i.children=l,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class ps extends so{constructor(e,t,r,i,l,c,d,f,h){super(e,[],l,c),this.node=t,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=d}static create(e,t,r,i,l,c){let d=l.nodeViews[t.type.name],f,h=d&&d(t,l,()=>{if(!f)return c;if(f.parent)return f.parent.posBeforeChild(f)},r,i),g=h&&h.dom,y=h&&h.contentDOM;if(t.isText){if(!g)g=document.createTextNode(t.text);else if(g.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else g||({dom:g,contentDOM:y}=ci.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs));!y&&!t.isText&&g.nodeName!="BR"&&(g.hasAttribute("contenteditable")||(g.contentEditable="false"),t.type.spec.draggable&&(g.draggable=!0));let b=g;return g=Aw(g,r,t),h?f=new tA(e,t,r,i,g,y||null,b,h,l,c+1):t.isText?new zu(e,t,r,i,g,b,l):new ps(e,t,r,i,g,y||null,b,l,c+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let r=this.children[t];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>W.empty)}return e}matchesNode(e,t,r){return this.dirty==On&&e.eq(this.node)&&Gc(t,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let r=this.node.inlineContent,i=t,l=e.composing?this.localCompositionInfo(e,t):null,c=l&&l.pos>-1?l:null,d=l&&l.pos<0,f=new rA(this,c&&c.node,e);aA(this.node,this.innerDeco,(h,g,y)=>{h.spec.marks?f.syncToMarks(h.spec.marks,r,e):h.type.side>=0&&!y&&f.syncToMarks(g==this.node.childCount?Ke.none:this.node.child(g).marks,r,e),f.placeWidget(h,e,i)},(h,g,y,b)=>{f.syncToMarks(h.marks,r,e);let v;f.findNodeMatch(h,g,y,b)||d&&e.state.selection.from>i&&e.state.selection.to<i+h.nodeSize&&(v=f.findIndexWithChild(l.node))>-1&&f.updateNodeAt(h,g,y,v,e)||f.updateNextNode(h,g,y,e,b,i)||f.addNode(h,g,y,e,i),i+=h.nodeSize}),f.syncToMarks([],r,e),this.node.isTextblock&&f.addTextblockHacks(),f.destroyRest(),(f.changed||this.dirty==Ks)&&(c&&this.protectLocalComposition(e,c),kw(this.contentDOM,this.children,e),da&&lA(this.dom))}localCompositionInfo(e,t){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof ve)||r<t||i>t+this.node.content.size)return null;let l=e.input.compositionNode;if(!l||!this.dom.contains(l.parentNode))return null;if(this.node.inlineContent){let c=l.nodeValue,d=oA(this.node.content,c,r-t,i-t);return d<0?null:{node:l,pos:d,text:c}}else return{node:l,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:r,text:i}){if(this.getDesc(t))return;let l=t;for(;l.parentNode!=this.contentDOM;l=l.parentNode){for(;l.previousSibling;)l.parentNode.removeChild(l.previousSibling);for(;l.nextSibling;)l.parentNode.removeChild(l.nextSibling);l.pmViewDesc&&(l.pmViewDesc=void 0)}let c=new eA(this,l,t,i);e.input.compositionNodes.push(c),this.children=Mp(this.children,r,r+i.length,e,c)}update(e,t,r,i){return this.dirty==Zn||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,r,i),!0)}updateInner(e,t,r,i){this.updateOuterDeco(t),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=On}updateOuterDeco(e){if(Gc(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=jw(this.dom,this.nodeDOM,Tp(this.outerDeco,this.node,t),Tp(e,this.node,t)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function sv(n,e,t,r,i){Aw(r,e,n);let l=new ps(void 0,n,e,t,r,r,r,i,0);return l.contentDOM&&l.updateChildren(i,0),l}class zu extends ps{constructor(e,t,r,i,l,c,d){super(e,t,r,i,l,null,c,d,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,r,i){return this.dirty==Zn||this.dirty!=On&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=On||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=On,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,r){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,r){let i=this.node.cut(e,t),l=document.createTextNode(i.text);return new zu(this.parent,i,this.outerDeco,this.innerDeco,l,l,r)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=Zn)}get domAtom(){return!1}isText(e){return this.node.text==e}}class Ew extends so{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==On&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class tA extends ps{constructor(e,t,r,i,l,c,d,f,h,g){super(e,t,r,i,l,c,d,h,g),this.spec=f}update(e,t,r,i){if(this.dirty==Zn)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let l=this.spec.update(e,t,r);return l&&this.updateInner(e,t,r,i),l}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,r,i){this.spec.setSelection?this.spec.setSelection(e,t,r.root):super.setSelection(e,t,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function kw(n,e,t){let r=n.firstChild,i=!1;for(let l=0;l<e.length;l++){let c=e[l],d=c.dom;if(d.parentNode==n){for(;d!=r;)r=iv(r),i=!0;r=r.nextSibling}else i=!0,n.insertBefore(d,r);if(c instanceof li){let f=r?r.previousSibling:n.lastChild;kw(c.contentDOM,c.children,t),r=f?f.nextSibling:n.firstChild}}for(;r;)r=iv(r),i=!0;i&&t.trackWrites==n&&(t.trackWrites=null)}const Ml=function(n){n&&(this.nodeName=n)};Ml.prototype=Object.create(null);const Xs=[new Ml];function Tp(n,e,t){if(n.length==0)return Xs;let r=t?Xs[0]:new Ml,i=[r];for(let l=0;l<n.length;l++){let c=n[l].type.attrs;if(c){c.nodeName&&i.push(r=new Ml(c.nodeName));for(let d in c){let f=c[d];f!=null&&(t&&i.length==1&&i.push(r=new Ml(e.isInline?"span":"div")),d=="class"?r.class=(r.class?r.class+" ":"")+f:d=="style"?r.style=(r.style?r.style+";":"")+f:d!="nodeName"&&(r[d]=f))}}}return i}function jw(n,e,t,r){if(t==Xs&&r==Xs)return e;let i=e;for(let l=0;l<r.length;l++){let c=r[l],d=t[l];if(l){let f;d&&d.nodeName==c.nodeName&&i!=n&&(f=i.parentNode)&&f.nodeName.toLowerCase()==c.nodeName||(f=document.createElement(c.nodeName),f.pmIsDeco=!0,f.appendChild(i),d=Xs[0]),i=f}nA(i,d||Xs[0],c)}return i}function nA(n,e,t){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in t)&&n.removeAttribute(r);for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&t[r]!=e[r]&&n.setAttribute(r,t[r]);if(e.class!=t.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=t.class?t.class.split(" ").filter(Boolean):[];for(let l=0;l<r.length;l++)i.indexOf(r[l])==-1&&n.classList.remove(r[l]);for(let l=0;l<i.length;l++)r.indexOf(i[l])==-1&&n.classList.add(i[l]);n.classList.length==0&&n.removeAttribute("class")}if(e.style!=t.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)n.style.removeProperty(i[1])}t.style&&(n.style.cssText+=t.style)}}function Aw(n,e,t){return jw(n,n,Xs,Tp(e,t,n.nodeType!=1))}function Gc(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].type.eq(e[t].type))return!1;return!0}function iv(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class rA{constructor(e,t,r){this.lock=t,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=sA(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let r=e;r<t;r++)this.top.children[r].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,r){let i=0,l=this.stack.length>>1,c=Math.min(l,e.length);for(;i<c&&(i==l-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<l;)this.destroyRest(),this.top.dirty=On,this.index=this.stack.pop(),this.top=this.stack.pop(),l--;for(;l<e.length;){this.stack.push(this.top,this.index+1);let d=-1;for(let f=this.index;f<Math.min(this.index+3,this.top.children.length);f++){let h=this.top.children[f];if(h.matchesMark(e[l])&&!this.isLocked(h.dom)){d=f;break}}if(d>-1)d>this.index&&(this.changed=!0,this.destroyBetween(this.index,d)),this.top=this.top.children[this.index];else{let f=li.create(this.top,e[l],t,r);this.top.children.splice(this.index,0,f),this.top=f,this.changed=!0}this.index=0,l++}}findNodeMatch(e,t,r,i){let l=-1,c;if(i>=this.preMatch.index&&(c=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&c.matchesNode(e,t,r))l=this.top.children.indexOf(c,this.index);else for(let d=this.index,f=Math.min(this.top.children.length,d+5);d<f;d++){let h=this.top.children[d];if(h.matchesNode(e,t,r)&&!this.preMatch.matched.has(h)){l=d;break}}return l<0?!1:(this.destroyBetween(this.index,l),this.index++,!0)}updateNodeAt(e,t,r,i,l){let c=this.top.children[i];return c.dirty==Zn&&c.dom==c.contentDOM&&(c.dirty=Ks),c.update(e,t,r,l)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=t}}updateNextNode(e,t,r,i,l,c){for(let d=this.index;d<this.top.children.length;d++){let f=this.top.children[d];if(f instanceof ps){let h=this.preMatch.matched.get(f);if(h!=null&&h!=l)return!1;let g=f.dom,y,b=this.isLocked(g)&&!(e.isText&&f.node&&f.node.isText&&f.nodeDOM.nodeValue==e.text&&f.dirty!=Zn&&Gc(t,f.outerDeco));if(!b&&f.update(e,t,r,i))return this.destroyBetween(this.index,d),f.dom!=g&&(this.changed=!0),this.index++,!0;if(!b&&(y=this.recreateWrapper(f,e,t,r,i,c)))return this.destroyBetween(this.index,d),this.top.children[this.index]=y,y.contentDOM&&(y.dirty=Ks,y.updateChildren(i,c+1),y.dirty=On),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,r,i,l,c){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!Gc(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let d=ps.create(this.top,t,r,i,l,c);if(d.contentDOM){d.children=e.children,e.children=[];for(let f of d.children)f.parent=d}return e.destroy(),d}addNode(e,t,r,i,l){let c=ps.create(this.top,e,t,r,i,l);c.contentDOM&&c.updateChildren(i,l+1),this.top.children.splice(this.index++,0,c),this.changed=!0}placeWidget(e,t,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let l=new Cw(this.top,e,t,r);this.top.children.splice(this.index++,0,l),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof li;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof zu)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&(($t||qt)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new Ew(this.top,[],r,null);t!=this.top?t.children.push(i):t.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function sA(n,e){let t=e,r=t.children.length,i=n.childCount,l=new Map,c=[];e:for(;i>0;){let d;for(;;)if(r){let h=t.children[r-1];if(h instanceof li)t=h,r=h.children.length;else{d=h,r--;break}}else{if(t==e)break e;r=t.parent.children.indexOf(t),t=t.parent}let f=d.node;if(f){if(f!=n.child(i-1))break;--i,l.set(d,i),c.push(d)}}return{index:i,matched:l,matches:c.reverse()}}function iA(n,e){return n.type.side-e.type.side}function aA(n,e,t,r){let i=e.locals(n),l=0;if(i.length==0){for(let h=0;h<n.childCount;h++){let g=n.child(h);r(g,i,e.forChild(l,g),h),l+=g.nodeSize}return}let c=0,d=[],f=null;for(let h=0;;){let g,y;for(;c<i.length&&i[c].to==l;){let C=i[c++];C.widget&&(g?(y||(y=[g])).push(C):g=C)}if(g)if(y){y.sort(iA);for(let C=0;C<y.length;C++)t(y[C],h,!!f)}else t(g,h,!!f);let b,v;if(f)v=-1,b=f,f=null;else if(h<n.childCount)v=h,b=n.child(h++);else break;for(let C=0;C<d.length;C++)d[C].to<=l&&d.splice(C--,1);for(;c<i.length&&i[c].from<=l&&i[c].to>l;)d.push(i[c++]);let w=l+b.nodeSize;if(b.isText){let C=w;c<i.length&&i[c].from<C&&(C=i[c].from);for(let j=0;j<d.length;j++)d[j].to<C&&(C=d[j].to);C<w&&(f=b.cut(C-l),b=b.cut(0,C-l),w=C,v=-1)}else for(;c<i.length&&i[c].to<w;)c++;let N=b.isInline&&!b.isLeaf?d.filter(C=>!C.inline):d.slice();r(b,N,e.forChild(l,b),v),l=w}}function lA(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let e=n.style.cssText;n.style.cssText=e+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=e}}function oA(n,e,t,r){for(let i=0,l=0;i<n.childCount&&l<=r;){let c=n.child(i++),d=l;if(l+=c.nodeSize,!c.isText)continue;let f=c.text;for(;i<n.childCount;){let h=n.child(i++);if(l+=h.nodeSize,!h.isText)break;f+=h.text}if(l>=t){if(l>=r&&f.slice(r-e.length-d,r-d)==e)return r-e.length;let h=d<r?f.lastIndexOf(e,r-d-1):-1;if(h>=0&&h+e.length+d>=t)return d+h;if(t==r&&f.length>=r+e.length-d&&f.slice(r-d,r-d+e.length)==e)return r}}return-1}function Mp(n,e,t,r,i){let l=[];for(let c=0,d=0;c<n.length;c++){let f=n[c],h=d,g=d+=f.size;h>=t||g<=e?l.push(f):(h<e&&l.push(f.slice(0,e-h,r)),i&&(l.push(i),i=void 0),g>t&&l.push(f.slice(t-h,f.size,r)))}return l}function pm(n,e=null){let t=n.domSelectionRange(),r=n.state.doc;if(!t.focusNode)return null;let i=n.docView.nearestDesc(t.focusNode),l=i&&i.size==0,c=n.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(c<0)return null;let d=r.resolve(c),f,h;if(_u(t)){for(f=c;i&&!i.node;)i=i.parent;let y=i.node;if(i&&y.isAtom&&me.isSelectable(y)&&i.parent&&!(y.isInline&&Lj(t.focusNode,t.focusOffset,i.dom))){let b=i.posBefore;h=new me(c==b?d:r.resolve(b))}}else{if(t instanceof n.dom.ownerDocument.defaultView.Selection&&t.rangeCount>1){let y=c,b=c;for(let v=0;v<t.rangeCount;v++){let w=t.getRangeAt(v);y=Math.min(y,n.docView.posFromDOM(w.startContainer,w.startOffset,1)),b=Math.max(b,n.docView.posFromDOM(w.endContainer,w.endOffset,-1))}if(y<0)return null;[f,c]=b==n.state.selection.anchor?[b,y]:[y,b],d=r.resolve(c)}else f=n.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(f<0)return null}let g=r.resolve(f);if(!h){let y=e=="pointer"||n.state.selection.head<d.pos&&!l?1:-1;h=mm(n,g,d,y)}return h}function Tw(n){return n.editable?n.hasFocus():Ow(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function Nr(n,e=!1){let t=n.state.selection;if(Mw(n,t),!!Tw(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&qt){let r=n.domSelectionRange(),i=n.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&ai(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)uA(n);else{let{anchor:r,head:i}=t,l,c;av&&!(t instanceof ve)&&(t.$from.parent.inlineContent||(l=lv(n,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(c=lv(n,t.to))),n.docView.setSelection(r,i,n,e),av&&(l&&ov(l),c&&ov(c)),t.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&cA(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const av=$t||qt&&yw<63;function lv(n,e){let{node:t,offset:r}=n.docView.domFromPos(e,0),i=r<t.childNodes.length?t.childNodes[r]:null,l=r?t.childNodes[r-1]:null;if($t&&i&&i.contentEditable=="false")return Jh(i);if((!i||i.contentEditable=="false")&&(!l||l.contentEditable=="false")){if(i)return Jh(i);if(l)return Jh(l)}}function Jh(n){return n.contentEditable="true",$t&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function ov(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function cA(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let t=n.domSelectionRange(),r=t.anchorNode,i=t.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(t.anchorNode!=r||t.anchorOffset!=i)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!Tw(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function uA(n){let e=n.domSelection(),t=document.createRange();if(!e)return;let r=n.cursorWrapper.dom,i=r.nodeName=="IMG";i?t.setStart(r.parentNode,Dt(r)+1):t.setStart(r,0),t.collapse(!0),e.removeAllRanges(),e.addRange(t),!i&&!n.state.selection.visible&&rn&&hs<=11&&(r.disabled=!0,r.disabled=!1)}function Mw(n,e){if(e instanceof me){let t=n.docView.descAt(e.from);t!=n.lastSelectedViewDesc&&(cv(n),t&&t.selectNode(),n.lastSelectedViewDesc=t)}else cv(n)}function cv(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function mm(n,e,t,r){return n.someProp("createSelectionBetween",i=>i(n,e,t))||ve.between(e,t,r)}function uv(n){return n.editable&&!n.hasFocus()?!1:Ow(n)}function Ow(n){let e=n.domSelectionRange();if(!e.anchorNode)return!1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function dA(n){let e=n.docView.domFromPos(n.state.selection.anchor,0),t=n.domSelectionRange();return ai(e.node,e.offset,t.anchorNode,t.anchorOffset)}function Op(n,e){let{$anchor:t,$head:r}=n.selection,i=e>0?t.max(r):t.min(r),l=i.parent.inlineContent?i.depth?n.doc.resolve(e>0?i.after():i.before()):null:i;return l&&Ce.findFrom(l,e)}function ns(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function dv(n,e,t){let r=n.state.selection;if(r instanceof ve)if(t.indexOf("s")>-1){let{$head:i}=r,l=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!l||l.isText||!l.isLeaf)return!1;let c=n.state.doc.resolve(i.pos+l.nodeSize*(e<0?-1:1));return ns(n,new ve(r.$anchor,c))}else if(r.empty){if(n.endOfTextblock(e>0?"forward":"backward")){let i=Op(n.state,e);return i&&i instanceof me?ns(n,i):!1}else if(!(An&&t.indexOf("m")>-1)){let i=r.$head,l=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,c;if(!l||l.isText)return!1;let d=e<0?i.pos-l.nodeSize:i.pos;return l.isAtom||(c=n.docView.descAt(d))&&!c.contentDOM?me.isSelectable(l)?ns(n,new me(e<0?n.state.doc.resolve(i.pos-l.nodeSize):i)):ro?ns(n,new ve(n.state.doc.resolve(e<0?d:d+l.nodeSize))):!1:!1}}else return!1;else{if(r instanceof me&&r.node.isInline)return ns(n,new ve(e>0?r.$to:r.$from));{let i=Op(n.state,e);return i?ns(n,i):!1}}}function Yc(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function Ol(n,e){let t=n.pmViewDesc;return t&&t.size==0&&(e<0||n.nextSibling||n.nodeName!="BR")}function Qi(n,e){return e<0?fA(n):hA(n)}function fA(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i,l,c=!1;for(Hn&&t.nodeType==1&&r<Yc(t)&&Ol(t.childNodes[r],-1)&&(c=!0);;)if(r>0){if(t.nodeType!=1)break;{let d=t.childNodes[r-1];if(Ol(d,-1))i=t,l=--r;else if(d.nodeType==3)t=d,r=t.nodeValue.length;else break}}else{if(Rw(t))break;{let d=t.previousSibling;for(;d&&Ol(d,-1);)i=t.parentNode,l=Dt(d),d=d.previousSibling;if(d)t=d,r=Yc(t);else{if(t=t.parentNode,t==n.dom)break;r=0}}}c?Rp(n,t,r):i&&Rp(n,i,l)}function hA(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i=Yc(t),l,c;for(;;)if(r<i){if(t.nodeType!=1)break;let d=t.childNodes[r];if(Ol(d,1))l=t,c=++r;else break}else{if(Rw(t))break;{let d=t.nextSibling;for(;d&&Ol(d,1);)l=d.parentNode,c=Dt(d)+1,d=d.nextSibling;if(d)t=d,r=0,i=Yc(t);else{if(t=t.parentNode,t==n.dom)break;r=i=0}}}l&&Rp(n,l,c)}function Rw(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function pA(n,e){for(;n&&e==n.childNodes.length&&!no(n);)e=Dt(n)+1,n=n.parentNode;for(;n&&e<n.childNodes.length;){let t=n.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=0}}function mA(n,e){for(;n&&!e&&!no(n);)e=Dt(n),n=n.parentNode;for(;n&&e;){let t=n.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=n.childNodes.length}}function Rp(n,e,t){if(e.nodeType!=3){let l,c;(c=pA(e,t))?(e=c,t=0):(l=mA(e,t))&&(e=l,t=l.nodeValue.length)}let r=n.domSelection();if(!r)return;if(_u(r)){let l=document.createRange();l.setEnd(e,t),l.setStart(e,t),r.removeAllRanges(),r.addRange(l)}else r.extend&&r.extend(e,t);n.domObserver.setCurSelection();let{state:i}=n;setTimeout(()=>{n.state==i&&Nr(n)},50)}function fv(n,e){let t=n.state.doc.resolve(e);if(!(qt||Bj)&&t.parent.inlineContent){let i=n.coordsAtPos(e);if(e>t.start()){let l=n.coordsAtPos(e-1),c=(l.top+l.bottom)/2;if(c>i.top&&c<i.bottom&&Math.abs(l.left-i.left)>1)return l.left<i.left?"ltr":"rtl"}if(e<t.end()){let l=n.coordsAtPos(e+1),c=(l.top+l.bottom)/2;if(c>i.top&&c<i.bottom&&Math.abs(l.left-i.left)>1)return l.left>i.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function hv(n,e,t){let r=n.state.selection;if(r instanceof ve&&!r.empty||t.indexOf("s")>-1||An&&t.indexOf("m")>-1)return!1;let{$from:i,$to:l}=r;if(!i.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let c=Op(n.state,e);if(c&&c instanceof me)return ns(n,c)}if(!i.parent.inlineContent){let c=e<0?i:l,d=r instanceof hn?Ce.near(c,e):Ce.findFrom(c,e);return d?ns(n,d):!1}return!1}function pv(n,e){if(!(n.state.selection instanceof ve))return!0;let{$head:t,$anchor:r,empty:i}=n.state.selection;if(!t.sameParent(r))return!0;if(!i)return!1;if(n.endOfTextblock(e>0?"forward":"backward"))return!0;let l=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(l&&!l.isText){let c=n.state.tr;return e<0?c.delete(t.pos-l.nodeSize,t.pos):c.delete(t.pos,t.pos+l.nodeSize),n.dispatch(c),!0}return!1}function mv(n,e,t){n.domObserver.stop(),e.contentEditable=t,n.domObserver.start()}function gA(n){if(!$t||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;mv(n,r,"true"),setTimeout(()=>mv(n,r,"false"),20)}return!1}function yA(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}function xA(n,e){let t=e.keyCode,r=yA(e);if(t==8||An&&t==72&&r=="c")return pv(n,-1)||Qi(n,-1);if(t==46&&!e.shiftKey||An&&t==68&&r=="c")return pv(n,1)||Qi(n,1);if(t==13||t==27)return!0;if(t==37||An&&t==66&&r=="c"){let i=t==37?fv(n,n.state.selection.from)=="ltr"?-1:1:-1;return dv(n,i,r)||Qi(n,i)}else if(t==39||An&&t==70&&r=="c"){let i=t==39?fv(n,n.state.selection.from)=="ltr"?1:-1:1;return dv(n,i,r)||Qi(n,i)}else{if(t==38||An&&t==80&&r=="c")return hv(n,-1,r)||Qi(n,-1);if(t==40||An&&t==78&&r=="c")return gA(n)||hv(n,1,r)||Qi(n,1);if(r==(An?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function gm(n,e){n.someProp("transformCopied",v=>{e=v(e,n)});let t=[],{content:r,openStart:i,openEnd:l}=e;for(;i>1&&l>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,l--;let v=r.firstChild;t.push(v.type.name,v.attrs!=v.type.defaultAttrs?v.attrs:null),r=v.content}let c=n.someProp("clipboardSerializer")||ci.fromSchema(n.state.schema),d=Pw(),f=d.createElement("div");f.appendChild(c.serializeFragment(r,{document:d}));let h=f.firstChild,g,y=0;for(;h&&h.nodeType==1&&(g=Bw[h.nodeName.toLowerCase()]);){for(let v=g.length-1;v>=0;v--){let w=d.createElement(g[v]);for(;f.firstChild;)w.appendChild(f.firstChild);f.appendChild(w),y++}h=f.firstChild}h&&h.nodeType==1&&h.setAttribute("data-pm-slice",`${i} ${l}${y?` -${y}`:""} ${JSON.stringify(t)}`);let b=n.someProp("clipboardTextSerializer",v=>v(e,n))||e.content.textBetween(0,e.content.size,`

`);return{dom:f,text:b,slice:e}}function Dw(n,e,t,r,i){let l=i.parent.type.spec.code,c,d;if(!t&&!e)return null;let f=e&&(r||l||!t);if(f){if(n.someProp("transformPastedText",b=>{e=b(e,l||r,n)}),l)return e?new ae(W.from(n.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):ae.empty;let y=n.someProp("clipboardTextParser",b=>b(e,i,r,n));if(y)d=y;else{let b=i.marks(),{schema:v}=n.state,w=ci.fromSchema(v);c=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(N=>{let C=c.appendChild(document.createElement("p"));N&&C.appendChild(w.serializeNode(v.text(N,b)))})}}else n.someProp("transformPastedHTML",y=>{t=y(t,n)}),c=SA(t),ro&&NA(c);let h=c&&c.querySelector("[data-pm-slice]"),g=h&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(h.getAttribute("data-pm-slice")||"");if(g&&g[3])for(let y=+g[3];y>0;y--){let b=c.firstChild;for(;b&&b.nodeType!=1;)b=b.nextSibling;if(!b)break;c=b}if(d||(d=(n.someProp("clipboardParser")||n.someProp("domParser")||fs.fromSchema(n.state.schema)).parseSlice(c,{preserveWhitespace:!!(f||g),context:i,ruleFromNode(b){return b.nodeName=="BR"&&!b.nextSibling&&b.parentNode&&!bA.test(b.parentNode.nodeName)?{ignore:!0}:null}})),g)d=CA(gv(d,+g[1],+g[2]),g[4]);else if(d=ae.maxOpen(vA(d.content,i),!0),d.openStart||d.openEnd){let y=0,b=0;for(let v=d.content.firstChild;y<d.openStart&&!v.type.spec.isolating;y++,v=v.firstChild);for(let v=d.content.lastChild;b<d.openEnd&&!v.type.spec.isolating;b++,v=v.lastChild);d=gv(d,y,b)}return n.someProp("transformPasted",y=>{d=y(d,n)}),d}const bA=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function vA(n,e){if(n.childCount<2)return n;for(let t=e.depth;t>=0;t--){let i=e.node(t).contentMatchAt(e.index(t)),l,c=[];if(n.forEach(d=>{if(!c)return;let f=i.findWrapping(d.type),h;if(!f)return c=null;if(h=c.length&&l.length&&_w(f,l,d,c[c.length-1],0))c[c.length-1]=h;else{c.length&&(c[c.length-1]=zw(c[c.length-1],l.length));let g=Lw(d,f);c.push(g),i=i.matchType(g.type),l=f}}),c)return W.from(c)}return n}function Lw(n,e,t=0){for(let r=e.length-1;r>=t;r--)n=e[r].create(null,W.from(n));return n}function _w(n,e,t,r,i){if(i<n.length&&i<e.length&&n[i]==e[i]){let l=_w(n,e,t,r.lastChild,i+1);if(l)return r.copy(r.content.replaceChild(r.childCount-1,l));if(r.contentMatchAt(r.childCount).matchType(i==n.length-1?t.type:n[i+1]))return r.copy(r.content.append(W.from(Lw(t,n,i+1))))}}function zw(n,e){if(e==0)return n;let t=n.content.replaceChild(n.childCount-1,zw(n.lastChild,e-1)),r=n.contentMatchAt(n.childCount).fillBefore(W.empty,!0);return n.copy(t.append(r))}function Dp(n,e,t,r,i,l){let c=e<0?n.firstChild:n.lastChild,d=c.content;return n.childCount>1&&(l=0),i<r-1&&(d=Dp(d,e,t,r,i+1,l)),i>=t&&(d=e<0?c.contentMatchAt(0).fillBefore(d,l<=i).append(d):d.append(c.contentMatchAt(c.childCount).fillBefore(W.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,c.copy(d))}function gv(n,e,t){return e<n.openStart&&(n=new ae(Dp(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),t<n.openEnd&&(n=new ae(Dp(n.content,1,t,n.openEnd,0,0),n.openStart,t)),n}const Bw={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let yv=null;function Pw(){return yv||(yv=document.implementation.createHTMLDocument("title"))}let Qh=null;function wA(n){let e=window.trustedTypes;return e?(Qh||(Qh=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:t=>t})),Qh.createHTML(n)):n}function SA(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let t=Pw().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(n),i;if((i=r&&Bw[r[1].toLowerCase()])&&(n=i.map(l=>"<"+l+">").join("")+n+i.map(l=>"</"+l+">").reverse().join("")),t.innerHTML=wA(n),i)for(let l=0;l<i.length;l++)t=t.querySelector(i[l])||t;return t}function NA(n){let e=n.querySelectorAll(qt?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let r=e[t];r.childNodes.length==1&&r.textContent==" "&&r.parentNode&&r.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),r)}}function CA(n,e){if(!n.size)return n;let t=n.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return n}let{content:i,openStart:l,openEnd:c}=n;for(let d=r.length-2;d>=0;d-=2){let f=t.nodes[r[d]];if(!f||f.hasRequiredAttrs())break;i=W.from(f.create(r[d+1],i)),l++,c++}return new ae(i,l,c)}const Gt={},Yt={},EA={touchstart:!0,touchmove:!0};class kA{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function jA(n){for(let e in Gt){let t=Gt[e];n.dom.addEventListener(e,n.input.eventHandlers[e]=r=>{TA(n,r)&&!ym(n,r)&&(n.editable||!(r.type in Yt))&&t(n,r)},EA[e]?{passive:!0}:void 0)}$t&&n.dom.addEventListener("input",()=>null),Lp(n)}function us(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now()}function AA(n){n.domObserver.stop();for(let e in n.input.eventHandlers)n.dom.removeEventListener(e,n.input.eventHandlers[e]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function Lp(n){n.someProp("handleDOMEvents",e=>{for(let t in e)n.input.eventHandlers[t]||n.dom.addEventListener(t,n.input.eventHandlers[t]=r=>ym(n,r))})}function ym(n,e){return n.someProp("handleDOMEvents",t=>{let r=t[e.type];return r?r(n,e)||e.defaultPrevented:!1})}function TA(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=n.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function MA(n,e){!ym(n,e)&&Gt[e.type]&&(n.editable||!(e.type in Yt))&&Gt[e.type](n,e)}Yt.keydown=(n,e)=>{let t=e;if(n.input.shiftKey=t.keyCode==16||t.shiftKey,!Uw(n,t)&&(n.input.lastKeyCode=t.keyCode,n.input.lastKeyCodeTime=Date.now(),!(vr&&qt&&t.keyCode==13)))if(t.keyCode!=229&&n.domObserver.forceFlush(),da&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let r=Date.now();n.input.lastIOSEnter=r,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==r&&(n.someProp("handleKeyDown",i=>i(n,Gs(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",r=>r(n,t))||xA(n,t)?t.preventDefault():us(n,"key")};Yt.keyup=(n,e)=>{e.keyCode==16&&(n.input.shiftKey=!1)};Yt.keypress=(n,e)=>{let t=e;if(Uw(n,t)||!t.charCode||t.ctrlKey&&!t.altKey||An&&t.metaKey)return;if(n.someProp("handleKeyPress",i=>i(n,t))){t.preventDefault();return}let r=n.state.selection;if(!(r instanceof ve)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(t.charCode),l=()=>n.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!n.someProp("handleTextInput",c=>c(n,r.$from.pos,r.$to.pos,i,l))&&n.dispatch(l()),t.preventDefault()}};function Bu(n){return{left:n.clientX,top:n.clientY}}function OA(n,e){let t=e.x-n.clientX,r=e.y-n.clientY;return t*t+r*r<100}function xm(n,e,t,r,i){if(r==-1)return!1;let l=n.state.doc.resolve(r);for(let c=l.depth+1;c>0;c--)if(n.someProp(e,d=>c>l.depth?d(n,t,l.nodeAfter,l.before(c),i,!0):d(n,t,l.node(c),l.before(c),i,!1)))return!0;return!1}function la(n,e,t){if(n.focused||n.focus(),n.state.selection.eq(e))return;let r=n.state.tr.setSelection(e);r.setMeta("pointer",!0),n.dispatch(r)}function RA(n,e){if(e==-1)return!1;let t=n.state.doc.resolve(e),r=t.nodeAfter;return r&&r.isAtom&&me.isSelectable(r)?(la(n,new me(t)),!0):!1}function DA(n,e){if(e==-1)return!1;let t=n.state.selection,r,i;t instanceof me&&(r=t.node);let l=n.state.doc.resolve(e);for(let c=l.depth+1;c>0;c--){let d=c>l.depth?l.nodeAfter:l.node(c);if(me.isSelectable(d)){r&&t.$from.depth>0&&c>=t.$from.depth&&l.before(t.$from.depth+1)==t.$from.pos?i=l.before(t.$from.depth):i=l.before(c);break}}return i!=null?(la(n,me.create(n.state.doc,i)),!0):!1}function LA(n,e,t,r,i){return xm(n,"handleClickOn",e,t,r)||n.someProp("handleClick",l=>l(n,e,r))||(i?DA(n,t):RA(n,t))}function _A(n,e,t,r){return xm(n,"handleDoubleClickOn",e,t,r)||n.someProp("handleDoubleClick",i=>i(n,e,r))}function zA(n,e,t,r){return xm(n,"handleTripleClickOn",e,t,r)||n.someProp("handleTripleClick",i=>i(n,e,r))||BA(n,t,r)}function BA(n,e,t){if(t.button!=0)return!1;let r=n.state.doc;if(e==-1)return r.inlineContent?(la(n,ve.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let l=i.depth+1;l>0;l--){let c=l>i.depth?i.nodeAfter:i.node(l),d=i.before(l);if(c.inlineContent)la(n,ve.create(r,d+1,d+1+c.content.size));else if(me.isSelectable(c))la(n,me.create(r,d));else continue;return!0}}function bm(n){return Kc(n)}const Hw=An?"metaKey":"ctrlKey";Gt.mousedown=(n,e)=>{let t=e;n.input.shiftKey=t.shiftKey;let r=bm(n),i=Date.now(),l="singleClick";i-n.input.lastClick.time<500&&OA(t,n.input.lastClick)&&!t[Hw]&&n.input.lastClick.button==t.button&&(n.input.lastClick.type=="singleClick"?l="doubleClick":n.input.lastClick.type=="doubleClick"&&(l="tripleClick")),n.input.lastClick={time:i,x:t.clientX,y:t.clientY,type:l,button:t.button};let c=n.posAtCoords(Bu(t));c&&(l=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new PA(n,c,t,!!r)):(l=="doubleClick"?_A:zA)(n,c.pos,c.inside,t)?t.preventDefault():us(n,"pointer"))};class PA{constructor(e,t,r,i){this.view=e,this.pos=t,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[Hw],this.allowDefault=r.shiftKey;let l,c;if(t.inside>-1)l=e.state.doc.nodeAt(t.inside),c=t.inside;else{let g=e.state.doc.resolve(t.pos);l=g.parent,c=g.depth?g.before():0}const d=i?null:r.target,f=d?e.docView.nearestDesc(d,!0):null;this.target=f&&f.dom.nodeType==1?f.dom:null;let{selection:h}=e.state;(r.button==0&&l.type.spec.draggable&&l.type.spec.selectable!==!1||h instanceof me&&h.from<=c&&h.to>c)&&(this.mightDrag={node:l,pos:c,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Hn&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),us(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Nr(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(Bu(e))),this.updateAllowDefault(e),this.allowDefault||!t?us(this.view,"pointer"):LA(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||$t&&this.mightDrag&&!this.mightDrag.node.isAtom||qt&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(la(this.view,Ce.near(this.view.state.doc.resolve(t.pos))),e.preventDefault()):us(this.view,"pointer")}move(e){this.updateAllowDefault(e),us(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Gt.touchstart=n=>{n.input.lastTouch=Date.now(),bm(n),us(n,"pointer")};Gt.touchmove=n=>{n.input.lastTouch=Date.now(),us(n,"pointer")};Gt.contextmenu=n=>bm(n);function Uw(n,e){return n.composing?!0:$t&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const HA=vr?5e3:-1;Yt.compositionstart=Yt.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,t=e.selection.$to;if(e.selection instanceof ve&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))n.markCursor=n.state.storedMarks||t.marks(),Kc(n,!0),n.markCursor=null;else if(Kc(n,!e.selection.empty),Hn&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let r=n.domSelectionRange();for(let i=r.focusNode,l=r.focusOffset;i&&i.nodeType==1&&l!=0;){let c=l<0?i.lastChild:i.childNodes[l-1];if(!c)break;if(c.nodeType==3){let d=n.domSelection();d&&d.collapse(c,c.nodeValue.length);break}else i=c,l=-1}}n.input.composing=!0}Iw(n,HA)};Yt.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,n.input.compositionPendingChanges=n.domObserver.pendingRecords().length?n.input.compositionID:0,n.input.compositionNode=null,n.input.compositionPendingChanges&&Promise.resolve().then(()=>n.domObserver.flush()),n.input.compositionID++,Iw(n,20))};function Iw(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>Kc(n),e))}function qw(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=IA());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function UA(n){let e=n.domSelectionRange();if(!e.focusNode)return null;let t=Rj(e.focusNode,e.focusOffset),r=Dj(e.focusNode,e.focusOffset);if(t&&r&&t!=r){let i=r.pmViewDesc,l=n.domObserver.lastChangedTextNode;if(t==l||r==l)return l;if(!i||!i.isText(r.nodeValue))return r;if(n.input.compositionNode==r){let c=t.pmViewDesc;if(!(!c||!c.isText(t.nodeValue)))return r}}return t||r}function IA(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function Kc(n,e=!1){if(!(vr&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),qw(n),e||n.docView&&n.docView.dirty){let t=pm(n),r=n.state.selection;return t&&!t.eq(r)?n.dispatch(n.state.tr.setSelection(t)):(n.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?n.dispatch(n.state.tr.deleteSelection()):n.updateState(n.state),!0}return!1}}function qA(n,e){if(!n.dom.parentNode)return;let t=n.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),n.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),n.focus()},50)}const $l=rn&&hs<15||da&&Pj<604;Gt.copy=Yt.cut=(n,e)=>{let t=e,r=n.state.selection,i=t.type=="cut";if(r.empty)return;let l=$l?null:t.clipboardData,c=r.content(),{dom:d,text:f}=gm(n,c);l?(t.preventDefault(),l.clearData(),l.setData("text/html",d.innerHTML),l.setData("text/plain",f)):qA(n,d),i&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function VA(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function FA(n,e){if(!n.dom.parentNode)return;let t=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,r=n.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),r.parentNode&&r.parentNode.removeChild(r),t?Gl(n,r.value,null,i,e):Gl(n,r.textContent,r.innerHTML,i,e)},50)}function Gl(n,e,t,r,i){let l=Dw(n,e,t,r,n.state.selection.$from);if(n.someProp("handlePaste",f=>f(n,i,l||ae.empty)))return!0;if(!l)return!1;let c=VA(l),d=c?n.state.tr.replaceSelectionWith(c,r):n.state.tr.replaceSelection(l);return n.dispatch(d.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function Vw(n){let e=n.getData("text/plain")||n.getData("Text");if(e)return e;let t=n.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}Yt.paste=(n,e)=>{let t=e;if(n.composing&&!vr)return;let r=$l?null:t.clipboardData,i=n.input.shiftKey&&n.input.lastKeyCode!=45;r&&Gl(n,Vw(r),r.getData("text/html"),i,t)?t.preventDefault():FA(n,t)};class Fw{constructor(e,t,r){this.slice=e,this.move=t,this.node=r}}const $A=An?"altKey":"ctrlKey";function $w(n,e){let t=n.someProp("dragCopies",r=>!r(e));return t??!e[$A]}Gt.dragstart=(n,e)=>{let t=e,r=n.input.mouseDown;if(r&&r.done(),!t.dataTransfer)return;let i=n.state.selection,l=i.empty?null:n.posAtCoords(Bu(t)),c;if(!(l&&l.pos>=i.from&&l.pos<=(i instanceof me?i.to-1:i.to))){if(r&&r.mightDrag)c=me.create(n.state.doc,r.mightDrag.pos);else if(t.target&&t.target.nodeType==1){let y=n.docView.nearestDesc(t.target,!0);y&&y.node.type.spec.draggable&&y!=n.docView&&(c=me.create(n.state.doc,y.posBefore))}}let d=(c||n.state.selection).content(),{dom:f,text:h,slice:g}=gm(n,d);(!t.dataTransfer.files.length||!qt||yw>120)&&t.dataTransfer.clearData(),t.dataTransfer.setData($l?"Text":"text/html",f.innerHTML),t.dataTransfer.effectAllowed="copyMove",$l||t.dataTransfer.setData("text/plain",h),n.dragging=new Fw(g,$w(n,t),c)};Gt.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null)},50)};Yt.dragover=Yt.dragenter=(n,e)=>e.preventDefault();Yt.drop=(n,e)=>{let t=e,r=n.dragging;if(n.dragging=null,!t.dataTransfer)return;let i=n.posAtCoords(Bu(t));if(!i)return;let l=n.state.doc.resolve(i.pos),c=r&&r.slice;c?n.someProp("transformPasted",w=>{c=w(c,n)}):c=Dw(n,Vw(t.dataTransfer),$l?null:t.dataTransfer.getData("text/html"),!1,l);let d=!!(r&&$w(n,t));if(n.someProp("handleDrop",w=>w(n,t,c||ae.empty,d))){t.preventDefault();return}if(!c)return;t.preventDefault();let f=c?ow(n.state.doc,l.pos,c):l.pos;f==null&&(f=l.pos);let h=n.state.tr;if(d){let{node:w}=r;w?w.replace(h):h.deleteSelection()}let g=h.mapping.map(f),y=c.openStart==0&&c.openEnd==0&&c.content.childCount==1,b=h.doc;if(y?h.replaceRangeWith(g,g,c.content.firstChild):h.replaceRange(g,g,c),h.doc.eq(b))return;let v=h.doc.resolve(g);if(y&&me.isSelectable(c.content.firstChild)&&v.nodeAfter&&v.nodeAfter.sameMarkup(c.content.firstChild))h.setSelection(new me(v));else{let w=h.mapping.map(f);h.mapping.maps[h.mapping.maps.length-1].forEach((N,C,j,O)=>w=O),h.setSelection(mm(n,v,h.doc.resolve(w)))}n.focus(),n.dispatch(h.setMeta("uiEvent","drop"))};Gt.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&Nr(n)},20))};Gt.blur=(n,e)=>{let t=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),t.relatedTarget&&n.dom.contains(t.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};Gt.beforeinput=(n,e)=>{if(qt&&vr&&e.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:r}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=r||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",l=>l(n,Gs(8,"Backspace")))))return;let{$cursor:i}=n.state.selection;i&&i.pos>0&&n.dispatch(n.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let n in Yt)Gt[n]=Yt[n];function Yl(n,e){if(n==e)return!0;for(let t in n)if(n[t]!==e[t])return!1;for(let t in e)if(!(t in n))return!1;return!0}class Xc{constructor(e,t){this.toDOM=e,this.spec=t||ti,this.side=this.spec.side||0}map(e,t,r,i){let{pos:l,deleted:c}=e.mapResult(t.from+i,this.side<0?-1:1);return c?null:new Mn(l-r,l-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Xc&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Yl(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class ms{constructor(e,t){this.attrs=e,this.spec=t||ti}map(e,t,r,i){let l=e.map(t.from+i,this.spec.inclusiveStart?-1:1)-r,c=e.map(t.to+i,this.spec.inclusiveEnd?1:-1)-r;return l>=c?null:new Mn(l,c,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof ms&&Yl(this.attrs,e.attrs)&&Yl(this.spec,e.spec)}static is(e){return e.type instanceof ms}destroy(){}}class vm{constructor(e,t){this.attrs=e,this.spec=t||ti}map(e,t,r,i){let l=e.mapResult(t.from+i,1);if(l.deleted)return null;let c=e.mapResult(t.to+i,-1);return c.deleted||c.pos<=l.pos?null:new Mn(l.pos-r,c.pos-r,this)}valid(e,t){let{index:r,offset:i}=e.content.findIndex(t.from),l;return i==t.from&&!(l=e.child(r)).isText&&i+l.nodeSize==t.to}eq(e){return this==e||e instanceof vm&&Yl(this.attrs,e.attrs)&&Yl(this.spec,e.spec)}destroy(){}}class Mn{constructor(e,t,r){this.from=e,this.to=t,this.type=r}copy(e,t){return new Mn(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,r){return this.type.map(e,this,t,r)}static widget(e,t,r){return new Mn(e,e,new Xc(t,r))}static inline(e,t,r,i){return new Mn(e,t,new ms(r,i))}static node(e,t,r,i){return new Mn(e,t,new vm(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof ms}get widget(){return this.type instanceof Xc}}const na=[],ti={};class mt{constructor(e,t){this.local=e.length?e:na,this.children=t.length?t:na}static create(e,t){return t.length?Jc(t,e,0,ti):It}find(e,t,r){let i=[];return this.findInner(e??0,t??1e9,i,0,r),i}findInner(e,t,r,i,l){for(let c=0;c<this.local.length;c++){let d=this.local[c];d.from<=t&&d.to>=e&&(!l||l(d.spec))&&r.push(d.copy(d.from+i,d.to+i))}for(let c=0;c<this.children.length;c+=3)if(this.children[c]<t&&this.children[c+1]>e){let d=this.children[c]+1;this.children[c+2].findInner(e-d,t-d,r,i+d,l)}}map(e,t,r){return this==It||e.maps.length==0?this:this.mapInner(e,t,0,0,r||ti)}mapInner(e,t,r,i,l){let c;for(let d=0;d<this.local.length;d++){let f=this.local[d].map(e,r,i);f&&f.type.valid(t,f)?(c||(c=[])).push(f):l.onRemove&&l.onRemove(this.local[d].spec)}return this.children.length?GA(this.children,c||[],e,t,r,i,l):c?new mt(c.sort(ni),na):It}add(e,t){return t.length?this==It?mt.create(e,t):this.addInner(e,t,0):this}addInner(e,t,r){let i,l=0;e.forEach((d,f)=>{let h=f+r,g;if(g=Yw(t,d,h)){for(i||(i=this.children.slice());l<i.length&&i[l]<f;)l+=3;i[l]==f?i[l+2]=i[l+2].addInner(d,g,h+1):i.splice(l,0,f,f+d.nodeSize,Jc(g,d,h+1,ti)),l+=3}});let c=Gw(l?Kw(t):t,-r);for(let d=0;d<c.length;d++)c[d].type.valid(e,c[d])||c.splice(d--,1);return new mt(c.length?this.local.concat(c).sort(ni):this.local,i||this.children)}remove(e){return e.length==0||this==It?this:this.removeInner(e,0)}removeInner(e,t){let r=this.children,i=this.local;for(let l=0;l<r.length;l+=3){let c,d=r[l]+t,f=r[l+1]+t;for(let g=0,y;g<e.length;g++)(y=e[g])&&y.from>d&&y.to<f&&(e[g]=null,(c||(c=[])).push(y));if(!c)continue;r==this.children&&(r=this.children.slice());let h=r[l+2].removeInner(c,d+1);h!=It?r[l+2]=h:(r.splice(l,3),l-=3)}if(i.length){for(let l=0,c;l<e.length;l++)if(c=e[l])for(let d=0;d<i.length;d++)i[d].eq(c,t)&&(i==this.local&&(i=this.local.slice()),i.splice(d--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new mt(i,r):It}forChild(e,t){if(this==It)return this;if(t.isLeaf)return mt.empty;let r,i;for(let d=0;d<this.children.length;d+=3)if(this.children[d]>=e){this.children[d]==e&&(r=this.children[d+2]);break}let l=e+1,c=l+t.content.size;for(let d=0;d<this.local.length;d++){let f=this.local[d];if(f.from<c&&f.to>l&&f.type instanceof ms){let h=Math.max(l,f.from)-l,g=Math.min(c,f.to)-l;h<g&&(i||(i=[])).push(f.copy(h,g))}}if(i){let d=new mt(i.sort(ni),na);return r?new is([d,r]):d}return r||It}eq(e){if(this==e)return!0;if(!(e instanceof mt)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return wm(this.localsInner(e))}localsInner(e){if(this==It)return na;if(e.inlineContent||!this.local.some(ms.is))return this.local;let t=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof ms||t.push(this.local[r]);return t}forEachSet(e){e(this)}}mt.empty=new mt([],[]);mt.removeOverlap=wm;const It=mt.empty;class is{constructor(e){this.members=e}map(e,t){const r=this.members.map(i=>i.map(e,t,ti));return is.from(r)}forChild(e,t){if(t.isLeaf)return mt.empty;let r=[];for(let i=0;i<this.members.length;i++){let l=this.members[i].forChild(e,t);l!=It&&(l instanceof is?r=r.concat(l.members):r.push(l))}return is.from(r)}eq(e){if(!(e instanceof is)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,r=!0;for(let i=0;i<this.members.length;i++){let l=this.members[i].localsInner(e);if(l.length)if(!t)t=l;else{r&&(t=t.slice(),r=!1);for(let c=0;c<l.length;c++)t.push(l[c])}}return t?wm(r?t:t.sort(ni)):na}static from(e){switch(e.length){case 0:return It;case 1:return e[0];default:return new is(e.every(t=>t instanceof mt)?e:e.reduce((t,r)=>t.concat(r instanceof mt?r:r.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function GA(n,e,t,r,i,l,c){let d=n.slice();for(let h=0,g=l;h<t.maps.length;h++){let y=0;t.maps[h].forEach((b,v,w,N)=>{let C=N-w-(v-b);for(let j=0;j<d.length;j+=3){let O=d[j+1];if(O<0||b>O+g-y)continue;let M=d[j]+g-y;v>=M?d[j+1]=b<=M?-2:-1:b>=g&&C&&(d[j]+=C,d[j+1]+=C)}y+=C}),g=t.maps[h].map(g,-1)}let f=!1;for(let h=0;h<d.length;h+=3)if(d[h+1]<0){if(d[h+1]==-2){f=!0,d[h+1]=-1;continue}let g=t.map(n[h]+l),y=g-i;if(y<0||y>=r.content.size){f=!0;continue}let b=t.map(n[h+1]+l,-1),v=b-i,{index:w,offset:N}=r.content.findIndex(y),C=r.maybeChild(w);if(C&&N==y&&N+C.nodeSize==v){let j=d[h+2].mapInner(t,C,g+1,n[h]+l+1,c);j!=It?(d[h]=y,d[h+1]=v,d[h+2]=j):(d[h+1]=-2,f=!0)}else f=!0}if(f){let h=YA(d,n,e,t,i,l,c),g=Jc(h,r,0,c);e=g.local;for(let y=0;y<d.length;y+=3)d[y+1]<0&&(d.splice(y,3),y-=3);for(let y=0,b=0;y<g.children.length;y+=3){let v=g.children[y];for(;b<d.length&&d[b]<v;)b+=3;d.splice(b,0,g.children[y],g.children[y+1],g.children[y+2])}}return new mt(e.sort(ni),d)}function Gw(n,e){if(!e||!n.length)return n;let t=[];for(let r=0;r<n.length;r++){let i=n[r];t.push(new Mn(i.from+e,i.to+e,i.type))}return t}function YA(n,e,t,r,i,l,c){function d(f,h){for(let g=0;g<f.local.length;g++){let y=f.local[g].map(r,i,h);y?t.push(y):c.onRemove&&c.onRemove(f.local[g].spec)}for(let g=0;g<f.children.length;g+=3)d(f.children[g+2],f.children[g]+h+1)}for(let f=0;f<n.length;f+=3)n[f+1]==-1&&d(n[f+2],e[f]+l+1);return t}function Yw(n,e,t){if(e.isLeaf)return null;let r=t+e.nodeSize,i=null;for(let l=0,c;l<n.length;l++)(c=n[l])&&c.from>t&&c.to<r&&((i||(i=[])).push(c),n[l]=null);return i}function Kw(n){let e=[];for(let t=0;t<n.length;t++)n[t]!=null&&e.push(n[t]);return e}function Jc(n,e,t,r){let i=[],l=!1;e.forEach((d,f)=>{let h=Yw(n,d,f+t);if(h){l=!0;let g=Jc(h,d,t+f+1,r);g!=It&&i.push(f,f+d.nodeSize,g)}});let c=Gw(l?Kw(n):n,-t).sort(ni);for(let d=0;d<c.length;d++)c[d].type.valid(e,c[d])||(r.onRemove&&r.onRemove(c[d].spec),c.splice(d--,1));return c.length||i.length?new mt(c,i):It}function ni(n,e){return n.from-e.from||n.to-e.to}function wm(n){let e=n;for(let t=0;t<e.length-1;t++){let r=e[t];if(r.from!=r.to)for(let i=t+1;i<e.length;i++){let l=e[i];if(l.from==r.from){l.to!=r.to&&(e==n&&(e=n.slice()),e[i]=l.copy(l.from,r.to),xv(e,i+1,l.copy(r.to,l.to)));continue}else{l.from<r.to&&(e==n&&(e=n.slice()),e[t]=r.copy(r.from,l.from),xv(e,i,r.copy(l.from,r.to)));break}}}return e}function xv(n,e,t){for(;e<n.length&&ni(t,n[e])>0;)e++;n.splice(e,0,t)}function Zh(n){let e=[];return n.someProp("decorations",t=>{let r=t(n.state);r&&r!=It&&e.push(r)}),n.cursorWrapper&&e.push(mt.create(n.state.doc,[n.cursorWrapper.deco])),is.from(e)}const KA={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},XA=rn&&hs<=11;class JA{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class QA{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new JA,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);rn&&hs<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),XA&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,KA)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(uv(this.view)){if(this.suppressingSelectionUpdates)return Nr(this.view);if(rn&&hs<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&ai(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,r;for(let l=e.focusNode;l;l=ua(l))t.add(l);for(let l=e.anchorNode;l;l=ua(l))if(t.has(l)){r=l;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&uv(e)&&!this.ignoreSelectionChange(r),l=-1,c=-1,d=!1,f=[];if(e.editable)for(let g=0;g<t.length;g++){let y=this.registerMutation(t[g],f);y&&(l=l<0?y.from:Math.min(y.from,l),c=c<0?y.to:Math.max(y.to,c),y.typeOver&&(d=!0))}if(Hn&&f.length){let g=f.filter(y=>y.nodeName=="BR");if(g.length==2){let[y,b]=g;y.parentNode&&y.parentNode.parentNode==b.parentNode?b.remove():y.remove()}else{let{focusNode:y}=this.currentSelection;for(let b of g){let v=b.parentNode;v&&v.nodeName=="LI"&&(!y||eT(e,y)!=v)&&b.remove()}}}let h=null;l<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&_u(r)&&(h=pm(e))&&h.eq(Ce.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Nr(e),this.currentSelection.set(r),e.scrollToSelection()):(l>-1||i)&&(l>-1&&(e.docView.markDirty(l,c),ZA(e)),this.handleDOMChange(l,c,d,f),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Nr(e),this.currentSelection.set(r))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let g=0;g<e.addedNodes.length;g++){let y=e.addedNodes[g];t.push(y),y.nodeType==3&&(this.lastChangedTextNode=y)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,l=e.nextSibling;if(rn&&hs<=11&&e.addedNodes.length)for(let g=0;g<e.addedNodes.length;g++){let{previousSibling:y,nextSibling:b}=e.addedNodes[g];(!y||Array.prototype.indexOf.call(e.addedNodes,y)<0)&&(i=y),(!b||Array.prototype.indexOf.call(e.addedNodes,b)<0)&&(l=b)}let c=i&&i.parentNode==e.target?Dt(i)+1:0,d=r.localPosFromDOM(e.target,c,-1),f=l&&l.parentNode==e.target?Dt(l):e.target.childNodes.length,h=r.localPosFromDOM(e.target,f,1);return{from:d,to:h}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let bv=new WeakMap,vv=!1;function ZA(n){if(!bv.has(n)&&(bv.set(n,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace)!==-1)){if(n.requiresGeckoHackNode=Hn,vv)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),vv=!0}}function wv(n,e){let t=e.startContainer,r=e.startOffset,i=e.endContainer,l=e.endOffset,c=n.domAtPos(n.state.selection.anchor);return ai(c.node,c.offset,i,l)&&([t,r,i,l]=[i,l,t,r]),{anchorNode:t,anchorOffset:r,focusNode:i,focusOffset:l}}function WA(n,e){if(e.getComposedRanges){let i=e.getComposedRanges(n.root)[0];if(i)return wv(n,i)}let t;function r(i){i.preventDefault(),i.stopImmediatePropagation(),t=i.getTargetRanges()[0]}return n.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",r,!0),t?wv(n,t):null}function eT(n,e){for(let t=e.parentNode;t&&t!=n.dom;t=t.parentNode){let r=n.docView.nearestDesc(t,!0);if(r&&r.node.isBlock)return t}return null}function tT(n,e,t){let{node:r,fromOffset:i,toOffset:l,from:c,to:d}=n.docView.parseRange(e,t),f=n.domSelectionRange(),h,g=f.anchorNode;if(g&&n.dom.contains(g.nodeType==1?g:g.parentNode)&&(h=[{node:g,offset:f.anchorOffset}],_u(f)||h.push({node:f.focusNode,offset:f.focusOffset})),qt&&n.input.lastKeyCode===8)for(let C=l;C>i;C--){let j=r.childNodes[C-1],O=j.pmViewDesc;if(j.nodeName=="BR"&&!O){l=C;break}if(!O||O.size)break}let y=n.state.doc,b=n.someProp("domParser")||fs.fromSchema(n.state.schema),v=y.resolve(c),w=null,N=b.parse(r,{topNode:v.parent,topMatch:v.parent.contentMatchAt(v.index()),topOpen:!0,from:i,to:l,preserveWhitespace:v.parent.type.whitespace=="pre"?"full":!0,findPositions:h,ruleFromNode:nT,context:v});if(h&&h[0].pos!=null){let C=h[0].pos,j=h[1]&&h[1].pos;j==null&&(j=C),w={anchor:C+c,head:j+c}}return{doc:N,sel:w,from:c,to:d}}function nT(n){let e=n.pmViewDesc;if(e)return e.parseRule();if(n.nodeName=="BR"&&n.parentNode){if($t&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(n.parentNode.lastChild==n||$t&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}const rT=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function sT(n,e,t,r,i){let l=n.input.compositionPendingChanges||(n.composing?n.input.compositionID:0);if(n.input.compositionPendingChanges=0,e<0){let _=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,re=pm(n,_);if(re&&!n.state.selection.eq(re)){if(qt&&vr&&n.input.lastKeyCode===13&&Date.now()-100<n.input.lastKeyCodeTime&&n.someProp("handleKeyDown",$=>$(n,Gs(13,"Enter"))))return;let le=n.state.tr.setSelection(re);_=="pointer"?le.setMeta("pointer",!0):_=="key"&&le.scrollIntoView(),l&&le.setMeta("composition",l),n.dispatch(le)}return}let c=n.state.doc.resolve(e),d=c.sharedDepth(t);e=c.before(d+1),t=n.state.doc.resolve(t).after(d+1);let f=n.state.selection,h=tT(n,e,t),g=n.state.doc,y=g.slice(h.from,h.to),b,v;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(b=n.state.selection.to,v="end"):(b=n.state.selection.from,v="start"),n.input.lastKeyCode=null;let w=lT(y.content,h.doc.content,h.from,b,v);if(w&&n.input.domChangeCount++,(da&&n.input.lastIOSEnter>Date.now()-225||vr)&&i.some(_=>_.nodeType==1&&!rT.test(_.nodeName))&&(!w||w.endA>=w.endB)&&n.someProp("handleKeyDown",_=>_(n,Gs(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!w)if(r&&f instanceof ve&&!f.empty&&f.$head.sameParent(f.$anchor)&&!n.composing&&!(h.sel&&h.sel.anchor!=h.sel.head))w={start:f.from,endA:f.to,endB:f.to};else{if(h.sel){let _=Sv(n,n.state.doc,h.sel);if(_&&!_.eq(n.state.selection)){let re=n.state.tr.setSelection(_);l&&re.setMeta("composition",l),n.dispatch(re)}}return}n.state.selection.from<n.state.selection.to&&w.start==w.endB&&n.state.selection instanceof ve&&(w.start>n.state.selection.from&&w.start<=n.state.selection.from+2&&n.state.selection.from>=h.from?w.start=n.state.selection.from:w.endA<n.state.selection.to&&w.endA>=n.state.selection.to-2&&n.state.selection.to<=h.to&&(w.endB+=n.state.selection.to-w.endA,w.endA=n.state.selection.to)),rn&&hs<=11&&w.endB==w.start+1&&w.endA==w.start&&w.start>h.from&&h.doc.textBetween(w.start-h.from-1,w.start-h.from+1)=="  "&&(w.start--,w.endA--,w.endB--);let N=h.doc.resolveNoCache(w.start-h.from),C=h.doc.resolveNoCache(w.endB-h.from),j=g.resolve(w.start),O=N.sameParent(C)&&N.parent.inlineContent&&j.end()>=w.endA,M;if((da&&n.input.lastIOSEnter>Date.now()-225&&(!O||i.some(_=>_.nodeName=="DIV"||_.nodeName=="P"))||!O&&N.pos<h.doc.content.size&&(!N.sameParent(C)||!N.parent.inlineContent)&&!/\S/.test(h.doc.textBetween(N.pos,C.pos,"",""))&&(M=Ce.findFrom(h.doc.resolve(N.pos+1),1,!0))&&M.head>N.pos)&&n.someProp("handleKeyDown",_=>_(n,Gs(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>w.start&&aT(g,w.start,w.endA,N,C)&&n.someProp("handleKeyDown",_=>_(n,Gs(8,"Backspace")))){vr&&qt&&n.domObserver.suppressSelectionUpdates();return}qt&&w.endB==w.start&&(n.input.lastChromeDelete=Date.now()),vr&&!O&&N.start()!=C.start()&&C.parentOffset==0&&N.depth==C.depth&&h.sel&&h.sel.anchor==h.sel.head&&h.sel.head==w.endA&&(w.endB-=2,C=h.doc.resolveNoCache(w.endB-h.from),setTimeout(()=>{n.someProp("handleKeyDown",function(_){return _(n,Gs(13,"Enter"))})},20));let A=w.start,L=w.endA,B=_=>{let re=_||n.state.tr.replace(A,L,h.doc.slice(w.start-h.from,w.endB-h.from));if(h.sel){let le=Sv(n,re.doc,h.sel);le&&!(qt&&n.composing&&le.empty&&(w.start!=w.endB||n.input.lastChromeDelete<Date.now()-100)&&(le.head==A||le.head==re.mapping.map(L)-1)||rn&&le.empty&&le.head==A)&&re.setSelection(le)}return l&&re.setMeta("composition",l),re.scrollIntoView()},F;if(O){if(N.pos==C.pos){rn&&hs<=11&&N.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>Nr(n),20));let _=B(n.state.tr.delete(A,L)),re=g.resolve(w.start).marksAcross(g.resolve(w.endA));re&&_.ensureMarks(re),n.dispatch(_)}else if(w.endA==w.endB&&(F=iT(N.parent.content.cut(N.parentOffset,C.parentOffset),j.parent.content.cut(j.parentOffset,w.endA-j.start())))){let _=B(n.state.tr);F.type=="add"?_.addMark(A,L,F.mark):_.removeMark(A,L,F.mark),n.dispatch(_)}else if(N.parent.child(N.index()).isText&&N.index()==C.index()-(C.textOffset?0:1)){let _=N.parent.textBetween(N.parentOffset,C.parentOffset),re=()=>B(n.state.tr.insertText(_,A,L));n.someProp("handleTextInput",le=>le(n,A,L,_,re))||n.dispatch(re())}}else n.dispatch(B())}function Sv(n,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:mm(n,e.resolve(t.anchor),e.resolve(t.head))}function iT(n,e){let t=n.firstChild.marks,r=e.firstChild.marks,i=t,l=r,c,d,f;for(let g=0;g<r.length;g++)i=r[g].removeFromSet(i);for(let g=0;g<t.length;g++)l=t[g].removeFromSet(l);if(i.length==1&&l.length==0)d=i[0],c="add",f=g=>g.mark(d.addToSet(g.marks));else if(i.length==0&&l.length==1)d=l[0],c="remove",f=g=>g.mark(d.removeFromSet(g.marks));else return null;let h=[];for(let g=0;g<e.childCount;g++)h.push(f(e.child(g)));if(W.from(h).eq(n))return{mark:d,type:c}}function aT(n,e,t,r,i){if(t-e<=i.pos-r.pos||Wh(r,!0,!1)<i.pos)return!1;let l=n.resolve(e);if(!r.parent.isTextblock){let d=l.nodeAfter;return d!=null&&t==e+d.nodeSize}if(l.parentOffset<l.parent.content.size||!l.parent.isTextblock)return!1;let c=n.resolve(Wh(l,!0,!0));return!c.parent.isTextblock||c.pos>t||Wh(c,!0,!1)<t?!1:r.parent.content.cut(r.parentOffset).eq(c.parent.content)}function Wh(n,e,t){let r=n.depth,i=e?n.end():n.pos;for(;r>0&&(e||n.indexAfter(r)==n.node(r).childCount);)r--,i++,e=!1;if(t){let l=n.node(r).maybeChild(n.indexAfter(r));for(;l&&!l.isLeaf;)l=l.firstChild,i++}return i}function lT(n,e,t,r,i){let l=n.findDiffStart(e,t);if(l==null)return null;let{a:c,b:d}=n.findDiffEnd(e,t+n.size,t+e.size);if(i=="end"){let f=Math.max(0,l-Math.min(c,d));r-=c+f-l}if(c<l&&n.size<e.size){let f=r<=l&&r>=c?l-r:0;l-=f,l&&l<e.size&&Nv(e.textBetween(l-1,l+1))&&(l+=f?1:-1),d=l+(d-c),c=l}else if(d<l){let f=r<=l&&r>=d?l-r:0;l-=f,l&&l<n.size&&Nv(n.textBetween(l-1,l+1))&&(l+=f?1:-1),c=l+(c-d),d=l}return{start:l,endA:c,endB:d}}function Nv(n){if(n.length!=2)return!1;let e=n.charCodeAt(0),t=n.charCodeAt(1);return e>=56320&&e<=57343&&t>=55296&&t<=56319}class Xw{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new kA,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(Av),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=kv(this),Ev(this),this.nodeViews=jv(this),this.docView=sv(this.state.doc,Cv(this),Zh(this),this.dom,this),this.domObserver=new QA(this,(r,i,l,c)=>sT(this,r,i,l,c)),this.domObserver.start(),jA(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Lp(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(Av),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let r in this._props)t[r]=this._props[r];t.state=this.state;for(let r in e)t[r]=e[r];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var r;let i=this.state,l=!1,c=!1;e.storedMarks&&this.composing&&(qw(this),c=!0),this.state=e;let d=i.plugins!=e.plugins||this._props.plugins!=t.plugins;if(d||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let v=jv(this);cT(v,this.nodeViews)&&(this.nodeViews=v,l=!0)}(d||t.handleDOMEvents!=this._props.handleDOMEvents)&&Lp(this),this.editable=kv(this),Ev(this);let f=Zh(this),h=Cv(this),g=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",y=l||!this.docView.matchesNode(e.doc,h,f);(y||!e.selection.eq(i.selection))&&(c=!0);let b=g=="preserve"&&c&&this.dom.style.overflowAnchor==null&&Ij(this);if(c){this.domObserver.stop();let v=y&&(rn||qt)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&oT(i.selection,e.selection);if(y){let w=qt?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=UA(this)),(l||!this.docView.update(e.doc,h,f,this))&&(this.docView.updateOuterDeco(h),this.docView.destroy(),this.docView=sv(e.doc,h,f,this.dom,this)),w&&!this.trackWrites&&(v=!0)}v||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&dA(this))?Nr(this,v):(Mw(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),g=="reset"?this.dom.scrollTop=0:g=="to selection"?this.scrollToSelection():b&&qj(b)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof me){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&Zb(this,t.getBoundingClientRect(),e)}else Zb(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let r=this.directPlugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let r=this.state.plugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let r=this.pluginViews[t];r.update&&r.update(this,e)}}updateDraggedNode(e,t){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let l=r.from+(this.state.doc.content.size-t.doc.content.size);(l>0&&this.state.doc.nodeAt(l))==r.node&&(i=l)}this.dragging=new Fw(e.slice,e.move,i<0?void 0:me.create(this.state.doc,i))}someProp(e,t){let r=this._props&&this._props[e],i;if(r!=null&&(i=t?t(r):r))return i;for(let c=0;c<this.directPlugins.length;c++){let d=this.directPlugins[c].props[e];if(d!=null&&(i=t?t(d):d))return i}let l=this.state.plugins;if(l)for(let c=0;c<l.length;c++){let d=l[c].props[e];if(d!=null&&(i=t?t(d):d))return i}}hasFocus(){if(rn){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&Vj(this.dom),Nr(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}updateRoot(){this._root=null}posAtCoords(e){return Kj(this,e)}coordsAtPos(e,t=1){return Sw(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,r=-1){let i=this.docView.posFromDOM(e,t,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,t){return Wj(this,t||this.state,e)}pasteHTML(e,t){return Gl(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return Gl(this,e,null,!0,t||new ClipboardEvent("paste"))}serializeForClipboard(e){return gm(this,e)}destroy(){this.docView&&(AA(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Zh(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,Mj())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return MA(this,e)}domSelectionRange(){let e=this.domSelection();return e?$t&&this.root.nodeType===11&&_j(this.dom.ownerDocument)==this.dom&&WA(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}Xw.prototype.dispatch=function(n){let e=this._props.dispatchTransaction;e?e.call(this,n):this.updateState(this.state.apply(n))};function Cv(n){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(n.editable),n.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(n.state)),t)for(let r in t)r=="class"?e.class+=" "+t[r]:r=="style"?e.style=(e.style?e.style+";":"")+t[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(t[r]))}),e.translate||(e.translate="no"),[Mn.node(0,n.state.doc.content.size,e)]}function Ev(n){if(n.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),n.cursorWrapper={dom:e,deco:Mn.widget(n.state.selection.from,e,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function kv(n){return!n.someProp("editable",e=>e(n.state)===!1)}function oT(n,e){let t=Math.min(n.$anchor.sharedDepth(n.head),e.$anchor.sharedDepth(e.head));return n.$anchor.start(t)!=e.$anchor.start(t)}function jv(n){let e=Object.create(null);function t(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return n.someProp("nodeViews",t),n.someProp("markViews",t),e}function cT(n,e){let t=0,r=0;for(let i in n){if(n[i]!=e[i])return!0;t++}for(let i in e)r++;return t!=r}function Av(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var ys={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Qc={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},uT=typeof navigator<"u"&&/Mac/.test(navigator.platform),dT=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Lt=0;Lt<10;Lt++)ys[48+Lt]=ys[96+Lt]=String(Lt);for(var Lt=1;Lt<=24;Lt++)ys[Lt+111]="F"+Lt;for(var Lt=65;Lt<=90;Lt++)ys[Lt]=String.fromCharCode(Lt+32),Qc[Lt]=String.fromCharCode(Lt);for(var ep in ys)Qc.hasOwnProperty(ep)||(Qc[ep]=ys[ep]);function fT(n){var e=uT&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||dT&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?Qc:ys)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}const hT=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),pT=typeof navigator<"u"&&/Win/.test(navigator.platform);function mT(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let r,i,l,c;for(let d=0;d<e.length-1;d++){let f=e[d];if(/^(cmd|meta|m)$/i.test(f))c=!0;else if(/^a(lt)?$/i.test(f))r=!0;else if(/^(c|ctrl|control)$/i.test(f))i=!0;else if(/^s(hift)?$/i.test(f))l=!0;else if(/^mod$/i.test(f))hT?c=!0:i=!0;else throw new Error("Unrecognized modifier name: "+f)}return r&&(t="Alt-"+t),i&&(t="Ctrl-"+t),c&&(t="Meta-"+t),l&&(t="Shift-"+t),t}function gT(n){let e=Object.create(null);for(let t in n)e[mT(t)]=n[t];return e}function tp(n,e,t=!0){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t&&e.shiftKey&&(n="Shift-"+n),n}function yT(n){return new _t({props:{handleKeyDown:Jw(n)}})}function Jw(n){let e=gT(n);return function(t,r){let i=fT(r),l,c=e[tp(i,r)];if(c&&c(t.state,t.dispatch,t))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let d=e[tp(i,r,!1)];if(d&&d(t.state,t.dispatch,t))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(pT&&r.ctrlKey&&r.altKey)&&(l=ys[r.keyCode])&&l!=i){let d=e[tp(l,r)];if(d&&d(t.state,t.dispatch,t))return!0}}return!1}}const Sm=(n,e)=>n.selection.empty?!1:(e&&e(n.tr.deleteSelection().scrollIntoView()),!0);function Qw(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("backward",n):t.parentOffset>0)?null:t}const Zw=(n,e,t)=>{let r=Qw(n,t);if(!r)return!1;let i=Nm(r);if(!i){let c=r.blockRange(),d=c&&ba(c);return d==null?!1:(e&&e(n.tr.lift(c,d).scrollIntoView()),!0)}let l=i.nodeBefore;if(lS(n,i,e,-1))return!0;if(r.parent.content.size==0&&(fa(l,"end")||me.isSelectable(l)))for(let c=r.depth;;c--){let d=Du(n.doc,r.before(c),r.after(c),ae.empty);if(d&&d.slice.size<d.to-d.from){if(e){let f=n.tr.step(d);f.setSelection(fa(l,"end")?Ce.findFrom(f.doc.resolve(f.mapping.map(i.pos,-1)),-1):me.create(f.doc,i.pos-l.nodeSize)),e(f.scrollIntoView())}return!0}if(c==1||r.node(c-1).childCount>1)break}return l.isAtom&&i.depth==r.depth-1?(e&&e(n.tr.delete(i.pos-l.nodeSize,i.pos).scrollIntoView()),!0):!1},xT=(n,e,t)=>{let r=Qw(n,t);if(!r)return!1;let i=Nm(r);return i?Ww(n,i,e):!1},bT=(n,e,t)=>{let r=tS(n,t);if(!r)return!1;let i=Cm(r);return i?Ww(n,i,e):!1};function Ww(n,e,t){let r=e.nodeBefore,i=r,l=e.pos-1;for(;!i.isTextblock;l--){if(i.type.spec.isolating)return!1;let g=i.lastChild;if(!g)return!1;i=g}let c=e.nodeAfter,d=c,f=e.pos+1;for(;!d.isTextblock;f++){if(d.type.spec.isolating)return!1;let g=d.firstChild;if(!g)return!1;d=g}let h=Du(n.doc,l,f,ae.empty);if(!h||h.from!=l||h instanceof Nt&&h.slice.size>=f-l)return!1;if(t){let g=n.tr.step(h);g.setSelection(ve.create(g.doc,l)),t(g.scrollIntoView())}return!0}function fa(n,e,t=!1){for(let r=n;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(t&&r.childCount!=1)return!1}return!1}const eS=(n,e,t)=>{let{$head:r,empty:i}=n.selection,l=r;if(!i)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("backward",n):r.parentOffset>0)return!1;l=Nm(r)}let c=l&&l.nodeBefore;return!c||!me.isSelectable(c)?!1:(e&&e(n.tr.setSelection(me.create(n.doc,l.pos-c.nodeSize)).scrollIntoView()),!0)};function Nm(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){if(n.index(e)>0)return n.doc.resolve(n.before(e+1));if(n.node(e).type.spec.isolating)break}return null}function tS(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("forward",n):t.parentOffset<t.parent.content.size)?null:t}const nS=(n,e,t)=>{let r=tS(n,t);if(!r)return!1;let i=Cm(r);if(!i)return!1;let l=i.nodeAfter;if(lS(n,i,e,1))return!0;if(r.parent.content.size==0&&(fa(l,"start")||me.isSelectable(l))){let c=Du(n.doc,r.before(),r.after(),ae.empty);if(c&&c.slice.size<c.to-c.from){if(e){let d=n.tr.step(c);d.setSelection(fa(l,"start")?Ce.findFrom(d.doc.resolve(d.mapping.map(i.pos)),1):me.create(d.doc,d.mapping.map(i.pos))),e(d.scrollIntoView())}return!0}}return l.isAtom&&i.depth==r.depth-1?(e&&e(n.tr.delete(i.pos,i.pos+l.nodeSize).scrollIntoView()),!0):!1},rS=(n,e,t)=>{let{$head:r,empty:i}=n.selection,l=r;if(!i)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("forward",n):r.parentOffset<r.parent.content.size)return!1;l=Cm(r)}let c=l&&l.nodeAfter;return!c||!me.isSelectable(c)?!1:(e&&e(n.tr.setSelection(me.create(n.doc,l.pos)).scrollIntoView()),!0)};function Cm(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){let t=n.node(e);if(n.index(e)+1<t.childCount)return n.doc.resolve(n.after(e+1));if(t.type.spec.isolating)break}return null}const vT=(n,e)=>{let t=n.selection,r=t instanceof me,i;if(r){if(t.node.isTextblock||!xs(n.doc,t.from))return!1;i=t.from}else if(i=Ru(n.doc,t.from,-1),i==null)return!1;if(e){let l=n.tr.join(i);r&&l.setSelection(me.create(l.doc,i-n.doc.resolve(i).nodeBefore.nodeSize)),e(l.scrollIntoView())}return!0},wT=(n,e)=>{let t=n.selection,r;if(t instanceof me){if(t.node.isTextblock||!xs(n.doc,t.to))return!1;r=t.to}else if(r=Ru(n.doc,t.to,1),r==null)return!1;return e&&e(n.tr.join(r).scrollIntoView()),!0},ST=(n,e)=>{let{$from:t,$to:r}=n.selection,i=t.blockRange(r),l=i&&ba(i);return l==null?!1:(e&&e(n.tr.lift(i,l).scrollIntoView()),!0)},sS=(n,e)=>{let{$head:t,$anchor:r}=n.selection;return!t.parent.type.spec.code||!t.sameParent(r)?!1:(e&&e(n.tr.insertText(`
`).scrollIntoView()),!0)};function Em(n){for(let e=0;e<n.edgeCount;e++){let{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const NT=(n,e)=>{let{$head:t,$anchor:r}=n.selection;if(!t.parent.type.spec.code||!t.sameParent(r))return!1;let i=t.node(-1),l=t.indexAfter(-1),c=Em(i.contentMatchAt(l));if(!c||!i.canReplaceWith(l,l,c))return!1;if(e){let d=t.after(),f=n.tr.replaceWith(d,d,c.createAndFill());f.setSelection(Ce.near(f.doc.resolve(d),1)),e(f.scrollIntoView())}return!0},iS=(n,e)=>{let t=n.selection,{$from:r,$to:i}=t;if(t instanceof hn||r.parent.inlineContent||i.parent.inlineContent)return!1;let l=Em(i.parent.contentMatchAt(i.indexAfter()));if(!l||!l.isTextblock)return!1;if(e){let c=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,d=n.tr.insert(c,l.createAndFill());d.setSelection(ve.create(d.doc,c+1)),e(d.scrollIntoView())}return!0},aS=(n,e)=>{let{$cursor:t}=n.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let l=t.before();if(Sr(n.doc,l))return e&&e(n.tr.split(l).scrollIntoView()),!0}let r=t.blockRange(),i=r&&ba(r);return i==null?!1:(e&&e(n.tr.lift(r,i).scrollIntoView()),!0)};function CT(n){return(e,t)=>{let{$from:r,$to:i}=e.selection;if(e.selection instanceof me&&e.selection.node.isBlock)return!r.parentOffset||!Sr(e.doc,r.pos)?!1:(t&&t(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let l=[],c,d,f=!1,h=!1;for(let v=r.depth;;v--)if(r.node(v).isBlock){f=r.end(v)==r.pos+(r.depth-v),h=r.start(v)==r.pos-(r.depth-v),d=Em(r.node(v-1).contentMatchAt(r.indexAfter(v-1))),l.unshift(f&&d?{type:d}:null),c=v;break}else{if(v==1)return!1;l.unshift(null)}let g=e.tr;(e.selection instanceof ve||e.selection instanceof hn)&&g.deleteSelection();let y=g.mapping.map(r.pos),b=Sr(g.doc,y,l.length,l);if(b||(l[0]=d?{type:d}:null,b=Sr(g.doc,y,l.length,l)),!b)return!1;if(g.split(y,l.length,l),!f&&h&&r.node(c).type!=d){let v=g.mapping.map(r.before(c)),w=g.doc.resolve(v);d&&r.node(c-1).canReplaceWith(w.index(),w.index()+1,d)&&g.setNodeMarkup(g.mapping.map(r.before(c)),d)}return t&&t(g.scrollIntoView()),!0}}const ET=CT(),kT=(n,e)=>{let{$from:t,to:r}=n.selection,i,l=t.sharedDepth(r);return l==0?!1:(i=t.before(l),e&&e(n.tr.setSelection(me.create(n.doc,i))),!0)};function jT(n,e,t){let r=e.nodeBefore,i=e.nodeAfter,l=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(l-1,l)?(t&&t(n.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(l,l+1)||!(i.isTextblock||xs(n.doc,e.pos))?!1:(t&&t(n.tr.join(e.pos).scrollIntoView()),!0)}function lS(n,e,t,r){let i=e.nodeBefore,l=e.nodeAfter,c,d,f=i.type.spec.isolating||l.type.spec.isolating;if(!f&&jT(n,e,t))return!0;let h=!f&&e.parent.canReplace(e.index(),e.index()+1);if(h&&(c=(d=i.contentMatchAt(i.childCount)).findWrapping(l.type))&&d.matchType(c[0]||l.type).validEnd){if(t){let v=e.pos+l.nodeSize,w=W.empty;for(let j=c.length-1;j>=0;j--)w=W.from(c[j].create(null,w));w=W.from(i.copy(w));let N=n.tr.step(new Ct(e.pos-1,v,e.pos,v,new ae(w,1,0),c.length,!0)),C=N.doc.resolve(v+2*c.length);C.nodeAfter&&C.nodeAfter.type==i.type&&xs(N.doc,C.pos)&&N.join(C.pos),t(N.scrollIntoView())}return!0}let g=l.type.spec.isolating||r>0&&f?null:Ce.findFrom(e,1),y=g&&g.$from.blockRange(g.$to),b=y&&ba(y);if(b!=null&&b>=e.depth)return t&&t(n.tr.lift(y,b).scrollIntoView()),!0;if(h&&fa(l,"start",!0)&&fa(i,"end")){let v=i,w=[];for(;w.push(v),!v.isTextblock;)v=v.lastChild;let N=l,C=1;for(;!N.isTextblock;N=N.firstChild)C++;if(v.canReplace(v.childCount,v.childCount,N.content)){if(t){let j=W.empty;for(let M=w.length-1;M>=0;M--)j=W.from(w[M].copy(j));let O=n.tr.step(new Ct(e.pos-w.length,e.pos+l.nodeSize,e.pos+C,e.pos+l.nodeSize-C,new ae(j,w.length,0),0,!0));t(O.scrollIntoView())}return!0}}return!1}function oS(n){return function(e,t){let r=e.selection,i=n<0?r.$from:r.$to,l=i.depth;for(;i.node(l).isInline;){if(!l)return!1;l--}return i.node(l).isTextblock?(t&&t(e.tr.setSelection(ve.create(e.doc,n<0?i.start(l):i.end(l)))),!0):!1}}const AT=oS(-1),TT=oS(1);function MT(n,e=null){return function(t,r){let{$from:i,$to:l}=t.selection,c=i.blockRange(l),d=c&&dm(c,n,e);return d?(r&&r(t.tr.wrap(c,d).scrollIntoView()),!0):!1}}function Tv(n,e=null){return function(t,r){let i=!1;for(let l=0;l<t.selection.ranges.length&&!i;l++){let{$from:{pos:c},$to:{pos:d}}=t.selection.ranges[l];t.doc.nodesBetween(c,d,(f,h)=>{if(i)return!1;if(!(!f.isTextblock||f.hasMarkup(n,e)))if(f.type==n)i=!0;else{let g=t.doc.resolve(h),y=g.index();i=g.parent.canReplaceWith(y,y+1,n)}})}if(!i)return!1;if(r){let l=t.tr;for(let c=0;c<t.selection.ranges.length;c++){let{$from:{pos:d},$to:{pos:f}}=t.selection.ranges[c];l.setBlockType(d,f,n,e)}r(l.scrollIntoView())}return!0}}function km(...n){return function(e,t,r){for(let i=0;i<n.length;i++)if(n[i](e,t,r))return!0;return!1}}km(Sm,Zw,eS);km(Sm,nS,rS);km(sS,iS,aS,ET);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function OT(n,e=null){return function(t,r){let{$from:i,$to:l}=t.selection,c=i.blockRange(l);if(!c)return!1;let d=r?t.tr:null;return RT(d,c,n,e)?(r&&r(d.scrollIntoView()),!0):!1}}function RT(n,e,t,r=null){let i=!1,l=e,c=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(t)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let f=c.resolve(e.start-2);l=new Fc(f,f,e.depth),e.endIndex<e.parent.childCount&&(e=new Fc(e.$from,c.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let d=dm(l,t,r,e);return d?(n&&DT(n,e,d,i,t),!0):!1}function DT(n,e,t,r,i){let l=W.empty;for(let g=t.length-1;g>=0;g--)l=W.from(t[g].type.create(t[g].attrs,l));n.step(new Ct(e.start-(r?2:0),e.end,e.start,e.end,new ae(l,0,0),t.length,!0));let c=0;for(let g=0;g<t.length;g++)t[g].type==i&&(c=g+1);let d=t.length-c,f=e.start+t.length-(r?2:0),h=e.parent;for(let g=e.startIndex,y=e.endIndex,b=!0;g<y;g++,b=!1)!b&&Sr(n.doc,f,d)&&(n.split(f,d),f+=2*d),f+=h.child(g).nodeSize;return n}function LT(n){return function(e,t){let{$from:r,$to:i}=e.selection,l=r.blockRange(i,c=>c.childCount>0&&c.firstChild.type==n);return l?t?r.node(l.depth-1).type==n?_T(e,t,n,l):zT(e,t,l):!0:!1}}function _T(n,e,t,r){let i=n.tr,l=r.end,c=r.$to.end(r.depth);l<c&&(i.step(new Ct(l-1,c,l,c,new ae(W.from(t.create(null,r.parent.copy())),1,0),1,!0)),r=new Fc(i.doc.resolve(r.$from.pos),i.doc.resolve(c),r.depth));const d=ba(r);if(d==null)return!1;i.lift(r,d);let f=i.doc.resolve(i.mapping.map(l,-1)-1);return xs(i.doc,f.pos)&&f.nodeBefore.type==f.nodeAfter.type&&i.join(f.pos),e(i.scrollIntoView()),!0}function zT(n,e,t){let r=n.tr,i=t.parent;for(let v=t.end,w=t.endIndex-1,N=t.startIndex;w>N;w--)v-=i.child(w).nodeSize,r.delete(v-1,v+1);let l=r.doc.resolve(t.start),c=l.nodeAfter;if(r.mapping.map(t.end)!=t.start+l.nodeAfter.nodeSize)return!1;let d=t.startIndex==0,f=t.endIndex==i.childCount,h=l.node(-1),g=l.index(-1);if(!h.canReplace(g+(d?0:1),g+1,c.content.append(f?W.empty:W.from(i))))return!1;let y=l.pos,b=y+c.nodeSize;return r.step(new Ct(y-(d?1:0),b+(f?1:0),y+1,b-1,new ae((d?W.empty:W.from(i.copy(W.empty))).append(f?W.empty:W.from(i.copy(W.empty))),d?0:1,f?0:1),d?0:1)),e(r.scrollIntoView()),!0}function BT(n){return function(e,t){let{$from:r,$to:i}=e.selection,l=r.blockRange(i,h=>h.childCount>0&&h.firstChild.type==n);if(!l)return!1;let c=l.startIndex;if(c==0)return!1;let d=l.parent,f=d.child(c-1);if(f.type!=n)return!1;if(t){let h=f.lastChild&&f.lastChild.type==d.type,g=W.from(h?n.create():null),y=new ae(W.from(n.create(null,W.from(d.type.create(null,g)))),h?3:1,0),b=l.start,v=l.end;t(e.tr.step(new Ct(b-(h?3:1),v,b,v,y,1,!0)).scrollIntoView())}return!0}}function Pu(n){const{state:e,transaction:t}=n;let{selection:r}=t,{doc:i}=t,{storedMarks:l}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return l},get selection(){return r},get doc(){return i},get tr(){return r=t.selection,i=t.doc,l=t.storedMarks,t}}}class Hu{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:r}=this,{view:i}=t,{tr:l}=r,c=this.buildProps(l);return Object.fromEntries(Object.entries(e).map(([d,f])=>[d,(...g)=>{const y=f(...g)(c);return!l.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(l),y}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:r,editor:i,state:l}=this,{view:c}=i,d=[],f=!!e,h=e||l.tr,g=()=>(!f&&t&&!h.getMeta("preventDispatch")&&!this.hasCustomState&&c.dispatch(h),d.every(b=>b===!0)),y={...Object.fromEntries(Object.entries(r).map(([b,v])=>[b,(...N)=>{const C=this.buildProps(h,t),j=v(...N)(C);return d.push(j),y}])),run:g};return y}createCan(e){const{rawCommands:t,state:r}=this,i=!1,l=e||r.tr,c=this.buildProps(l,i);return{...Object.fromEntries(Object.entries(t).map(([f,h])=>[f,(...g)=>h(...g)({...c,dispatch:void 0})])),chain:()=>this.createChain(l,i)}}buildProps(e,t=!0){const{rawCommands:r,editor:i,state:l}=this,{view:c}=i,d={tr:e,editor:i,view:c,state:Pu({state:l,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([f,h])=>[f,(...g)=>h(...g)(d)]))}};return d}}class PT{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const r=this.callbacks[e];return r&&r.forEach(i=>i.apply(this,t)),this}off(e,t){const r=this.callbacks[e];return r&&(t?this.callbacks[e]=r.filter(i=>i!==t):delete this.callbacks[e]),this}once(e,t){const r=(...i)=>{this.off(e,r),t.apply(this,i)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}}function ue(n,e,t){return n.config[e]===void 0&&n.parent?ue(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?ue(n.parent,e,t):null}):n.config[e]}function Uu(n){const e=n.filter(i=>i.type==="extension"),t=n.filter(i=>i.type==="node"),r=n.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:r}}function cS(n){const e=[],{nodeExtensions:t,markExtensions:r}=Uu(n),i=[...t,...r],l={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return n.forEach(c=>{const d={name:c.name,options:c.options,storage:c.storage,extensions:i},f=ue(c,"addGlobalAttributes",d);if(!f)return;f().forEach(g=>{g.types.forEach(y=>{Object.entries(g.attributes).forEach(([b,v])=>{e.push({type:y,name:b,attribute:{...l,...v}})})})})}),i.forEach(c=>{const d={name:c.name,options:c.options,storage:c.storage},f=ue(c,"addAttributes",d);if(!f)return;const h=f();Object.entries(h).forEach(([g,y])=>{const b={...l,...y};typeof(b==null?void 0:b.default)=="function"&&(b.default=b.default()),b!=null&&b.isRequired&&(b==null?void 0:b.default)===void 0&&delete b.default,e.push({type:c.name,name:g,attribute:b})})}),e}function kt(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}function jt(...n){return n.filter(e=>!!e).reduce((e,t)=>{const r={...e};return Object.entries(t).forEach(([i,l])=>{if(!r[i]){r[i]=l;return}if(i==="class"){const d=l?String(l).split(" "):[],f=r[i]?r[i].split(" "):[],h=d.filter(g=>!f.includes(g));r[i]=[...f,...h].join(" ")}else if(i==="style"){const d=l?l.split(";").map(g=>g.trim()).filter(Boolean):[],f=r[i]?r[i].split(";").map(g=>g.trim()).filter(Boolean):[],h=new Map;f.forEach(g=>{const[y,b]=g.split(":").map(v=>v.trim());h.set(y,b)}),d.forEach(g=>{const[y,b]=g.split(":").map(v=>v.trim());h.set(y,b)}),r[i]=Array.from(h.entries()).map(([g,y])=>`${g}: ${y}`).join("; ")}else r[i]=l}),r},{})}function _p(n,e){return e.filter(t=>t.type===n.type.name).filter(t=>t.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(n.attrs)||{}:{[t.name]:n.attrs[t.name]}).reduce((t,r)=>jt(t,r),{})}function uS(n){return typeof n=="function"}function Te(n,e=void 0,...t){return uS(n)?e?n.bind(e)(...t):n(...t):n}function HT(n={}){return Object.keys(n).length===0&&n.constructor===Object}function UT(n){return typeof n!="string"?n:n.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(n):n==="true"?!0:n==="false"?!1:n}function Mv(n,e){return"style"in n?n:{...n,getAttrs:t=>{const r=n.getAttrs?n.getAttrs(t):n.attrs;if(r===!1)return!1;const i=e.reduce((l,c)=>{const d=c.attribute.parseHTML?c.attribute.parseHTML(t):UT(t.getAttribute(c.name));return d==null?l:{...l,[c.name]:d}},{});return{...r,...i}}}}function Ov(n){return Object.fromEntries(Object.entries(n).filter(([e,t])=>e==="attrs"&&HT(t)?!1:t!=null))}function IT(n,e){var t;const r=cS(n),{nodeExtensions:i,markExtensions:l}=Uu(n),c=(t=i.find(h=>ue(h,"topNode")))===null||t===void 0?void 0:t.name,d=Object.fromEntries(i.map(h=>{const g=r.filter(j=>j.type===h.name),y={name:h.name,options:h.options,storage:h.storage,editor:e},b=n.reduce((j,O)=>{const M=ue(O,"extendNodeSchema",y);return{...j,...M?M(h):{}}},{}),v=Ov({...b,content:Te(ue(h,"content",y)),marks:Te(ue(h,"marks",y)),group:Te(ue(h,"group",y)),inline:Te(ue(h,"inline",y)),atom:Te(ue(h,"atom",y)),selectable:Te(ue(h,"selectable",y)),draggable:Te(ue(h,"draggable",y)),code:Te(ue(h,"code",y)),whitespace:Te(ue(h,"whitespace",y)),linebreakReplacement:Te(ue(h,"linebreakReplacement",y)),defining:Te(ue(h,"defining",y)),isolating:Te(ue(h,"isolating",y)),attrs:Object.fromEntries(g.map(j=>{var O;return[j.name,{default:(O=j==null?void 0:j.attribute)===null||O===void 0?void 0:O.default}]}))}),w=Te(ue(h,"parseHTML",y));w&&(v.parseDOM=w.map(j=>Mv(j,g)));const N=ue(h,"renderHTML",y);N&&(v.toDOM=j=>N({node:j,HTMLAttributes:_p(j,g)}));const C=ue(h,"renderText",y);return C&&(v.toText=C),[h.name,v]})),f=Object.fromEntries(l.map(h=>{const g=r.filter(C=>C.type===h.name),y={name:h.name,options:h.options,storage:h.storage,editor:e},b=n.reduce((C,j)=>{const O=ue(j,"extendMarkSchema",y);return{...C,...O?O(h):{}}},{}),v=Ov({...b,inclusive:Te(ue(h,"inclusive",y)),excludes:Te(ue(h,"excludes",y)),group:Te(ue(h,"group",y)),spanning:Te(ue(h,"spanning",y)),code:Te(ue(h,"code",y)),attrs:Object.fromEntries(g.map(C=>{var j;return[C.name,{default:(j=C==null?void 0:C.attribute)===null||j===void 0?void 0:j.default}]}))}),w=Te(ue(h,"parseHTML",y));w&&(v.parseDOM=w.map(C=>Mv(C,g)));const N=ue(h,"renderHTML",y);return N&&(v.toDOM=C=>N({mark:C,HTMLAttributes:_p(C,g)})),[h.name,v]}));return new Q1({topNode:c,nodes:d,marks:f})}function np(n,e){return e.nodes[n]||e.marks[n]||null}function Rv(n,e){return Array.isArray(e)?e.some(t=>(typeof t=="string"?t:t.name)===n.name):e}function jm(n,e){const t=ci.fromSchema(e).serializeFragment(n),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(t),i.innerHTML}const qT=(n,e=500)=>{let t="";const r=n.parentOffset;return n.parent.nodesBetween(Math.max(0,r-e),r,(i,l,c,d)=>{var f,h;const g=((h=(f=i.type.spec).toText)===null||h===void 0?void 0:h.call(f,{node:i,pos:l,parent:c,index:d}))||i.textContent||"%leaf%";t+=i.isAtom&&!i.isText?g:g.slice(0,Math.max(0,r-l))}),t};function Am(n){return Object.prototype.toString.call(n)==="[object RegExp]"}class Iu{constructor(e){this.find=e.find,this.handler=e.handler}}const VT=(n,e)=>{if(Am(e))return e.exec(n);const t=e(n);if(!t)return null;const r=[t.text];return r.index=t.index,r.input=n,r.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(t.replaceWith)),r};function Nc(n){var e;const{editor:t,from:r,to:i,text:l,rules:c,plugin:d}=n,{view:f}=t;if(f.composing)return!1;const h=f.state.doc.resolve(r);if(h.parent.type.spec.code||!((e=h.nodeBefore||h.nodeAfter)===null||e===void 0)&&e.marks.find(b=>b.type.spec.code))return!1;let g=!1;const y=qT(h)+l;return c.forEach(b=>{if(g)return;const v=VT(y,b.find);if(!v)return;const w=f.state.tr,N=Pu({state:f.state,transaction:w}),C={from:r-(v[0].length-l.length),to:i},{commands:j,chain:O,can:M}=new Hu({editor:t,state:N});b.handler({state:N,range:C,match:v,commands:j,chain:O,can:M})===null||!w.steps.length||(w.setMeta(d,{transform:w,from:r,to:i,text:l}),f.dispatch(w),g=!0)}),g}function FT(n){const{editor:e,rules:t}=n,r=new _t({state:{init(){return null},apply(i,l,c){const d=i.getMeta(r);if(d)return d;const f=i.getMeta("applyInputRules");return!!f&&setTimeout(()=>{let{text:g}=f;typeof g=="string"?g=g:g=jm(W.from(g),c.schema);const{from:y}=f,b=y+g.length;Nc({editor:e,from:y,to:b,text:g,rules:t,plugin:r})}),i.selectionSet||i.docChanged?null:l}},props:{handleTextInput(i,l,c,d){return Nc({editor:e,from:l,to:c,text:d,rules:t,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:l}=i.state.selection;l&&Nc({editor:e,from:l.pos,to:l.pos,text:"",rules:t,plugin:r})}),!1)},handleKeyDown(i,l){if(l.key!=="Enter")return!1;const{$cursor:c}=i.state.selection;return c?Nc({editor:e,from:c.pos,to:c.pos,text:`
`,rules:t,plugin:r}):!1}},isInputRules:!0});return r}function $T(n){return Object.prototype.toString.call(n).slice(8,-1)}function Cc(n){return $T(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function qu(n,e){const t={...n};return Cc(n)&&Cc(e)&&Object.keys(e).forEach(r=>{Cc(e[r])&&Cc(n[r])?t[r]=qu(n[r],e[r]):t[r]=e[r]}),t}class Er{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Te(ue(this,"addOptions",{name:this.name}))),this.storage=Te(ue(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Er(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>qu(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new Er(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=Te(ue(t,"addOptions",{name:t.name})),t.storage=Te(ue(t,"addStorage",{name:t.name,options:t.options})),t}static handleExit({editor:e,mark:t}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const c=i.marks();if(!!!c.find(h=>(h==null?void 0:h.type.name)===t.name))return!1;const f=c.find(h=>(h==null?void 0:h.type.name)===t.name);return f&&r.removeStoredMark(f),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}}function GT(n){return typeof n=="number"}class YT{constructor(e){this.find=e.find,this.handler=e.handler}}const KT=(n,e,t)=>{if(Am(e))return[...n.matchAll(e)];const r=e(n,t);return r?r.map(i=>{const l=[i.text];return l.index=i.index,l.input=n,l.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),l.push(i.replaceWith)),l}):[]};function XT(n){const{editor:e,state:t,from:r,to:i,rule:l,pasteEvent:c,dropEvent:d}=n,{commands:f,chain:h,can:g}=new Hu({editor:e,state:t}),y=[];return t.doc.nodesBetween(r,i,(v,w)=>{if(!v.isTextblock||v.type.spec.code)return;const N=Math.max(r,w),C=Math.min(i,w+v.content.size),j=v.textBetween(N-w,C-w,void 0,"￼");KT(j,l.find,c).forEach(M=>{if(M.index===void 0)return;const A=N+M.index+1,L=A+M[0].length,B={from:t.tr.mapping.map(A),to:t.tr.mapping.map(L)},F=l.handler({state:t,range:B,match:M,commands:f,chain:h,can:g,pasteEvent:c,dropEvent:d});y.push(F)})}),y.every(v=>v!==null)}let Ec=null;const JT=n=>{var e;const t=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=t.clipboardData)===null||e===void 0||e.setData("text/html",n),t};function QT(n){const{editor:e,rules:t}=n;let r=null,i=!1,l=!1,c=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,d;try{d=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{d=null}const f=({state:g,from:y,to:b,rule:v,pasteEvt:w})=>{const N=g.tr,C=Pu({state:g,transaction:N});if(!(!XT({editor:e,state:C,from:Math.max(y-1,0),to:b.b-1,rule:v,pasteEvent:w,dropEvent:d})||!N.steps.length)){try{d=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{d=null}return c=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,N}};return t.map(g=>new _t({view(y){const b=w=>{var N;r=!((N=y.dom.parentElement)===null||N===void 0)&&N.contains(w.target)?y.dom.parentElement:null,r&&(Ec=e)},v=()=>{Ec&&(Ec=null)};return window.addEventListener("dragstart",b),window.addEventListener("dragend",v),{destroy(){window.removeEventListener("dragstart",b),window.removeEventListener("dragend",v)}}},props:{handleDOMEvents:{drop:(y,b)=>{if(l=r===y.dom.parentElement,d=b,!l){const v=Ec;v&&setTimeout(()=>{const w=v.state.selection;w&&v.commands.deleteRange({from:w.from,to:w.to})},10)}return!1},paste:(y,b)=>{var v;const w=(v=b.clipboardData)===null||v===void 0?void 0:v.getData("text/html");return c=b,i=!!(w!=null&&w.includes("data-pm-slice")),!1}}},appendTransaction:(y,b,v)=>{const w=y[0],N=w.getMeta("uiEvent")==="paste"&&!i,C=w.getMeta("uiEvent")==="drop"&&!l,j=w.getMeta("applyPasteRules"),O=!!j;if(!N&&!C&&!O)return;if(O){let{text:L}=j;typeof L=="string"?L=L:L=jm(W.from(L),v.schema);const{from:B}=j,F=B+L.length,_=JT(L);return f({rule:g,state:v,from:B,to:{b:F},pasteEvt:_})}const M=b.doc.content.findDiffStart(v.doc.content),A=b.doc.content.findDiffEnd(v.doc.content);if(!(!GT(M)||!A||M===A.b))return f({rule:g,state:v,from:M,to:A,pasteEvt:c})}}))}function ZT(n){const e=n.filter((t,r)=>n.indexOf(t)!==r);return Array.from(new Set(e))}class ia{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=ia.resolve(e),this.schema=IT(this.extensions,t),this.setupExtensions()}static resolve(e){const t=ia.sort(ia.flatten(e)),r=ZT(t.map(i=>i.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(i=>`'${i}'`).join(", ")}]. This can lead to issues.`),t}static flatten(e){return e.map(t=>{const r={name:t.name,options:t.options,storage:t.storage},i=ue(t,"addExtensions",r);return i?[t,...this.flatten(i())]:t}).flat(10)}static sort(e){return e.sort((r,i)=>{const l=ue(r,"priority")||100,c=ue(i,"priority")||100;return l>c?-1:l<c?1:0})}get commands(){return this.extensions.reduce((e,t)=>{const r={name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:np(t.name,this.schema)},i=ue(t,"addCommands",r);return i?{...e,...i()}:e},{})}get plugins(){const{editor:e}=this,t=ia.sort([...this.extensions].reverse()),r=[],i=[],l=t.map(c=>{const d={name:c.name,options:c.options,storage:c.storage,editor:e,type:np(c.name,this.schema)},f=[],h=ue(c,"addKeyboardShortcuts",d);let g={};if(c.type==="mark"&&ue(c,"exitable",d)&&(g.ArrowRight=()=>Er.handleExit({editor:e,mark:c})),h){const N=Object.fromEntries(Object.entries(h()).map(([C,j])=>[C,()=>j({editor:e})]));g={...g,...N}}const y=yT(g);f.push(y);const b=ue(c,"addInputRules",d);Rv(c,e.options.enableInputRules)&&b&&r.push(...b());const v=ue(c,"addPasteRules",d);Rv(c,e.options.enablePasteRules)&&v&&i.push(...v());const w=ue(c,"addProseMirrorPlugins",d);if(w){const N=w();f.push(...N)}return f}).flat();return[FT({editor:e,rules:r}),...QT({editor:e,rules:i}),...l]}get attributes(){return cS(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=Uu(this.extensions);return Object.fromEntries(t.filter(r=>!!ue(r,"addNodeView")).map(r=>{const i=this.attributes.filter(f=>f.type===r.name),l={name:r.name,options:r.options,storage:r.storage,editor:e,type:kt(r.name,this.schema)},c=ue(r,"addNodeView",l);if(!c)return[];const d=(f,h,g,y,b)=>{const v=_p(f,i);return c()({node:f,view:h,getPos:g,decorations:y,innerDecorations:b,editor:e,extension:r,HTMLAttributes:v})};return[r.name,d]}))}setupExtensions(){this.extensions.forEach(e=>{var t;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:np(e.name,this.schema)};e.type==="mark"&&(!((t=Te(ue(e,"keepOnSplit",r)))!==null&&t!==void 0)||t)&&this.splittableMarks.push(e.name);const i=ue(e,"onBeforeCreate",r),l=ue(e,"onCreate",r),c=ue(e,"onUpdate",r),d=ue(e,"onSelectionUpdate",r),f=ue(e,"onTransaction",r),h=ue(e,"onFocus",r),g=ue(e,"onBlur",r),y=ue(e,"onDestroy",r);i&&this.editor.on("beforeCreate",i),l&&this.editor.on("create",l),c&&this.editor.on("update",c),d&&this.editor.on("selectionUpdate",d),f&&this.editor.on("transaction",f),h&&this.editor.on("focus",h),g&&this.editor.on("blur",g),y&&this.editor.on("destroy",y)})}}class Kt{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Te(ue(this,"addOptions",{name:this.name}))),this.storage=Te(ue(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Kt(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>qu(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new Kt({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=Te(ue(t,"addOptions",{name:t.name})),t.storage=Te(ue(t,"addStorage",{name:t.name,options:t.options})),t}}function dS(n,e,t){const{from:r,to:i}=e,{blockSeparator:l=`

`,textSerializers:c={}}=t||{};let d="";return n.nodesBetween(r,i,(f,h,g,y)=>{var b;f.isBlock&&h>r&&(d+=l);const v=c==null?void 0:c[f.type.name];if(v)return g&&(d+=v({node:f,pos:h,parent:g,index:y,range:e})),!1;f.isText&&(d+=(b=f==null?void 0:f.text)===null||b===void 0?void 0:b.slice(Math.max(r,h)-h,i-h))}),d}function fS(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}const WT=Kt.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new _t({key:new mn("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:r,selection:i}=e,{ranges:l}=i,c=Math.min(...l.map(g=>g.$from.pos)),d=Math.max(...l.map(g=>g.$to.pos)),f=fS(t);return dS(r,{from:c,to:d},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:f})}}})]}}),eM=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())===null||t===void 0||t.removeAllRanges())}),!0),tM=(n=!1)=>({commands:e})=>e.setContent("",n),nM=()=>({state:n,tr:e,dispatch:t})=>{const{selection:r}=e,{ranges:i}=r;return t&&i.forEach(({$from:l,$to:c})=>{n.doc.nodesBetween(l.pos,c.pos,(d,f)=>{if(d.type.isText)return;const{doc:h,mapping:g}=e,y=h.resolve(g.map(f)),b=h.resolve(g.map(f+d.nodeSize)),v=y.blockRange(b);if(!v)return;const w=ba(v);if(d.type.isTextblock){const{defaultType:N}=y.parent.contentMatchAt(y.index());e.setNodeMarkup(v.start,N)}(w||w===0)&&e.lift(v,w)})}),!0},rM=n=>e=>n(e),sM=()=>({state:n,dispatch:e})=>iS(n,e),iM=(n,e)=>({editor:t,tr:r})=>{const{state:i}=t,l=i.doc.slice(n.from,n.to);r.deleteRange(n.from,n.to);const c=r.mapping.map(e);return r.insert(c,l.content),r.setSelection(new ve(r.doc.resolve(c-1))),!0},aM=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,r=t.$anchor.node();if(r.content.size>0)return!1;const i=n.selection.$anchor;for(let l=i.depth;l>0;l-=1)if(i.node(l).type===r.type){if(e){const d=i.before(l),f=i.after(l);n.delete(d,f).scrollIntoView()}return!0}return!1},lM=n=>({tr:e,state:t,dispatch:r})=>{const i=kt(n,t.schema),l=e.selection.$anchor;for(let c=l.depth;c>0;c-=1)if(l.node(c).type===i){if(r){const f=l.before(c),h=l.after(c);e.delete(f,h).scrollIntoView()}return!0}return!1},oM=n=>({tr:e,dispatch:t})=>{const{from:r,to:i}=n;return t&&e.delete(r,i),!0},cM=()=>({state:n,dispatch:e})=>Sm(n,e),uM=()=>({commands:n})=>n.keyboardShortcut("Enter"),dM=()=>({state:n,dispatch:e})=>NT(n,e);function Zc(n,e,t={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>t.strict?e[i]===n[i]:Am(e[i])?e[i].test(n[i]):e[i]===n[i]):!0}function hS(n,e,t={}){return n.find(r=>r.type===e&&Zc(Object.fromEntries(Object.keys(t).map(i=>[i,r.attrs[i]])),t))}function Dv(n,e,t={}){return!!hS(n,e,t)}function Tm(n,e,t){var r;if(!n||!e)return;let i=n.parent.childAfter(n.parentOffset);if((!i.node||!i.node.marks.some(g=>g.type===e))&&(i=n.parent.childBefore(n.parentOffset)),!i.node||!i.node.marks.some(g=>g.type===e)||(t=t||((r=i.node.marks[0])===null||r===void 0?void 0:r.attrs),!hS([...i.node.marks],e,t)))return;let c=i.index,d=n.start()+i.offset,f=c+1,h=d+i.node.nodeSize;for(;c>0&&Dv([...n.parent.child(c-1).marks],e,t);)c-=1,d-=n.parent.child(c).nodeSize;for(;f<n.parent.childCount&&Dv([...n.parent.child(f).marks],e,t);)h+=n.parent.child(f).nodeSize,f+=1;return{from:d,to:h}}function vs(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}const fM=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const l=vs(n,r.schema),{doc:c,selection:d}=t,{$from:f,from:h,to:g}=d;if(i){const y=Tm(f,l,e);if(y&&y.from<=h&&y.to>=g){const b=ve.create(c,y.from,y.to);t.setSelection(b)}}return!0},hM=n=>e=>{const t=typeof n=="function"?n(e):n;for(let r=0;r<t.length;r+=1)if(t[r](e))return!0;return!1};function pS(n){return n instanceof ve}function Js(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function mS(n,e=null){if(!e)return null;const t=Ce.atStart(n),r=Ce.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return r;const i=t.from,l=r.to;return e==="all"?ve.create(n,Js(0,i,l),Js(n.content.size,i,l)):ve.create(n,Js(e,i,l),Js(e,i,l))}function pM(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function Mm(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const mM=(n=null,e={})=>({editor:t,view:r,tr:i,dispatch:l})=>{e={scrollIntoView:!0,...e};const c=()=>{(Mm()||pM())&&r.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};if(r.hasFocus()&&n===null||n===!1)return!0;if(l&&n===null&&!pS(t.state.selection))return c(),!0;const d=mS(i.doc,n)||t.state.selection,f=t.state.selection.eq(d);return l&&(f||i.setSelection(d),f&&i.storedMarks&&i.setStoredMarks(i.storedMarks),c()),!0},gM=(n,e)=>t=>n.every((r,i)=>e(r,{...t,index:i})),yM=(n,e)=>({tr:t,commands:r})=>r.insertContentAt({from:t.selection.from,to:t.selection.to},n,e),gS=n=>{const e=n.childNodes;for(let t=e.length-1;t>=0;t-=1){const r=e[t];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?n.removeChild(r):r.nodeType===1&&gS(r)}return n};function kc(n){const e=`<body>${n}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return gS(t)}function Kl(n,e,t){if(n instanceof ds||n instanceof W)return n;t={slice:!0,parseOptions:{},...t};const r=typeof n=="object"&&n!==null,i=typeof n=="string";if(r)try{if(Array.isArray(n)&&n.length>0)return W.fromArray(n.map(d=>e.nodeFromJSON(d)));const c=e.nodeFromJSON(n);return t.errorOnInvalidContent&&c.check(),c}catch(l){if(t.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:l});return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",l),Kl("",e,t)}if(i){if(t.errorOnInvalidContent){let c=!1,d="";const f=new Q1({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:h=>(c=!0,d=typeof h=="string"?h:h.outerHTML,null)}]}})});if(t.slice?fs.fromSchema(f).parseSlice(kc(n),t.parseOptions):fs.fromSchema(f).parse(kc(n),t.parseOptions),t.errorOnInvalidContent&&c)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${d}`)})}const l=fs.fromSchema(e);return t.slice?l.parseSlice(kc(n),t.parseOptions).content:l.parse(kc(n),t.parseOptions)}return Kl("",e,t)}function xM(n,e,t){const r=n.steps.length-1;if(r<e)return;const i=n.steps[r];if(!(i instanceof Nt||i instanceof Ct))return;const l=n.mapping.maps[r];let c=0;l.forEach((d,f,h,g)=>{c===0&&(c=g)}),n.setSelection(Ce.near(n.doc.resolve(c),t))}const bM=n=>!("type"in n),vM=(n,e,t)=>({tr:r,dispatch:i,editor:l})=>{var c;if(i){t={parseOptions:l.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...t};let d;const f=C=>{l.emit("contentError",{editor:l,error:C,disableCollaboration:()=>{l.storage.collaboration&&(l.storage.collaboration.isDisabled=!0)}})},h={preserveWhitespace:"full",...t.parseOptions};if(!t.errorOnInvalidContent&&!l.options.enableContentCheck&&l.options.emitContentError)try{Kl(e,l.schema,{parseOptions:h,errorOnInvalidContent:!0})}catch(C){f(C)}try{d=Kl(e,l.schema,{parseOptions:h,errorOnInvalidContent:(c=t.errorOnInvalidContent)!==null&&c!==void 0?c:l.options.enableContentCheck})}catch(C){return f(C),!1}let{from:g,to:y}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},b=!0,v=!0;if((bM(d)?d:[d]).forEach(C=>{C.check(),b=b?C.isText&&C.marks.length===0:!1,v=v?C.isBlock:!1}),g===y&&v){const{parent:C}=r.doc.resolve(g);C.isTextblock&&!C.type.spec.code&&!C.childCount&&(g-=1,y+=1)}let N;if(b){if(Array.isArray(e))N=e.map(C=>C.text||"").join("");else if(e instanceof W){let C="";e.forEach(j=>{j.text&&(C+=j.text)}),N=C}else typeof e=="object"&&e&&e.text?N=e.text:N=e;r.insertText(N,g,y)}else N=d,r.replaceWith(g,y,N);t.updateSelection&&xM(r,r.steps.length-1,-1),t.applyInputRules&&r.setMeta("applyInputRules",{from:g,text:N}),t.applyPasteRules&&r.setMeta("applyPasteRules",{from:g,text:N})}return!0},wM=()=>({state:n,dispatch:e})=>vT(n,e),SM=()=>({state:n,dispatch:e})=>wT(n,e),NM=()=>({state:n,dispatch:e})=>Zw(n,e),CM=()=>({state:n,dispatch:e})=>nS(n,e),EM=()=>({state:n,dispatch:e,tr:t})=>{try{const r=Ru(n.doc,n.selection.$from.pos,-1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},kM=()=>({state:n,dispatch:e,tr:t})=>{try{const r=Ru(n.doc,n.selection.$from.pos,1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},jM=()=>({state:n,dispatch:e})=>xT(n,e),AM=()=>({state:n,dispatch:e})=>bT(n,e);function yS(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function TM(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let r,i,l,c;for(let d=0;d<e.length-1;d+=1){const f=e[d];if(/^(cmd|meta|m)$/i.test(f))c=!0;else if(/^a(lt)?$/i.test(f))r=!0;else if(/^(c|ctrl|control)$/i.test(f))i=!0;else if(/^s(hift)?$/i.test(f))l=!0;else if(/^mod$/i.test(f))Mm()||yS()?c=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${f}`)}return r&&(t=`Alt-${t}`),i&&(t=`Ctrl-${t}`),c&&(t=`Meta-${t}`),l&&(t=`Shift-${t}`),t}const MM=n=>({editor:e,view:t,tr:r,dispatch:i})=>{const l=TM(n).split(/-(?!$)/),c=l.find(h=>!["Alt","Ctrl","Meta","Shift"].includes(h)),d=new KeyboardEvent("keydown",{key:c==="Space"?" ":c,altKey:l.includes("Alt"),ctrlKey:l.includes("Ctrl"),metaKey:l.includes("Meta"),shiftKey:l.includes("Shift"),bubbles:!0,cancelable:!0}),f=e.captureTransaction(()=>{t.someProp("handleKeyDown",h=>h(t,d))});return f==null||f.steps.forEach(h=>{const g=h.map(r.mapping);g&&i&&r.maybeStep(g)}),!0};function Xl(n,e,t={}){const{from:r,to:i,empty:l}=n.selection,c=e?kt(e,n.schema):null,d=[];n.doc.nodesBetween(r,i,(y,b)=>{if(y.isText)return;const v=Math.max(r,b),w=Math.min(i,b+y.nodeSize);d.push({node:y,from:v,to:w})});const f=i-r,h=d.filter(y=>c?c.name===y.node.type.name:!0).filter(y=>Zc(y.node.attrs,t,{strict:!1}));return l?!!h.length:h.reduce((y,b)=>y+b.to-b.from,0)>=f}const OM=(n,e={})=>({state:t,dispatch:r})=>{const i=kt(n,t.schema);return Xl(t,i,e)?ST(t,r):!1},RM=()=>({state:n,dispatch:e})=>aS(n,e),DM=n=>({state:e,dispatch:t})=>{const r=kt(n,e.schema);return LT(r)(e,t)},LM=()=>({state:n,dispatch:e})=>sS(n,e);function Vu(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function Lv(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((r,i)=>(t.includes(i)||(r[i]=n[i]),r),{})}const _M=(n,e)=>({tr:t,state:r,dispatch:i})=>{let l=null,c=null;const d=Vu(typeof n=="string"?n:n.name,r.schema);return d?(d==="node"&&(l=kt(n,r.schema)),d==="mark"&&(c=vs(n,r.schema)),i&&t.selection.ranges.forEach(f=>{r.doc.nodesBetween(f.$from.pos,f.$to.pos,(h,g)=>{l&&l===h.type&&t.setNodeMarkup(g,void 0,Lv(h.attrs,e)),c&&h.marks.length&&h.marks.forEach(y=>{c===y.type&&t.addMark(g,g+h.nodeSize,c.create(Lv(y.attrs,e)))})})}),!0):!1},zM=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),BM=()=>({tr:n,dispatch:e})=>{if(e){const t=new hn(n.doc);n.setSelection(t)}return!0},PM=()=>({state:n,dispatch:e})=>eS(n,e),HM=()=>({state:n,dispatch:e})=>rS(n,e),UM=()=>({state:n,dispatch:e})=>kT(n,e),IM=()=>({state:n,dispatch:e})=>TT(n,e),qM=()=>({state:n,dispatch:e})=>AT(n,e);function zp(n,e,t={},r={}){return Kl(n,e,{slice:!1,parseOptions:t,errorOnInvalidContent:r.errorOnInvalidContent})}const VM=(n,e=!1,t={},r={})=>({editor:i,tr:l,dispatch:c,commands:d})=>{var f,h;const{doc:g}=l;if(t.preserveWhitespace!=="full"){const y=zp(n,i.schema,t,{errorOnInvalidContent:(f=r.errorOnInvalidContent)!==null&&f!==void 0?f:i.options.enableContentCheck});return c&&l.replaceWith(0,g.content.size,y).setMeta("preventUpdate",!e),!0}return c&&l.setMeta("preventUpdate",!e),d.insertContentAt({from:0,to:g.content.size},n,{parseOptions:t,errorOnInvalidContent:(h=r.errorOnInvalidContent)!==null&&h!==void 0?h:i.options.enableContentCheck})};function xS(n,e){const t=vs(e,n.schema),{from:r,to:i,empty:l}=n.selection,c=[];l?(n.storedMarks&&c.push(...n.storedMarks),c.push(...n.selection.$head.marks())):n.doc.nodesBetween(r,i,f=>{c.push(...f.marks)});const d=c.find(f=>f.type.name===t.name);return d?{...d.attrs}:{}}function FM(n,e){const t=new hw(n);return e.forEach(r=>{r.steps.forEach(i=>{t.step(i)})}),t}function $M(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function GM(n,e,t){const r=[];return n.nodesBetween(e.from,e.to,(i,l)=>{t(i)&&r.push({node:i,pos:l})}),r}function YM(n,e){for(let t=n.depth;t>0;t-=1){const r=n.node(t);if(e(r))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:r}}}function Om(n){return e=>YM(e.$from,n)}function KM(n,e){const t={from:0,to:n.content.size};return dS(n,t,e)}function XM(n,e){const t=kt(e,n.schema),{from:r,to:i}=n.selection,l=[];n.doc.nodesBetween(r,i,d=>{l.push(d)});const c=l.reverse().find(d=>d.type.name===t.name);return c?{...c.attrs}:{}}function bS(n,e){const t=Vu(typeof e=="string"?e:e.name,n.schema);return t==="node"?XM(n,e):t==="mark"?xS(n,e):{}}function JM(n,e=JSON.stringify){const t={};return n.filter(r=>{const i=e(r);return Object.prototype.hasOwnProperty.call(t,i)?!1:t[i]=!0})}function QM(n){const e=JM(n);return e.length===1?e:e.filter((t,r)=>!e.filter((l,c)=>c!==r).some(l=>t.oldRange.from>=l.oldRange.from&&t.oldRange.to<=l.oldRange.to&&t.newRange.from>=l.newRange.from&&t.newRange.to<=l.newRange.to))}function ZM(n){const{mapping:e,steps:t}=n,r=[];return e.maps.forEach((i,l)=>{const c=[];if(i.ranges.length)i.forEach((d,f)=>{c.push({from:d,to:f})});else{const{from:d,to:f}=t[l];if(d===void 0||f===void 0)return;c.push({from:d,to:f})}c.forEach(({from:d,to:f})=>{const h=e.slice(l).map(d,-1),g=e.slice(l).map(f),y=e.invert().map(h,-1),b=e.invert().map(g);r.push({oldRange:{from:y,to:b},newRange:{from:h,to:g}})})}),QM(r)}function Rm(n,e,t){const r=[];return n===e?t.resolve(n).marks().forEach(i=>{const l=t.resolve(n),c=Tm(l,i.type);c&&r.push({mark:i,...c})}):t.nodesBetween(n,e,(i,l)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(c=>({from:l,to:l+i.nodeSize,mark:c})))}),r}function zc(n,e,t){return Object.fromEntries(Object.entries(t).filter(([r])=>{const i=n.find(l=>l.type===e&&l.name===r);return i?i.attribute.keepOnSplit:!1}))}function Bp(n,e,t={}){const{empty:r,ranges:i}=n.selection,l=e?vs(e,n.schema):null;if(r)return!!(n.storedMarks||n.selection.$from.marks()).filter(y=>l?l.name===y.type.name:!0).find(y=>Zc(y.attrs,t,{strict:!1}));let c=0;const d=[];if(i.forEach(({$from:y,$to:b})=>{const v=y.pos,w=b.pos;n.doc.nodesBetween(v,w,(N,C)=>{if(!N.isText&&!N.marks.length)return;const j=Math.max(v,C),O=Math.min(w,C+N.nodeSize),M=O-j;c+=M,d.push(...N.marks.map(A=>({mark:A,from:j,to:O})))})}),c===0)return!1;const f=d.filter(y=>l?l.name===y.mark.type.name:!0).filter(y=>Zc(y.mark.attrs,t,{strict:!1})).reduce((y,b)=>y+b.to-b.from,0),h=d.filter(y=>l?y.mark.type!==l&&y.mark.type.excludes(l):!0).reduce((y,b)=>y+b.to-b.from,0);return(f>0?f+h:f)>=c}function WM(n,e,t={}){if(!e)return Xl(n,null,t)||Bp(n,null,t);const r=Vu(e,n.schema);return r==="node"?Xl(n,e,t):r==="mark"?Bp(n,e,t):!1}function _v(n,e){const{nodeExtensions:t}=Uu(e),r=t.find(c=>c.name===n);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},l=Te(ue(r,"group",i));return typeof l!="string"?!1:l.split(" ").includes("list")}function Dm(n,{checkChildren:e=!0,ignoreWhitespace:t=!1}={}){var r;if(t){if(n.type.name==="hardBreak")return!0;if(n.isText)return/^\s*$/m.test((r=n.text)!==null&&r!==void 0?r:"")}if(n.isText)return!n.text;if(n.isAtom||n.isLeaf)return!1;if(n.content.childCount===0)return!0;if(e){let i=!0;return n.content.forEach(l=>{i!==!1&&(Dm(l,{ignoreWhitespace:t,checkChildren:e})||(i=!1))}),i}return!1}function eO(n){return n instanceof me}function tO(n,e,t){var r;const{selection:i}=e;let l=null;if(pS(i)&&(l=i.$cursor),l){const d=(r=n.storedMarks)!==null&&r!==void 0?r:l.marks();return!!t.isInSet(d)||!d.some(f=>f.type.excludes(t))}const{ranges:c}=i;return c.some(({$from:d,$to:f})=>{let h=d.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(d.pos,f.pos,(g,y,b)=>{if(h)return!1;if(g.isInline){const v=!b||b.type.allowsMarkType(t),w=!!t.isInSet(g.marks)||!g.marks.some(N=>N.type.excludes(t));h=v&&w}return!h}),h})}const nO=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const{selection:l}=t,{empty:c,ranges:d}=l,f=vs(n,r.schema);if(i)if(c){const h=xS(r,f);t.addStoredMark(f.create({...h,...e}))}else d.forEach(h=>{const g=h.$from.pos,y=h.$to.pos;r.doc.nodesBetween(g,y,(b,v)=>{const w=Math.max(v,g),N=Math.min(v+b.nodeSize,y);b.marks.find(j=>j.type===f)?b.marks.forEach(j=>{f===j.type&&t.addMark(w,N,f.create({...j.attrs,...e}))}):t.addMark(w,N,f.create(e))})});return tO(r,t,f)},rO=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),sO=(n,e={})=>({state:t,dispatch:r,chain:i})=>{const l=kt(n,t.schema);let c;return t.selection.$anchor.sameParent(t.selection.$head)&&(c=t.selection.$anchor.parent.attrs),l.isTextblock?i().command(({commands:d})=>Tv(l,{...c,...e})(t)?!0:d.clearNodes()).command(({state:d})=>Tv(l,{...c,...e})(d,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},iO=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,i=Js(n,0,r.content.size),l=me.create(r,i);e.setSelection(l)}return!0},aO=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,{from:i,to:l}=typeof n=="number"?{from:n,to:n}:n,c=ve.atStart(r).from,d=ve.atEnd(r).to,f=Js(i,c,d),h=Js(l,c,d),g=ve.create(r,f,h);e.setSelection(g)}return!0},lO=n=>({state:e,dispatch:t})=>{const r=kt(n,e.schema);return BT(r)(e,t)};function zv(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const r=t.filter(i=>e==null?void 0:e.includes(i.type.name));n.tr.ensureMarks(r)}}const oO=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:r,editor:i})=>{const{selection:l,doc:c}=e,{$from:d,$to:f}=l,h=i.extensionManager.attributes,g=zc(h,d.node().type.name,d.node().attrs);if(l instanceof me&&l.node.isBlock)return!d.parentOffset||!Sr(c,d.pos)?!1:(r&&(n&&zv(t,i.extensionManager.splittableMarks),e.split(d.pos).scrollIntoView()),!0);if(!d.parent.isBlock)return!1;const y=f.parentOffset===f.parent.content.size,b=d.depth===0?void 0:$M(d.node(-1).contentMatchAt(d.indexAfter(-1)));let v=y&&b?[{type:b,attrs:g}]:void 0,w=Sr(e.doc,e.mapping.map(d.pos),1,v);if(!v&&!w&&Sr(e.doc,e.mapping.map(d.pos),1,b?[{type:b}]:void 0)&&(w=!0,v=b?[{type:b,attrs:g}]:void 0),r){if(w&&(l instanceof ve&&e.deleteSelection(),e.split(e.mapping.map(d.pos),1,v),b&&!y&&!d.parentOffset&&d.parent.type!==b)){const N=e.mapping.map(d.before()),C=e.doc.resolve(N);d.node(-1).canReplaceWith(C.index(),C.index()+1,b)&&e.setNodeMarkup(e.mapping.map(d.before()),b)}n&&zv(t,i.extensionManager.splittableMarks),e.scrollIntoView()}return w},cO=(n,e={})=>({tr:t,state:r,dispatch:i,editor:l})=>{var c;const d=kt(n,r.schema),{$from:f,$to:h}=r.selection,g=r.selection.node;if(g&&g.isBlock||f.depth<2||!f.sameParent(h))return!1;const y=f.node(-1);if(y.type!==d)return!1;const b=l.extensionManager.attributes;if(f.parent.content.size===0&&f.node(-1).childCount===f.indexAfter(-1)){if(f.depth===2||f.node(-3).type!==d||f.index(-2)!==f.node(-2).childCount-1)return!1;if(i){let j=W.empty;const O=f.index(-1)?1:f.index(-2)?2:3;for(let _=f.depth-O;_>=f.depth-3;_-=1)j=W.from(f.node(_).copy(j));const M=f.indexAfter(-1)<f.node(-2).childCount?1:f.indexAfter(-2)<f.node(-3).childCount?2:3,A={...zc(b,f.node().type.name,f.node().attrs),...e},L=((c=d.contentMatch.defaultType)===null||c===void 0?void 0:c.createAndFill(A))||void 0;j=j.append(W.from(d.createAndFill(null,L)||void 0));const B=f.before(f.depth-(O-1));t.replace(B,f.after(-M),new ae(j,4-O,0));let F=-1;t.doc.nodesBetween(B,t.doc.content.size,(_,re)=>{if(F>-1)return!1;_.isTextblock&&_.content.size===0&&(F=re+1)}),F>-1&&t.setSelection(ve.near(t.doc.resolve(F))),t.scrollIntoView()}return!0}const v=h.pos===f.end()?y.contentMatchAt(0).defaultType:null,w={...zc(b,y.type.name,y.attrs),...e},N={...zc(b,f.node().type.name,f.node().attrs),...e};t.delete(f.pos,h.pos);const C=v?[{type:d,attrs:w},{type:v,attrs:N}]:[{type:d,attrs:w}];if(!Sr(t.doc,f.pos,2))return!1;if(i){const{selection:j,storedMarks:O}=r,{splittableMarks:M}=l.extensionManager,A=O||j.$to.parentOffset&&j.$from.marks();if(t.split(f.pos,2,C).scrollIntoView(),!A||!i)return!0;const L=A.filter(B=>M.includes(B.type.name));t.ensureMarks(L)}return!0},rp=(n,e)=>{const t=Om(c=>c.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&xs(n.doc,t.pos)&&n.join(t.pos),!0},sp=(n,e)=>{const t=Om(c=>c.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(t.start).after(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&xs(n.doc,r)&&n.join(r),!0},uO=(n,e,t,r={})=>({editor:i,tr:l,state:c,dispatch:d,chain:f,commands:h,can:g})=>{const{extensions:y,splittableMarks:b}=i.extensionManager,v=kt(n,c.schema),w=kt(e,c.schema),{selection:N,storedMarks:C}=c,{$from:j,$to:O}=N,M=j.blockRange(O),A=C||N.$to.parentOffset&&N.$from.marks();if(!M)return!1;const L=Om(B=>_v(B.type.name,y))(N);if(M.depth>=1&&L&&M.depth-L.depth<=1){if(L.node.type===v)return h.liftListItem(w);if(_v(L.node.type.name,y)&&v.validContent(L.node.content)&&d)return f().command(()=>(l.setNodeMarkup(L.pos,v),!0)).command(()=>rp(l,v)).command(()=>sp(l,v)).run()}return!t||!A||!d?f().command(()=>g().wrapInList(v,r)?!0:h.clearNodes()).wrapInList(v,r).command(()=>rp(l,v)).command(()=>sp(l,v)).run():f().command(()=>{const B=g().wrapInList(v,r),F=A.filter(_=>b.includes(_.type.name));return l.ensureMarks(F),B?!0:h.clearNodes()}).wrapInList(v,r).command(()=>rp(l,v)).command(()=>sp(l,v)).run()},dO=(n,e={},t={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:l=!1}=t,c=vs(n,r.schema);return Bp(r,c,e)?i.unsetMark(c,{extendEmptyMarkRange:l}):i.setMark(c,e)},fO=(n,e,t={})=>({state:r,commands:i})=>{const l=kt(n,r.schema),c=kt(e,r.schema),d=Xl(r,l,t);let f;return r.selection.$anchor.sameParent(r.selection.$head)&&(f=r.selection.$anchor.parent.attrs),d?i.setNode(c,f):i.setNode(l,{...f,...t})},hO=(n,e={})=>({state:t,commands:r})=>{const i=kt(n,t.schema);return Xl(t,i,e)?r.lift(i):r.wrapIn(i,e)},pO=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let r=0;r<t.length;r+=1){const i=t[r];let l;if(i.spec.isInputRules&&(l=i.getState(n))){if(e){const c=n.tr,d=l.transform;for(let f=d.steps.length-1;f>=0;f-=1)c.step(d.steps[f].invert(d.docs[f]));if(l.text){const f=c.doc.resolve(l.from).marks();c.replaceWith(l.from,l.to,n.schema.text(l.text,f))}else c.delete(l.from,l.to)}return!0}}return!1},mO=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:r,ranges:i}=t;return r||e&&i.forEach(l=>{n.removeMark(l.$from.pos,l.$to.pos)}),!0},gO=(n,e={})=>({tr:t,state:r,dispatch:i})=>{var l;const{extendEmptyMarkRange:c=!1}=e,{selection:d}=t,f=vs(n,r.schema),{$from:h,empty:g,ranges:y}=d;if(!i)return!0;if(g&&c){let{from:b,to:v}=d;const w=(l=h.marks().find(C=>C.type===f))===null||l===void 0?void 0:l.attrs,N=Tm(h,f,w);N&&(b=N.from,v=N.to),t.removeMark(b,v,f)}else y.forEach(b=>{t.removeMark(b.$from.pos,b.$to.pos,f)});return t.removeStoredMark(f),!0},yO=(n,e={})=>({tr:t,state:r,dispatch:i})=>{let l=null,c=null;const d=Vu(typeof n=="string"?n:n.name,r.schema);return d?(d==="node"&&(l=kt(n,r.schema)),d==="mark"&&(c=vs(n,r.schema)),i&&t.selection.ranges.forEach(f=>{const h=f.$from.pos,g=f.$to.pos;let y,b,v,w;t.selection.empty?r.doc.nodesBetween(h,g,(N,C)=>{l&&l===N.type&&(v=Math.max(C,h),w=Math.min(C+N.nodeSize,g),y=C,b=N)}):r.doc.nodesBetween(h,g,(N,C)=>{C<h&&l&&l===N.type&&(v=Math.max(C,h),w=Math.min(C+N.nodeSize,g),y=C,b=N),C>=h&&C<=g&&(l&&l===N.type&&t.setNodeMarkup(C,void 0,{...N.attrs,...e}),c&&N.marks.length&&N.marks.forEach(j=>{if(c===j.type){const O=Math.max(C,h),M=Math.min(C+N.nodeSize,g);t.addMark(O,M,c.create({...j.attrs,...e}))}}))}),b&&(y!==void 0&&t.setNodeMarkup(y,void 0,{...b.attrs,...e}),c&&b.marks.length&&b.marks.forEach(N=>{c===N.type&&t.addMark(v,w,c.create({...N.attrs,...e}))}))}),!0):!1},xO=(n,e={})=>({state:t,dispatch:r})=>{const i=kt(n,t.schema);return MT(i,e)(t,r)},bO=(n,e={})=>({state:t,dispatch:r})=>{const i=kt(n,t.schema);return OT(i,e)(t,r)};var vO=Object.freeze({__proto__:null,blur:eM,clearContent:tM,clearNodes:nM,command:rM,createParagraphNear:sM,cut:iM,deleteCurrentNode:aM,deleteNode:lM,deleteRange:oM,deleteSelection:cM,enter:uM,exitCode:dM,extendMarkRange:fM,first:hM,focus:mM,forEach:gM,insertContent:yM,insertContentAt:vM,joinBackward:NM,joinDown:SM,joinForward:CM,joinItemBackward:EM,joinItemForward:kM,joinTextblockBackward:jM,joinTextblockForward:AM,joinUp:wM,keyboardShortcut:MM,lift:OM,liftEmptyBlock:RM,liftListItem:DM,newlineInCode:LM,resetAttributes:_M,scrollIntoView:zM,selectAll:BM,selectNodeBackward:PM,selectNodeForward:HM,selectParentNode:UM,selectTextblockEnd:IM,selectTextblockStart:qM,setContent:VM,setMark:nO,setMeta:rO,setNode:sO,setNodeSelection:iO,setTextSelection:aO,sinkListItem:lO,splitBlock:oO,splitListItem:cO,toggleList:uO,toggleMark:dO,toggleNode:fO,toggleWrap:hO,undoInputRule:pO,unsetAllMarks:mO,unsetMark:gO,updateAttributes:yO,wrapIn:xO,wrapInList:bO});const wO=Kt.create({name:"commands",addCommands(){return{...vO}}}),SO=Kt.create({name:"drop",addProseMirrorPlugins(){return[new _t({key:new mn("tiptapDrop"),props:{handleDrop:(n,e,t,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:t,moved:r})}}})]}}),NO=Kt.create({name:"editable",addProseMirrorPlugins(){return[new _t({key:new mn("editable"),props:{editable:()=>this.editor.options.editable}})]}}),CO=new mn("focusEvents"),EO=Kt.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new _t({key:CO,props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const r=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,t)=>{n.isFocused=!1;const r=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),kO=Kt.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:c})=>[()=>c.undoInputRule(),()=>c.command(({tr:d})=>{const{selection:f,doc:h}=d,{empty:g,$anchor:y}=f,{pos:b,parent:v}=y,w=y.parent.isTextblock&&b>0?d.doc.resolve(b-1):y,N=w.parent.type.spec.isolating,C=y.pos-y.parentOffset,j=N&&w.parent.childCount===1?C===y.pos:Ce.atStart(h).from===b;return!g||!v.type.isTextblock||v.textContent.length||!j||j&&y.parent.type.name==="paragraph"?!1:c.clearNodes()}),()=>c.deleteSelection(),()=>c.joinBackward(),()=>c.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:c})=>[()=>c.deleteSelection(),()=>c.deleteCurrentNode(),()=>c.joinForward(),()=>c.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:c})=>[()=>c.newlineInCode(),()=>c.createParagraphNear(),()=>c.liftEmptyBlock(),()=>c.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},l={...r,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Mm()||yS()?l:i},addProseMirrorPlugins(){return[new _t({key:new mn("clearDocument"),appendTransaction:(n,e,t)=>{if(n.some(N=>N.getMeta("composition")))return;const r=n.some(N=>N.docChanged)&&!e.doc.eq(t.doc),i=n.some(N=>N.getMeta("preventClearDocument"));if(!r||i)return;const{empty:l,from:c,to:d}=e.selection,f=Ce.atStart(e.doc).from,h=Ce.atEnd(e.doc).to;if(l||!(c===f&&d===h)||!Dm(t.doc))return;const b=t.tr,v=Pu({state:t,transaction:b}),{commands:w}=new Hu({editor:this.editor,state:v});if(w.clearNodes(),!!b.steps.length)return b}})]}}),jO=Kt.create({name:"paste",addProseMirrorPlugins(){return[new _t({key:new mn("tiptapPaste"),props:{handlePaste:(n,e,t)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:t})}}})]}}),AO=Kt.create({name:"tabindex",addProseMirrorPlugins(){return[new _t({key:new mn("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class Ys{get name(){return this.node.type.name}constructor(e,t,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=t,this.currentNode=i}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let t=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You can’t set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}t=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:t,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),t=this.resolvedPos.doc.resolve(e);return new Ys(t,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Ys(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Ys(e,this.editor)}get children(){const e=[];return this.node.content.forEach((t,r)=>{const i=t.isBlock&&!t.isTextblock,l=t.isAtom&&!t.isText,c=this.pos+r+(l?0:1),d=this.resolvedPos.doc.resolve(c);if(!i&&d.depth<=this.depth)return;const f=new Ys(d,this.editor,i,i?t:null);i&&(f.actualDepth=this.depth+1),e.push(new Ys(d,this.editor,i,i?t:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,t={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(t).length>0){const l=i.node.attrs,c=Object.keys(t);for(let d=0;d<c.length;d+=1){const f=c[d];if(l[f]!==t[f])break}}else r=i;i=i.parent}return r}querySelector(e,t={}){return this.querySelectorAll(e,t,!0)[0]||null}querySelectorAll(e,t={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const l=Object.keys(t);return this.children.forEach(c=>{r&&i.length>0||(c.node.type.name===e&&l.every(f=>t[f]===c.node.attrs[f])&&i.push(c),!(r&&i.length>0)&&(i=i.concat(c.querySelectorAll(e,t,r))))}),i}setAttribute(e){const{tr:t}=this.editor.state;t.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(t)}}const TO=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function MO(n,e,t){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=n,document.getElementsByTagName("head")[0].appendChild(i),i}class OO extends PT{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:t})=>{throw t},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:t,slice:r,moved:i})=>this.options.onDrop(t,r,i)),this.on("paste",({event:t,slice:r})=>this.options.onPaste(t,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=MO(TO,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,t){const r=uS(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}unregisterPlugin(e){if(this.isDestroyed)return;const t=this.state.plugins;let r=t;if([].concat(e).forEach(l=>{const c=typeof l=="string"?`${l}$`:l.key;r=r.filter(d=>!d.key.startsWith(c))}),t.length===r.length)return;const i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}createExtensionManager(){var e,t;const i=[...this.options.enableCoreExtensions?[NO,WT.configure({blockSeparator:(t=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||t===void 0?void 0:t.blockSeparator}),wO,EO,kO,AO,SO,jO].filter(l=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[l.name]!==!1:!0):[],...this.options.extensions].filter(l=>["extension","node","mark"].includes(l==null?void 0:l.type));this.extensionManager=new ia(i,this)}createCommandManager(){this.commandManager=new Hu({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let t;try{t=zp(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(c){if(!(c instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(c.message))throw c;this.emit("contentError",{editor:this,error:c,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(d=>d.name!=="collaboration"),this.createExtensionManager()}}),t=zp(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const r=mS(t,this.options.autofocus);this.view=new Xw(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:sa.create({doc:t,selection:r||void 0})});const i=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(i),this.createNodeViews(),this.prependClass();const l=this.view.dom;l.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(c=>{var d;return(d=this.capturedTransaction)===null||d===void 0?void 0:d.step(c)});return}const t=this.state.apply(e),r=!this.state.selection.eq(t.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const i=e.getMeta("focus"),l=e.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:e}),l&&this.emit("blur",{editor:this,event:l.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return bS(this.state,e)}isActive(e,t){const r=typeof e=="string"?e:null,i=typeof e=="string"?t:e;return WM(this.state,r,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return jm(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:r={}}=e||{};return KM(this.state.doc,{blockSeparator:t,textSerializers:{...fS(this.schema),...r}})}get isEmpty(){return Dm(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,t){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,t))||null}$nodes(e,t){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new Ys(t,this)}get $doc(){return this.$pos(0)}}function ha(n){return new Iu({find:n.find,handler:({state:e,range:t,match:r})=>{const i=Te(n.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:l}=e,c=r[r.length-1],d=r[0];if(c){const f=d.search(/\S/),h=t.from+d.indexOf(c),g=h+c.length;if(Rm(t.from,t.to,e.doc).filter(v=>v.mark.type.excluded.find(N=>N===n.type&&N!==v.mark.type)).filter(v=>v.to>h).length)return null;g<t.to&&l.delete(g,t.to),h>t.from&&l.delete(t.from+f,h);const b=t.from+f+c.length;l.addMark(t.from+f,b,n.type.create(i||{})),l.removeStoredMark(n.type)}}})}function vS(n){return new Iu({find:n.find,handler:({state:e,range:t,match:r})=>{const i=Te(n.getAttributes,void 0,r)||{},{tr:l}=e,c=t.from;let d=t.to;const f=n.type.create(i);if(r[1]){const h=r[0].lastIndexOf(r[1]);let g=c+h;g>d?g=d:d=g+r[1].length;const y=r[0][r[0].length-1];l.insertText(y,c+r[0].length-1),l.replaceWith(g,d,f)}else if(r[0]){const h=n.type.isInline?c:c-1;l.insert(h,n.type.create(i)).delete(l.mapping.map(c),l.mapping.map(d))}l.scrollIntoView()}})}function Pp(n){return new Iu({find:n.find,handler:({state:e,range:t,match:r})=>{const i=e.doc.resolve(t.from),l=Te(n.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),n.type))return null;e.tr.delete(t.from,t.to).setBlockType(t.from,t.from,n.type,l)}})}function Jl(n){return new Iu({find:n.find,handler:({state:e,range:t,match:r,chain:i})=>{const l=Te(n.getAttributes,void 0,r)||{},c=e.tr.delete(t.from,t.to),f=c.doc.resolve(t.from).blockRange(),h=f&&dm(f,n.type,l);if(!h)return null;if(c.wrap(f,h),n.keepMarks&&n.editor){const{selection:y,storedMarks:b}=e,{splittableMarks:v}=n.editor.extensionManager,w=b||y.$to.parentOffset&&y.$from.marks();if(w){const N=w.filter(C=>v.includes(C.type.name));c.ensureMarks(N)}}if(n.keepAttributes){const y=n.type.name==="bulletList"||n.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(y,l).run()}const g=c.doc.resolve(t.from-1).nodeBefore;g&&g.type===n.type&&xs(c.doc,t.from-1)&&(!n.joinPredicate||n.joinPredicate(r,g))&&c.join(t.from-1)}})}class Xt{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Te(ue(this,"addOptions",{name:this.name}))),this.storage=Te(ue(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Xt(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>qu(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new Xt(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=Te(ue(t,"addOptions",{name:t.name})),t.storage=Te(ue(t,"addStorage",{name:t.name,options:t.options})),t}}function oi(n){return new YT({find:n.find,handler:({state:e,range:t,match:r,pasteEvent:i})=>{const l=Te(n.getAttributes,void 0,r,i);if(l===!1||l===null)return null;const{tr:c}=e,d=r[r.length-1],f=r[0];let h=t.to;if(d){const g=f.search(/\S/),y=t.from+f.indexOf(d),b=y+d.length;if(Rm(t.from,t.to,e.doc).filter(w=>w.mark.type.excluded.find(C=>C===n.type&&C!==w.mark.type)).filter(w=>w.to>y).length)return null;b<t.to&&c.delete(b,t.to),y>t.from&&c.delete(t.from+g,y),h=t.from+g+d.length,c.addMark(t.from+g,h,n.type.create(l||{})),c.removeStoredMark(n.type)}}})}function RO(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var wS={exports:{}},ip={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bv;function DO(){if(Bv)return ip;Bv=1;var n=we;function e(y,b){return y===b&&(y!==0||1/y===1/b)||y!==y&&b!==b}var t=typeof Object.is=="function"?Object.is:e,r=n.useState,i=n.useEffect,l=n.useLayoutEffect,c=n.useDebugValue;function d(y,b){var v=b(),w=r({inst:{value:v,getSnapshot:b}}),N=w[0].inst,C=w[1];return l(function(){N.value=v,N.getSnapshot=b,f(N)&&C({inst:N})},[y,v,b]),i(function(){return f(N)&&C({inst:N}),y(function(){f(N)&&C({inst:N})})},[y]),c(v),v}function f(y){var b=y.getSnapshot;y=y.value;try{var v=b();return!t(y,v)}catch{return!0}}function h(y,b){return b()}var g=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:d;return ip.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:g,ip}wS.exports=DO();var Lm=wS.exports;const LO=(...n)=>e=>{n.forEach(t=>{typeof t=="function"?t(e):t&&(t.current=e)})},_O=({contentComponent:n})=>{const e=Lm.useSyncExternalStore(n.subscribe,n.getSnapshot,n.getServerSnapshot);return we.createElement(we.Fragment,null,Object.values(e))};function zO(){const n=new Set;let e={};return{subscribe(t){return n.add(t),()=>{n.delete(t)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(t,r){e={...e,[t]:LE.createPortal(r.reactElement,r.element,t)},n.forEach(i=>i())},removeRenderer(t){const r={...e};delete r[t],e=r,n.forEach(i=>i())}}}class BO extends we.Component{constructor(e){var t;super(e),this.editorContentRef=we.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(!((t=e.editor)===null||t===void 0)&&t.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const t=this.editorContentRef.current;t.append(...e.options.element.childNodes),e.setOptions({element:t}),e.contentComponent=zO(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild))return;const t=document.createElement("div");t.append(...e.options.element.childNodes),e.setOptions({element:t})}render(){const{editor:e,innerRef:t,...r}=this.props;return we.createElement(we.Fragment,null,we.createElement("div",{ref:LO(t,this.editorContentRef),...r}),(e==null?void 0:e.contentComponent)&&we.createElement(_O,{contentComponent:e.contentComponent}))}}const PO=E.forwardRef((n,e)=>{const t=we.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[n.editor]);return we.createElement(BO,{key:t,innerRef:e,...n})}),HO=we.memo(PO);var UO=function n(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,i,l;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(i=r;i--!==0;)if(!n(e[i],t[i]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(i of e.entries())if(!t.has(i[0]))return!1;for(i of e.entries())if(!n(i[1],t.get(i[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(i of e.entries())if(!t.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(r=e.length,r!=t.length)return!1;for(i=r;i--!==0;)if(e[i]!==t[i])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(l=Object.keys(e),r=l.length,r!==Object.keys(t).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(t,l[i]))return!1;for(i=r;i--!==0;){var c=l[i];if(!(c==="_owner"&&e.$$typeof)&&!n(e[c],t[c]))return!1}return!0}return e!==e&&t!==t},IO=RO(UO),SS={exports:{}},ap={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pv;function qO(){if(Pv)return ap;Pv=1;var n=we,e=Lm;function t(h,g){return h===g&&(h!==0||1/h===1/g)||h!==h&&g!==g}var r=typeof Object.is=="function"?Object.is:t,i=e.useSyncExternalStore,l=n.useRef,c=n.useEffect,d=n.useMemo,f=n.useDebugValue;return ap.useSyncExternalStoreWithSelector=function(h,g,y,b,v){var w=l(null);if(w.current===null){var N={hasValue:!1,value:null};w.current=N}else N=w.current;w=d(function(){function j(B){if(!O){if(O=!0,M=B,B=b(B),v!==void 0&&N.hasValue){var F=N.value;if(v(F,B))return A=F}return A=B}if(F=A,r(M,B))return F;var _=b(B);return v!==void 0&&v(F,_)?F:(M=B,A=_)}var O=!1,M,A,L=y===void 0?null:y;return[function(){return j(g())},L===null?void 0:function(){return j(L())}]},[g,y,b,v]);var C=i(h,w[0],w[1]);return c(function(){N.hasValue=!0,N.value=C},[C]),f(C),C},ap}SS.exports=qO();var VO=SS.exports;const FO=typeof window<"u"?E.useLayoutEffect:E.useEffect;class $O{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const t=()=>{this.transactionNumber+=1,this.subscribers.forEach(i=>i())},r=this.editor;return r.on("transaction",t),()=>{r.off("transaction",t)}}}}function GO(n){var e;const[t]=E.useState(()=>new $O(n.editor)),r=VO.useSyncExternalStoreWithSelector(t.subscribe,t.getSnapshot,t.getServerSnapshot,n.selector,(e=n.equalityFn)!==null&&e!==void 0?e:IO);return FO(()=>t.watch(n.editor),[n.editor,t]),E.useDebugValue(r),r}const YO=!1,Hp=typeof window>"u",KO=Hp||!!(typeof window<"u"&&window.next);class _m{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(t=>t())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?Hp||KO?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var i,l;return(l=(i=this.options.current).onBeforeCreate)===null||l===void 0?void 0:l.call(i,...r)},onBlur:(...r)=>{var i,l;return(l=(i=this.options.current).onBlur)===null||l===void 0?void 0:l.call(i,...r)},onCreate:(...r)=>{var i,l;return(l=(i=this.options.current).onCreate)===null||l===void 0?void 0:l.call(i,...r)},onDestroy:(...r)=>{var i,l;return(l=(i=this.options.current).onDestroy)===null||l===void 0?void 0:l.call(i,...r)},onFocus:(...r)=>{var i,l;return(l=(i=this.options.current).onFocus)===null||l===void 0?void 0:l.call(i,...r)},onSelectionUpdate:(...r)=>{var i,l;return(l=(i=this.options.current).onSelectionUpdate)===null||l===void 0?void 0:l.call(i,...r)},onTransaction:(...r)=>{var i,l;return(l=(i=this.options.current).onTransaction)===null||l===void 0?void 0:l.call(i,...r)},onUpdate:(...r)=>{var i,l;return(l=(i=this.options.current).onUpdate)===null||l===void 0?void 0:l.call(i,...r)},onContentError:(...r)=>{var i,l;return(l=(i=this.options.current).onContentError)===null||l===void 0?void 0:l.call(i,...r)},onDrop:(...r)=>{var i,l;return(l=(i=this.options.current).onDrop)===null||l===void 0?void 0:l.call(i,...r)},onPaste:(...r)=>{var i,l;return(l=(i=this.options.current).onPaste)===null||l===void 0?void 0:l.call(i,...r)}};return new OO(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,t){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&t.extensions?e.extensions.length!==t.extensions.length?!1:e.extensions.every((i,l)=>{var c;return i===((c=t.extensions)===null||c===void 0?void 0:c[l])}):e[r]===t[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?_m.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,i)=>r===e[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,t=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){t&&t.setOptions(this.options.current);return}t&&!t.isDestroyed&&(t.destroy(),this.instanceId===e&&this.setEditor(null))},1)}}function XO(n={},e=[]){const t=E.useRef(n);t.current=n;const[r]=E.useState(()=>new _m(t)),i=Lm.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return E.useDebugValue(i),E.useEffect(r.onRender(e)),GO({editor:i,selector:({transactionNumber:l})=>n.shouldRerenderOnTransaction===!1?null:n.immediatelyRender&&l===0?0:l+1}),i}const JO=E.createContext({editor:null});JO.Consumer;const QO=E.createContext({onDragStart:void 0}),ZO=()=>E.useContext(QO);we.forwardRef((n,e)=>{const{onDragStart:t}=ZO(),r=n.as||"div";return we.createElement(r,{...n,ref:e,"data-node-view-wrapper":"",onDragStart:t,style:{whiteSpace:"normal",...n.style}})});const WO=/^\s*>\s$/,e4=Xt.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:n}){return["blockquote",jt(this.options.HTMLAttributes,n),0]},addCommands(){return{setBlockquote:()=>({commands:n})=>n.wrapIn(this.name),toggleBlockquote:()=>({commands:n})=>n.toggleWrap(this.name),unsetBlockquote:()=>({commands:n})=>n.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Jl({find:WO,type:this.type})]}}),t4=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,n4=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,r4=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,s4=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,i4=Er.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:n=>n.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:n=>n.type.name===this.name},{style:"font-weight",getAttrs:n=>/^(bold(er)?|[5-9]\d{2,})$/.test(n)&&null}]},renderHTML({HTMLAttributes:n}){return["strong",jt(this.options.HTMLAttributes,n),0]},addCommands(){return{setBold:()=>({commands:n})=>n.setMark(this.name),toggleBold:()=>({commands:n})=>n.toggleMark(this.name),unsetBold:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[ha({find:t4,type:this.type}),ha({find:r4,type:this.type})]},addPasteRules(){return[oi({find:n4,type:this.type}),oi({find:s4,type:this.type})]}}),a4="listItem",Hv="textStyle",Uv=/^\s*([-+*])\s$/,l4=Xt.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:n}){return["ul",jt(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleBulletList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(a4,this.editor.getAttributes(Hv)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let n=Jl({find:Uv,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(n=Jl({find:Uv,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(Hv),editor:this.editor})),[n]}}),o4=/(^|[^`])`([^`]+)`(?!`)/,c4=/(^|[^`])`([^`]+)`(?!`)/g,u4=Er.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:n}){return["code",jt(this.options.HTMLAttributes,n),0]},addCommands(){return{setCode:()=>({commands:n})=>n.setMark(this.name),toggleCode:()=>({commands:n})=>n.toggleMark(this.name),unsetCode:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[ha({find:o4,type:this.type})]},addPasteRules(){return[oi({find:c4,type:this.type})]}}),d4=/^```([a-z]+)?[\s\n]$/,f4=/^~~~([a-z]+)?[\s\n]$/,h4=Xt.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:n=>{var e;const{languageClassPrefix:t}=this.options,l=[...((e=n.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(c=>c.startsWith(t)).map(c=>c.replace(t,""))[0];return l||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:n,HTMLAttributes:e}){return["pre",jt(this.options.HTMLAttributes,e),["code",{class:n.attrs.language?this.options.languageClassPrefix+n.attrs.language:null},0]]},addCommands(){return{setCodeBlock:n=>({commands:e})=>e.setNode(this.name,n),toggleCodeBlock:n=>({commands:e})=>e.toggleNode(this.name,"paragraph",n)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:n,$anchor:e}=this.editor.state.selection,t=e.pos===1;return!n||e.parent.type.name!==this.name?!1:t||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:n})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=n,{selection:t}=e,{$from:r,empty:i}=t;if(!i||r.parent.type!==this.type)return!1;const l=r.parentOffset===r.parent.nodeSize-2,c=r.parent.textContent.endsWith(`

`);return!l||!c?!1:n.chain().command(({tr:d})=>(d.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:n})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=n,{selection:t,doc:r}=e,{$from:i,empty:l}=t;if(!l||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const d=i.after();return d===void 0?!1:r.nodeAt(d)?n.commands.command(({tr:h})=>(h.setSelection(Ce.near(r.resolve(d))),!0)):n.commands.exitCode()}}},addInputRules(){return[Pp({find:d4,type:this.type,getAttributes:n=>({language:n[1]})}),Pp({find:f4,type:this.type,getAttributes:n=>({language:n[1]})})]},addProseMirrorPlugins(){return[new _t({key:new mn("codeBlockVSCodeHandler"),props:{handlePaste:(n,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const t=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,l=i==null?void 0:i.mode;if(!t||!l)return!1;const{tr:c,schema:d}=n.state,f=d.text(t.replace(/\r\n?/g,`
`));return c.replaceSelectionWith(this.type.create({language:l},f)),c.selection.$from.parent.type!==this.type&&c.setSelection(ve.near(c.doc.resolve(Math.max(0,c.selection.from-2)))),c.setMeta("paste",!0),n.dispatch(c),!0}}})]}}),p4=Xt.create({name:"doc",topNode:!0,content:"block+"});function m4(n={}){return new _t({view(e){return new g4(e,n)}})}class g4{constructor(e,t){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=t.width)!==null&&r!==void 0?r:1,this.color=t.color===!1?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let l=c=>{this[i](c)};return e.dom.addEventListener(i,l),{name:i,handler:l}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){this.cursorPos!=null&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),t=!e.parent.inlineContent,r,i=this.editorView.dom,l=i.getBoundingClientRect(),c=l.width/i.offsetWidth,d=l.height/i.offsetHeight;if(t){let y=e.nodeBefore,b=e.nodeAfter;if(y||b){let v=this.editorView.nodeDOM(this.cursorPos-(y?y.nodeSize:0));if(v){let w=v.getBoundingClientRect(),N=y?w.bottom:w.top;y&&b&&(N=(N+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let C=this.width/2*d;r={left:w.left,right:w.right,top:N-C,bottom:N+C}}}}if(!r){let y=this.editorView.coordsAtPos(this.cursorPos),b=this.width/2*c;r={left:y.left-b,right:y.left+b,top:y.top,bottom:y.bottom}}let f=this.editorView.dom.offsetParent;this.element||(this.element=f.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",t),this.element.classList.toggle("prosemirror-dropcursor-inline",!t);let h,g;if(!f||f==document.body&&getComputedStyle(f).position=="static")h=-pageXOffset,g=-pageYOffset;else{let y=f.getBoundingClientRect(),b=y.width/f.offsetWidth,v=y.height/f.offsetHeight;h=y.left-f.scrollLeft*b,g=y.top-f.scrollTop*v}this.element.style.left=(r.left-h)/c+"px",this.element.style.top=(r.top-g)/d+"px",this.element.style.width=(r.right-r.left)/c+"px",this.element.style.height=(r.bottom-r.top)/d+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),i=r&&r.type.spec.disableDropCursor,l=typeof i=="function"?i(this.editorView,t,e):i;if(t&&!l){let c=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let d=ow(this.editorView.state.doc,c,this.editorView.dragging.slice);d!=null&&(c=d)}this.setCursor(c),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}const y4=Kt.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[m4(this.options)]}});class at extends Ce{constructor(e){super(e,e)}map(e,t){let r=e.resolve(t.map(this.head));return at.valid(r)?new at(r):Ce.near(r)}content(){return ae.empty}eq(e){return e instanceof at&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new at(e.resolve(t.pos))}getBookmark(){return new zm(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!x4(e)||!b4(e))return!1;let r=t.type.spec.allowGapCursor;if(r!=null)return r;let i=t.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,t,r=!1){e:for(;;){if(!r&&at.valid(e))return e;let i=e.pos,l=null;for(let c=e.depth;;c--){let d=e.node(c);if(t>0?e.indexAfter(c)<d.childCount:e.index(c)>0){l=d.child(t>0?e.indexAfter(c):e.index(c)-1);break}else if(c==0)return null;i+=t;let f=e.doc.resolve(i);if(at.valid(f))return f}for(;;){let c=t>0?l.firstChild:l.lastChild;if(!c){if(l.isAtom&&!l.isText&&!me.isSelectable(l)){e=e.doc.resolve(i+l.nodeSize*t),r=!1;continue e}break}l=c,i+=t;let d=e.doc.resolve(i);if(at.valid(d))return d}return null}}}at.prototype.visible=!1;at.findFrom=at.findGapCursorFrom;Ce.jsonID("gapcursor",at);class zm{constructor(e){this.pos=e}map(e){return new zm(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return at.valid(t)?new at(t):Ce.near(t)}}function x4(n){for(let e=n.depth;e>=0;e--){let t=n.index(e),r=n.node(e);if(t==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(t-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function b4(n){for(let e=n.depth;e>=0;e--){let t=n.indexAfter(e),r=n.node(e);if(t==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(t);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function v4(){return new _t({props:{decorations:C4,createSelectionBetween(n,e,t){return e.pos==t.pos&&at.valid(t)?new at(t):null},handleClick:S4,handleKeyDown:w4,handleDOMEvents:{beforeinput:N4}}})}const w4=Jw({ArrowLeft:jc("horiz",-1),ArrowRight:jc("horiz",1),ArrowUp:jc("vert",-1),ArrowDown:jc("vert",1)});function jc(n,e){const t=n=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,l){let c=r.selection,d=e>0?c.$to:c.$from,f=c.empty;if(c instanceof ve){if(!l.endOfTextblock(t)||d.depth==0)return!1;f=!1,d=r.doc.resolve(e>0?d.after():d.before())}let h=at.findGapCursorFrom(d,e,f);return h?(i&&i(r.tr.setSelection(new at(h))),!0):!1}}function S4(n,e,t){if(!n||!n.editable)return!1;let r=n.state.doc.resolve(e);if(!at.valid(r))return!1;let i=n.posAtCoords({left:t.clientX,top:t.clientY});return i&&i.inside>-1&&me.isSelectable(n.state.doc.nodeAt(i.inside))?!1:(n.dispatch(n.state.tr.setSelection(new at(r))),!0)}function N4(n,e){if(e.inputType!="insertCompositionText"||!(n.state.selection instanceof at))return!1;let{$from:t}=n.state.selection,r=t.parent.contentMatchAt(t.index()).findWrapping(n.state.schema.nodes.text);if(!r)return!1;let i=W.empty;for(let c=r.length-1;c>=0;c--)i=W.from(r[c].createAndFill(null,i));let l=n.state.tr.replace(t.pos,t.pos,new ae(i,0,0));return l.setSelection(ve.near(l.doc.resolve(t.pos+1))),n.dispatch(l),!1}function C4(n){if(!(n.selection instanceof at))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",mt.create(n.doc,[Mn.widget(n.selection.head,e,{key:"gapcursor"})])}const E4=Kt.create({name:"gapCursor",addProseMirrorPlugins(){return[v4()]},extendNodeSchema(n){var e;const t={name:n.name,options:n.options,storage:n.storage};return{allowGapCursor:(e=Te(ue(n,"allowGapCursor",t)))!==null&&e!==void 0?e:null}}}),k4=Xt.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:n}){return["br",jt(this.options.HTMLAttributes,n)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:n,chain:e,state:t,editor:r})=>n.first([()=>n.exitCode(),()=>n.command(()=>{const{selection:i,storedMarks:l}=t;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:c}=this.options,{splittableMarks:d}=r.extensionManager,f=l||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:h,dispatch:g})=>{if(g&&f&&c){const y=f.filter(b=>d.includes(b.type.name));h.ensureMarks(y)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),j4=Xt.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(n=>({tag:`h${n}`,attrs:{level:n}}))},renderHTML({node:n,HTMLAttributes:e}){return[`h${this.options.levels.includes(n.attrs.level)?n.attrs.level:this.options.levels[0]}`,jt(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.setNode(this.name,n):!1,toggleHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.toggleNode(this.name,"paragraph",n):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((n,e)=>({...n,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(n=>Pp({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${n}})\\s$`),type:this.type,getAttributes:{level:n}}))}});var Wc=200,Et=function(){};Et.prototype.append=function(e){return e.length?(e=Et.from(e),!this.length&&e||e.length<Wc&&this.leafAppend(e)||this.length<Wc&&e.leafPrepend(this)||this.appendInner(e)):this};Et.prototype.prepend=function(e){return e.length?Et.from(e).append(this):this};Et.prototype.appendInner=function(e){return new A4(this,e)};Et.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?Et.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};Et.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Et.prototype.forEach=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length),t<=r?this.forEachInner(e,t,r,0):this.forEachInvertedInner(e,t,r,0)};Et.prototype.map=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(l,c){return i.push(e(l,c))},t,r),i};Et.from=function(e){return e instanceof Et?e:e&&e.length?new NS(e):Et.empty};var NS=function(n){function e(r){n.call(this),this.values=r}n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,l){return i==0&&l==this.length?this:new e(this.values.slice(i,l))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,l,c,d){for(var f=l;f<c;f++)if(i(this.values[f],d+f)===!1)return!1},e.prototype.forEachInvertedInner=function(i,l,c,d){for(var f=l-1;f>=c;f--)if(i(this.values[f],d+f)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=Wc)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=Wc)return new e(i.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e}(Et);Et.empty=new NS([]);var A4=function(n){function e(t,r){n.call(this),this.left=t,this.right=r,this.length=t.length+r.length,this.depth=Math.max(t.depth,r.depth)+1}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,l,c){var d=this.left.length;if(i<d&&this.left.forEachInner(r,i,Math.min(l,d),c)===!1||l>d&&this.right.forEachInner(r,Math.max(i-d,0),Math.min(this.length,l)-d,c+d)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,l,c){var d=this.left.length;if(i>d&&this.right.forEachInvertedInner(r,i-d,Math.max(l,d)-d,c+d)===!1||l<d&&this.left.forEachInvertedInner(r,Math.min(i,d),l,c)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var l=this.left.length;return i<=l?this.left.slice(r,i):r>=l?this.right.slice(r-l,i-l):this.left.slice(r,l).append(this.right.slice(0,i-l))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(Et);const T4=500;class Bn{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,l;t&&(i=this.remapping(r,this.items.length),l=i.maps.length);let c=e.tr,d,f,h=[],g=[];return this.items.forEach((y,b)=>{if(!y.step){i||(i=this.remapping(r,b+1),l=i.maps.length),l--,g.push(y);return}if(i){g.push(new Yn(y.map));let v=y.step.map(i.slice(l)),w;v&&c.maybeStep(v).doc&&(w=c.mapping.maps[c.mapping.maps.length-1],h.push(new Yn(w,void 0,void 0,h.length+g.length))),l--,w&&i.appendMap(w,l)}else c.maybeStep(y.step);if(y.selection)return d=i?y.selection.map(i.slice(l)):y.selection,f=new Bn(this.items.slice(0,r).append(g.reverse().concat(h)),this.eventCount-1),!1},this.items.length,0),{remaining:f,transform:c,selection:d}}addTransform(e,t,r,i){let l=[],c=this.eventCount,d=this.items,f=!i&&d.length?d.get(d.length-1):null;for(let g=0;g<e.steps.length;g++){let y=e.steps[g].invert(e.docs[g]),b=new Yn(e.mapping.maps[g],y,t),v;(v=f&&f.merge(b))&&(b=v,g?l.pop():d=d.slice(0,d.length-1)),l.push(b),t&&(c++,t=void 0),i||(f=b)}let h=c-r.depth;return h>O4&&(d=M4(d,h),c-=h),new Bn(d.append(l),c)}remapping(e,t){let r=new Vl;return this.items.forEach((i,l)=>{let c=i.mirrorOffset!=null&&l-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,c)},e,t),r}addMaps(e){return this.eventCount==0?this:new Bn(this.items.append(e.map(t=>new Yn(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-t),l=e.mapping,c=e.steps.length,d=this.eventCount;this.items.forEach(b=>{b.selection&&d--},i);let f=t;this.items.forEach(b=>{let v=l.getMirror(--f);if(v==null)return;c=Math.min(c,v);let w=l.maps[v];if(b.step){let N=e.steps[v].invert(e.docs[v]),C=b.selection&&b.selection.map(l.slice(f+1,v));C&&d++,r.push(new Yn(w,N,C))}else r.push(new Yn(w))},i);let h=[];for(let b=t;b<c;b++)h.push(new Yn(l.maps[b]));let g=this.items.slice(0,i).append(h).append(r),y=new Bn(g,d);return y.emptyItemCount()>T4&&(y=y.compress(this.items.length-r.length)),y}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),r=t.maps.length,i=[],l=0;return this.items.forEach((c,d)=>{if(d>=e)i.push(c),c.selection&&l++;else if(c.step){let f=c.step.map(t.slice(r)),h=f&&f.getMap();if(r--,h&&t.appendMap(h,r),f){let g=c.selection&&c.selection.map(t.slice(r));g&&l++;let y=new Yn(h.invert(),f,g),b,v=i.length-1;(b=i.length&&i[v].merge(y))?i[v]=b:i.push(y)}}else c.map&&r--},this.items.length,0),new Bn(Et.from(i.reverse()),l)}}Bn.empty=new Bn(Et.empty,0);function M4(n,e){let t;return n.forEach((r,i)=>{if(r.selection&&e--==0)return t=i,!1}),n.slice(t)}class Yn{constructor(e,t,r,i){this.map=e,this.step=t,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new Yn(t.getMap().invert(),t,this.selection)}}}class rs{constructor(e,t,r,i,l){this.done=e,this.undone=t,this.prevRanges=r,this.prevTime=i,this.prevComposition=l}}const O4=20;function R4(n,e,t,r){let i=t.getMeta(ri),l;if(i)return i.historyState;t.getMeta(_4)&&(n=new rs(n.done,n.undone,null,0,-1));let c=t.getMeta("appendedTransaction");if(t.steps.length==0)return n;if(c&&c.getMeta(ri))return c.getMeta(ri).redo?new rs(n.done.addTransform(t,void 0,r,Bc(e)),n.undone,Iv(t.mapping.maps),n.prevTime,n.prevComposition):new rs(n.done,n.undone.addTransform(t,void 0,r,Bc(e)),null,n.prevTime,n.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(c&&c.getMeta("addToHistory")===!1)){let d=t.getMeta("composition"),f=n.prevTime==0||!c&&n.prevComposition!=d&&(n.prevTime<(t.time||0)-r.newGroupDelay||!D4(t,n.prevRanges)),h=c?lp(n.prevRanges,t.mapping):Iv(t.mapping.maps);return new rs(n.done.addTransform(t,f?e.selection.getBookmark():void 0,r,Bc(e)),Bn.empty,h,t.time,d??n.prevComposition)}else return(l=t.getMeta("rebased"))?new rs(n.done.rebased(t,l),n.undone.rebased(t,l),lp(n.prevRanges,t.mapping),n.prevTime,n.prevComposition):new rs(n.done.addMaps(t.mapping.maps),n.undone.addMaps(t.mapping.maps),lp(n.prevRanges,t.mapping),n.prevTime,n.prevComposition)}function D4(n,e){if(!e)return!1;if(!n.docChanged)return!0;let t=!1;return n.mapping.maps[0].forEach((r,i)=>{for(let l=0;l<e.length;l+=2)r<=e[l+1]&&i>=e[l]&&(t=!0)}),t}function Iv(n){let e=[];for(let t=n.length-1;t>=0&&e.length==0;t--)n[t].forEach((r,i,l,c)=>e.push(l,c));return e}function lp(n,e){if(!n)return null;let t=[];for(let r=0;r<n.length;r+=2){let i=e.map(n[r],1),l=e.map(n[r+1],-1);i<=l&&t.push(i,l)}return t}function L4(n,e,t){let r=Bc(e),i=ri.get(e).spec.config,l=(t?n.undone:n.done).popEvent(e,r);if(!l)return null;let c=l.selection.resolve(l.transform.doc),d=(t?n.done:n.undone).addTransform(l.transform,e.selection.getBookmark(),i,r),f=new rs(t?d:l.remaining,t?l.remaining:d,null,0,-1);return l.transform.setSelection(c).setMeta(ri,{redo:t,historyState:f})}let op=!1,qv=null;function Bc(n){let e=n.plugins;if(qv!=e){op=!1,qv=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){op=!0;break}}return op}const ri=new mn("history"),_4=new mn("closeHistory");function z4(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new _t({key:ri,state:{init(){return new rs(Bn.empty,Bn.empty,null,0,-1)},apply(e,t,r){return R4(t,r,e,n)}},config:n,props:{handleDOMEvents:{beforeinput(e,t){let r=t.inputType,i=r=="historyUndo"?ES:r=="historyRedo"?kS:null;return i?(t.preventDefault(),i(e.state,e.dispatch)):!1}}}})}function CS(n,e){return(t,r)=>{let i=ri.getState(t);if(!i||(n?i.undone:i.done).eventCount==0)return!1;if(r){let l=L4(i,t,n);l&&r(e?l.scrollIntoView():l)}return!0}}const ES=CS(!1,!0),kS=CS(!0,!0),B4=Kt.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:n,dispatch:e})=>ES(n,e),redo:()=>({state:n,dispatch:e})=>kS(n,e)}},addProseMirrorPlugins(){return[z4(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-я":()=>this.editor.commands.undo(),"Shift-Mod-я":()=>this.editor.commands.redo()}}}),P4=Xt.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:n}){return["hr",jt(this.options.HTMLAttributes,n)]},addCommands(){return{setHorizontalRule:()=>({chain:n,state:e})=>{const{selection:t}=e,{$from:r,$to:i}=t,l=n();return r.parentOffset===0?l.insertContentAt({from:Math.max(r.pos-1,0),to:i.pos},{type:this.name}):eO(t)?l.insertContentAt(i.pos,{type:this.name}):l.insertContent({type:this.name}),l.command(({tr:c,dispatch:d})=>{var f;if(d){const{$to:h}=c.selection,g=h.end();if(h.nodeAfter)h.nodeAfter.isTextblock?c.setSelection(ve.create(c.doc,h.pos+1)):h.nodeAfter.isBlock?c.setSelection(me.create(c.doc,h.pos)):c.setSelection(ve.create(c.doc,h.pos));else{const y=(f=h.parent.type.contentMatch.defaultType)===null||f===void 0?void 0:f.create();y&&(c.insert(g,y),c.setSelection(ve.create(c.doc,g+1)))}c.scrollIntoView()}return!0}).run()}}},addInputRules(){return[vS({find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type})]}}),H4=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,U4=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,I4=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,q4=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,V4=Er.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:n=>n.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:n=>n.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:n}){return["em",jt(this.options.HTMLAttributes,n),0]},addCommands(){return{setItalic:()=>({commands:n})=>n.setMark(this.name),toggleItalic:()=>({commands:n})=>n.toggleMark(this.name),unsetItalic:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[ha({find:H4,type:this.type}),ha({find:I4,type:this.type})]},addPasteRules(){return[oi({find:U4,type:this.type}),oi({find:q4,type:this.type})]}}),F4=Xt.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",jt(this.options.HTMLAttributes,n),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),$4="listItem",Vv="textStyle",Fv=/^(\d+)\.\s$/,G4=Xt.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:n=>n.hasAttribute("start")?parseInt(n.getAttribute("start")||"",10):1},type:{default:null,parseHTML:n=>n.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:n}){const{start:e,...t}=n;return e===1?["ol",jt(this.options.HTMLAttributes,t),0]:["ol",jt(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleOrderedList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes($4,this.editor.getAttributes(Vv)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let n=Jl({find:Fv,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(n=Jl({find:Fv,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(Vv)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[n]}}),Y4=Xt.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:n}){return["p",jt(this.options.HTMLAttributes,n),0]},addCommands(){return{setParagraph:()=>({commands:n})=>n.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),K4=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,X4=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,J4=Er.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["s",jt(this.options.HTMLAttributes,n),0]},addCommands(){return{setStrike:()=>({commands:n})=>n.setMark(this.name),toggleStrike:()=>({commands:n})=>n.toggleMark(this.name),unsetStrike:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[ha({find:K4,type:this.type})]},addPasteRules(){return[oi({find:X4,type:this.type})]}}),Q4=Xt.create({name:"text",group:"inline"}),Z4=Kt.create({name:"starterKit",addExtensions(){const n=[];return this.options.bold!==!1&&n.push(i4.configure(this.options.bold)),this.options.blockquote!==!1&&n.push(e4.configure(this.options.blockquote)),this.options.bulletList!==!1&&n.push(l4.configure(this.options.bulletList)),this.options.code!==!1&&n.push(u4.configure(this.options.code)),this.options.codeBlock!==!1&&n.push(h4.configure(this.options.codeBlock)),this.options.document!==!1&&n.push(p4.configure(this.options.document)),this.options.dropcursor!==!1&&n.push(y4.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&n.push(E4.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&n.push(k4.configure(this.options.hardBreak)),this.options.heading!==!1&&n.push(j4.configure(this.options.heading)),this.options.history!==!1&&n.push(B4.configure(this.options.history)),this.options.horizontalRule!==!1&&n.push(P4.configure(this.options.horizontalRule)),this.options.italic!==!1&&n.push(V4.configure(this.options.italic)),this.options.listItem!==!1&&n.push(F4.configure(this.options.listItem)),this.options.orderedList!==!1&&n.push(G4.configure(this.options.orderedList)),this.options.paragraph!==!1&&n.push(Y4.configure(this.options.paragraph)),this.options.strike!==!1&&n.push(J4.configure(this.options.strike)),this.options.text!==!1&&n.push(Q4.configure(this.options.text)),n}}),W4="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0america6xi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mögensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",e3="ελ1υ2бг1ел3дети4ею2католик6ом3мкд2он1сква6онлайн5рг3рус2ф2сайт3рб3укр3қаз3հայ3ישראל5קום3ابوظبي5رامكو5لاردن4بحرين5جزائر5سعودية6عليان5مغرب5مارات5یران5بارت2زار4يتك3ھارت5تونس4سودان3رية5شبكة4عراق2ب2مان4فلسطين6قطر3كاثوليك6وم3مصر2ليسيا5وريتانيا7قع4همراه5پاکستان7ڀارت4कॉम3नेट3भारत0म्3ोत5संगठन5বাংলা5ভারত2ৰত4ਭਾਰਤ4ભારત4ଭାରତ4இந்தியா6லங்கை6சிங்கப்பூர்11భారత్5ಭಾರತ4ഭാരതം5ලංකා4คอม3ไทย3ລາວ3გე2みんな3アマゾン4クラウド4グーグル4コム2ストア3セール3ファッション6ポイント4世界2中信1国1國1文网3亚马逊3企业2佛山2信息2健康2八卦2公司1益2台湾1灣2商城1店1标2嘉里0大酒店5在线2大拿2天主教3娱乐2家電2广东2微博2慈善2我爱你3手机2招聘2政务1府2新加坡2闻2时尚2書籍2机构2淡马锡3游戏2澳門2点看2移动2组织机构4网址1店1站1络2联通2谷歌2购物2通販2集团2電訊盈科4飞利浦3食品2餐厅2香格里拉3港2닷넷1컴2삼성2한국2",pa=(n,e)=>{for(const t in e)n[t]=e[t];return n},Up="numeric",Ip="ascii",qp="alpha",Rl="asciinumeric",Al="alphanumeric",Vp="domain",jS="emoji",t3="scheme",n3="slashscheme",cp="whitespace";function r3(n,e){return n in e||(e[n]=[]),e[n]}function Qs(n,e,t){e[Up]&&(e[Rl]=!0,e[Al]=!0),e[Ip]&&(e[Rl]=!0,e[qp]=!0),e[Rl]&&(e[Al]=!0),e[qp]&&(e[Al]=!0),e[Al]&&(e[Vp]=!0),e[jS]&&(e[Vp]=!0);for(const r in e){const i=r3(r,t);i.indexOf(n)<0&&i.push(n)}}function s3(n,e){const t={};for(const r in e)e[r].indexOf(n)>=0&&(t[r]=!0);return t}function nn(n=null){this.j={},this.jr=[],this.jd=null,this.t=n}nn.groups={};nn.prototype={accepts(){return!!this.t},go(n){const e=this,t=e.j[n];if(t)return t;for(let r=0;r<e.jr.length;r++){const i=e.jr[r][0],l=e.jr[r][1];if(l&&i.test(n))return l}return e.jd},has(n,e=!1){return e?n in this.j:!!this.go(n)},ta(n,e,t,r){for(let i=0;i<n.length;i++)this.tt(n[i],e,t,r)},tr(n,e,t,r){r=r||nn.groups;let i;return e&&e.j?i=e:(i=new nn(e),t&&r&&Qs(e,t,r)),this.jr.push([n,i]),i},ts(n,e,t,r){let i=this;const l=n.length;if(!l)return i;for(let c=0;c<l-1;c++)i=i.tt(n[c]);return i.tt(n[l-1],e,t,r)},tt(n,e,t,r){r=r||nn.groups;const i=this;if(e&&e.j)return i.j[n]=e,e;const l=e;let c,d=i.go(n);if(d?(c=new nn,pa(c.j,d.j),c.jr.push.apply(c.jr,d.jr),c.jd=d.jd,c.t=d.t):c=new nn,l){if(r)if(c.t&&typeof c.t=="string"){const f=pa(s3(c.t,r),t);Qs(l,f,r)}else t&&Qs(l,t,r);c.t=l}return i.j[n]=c,c}};const ke=(n,e,t,r,i)=>n.ta(e,t,r,i),it=(n,e,t,r,i)=>n.tr(e,t,r,i),$v=(n,e,t,r,i)=>n.ts(e,t,r,i),ee=(n,e,t,r,i)=>n.tt(e,t,r,i),xr="WORD",Fp="UWORD",AS="ASCIINUMERICAL",TS="ALPHANUMERICAL",Ql="LOCALHOST",$p="TLD",Gp="UTLD",Pc="SCHEME",ra="SLASH_SCHEME",Bm="NUM",Yp="WS",Pm="NL",Dl="OPENBRACE",Ll="CLOSEBRACE",eu="OPENBRACKET",tu="CLOSEBRACKET",nu="OPENPAREN",ru="CLOSEPAREN",su="OPENANGLEBRACKET",iu="CLOSEANGLEBRACKET",au="FULLWIDTHLEFTPAREN",lu="FULLWIDTHRIGHTPAREN",ou="LEFTCORNERBRACKET",cu="RIGHTCORNERBRACKET",uu="LEFTWHITECORNERBRACKET",du="RIGHTWHITECORNERBRACKET",fu="FULLWIDTHLESSTHAN",hu="FULLWIDTHGREATERTHAN",pu="AMPERSAND",mu="APOSTROPHE",gu="ASTERISK",ss="AT",yu="BACKSLASH",xu="BACKTICK",bu="CARET",as="COLON",Hm="COMMA",vu="DOLLAR",Kn="DOT",wu="EQUALS",Um="EXCLAMATION",jn="HYPHEN",_l="PERCENT",Su="PIPE",Nu="PLUS",Cu="POUND",zl="QUERY",Im="QUOTE",MS="FULLWIDTHMIDDLEDOT",qm="SEMI",Xn="SLASH",Bl="TILDE",Eu="UNDERSCORE",OS="EMOJI",ku="SYM";var RS=Object.freeze({__proto__:null,ALPHANUMERICAL:TS,AMPERSAND:pu,APOSTROPHE:mu,ASCIINUMERICAL:AS,ASTERISK:gu,AT:ss,BACKSLASH:yu,BACKTICK:xu,CARET:bu,CLOSEANGLEBRACKET:iu,CLOSEBRACE:Ll,CLOSEBRACKET:tu,CLOSEPAREN:ru,COLON:as,COMMA:Hm,DOLLAR:vu,DOT:Kn,EMOJI:OS,EQUALS:wu,EXCLAMATION:Um,FULLWIDTHGREATERTHAN:hu,FULLWIDTHLEFTPAREN:au,FULLWIDTHLESSTHAN:fu,FULLWIDTHMIDDLEDOT:MS,FULLWIDTHRIGHTPAREN:lu,HYPHEN:jn,LEFTCORNERBRACKET:ou,LEFTWHITECORNERBRACKET:uu,LOCALHOST:Ql,NL:Pm,NUM:Bm,OPENANGLEBRACKET:su,OPENBRACE:Dl,OPENBRACKET:eu,OPENPAREN:nu,PERCENT:_l,PIPE:Su,PLUS:Nu,POUND:Cu,QUERY:zl,QUOTE:Im,RIGHTCORNERBRACKET:cu,RIGHTWHITECORNERBRACKET:du,SCHEME:Pc,SEMI:qm,SLASH:Xn,SLASH_SCHEME:ra,SYM:ku,TILDE:Bl,TLD:$p,UNDERSCORE:Eu,UTLD:Gp,UWORD:Fp,WORD:xr,WS:Yp});const gr=/[a-z]/,Nl=new RegExp("\\p{L}","u"),up=new RegExp("\\p{Emoji}","u"),yr=/\d/,dp=/\s/,Gv="\r",fp=`
`,i3="️",a3="‍",hp="￼";let Ac=null,Tc=null;function l3(n=[]){const e={};nn.groups=e;const t=new nn;Ac==null&&(Ac=Yv(W4)),Tc==null&&(Tc=Yv(e3)),ee(t,"'",mu),ee(t,"{",Dl),ee(t,"}",Ll),ee(t,"[",eu),ee(t,"]",tu),ee(t,"(",nu),ee(t,")",ru),ee(t,"<",su),ee(t,">",iu),ee(t,"（",au),ee(t,"）",lu),ee(t,"「",ou),ee(t,"」",cu),ee(t,"『",uu),ee(t,"』",du),ee(t,"＜",fu),ee(t,"＞",hu),ee(t,"&",pu),ee(t,"*",gu),ee(t,"@",ss),ee(t,"`",xu),ee(t,"^",bu),ee(t,":",as),ee(t,",",Hm),ee(t,"$",vu),ee(t,".",Kn),ee(t,"=",wu),ee(t,"!",Um),ee(t,"-",jn),ee(t,"%",_l),ee(t,"|",Su),ee(t,"+",Nu),ee(t,"#",Cu),ee(t,"?",zl),ee(t,'"',Im),ee(t,"/",Xn),ee(t,";",qm),ee(t,"~",Bl),ee(t,"_",Eu),ee(t,"\\",yu),ee(t,"・",MS);const r=it(t,yr,Bm,{[Up]:!0});it(r,yr,r);const i=it(r,gr,AS,{[Rl]:!0}),l=it(r,Nl,TS,{[Al]:!0}),c=it(t,gr,xr,{[Ip]:!0});it(c,yr,i),it(c,gr,c),it(i,yr,i),it(i,gr,i);const d=it(t,Nl,Fp,{[qp]:!0});it(d,gr),it(d,yr,l),it(d,Nl,d),it(l,yr,l),it(l,gr),it(l,Nl,l);const f=ee(t,fp,Pm,{[cp]:!0}),h=ee(t,Gv,Yp,{[cp]:!0}),g=it(t,dp,Yp,{[cp]:!0});ee(t,hp,g),ee(h,fp,f),ee(h,hp,g),it(h,dp,g),ee(g,Gv),ee(g,fp),it(g,dp,g),ee(g,hp,g);const y=it(t,up,OS,{[jS]:!0});ee(y,"#"),it(y,up,y),ee(y,i3,y);const b=ee(y,a3);ee(b,"#"),it(b,up,y);const v=[[gr,c],[yr,i]],w=[[gr,null],[Nl,d],[yr,l]];for(let N=0;N<Ac.length;N++)Zr(t,Ac[N],$p,xr,v);for(let N=0;N<Tc.length;N++)Zr(t,Tc[N],Gp,Fp,w);Qs($p,{tld:!0,ascii:!0},e),Qs(Gp,{utld:!0,alpha:!0},e),Zr(t,"file",Pc,xr,v),Zr(t,"mailto",Pc,xr,v),Zr(t,"http",ra,xr,v),Zr(t,"https",ra,xr,v),Zr(t,"ftp",ra,xr,v),Zr(t,"ftps",ra,xr,v),Qs(Pc,{scheme:!0,ascii:!0},e),Qs(ra,{slashscheme:!0,ascii:!0},e),n=n.sort((N,C)=>N[0]>C[0]?1:-1);for(let N=0;N<n.length;N++){const C=n[N][0],O=n[N][1]?{[t3]:!0}:{[n3]:!0};C.indexOf("-")>=0?O[Vp]=!0:gr.test(C)?yr.test(C)?O[Rl]=!0:O[Ip]=!0:O[Up]=!0,$v(t,C,C,O)}return $v(t,"localhost",Ql,{ascii:!0}),t.jd=new nn(ku),{start:t,tokens:pa({groups:e},RS)}}function DS(n,e){const t=o3(e.replace(/[A-Z]/g,d=>d.toLowerCase())),r=t.length,i=[];let l=0,c=0;for(;c<r;){let d=n,f=null,h=0,g=null,y=-1,b=-1;for(;c<r&&(f=d.go(t[c]));)d=f,d.accepts()?(y=0,b=0,g=d):y>=0&&(y+=t[c].length,b++),h+=t[c].length,l+=t[c].length,c++;l-=y,c-=b,h-=y,i.push({t:g.t,v:e.slice(l-h,l),s:l-h,e:l})}return i}function o3(n){const e=[],t=n.length;let r=0;for(;r<t;){let i=n.charCodeAt(r),l,c=i<55296||i>56319||r+1===t||(l=n.charCodeAt(r+1))<56320||l>57343?n[r]:n.slice(r,r+2);e.push(c),r+=c.length}return e}function Zr(n,e,t,r,i){let l;const c=e.length;for(let d=0;d<c-1;d++){const f=e[d];n.j[f]?l=n.j[f]:(l=new nn(r),l.jr=i.slice(),n.j[f]=l),n=l}return l=new nn(t),l.jr=i.slice(),n.j[e[c-1]]=l,l}function Yv(n){const e=[],t=[];let r=0,i="0123456789";for(;r<n.length;){let l=0;for(;i.indexOf(n[r+l])>=0;)l++;if(l>0){e.push(t.join(""));for(let c=parseInt(n.substring(r,r+l),10);c>0;c--)t.pop();r+=l}else t.push(n[r]),r++}return e}const Zl={defaultProtocol:"http",events:null,format:Kv,formatHref:Kv,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function Vm(n,e=null){let t=pa({},Zl);n&&(t=pa(t,n instanceof Vm?n.o:n));const r=t.ignoreTags,i=[];for(let l=0;l<r.length;l++)i.push(r[l].toUpperCase());this.o=t,e&&(this.defaultRender=e),this.ignoreTags=i}Vm.prototype={o:Zl,ignoreTags:[],defaultRender(n){return n},check(n){return this.get("validate",n.toString(),n)},get(n,e,t){const r=e!=null;let i=this.o[n];return i&&(typeof i=="object"?(i=t.t in i?i[t.t]:Zl[n],typeof i=="function"&&r&&(i=i(e,t))):typeof i=="function"&&r&&(i=i(e,t.t,t)),i)},getObj(n,e,t){let r=this.o[n];return typeof r=="function"&&e!=null&&(r=r(e,t.t,t)),r},render(n){const e=n.render(this);return(this.get("render",null,n)||this.defaultRender)(e,n.t,n)}};function Kv(n){return n}function LS(n,e){this.t="token",this.v=n,this.tk=e}LS.prototype={isLink:!1,toString(){return this.v},toHref(n){return this.toString()},toFormattedString(n){const e=this.toString(),t=n.get("truncate",e,this),r=n.get("format",e,this);return t&&r.length>t?r.substring(0,t)+"…":r},toFormattedHref(n){return n.get("formatHref",this.toHref(n.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(n=Zl.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(n),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(n){return{type:this.t,value:this.toFormattedString(n),isLink:this.isLink,href:this.toFormattedHref(n),start:this.startIndex(),end:this.endIndex()}},validate(n){return n.get("validate",this.toString(),this)},render(n){const e=this,t=this.toHref(n.get("defaultProtocol")),r=n.get("formatHref",t,this),i=n.get("tagName",t,e),l=this.toFormattedString(n),c={},d=n.get("className",t,e),f=n.get("target",t,e),h=n.get("rel",t,e),g=n.getObj("attributes",t,e),y=n.getObj("events",t,e);return c.href=r,d&&(c.class=d),f&&(c.target=f),h&&(c.rel=h),g&&pa(c,g),{tagName:i,attributes:c,content:l,eventListeners:y}}};function Fu(n,e){class t extends LS{constructor(i,l){super(i,l),this.t=n}}for(const r in e)t.prototype[r]=e[r];return t.t=n,t}const Xv=Fu("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),Jv=Fu("text"),c3=Fu("nl"),Mc=Fu("url",{isLink:!0,toHref(n=Zl.defaultProtocol){return this.hasProtocol()?this.v:`${n}://${this.v}`},hasProtocol(){const n=this.tk;return n.length>=2&&n[0].t!==Ql&&n[1].t===as}}),kn=n=>new nn(n);function u3({groups:n}){const e=n.domain.concat([pu,gu,ss,yu,xu,bu,vu,wu,jn,Bm,_l,Su,Nu,Cu,Xn,ku,Bl,Eu]),t=[mu,as,Hm,Kn,Um,_l,zl,Im,qm,su,iu,Dl,Ll,tu,eu,nu,ru,au,lu,ou,cu,uu,du,fu,hu],r=[pu,mu,gu,yu,xu,bu,vu,wu,jn,Dl,Ll,_l,Su,Nu,Cu,zl,Xn,ku,Bl,Eu],i=kn(),l=ee(i,Bl);ke(l,r,l),ke(l,n.domain,l);const c=kn(),d=kn(),f=kn();ke(i,n.domain,c),ke(i,n.scheme,d),ke(i,n.slashscheme,f),ke(c,r,l),ke(c,n.domain,c);const h=ee(c,ss);ee(l,ss,h),ee(d,ss,h),ee(f,ss,h);const g=ee(l,Kn);ke(g,r,l),ke(g,n.domain,l);const y=kn();ke(h,n.domain,y),ke(y,n.domain,y);const b=ee(y,Kn);ke(b,n.domain,y);const v=kn(Xv);ke(b,n.tld,v),ke(b,n.utld,v),ee(h,Ql,v);const w=ee(y,jn);ee(w,jn,w),ke(w,n.domain,y),ke(v,n.domain,y),ee(v,Kn,b),ee(v,jn,w);const N=ee(v,as);ke(N,n.numeric,Xv);const C=ee(c,jn),j=ee(c,Kn);ee(C,jn,C),ke(C,n.domain,c),ke(j,r,l),ke(j,n.domain,c);const O=kn(Mc);ke(j,n.tld,O),ke(j,n.utld,O),ke(O,n.domain,c),ke(O,r,l),ee(O,Kn,j),ee(O,jn,C),ee(O,ss,h);const M=ee(O,as),A=kn(Mc);ke(M,n.numeric,A);const L=kn(Mc),B=kn();ke(L,e,L),ke(L,t,B),ke(B,e,L),ke(B,t,B),ee(O,Xn,L),ee(A,Xn,L);const F=ee(d,as),_=ee(f,as),re=ee(_,Xn),le=ee(re,Xn);ke(d,n.domain,c),ee(d,Kn,j),ee(d,jn,C),ke(f,n.domain,c),ee(f,Kn,j),ee(f,jn,C),ke(F,n.domain,L),ee(F,Xn,L),ee(F,zl,L),ke(le,n.domain,L),ke(le,e,L),ee(le,Xn,L);const $=[[Dl,Ll],[eu,tu],[nu,ru],[su,iu],[au,lu],[ou,cu],[uu,du],[fu,hu]];for(let se=0;se<$.length;se++){const[pe,Ge]=$[se],Oe=ee(L,pe);ee(B,pe,Oe),ee(Oe,Ge,L);const V=kn(Mc);ke(Oe,e,V);const te=kn();ke(Oe,t),ke(V,e,V),ke(V,t,te),ke(te,e,V),ke(te,t,te),ee(V,Ge,L),ee(te,Ge,L)}return ee(i,Ql,O),ee(i,Pm,c3),{start:i,tokens:RS}}function d3(n,e,t){let r=t.length,i=0,l=[],c=[];for(;i<r;){let d=n,f=null,h=null,g=0,y=null,b=-1;for(;i<r&&!(f=d.go(t[i].t));)c.push(t[i++]);for(;i<r&&(h=f||d.go(t[i].t));)f=null,d=h,d.accepts()?(b=0,y=d):b>=0&&b++,i++,g++;if(b<0)i-=g,i<r&&(c.push(t[i]),i++);else{c.length>0&&(l.push(pp(Jv,e,c)),c=[]),i-=b,g-=b;const v=y.t,w=t.slice(i-g,i);l.push(pp(v,e,w))}}return c.length>0&&l.push(pp(Jv,e,c)),l}function pp(n,e,t){const r=t[0].s,i=t[t.length-1].e,l=e.slice(r,i);return new n(l,t)}const f3=typeof console<"u"&&console&&console.warn||(()=>{}),h3="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Je={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function p3(){return nn.groups={},Je.scanner=null,Je.parser=null,Je.tokenQueue=[],Je.pluginQueue=[],Je.customSchemes=[],Je.initialized=!1,Je}function Qv(n,e=!1){if(Je.initialized&&f3(`linkifyjs: already initialized - will not register custom scheme "${n}" ${h3}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(n))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);Je.customSchemes.push([n,e])}function m3(){Je.scanner=l3(Je.customSchemes);for(let n=0;n<Je.tokenQueue.length;n++)Je.tokenQueue[n][1]({scanner:Je.scanner});Je.parser=u3(Je.scanner.tokens);for(let n=0;n<Je.pluginQueue.length;n++)Je.pluginQueue[n][1]({scanner:Je.scanner,parser:Je.parser});return Je.initialized=!0,Je}function Fm(n){return Je.initialized||m3(),d3(Je.parser.start,n,DS(Je.scanner.start,n))}Fm.scan=DS;function _S(n,e=null,t=null){if(e&&typeof e=="object"){if(t)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);t=e,e=null}const r=new Vm(t),i=Fm(n),l=[];for(let c=0;c<i.length;c++){const d=i[c];d.isLink&&(!e||d.t===e)&&r.check(d)&&l.push(d.toFormattedObject(r))}return l}function g3(n){return n.length===1?n[0].isLink:n.length===3&&n[1].isLink?["()","[]"].includes(n[0].value+n[2].value):!1}function y3(n){return new _t({key:new mn("autolink"),appendTransaction:(e,t,r)=>{const i=e.some(h=>h.docChanged)&&!t.doc.eq(r.doc),l=e.some(h=>h.getMeta("preventAutolink"));if(!i||l)return;const{tr:c}=r,d=FM(t.doc,[...e]);if(ZM(d).forEach(({newRange:h})=>{const g=GM(r.doc,h,v=>v.isTextblock);let y,b;if(g.length>1?(y=g[0],b=r.doc.textBetween(y.pos,y.pos+y.node.nodeSize,void 0," ")):g.length&&r.doc.textBetween(h.from,h.to," "," ").endsWith(" ")&&(y=g[0],b=r.doc.textBetween(y.pos,h.to,void 0," ")),y&&b){const v=b.split(" ").filter(j=>j!=="");if(v.length<=0)return!1;const w=v[v.length-1],N=y.pos+b.lastIndexOf(w);if(!w)return!1;const C=Fm(w).map(j=>j.toObject(n.defaultProtocol));if(!g3(C))return!1;C.filter(j=>j.isLink).map(j=>({...j,from:N+j.start+1,to:N+j.end+1})).filter(j=>r.schema.marks.code?!r.doc.rangeHasMark(j.from,j.to,r.schema.marks.code):!0).filter(j=>n.validate(j.value)).filter(j=>n.shouldAutoLink(j.value)).forEach(j=>{Rm(j.from,j.to,r.doc).some(O=>O.mark.type===n.type)||c.addMark(j.from,j.to,n.type.create({href:j.href}))})}}),!!c.steps.length)return c}})}function x3(n){return new _t({key:new mn("handleClickLink"),props:{handleClick:(e,t,r)=>{var i,l;if(r.button!==0||!e.editable)return!1;let c=r.target;const d=[];for(;c.nodeName!=="DIV";)d.push(c),c=c.parentNode;if(!d.find(b=>b.nodeName==="A"))return!1;const f=bS(e.state,n.type.name),h=r.target,g=(i=h==null?void 0:h.href)!==null&&i!==void 0?i:f.href,y=(l=h==null?void 0:h.target)!==null&&l!==void 0?l:f.target;return h&&g?(window.open(g,y),!0):!1}}})}function b3(n){return new _t({key:new mn("handlePasteLink"),props:{handlePaste:(e,t,r)=>{const{state:i}=e,{selection:l}=i,{empty:c}=l;if(c)return!1;let d="";r.content.forEach(h=>{d+=h.textContent});const f=_S(d,{defaultProtocol:n.defaultProtocol}).find(h=>h.isLink&&h.value===d);return!d||!f?!1:n.editor.commands.setMark(n.type,{href:f.href})}}})}const v3=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g;function Vs(n,e){const t=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const i=typeof r=="string"?r:r.scheme;i&&t.push(i)}),!n||n.replace(v3,"").match(new RegExp(`^(?:(?:${t.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}const w3=Er.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(n=>{if(typeof n=="string"){Qv(n);return}Qv(n.scheme,n.optionalSlashes)})},onDestroy(){p3()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(n,e)=>!!Vs(n,e.protocols),validate:n=>!!n,shouldAutoLink:n=>!!n}},addAttributes(){return{href:{default:null,parseHTML(n){return n.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:n=>{const e=n.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:t=>!!Vs(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:n}){return this.options.isAllowedUri(n.href,{defaultValidate:e=>!!Vs(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",jt(this.options.HTMLAttributes,n),0]:["a",jt(this.options.HTMLAttributes,{...n,href:""}),0]},addCommands(){return{setLink:n=>({chain:e})=>{const{href:t}=n;return this.options.isAllowedUri(t,{defaultValidate:r=>!!Vs(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,n).setMeta("preventAutolink",!0).run():!1},toggleLink:n=>({chain:e})=>{const{href:t}=n;return this.options.isAllowedUri(t,{defaultValidate:r=>!!Vs(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().toggleMark(this.name,n,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run():!1},unsetLink:()=>({chain:n})=>n().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[oi({find:n=>{const e=[];if(n){const{protocols:t,defaultProtocol:r}=this.options,i=_S(n).filter(l=>l.isLink&&this.options.isAllowedUri(l.value,{defaultValidate:c=>!!Vs(c,t),protocols:t,defaultProtocol:r}));i.length&&i.forEach(l=>e.push({text:l.value,data:{href:l.href},index:l.start}))}return e},type:this.type,getAttributes:n=>{var e;return{href:(e=n.data)===null||e===void 0?void 0:e.href}}})]},addProseMirrorPlugins(){const n=[],{protocols:e,defaultProtocol:t}=this.options;return this.options.autolink&&n.push(y3({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:i=>!!Vs(i,e),protocols:e,defaultProtocol:t}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&n.push(x3({type:this.type})),this.options.linkOnPaste&&n.push(b3({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),n}}),S3=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,N3=Xt.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{}}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:n}){return["img",jt(this.options.HTMLAttributes,n)]},addCommands(){return{setImage:n=>({commands:e})=>e.insertContent({type:this.name,attrs:n})}},addInputRules(){return[vS({find:S3,type:this.type,getAttributes:n=>{const[,,e,t,r]=n;return{src:t,alt:e,title:r}}})]}}),Pl=({value:n,onChange:e})=>{const t=XO({extensions:[Z4.configure({heading:{levels:[1,2,3]}}),w3.configure({openOnClick:!1,HTMLAttributes:{class:"text-blue-600 hover:underline"}}),N3.configure({HTMLAttributes:{class:"max-w-full h-auto rounded"},allowBase64:!0})],content:n||"",editorProps:{attributes:{class:"prose prose-sm max-w-none focus:outline-none min-h-[150px] p-4"},handlePaste:(r,i)=>{var d;console.log("handlePaste",r);const c=Array.from(((d=i.clipboardData)==null?void 0:d.items)||[]).find(f=>f.type.startsWith("image/"));if(c){i.preventDefault();const f=c.getAsFile();if(!f)return!1;const h=new FileReader;return h.onload=g=>{var b;const y=(b=g.target)==null?void 0:b.result;y&&(t==null||t.chain().focus().setImage({src:y}).run())},h.readAsDataURL(f),!0}return!1}}});return E.useEffect(()=>{t&&n!==void 0&&t.getHTML()!==n&&t.commands.setContent(n||"",!1)},[n,t]),E.useEffect(()=>{t&&t.on("update",()=>{const r=t.getHTML();r!==n&&e(r)})},[t,e,n]),t?p.jsxs("div",{className:"border border-gray-300 rounded-md shadow-sm",children:[p.jsxs("div",{className:"flex gap-1 p-1 border-b border-gray-300",children:[p.jsx("button",{onClick:()=>t.chain().focus().toggleBold().run(),className:`p-1 rounded ${t.isActive("bold")?"bg-gray-200":"hover:bg-gray-100"}`,title:"Bold",children:p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[p.jsx("path",{d:"M6 4h8a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"}),p.jsx("path",{d:"M6 12h9a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"})]})}),p.jsx("button",{onClick:()=>t.chain().focus().toggleItalic().run(),className:`p-1 rounded ${t.isActive("italic")?"bg-gray-200":"hover:bg-gray-100"}`,title:"Italic",children:p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[p.jsx("line",{x1:"19",y1:"4",x2:"10",y2:"4"}),p.jsx("line",{x1:"14",y1:"20",x2:"5",y2:"20"}),p.jsx("line",{x1:"15",y1:"4",x2:"9",y2:"20"})]})}),p.jsx("button",{onClick:()=>t.chain().focus().toggleBulletList().run(),className:`p-1 rounded ${t.isActive("bulletList")?"bg-gray-200":"hover:bg-gray-100"}`,title:"Bullet List",children:p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[p.jsx("line",{x1:"8",y1:"6",x2:"21",y2:"6"}),p.jsx("line",{x1:"8",y1:"12",x2:"21",y2:"12"}),p.jsx("line",{x1:"8",y1:"18",x2:"21",y2:"18"}),p.jsx("line",{x1:"3",y1:"6",x2:"3.01",y2:"6"}),p.jsx("line",{x1:"3",y1:"12",x2:"3.01",y2:"12"}),p.jsx("line",{x1:"3",y1:"18",x2:"3.01",y2:"18"})]})}),p.jsx("button",{onClick:()=>t.chain().focus().toggleOrderedList().run(),className:`p-1 rounded ${t.isActive("orderedList")?"bg-gray-200":"hover:bg-gray-100"}`,title:"Ordered List",children:p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[p.jsx("line",{x1:"10",y1:"6",x2:"21",y2:"6"}),p.jsx("line",{x1:"10",y1:"12",x2:"21",y2:"12"}),p.jsx("line",{x1:"10",y1:"18",x2:"21",y2:"18"}),p.jsx("path",{d:"M4 6h1v4"}),p.jsx("path",{d:"M4 10h2"}),p.jsx("path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1"})]})}),p.jsx("button",{onClick:()=>{const r=window.prompt("Enter the URL");r&&t.chain().focus().setLink({href:r}).run()},className:`p-1 rounded ${t.isActive("link")?"bg-gray-200":"hover:bg-gray-100"}`,title:"Add Link",children:p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[p.jsx("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}),p.jsx("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"})]})}),p.jsx("button",{onClick:()=>{const r=window.prompt("Enter the image URL");r&&t.chain().focus().setImage({src:r}).run()},className:"p-1 rounded hover:bg-gray-100",title:"Add Image",children:p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[p.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),p.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),p.jsx("polyline",{points:"21 15 16 10 5 21"})]})})]}),p.jsx(HO,{editor:t})]}):null};var C3=Object.defineProperty,E3=(n,e,t)=>e in n?C3(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,We=(n,e,t)=>E3(n,typeof e!="symbol"?e+"":e,t);const ju={x:0,y:0,width:0,height:0,unit:"px"},Zi=(n,e,t)=>Math.min(Math.max(n,e),t),k3=(...n)=>n.filter(e=>e&&typeof e=="string").join(" "),Zv=(n,e)=>n===e||n.width===e.width&&n.height===e.height&&n.x===e.x&&n.y===e.y&&n.unit===e.unit;function Wi(n,e,t){return n.unit==="%"?{...ju,...n,unit:"%"}:{unit:"%",x:n.x?n.x/e*100:0,y:n.y?n.y/t*100:0,width:n.width?n.width/e*100:0,height:n.height?n.height/t*100:0}}function Wr(n,e,t){return n.unit?n.unit==="px"?{...ju,...n,unit:"px"}:{unit:"px",x:n.x?n.x*e/100:0,y:n.y?n.y*t/100:0,width:n.width?n.width*e/100:0,height:n.height?n.height*t/100:0}:{...ju,...n,unit:"px"}}function Wv(n,e,t,r,i,l=0,c=0,d=r,f=i){const h={...n};let g=Math.min(l,r),y=Math.min(c,i),b=Math.min(d,r),v=Math.min(f,i);e&&(e>1?(g=c?c*e:g,y=g/e,b=d*e):(y=l?l/e:y,g=y*e,v=f/e)),h.y<0&&(h.height=Math.max(h.height+h.y,y),h.y=0),h.x<0&&(h.width=Math.max(h.width+h.x,g),h.x=0);const w=r-(h.x+h.width);w<0&&(h.x=Math.min(h.x,r-g),h.width+=w);const N=i-(h.y+h.height);if(N<0&&(h.y=Math.min(h.y,i-y),h.height+=N),h.width<g&&((t==="sw"||t=="nw")&&(h.x-=g-h.width),h.width=g),h.height<y&&((t==="nw"||t=="ne")&&(h.y-=y-h.height),h.height=y),h.width>b&&((t==="sw"||t=="nw")&&(h.x-=b-h.width),h.width=b),h.height>v&&((t==="nw"||t=="ne")&&(h.y-=v-h.height),h.height=v),e){const C=h.width/h.height;if(C<e){const j=Math.max(h.width/e,y);(t==="nw"||t=="ne")&&(h.y-=j-h.height),h.height=j}else if(C>e){const j=Math.max(h.height*e,g);(t==="sw"||t=="nw")&&(h.x-=j-h.width),h.width=j}}return h}function j3(n,e,t,r){const i={...n};return e==="ArrowLeft"?r==="nw"?(i.x-=t,i.y-=t,i.width+=t,i.height+=t):r==="w"?(i.x-=t,i.width+=t):r==="sw"?(i.x-=t,i.width+=t,i.height+=t):r==="ne"?(i.y+=t,i.width-=t,i.height-=t):r==="e"?i.width-=t:r==="se"&&(i.width-=t,i.height-=t):e==="ArrowRight"&&(r==="nw"?(i.x+=t,i.y+=t,i.width-=t,i.height-=t):r==="w"?(i.x+=t,i.width-=t):r==="sw"?(i.x+=t,i.width-=t,i.height-=t):r==="ne"?(i.y-=t,i.width+=t,i.height+=t):r==="e"?i.width+=t:r==="se"&&(i.width+=t,i.height+=t)),e==="ArrowUp"?r==="nw"?(i.x-=t,i.y-=t,i.width+=t,i.height+=t):r==="n"?(i.y-=t,i.height+=t):r==="ne"?(i.y-=t,i.width+=t,i.height+=t):r==="sw"?(i.x+=t,i.width-=t,i.height-=t):r==="s"?i.height-=t:r==="se"&&(i.width-=t,i.height-=t):e==="ArrowDown"&&(r==="nw"?(i.x+=t,i.y+=t,i.width-=t,i.height-=t):r==="n"?(i.y+=t,i.height-=t):r==="ne"?(i.y+=t,i.width-=t,i.height-=t):r==="sw"?(i.x-=t,i.width+=t,i.height+=t):r==="s"?i.height+=t:r==="se"&&(i.width+=t,i.height+=t)),i}const ea={capture:!0,passive:!1};let A3=0;const ts=class zn extends E.PureComponent{constructor(){super(...arguments),We(this,"docMoveBound",!1),We(this,"mouseDownOnCrop",!1),We(this,"dragStarted",!1),We(this,"evData",{startClientX:0,startClientY:0,startCropX:0,startCropY:0,clientX:0,clientY:0,isResize:!0}),We(this,"componentRef",E.createRef()),We(this,"mediaRef",E.createRef()),We(this,"resizeObserver"),We(this,"initChangeCalled",!1),We(this,"instanceId",`rc-${A3++}`),We(this,"state",{cropIsActive:!1,newCropIsBeingDrawn:!1}),We(this,"onCropPointerDown",e=>{const{crop:t,disabled:r}=this.props,i=this.getBox();if(!t)return;const l=Wr(t,i.width,i.height);if(r)return;e.cancelable&&e.preventDefault(),this.bindDocMove(),this.componentRef.current.focus({preventScroll:!0});const c=e.target.dataset.ord,d=!!c;let f=e.clientX,h=e.clientY,g=l.x,y=l.y;if(c){const b=e.clientX-i.x,v=e.clientY-i.y;let w=0,N=0;c==="ne"||c=="e"?(w=b-(l.x+l.width),N=v-l.y,g=l.x,y=l.y+l.height):c==="se"||c==="s"?(w=b-(l.x+l.width),N=v-(l.y+l.height),g=l.x,y=l.y):c==="sw"||c=="w"?(w=b-l.x,N=v-(l.y+l.height),g=l.x+l.width,y=l.y):(c==="nw"||c=="n")&&(w=b-l.x,N=v-l.y,g=l.x+l.width,y=l.y+l.height),f=g+i.x+w,h=y+i.y+N}this.evData={startClientX:f,startClientY:h,startCropX:g,startCropY:y,clientX:e.clientX,clientY:e.clientY,isResize:d,ord:c},this.mouseDownOnCrop=!0,this.setState({cropIsActive:!0})}),We(this,"onComponentPointerDown",e=>{const{crop:t,disabled:r,locked:i,keepSelection:l,onChange:c}=this.props,d=this.getBox();if(r||i||l&&t)return;e.cancelable&&e.preventDefault(),this.bindDocMove(),this.componentRef.current.focus({preventScroll:!0});const f=e.clientX-d.x,h=e.clientY-d.y,g={unit:"px",x:f,y:h,width:0,height:0};this.evData={startClientX:e.clientX,startClientY:e.clientY,startCropX:f,startCropY:h,clientX:e.clientX,clientY:e.clientY,isResize:!0},this.mouseDownOnCrop=!0,c(Wr(g,d.width,d.height),Wi(g,d.width,d.height)),this.setState({cropIsActive:!0,newCropIsBeingDrawn:!0})}),We(this,"onDocPointerMove",e=>{const{crop:t,disabled:r,onChange:i,onDragStart:l}=this.props,c=this.getBox();if(r||!t||!this.mouseDownOnCrop)return;e.cancelable&&e.preventDefault(),this.dragStarted||(this.dragStarted=!0,l&&l(e));const{evData:d}=this;d.clientX=e.clientX,d.clientY=e.clientY;let f;d.isResize?f=this.resizeCrop():f=this.dragCrop(),Zv(t,f)||i(Wr(f,c.width,c.height),Wi(f,c.width,c.height))}),We(this,"onComponentKeyDown",e=>{const{crop:t,disabled:r,onChange:i,onComplete:l}=this.props;if(r)return;const c=e.key;let d=!1;if(!t)return;const f=this.getBox(),h=this.makePixelCrop(f),g=(navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)?zn.nudgeStepLarge:e.shiftKey?zn.nudgeStepMedium:zn.nudgeStep;if(c==="ArrowLeft"?(h.x-=g,d=!0):c==="ArrowRight"?(h.x+=g,d=!0):c==="ArrowUp"?(h.y-=g,d=!0):c==="ArrowDown"&&(h.y+=g,d=!0),d){e.cancelable&&e.preventDefault(),h.x=Zi(h.x,0,f.width-h.width),h.y=Zi(h.y,0,f.height-h.height);const y=Wr(h,f.width,f.height),b=Wi(h,f.width,f.height);i(y,b),l&&l(y,b)}}),We(this,"onHandlerKeyDown",(e,t)=>{const{aspect:r=0,crop:i,disabled:l,minWidth:c=0,minHeight:d=0,maxWidth:f,maxHeight:h,onChange:g,onComplete:y}=this.props,b=this.getBox();if(l||!i)return;if(e.key==="ArrowUp"||e.key==="ArrowDown"||e.key==="ArrowLeft"||e.key==="ArrowRight")e.stopPropagation(),e.preventDefault();else return;const v=(navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)?zn.nudgeStepLarge:e.shiftKey?zn.nudgeStepMedium:zn.nudgeStep,w=Wr(i,b.width,b.height),N=j3(w,e.key,v,t),C=Wv(N,r,t,b.width,b.height,c,d,f,h);if(!Zv(i,C)){const j=Wi(C,b.width,b.height);g(C,j),y&&y(C,j)}}),We(this,"onDocPointerDone",e=>{const{crop:t,disabled:r,onComplete:i,onDragEnd:l}=this.props,c=this.getBox();this.unbindDocMove(),!(r||!t)&&this.mouseDownOnCrop&&(this.mouseDownOnCrop=!1,this.dragStarted=!1,l&&l(e),i&&i(Wr(t,c.width,c.height),Wi(t,c.width,c.height)),this.setState({cropIsActive:!1,newCropIsBeingDrawn:!1}))}),We(this,"onDragFocus",()=>{var e;(e=this.componentRef.current)==null||e.scrollTo(0,0)})}get document(){return document}getBox(){const e=this.mediaRef.current;if(!e)return{x:0,y:0,width:0,height:0};const{x:t,y:r,width:i,height:l}=e.getBoundingClientRect();return{x:t,y:r,width:i,height:l}}componentDidUpdate(e){const{crop:t,onComplete:r}=this.props;if(r&&!e.crop&&t){const{width:i,height:l}=this.getBox();i&&l&&r(Wr(t,i,l),Wi(t,i,l))}}componentWillUnmount(){this.resizeObserver&&this.resizeObserver.disconnect(),this.unbindDocMove()}bindDocMove(){this.docMoveBound||(this.document.addEventListener("pointermove",this.onDocPointerMove,ea),this.document.addEventListener("pointerup",this.onDocPointerDone,ea),this.document.addEventListener("pointercancel",this.onDocPointerDone,ea),this.docMoveBound=!0)}unbindDocMove(){this.docMoveBound&&(this.document.removeEventListener("pointermove",this.onDocPointerMove,ea),this.document.removeEventListener("pointerup",this.onDocPointerDone,ea),this.document.removeEventListener("pointercancel",this.onDocPointerDone,ea),this.docMoveBound=!1)}getCropStyle(){const{crop:e}=this.props;if(e)return{top:`${e.y}${e.unit}`,left:`${e.x}${e.unit}`,width:`${e.width}${e.unit}`,height:`${e.height}${e.unit}`}}dragCrop(){const{evData:e}=this,t=this.getBox(),r=this.makePixelCrop(t),i=e.clientX-e.startClientX,l=e.clientY-e.startClientY;return r.x=Zi(e.startCropX+i,0,t.width-r.width),r.y=Zi(e.startCropY+l,0,t.height-r.height),r}getPointRegion(e,t,r,i){const{evData:l}=this,c=l.clientX-e.x,d=l.clientY-e.y;let f;i&&t?f=t==="nw"||t==="n"||t==="ne":f=d<l.startCropY;let h;return r&&t?h=t==="nw"||t==="w"||t==="sw":h=c<l.startCropX,h?f?"nw":"sw":f?"ne":"se"}resolveMinDimensions(e,t,r=0,i=0){const l=Math.min(r,e.width),c=Math.min(i,e.height);return!t||!l&&!c?[l,c]:t>1?l?[l,l/t]:[c*t,c]:c?[c*t,c]:[l,l/t]}resizeCrop(){const{evData:e}=this,{aspect:t=0,maxWidth:r,maxHeight:i}=this.props,l=this.getBox(),[c,d]=this.resolveMinDimensions(l,t,this.props.minWidth,this.props.minHeight);let f=this.makePixelCrop(l);const h=this.getPointRegion(l,e.ord,c,d),g=e.ord||h;let y=e.clientX-e.startClientX,b=e.clientY-e.startClientY;(c&&g==="nw"||g==="w"||g==="sw")&&(y=Math.min(y,-c)),(d&&g==="nw"||g==="n"||g==="ne")&&(b=Math.min(b,-d));const v={unit:"px",x:0,y:0,width:0,height:0};h==="ne"?(v.x=e.startCropX,v.width=y,t?(v.height=v.width/t,v.y=e.startCropY-v.height):(v.height=Math.abs(b),v.y=e.startCropY-v.height)):h==="se"?(v.x=e.startCropX,v.y=e.startCropY,v.width=y,t?v.height=v.width/t:v.height=b):h==="sw"?(v.x=e.startCropX+y,v.y=e.startCropY,v.width=Math.abs(y),t?v.height=v.width/t:v.height=b):h==="nw"&&(v.x=e.startCropX+y,v.width=Math.abs(y),t?(v.height=v.width/t,v.y=e.startCropY-v.height):(v.height=Math.abs(b),v.y=e.startCropY+b));const w=Wv(v,t,h,l.width,l.height,c,d,r,i);return t||zn.xyOrds.indexOf(g)>-1?f=w:zn.xOrds.indexOf(g)>-1?(f.x=w.x,f.width=w.width):zn.yOrds.indexOf(g)>-1&&(f.y=w.y,f.height=w.height),f.x=Zi(f.x,0,l.width-f.width),f.y=Zi(f.y,0,l.height-f.height),f}renderCropSelection(){const{ariaLabels:e=zn.defaultProps.ariaLabels,disabled:t,locked:r,renderSelectionAddon:i,ruleOfThirds:l,crop:c}=this.props,d=this.getCropStyle();if(c)return we.createElement("div",{style:d,className:"ReactCrop__crop-selection",onPointerDown:this.onCropPointerDown,"aria-label":e.cropArea,tabIndex:0,onKeyDown:this.onComponentKeyDown,role:"group"},!t&&!r&&we.createElement("div",{className:"ReactCrop__drag-elements",onFocus:this.onDragFocus},we.createElement("div",{className:"ReactCrop__drag-bar ord-n","data-ord":"n"}),we.createElement("div",{className:"ReactCrop__drag-bar ord-e","data-ord":"e"}),we.createElement("div",{className:"ReactCrop__drag-bar ord-s","data-ord":"s"}),we.createElement("div",{className:"ReactCrop__drag-bar ord-w","data-ord":"w"}),we.createElement("div",{className:"ReactCrop__drag-handle ord-nw","data-ord":"nw",tabIndex:0,"aria-label":e.nwDragHandle,onKeyDown:f=>this.onHandlerKeyDown(f,"nw"),role:"button"}),we.createElement("div",{className:"ReactCrop__drag-handle ord-n","data-ord":"n",tabIndex:0,"aria-label":e.nDragHandle,onKeyDown:f=>this.onHandlerKeyDown(f,"n"),role:"button"}),we.createElement("div",{className:"ReactCrop__drag-handle ord-ne","data-ord":"ne",tabIndex:0,"aria-label":e.neDragHandle,onKeyDown:f=>this.onHandlerKeyDown(f,"ne"),role:"button"}),we.createElement("div",{className:"ReactCrop__drag-handle ord-e","data-ord":"e",tabIndex:0,"aria-label":e.eDragHandle,onKeyDown:f=>this.onHandlerKeyDown(f,"e"),role:"button"}),we.createElement("div",{className:"ReactCrop__drag-handle ord-se","data-ord":"se",tabIndex:0,"aria-label":e.seDragHandle,onKeyDown:f=>this.onHandlerKeyDown(f,"se"),role:"button"}),we.createElement("div",{className:"ReactCrop__drag-handle ord-s","data-ord":"s",tabIndex:0,"aria-label":e.sDragHandle,onKeyDown:f=>this.onHandlerKeyDown(f,"s"),role:"button"}),we.createElement("div",{className:"ReactCrop__drag-handle ord-sw","data-ord":"sw",tabIndex:0,"aria-label":e.swDragHandle,onKeyDown:f=>this.onHandlerKeyDown(f,"sw"),role:"button"}),we.createElement("div",{className:"ReactCrop__drag-handle ord-w","data-ord":"w",tabIndex:0,"aria-label":e.wDragHandle,onKeyDown:f=>this.onHandlerKeyDown(f,"w"),role:"button"})),i&&we.createElement("div",{className:"ReactCrop__selection-addon",onPointerDown:f=>f.stopPropagation()},i(this.state)),l&&we.createElement(we.Fragment,null,we.createElement("div",{className:"ReactCrop__rule-of-thirds-hz"}),we.createElement("div",{className:"ReactCrop__rule-of-thirds-vt"})))}makePixelCrop(e){const t={...ju,...this.props.crop||{}};return Wr(t,e.width,e.height)}render(){const{aspect:e,children:t,circularCrop:r,className:i,crop:l,disabled:c,locked:d,style:f,ruleOfThirds:h}=this.props,{cropIsActive:g,newCropIsBeingDrawn:y}=this.state,b=l?this.renderCropSelection():null,v=k3("ReactCrop",i,g&&"ReactCrop--active",c&&"ReactCrop--disabled",d&&"ReactCrop--locked",y&&"ReactCrop--new-crop",l&&e&&"ReactCrop--fixed-aspect",l&&r&&"ReactCrop--circular-crop",l&&h&&"ReactCrop--rule-of-thirds",!this.dragStarted&&l&&!l.width&&!l.height&&"ReactCrop--invisible-crop",r&&"ReactCrop--no-animate");return we.createElement("div",{ref:this.componentRef,className:v,style:f},we.createElement("div",{ref:this.mediaRef,className:"ReactCrop__child-wrapper",onPointerDown:this.onComponentPointerDown},t),l?we.createElement("svg",{className:"ReactCrop__crop-mask",width:"100%",height:"100%"},we.createElement("defs",null,we.createElement("mask",{id:`hole-${this.instanceId}`},we.createElement("rect",{width:"100%",height:"100%",fill:"white"}),r?we.createElement("ellipse",{cx:`${l.x+l.width/2}${l.unit}`,cy:`${l.y+l.height/2}${l.unit}`,rx:`${l.width/2}${l.unit}`,ry:`${l.height/2}${l.unit}`,fill:"black"}):we.createElement("rect",{x:`${l.x}${l.unit}`,y:`${l.y}${l.unit}`,width:`${l.width}${l.unit}`,height:`${l.height}${l.unit}`,fill:"black"}))),we.createElement("rect",{fill:"black",fillOpacity:.5,width:"100%",height:"100%",mask:`url(#hole-${this.instanceId})`})):void 0,b)}};We(ts,"xOrds",["e","w"]),We(ts,"yOrds",["n","s"]),We(ts,"xyOrds",["nw","ne","se","sw"]),We(ts,"nudgeStep",1),We(ts,"nudgeStepMedium",10),We(ts,"nudgeStepLarge",100),We(ts,"defaultProps",{ariaLabels:{cropArea:"Use the arrow keys to move the crop selection area",nwDragHandle:"Use the arrow keys to move the north west drag handle to change the crop selection area",nDragHandle:"Use the up and down arrow keys to move the north drag handle to change the crop selection area",neDragHandle:"Use the arrow keys to move the north east drag handle to change the crop selection area",eDragHandle:"Use the up and down arrow keys to move the east drag handle to change the crop selection area",seDragHandle:"Use the arrow keys to move the south east drag handle to change the crop selection area",sDragHandle:"Use the up and down arrow keys to move the south drag handle to change the crop selection area",swDragHandle:"Use the arrow keys to move the south west drag handle to change the crop selection area",wDragHandle:"Use the up and down arrow keys to move the west drag handle to change the crop selection area"}});let T3=ts;const Kp=({src:n,onCropComplete:e,onCancel:t,aspectRatio:r=1})=>{const[i,l]=E.useState({unit:"%",width:90,height:90,x:5,y:5}),[c,d]=E.useState(),f=E.useRef(null),h=E.useCallback(b=>{const{width:v,height:w}=b.currentTarget;let N=v,C=w;v/w>r?N=w*r:C=v/r;const j=N/v*100,O=C/w*100,M=(100-j)/2,A=(100-O)/2;l({unit:"%",width:j,height:O,x:M,y:A})},[r]),g=E.useCallback(async(b,v)=>{const w=document.createElement("canvas"),N=w.getContext("2d");if(!N)throw new Error("No 2d context");const C=400;w.width=C,w.height=C;const j=b.naturalWidth/b.width,O=b.naturalHeight/b.height;return N.drawImage(b,v.x*j,v.y*O,v.width*j,v.height*O,0,0,C,C),new Promise((M,A)=>{w.toBlob(L=>{L?M(L):A(new Error("Canvas is empty"))},"image/jpeg",.9)})},[]),y=E.useCallback(async()=>{if(!(!c||!f.current))try{const b=await g(f.current,c);e(b)}catch(b){console.error("Error creating cropped image:",b)}},[c,g,e]);return p.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-75",children:p.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-5xl max-h-[95vh] overflow-auto mx-4",children:[p.jsxs("div",{className:"flex justify-between items-center mb-4",children:[p.jsx("h3",{className:"text-lg font-medium",children:"Crop Image for Product Card"}),p.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 text-xl font-bold",children:"✕"})]}),p.jsxs("div",{className:"mb-4 text-sm text-gray-600 bg-blue-50 p-3 rounded",children:[p.jsxs("p",{children:["📐 ",p.jsx("strong",{children:"Perfect fit guaranteed!"})," Adjust the crop area to fit your image perfectly for the product card."]}),p.jsx("p",{children:"📏 The image will be cropped to a square format (1:1 aspect ratio) at 400x400 pixels."}),p.jsx("p",{className:"text-indigo-600 font-medium",children:"👀 Preview: This is exactly how your image will appear on product cards"})]}),p.jsx("div",{className:"flex justify-center mb-6",children:p.jsx(T3,{crop:i,onChange:(b,v)=>l(v),onComplete:b=>d(b),aspect:r,className:"max-w-full",style:{maxHeight:"60vh"},children:p.jsx("img",{ref:f,alt:"Crop preview",src:n,onLoad:h,className:"max-w-full object-contain",style:{maxHeight:"60vh"}})})}),p.jsxs("div",{className:"flex justify-end space-x-3",children:[p.jsx("button",{onClick:t,className:"px-6 py-2 text-gray-700 bg-gray-100 rounded hover:bg-gray-200 transition-colors",children:"Cancel"}),p.jsx("button",{onClick:y,className:"px-6 py-2 text-white bg-indigo-600 rounded hover:bg-indigo-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",disabled:!c,children:"Apply Crop & Continue"})]})]})})},M3=({onSuccess:n,onError:e})=>{const{token:t}=ft(),[r,i]=E.useState(80),[l,c]=E.useState(120),[d,f]=E.useState(0),[h,g]=E.useState(30),[y,b]=E.useState(5e3),[v,w]=E.useState([]),[N,C]=E.useState(!1),[j,O]=E.useState(null),[M,A]=E.useState({image:null,title:"",subtitle:"",link:"",order:0,is_active:!0,view_type:"desktop"}),[L,B]=E.useState({}),[F,_]=E.useState({message:"",type:"success",visible:!1}),[re,le]=E.useState(!0),[$,se]=E.useState(!1),pe=E.useRef(null),[Ge,Oe]=E.useState(""),[V,te]=E.useState(""),[de,Se]=E.useState(""),[R,U]=E.useState(!1),[ne,K]=E.useState(""),[Z,ce]=E.useState(""),ie=(Y,Q)=>{_({message:Y,type:Q,visible:!0}),Q==="success"&&n&&n(Y),Q==="error"&&e&&e(Y)},Le=async()=>{le(!0);try{if(!t)return;const Y=await xp.getAllSettings(t),Q=Y.find(Be=>Be.key==="delivery_fee_ncr"),he=Y.find(Be=>Be.key==="delivery_fee_outside_ncr"),Ee=Y.find(Be=>Be.key==="free_delivery_threshold"),He=Y.find(Be=>Be.key==="payment_options_description"),gt=Y.find(Be=>Be.key==="what_happens_after_payment"),Qe=Y.find(Be=>Be.key==="thanks_message"),zt=Y.find(Be=>Be.key==="product_hold_duration");Q&&i(parseInt(Q.value)),he&&c(parseInt(he.value)),Ee&&f(parseInt(Ee.value)),He&&Oe(He.value||""),gt&&te(gt.value||""),Qe&&Se(Qe.value||""),zt&&g(parseInt(zt.value));const nt=await Cl.getAll(t);w(nt.data.carousels),b(nt.data.interval)}catch{ie("Failed to load settings","error")}finally{le(!1)}};E.useEffect(()=>{Le()},[t]);const qe=async Y=>{if(Y.preventDefault(),!!t){se(!0);try{await xp.updateMultipleSettings(t,[{key:"delivery_fee_ncr",value:r},{key:"delivery_fee_outside_ncr",value:l},{key:"free_delivery_threshold",value:d},{key:"hero_carousel_interval",value:y},{key:"payment_options_description",value:Ge},{key:"what_happens_after_payment",value:V},{key:"thanks_message",value:de},{key:"product_hold_duration",value:h}]),ie("Settings updated successfully.","success")}catch{ie("Failed to update settings.","error")}finally{se(!1)}}},Jt=Y=>{O(Y),A({...Y,image:null}),ce(""),C(!0)},Wn=async Y=>{if(t&&window.confirm("Delete this slide?"))try{await Cl.delete(t,Y),ie("Slide deleted successfully.","success"),Le()}catch{ie("Failed to delete slide.","error")}},gn=Y=>{const{name:Q,value:he,type:Ee}=Y.target;let He=he;Ee==="checkbox"&&Y.target instanceof HTMLInputElement&&(He=Y.target.checked),A(gt=>({...gt,[Q]:He}))},ws=Y=>{if(Y.target.files&&Y.target.files[0]){const Q=Y.target.files[0],he=URL.createObjectURL(Q);K(he),U(!0)}},Ss=Y=>{const Q=new File([Y],"hero-carousel-image.jpg",{type:"image/jpeg"});A(he=>({...he,image:Q})),ce(URL.createObjectURL(Q)),U(!1),K("")},Ns=()=>{U(!1),K("")},Cs=async Y=>{if(Y.preventDefault(),!t)return;B({});const Q=new FormData;M.image&&Q.append("image",M.image),Q.append("title",M.title||""),Q.append("subtitle",M.subtitle||""),Q.append("link",M.link||""),Q.append("order",String(M.order||0)),Q.append("is_active",M.is_active?"1":"0"),Q.append("view_type",M.view_type||"desktop");try{j?(await Cl.update(t,j.id,Q),ie("Slide updated successfully.","success")):(await Cl.create(t,Q),ie("Slide created successfully.","success")),C(!1),O(null),A({image:null,title:"",subtitle:"",link:"",order:0,is_active:!0,view_type:"desktop"}),ce(""),Le()}catch(he){console.log(he),he&&he.message&&he.message.includes("422")?he.response&&he.response.errors?B(he.response.errors):he.errors?B(he.errors):ie("Validation error. Please check your input.","error"):he&&he.errors?(B(he.errors),ie("Validation error. Please check your input.","error")):ie(he.message||"Failed to save.","error")}};return re?p.jsx("div",{className:"p-4",children:"Loading settings..."}):p.jsxs("div",{className:"bg-white p-6 rounded shadow",children:[p.jsx(Dk,{message:F.message,type:F.type,isVisible:F.visible,onClose:()=>_(Y=>({...Y,visible:!1}))}),p.jsx("h2",{className:"text-xl font-medium mb-6",children:"Shop Settings"}),p.jsxs("form",{onSubmit:qe,children:[p.jsxs("div",{className:"mb-4",children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Hold Duration (minutes)"}),p.jsx("input",{type:"number",min:1,step:1,value:h,onChange:Y=>g(parseInt(Y.target.value)||30),className:"w-full border-gray-300 rounded-md shadow-sm p-2 border",required:!0}),p.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"How long a product will be held for a customer during checkout before being released back to available status."})]}),p.jsxs("div",{className:"mb-4",children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Standard Delivery Fee Within NCR (₱)"}),p.jsx("input",{type:"number",min:0,step:1,value:r,onChange:Y=>i(parseInt(Y.target.value)||0),className:"w-full border-gray-300 rounded-md shadow-sm p-2 border",required:!0}),p.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"The standard delivery fee for addresses within NCR."})]}),p.jsxs("div",{className:"mb-4",children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Standard Delivery Fee Outside NCR (₱)"}),p.jsx("input",{type:"number",min:0,step:1,value:l,onChange:Y=>c(parseInt(Y.target.value)||0),className:"w-full border-gray-300 rounded-md shadow-sm p-2 border",required:!0}),p.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"The standard delivery fee for addresses outside NCR."})]}),p.jsxs("div",{className:"mb-4",children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Free Delivery Threshold (₱)"}),p.jsx("input",{type:"number",min:0,step:1,value:d,onChange:Y=>f(parseInt(Y.target.value)||0),className:"w-full border-gray-300 rounded-md shadow-sm p-2 border"}),p.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Orders above this amount will qualify for free delivery. Set to 0 to disable free delivery."})]}),p.jsxs("div",{className:"mb-6",children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Options Description"}),p.jsx(Pl,{value:Ge,onChange:Oe}),p.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"This description will be shown to customers at checkout. You can use formatting, links, and images."})]}),p.jsxs("div",{className:"mb-6",children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm payment"}),p.jsx(Pl,{value:V,onChange:te}),p.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"This text will be displayed to customers as a prompt to confirm their payment. You can include instructions, links, and images."})]}),p.jsxs("div",{className:"mb-6",children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Thank you message"}),p.jsx(Pl,{value:de,onChange:Se}),p.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Shown as a thank-you note after the order. Supports text, links, and images."})]}),p.jsxs("div",{className:"mb-6",children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hero Carousel Image Change Interval (ms)"}),p.jsx("input",{type:"number",min:1e3,step:100,value:y,onChange:Y=>b(parseInt(Y.target.value,10)),className:"w-40 border-gray-300 rounded-md shadow-sm p-2 border"})]}),p.jsx("div",{className:"flex justify-end",children:p.jsx("button",{type:"submit",disabled:$,className:"bg-black text-white px-4 py-2 rounded hover:bg-gray-800 disabled:bg-gray-400",children:$?"Saving...":"Save Settings"})})]}),p.jsxs("div",{className:"mt-10",children:[p.jsxs("div",{className:"flex justify-between items-center mb-4",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold",children:"Hero Carousel Slides"}),p.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Create separate slides for desktop and mobile views. Desktop slides show on screens ≥768px wide."})]}),p.jsx("button",{className:"bg-black text-white px-4 py-2 rounded hover:bg-gray-800",onClick:()=>{C(!0),O(null),A({image:null,title:"",subtitle:"",link:"",order:0,is_active:!0,view_type:"desktop"}),ce("")},children:"Add Slide"})]}),p.jsx("div",{className:"overflow-x-auto",children:p.jsxs("table",{className:"min-w-full divide-y divide-gray-200 mb-6",children:[p.jsx("thead",{className:"bg-gray-50",children:p.jsxs("tr",{children:[p.jsx("th",{className:"px-4 py-2",children:"Image"}),p.jsx("th",{className:"px-4 py-2",children:"Title"}),p.jsx("th",{className:"px-4 py-2",children:"Subtitle"}),p.jsx("th",{className:"px-4 py-2",children:"Description"}),p.jsx("th",{className:"px-4 py-2",children:"Order"}),p.jsx("th",{className:"px-4 py-2",children:"View Type"}),p.jsx("th",{className:"px-4 py-2",children:"Active"}),p.jsx("th",{className:"px-4 py-2",children:"Actions"})]})}),p.jsx("tbody",{children:v.sort((Y,Q)=>Y.view_type!==Q.view_type?Y.view_type==="desktop"?-1:1:Y.order-Q.order).map(Y=>p.jsxs("tr",{className:"border-b",children:[p.jsx("td",{className:"px-4 py-2",children:Y.image_url&&p.jsx("img",{src:Y.image_url,alt:"",className:"h-16 w-32 object-cover rounded"})}),p.jsx("td",{className:"px-4 py-2",children:Y.title}),p.jsx("td",{className:"px-4 py-2",children:Y.subtitle}),p.jsx("td",{className:"px-4 py-2 max-w-xs truncate",children:Y.link}),p.jsx("td",{className:"px-4 py-2",children:Y.order}),p.jsx("td",{className:"px-4 py-2",children:p.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${Y.view_type==="desktop"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:Y.view_type==="desktop"?"Desktop":"Mobile"})}),p.jsx("td",{className:"px-4 py-2",children:Y.is_active?"Yes":"No"}),p.jsxs("td",{className:"px-4 py-2 space-x-2",children:[p.jsx("button",{className:"text-blue-600 hover:underline",onClick:()=>Jt(Y),children:"Edit"}),p.jsx("button",{className:"text-red-600 hover:underline",onClick:()=>Wn(Y.id),children:"Delete"})]})]},Y.id))})]})})]}),p.jsx(Lk,{isOpen:N,onClose:()=>{C(!1),O(null),B({}),ce("")},title:j?"Edit Slide":"Add Slide",children:p.jsxs("form",{onSubmit:Cs,className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"View Type"}),p.jsxs("select",{name:"view_type",value:M.view_type||"desktop",onChange:Y=>{const Q=Y.target.value;if((Z||M.image)&&M.view_type!==Q){if(!window.confirm("Changing the view type will remove the current image. You will need to upload and crop a new image with the appropriate aspect ratio. Continue?"))return;ce(""),A(Ee=>({...Ee,image:null,view_type:Q}))}else A(he=>({...he,view_type:Q}))},className:"w-full border-gray-300 rounded-md shadow-sm p-2 border",children:[p.jsx("option",{value:"desktop",children:"Desktop"}),p.jsx("option",{value:"mobile",children:"Mobile"})]}),p.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Desktop images will be shown on screens 768px and wider. Mobile images will be shown on smaller screens."}),L.view_type&&p.jsx("div",{className:"text-red-600 text-xs mt-1",children:L.view_type.join(", ")})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Title"}),p.jsx("input",{type:"text",name:"title",value:M.title||"",onChange:gn,className:"w-full border-gray-300 rounded-md shadow-sm p-2 border"}),L.title&&p.jsx("div",{className:"text-red-600 text-xs mt-1",children:L.title.join(", ")})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Subtitle"}),p.jsx("input",{type:"text",name:"subtitle",value:M.subtitle||"",onChange:gn,className:"w-full border-gray-300 rounded-md shadow-sm p-2 border"}),L.subtitle&&p.jsx("div",{className:"text-red-600 text-xs mt-1",children:L.subtitle.join(", ")})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),p.jsx("input",{type:"text",name:"link",value:M.link||"",onChange:gn,className:"w-full border-gray-300 rounded-md shadow-sm p-2 border"}),L.link&&p.jsx("div",{className:"text-red-600 text-xs mt-1",children:L.link.join(", ")})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Order"}),p.jsx("input",{type:"number",name:"order",value:M.order||0,onChange:gn,className:"w-full border-gray-300 rounded-md shadow-sm p-2 border"}),L.order&&p.jsx("div",{className:"text-red-600 text-xs mt-1",children:L.order.join(", ")})]}),p.jsxs("div",{children:[p.jsxs("label",{className:"inline-flex items-center",children:[p.jsx("input",{type:"checkbox",name:"is_active",checked:!!M.is_active,onChange:gn,className:"mr-2"}),"Active"]}),L.is_active&&p.jsx("div",{className:"text-red-600 text-xs mt-1",children:L.is_active.join(", ")})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Image"}),p.jsxs("div",{className:"mt-2",children:[Z?p.jsxs("div",{className:"mb-4",children:[p.jsx("img",{src:Z,alt:"Cropped preview",className:"h-32 w-48 object-cover rounded border"}),p.jsx("p",{className:"text-xs text-green-600 mt-2",children:"✓ Image cropped and ready"}),p.jsx("button",{type:"button",onClick:()=>{A(Y=>({...Y,image:null})),ce("")},className:"mt-2 text-sm text-red-600 hover:text-red-500",children:"Remove"})]}):p.jsxs(p.Fragment,{children:[p.jsx("input",{type:"file",accept:"image/*",onChange:ws,ref:pe}),p.jsxs("div",{className:"mt-2 p-3 bg-blue-50 rounded-lg",children:[p.jsx("p",{className:"text-sm font-medium text-blue-800 mb-1",children:"Recommended Image Dimensions:"}),M.view_type==="desktop"?p.jsxs("p",{className:"text-xs text-blue-700",children:[p.jsx("strong",{children:"Desktop:"})," 1920x1080px (16:9 ratio) - for wide screens ≥768px"]}):p.jsxs("p",{className:"text-xs text-blue-700",children:[p.jsx("strong",{children:"Mobile:"})," 1080x1440px (3:4 ratio) - for screens <768px"]}),p.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"📐 Images will be automatically cropped to the optimal aspect ratio for better display"})]})]}),!Z&&!M.image&&M.image_url&&p.jsxs("div",{className:"mt-2",children:[p.jsx("img",{src:M.image_url,alt:"Current",className:"h-32 w-48 object-cover rounded border"}),p.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Current image"})]})]}),L.image&&p.jsx("div",{className:"text-red-600 text-xs mt-1",children:L.image.join(", ")})]}),p.jsxs("div",{className:"flex space-x-2",children:[p.jsx("button",{type:"submit",className:"bg-black text-white px-4 py-2 rounded hover:bg-gray-800",children:j?"Update":"Create"}),p.jsx("button",{type:"button",className:"bg-gray-200 text-gray-700 px-4 py-2 rounded",onClick:()=>{C(!1),O(null),B({}),ce("")},children:"Cancel"})]})]})}),R&&p.jsx(Kp,{src:ne,onCropComplete:Ss,onCancel:Ns,aspectRatio:M.view_type==="desktop"?16/9:3/4})]})},O3=({user:n,isOpen:e,onClose:t,onSubmit:r,isLoading:i,error:l})=>{const[c,d]=E.useState(""),[f,h]=E.useState("");return E.useEffect(()=>{d(""),h("")},[e,n]),!e||!n?null:p.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:p.jsxs("div",{className:"bg-white rounded shadow-lg p-6 w-full max-w-sm",children:[p.jsxs("h3",{className:"text-lg font-semibold mb-4",children:["Change Password for ",n.name]}),l&&p.jsx("div",{className:"mb-2 text-red-600 text-sm",children:l}),p.jsxs("div",{className:"mb-4",children:[p.jsx("label",{className:"block text-sm font-medium mb-1",children:"New Password"}),p.jsx("input",{type:"password",className:"w-full border border-gray-300 rounded px-3 py-2",value:c,onChange:g=>d(g.target.value),autoFocus:!0})]}),p.jsxs("div",{className:"mb-4",children:[p.jsx("label",{className:"block text-sm font-medium mb-1",children:"Confirm Password"}),p.jsx("input",{type:"password",className:"w-full border border-gray-300 rounded px-3 py-2",value:f,onChange:g=>h(g.target.value)})]}),p.jsxs("div",{className:"flex justify-end gap-2",children:[p.jsx("button",{className:"px-4 py-2 bg-gray-200 rounded text-gray-700",onClick:t,disabled:i,children:"Cancel"}),p.jsx("button",{className:"px-4 py-2 bg-black text-white rounded",onClick:()=>r(n.id,c,f),disabled:i||!c||!f,children:i?"Saving...":"Save"})]})]})})},R3=()=>{const{token:n}=ft(),[e,t]=E.useState([]),[r,i]=E.useState(!0),[l,c]=E.useState(""),[d,f]=E.useState(null),[h,g]=E.useState(!1),[y,b]=E.useState(!1),[v,w]=E.useState(null),[N,C]=E.useState(null);E.useEffect(()=>{j()},[n]);const j=async()=>{i(!0);try{if(!n)return;const B=await Jx.getAllUsers(n);t(B.users||[])}catch{}finally{i(!1)}},O=e.filter(B=>{var F,_;return B.name.toLowerCase().includes(l.toLowerCase())||B.email.toLowerCase().includes(l.toLowerCase())||(((_=(F=B.profile)==null?void 0:F.instagram_username)==null?void 0:_.toLowerCase().includes(l.toLowerCase()))??!1)}),M=B=>{f(B),g(!0),w(null),C(null)},A=()=>{g(!1),f(null),w(null),C(null)},L=async(B,F,_)=>{b(!0),w(null);try{if(!n)return;await Jx.changeUserPassword(n,B,F,_),C("Password updated successfully."),setTimeout(()=>{A()},1200)}catch(re){w(re.message||"Failed to update password.")}finally{b(!1)}};return p.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[p.jsx("h2",{className:"text-xl font-semibold mb-6",children:"Manage Users"}),p.jsx("div",{className:"mb-4 flex flex-col sm:flex-row sm:items-center gap-2",children:p.jsx("input",{type:"text",placeholder:"Search by name, email, or Instagram username...",value:l,onChange:B=>c(B.target.value),className:"w-full sm:w-64 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-black focus:border-black"})}),r?p.jsx("div",{className:"text-center py-8",children:"Loading users..."}):O.length===0?p.jsx("div",{className:"text-center py-8 text-gray-500",children:"No users found."}):p.jsxs("div",{className:"overflow-x-auto",children:[p.jsxs("table",{className:"min-w-full divide-y divide-gray-200 mb-6 hidden md:table",children:[p.jsx("thead",{className:"bg-gray-50",children:p.jsxs("tr",{children:[p.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),p.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Email"}),p.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Role"}),p.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Instagram"}),p.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Address"}),p.jsx("th",{className:"px-4 py-2"})]})}),p.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:O.map(B=>{var F;return p.jsxs("tr",{children:[p.jsx("td",{className:"px-4 py-2",children:B.name}),p.jsx("td",{className:"px-4 py-2",children:B.email}),p.jsx("td",{className:"px-4 py-2",children:B.role}),p.jsx("td",{className:"px-4 py-2",children:((F=B.profile)==null?void 0:F.instagram_username)||""}),p.jsx("td",{className:"px-4 py-2",children:B.profile?[B.profile.address_line1,B.profile.barangay,B.profile.city,B.profile.province].filter(Boolean).join(", "):""}),p.jsx("td",{className:"px-4 py-2",children:p.jsx("button",{className:"bg-black text-white px-3 py-1 rounded text-sm",onClick:()=>M(B),children:"Change Password"})})]},B.id)})})]}),p.jsx("div",{className:"md:hidden space-y-4",children:O.map(B=>{var F;return p.jsxs("div",{className:"bg-gray-50 rounded shadow p-4 flex flex-col gap-2",children:[p.jsx("div",{className:"font-semibold text-lg",children:B.name}),p.jsx("div",{className:"text-sm text-gray-700",children:B.email}),p.jsxs("div",{className:"text-xs text-gray-500",children:["Role: ",B.role]}),p.jsxs("div",{className:"text-xs text-gray-500",children:["Instagram: ",((F=B.profile)==null?void 0:F.instagram_username)||""]}),p.jsxs("div",{className:"text-xs text-gray-500",children:["Address: ",B.profile?[B.profile.address_line1,B.profile.barangay,B.profile.city,B.profile.province].filter(Boolean).join(", "):""]}),p.jsx("button",{className:"mt-2 bg-black text-white px-3 py-1 rounded text-sm self-start",onClick:()=>M(B),children:"Change Password"})]},B.id)})})]}),p.jsx(O3,{user:d,isOpen:h,onClose:A,onSubmit:L,isLoading:y,error:v}),N&&p.jsx("div",{className:"fixed bottom-4 left-1/2 transform -translate-x-1/2 bg-green-100 text-green-800 px-4 py-2 rounded shadow",children:N})]})},D3=({tabs:n,activeTab:e,onTabChange:t,className:r="",darkMode:i=!1})=>p.jsxs("div",{className:`border-b ${i?"border-gray-700":"border-gray-200"} ${r}`,children:[p.jsx("nav",{className:"hidden md:flex overflow-x-auto",children:n.map(l=>p.jsxs("button",{className:`px-4 lg:px-6 py-3 font-medium text-sm transition-colors whitespace-nowrap ${e===l.id?i?"border-b-2 border-white text-white bg-gray-800":"border-b-2 border-black text-black bg-white":i?"text-gray-400 hover:text-white hover:bg-gray-700":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,onClick:()=>t(l.id),children:[l.label,l.count!==void 0&&p.jsx("span",{className:`ml-2 px-2 py-0.5 rounded-full text-xs ${e===l.id?i?"bg-white text-gray-800":"bg-black text-white":i?"bg-gray-700 text-gray-200":"bg-gray-200 text-gray-700"}`,children:l.count})]},l.id))}),p.jsx("nav",{className:"md:hidden flex overflow-x-auto hide-scrollbar",children:n.map(l=>p.jsxs("button",{className:`px-3 py-2 font-medium text-xs transition-colors whitespace-nowrap flex items-center ${e===l.id?i?"border-b-2 border-white text-white bg-gray-800":"border-b-2 border-black text-black bg-white":i?"text-gray-400 hover:text-white hover:bg-gray-700":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,onClick:()=>t(l.id),children:[p.jsx("span",{children:l.label}),l.count!==void 0&&p.jsx("span",{className:`ml-1 px-1.5 py-0.5 rounded-full text-xs ${e===l.id?i?"bg-white text-gray-800":"bg-black text-white":i?"bg-gray-700 text-gray-200":"bg-gray-200 text-gray-700"}`,children:l.count})]},l.id))})]}),zS=({children:n,title:e,showBackButton:t=!1,backButtonPath:r="/admin",backButtonText:i="Back to Admin",tabs:l,activeTab:c,onTabChange:d,darkTabs:f=!1})=>{const{isAdmin:h}=ft();return h?p.jsx("div",{className:"-mt-16 md:-mt-20",children:p.jsxs("div",{className:"container mx-auto px-4 py-8",children:[p.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[p.jsx("h1",{className:"text-2xl font-bold",children:e}),t&&p.jsx(ye,{to:r,className:"bg-black text-white px-4 py-2 rounded whitespace-nowrap",children:i})]}),l&&c&&d&&p.jsx("div",{className:`${f?"bg-gray-900":"bg-white"} shadow rounded mb-6`,children:p.jsx(D3,{tabs:l,activeTab:c,onTabChange:d,darkMode:f})}),n]})}):p.jsx("div",{className:"container mx-auto px-4 py-8",children:p.jsx("div",{className:"bg-red-100 text-red-700 p-4 rounded",children:p.jsx("p",{children:"You do not have permission to access this page."})})})},e1=()=>{const{isAdmin:n,token:e}=ft(),{tab:t}=Tu(),r=jr(),[i,l]=E.useState("products"),[c,d]=E.useState(null),[f,h]=E.useState(null),g=[{id:"products",label:"Products"},{id:"orders",label:"Orders"},{id:"users",label:"Users"},{id:"announcements",label:"Announcements"},{id:"settings",label:"Settings"}];E.useEffect(()=>{t&&g.some(N=>N.id===t)&&l(t)},[t]);const y=N=>{l(N),r(`/admin/${N}`),d(null),h(null)},b=N=>{d(N),h(null),setTimeout(()=>{d(null)},5e3)},v=N=>{h(N),d(null)},w=()=>i==="products"?null:i==="orders"?p.jsx(ye,{to:"/admin-orders",className:"mt-4 sm:mt-0 inline-block bg-black text-white px-4 py-2 rounded",children:"Manage Orders"}):i==="users"?p.jsx(ye,{to:"/admin/users",className:"mt-4 sm:mt-0 inline-block bg-black text-white px-4 py-2",children:"Manage Users"}):null;return n?p.jsxs(zS,{title:"Admin Dashboard",tabs:g,activeTab:i,onTabChange:y,darkTabs:!0,children:[p.jsx("div",{className:"flex justify-end mb-4",children:p.jsx(w,{})}),c&&p.jsx("div",{className:"mb-4 p-4 bg-green-100 text-green-700 rounded",children:c}),f&&p.jsx("div",{className:"mb-4 p-4 bg-red-100 text-red-700 rounded",children:f}),p.jsxs("div",{className:"bg-white shadow rounded overflow-hidden p-4",children:[i==="products"&&p.jsx(Mk,{}),i==="orders"&&p.jsx(Ok,{}),i==="users"&&p.jsx(R3,{}),i==="announcements"&&p.jsx(Rk,{token:e||""}),i==="settings"&&p.jsx("div",{className:"space-y-8",children:p.jsx(M3,{onSuccess:b,onError:v})})]})]}):p.jsx("div",{className:"container mx-auto px-4 py-8",children:p.jsx("div",{className:"bg-red-100 text-red-700 p-4 rounded",children:p.jsx("p",{children:"You do not have permission to access this page."})})})},BS=({initialData:n,isEditing:e=!1,onSuccess:t,onError:r})=>{const i=jr(),{showToast:l}=xa(),{token:c}=ft(),[d,f]=E.useState(!1),[h,g]=E.useState(null),[y,b]=E.useState([]),[v,w]=E.useState(""),[N,C]=E.useState([]),[j,O]=E.useState([]),[M,A]=E.useState(!1),[L,B]=E.useState(!1),[F,_]=E.useState(""),[re,le]=E.useState([]),[$,se]=E.useState({sku:"",name:"",description:"",careInstructions:"",price:"",size:"m",isNewArrival:!1,isSale:!1});E.useEffect(()=>{var K;n&&e&&(console.log({initialData:n}),se({sku:n.sku||"",name:n.name||"",description:n.description||"",careInstructions:n.careInstructions||"",price:((K=n.price)==null?void 0:K.toString())||"",size:n.size||"m",isNewArrival:n.isNewArrival||!1,isSale:n.isSale||!1}),n.image&&w(n.image),n.images&&Array.isArray(n.images)&&C(n.images))},[n,e]);const pe=K=>{const{name:Z,value:ce,type:ie}=K.target;se(Le=>({...Le,[Z]:ie==="checkbox"?K.target.checked:ce}))},Ge=K=>{if(K.target.files&&K.target.files[0]){const Z=K.target.files[0],ce=URL.createObjectURL(Z);_(ce),A(!0)}},Oe=K=>{if(K.target.files){const ce=Array.from(K.target.files).map(ie=>URL.createObjectURL(ie));le(ce),ce.length>0&&(_(ce[0]),B(!0))}},V=K=>{const Z=new File([K],"main-image.jpg",{type:"image/jpeg"});g(Z),w(URL.createObjectURL(Z)),A(!1),_("")},te=K=>{const Z=new File([K],`additional-image-${Date.now()}.jpg`,{type:"image/jpeg"});b(Le=>[...Le,Z]),O(Le=>[...Le,URL.createObjectURL(Z)]);const ie=re.findIndex(Le=>Le===F)+1;ie<re.length?_(re[ie]):(B(!1),_(""),le([]))},de=()=>{A(!1),B(!1),_(""),le([])},Se=K=>{C(Z=>Z.filter((ce,ie)=>ie!==K))},R=K=>{b(Z=>Z.filter((ce,ie)=>ie!==K)),O(Z=>Z.filter((ce,ie)=>ie!==K))},U=async K=>{K.preventDefault(),f(!0);try{const Z=new FormData;Z.append("sku",$.sku),Z.append("name",$.name),Z.append("description",$.description),Z.append("care_instructions",$.careInstructions),Z.append("price",$.price),Z.append("size",$.size),Z.append("is_new_arrival",$.isNewArrival.toString()),Z.append("is_sale",$.isSale.toString()),h?Z.append("image",h):e&&v&&Z.append("existing_image",v),N.length>0&&Z.append("existing_additional_images",JSON.stringify(N)),y.forEach(ie=>{Z.append("additional_images[]",ie)}),e?await gs.updateProduct(c,n.id,Z):await gs.createProduct(c,Z);const ce=e?"Product updated successfully!":"Product created successfully!";l(ce,"success"),t&&t(ce),i("/admin/products")}catch(Z){console.error("Error:",Z);const ce=Z.message||"Something went wrong";l(ce,"error"),r&&r(ce)}finally{f(!1)}},ne=(K,Z)=>{console.log(`Updating ${K} with:`,Z),se(ce=>({...ce,[K]:Z}))};return p.jsxs("form",{onSubmit:U,className:"space-y-8 divide-y divide-gray-200",children:[p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-medium leading-6 text-gray-900",children:e?"Edit Product":"Add New Product"}),p.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:["Fill in the information below to ",e?"update":"create"," your product."]})]}),p.jsxs("div",{className:"grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6",children:[p.jsxs("div",{className:"sm:col-span-3",children:[p.jsx("label",{htmlFor:"sku",className:"block text-sm font-medium text-gray-700",children:"SKU"}),p.jsx("div",{className:"mt-1",children:p.jsx("input",{type:"text",name:"sku",id:"sku",value:$.sku,onChange:pe,className:"w-full border-gray-300 rounded-md shadow-sm p-2 border"})})]}),p.jsxs("div",{className:"sm:col-span-3",children:[p.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Product Name"}),p.jsx("div",{className:"mt-1",children:p.jsx("input",{type:"text",name:"name",id:"name",value:$.name,onChange:pe,required:!0,className:"w-full border-gray-300 rounded-md shadow-sm p-2 border"})})]}),p.jsxs("div",{className:"sm:col-span-6",children:[p.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description"}),p.jsx("div",{className:"mt-1",children:p.jsx(Pl,{value:$.description,onChange:K=>ne("description",K)},`description-${(n==null?void 0:n.id)||"new"}`)})]}),p.jsxs("div",{className:"sm:col-span-6",children:[p.jsx("label",{htmlFor:"careInstructions",className:"block text-sm font-medium text-gray-700",children:"Care Instructions"}),p.jsx("div",{className:"mt-1",children:p.jsx(Pl,{value:$.careInstructions,onChange:K=>ne("careInstructions",K)},`care-${(n==null?void 0:n.id)||"new"}`)})]}),p.jsxs("div",{className:"sm:col-span-2",children:[p.jsx("label",{htmlFor:"price",className:"block text-sm font-medium text-gray-700",children:"Price"}),p.jsx("div",{className:"mt-1",children:p.jsx("input",{type:"number",name:"price",id:"price",value:$.price,onChange:pe,required:!0,min:"0",step:"0.01",className:"w-full border-gray-300 rounded-md shadow-sm p-2 border"})})]}),p.jsxs("div",{className:"sm:col-span-2",children:[p.jsx("label",{htmlFor:"size",className:"block text-sm font-medium text-gray-700",children:"Size"}),p.jsx("div",{className:"mt-1",children:p.jsxs("select",{id:"size",name:"size",value:$.size,onChange:pe,required:!0,className:"w-full border-gray-300 rounded-md shadow-sm p-2 border",children:[p.jsx("option",{value:"xs",children:"XS"}),p.jsx("option",{value:"s",children:"S"}),p.jsx("option",{value:"m",children:"M"}),p.jsx("option",{value:"l",children:"L"}),p.jsx("option",{value:"xl",children:"XL"}),p.jsx("option",{value:"xxl",children:"XXL"})]})})]}),p.jsx("div",{className:"sm:col-span-2",children:p.jsxs("div",{className:"flex items-center space-x-4",children:[p.jsxs("div",{className:"flex items-center",children:[p.jsx("input",{id:"isNewArrival",name:"isNewArrival",type:"checkbox",checked:$.isNewArrival,onChange:pe,className:"w-full border-gray-300 rounded-md shadow-sm p-2 border"}),p.jsx("label",{htmlFor:"isNewArrival",className:"ml-2 block text-sm text-gray-900",children:"New Arrival"})]}),p.jsxs("div",{className:"flex items-center",children:[p.jsx("input",{id:"isSale",name:"isSale",type:"checkbox",checked:$.isSale,onChange:pe,className:"w-full border-gray-300 rounded-md shadow-sm p-2 border"}),p.jsx("label",{htmlFor:"isSale",className:"ml-2 block text-sm text-gray-900",children:"On Sale"})]})]})}),p.jsxs("div",{className:"sm:col-span-6",children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Main Product Image"}),p.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md",children:p.jsx("div",{className:"space-y-1 text-center",children:v?p.jsxs("div",{children:[p.jsx("img",{src:v,alt:"Preview",className:"mx-auto h-32 w-32 object-cover rounded"}),p.jsx("p",{className:"text-xs text-green-600 mt-2",children:"✓ Image cropped and ready"}),p.jsx("button",{type:"button",onClick:()=>{g(null),w("")},className:"mt-2 text-sm text-red-600 hover:text-red-500",children:"Remove"})]}):p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"mt-4 flex text-sm text-gray-600",children:p.jsxs("label",{htmlFor:"main-image-upload",className:"relative cursor-pointer bg-white rounded-md font-medium text-indigo-600 hover:text-indigo-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-indigo-500",children:[p.jsx("span",{children:"Upload a file"}),p.jsx("input",{id:"main-image-upload",name:"main-image-upload",type:"file",accept:"image/*",onChange:Ge,className:"sr-only"})]})}),p.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Image will be cropped to square format for product cards"})]})})})]}),p.jsxs("div",{className:"sm:col-span-6",children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Additional Images"}),p.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md",children:p.jsxs("div",{className:"space-y-1 text-center",children:[p.jsxs("div",{className:"flex flex-wrap gap-4 justify-center",children:[N.map((K,Z)=>p.jsxs("div",{className:"relative",children:[p.jsx("img",{src:K,alt:`Existing ${Z+1}`,className:"h-32 w-32 object-cover rounded"}),p.jsx("button",{type:"button",onClick:()=>Se(Z),className:"absolute top-0 right-0 -mt-2 -mr-2 bg-red-500 text-white rounded-full p-1",children:"×"})]},`existing-${Z}`)),j.map((K,Z)=>p.jsxs("div",{className:"relative",children:[p.jsx("img",{src:K,alt:`New ${Z+1}`,className:"h-32 w-32 object-cover rounded"}),p.jsx("p",{className:"text-xs text-green-600 mt-1",children:"✓ Cropped"}),p.jsx("button",{type:"button",onClick:()=>R(Z),className:"absolute top-0 right-0 -mt-2 -mr-2 bg-red-500 text-white rounded-full p-1",children:"×"})]},`new-${Z}`))]}),p.jsxs("div",{className:"text-center mt-4",children:[p.jsxs("label",{htmlFor:"additional-images-upload",className:"relative cursor-pointer bg-white rounded-md font-medium text-indigo-600 hover:text-indigo-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-indigo-500",children:[p.jsx("span",{children:"Upload additional images"}),p.jsx("input",{id:"additional-images-upload",name:"additional-images-upload",type:"file",accept:"image/*",multiple:!0,onChange:Oe,className:"sr-only"})]}),p.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Each image will be cropped to square format"})]})]})})]})]})]}),p.jsx("div",{className:"pt-5",children:p.jsxs("div",{className:"flex justify-end",children:[p.jsx("button",{type:"button",onClick:()=>i("/admin/products"),className:"bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"}),p.jsx("button",{type:"submit",disabled:d,className:"ml-3 inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:d?"Saving...":e?"Update Product":"Create Product"})]})}),M&&p.jsx(Kp,{src:F,onCropComplete:V,onCancel:de,aspectRatio:1}),L&&p.jsx(Kp,{src:F,onCropComplete:te,onCancel:de,aspectRatio:1})]})},L3=()=>{const{isAdmin:n}=ft(),[e,t]=E.useState(null),[r,i]=E.useState(null),l=d=>{t(d),i(null),setTimeout(()=>{t(null)},5e3)},c=d=>{i(d),t(null)};return n?p.jsxs("div",{className:"container mx-auto px-4 py-8",children:[p.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[p.jsx("h1",{className:"text-2xl font-bold",children:"Add Product"}),p.jsx(ye,{to:"/admin/products",className:"bg-black text-white px-4 py-2 rounded whitespace-nowrap w-full sm:w-auto text-center",children:"Back to Products"})]}),e&&p.jsx("div",{className:"mb-4 p-4 bg-green-100 text-green-700 rounded",children:e}),r&&p.jsx("div",{className:"mb-4 p-4 bg-red-100 text-red-700 rounded",children:r}),p.jsx("div",{className:"bg-white shadow rounded p-4 sm:p-6",children:p.jsx(BS,{onSuccess:l,onError:c})})]}):p.jsx("div",{className:"container mx-auto px-4 py-8",children:p.jsx("div",{className:"bg-red-100 text-red-700 p-4 rounded",children:p.jsx("p",{children:"You do not have permission to access this page."})})})},_3=()=>{const{isAdmin:n}=ft(),{productId:e}=Tu(),[t,r]=E.useState(null),[i,l]=E.useState(null),[c,d]=E.useState(null),[f,h]=E.useState(!0);E.useEffect(()=>{(async()=>{try{if(!e)return;const v=await gs.getProductById(e);d(v.data)}catch(v){console.error("Error fetching product:",v),l("Failed to load product data")}finally{h(!1)}})()},[e]);const g=b=>{r(b),l(null),setTimeout(()=>{r(null)},5e3)},y=b=>{l(b),r(null)};return n?f?p.jsxs("div",{className:"container mx-auto px-4 py-8",children:[p.jsxs("div",{className:"flex justify-between items-center mb-6",children:[p.jsx("h1",{className:"text-2xl font-bold",children:"Edit Product"}),p.jsx(ye,{to:"/admin/products",className:"bg-black text-white px-4 py-2 rounded whitespace-nowrap",children:"Back to Products"})]}),p.jsx("div",{className:"bg-white shadow rounded p-6",children:p.jsx("div",{className:"text-center py-8",children:p.jsx("p",{className:"text-gray-600",children:"Loading product data..."})})})]}):p.jsxs("div",{className:"container mx-auto px-4 py-8",children:[p.jsxs("div",{className:"flex justify-between items-center mb-6",children:[p.jsx("h1",{className:"text-2xl font-bold",children:"Edit Product"}),p.jsx(ye,{to:"/admin/products",className:"bg-black text-white px-4 py-2 rounded whitespace-nowrap",children:"Back to Products"})]}),t&&p.jsx("div",{className:"mb-4 p-4 bg-green-100 text-green-700 rounded",children:t}),i&&p.jsx("div",{className:"mb-4 p-4 bg-red-100 text-red-700 rounded",children:i}),p.jsx("div",{className:"bg-white shadow rounded p-6",children:p.jsx(BS,{initialData:c,isEditing:!0,onSuccess:g,onError:y})})]}):p.jsx("div",{className:"container mx-auto px-4 py-8",children:p.jsx("div",{className:"bg-red-100 text-red-700 p-4 rounded",children:p.jsx("p",{children:"You do not have permission to access this page."})})})},z3=()=>{const{token:n,isAdmin:e}=ft(),[t,r]=E.useState([]),[i,l]=E.useState([]),[c,d]=E.useState(!0),[f,h]=E.useState(null),[g,y]=E.useState(null),[b,v]=E.useState(""),[w,N]=E.useState(""),[C,j]=E.useState(!1),[O,M]=E.useState(!1),[A,L]=E.useState(""),[B,F]=E.useState(""),[_,re]=E.useState(!1),[le,$]=E.useState("all"),pe=(()=>{const U={all:t.length,pending:0,approved:0,shipped:0,delivered:0,cancelled:0};return t.forEach(ne=>{U[ne.status]!==void 0&&U[ne.status]++}),U})(),Ge=[{id:"all",label:"All Orders",count:pe.all},{id:"pending",label:"Pending",count:pe.pending},{id:"approved",label:"Approved",count:pe.approved},{id:"shipped",label:"Shipped",count:pe.shipped},{id:"delivered",label:"Delivered",count:pe.delivered},{id:"cancelled",label:"Cancelled",count:pe.cancelled}],Oe=U=>{$(U),L(U==="all"?"":U)};E.useEffect(()=>{const U=()=>{re(window.innerWidth<768)};return U(),window.addEventListener("resize",U),()=>{window.removeEventListener("resize",U)}},[]),E.useEffect(()=>{e&&V()},[e]),E.useEffect(()=>{te()},[t,A,B]);const V=async()=>{if(n){d(!0),h(null);try{const U=await oa.getAllOrders(n);r(U.data.orders)}catch(U){console.error("Error fetching orders:",U),h(U instanceof Error?U.message:"An error occurred while fetching orders")}finally{d(!1)}}},te=()=>{let U=[...t];if(A&&(U=U.filter(ne=>ne.status===A)),B){const ne=B.toLowerCase();U=U.filter(K=>K.customer_name.toLowerCase().includes(ne)||K.instagram_username.toLowerCase().includes(ne)||String(K.id).includes(ne)||K.mobile_number.includes(ne))}l(U)},de=async()=>{if(!(!n||!g)){j(!0),M(!1);try{if(await oa.updateOrderStatus(n,g.id,b,w),g){const U={...g,status:b,admin_notes:w};y(U)}V(),M(!0)}catch(U){console.error("Error updating order status:",U),h(U instanceof Error?U.message:"An error occurred while updating order status")}finally{j(!1)}}},Se=U=>{switch(U){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-green-100 text-green-800";case"shipped":return"bg-blue-100 text-blue-800";case"delivered":return"bg-indigo-100 text-indigo-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},R=U=>{if(!U)return"N/A";const ne=new Date(U);return ne.toLocaleDateString()+" "+ne.toLocaleTimeString()};return e?p.jsx(zS,{title:"Order Management",showBackButton:!0,tabs:Ge,activeTab:le,onTabChange:Oe,darkTabs:!0,children:p.jsx(_1,{filteredOrders:i,selectedOrder:g,onSelectOrder:U=>{y(U),v((U==null?void 0:U.status)||""),N((U==null?void 0:U.admin_notes)||""),M(!1)},loading:c,error:f,tabs:Ge,activeTab:le,onTabChange:Oe,onClearFilters:()=>{F(""),L(""),$("all")},searchQuery:B,onSearchQueryChange:F,mobileView:_,adminMode:!0,updateStatus:b,onUpdateStatus:v,adminNotes:w,onAdminNotesChange:N,onStatusUpdate:de,isUpdating:C,updateSuccess:O,getStatusBadgeClass:Se,formatDate:R})}):null},B3=({token:n})=>{const e=jr(),{id:t}=Tu(),r=!!t,[i,l]=E.useState({text:"",isActive:!0,displayOrder:0,buttonText:null,buttonLink:null,backgroundColor:"#000000",textColor:"#FFFFFF"}),[c,d]=E.useState(r),[f,h]=E.useState(!1),[g,y]=E.useState(null),[b,v]=E.useState(null);E.useEffect(()=>{(async()=>{if(r)try{d(!0);const O=await Zs.getAnnouncementById(n,Number(t));l({text:O.text,isActive:O.isActive,displayOrder:O.displayOrder,buttonText:O.buttonText,buttonLink:O.buttonLink,backgroundColor:O.backgroundColor,textColor:O.textColor})}catch(O){y("Failed to load announcement data. Please try again."),console.error("Error fetching announcement:",O)}finally{d(!1)}})()},[t,r,n]);const w=j=>{const{name:O,value:M,type:A}=j.target;if(O==="isActive"&&A==="checkbox"){const L=j.target;l(B=>({...B,[O]:L.checked}))}else l(L=>({...L,[O]:M}))},N=async j=>{j.preventDefault(),y(null),v(null),h(!0);try{r?(await Zs.updateAnnouncement(n,Number(t),i),v("Announcement updated successfully!")):(await Zs.createAnnouncement(n,i),v("Announcement created successfully!"),l({text:"",isActive:!0,displayOrder:0,buttonText:null,buttonLink:null,backgroundColor:"#000000",textColor:"#FFFFFF"}))}catch(O){y(`Failed to ${r?"update":"create"} announcement. Please try again.`),console.error(`Error ${r?"updating":"creating"} announcement:`,O)}finally{h(!1)}},C=()=>{e("/admin/announcements")};return c?p.jsx("div",{className:"p-4",children:"Loading announcement data..."}):p.jsxs("div",{className:"p-4 max-w-2xl mx-auto",children:[p.jsx("h2",{className:"text-2xl header-font mb-6",children:r?"Edit Announcement":"Create New Announcement"}),g&&p.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:g}),b&&p.jsx("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4",children:b}),p.jsxs("form",{onSubmit:N,className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"text",className:"block mb-1 font-medium",children:"Announcement Text*"}),p.jsx("input",{type:"text",id:"text",name:"text",value:i.text,onChange:w,required:!0,className:"w-full p-2 border border-gray-300",placeholder:"Enter announcement text"})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"displayOrder",className:"block mb-1 font-medium",children:"Display Order"}),p.jsx("input",{type:"number",id:"displayOrder",name:"displayOrder",value:i.displayOrder,onChange:w,className:"w-full p-2 border border-gray-300",min:"0"}),p.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Lower numbers appear first. Announcements with the same order are sorted by creation date."})]}),p.jsxs("div",{className:"flex items-center",children:[p.jsx("input",{type:"checkbox",id:"isActive",name:"isActive",checked:i.isActive,onChange:w,className:"mr-2"}),p.jsx("label",{htmlFor:"isActive",className:"font-medium",children:"Active (visible to users)"})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"buttonText",className:"block mb-1 font-medium",children:"Button Text (Optional)"}),p.jsx("input",{type:"text",id:"buttonText",name:"buttonText",value:i.buttonText||"",onChange:w,className:"w-full p-2 border border-gray-300",placeholder:"e.g., Shop Now"})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"buttonLink",className:"block mb-1 font-medium",children:"Button Link (Optional)"}),p.jsx("input",{type:"text",id:"buttonLink",name:"buttonLink",value:i.buttonLink||"",onChange:w,className:"w-full p-2 border border-gray-300",placeholder:"e.g., /sale"})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"backgroundColor",className:"block mb-1 font-medium",children:"Background Color"}),p.jsxs("div",{className:"flex items-center",children:[p.jsx("input",{type:"color",id:"backgroundColor",name:"backgroundColor",value:i.backgroundColor,onChange:w,className:"h-10 w-10 mr-2"}),p.jsx("input",{type:"text",name:"backgroundColor",value:i.backgroundColor,onChange:w,className:"flex-1 p-2 border border-gray-300",placeholder:"#000000"})]})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"textColor",className:"block mb-1 font-medium",children:"Text Color"}),p.jsxs("div",{className:"flex items-center",children:[p.jsx("input",{type:"color",id:"textColor",name:"textColor",value:i.textColor,onChange:w,className:"h-10 w-10 mr-2"}),p.jsx("input",{type:"text",name:"textColor",value:i.textColor,onChange:w,className:"flex-1 p-2 border border-gray-300",placeholder:"#FFFFFF"})]})]})]}),p.jsxs("div",{className:"mt-6",children:[p.jsx("h3",{className:"font-medium mb-2",children:"Preview"}),p.jsxs("div",{className:"p-3 flex items-center justify-center",style:{backgroundColor:i.backgroundColor,color:i.textColor},children:[p.jsx("span",{children:i.text}),i.buttonText&&p.jsx("button",{className:"ml-4 px-3 py-1 border border-current",style:{color:i.textColor},children:i.buttonText})]})]}),p.jsxs("div",{className:"flex justify-end space-x-4 pt-4",children:[p.jsx("button",{type:"button",onClick:C,className:"px-4 py-2 border border-gray-300 hover:bg-gray-100",disabled:f,children:"Cancel"}),p.jsx("button",{type:"submit",className:"px-4 py-2 bg-black text-white hover:bg-gray-800",disabled:f,children:f?"Saving...":r?"Update Announcement":"Create Announcement"})]})]})]})},t1=()=>{const{token:n}=ft();return p.jsx("div",{className:"container mx-auto py-8",children:p.jsx(B3,{token:n||""})})},Fs=({children:n})=>{const{isAuthenticated:e,isAdmin:t}=ft();return e?t?n:p.jsx(gp,{to:"/"}):p.jsx(gp,{to:"/login"})},P3=({children:n})=>{const{isAuthenticated:e}=ft(),t=typeof window<"u"&&localStorage.getItem("guest_id");return!e&&!t?p.jsx(gp,{to:"/login"}):n},H3=({children:n})=>p.jsx("div",{className:"min-h-screen md:pt-20",children:n}),U3=()=>p.jsx(PE,{children:p.jsx(_E,{children:p.jsx(HE,{children:p.jsx(wk,{children:p.jsx(vk,{children:p.jsx(bk,{children:p.jsxs("div",{className:"app",children:[p.jsx(UE,{}),p.jsx(H3,{children:p.jsxs(WC,{children:[p.jsx(St,{path:"/",element:p.jsx(GE,{})}),p.jsx(St,{path:"/new",element:p.jsx(YE,{})}),p.jsx(St,{path:"/sale",element:p.jsx(KE,{})}),p.jsx(St,{path:"/about",element:p.jsx(XE,{})}),p.jsx(St,{path:"/login",element:p.jsx(JE,{})}),p.jsx(St,{path:"/register",element:p.jsx(QE,{})}),p.jsx(St,{path:"/cart",element:p.jsx(kk,{})}),p.jsx(St,{path:"/my-orders",element:p.jsx(P3,{children:p.jsx(jk,{})})}),p.jsx(St,{path:"/products",element:p.jsx(Ak,{})}),p.jsx(St,{path:"/product/:id",element:p.jsx(Tk,{})}),p.jsx(St,{path:"/admin",element:p.jsx(Fs,{children:p.jsx(e1,{})})}),p.jsx(St,{path:"/admin/:tab",element:p.jsx(Fs,{children:p.jsx(e1,{})})}),p.jsx(St,{path:"/admin/products/add",element:p.jsx(Fs,{children:p.jsx(L3,{})})}),p.jsx(St,{path:"/admin/products/edit/:productId",element:p.jsx(Fs,{children:p.jsx(_3,{})})}),p.jsx(St,{path:"/admin-orders",element:p.jsx(Fs,{children:p.jsx(z3,{})})}),p.jsx(St,{path:"/admin/announcements/new",element:p.jsx(Fs,{children:p.jsx(t1,{})})}),p.jsx(St,{path:"/admin/announcements/edit/:id",element:p.jsx(Fs,{children:p.jsx(t1,{})})})]})}),p.jsx(IE,{})]})})})})})})});oC.createRoot(document.getElementById("root")).render(p.jsx(we.StrictMode,{children:p.jsx(NE,{children:p.jsx(U3,{})})}));
