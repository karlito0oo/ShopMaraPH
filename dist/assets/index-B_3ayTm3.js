(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const a of l)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(l){const a={};return l.integrity&&(a.integrity=l.integrity),l.referrerPolicy&&(a.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?a.credentials="include":l.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(l){if(l.ep)return;l.ep=!0;const a=t(l);fetch(l.href,a)}})();function Wh(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var _f={exports:{}},Ql={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Py;function jw(){if(Py)return Ql;Py=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,l,a){var c=null;if(a!==void 0&&(c=""+a),l.key!==void 0&&(c=""+l.key),"key"in l){a={};for(var d in l)d!=="key"&&(a[d]=l[d])}else a=l;return l=a.ref,{$$typeof:n,type:s,key:c,ref:l!==void 0?l:null,props:a}}return Ql.Fragment=e,Ql.jsx=t,Ql.jsxs=t,Ql}var Iy;function Aw(){return Iy||(Iy=1,_f.exports=jw()),_f.exports}var h=Aw(),Hf={exports:{}},ve={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vy;function Tw(){if(Vy)return ve;Vy=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),x=Symbol.iterator;function b(T){return T===null||typeof T!="object"?null:(T=x&&T[x]||T["@@iterator"],typeof T=="function"?T:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,w={};function k(T,P,ee){this.props=T,this.context=P,this.refs=w,this.updater=ee||v}k.prototype.isReactComponent={},k.prototype.setState=function(T,P){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,P,"setState")},k.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function j(){}j.prototype=k.prototype;function D(T,P,ee){this.props=T,this.context=P,this.refs=w,this.updater=ee||v}var R=D.prototype=new j;R.constructor=D,S(R,k.prototype),R.isPureReactComponent=!0;var O=Array.isArray,z={H:null,A:null,T:null,S:null,V:null},H=Object.prototype.hasOwnProperty;function G(T,P,ee,Z,de,Te){return ee=Te.ref,{$$typeof:n,type:T,key:P,ref:ee!==void 0?ee:null,props:Te}}function q(T,P){return G(T.type,P,void 0,void 0,void 0,T.props)}function ne(T){return typeof T=="object"&&T!==null&&T.$$typeof===n}function fe(T){var P={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(ee){return P[ee]})}var ue=/\/+/g;function te(T,P){return typeof T=="object"&&T!==null&&T.key!=null?fe(""+T.key):P.toString(36)}function le(){}function Me(T){switch(T.status){case"fulfilled":return T.value;case"rejected":throw T.reason;default:switch(typeof T.status=="string"?T.then(le,le):(T.status="pending",T.then(function(P){T.status==="pending"&&(T.status="fulfilled",T.value=P)},function(P){T.status==="pending"&&(T.status="rejected",T.reason=P)})),T.status){case"fulfilled":return T.value;case"rejected":throw T.reason}}throw T}function xe(T,P,ee,Z,de){var Te=typeof T;(Te==="undefined"||Te==="boolean")&&(T=null);var K=!1;if(T===null)K=!0;else switch(Te){case"bigint":case"string":case"number":K=!0;break;case"object":switch(T.$$typeof){case n:case e:K=!0;break;case g:return K=T._init,xe(K(T._payload),P,ee,Z,de)}}if(K)return de=de(T),K=Z===""?"."+te(T,0):Z,O(de)?(ee="",K!=null&&(ee=K.replace(ue,"$&/")+"/"),xe(de,P,ee,"",function(Ye){return Ye})):de!=null&&(ne(de)&&(de=q(de,ee+(de.key==null||T&&T.key===de.key?"":(""+de.key).replace(ue,"$&/")+"/")+K)),P.push(de)),1;K=0;var ie=Z===""?".":Z+":";if(O(T))for(var Q=0;Q<T.length;Q++)Z=T[Q],Te=ie+te(Z,Q),K+=xe(Z,P,ee,Te,de);else if(Q=b(T),typeof Q=="function")for(T=Q.call(T),Q=0;!(Z=T.next()).done;)Z=Z.value,Te=ie+te(Z,Q++),K+=xe(Z,P,ee,Te,de);else if(Te==="object"){if(typeof T.then=="function")return xe(Me(T),P,ee,Z,de);throw P=String(T),Error("Objects are not valid as a React child (found: "+(P==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":P)+"). If you meant to render a collection of children, use an array instead.")}return K}function V(T,P,ee){if(T==null)return T;var Z=[],de=0;return xe(T,Z,"","",function(Te){return P.call(ee,Te,de++)}),Z}function W(T){if(T._status===-1){var P=T._result;P=P(),P.then(function(ee){(T._status===0||T._status===-1)&&(T._status=1,T._result=ee)},function(ee){(T._status===0||T._status===-1)&&(T._status=2,T._result=ee)}),T._status===-1&&(T._status=0,T._result=P)}if(T._status===1)return T._result.default;throw T._result}var re=typeof reportError=="function"?reportError:function(T){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var P=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof T=="object"&&T!==null&&typeof T.message=="string"?String(T.message):String(T),error:T});if(!window.dispatchEvent(P))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",T);return}console.error(T)};function Oe(){}return ve.Children={map:V,forEach:function(T,P,ee){V(T,function(){P.apply(this,arguments)},ee)},count:function(T){var P=0;return V(T,function(){P++}),P},toArray:function(T){return V(T,function(P){return P})||[]},only:function(T){if(!ne(T))throw Error("React.Children.only expected to receive a single React element child.");return T}},ve.Component=k,ve.Fragment=t,ve.Profiler=l,ve.PureComponent=D,ve.StrictMode=s,ve.Suspense=f,ve.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=z,ve.__COMPILER_RUNTIME={__proto__:null,c:function(T){return z.H.useMemoCache(T)}},ve.cache=function(T){return function(){return T.apply(null,arguments)}},ve.cloneElement=function(T,P,ee){if(T==null)throw Error("The argument must be a React element, but you passed "+T+".");var Z=S({},T.props),de=T.key,Te=void 0;if(P!=null)for(K in P.ref!==void 0&&(Te=void 0),P.key!==void 0&&(de=""+P.key),P)!H.call(P,K)||K==="key"||K==="__self"||K==="__source"||K==="ref"&&P.ref===void 0||(Z[K]=P[K]);var K=arguments.length-2;if(K===1)Z.children=ee;else if(1<K){for(var ie=Array(K),Q=0;Q<K;Q++)ie[Q]=arguments[Q+2];Z.children=ie}return G(T.type,de,void 0,void 0,Te,Z)},ve.createContext=function(T){return T={$$typeof:c,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null},T.Provider=T,T.Consumer={$$typeof:a,_context:T},T},ve.createElement=function(T,P,ee){var Z,de={},Te=null;if(P!=null)for(Z in P.key!==void 0&&(Te=""+P.key),P)H.call(P,Z)&&Z!=="key"&&Z!=="__self"&&Z!=="__source"&&(de[Z]=P[Z]);var K=arguments.length-2;if(K===1)de.children=ee;else if(1<K){for(var ie=Array(K),Q=0;Q<K;Q++)ie[Q]=arguments[Q+2];de.children=ie}if(T&&T.defaultProps)for(Z in K=T.defaultProps,K)de[Z]===void 0&&(de[Z]=K[Z]);return G(T,Te,void 0,void 0,null,de)},ve.createRef=function(){return{current:null}},ve.forwardRef=function(T){return{$$typeof:d,render:T}},ve.isValidElement=ne,ve.lazy=function(T){return{$$typeof:g,_payload:{_status:-1,_result:T},_init:W}},ve.memo=function(T,P){return{$$typeof:p,type:T,compare:P===void 0?null:P}},ve.startTransition=function(T){var P=z.T,ee={};z.T=ee;try{var Z=T(),de=z.S;de!==null&&de(ee,Z),typeof Z=="object"&&Z!==null&&typeof Z.then=="function"&&Z.then(Oe,re)}catch(Te){re(Te)}finally{z.T=P}},ve.unstable_useCacheRefresh=function(){return z.H.useCacheRefresh()},ve.use=function(T){return z.H.use(T)},ve.useActionState=function(T,P,ee){return z.H.useActionState(T,P,ee)},ve.useCallback=function(T,P){return z.H.useCallback(T,P)},ve.useContext=function(T){return z.H.useContext(T)},ve.useDebugValue=function(){},ve.useDeferredValue=function(T,P){return z.H.useDeferredValue(T,P)},ve.useEffect=function(T,P,ee){var Z=z.H;if(typeof ee=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Z.useEffect(T,P)},ve.useId=function(){return z.H.useId()},ve.useImperativeHandle=function(T,P,ee){return z.H.useImperativeHandle(T,P,ee)},ve.useInsertionEffect=function(T,P){return z.H.useInsertionEffect(T,P)},ve.useLayoutEffect=function(T,P){return z.H.useLayoutEffect(T,P)},ve.useMemo=function(T,P){return z.H.useMemo(T,P)},ve.useOptimistic=function(T,P){return z.H.useOptimistic(T,P)},ve.useReducer=function(T,P,ee){return z.H.useReducer(T,P,ee)},ve.useRef=function(T){return z.H.useRef(T)},ve.useState=function(T){return z.H.useState(T)},ve.useSyncExternalStore=function(T,P,ee){return z.H.useSyncExternalStore(T,P,ee)},ve.useTransition=function(){return z.H.useTransition()},ve.version="19.1.0",ve}var qy;function ep(){return qy||(qy=1,Hf.exports=Tw()),Hf.exports}var E=ep();const Tt=Wh(E);var Uf={exports:{}},Zl={},Pf={exports:{}},If={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fy;function Mw(){return Fy||(Fy=1,function(n){function e(V,W){var re=V.length;V.push(W);e:for(;0<re;){var Oe=re-1>>>1,T=V[Oe];if(0<l(T,W))V[Oe]=W,V[re]=T,re=Oe;else break e}}function t(V){return V.length===0?null:V[0]}function s(V){if(V.length===0)return null;var W=V[0],re=V.pop();if(re!==W){V[0]=re;e:for(var Oe=0,T=V.length,P=T>>>1;Oe<P;){var ee=2*(Oe+1)-1,Z=V[ee],de=ee+1,Te=V[de];if(0>l(Z,re))de<T&&0>l(Te,Z)?(V[Oe]=Te,V[de]=re,Oe=de):(V[Oe]=Z,V[ee]=re,Oe=ee);else if(de<T&&0>l(Te,re))V[Oe]=Te,V[de]=re,Oe=de;else break e}}return W}function l(V,W){var re=V.sortIndex-W.sortIndex;return re!==0?re:V.id-W.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var f=[],p=[],g=1,x=null,b=3,v=!1,S=!1,w=!1,k=!1,j=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function O(V){for(var W=t(p);W!==null;){if(W.callback===null)s(p);else if(W.startTime<=V)s(p),W.sortIndex=W.expirationTime,e(f,W);else break;W=t(p)}}function z(V){if(w=!1,O(V),!S)if(t(f)!==null)S=!0,H||(H=!0,te());else{var W=t(p);W!==null&&xe(z,W.startTime-V)}}var H=!1,G=-1,q=5,ne=-1;function fe(){return k?!0:!(n.unstable_now()-ne<q)}function ue(){if(k=!1,H){var V=n.unstable_now();ne=V;var W=!0;try{e:{S=!1,w&&(w=!1,D(G),G=-1),v=!0;var re=b;try{t:{for(O(V),x=t(f);x!==null&&!(x.expirationTime>V&&fe());){var Oe=x.callback;if(typeof Oe=="function"){x.callback=null,b=x.priorityLevel;var T=Oe(x.expirationTime<=V);if(V=n.unstable_now(),typeof T=="function"){x.callback=T,O(V),W=!0;break t}x===t(f)&&s(f),O(V)}else s(f);x=t(f)}if(x!==null)W=!0;else{var P=t(p);P!==null&&xe(z,P.startTime-V),W=!1}}break e}finally{x=null,b=re,v=!1}W=void 0}}finally{W?te():H=!1}}}var te;if(typeof R=="function")te=function(){R(ue)};else if(typeof MessageChannel<"u"){var le=new MessageChannel,Me=le.port2;le.port1.onmessage=ue,te=function(){Me.postMessage(null)}}else te=function(){j(ue,0)};function xe(V,W){G=j(function(){V(n.unstable_now())},W)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(V){V.callback=null},n.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<V?Math.floor(1e3/V):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_next=function(V){switch(b){case 1:case 2:case 3:var W=3;break;default:W=b}var re=b;b=W;try{return V()}finally{b=re}},n.unstable_requestPaint=function(){k=!0},n.unstable_runWithPriority=function(V,W){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var re=b;b=V;try{return W()}finally{b=re}},n.unstable_scheduleCallback=function(V,W,re){var Oe=n.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?Oe+re:Oe):re=Oe,V){case 1:var T=-1;break;case 2:T=250;break;case 5:T=1073741823;break;case 4:T=1e4;break;default:T=5e3}return T=re+T,V={id:g++,callback:W,priorityLevel:V,startTime:re,expirationTime:T,sortIndex:-1},re>Oe?(V.sortIndex=re,e(p,V),t(f)===null&&V===t(p)&&(w?(D(G),G=-1):w=!0,xe(z,re-Oe))):(V.sortIndex=T,e(f,V),S||v||(S=!0,H||(H=!0,te()))),V},n.unstable_shouldYield=fe,n.unstable_wrapCallback=function(V){var W=b;return function(){var re=b;b=W;try{return V.apply(this,arguments)}finally{b=re}}}}(If)),If}var $y;function Ow(){return $y||($y=1,Pf.exports=Mw()),Pf.exports}var Vf={exports:{}},jt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gy;function Dw(){if(Gy)return jt;Gy=1;var n=ep();function e(f){var p="https://react.dev/errors/"+f;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)p+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+f+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},l=Symbol.for("react.portal");function a(f,p,g){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:x==null?null:""+x,children:f,containerInfo:p,implementation:g}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(f,p){if(f==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return jt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,jt.createPortal=function(f,p){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return a(f,p,null,g)},jt.flushSync=function(f){var p=c.T,g=s.p;try{if(c.T=null,s.p=2,f)return f()}finally{c.T=p,s.p=g,s.d.f()}},jt.preconnect=function(f,p){typeof f=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(f,p))},jt.prefetchDNS=function(f){typeof f=="string"&&s.d.D(f)},jt.preinit=function(f,p){if(typeof f=="string"&&p&&typeof p.as=="string"){var g=p.as,x=d(g,p.crossOrigin),b=typeof p.integrity=="string"?p.integrity:void 0,v=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;g==="style"?s.d.S(f,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:x,integrity:b,fetchPriority:v}):g==="script"&&s.d.X(f,{crossOrigin:x,integrity:b,fetchPriority:v,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},jt.preinitModule=function(f,p){if(typeof f=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var g=d(p.as,p.crossOrigin);s.d.M(f,{crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(f)},jt.preload=function(f,p){if(typeof f=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var g=p.as,x=d(g,p.crossOrigin);s.d.L(f,g,{crossOrigin:x,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},jt.preloadModule=function(f,p){if(typeof f=="string")if(p){var g=d(p.as,p.crossOrigin);s.d.m(f,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(f)},jt.requestFormReset=function(f){s.d.r(f)},jt.unstable_batchedUpdates=function(f,p){return f(p)},jt.useFormState=function(f,p,g){return c.H.useFormState(f,p,g)},jt.useFormStatus=function(){return c.H.useHostTransitionStatus()},jt.version="19.1.0",jt}var Yy;function Mb(){if(Yy)return Vf.exports;Yy=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Vf.exports=Dw(),Vf.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ky;function Rw(){if(Ky)return Zl;Ky=1;var n=Ow(),e=ep(),t=Mb();function s(r){var i="https://react.dev/errors/"+r;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function a(r){var i=r,o=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(o=i.return),r=i.return;while(r)}return i.tag===3?o:null}function c(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function d(r){if(a(r)!==r)throw Error(s(188))}function f(r){var i=r.alternate;if(!i){if(i=a(r),i===null)throw Error(s(188));return i!==r?null:r}for(var o=r,u=i;;){var m=o.return;if(m===null)break;var y=m.alternate;if(y===null){if(u=m.return,u!==null){o=u;continue}break}if(m.child===y.child){for(y=m.child;y;){if(y===o)return d(m),r;if(y===u)return d(m),i;y=y.sibling}throw Error(s(188))}if(o.return!==u.return)o=m,u=y;else{for(var N=!1,C=m.child;C;){if(C===o){N=!0,o=m,u=y;break}if(C===u){N=!0,u=m,o=y;break}C=C.sibling}if(!N){for(C=y.child;C;){if(C===o){N=!0,o=y,u=m;break}if(C===u){N=!0,u=y,o=m;break}C=C.sibling}if(!N)throw Error(s(189))}}if(o.alternate!==u)throw Error(s(190))}if(o.tag!==3)throw Error(s(188));return o.stateNode.current===o?r:i}function p(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r;for(r=r.child;r!==null;){if(i=p(r),i!==null)return i;r=r.sibling}return null}var g=Object.assign,x=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),j=Symbol.for("react.provider"),D=Symbol.for("react.consumer"),R=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),G=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),ne=Symbol.for("react.activity"),fe=Symbol.for("react.memo_cache_sentinel"),ue=Symbol.iterator;function te(r){return r===null||typeof r!="object"?null:(r=ue&&r[ue]||r["@@iterator"],typeof r=="function"?r:null)}var le=Symbol.for("react.client.reference");function Me(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===le?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case S:return"Fragment";case k:return"Profiler";case w:return"StrictMode";case z:return"Suspense";case H:return"SuspenseList";case ne:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case v:return"Portal";case R:return(r.displayName||"Context")+".Provider";case D:return(r._context.displayName||"Context")+".Consumer";case O:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case G:return i=r.displayName||null,i!==null?i:Me(r.type)||"Memo";case q:i=r._payload,r=r._init;try{return Me(r(i))}catch{}}return null}var xe=Array.isArray,V=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re={pending:!1,data:null,method:null,action:null},Oe=[],T=-1;function P(r){return{current:r}}function ee(r){0>T||(r.current=Oe[T],Oe[T]=null,T--)}function Z(r,i){T++,Oe[T]=r.current,r.current=i}var de=P(null),Te=P(null),K=P(null),ie=P(null);function Q(r,i){switch(Z(K,i),Z(Te,r),Z(de,null),i.nodeType){case 9:case 11:r=(r=i.documentElement)&&(r=r.namespaceURI)?py(r):0;break;default:if(r=i.tagName,i=i.namespaceURI)i=py(i),r=my(i,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}ee(de),Z(de,r)}function Ye(){ee(de),ee(Te),ee(K)}function Pe(r){r.memoizedState!==null&&Z(ie,r);var i=de.current,o=my(i,r.type);i!==o&&(Z(Te,r),Z(de,o))}function Ut(r){Te.current===r&&(ee(de),ee(Te)),ie.current===r&&(ee(ie),Gl._currentValue=re)}var mr=Object.prototype.hasOwnProperty,$s=n.unstable_scheduleCallback,Dt=n.unstable_cancelCallback,iS=n.unstable_shouldYield,lS=n.unstable_requestPaint,Tn=n.unstable_now,aS=n.unstable_getCurrentPriorityLevel,Kp=n.unstable_ImmediatePriority,Xp=n.unstable_UserBlockingPriority,Ua=n.unstable_NormalPriority,oS=n.unstable_LowPriority,Jp=n.unstable_IdlePriority,cS=n.log,uS=n.unstable_setDisableYieldValue,el=null,Yt=null;function gr(r){if(typeof cS=="function"&&uS(r),Yt&&typeof Yt.setStrictMode=="function")try{Yt.setStrictMode(el,r)}catch{}}var Kt=Math.clz32?Math.clz32:hS,dS=Math.log,fS=Math.LN2;function hS(r){return r>>>=0,r===0?32:31-(dS(r)/fS|0)|0}var Pa=256,Ia=4194304;function ls(r){var i=r&42;if(i!==0)return i;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Va(r,i,o){var u=r.pendingLanes;if(u===0)return 0;var m=0,y=r.suspendedLanes,N=r.pingedLanes;r=r.warmLanes;var C=u&134217727;return C!==0?(u=C&~y,u!==0?m=ls(u):(N&=C,N!==0?m=ls(N):o||(o=C&~r,o!==0&&(m=ls(o))))):(C=u&~y,C!==0?m=ls(C):N!==0?m=ls(N):o||(o=u&~r,o!==0&&(m=ls(o)))),m===0?0:i!==0&&i!==m&&(i&y)===0&&(y=m&-m,o=i&-i,y>=o||y===32&&(o&4194048)!==0)?i:m}function tl(r,i){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&i)===0}function pS(r,i){switch(r){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qp(){var r=Pa;return Pa<<=1,(Pa&4194048)===0&&(Pa=256),r}function Zp(){var r=Ia;return Ia<<=1,(Ia&62914560)===0&&(Ia=4194304),r}function Cu(r){for(var i=[],o=0;31>o;o++)i.push(r);return i}function nl(r,i){r.pendingLanes|=i,i!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function mS(r,i,o,u,m,y){var N=r.pendingLanes;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=o,r.entangledLanes&=o,r.errorRecoveryDisabledLanes&=o,r.shellSuspendCounter=0;var C=r.entanglements,A=r.expirationTimes,_=r.hiddenUpdates;for(o=N&~o;0<o;){var F=31-Kt(o),Y=1<<F;C[F]=0,A[F]=-1;var U=_[F];if(U!==null)for(_[F]=null,F=0;F<U.length;F++){var I=U[F];I!==null&&(I.lane&=-536870913)}o&=~Y}u!==0&&Wp(r,u,0),y!==0&&m===0&&r.tag!==0&&(r.suspendedLanes|=y&~(N&~i))}function Wp(r,i,o){r.pendingLanes|=i,r.suspendedLanes&=~i;var u=31-Kt(i);r.entangledLanes|=i,r.entanglements[u]=r.entanglements[u]|1073741824|o&4194090}function em(r,i){var o=r.entangledLanes|=i;for(r=r.entanglements;o;){var u=31-Kt(o),m=1<<u;m&i|r[u]&i&&(r[u]|=i),o&=~m}}function Eu(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function ju(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function tm(){var r=W.p;return r!==0?r:(r=window.event,r===void 0?32:Ly(r.type))}function gS(r,i){var o=W.p;try{return W.p=r,i()}finally{W.p=o}}var yr=Math.random().toString(36).slice(2),Ct="__reactFiber$"+yr,Pt="__reactProps$"+yr,Gs="__reactContainer$"+yr,Au="__reactEvents$"+yr,yS="__reactListeners$"+yr,xS="__reactHandles$"+yr,nm="__reactResources$"+yr,rl="__reactMarker$"+yr;function Tu(r){delete r[Ct],delete r[Pt],delete r[Au],delete r[yS],delete r[xS]}function Ys(r){var i=r[Ct];if(i)return i;for(var o=r.parentNode;o;){if(i=o[Gs]||o[Ct]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(r=by(r);r!==null;){if(o=r[Ct])return o;r=by(r)}return i}r=o,o=r.parentNode}return null}function Ks(r){if(r=r[Ct]||r[Gs]){var i=r.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return r}return null}function sl(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r.stateNode;throw Error(s(33))}function Xs(r){var i=r[nm];return i||(i=r[nm]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function ot(r){r[rl]=!0}var rm=new Set,sm={};function as(r,i){Js(r,i),Js(r+"Capture",i)}function Js(r,i){for(sm[r]=i,r=0;r<i.length;r++)rm.add(i[r])}var bS=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),im={},lm={};function vS(r){return mr.call(lm,r)?!0:mr.call(im,r)?!1:bS.test(r)?lm[r]=!0:(im[r]=!0,!1)}function qa(r,i,o){if(vS(i))if(o===null)r.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":r.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(i);return}}r.setAttribute(i,""+o)}}function Fa(r,i,o){if(o===null)r.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(i);return}r.setAttribute(i,""+o)}}function In(r,i,o,u){if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttributeNS(i,o,""+u)}}var Mu,am;function Qs(r){if(Mu===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);Mu=i&&i[1]||"",am=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Mu+r+am}var Ou=!1;function Du(r,i){if(!r||Ou)return"";Ou=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var Y=function(){throw Error()};if(Object.defineProperty(Y.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Y,[])}catch(I){var U=I}Reflect.construct(r,[],Y)}else{try{Y.call()}catch(I){U=I}r.call(Y.prototype)}}else{try{throw Error()}catch(I){U=I}(Y=r())&&typeof Y.catch=="function"&&Y.catch(function(){})}}catch(I){if(I&&U&&typeof I.stack=="string")return[I.stack,U.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=u.DetermineComponentFrameRoot(),N=y[0],C=y[1];if(N&&C){var A=N.split(`
`),_=C.split(`
`);for(m=u=0;u<A.length&&!A[u].includes("DetermineComponentFrameRoot");)u++;for(;m<_.length&&!_[m].includes("DetermineComponentFrameRoot");)m++;if(u===A.length||m===_.length)for(u=A.length-1,m=_.length-1;1<=u&&0<=m&&A[u]!==_[m];)m--;for(;1<=u&&0<=m;u--,m--)if(A[u]!==_[m]){if(u!==1||m!==1)do if(u--,m--,0>m||A[u]!==_[m]){var F=`
`+A[u].replace(" at new "," at ");return r.displayName&&F.includes("<anonymous>")&&(F=F.replace("<anonymous>",r.displayName)),F}while(1<=u&&0<=m);break}}}finally{Ou=!1,Error.prepareStackTrace=o}return(o=r?r.displayName||r.name:"")?Qs(o):""}function SS(r){switch(r.tag){case 26:case 27:case 5:return Qs(r.type);case 16:return Qs("Lazy");case 13:return Qs("Suspense");case 19:return Qs("SuspenseList");case 0:case 15:return Du(r.type,!1);case 11:return Du(r.type.render,!1);case 1:return Du(r.type,!0);case 31:return Qs("Activity");default:return""}}function om(r){try{var i="";do i+=SS(r),r=r.return;while(r);return i}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function ln(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function cm(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function NS(r){var i=cm(r)?"checked":"value",o=Object.getOwnPropertyDescriptor(r.constructor.prototype,i),u=""+r[i];if(!r.hasOwnProperty(i)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var m=o.get,y=o.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return m.call(this)},set:function(N){u=""+N,y.call(this,N)}}),Object.defineProperty(r,i,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(N){u=""+N},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function $a(r){r._valueTracker||(r._valueTracker=NS(r))}function um(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var o=i.getValue(),u="";return r&&(u=cm(r)?r.checked?"true":"false":r.value),r=u,r!==o?(i.setValue(r),!0):!1}function Ga(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var wS=/[\n"\\]/g;function an(r){return r.replace(wS,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Ru(r,i,o,u,m,y,N,C){r.name="",N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?r.type=N:r.removeAttribute("type"),i!=null?N==="number"?(i===0&&r.value===""||r.value!=i)&&(r.value=""+ln(i)):r.value!==""+ln(i)&&(r.value=""+ln(i)):N!=="submit"&&N!=="reset"||r.removeAttribute("value"),i!=null?Lu(r,N,ln(i)):o!=null?Lu(r,N,ln(o)):u!=null&&r.removeAttribute("value"),m==null&&y!=null&&(r.defaultChecked=!!y),m!=null&&(r.checked=m&&typeof m!="function"&&typeof m!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?r.name=""+ln(C):r.removeAttribute("name")}function dm(r,i,o,u,m,y,N,C){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(r.type=y),i!=null||o!=null){if(!(y!=="submit"&&y!=="reset"||i!=null))return;o=o!=null?""+ln(o):"",i=i!=null?""+ln(i):o,C||i===r.value||(r.value=i),r.defaultValue=i}u=u??m,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=C?r.checked:!!u,r.defaultChecked=!!u,N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"&&(r.name=N)}function Lu(r,i,o){i==="number"&&Ga(r.ownerDocument)===r||r.defaultValue===""+o||(r.defaultValue=""+o)}function Zs(r,i,o,u){if(r=r.options,i){i={};for(var m=0;m<o.length;m++)i["$"+o[m]]=!0;for(o=0;o<r.length;o++)m=i.hasOwnProperty("$"+r[o].value),r[o].selected!==m&&(r[o].selected=m),m&&u&&(r[o].defaultSelected=!0)}else{for(o=""+ln(o),i=null,m=0;m<r.length;m++){if(r[m].value===o){r[m].selected=!0,u&&(r[m].defaultSelected=!0);return}i!==null||r[m].disabled||(i=r[m])}i!==null&&(i.selected=!0)}}function fm(r,i,o){if(i!=null&&(i=""+ln(i),i!==r.value&&(r.value=i),o==null)){r.defaultValue!==i&&(r.defaultValue=i);return}r.defaultValue=o!=null?""+ln(o):""}function hm(r,i,o,u){if(i==null){if(u!=null){if(o!=null)throw Error(s(92));if(xe(u)){if(1<u.length)throw Error(s(93));u=u[0]}o=u}o==null&&(o=""),i=o}o=ln(i),r.defaultValue=o,u=r.textContent,u===o&&u!==""&&u!==null&&(r.value=u)}function Ws(r,i){if(i){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=i;return}}r.textContent=i}var kS=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function pm(r,i,o){var u=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?r.setProperty(i,""):i==="float"?r.cssFloat="":r[i]="":u?r.setProperty(i,o):typeof o!="number"||o===0||kS.has(i)?i==="float"?r.cssFloat=o:r[i]=(""+o).trim():r[i]=o+"px"}function mm(r,i,o){if(i!=null&&typeof i!="object")throw Error(s(62));if(r=r.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var m in i)u=i[m],i.hasOwnProperty(m)&&o[m]!==u&&pm(r,m,u)}else for(var y in i)i.hasOwnProperty(y)&&pm(r,y,i[y])}function zu(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var CS=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ES=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ya(r){return ES.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var Bu=null;function _u(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var ei=null,ti=null;function gm(r){var i=Ks(r);if(i&&(r=i.stateNode)){var o=r[Pt]||null;e:switch(r=i.stateNode,i.type){case"input":if(Ru(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+an(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var u=o[i];if(u!==r&&u.form===r.form){var m=u[Pt]||null;if(!m)throw Error(s(90));Ru(u,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(i=0;i<o.length;i++)u=o[i],u.form===r.form&&um(u)}break e;case"textarea":fm(r,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&Zs(r,!!o.multiple,i,!1)}}}var Hu=!1;function ym(r,i,o){if(Hu)return r(i,o);Hu=!0;try{var u=r(i);return u}finally{if(Hu=!1,(ei!==null||ti!==null)&&(Ro(),ei&&(i=ei,r=ti,ti=ei=null,gm(i),r)))for(i=0;i<r.length;i++)gm(r[i])}}function il(r,i){var o=r.stateNode;if(o===null)return null;var u=o[Pt]||null;if(u===null)return null;o=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(s(231,i,typeof o));return o}var Vn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Uu=!1;if(Vn)try{var ll={};Object.defineProperty(ll,"passive",{get:function(){Uu=!0}}),window.addEventListener("test",ll,ll),window.removeEventListener("test",ll,ll)}catch{Uu=!1}var xr=null,Pu=null,Ka=null;function xm(){if(Ka)return Ka;var r,i=Pu,o=i.length,u,m="value"in xr?xr.value:xr.textContent,y=m.length;for(r=0;r<o&&i[r]===m[r];r++);var N=o-r;for(u=1;u<=N&&i[o-u]===m[y-u];u++);return Ka=m.slice(r,1<u?1-u:void 0)}function Xa(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function Ja(){return!0}function bm(){return!1}function It(r){function i(o,u,m,y,N){this._reactName=o,this._targetInst=m,this.type=u,this.nativeEvent=y,this.target=N,this.currentTarget=null;for(var C in r)r.hasOwnProperty(C)&&(o=r[C],this[C]=o?o(y):y[C]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Ja:bm,this.isPropagationStopped=bm,this}return g(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Ja)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Ja)},persist:function(){},isPersistent:Ja}),i}var cs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qa=It(cs),al=g({},cs,{view:0,detail:0}),jS=It(al),Iu,Vu,ol,Za=g({},al,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fu,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ol&&(ol&&r.type==="mousemove"?(Iu=r.screenX-ol.screenX,Vu=r.screenY-ol.screenY):Vu=Iu=0,ol=r),Iu)},movementY:function(r){return"movementY"in r?r.movementY:Vu}}),vm=It(Za),AS=g({},Za,{dataTransfer:0}),TS=It(AS),MS=g({},al,{relatedTarget:0}),qu=It(MS),OS=g({},cs,{animationName:0,elapsedTime:0,pseudoElement:0}),DS=It(OS),RS=g({},cs,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),LS=It(RS),zS=g({},cs,{data:0}),Sm=It(zS),BS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_S={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},HS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function US(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=HS[r])?!!i[r]:!1}function Fu(){return US}var PS=g({},al,{key:function(r){if(r.key){var i=BS[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=Xa(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?_S[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fu,charCode:function(r){return r.type==="keypress"?Xa(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Xa(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),IS=It(PS),VS=g({},Za,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Nm=It(VS),qS=g({},al,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fu}),FS=It(qS),$S=g({},cs,{propertyName:0,elapsedTime:0,pseudoElement:0}),GS=It($S),YS=g({},Za,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),KS=It(YS),XS=g({},cs,{newState:0,oldState:0}),JS=It(XS),QS=[9,13,27,32],$u=Vn&&"CompositionEvent"in window,cl=null;Vn&&"documentMode"in document&&(cl=document.documentMode);var ZS=Vn&&"TextEvent"in window&&!cl,wm=Vn&&(!$u||cl&&8<cl&&11>=cl),km=" ",Cm=!1;function Em(r,i){switch(r){case"keyup":return QS.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jm(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var ni=!1;function WS(r,i){switch(r){case"compositionend":return jm(i);case"keypress":return i.which!==32?null:(Cm=!0,km);case"textInput":return r=i.data,r===km&&Cm?null:r;default:return null}}function eN(r,i){if(ni)return r==="compositionend"||!$u&&Em(r,i)?(r=xm(),Ka=Pu=xr=null,ni=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return wm&&i.locale!=="ko"?null:i.data;default:return null}}var tN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Am(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!tN[r.type]:i==="textarea"}function Tm(r,i,o,u){ei?ti?ti.push(u):ti=[u]:ei=u,i=Uo(i,"onChange"),0<i.length&&(o=new Qa("onChange","change",null,o,u),r.push({event:o,listeners:i}))}var ul=null,dl=null;function nN(r){cy(r,0)}function Wa(r){var i=sl(r);if(um(i))return r}function Mm(r,i){if(r==="change")return i}var Om=!1;if(Vn){var Gu;if(Vn){var Yu="oninput"in document;if(!Yu){var Dm=document.createElement("div");Dm.setAttribute("oninput","return;"),Yu=typeof Dm.oninput=="function"}Gu=Yu}else Gu=!1;Om=Gu&&(!document.documentMode||9<document.documentMode)}function Rm(){ul&&(ul.detachEvent("onpropertychange",Lm),dl=ul=null)}function Lm(r){if(r.propertyName==="value"&&Wa(dl)){var i=[];Tm(i,dl,r,_u(r)),ym(nN,i)}}function rN(r,i,o){r==="focusin"?(Rm(),ul=i,dl=o,ul.attachEvent("onpropertychange",Lm)):r==="focusout"&&Rm()}function sN(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Wa(dl)}function iN(r,i){if(r==="click")return Wa(i)}function lN(r,i){if(r==="input"||r==="change")return Wa(i)}function aN(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var Xt=typeof Object.is=="function"?Object.is:aN;function fl(r,i){if(Xt(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var o=Object.keys(r),u=Object.keys(i);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var m=o[u];if(!mr.call(i,m)||!Xt(r[m],i[m]))return!1}return!0}function zm(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Bm(r,i){var o=zm(r);r=0;for(var u;o;){if(o.nodeType===3){if(u=r+o.textContent.length,r<=i&&u>=i)return{node:o,offset:i-r};r=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=zm(o)}}function _m(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?_m(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function Hm(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var i=Ga(r.document);i instanceof r.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)r=i.contentWindow;else break;i=Ga(r.document)}return i}function Ku(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}var oN=Vn&&"documentMode"in document&&11>=document.documentMode,ri=null,Xu=null,hl=null,Ju=!1;function Um(r,i,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Ju||ri==null||ri!==Ga(u)||(u=ri,"selectionStart"in u&&Ku(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),hl&&fl(hl,u)||(hl=u,u=Uo(Xu,"onSelect"),0<u.length&&(i=new Qa("onSelect","select",null,i,o),r.push({event:i,listeners:u}),i.target=ri)))}function us(r,i){var o={};return o[r.toLowerCase()]=i.toLowerCase(),o["Webkit"+r]="webkit"+i,o["Moz"+r]="moz"+i,o}var si={animationend:us("Animation","AnimationEnd"),animationiteration:us("Animation","AnimationIteration"),animationstart:us("Animation","AnimationStart"),transitionrun:us("Transition","TransitionRun"),transitionstart:us("Transition","TransitionStart"),transitioncancel:us("Transition","TransitionCancel"),transitionend:us("Transition","TransitionEnd")},Qu={},Pm={};Vn&&(Pm=document.createElement("div").style,"AnimationEvent"in window||(delete si.animationend.animation,delete si.animationiteration.animation,delete si.animationstart.animation),"TransitionEvent"in window||delete si.transitionend.transition);function ds(r){if(Qu[r])return Qu[r];if(!si[r])return r;var i=si[r],o;for(o in i)if(i.hasOwnProperty(o)&&o in Pm)return Qu[r]=i[o];return r}var Im=ds("animationend"),Vm=ds("animationiteration"),qm=ds("animationstart"),cN=ds("transitionrun"),uN=ds("transitionstart"),dN=ds("transitioncancel"),Fm=ds("transitionend"),$m=new Map,Zu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Zu.push("scrollEnd");function Sn(r,i){$m.set(r,i),as(i,[r])}var Gm=new WeakMap;function on(r,i){if(typeof r=="object"&&r!==null){var o=Gm.get(r);return o!==void 0?o:(i={value:r,source:i,stack:om(i)},Gm.set(r,i),i)}return{value:r,source:i,stack:om(i)}}var cn=[],ii=0,Wu=0;function eo(){for(var r=ii,i=Wu=ii=0;i<r;){var o=cn[i];cn[i++]=null;var u=cn[i];cn[i++]=null;var m=cn[i];cn[i++]=null;var y=cn[i];if(cn[i++]=null,u!==null&&m!==null){var N=u.pending;N===null?m.next=m:(m.next=N.next,N.next=m),u.pending=m}y!==0&&Ym(o,m,y)}}function to(r,i,o,u){cn[ii++]=r,cn[ii++]=i,cn[ii++]=o,cn[ii++]=u,Wu|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function ed(r,i,o,u){return to(r,i,o,u),no(r)}function li(r,i){return to(r,null,null,i),no(r)}function Ym(r,i,o){r.lanes|=o;var u=r.alternate;u!==null&&(u.lanes|=o);for(var m=!1,y=r.return;y!==null;)y.childLanes|=o,u=y.alternate,u!==null&&(u.childLanes|=o),y.tag===22&&(r=y.stateNode,r===null||r._visibility&1||(m=!0)),r=y,y=y.return;return r.tag===3?(y=r.stateNode,m&&i!==null&&(m=31-Kt(o),r=y.hiddenUpdates,u=r[m],u===null?r[m]=[i]:u.push(i),i.lane=o|536870912),y):null}function no(r){if(50<Hl)throw Hl=0,af=null,Error(s(185));for(var i=r.return;i!==null;)r=i,i=r.return;return r.tag===3?r.stateNode:null}var ai={};function fN(r,i,o,u){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jt(r,i,o,u){return new fN(r,i,o,u)}function td(r){return r=r.prototype,!(!r||!r.isReactComponent)}function qn(r,i){var o=r.alternate;return o===null?(o=Jt(r.tag,i,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=i,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&65011712,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,i=r.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o.refCleanup=r.refCleanup,o}function Km(r,i){r.flags&=65011714;var o=r.alternate;return o===null?(r.childLanes=0,r.lanes=i,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,i=o.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),r}function ro(r,i,o,u,m,y){var N=0;if(u=r,typeof r=="function")td(r)&&(N=1);else if(typeof r=="string")N=pw(r,o,de.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case ne:return r=Jt(31,o,i,m),r.elementType=ne,r.lanes=y,r;case S:return fs(o.children,m,y,i);case w:N=8,m|=24;break;case k:return r=Jt(12,o,i,m|2),r.elementType=k,r.lanes=y,r;case z:return r=Jt(13,o,i,m),r.elementType=z,r.lanes=y,r;case H:return r=Jt(19,o,i,m),r.elementType=H,r.lanes=y,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case j:case R:N=10;break e;case D:N=9;break e;case O:N=11;break e;case G:N=14;break e;case q:N=16,u=null;break e}N=29,o=Error(s(130,r===null?"null":typeof r,"")),u=null}return i=Jt(N,o,i,m),i.elementType=r,i.type=u,i.lanes=y,i}function fs(r,i,o,u){return r=Jt(7,r,u,i),r.lanes=o,r}function nd(r,i,o){return r=Jt(6,r,null,i),r.lanes=o,r}function rd(r,i,o){return i=Jt(4,r.children!==null?r.children:[],r.key,i),i.lanes=o,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}var oi=[],ci=0,so=null,io=0,un=[],dn=0,hs=null,Fn=1,$n="";function ps(r,i){oi[ci++]=io,oi[ci++]=so,so=r,io=i}function Xm(r,i,o){un[dn++]=Fn,un[dn++]=$n,un[dn++]=hs,hs=r;var u=Fn;r=$n;var m=32-Kt(u)-1;u&=~(1<<m),o+=1;var y=32-Kt(i)+m;if(30<y){var N=m-m%5;y=(u&(1<<N)-1).toString(32),u>>=N,m-=N,Fn=1<<32-Kt(i)+m|o<<m|u,$n=y+r}else Fn=1<<y|o<<m|u,$n=r}function sd(r){r.return!==null&&(ps(r,1),Xm(r,1,0))}function id(r){for(;r===so;)so=oi[--ci],oi[ci]=null,io=oi[--ci],oi[ci]=null;for(;r===hs;)hs=un[--dn],un[dn]=null,$n=un[--dn],un[dn]=null,Fn=un[--dn],un[dn]=null}var Rt=null,Xe=null,Le=!1,ms=null,Mn=!1,ld=Error(s(519));function gs(r){var i=Error(s(418,""));throw gl(on(i,r)),ld}function Jm(r){var i=r.stateNode,o=r.type,u=r.memoizedProps;switch(i[Ct]=r,i[Pt]=u,o){case"dialog":Ae("cancel",i),Ae("close",i);break;case"iframe":case"object":case"embed":Ae("load",i);break;case"video":case"audio":for(o=0;o<Pl.length;o++)Ae(Pl[o],i);break;case"source":Ae("error",i);break;case"img":case"image":case"link":Ae("error",i),Ae("load",i);break;case"details":Ae("toggle",i);break;case"input":Ae("invalid",i),dm(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),$a(i);break;case"select":Ae("invalid",i);break;case"textarea":Ae("invalid",i),hm(i,u.value,u.defaultValue,u.children),$a(i)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||u.suppressHydrationWarning===!0||hy(i.textContent,o)?(u.popover!=null&&(Ae("beforetoggle",i),Ae("toggle",i)),u.onScroll!=null&&Ae("scroll",i),u.onScrollEnd!=null&&Ae("scrollend",i),u.onClick!=null&&(i.onclick=Po),i=!0):i=!1,i||gs(r)}function Qm(r){for(Rt=r.return;Rt;)switch(Rt.tag){case 5:case 13:Mn=!1;return;case 27:case 3:Mn=!0;return;default:Rt=Rt.return}}function pl(r){if(r!==Rt)return!1;if(!Le)return Qm(r),Le=!0,!1;var i=r.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=r.type,o=!(o!=="form"&&o!=="button")||wf(r.type,r.memoizedProps)),o=!o),o&&Xe&&gs(r),Qm(r),i===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));e:{for(r=r.nextSibling,i=0;r;){if(r.nodeType===8)if(o=r.data,o==="/$"){if(i===0){Xe=wn(r.nextSibling);break e}i--}else o!=="$"&&o!=="$!"&&o!=="$?"||i++;r=r.nextSibling}Xe=null}}else i===27?(i=Xe,Lr(r.type)?(r=jf,jf=null,Xe=r):Xe=i):Xe=Rt?wn(r.stateNode.nextSibling):null;return!0}function ml(){Xe=Rt=null,Le=!1}function Zm(){var r=ms;return r!==null&&(Ft===null?Ft=r:Ft.push.apply(Ft,r),ms=null),r}function gl(r){ms===null?ms=[r]:ms.push(r)}var ad=P(null),ys=null,Gn=null;function br(r,i,o){Z(ad,i._currentValue),i._currentValue=o}function Yn(r){r._currentValue=ad.current,ee(ad)}function od(r,i,o){for(;r!==null;){var u=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),r===o)break;r=r.return}}function cd(r,i,o,u){var m=r.child;for(m!==null&&(m.return=r);m!==null;){var y=m.dependencies;if(y!==null){var N=m.child;y=y.firstContext;e:for(;y!==null;){var C=y;y=m;for(var A=0;A<i.length;A++)if(C.context===i[A]){y.lanes|=o,C=y.alternate,C!==null&&(C.lanes|=o),od(y.return,o,r),u||(N=null);break e}y=C.next}}else if(m.tag===18){if(N=m.return,N===null)throw Error(s(341));N.lanes|=o,y=N.alternate,y!==null&&(y.lanes|=o),od(N,o,r),N=null}else N=m.child;if(N!==null)N.return=m;else for(N=m;N!==null;){if(N===r){N=null;break}if(m=N.sibling,m!==null){m.return=N.return,N=m;break}N=N.return}m=N}}function yl(r,i,o,u){r=null;for(var m=i,y=!1;m!==null;){if(!y){if((m.flags&524288)!==0)y=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var N=m.alternate;if(N===null)throw Error(s(387));if(N=N.memoizedProps,N!==null){var C=m.type;Xt(m.pendingProps.value,N.value)||(r!==null?r.push(C):r=[C])}}else if(m===ie.current){if(N=m.alternate,N===null)throw Error(s(387));N.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(r!==null?r.push(Gl):r=[Gl])}m=m.return}r!==null&&cd(i,r,o,u),i.flags|=262144}function lo(r){for(r=r.firstContext;r!==null;){if(!Xt(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function xs(r){ys=r,Gn=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Et(r){return Wm(ys,r)}function ao(r,i){return ys===null&&xs(r),Wm(r,i)}function Wm(r,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},Gn===null){if(r===null)throw Error(s(308));Gn=i,r.dependencies={lanes:0,firstContext:i},r.flags|=524288}else Gn=Gn.next=i;return o}var hN=typeof AbortController<"u"?AbortController:function(){var r=[],i=this.signal={aborted:!1,addEventListener:function(o,u){r.push(u)}};this.abort=function(){i.aborted=!0,r.forEach(function(o){return o()})}},pN=n.unstable_scheduleCallback,mN=n.unstable_NormalPriority,it={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ud(){return{controller:new hN,data:new Map,refCount:0}}function xl(r){r.refCount--,r.refCount===0&&pN(mN,function(){r.controller.abort()})}var bl=null,dd=0,ui=0,di=null;function gN(r,i){if(bl===null){var o=bl=[];dd=0,ui=pf(),di={status:"pending",value:void 0,then:function(u){o.push(u)}}}return dd++,i.then(eg,eg),i}function eg(){if(--dd===0&&bl!==null){di!==null&&(di.status="fulfilled");var r=bl;bl=null,ui=0,di=null;for(var i=0;i<r.length;i++)(0,r[i])()}}function yN(r,i){var o=[],u={status:"pending",value:null,reason:null,then:function(m){o.push(m)}};return r.then(function(){u.status="fulfilled",u.value=i;for(var m=0;m<o.length;m++)(0,o[m])(i)},function(m){for(u.status="rejected",u.reason=m,m=0;m<o.length;m++)(0,o[m])(void 0)}),u}var tg=V.S;V.S=function(r,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&gN(r,i),tg!==null&&tg(r,i)};var bs=P(null);function fd(){var r=bs.current;return r!==null?r:qe.pooledCache}function oo(r,i){i===null?Z(bs,bs.current):Z(bs,i.pool)}function ng(){var r=fd();return r===null?null:{parent:it._currentValue,pool:r}}var vl=Error(s(460)),rg=Error(s(474)),co=Error(s(542)),hd={then:function(){}};function sg(r){return r=r.status,r==="fulfilled"||r==="rejected"}function uo(){}function ig(r,i,o){switch(o=r[o],o===void 0?r.push(i):o!==i&&(i.then(uo,uo),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,ag(r),r;default:if(typeof i.status=="string")i.then(uo,uo);else{if(r=qe,r!==null&&100<r.shellSuspendCounter)throw Error(s(482));r=i,r.status="pending",r.then(function(u){if(i.status==="pending"){var m=i;m.status="fulfilled",m.value=u}},function(u){if(i.status==="pending"){var m=i;m.status="rejected",m.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,ag(r),r}throw Sl=i,vl}}var Sl=null;function lg(){if(Sl===null)throw Error(s(459));var r=Sl;return Sl=null,r}function ag(r){if(r===vl||r===co)throw Error(s(483))}var vr=!1;function pd(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function md(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Sr(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Nr(r,i,o){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(ze&2)!==0){var m=u.pending;return m===null?i.next=i:(i.next=m.next,m.next=i),u.pending=i,i=no(r),Ym(r,null,o),i}return to(r,u,i,o),no(r)}function Nl(r,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var u=i.lanes;u&=r.pendingLanes,o|=u,i.lanes=o,em(r,o)}}function gd(r,i){var o=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var m=null,y=null;if(o=o.firstBaseUpdate,o!==null){do{var N={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};y===null?m=y=N:y=y.next=N,o=o.next}while(o!==null);y===null?m=y=i:y=y.next=i}else m=y=i;o={baseState:u.baseState,firstBaseUpdate:m,lastBaseUpdate:y,shared:u.shared,callbacks:u.callbacks},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=i:r.next=i,o.lastBaseUpdate=i}var yd=!1;function wl(){if(yd){var r=di;if(r!==null)throw r}}function kl(r,i,o,u){yd=!1;var m=r.updateQueue;vr=!1;var y=m.firstBaseUpdate,N=m.lastBaseUpdate,C=m.shared.pending;if(C!==null){m.shared.pending=null;var A=C,_=A.next;A.next=null,N===null?y=_:N.next=_,N=A;var F=r.alternate;F!==null&&(F=F.updateQueue,C=F.lastBaseUpdate,C!==N&&(C===null?F.firstBaseUpdate=_:C.next=_,F.lastBaseUpdate=A))}if(y!==null){var Y=m.baseState;N=0,F=_=A=null,C=y;do{var U=C.lane&-536870913,I=U!==C.lane;if(I?(De&U)===U:(u&U)===U){U!==0&&U===ui&&(yd=!0),F!==null&&(F=F.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var ye=r,me=C;U=i;var Ue=o;switch(me.tag){case 1:if(ye=me.payload,typeof ye=="function"){Y=ye.call(Ue,Y,U);break e}Y=ye;break e;case 3:ye.flags=ye.flags&-65537|128;case 0:if(ye=me.payload,U=typeof ye=="function"?ye.call(Ue,Y,U):ye,U==null)break e;Y=g({},Y,U);break e;case 2:vr=!0}}U=C.callback,U!==null&&(r.flags|=64,I&&(r.flags|=8192),I=m.callbacks,I===null?m.callbacks=[U]:I.push(U))}else I={lane:U,tag:C.tag,payload:C.payload,callback:C.callback,next:null},F===null?(_=F=I,A=Y):F=F.next=I,N|=U;if(C=C.next,C===null){if(C=m.shared.pending,C===null)break;I=C,C=I.next,I.next=null,m.lastBaseUpdate=I,m.shared.pending=null}}while(!0);F===null&&(A=Y),m.baseState=A,m.firstBaseUpdate=_,m.lastBaseUpdate=F,y===null&&(m.shared.lanes=0),Mr|=N,r.lanes=N,r.memoizedState=Y}}function og(r,i){if(typeof r!="function")throw Error(s(191,r));r.call(i)}function cg(r,i){var o=r.callbacks;if(o!==null)for(r.callbacks=null,r=0;r<o.length;r++)og(o[r],i)}var fi=P(null),fo=P(0);function ug(r,i){r=er,Z(fo,r),Z(fi,i),er=r|i.baseLanes}function xd(){Z(fo,er),Z(fi,fi.current)}function bd(){er=fo.current,ee(fi),ee(fo)}var wr=0,ke=null,_e=null,tt=null,ho=!1,hi=!1,vs=!1,po=0,Cl=0,pi=null,xN=0;function We(){throw Error(s(321))}function vd(r,i){if(i===null)return!1;for(var o=0;o<i.length&&o<r.length;o++)if(!Xt(r[o],i[o]))return!1;return!0}function Sd(r,i,o,u,m,y){return wr=y,ke=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,V.H=r===null||r.memoizedState===null?Yg:Kg,vs=!1,y=o(u,m),vs=!1,hi&&(y=fg(i,o,u,m)),dg(r),y}function dg(r){V.H=vo;var i=_e!==null&&_e.next!==null;if(wr=0,tt=_e=ke=null,ho=!1,Cl=0,pi=null,i)throw Error(s(300));r===null||ct||(r=r.dependencies,r!==null&&lo(r)&&(ct=!0))}function fg(r,i,o,u){ke=r;var m=0;do{if(hi&&(pi=null),Cl=0,hi=!1,25<=m)throw Error(s(301));if(m+=1,tt=_e=null,r.updateQueue!=null){var y=r.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}V.H=CN,y=i(o,u)}while(hi);return y}function bN(){var r=V.H,i=r.useState()[0];return i=typeof i.then=="function"?El(i):i,r=r.useState()[0],(_e!==null?_e.memoizedState:null)!==r&&(ke.flags|=1024),i}function Nd(){var r=po!==0;return po=0,r}function wd(r,i,o){i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~o}function kd(r){if(ho){for(r=r.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}ho=!1}wr=0,tt=_e=ke=null,hi=!1,Cl=po=0,pi=null}function Vt(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tt===null?ke.memoizedState=tt=r:tt=tt.next=r,tt}function nt(){if(_e===null){var r=ke.alternate;r=r!==null?r.memoizedState:null}else r=_e.next;var i=tt===null?ke.memoizedState:tt.next;if(i!==null)tt=i,_e=r;else{if(r===null)throw ke.alternate===null?Error(s(467)):Error(s(310));_e=r,r={memoizedState:_e.memoizedState,baseState:_e.baseState,baseQueue:_e.baseQueue,queue:_e.queue,next:null},tt===null?ke.memoizedState=tt=r:tt=tt.next=r}return tt}function Cd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function El(r){var i=Cl;return Cl+=1,pi===null&&(pi=[]),r=ig(pi,r,i),i=ke,(tt===null?i.memoizedState:tt.next)===null&&(i=i.alternate,V.H=i===null||i.memoizedState===null?Yg:Kg),r}function mo(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return El(r);if(r.$$typeof===R)return Et(r)}throw Error(s(438,String(r)))}function Ed(r){var i=null,o=ke.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var u=ke.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(m){return m.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=Cd(),ke.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(r),u=0;u<r;u++)o[u]=fe;return i.index++,o}function Kn(r,i){return typeof i=="function"?i(r):i}function go(r){var i=nt();return jd(i,_e,r)}function jd(r,i,o){var u=r.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=o;var m=r.baseQueue,y=u.pending;if(y!==null){if(m!==null){var N=m.next;m.next=y.next,y.next=N}i.baseQueue=m=y,u.pending=null}if(y=r.baseState,m===null)r.memoizedState=y;else{i=m.next;var C=N=null,A=null,_=i,F=!1;do{var Y=_.lane&-536870913;if(Y!==_.lane?(De&Y)===Y:(wr&Y)===Y){var U=_.revertLane;if(U===0)A!==null&&(A=A.next={lane:0,revertLane:0,action:_.action,hasEagerState:_.hasEagerState,eagerState:_.eagerState,next:null}),Y===ui&&(F=!0);else if((wr&U)===U){_=_.next,U===ui&&(F=!0);continue}else Y={lane:0,revertLane:_.revertLane,action:_.action,hasEagerState:_.hasEagerState,eagerState:_.eagerState,next:null},A===null?(C=A=Y,N=y):A=A.next=Y,ke.lanes|=U,Mr|=U;Y=_.action,vs&&o(y,Y),y=_.hasEagerState?_.eagerState:o(y,Y)}else U={lane:Y,revertLane:_.revertLane,action:_.action,hasEagerState:_.hasEagerState,eagerState:_.eagerState,next:null},A===null?(C=A=U,N=y):A=A.next=U,ke.lanes|=Y,Mr|=Y;_=_.next}while(_!==null&&_!==i);if(A===null?N=y:A.next=C,!Xt(y,r.memoizedState)&&(ct=!0,F&&(o=di,o!==null)))throw o;r.memoizedState=y,r.baseState=N,r.baseQueue=A,u.lastRenderedState=y}return m===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function Ad(r){var i=nt(),o=i.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=r;var u=o.dispatch,m=o.pending,y=i.memoizedState;if(m!==null){o.pending=null;var N=m=m.next;do y=r(y,N.action),N=N.next;while(N!==m);Xt(y,i.memoizedState)||(ct=!0),i.memoizedState=y,i.baseQueue===null&&(i.baseState=y),o.lastRenderedState=y}return[y,u]}function hg(r,i,o){var u=ke,m=nt(),y=Le;if(y){if(o===void 0)throw Error(s(407));o=o()}else o=i();var N=!Xt((_e||m).memoizedState,o);N&&(m.memoizedState=o,ct=!0),m=m.queue;var C=gg.bind(null,u,m,r);if(jl(2048,8,C,[r]),m.getSnapshot!==i||N||tt!==null&&tt.memoizedState.tag&1){if(u.flags|=2048,mi(9,yo(),mg.bind(null,u,m,o,i),null),qe===null)throw Error(s(349));y||(wr&124)!==0||pg(u,i,o)}return o}function pg(r,i,o){r.flags|=16384,r={getSnapshot:i,value:o},i=ke.updateQueue,i===null?(i=Cd(),ke.updateQueue=i,i.stores=[r]):(o=i.stores,o===null?i.stores=[r]:o.push(r))}function mg(r,i,o,u){i.value=o,i.getSnapshot=u,yg(i)&&xg(r)}function gg(r,i,o){return o(function(){yg(i)&&xg(r)})}function yg(r){var i=r.getSnapshot;r=r.value;try{var o=i();return!Xt(r,o)}catch{return!0}}function xg(r){var i=li(r,2);i!==null&&tn(i,r,2)}function Td(r){var i=Vt();if(typeof r=="function"){var o=r;if(r=o(),vs){gr(!0);try{o()}finally{gr(!1)}}}return i.memoizedState=i.baseState=r,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kn,lastRenderedState:r},i}function bg(r,i,o,u){return r.baseState=o,jd(r,_e,typeof u=="function"?u:Kn)}function vN(r,i,o,u,m){if(bo(r))throw Error(s(485));if(r=i.action,r!==null){var y={payload:m,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(N){y.listeners.push(N)}};V.T!==null?o(!0):y.isTransition=!1,u(y),o=i.pending,o===null?(y.next=i.pending=y,vg(i,y)):(y.next=o.next,i.pending=o.next=y)}}function vg(r,i){var o=i.action,u=i.payload,m=r.state;if(i.isTransition){var y=V.T,N={};V.T=N;try{var C=o(m,u),A=V.S;A!==null&&A(N,C),Sg(r,i,C)}catch(_){Md(r,i,_)}finally{V.T=y}}else try{y=o(m,u),Sg(r,i,y)}catch(_){Md(r,i,_)}}function Sg(r,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){Ng(r,i,u)},function(u){return Md(r,i,u)}):Ng(r,i,o)}function Ng(r,i,o){i.status="fulfilled",i.value=o,wg(i),r.state=o,i=r.pending,i!==null&&(o=i.next,o===i?r.pending=null:(o=o.next,i.next=o,vg(r,o)))}function Md(r,i,o){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=o,wg(i),i=i.next;while(i!==u)}r.action=null}function wg(r){r=r.listeners;for(var i=0;i<r.length;i++)(0,r[i])()}function kg(r,i){return i}function Cg(r,i){if(Le){var o=qe.formState;if(o!==null){e:{var u=ke;if(Le){if(Xe){t:{for(var m=Xe,y=Mn;m.nodeType!==8;){if(!y){m=null;break t}if(m=wn(m.nextSibling),m===null){m=null;break t}}y=m.data,m=y==="F!"||y==="F"?m:null}if(m){Xe=wn(m.nextSibling),u=m.data==="F!";break e}}gs(u)}u=!1}u&&(i=o[0])}}return o=Vt(),o.memoizedState=o.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:kg,lastRenderedState:i},o.queue=u,o=Fg.bind(null,ke,u),u.dispatch=o,u=Td(!1),y=zd.bind(null,ke,!1,u.queue),u=Vt(),m={state:i,dispatch:null,action:r,pending:null},u.queue=m,o=vN.bind(null,ke,m,y,o),m.dispatch=o,u.memoizedState=r,[i,o,!1]}function Eg(r){var i=nt();return jg(i,_e,r)}function jg(r,i,o){if(i=jd(r,i,kg)[0],r=go(Kn)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=El(i)}catch(N){throw N===vl?co:N}else u=i;i=nt();var m=i.queue,y=m.dispatch;return o!==i.memoizedState&&(ke.flags|=2048,mi(9,yo(),SN.bind(null,m,o),null)),[u,y,r]}function SN(r,i){r.action=i}function Ag(r){var i=nt(),o=_e;if(o!==null)return jg(i,o,r);nt(),i=i.memoizedState,o=nt();var u=o.queue.dispatch;return o.memoizedState=r,[i,u,!1]}function mi(r,i,o,u){return r={tag:r,create:o,deps:u,inst:i,next:null},i=ke.updateQueue,i===null&&(i=Cd(),ke.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=r.next=r:(u=o.next,o.next=r,r.next=u,i.lastEffect=r),r}function yo(){return{destroy:void 0,resource:void 0}}function Tg(){return nt().memoizedState}function xo(r,i,o,u){var m=Vt();u=u===void 0?null:u,ke.flags|=r,m.memoizedState=mi(1|i,yo(),o,u)}function jl(r,i,o,u){var m=nt();u=u===void 0?null:u;var y=m.memoizedState.inst;_e!==null&&u!==null&&vd(u,_e.memoizedState.deps)?m.memoizedState=mi(i,y,o,u):(ke.flags|=r,m.memoizedState=mi(1|i,y,o,u))}function Mg(r,i){xo(8390656,8,r,i)}function Og(r,i){jl(2048,8,r,i)}function Dg(r,i){return jl(4,2,r,i)}function Rg(r,i){return jl(4,4,r,i)}function Lg(r,i){if(typeof i=="function"){r=r();var o=i(r);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function zg(r,i,o){o=o!=null?o.concat([r]):null,jl(4,4,Lg.bind(null,i,r),o)}function Od(){}function Bg(r,i){var o=nt();i=i===void 0?null:i;var u=o.memoizedState;return i!==null&&vd(i,u[1])?u[0]:(o.memoizedState=[r,i],r)}function _g(r,i){var o=nt();i=i===void 0?null:i;var u=o.memoizedState;if(i!==null&&vd(i,u[1]))return u[0];if(u=r(),vs){gr(!0);try{r()}finally{gr(!1)}}return o.memoizedState=[u,i],u}function Dd(r,i,o){return o===void 0||(wr&1073741824)!==0?r.memoizedState=i:(r.memoizedState=o,r=P0(),ke.lanes|=r,Mr|=r,o)}function Hg(r,i,o,u){return Xt(o,i)?o:fi.current!==null?(r=Dd(r,o,u),Xt(r,i)||(ct=!0),r):(wr&42)===0?(ct=!0,r.memoizedState=o):(r=P0(),ke.lanes|=r,Mr|=r,i)}function Ug(r,i,o,u,m){var y=W.p;W.p=y!==0&&8>y?y:8;var N=V.T,C={};V.T=C,zd(r,!1,i,o);try{var A=m(),_=V.S;if(_!==null&&_(C,A),A!==null&&typeof A=="object"&&typeof A.then=="function"){var F=yN(A,u);Al(r,i,F,en(r))}else Al(r,i,u,en(r))}catch(Y){Al(r,i,{then:function(){},status:"rejected",reason:Y},en())}finally{W.p=y,V.T=N}}function NN(){}function Rd(r,i,o,u){if(r.tag!==5)throw Error(s(476));var m=Pg(r).queue;Ug(r,m,i,re,o===null?NN:function(){return Ig(r),o(u)})}function Pg(r){var i=r.memoizedState;if(i!==null)return i;i={memoizedState:re,baseState:re,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kn,lastRenderedState:re},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kn,lastRenderedState:o},next:null},r.memoizedState=i,r=r.alternate,r!==null&&(r.memoizedState=i),i}function Ig(r){var i=Pg(r).next.queue;Al(r,i,{},en())}function Ld(){return Et(Gl)}function Vg(){return nt().memoizedState}function qg(){return nt().memoizedState}function wN(r){for(var i=r.return;i!==null;){switch(i.tag){case 24:case 3:var o=en();r=Sr(o);var u=Nr(i,r,o);u!==null&&(tn(u,i,o),Nl(u,i,o)),i={cache:ud()},r.payload=i;return}i=i.return}}function kN(r,i,o){var u=en();o={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},bo(r)?$g(i,o):(o=ed(r,i,o,u),o!==null&&(tn(o,r,u),Gg(o,i,u)))}function Fg(r,i,o){var u=en();Al(r,i,o,u)}function Al(r,i,o,u){var m={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(bo(r))$g(i,m);else{var y=r.alternate;if(r.lanes===0&&(y===null||y.lanes===0)&&(y=i.lastRenderedReducer,y!==null))try{var N=i.lastRenderedState,C=y(N,o);if(m.hasEagerState=!0,m.eagerState=C,Xt(C,N))return to(r,i,m,0),qe===null&&eo(),!1}catch{}finally{}if(o=ed(r,i,m,u),o!==null)return tn(o,r,u),Gg(o,i,u),!0}return!1}function zd(r,i,o,u){if(u={lane:2,revertLane:pf(),action:u,hasEagerState:!1,eagerState:null,next:null},bo(r)){if(i)throw Error(s(479))}else i=ed(r,o,u,2),i!==null&&tn(i,r,2)}function bo(r){var i=r.alternate;return r===ke||i!==null&&i===ke}function $g(r,i){hi=ho=!0;var o=r.pending;o===null?i.next=i:(i.next=o.next,o.next=i),r.pending=i}function Gg(r,i,o){if((o&4194048)!==0){var u=i.lanes;u&=r.pendingLanes,o|=u,i.lanes=o,em(r,o)}}var vo={readContext:Et,use:mo,useCallback:We,useContext:We,useEffect:We,useImperativeHandle:We,useLayoutEffect:We,useInsertionEffect:We,useMemo:We,useReducer:We,useRef:We,useState:We,useDebugValue:We,useDeferredValue:We,useTransition:We,useSyncExternalStore:We,useId:We,useHostTransitionStatus:We,useFormState:We,useActionState:We,useOptimistic:We,useMemoCache:We,useCacheRefresh:We},Yg={readContext:Et,use:mo,useCallback:function(r,i){return Vt().memoizedState=[r,i===void 0?null:i],r},useContext:Et,useEffect:Mg,useImperativeHandle:function(r,i,o){o=o!=null?o.concat([r]):null,xo(4194308,4,Lg.bind(null,i,r),o)},useLayoutEffect:function(r,i){return xo(4194308,4,r,i)},useInsertionEffect:function(r,i){xo(4,2,r,i)},useMemo:function(r,i){var o=Vt();i=i===void 0?null:i;var u=r();if(vs){gr(!0);try{r()}finally{gr(!1)}}return o.memoizedState=[u,i],u},useReducer:function(r,i,o){var u=Vt();if(o!==void 0){var m=o(i);if(vs){gr(!0);try{o(i)}finally{gr(!1)}}}else m=i;return u.memoizedState=u.baseState=m,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:m},u.queue=r,r=r.dispatch=kN.bind(null,ke,r),[u.memoizedState,r]},useRef:function(r){var i=Vt();return r={current:r},i.memoizedState=r},useState:function(r){r=Td(r);var i=r.queue,o=Fg.bind(null,ke,i);return i.dispatch=o,[r.memoizedState,o]},useDebugValue:Od,useDeferredValue:function(r,i){var o=Vt();return Dd(o,r,i)},useTransition:function(){var r=Td(!1);return r=Ug.bind(null,ke,r.queue,!0,!1),Vt().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,i,o){var u=ke,m=Vt();if(Le){if(o===void 0)throw Error(s(407));o=o()}else{if(o=i(),qe===null)throw Error(s(349));(De&124)!==0||pg(u,i,o)}m.memoizedState=o;var y={value:o,getSnapshot:i};return m.queue=y,Mg(gg.bind(null,u,y,r),[r]),u.flags|=2048,mi(9,yo(),mg.bind(null,u,y,o,i),null),o},useId:function(){var r=Vt(),i=qe.identifierPrefix;if(Le){var o=$n,u=Fn;o=(u&~(1<<32-Kt(u)-1)).toString(32)+o,i=""+i+"R"+o,o=po++,0<o&&(i+="H"+o.toString(32)),i+=""}else o=xN++,i=""+i+"r"+o.toString(32)+"";return r.memoizedState=i},useHostTransitionStatus:Ld,useFormState:Cg,useActionState:Cg,useOptimistic:function(r){var i=Vt();i.memoizedState=i.baseState=r;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=zd.bind(null,ke,!0,o),o.dispatch=i,[r,i]},useMemoCache:Ed,useCacheRefresh:function(){return Vt().memoizedState=wN.bind(null,ke)}},Kg={readContext:Et,use:mo,useCallback:Bg,useContext:Et,useEffect:Og,useImperativeHandle:zg,useInsertionEffect:Dg,useLayoutEffect:Rg,useMemo:_g,useReducer:go,useRef:Tg,useState:function(){return go(Kn)},useDebugValue:Od,useDeferredValue:function(r,i){var o=nt();return Hg(o,_e.memoizedState,r,i)},useTransition:function(){var r=go(Kn)[0],i=nt().memoizedState;return[typeof r=="boolean"?r:El(r),i]},useSyncExternalStore:hg,useId:Vg,useHostTransitionStatus:Ld,useFormState:Eg,useActionState:Eg,useOptimistic:function(r,i){var o=nt();return bg(o,_e,r,i)},useMemoCache:Ed,useCacheRefresh:qg},CN={readContext:Et,use:mo,useCallback:Bg,useContext:Et,useEffect:Og,useImperativeHandle:zg,useInsertionEffect:Dg,useLayoutEffect:Rg,useMemo:_g,useReducer:Ad,useRef:Tg,useState:function(){return Ad(Kn)},useDebugValue:Od,useDeferredValue:function(r,i){var o=nt();return _e===null?Dd(o,r,i):Hg(o,_e.memoizedState,r,i)},useTransition:function(){var r=Ad(Kn)[0],i=nt().memoizedState;return[typeof r=="boolean"?r:El(r),i]},useSyncExternalStore:hg,useId:Vg,useHostTransitionStatus:Ld,useFormState:Ag,useActionState:Ag,useOptimistic:function(r,i){var o=nt();return _e!==null?bg(o,_e,r,i):(o.baseState=r,[r,o.queue.dispatch])},useMemoCache:Ed,useCacheRefresh:qg},gi=null,Tl=0;function So(r){var i=Tl;return Tl+=1,gi===null&&(gi=[]),ig(gi,r,i)}function Ml(r,i){i=i.props.ref,r.ref=i!==void 0?i:null}function No(r,i){throw i.$$typeof===x?Error(s(525)):(r=Object.prototype.toString.call(i),Error(s(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r)))}function Xg(r){var i=r._init;return i(r._payload)}function Jg(r){function i(L,M){if(r){var B=L.deletions;B===null?(L.deletions=[M],L.flags|=16):B.push(M)}}function o(L,M){if(!r)return null;for(;M!==null;)i(L,M),M=M.sibling;return null}function u(L){for(var M=new Map;L!==null;)L.key!==null?M.set(L.key,L):M.set(L.index,L),L=L.sibling;return M}function m(L,M){return L=qn(L,M),L.index=0,L.sibling=null,L}function y(L,M,B){return L.index=B,r?(B=L.alternate,B!==null?(B=B.index,B<M?(L.flags|=67108866,M):B):(L.flags|=67108866,M)):(L.flags|=1048576,M)}function N(L){return r&&L.alternate===null&&(L.flags|=67108866),L}function C(L,M,B,$){return M===null||M.tag!==6?(M=nd(B,L.mode,$),M.return=L,M):(M=m(M,B),M.return=L,M)}function A(L,M,B,$){var ae=B.type;return ae===S?F(L,M,B.props.children,$,B.key):M!==null&&(M.elementType===ae||typeof ae=="object"&&ae!==null&&ae.$$typeof===q&&Xg(ae)===M.type)?(M=m(M,B.props),Ml(M,B),M.return=L,M):(M=ro(B.type,B.key,B.props,null,L.mode,$),Ml(M,B),M.return=L,M)}function _(L,M,B,$){return M===null||M.tag!==4||M.stateNode.containerInfo!==B.containerInfo||M.stateNode.implementation!==B.implementation?(M=rd(B,L.mode,$),M.return=L,M):(M=m(M,B.children||[]),M.return=L,M)}function F(L,M,B,$,ae){return M===null||M.tag!==7?(M=fs(B,L.mode,$,ae),M.return=L,M):(M=m(M,B),M.return=L,M)}function Y(L,M,B){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=nd(""+M,L.mode,B),M.return=L,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case b:return B=ro(M.type,M.key,M.props,null,L.mode,B),Ml(B,M),B.return=L,B;case v:return M=rd(M,L.mode,B),M.return=L,M;case q:var $=M._init;return M=$(M._payload),Y(L,M,B)}if(xe(M)||te(M))return M=fs(M,L.mode,B,null),M.return=L,M;if(typeof M.then=="function")return Y(L,So(M),B);if(M.$$typeof===R)return Y(L,ao(L,M),B);No(L,M)}return null}function U(L,M,B,$){var ae=M!==null?M.key:null;if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return ae!==null?null:C(L,M,""+B,$);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case b:return B.key===ae?A(L,M,B,$):null;case v:return B.key===ae?_(L,M,B,$):null;case q:return ae=B._init,B=ae(B._payload),U(L,M,B,$)}if(xe(B)||te(B))return ae!==null?null:F(L,M,B,$,null);if(typeof B.then=="function")return U(L,M,So(B),$);if(B.$$typeof===R)return U(L,M,ao(L,B),$);No(L,B)}return null}function I(L,M,B,$,ae){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return L=L.get(B)||null,C(M,L,""+$,ae);if(typeof $=="object"&&$!==null){switch($.$$typeof){case b:return L=L.get($.key===null?B:$.key)||null,A(M,L,$,ae);case v:return L=L.get($.key===null?B:$.key)||null,_(M,L,$,ae);case q:var Ee=$._init;return $=Ee($._payload),I(L,M,B,$,ae)}if(xe($)||te($))return L=L.get(B)||null,F(M,L,$,ae,null);if(typeof $.then=="function")return I(L,M,B,So($),ae);if($.$$typeof===R)return I(L,M,B,ao(M,$),ae);No(M,$)}return null}function ye(L,M,B,$){for(var ae=null,Ee=null,ce=M,ge=M=0,dt=null;ce!==null&&ge<B.length;ge++){ce.index>ge?(dt=ce,ce=null):dt=ce.sibling;var Re=U(L,ce,B[ge],$);if(Re===null){ce===null&&(ce=dt);break}r&&ce&&Re.alternate===null&&i(L,ce),M=y(Re,M,ge),Ee===null?ae=Re:Ee.sibling=Re,Ee=Re,ce=dt}if(ge===B.length)return o(L,ce),Le&&ps(L,ge),ae;if(ce===null){for(;ge<B.length;ge++)ce=Y(L,B[ge],$),ce!==null&&(M=y(ce,M,ge),Ee===null?ae=ce:Ee.sibling=ce,Ee=ce);return Le&&ps(L,ge),ae}for(ce=u(ce);ge<B.length;ge++)dt=I(ce,L,ge,B[ge],$),dt!==null&&(r&&dt.alternate!==null&&ce.delete(dt.key===null?ge:dt.key),M=y(dt,M,ge),Ee===null?ae=dt:Ee.sibling=dt,Ee=dt);return r&&ce.forEach(function(Ur){return i(L,Ur)}),Le&&ps(L,ge),ae}function me(L,M,B,$){if(B==null)throw Error(s(151));for(var ae=null,Ee=null,ce=M,ge=M=0,dt=null,Re=B.next();ce!==null&&!Re.done;ge++,Re=B.next()){ce.index>ge?(dt=ce,ce=null):dt=ce.sibling;var Ur=U(L,ce,Re.value,$);if(Ur===null){ce===null&&(ce=dt);break}r&&ce&&Ur.alternate===null&&i(L,ce),M=y(Ur,M,ge),Ee===null?ae=Ur:Ee.sibling=Ur,Ee=Ur,ce=dt}if(Re.done)return o(L,ce),Le&&ps(L,ge),ae;if(ce===null){for(;!Re.done;ge++,Re=B.next())Re=Y(L,Re.value,$),Re!==null&&(M=y(Re,M,ge),Ee===null?ae=Re:Ee.sibling=Re,Ee=Re);return Le&&ps(L,ge),ae}for(ce=u(ce);!Re.done;ge++,Re=B.next())Re=I(ce,L,ge,Re.value,$),Re!==null&&(r&&Re.alternate!==null&&ce.delete(Re.key===null?ge:Re.key),M=y(Re,M,ge),Ee===null?ae=Re:Ee.sibling=Re,Ee=Re);return r&&ce.forEach(function(Ew){return i(L,Ew)}),Le&&ps(L,ge),ae}function Ue(L,M,B,$){if(typeof B=="object"&&B!==null&&B.type===S&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case b:e:{for(var ae=B.key;M!==null;){if(M.key===ae){if(ae=B.type,ae===S){if(M.tag===7){o(L,M.sibling),$=m(M,B.props.children),$.return=L,L=$;break e}}else if(M.elementType===ae||typeof ae=="object"&&ae!==null&&ae.$$typeof===q&&Xg(ae)===M.type){o(L,M.sibling),$=m(M,B.props),Ml($,B),$.return=L,L=$;break e}o(L,M);break}else i(L,M);M=M.sibling}B.type===S?($=fs(B.props.children,L.mode,$,B.key),$.return=L,L=$):($=ro(B.type,B.key,B.props,null,L.mode,$),Ml($,B),$.return=L,L=$)}return N(L);case v:e:{for(ae=B.key;M!==null;){if(M.key===ae)if(M.tag===4&&M.stateNode.containerInfo===B.containerInfo&&M.stateNode.implementation===B.implementation){o(L,M.sibling),$=m(M,B.children||[]),$.return=L,L=$;break e}else{o(L,M);break}else i(L,M);M=M.sibling}$=rd(B,L.mode,$),$.return=L,L=$}return N(L);case q:return ae=B._init,B=ae(B._payload),Ue(L,M,B,$)}if(xe(B))return ye(L,M,B,$);if(te(B)){if(ae=te(B),typeof ae!="function")throw Error(s(150));return B=ae.call(B),me(L,M,B,$)}if(typeof B.then=="function")return Ue(L,M,So(B),$);if(B.$$typeof===R)return Ue(L,M,ao(L,B),$);No(L,B)}return typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint"?(B=""+B,M!==null&&M.tag===6?(o(L,M.sibling),$=m(M,B),$.return=L,L=$):(o(L,M),$=nd(B,L.mode,$),$.return=L,L=$),N(L)):o(L,M)}return function(L,M,B,$){try{Tl=0;var ae=Ue(L,M,B,$);return gi=null,ae}catch(ce){if(ce===vl||ce===co)throw ce;var Ee=Jt(29,ce,null,L.mode);return Ee.lanes=$,Ee.return=L,Ee}finally{}}}var yi=Jg(!0),Qg=Jg(!1),fn=P(null),On=null;function kr(r){var i=r.alternate;Z(lt,lt.current&1),Z(fn,r),On===null&&(i===null||fi.current!==null||i.memoizedState!==null)&&(On=r)}function Zg(r){if(r.tag===22){if(Z(lt,lt.current),Z(fn,r),On===null){var i=r.alternate;i!==null&&i.memoizedState!==null&&(On=r)}}else Cr()}function Cr(){Z(lt,lt.current),Z(fn,fn.current)}function Xn(r){ee(fn),On===r&&(On=null),ee(lt)}var lt=P(0);function wo(r){for(var i=r;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||Ef(o)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function Bd(r,i,o,u){i=r.memoizedState,o=o(u,i),o=o==null?i:g({},i,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var _d={enqueueSetState:function(r,i,o){r=r._reactInternals;var u=en(),m=Sr(u);m.payload=i,o!=null&&(m.callback=o),i=Nr(r,m,u),i!==null&&(tn(i,r,u),Nl(i,r,u))},enqueueReplaceState:function(r,i,o){r=r._reactInternals;var u=en(),m=Sr(u);m.tag=1,m.payload=i,o!=null&&(m.callback=o),i=Nr(r,m,u),i!==null&&(tn(i,r,u),Nl(i,r,u))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var o=en(),u=Sr(o);u.tag=2,i!=null&&(u.callback=i),i=Nr(r,u,o),i!==null&&(tn(i,r,o),Nl(i,r,o))}};function Wg(r,i,o,u,m,y,N){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,y,N):i.prototype&&i.prototype.isPureReactComponent?!fl(o,u)||!fl(m,y):!0}function e0(r,i,o,u){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,u),i.state!==r&&_d.enqueueReplaceState(i,i.state,null)}function Ss(r,i){var o=i;if("ref"in i){o={};for(var u in i)u!=="ref"&&(o[u]=i[u])}if(r=r.defaultProps){o===i&&(o=g({},o));for(var m in r)o[m]===void 0&&(o[m]=r[m])}return o}var ko=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function t0(r){ko(r)}function n0(r){console.error(r)}function r0(r){ko(r)}function Co(r,i){try{var o=r.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function s0(r,i,o){try{var u=r.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function Hd(r,i,o){return o=Sr(o),o.tag=3,o.payload={element:null},o.callback=function(){Co(r,i)},o}function i0(r){return r=Sr(r),r.tag=3,r}function l0(r,i,o,u){var m=o.type.getDerivedStateFromError;if(typeof m=="function"){var y=u.value;r.payload=function(){return m(y)},r.callback=function(){s0(i,o,u)}}var N=o.stateNode;N!==null&&typeof N.componentDidCatch=="function"&&(r.callback=function(){s0(i,o,u),typeof m!="function"&&(Or===null?Or=new Set([this]):Or.add(this));var C=u.stack;this.componentDidCatch(u.value,{componentStack:C!==null?C:""})})}function EN(r,i,o,u,m){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=o.alternate,i!==null&&yl(i,o,m,!0),o=fn.current,o!==null){switch(o.tag){case 13:return On===null?cf():o.alternate===null&&Je===0&&(Je=3),o.flags&=-257,o.flags|=65536,o.lanes=m,u===hd?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([u]):i.add(u),df(r,u,m)),!1;case 22:return o.flags|=65536,u===hd?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([u]):o.add(u)),df(r,u,m)),!1}throw Error(s(435,o.tag))}return df(r,u,m),cf(),!1}if(Le)return i=fn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=m,u!==ld&&(r=Error(s(422),{cause:u}),gl(on(r,o)))):(u!==ld&&(i=Error(s(423),{cause:u}),gl(on(i,o))),r=r.current.alternate,r.flags|=65536,m&=-m,r.lanes|=m,u=on(u,o),m=Hd(r.stateNode,u,m),gd(r,m),Je!==4&&(Je=2)),!1;var y=Error(s(520),{cause:u});if(y=on(y,o),_l===null?_l=[y]:_l.push(y),Je!==4&&(Je=2),i===null)return!0;u=on(u,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,r=m&-m,o.lanes|=r,r=Hd(o.stateNode,u,r),gd(o,r),!1;case 1:if(i=o.type,y=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Or===null||!Or.has(y))))return o.flags|=65536,m&=-m,o.lanes|=m,m=i0(m),l0(m,r,o,u),gd(o,m),!1}o=o.return}while(o!==null);return!1}var a0=Error(s(461)),ct=!1;function xt(r,i,o,u){i.child=r===null?Qg(i,null,o,u):yi(i,r.child,o,u)}function o0(r,i,o,u,m){o=o.render;var y=i.ref;if("ref"in u){var N={};for(var C in u)C!=="ref"&&(N[C]=u[C])}else N=u;return xs(i),u=Sd(r,i,o,N,y,m),C=Nd(),r!==null&&!ct?(wd(r,i,m),Jn(r,i,m)):(Le&&C&&sd(i),i.flags|=1,xt(r,i,u,m),i.child)}function c0(r,i,o,u,m){if(r===null){var y=o.type;return typeof y=="function"&&!td(y)&&y.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=y,u0(r,i,y,u,m)):(r=ro(o.type,null,u,i,i.mode,m),r.ref=i.ref,r.return=i,i.child=r)}if(y=r.child,!Gd(r,m)){var N=y.memoizedProps;if(o=o.compare,o=o!==null?o:fl,o(N,u)&&r.ref===i.ref)return Jn(r,i,m)}return i.flags|=1,r=qn(y,u),r.ref=i.ref,r.return=i,i.child=r}function u0(r,i,o,u,m){if(r!==null){var y=r.memoizedProps;if(fl(y,u)&&r.ref===i.ref)if(ct=!1,i.pendingProps=u=y,Gd(r,m))(r.flags&131072)!==0&&(ct=!0);else return i.lanes=r.lanes,Jn(r,i,m)}return Ud(r,i,o,u,m)}function d0(r,i,o){var u=i.pendingProps,m=u.children,y=r!==null?r.memoizedState:null;if(u.mode==="hidden"){if((i.flags&128)!==0){if(u=y!==null?y.baseLanes|o:o,r!==null){for(m=i.child=r.child,y=0;m!==null;)y=y|m.lanes|m.childLanes,m=m.sibling;i.childLanes=y&~u}else i.childLanes=0,i.child=null;return f0(r,i,u,o)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},r!==null&&oo(i,y!==null?y.cachePool:null),y!==null?ug(i,y):xd(),Zg(i);else return i.lanes=i.childLanes=536870912,f0(r,i,y!==null?y.baseLanes|o:o,o)}else y!==null?(oo(i,y.cachePool),ug(i,y),Cr(),i.memoizedState=null):(r!==null&&oo(i,null),xd(),Cr());return xt(r,i,m,o),i.child}function f0(r,i,o,u){var m=fd();return m=m===null?null:{parent:it._currentValue,pool:m},i.memoizedState={baseLanes:o,cachePool:m},r!==null&&oo(i,null),xd(),Zg(i),r!==null&&yl(r,i,u,!0),null}function Eo(r,i){var o=i.ref;if(o===null)r!==null&&r.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(s(284));(r===null||r.ref!==o)&&(i.flags|=4194816)}}function Ud(r,i,o,u,m){return xs(i),o=Sd(r,i,o,u,void 0,m),u=Nd(),r!==null&&!ct?(wd(r,i,m),Jn(r,i,m)):(Le&&u&&sd(i),i.flags|=1,xt(r,i,o,m),i.child)}function h0(r,i,o,u,m,y){return xs(i),i.updateQueue=null,o=fg(i,u,o,m),dg(r),u=Nd(),r!==null&&!ct?(wd(r,i,y),Jn(r,i,y)):(Le&&u&&sd(i),i.flags|=1,xt(r,i,o,y),i.child)}function p0(r,i,o,u,m){if(xs(i),i.stateNode===null){var y=ai,N=o.contextType;typeof N=="object"&&N!==null&&(y=Et(N)),y=new o(u,y),i.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=_d,i.stateNode=y,y._reactInternals=i,y=i.stateNode,y.props=u,y.state=i.memoizedState,y.refs={},pd(i),N=o.contextType,y.context=typeof N=="object"&&N!==null?Et(N):ai,y.state=i.memoizedState,N=o.getDerivedStateFromProps,typeof N=="function"&&(Bd(i,o,N,u),y.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(N=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),N!==y.state&&_d.enqueueReplaceState(y,y.state,null),kl(i,u,y,m),wl(),y.state=i.memoizedState),typeof y.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(r===null){y=i.stateNode;var C=i.memoizedProps,A=Ss(o,C);y.props=A;var _=y.context,F=o.contextType;N=ai,typeof F=="object"&&F!==null&&(N=Et(F));var Y=o.getDerivedStateFromProps;F=typeof Y=="function"||typeof y.getSnapshotBeforeUpdate=="function",C=i.pendingProps!==C,F||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(C||_!==N)&&e0(i,y,u,N),vr=!1;var U=i.memoizedState;y.state=U,kl(i,u,y,m),wl(),_=i.memoizedState,C||U!==_||vr?(typeof Y=="function"&&(Bd(i,o,Y,u),_=i.memoizedState),(A=vr||Wg(i,o,A,u,U,_,N))?(F||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(i.flags|=4194308)):(typeof y.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=_),y.props=u,y.state=_,y.context=N,u=A):(typeof y.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{y=i.stateNode,md(r,i),N=i.memoizedProps,F=Ss(o,N),y.props=F,Y=i.pendingProps,U=y.context,_=o.contextType,A=ai,typeof _=="object"&&_!==null&&(A=Et(_)),C=o.getDerivedStateFromProps,(_=typeof C=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(N!==Y||U!==A)&&e0(i,y,u,A),vr=!1,U=i.memoizedState,y.state=U,kl(i,u,y,m),wl();var I=i.memoizedState;N!==Y||U!==I||vr||r!==null&&r.dependencies!==null&&lo(r.dependencies)?(typeof C=="function"&&(Bd(i,o,C,u),I=i.memoizedState),(F=vr||Wg(i,o,F,u,U,I,A)||r!==null&&r.dependencies!==null&&lo(r.dependencies))?(_||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(u,I,A),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(u,I,A)),typeof y.componentDidUpdate=="function"&&(i.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof y.componentDidUpdate!="function"||N===r.memoizedProps&&U===r.memoizedState||(i.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||N===r.memoizedProps&&U===r.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=I),y.props=u,y.state=I,y.context=A,u=F):(typeof y.componentDidUpdate!="function"||N===r.memoizedProps&&U===r.memoizedState||(i.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||N===r.memoizedProps&&U===r.memoizedState||(i.flags|=1024),u=!1)}return y=u,Eo(r,i),u=(i.flags&128)!==0,y||u?(y=i.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:y.render(),i.flags|=1,r!==null&&u?(i.child=yi(i,r.child,null,m),i.child=yi(i,null,o,m)):xt(r,i,o,m),i.memoizedState=y.state,r=i.child):r=Jn(r,i,m),r}function m0(r,i,o,u){return ml(),i.flags|=256,xt(r,i,o,u),i.child}var Pd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Id(r){return{baseLanes:r,cachePool:ng()}}function Vd(r,i,o){return r=r!==null?r.childLanes&~o:0,i&&(r|=hn),r}function g0(r,i,o){var u=i.pendingProps,m=!1,y=(i.flags&128)!==0,N;if((N=y)||(N=r!==null&&r.memoizedState===null?!1:(lt.current&2)!==0),N&&(m=!0,i.flags&=-129),N=(i.flags&32)!==0,i.flags&=-33,r===null){if(Le){if(m?kr(i):Cr(),Le){var C=Xe,A;if(A=C){e:{for(A=C,C=Mn;A.nodeType!==8;){if(!C){C=null;break e}if(A=wn(A.nextSibling),A===null){C=null;break e}}C=A}C!==null?(i.memoizedState={dehydrated:C,treeContext:hs!==null?{id:Fn,overflow:$n}:null,retryLane:536870912,hydrationErrors:null},A=Jt(18,null,null,0),A.stateNode=C,A.return=i,i.child=A,Rt=i,Xe=null,A=!0):A=!1}A||gs(i)}if(C=i.memoizedState,C!==null&&(C=C.dehydrated,C!==null))return Ef(C)?i.lanes=32:i.lanes=536870912,null;Xn(i)}return C=u.children,u=u.fallback,m?(Cr(),m=i.mode,C=jo({mode:"hidden",children:C},m),u=fs(u,m,o,null),C.return=i,u.return=i,C.sibling=u,i.child=C,m=i.child,m.memoizedState=Id(o),m.childLanes=Vd(r,N,o),i.memoizedState=Pd,u):(kr(i),qd(i,C))}if(A=r.memoizedState,A!==null&&(C=A.dehydrated,C!==null)){if(y)i.flags&256?(kr(i),i.flags&=-257,i=Fd(r,i,o)):i.memoizedState!==null?(Cr(),i.child=r.child,i.flags|=128,i=null):(Cr(),m=u.fallback,C=i.mode,u=jo({mode:"visible",children:u.children},C),m=fs(m,C,o,null),m.flags|=2,u.return=i,m.return=i,u.sibling=m,i.child=u,yi(i,r.child,null,o),u=i.child,u.memoizedState=Id(o),u.childLanes=Vd(r,N,o),i.memoizedState=Pd,i=m);else if(kr(i),Ef(C)){if(N=C.nextSibling&&C.nextSibling.dataset,N)var _=N.dgst;N=_,u=Error(s(419)),u.stack="",u.digest=N,gl({value:u,source:null,stack:null}),i=Fd(r,i,o)}else if(ct||yl(r,i,o,!1),N=(o&r.childLanes)!==0,ct||N){if(N=qe,N!==null&&(u=o&-o,u=(u&42)!==0?1:Eu(u),u=(u&(N.suspendedLanes|o))!==0?0:u,u!==0&&u!==A.retryLane))throw A.retryLane=u,li(r,u),tn(N,r,u),a0;C.data==="$?"||cf(),i=Fd(r,i,o)}else C.data==="$?"?(i.flags|=192,i.child=r.child,i=null):(r=A.treeContext,Xe=wn(C.nextSibling),Rt=i,Le=!0,ms=null,Mn=!1,r!==null&&(un[dn++]=Fn,un[dn++]=$n,un[dn++]=hs,Fn=r.id,$n=r.overflow,hs=i),i=qd(i,u.children),i.flags|=4096);return i}return m?(Cr(),m=u.fallback,C=i.mode,A=r.child,_=A.sibling,u=qn(A,{mode:"hidden",children:u.children}),u.subtreeFlags=A.subtreeFlags&65011712,_!==null?m=qn(_,m):(m=fs(m,C,o,null),m.flags|=2),m.return=i,u.return=i,u.sibling=m,i.child=u,u=m,m=i.child,C=r.child.memoizedState,C===null?C=Id(o):(A=C.cachePool,A!==null?(_=it._currentValue,A=A.parent!==_?{parent:_,pool:_}:A):A=ng(),C={baseLanes:C.baseLanes|o,cachePool:A}),m.memoizedState=C,m.childLanes=Vd(r,N,o),i.memoizedState=Pd,u):(kr(i),o=r.child,r=o.sibling,o=qn(o,{mode:"visible",children:u.children}),o.return=i,o.sibling=null,r!==null&&(N=i.deletions,N===null?(i.deletions=[r],i.flags|=16):N.push(r)),i.child=o,i.memoizedState=null,o)}function qd(r,i){return i=jo({mode:"visible",children:i},r.mode),i.return=r,r.child=i}function jo(r,i){return r=Jt(22,r,null,i),r.lanes=0,r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},r}function Fd(r,i,o){return yi(i,r.child,null,o),r=qd(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function y0(r,i,o){r.lanes|=i;var u=r.alternate;u!==null&&(u.lanes|=i),od(r.return,i,o)}function $d(r,i,o,u,m){var y=r.memoizedState;y===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:m}:(y.isBackwards=i,y.rendering=null,y.renderingStartTime=0,y.last=u,y.tail=o,y.tailMode=m)}function x0(r,i,o){var u=i.pendingProps,m=u.revealOrder,y=u.tail;if(xt(r,i,u.children,o),u=lt.current,(u&2)!==0)u=u&1|2,i.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&y0(r,o,i);else if(r.tag===19)y0(r,o,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}u&=1}switch(Z(lt,u),m){case"forwards":for(o=i.child,m=null;o!==null;)r=o.alternate,r!==null&&wo(r)===null&&(m=o),o=o.sibling;o=m,o===null?(m=i.child,i.child=null):(m=o.sibling,o.sibling=null),$d(i,!1,m,o,y);break;case"backwards":for(o=null,m=i.child,i.child=null;m!==null;){if(r=m.alternate,r!==null&&wo(r)===null){i.child=m;break}r=m.sibling,m.sibling=o,o=m,m=r}$d(i,!0,o,null,y);break;case"together":$d(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Jn(r,i,o){if(r!==null&&(i.dependencies=r.dependencies),Mr|=i.lanes,(o&i.childLanes)===0)if(r!==null){if(yl(r,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(r!==null&&i.child!==r.child)throw Error(s(153));if(i.child!==null){for(r=i.child,o=qn(r,r.pendingProps),i.child=o,o.return=i;r.sibling!==null;)r=r.sibling,o=o.sibling=qn(r,r.pendingProps),o.return=i;o.sibling=null}return i.child}function Gd(r,i){return(r.lanes&i)!==0?!0:(r=r.dependencies,!!(r!==null&&lo(r)))}function jN(r,i,o){switch(i.tag){case 3:Q(i,i.stateNode.containerInfo),br(i,it,r.memoizedState.cache),ml();break;case 27:case 5:Pe(i);break;case 4:Q(i,i.stateNode.containerInfo);break;case 10:br(i,i.type,i.memoizedProps.value);break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(kr(i),i.flags|=128,null):(o&i.child.childLanes)!==0?g0(r,i,o):(kr(i),r=Jn(r,i,o),r!==null?r.sibling:null);kr(i);break;case 19:var m=(r.flags&128)!==0;if(u=(o&i.childLanes)!==0,u||(yl(r,i,o,!1),u=(o&i.childLanes)!==0),m){if(u)return x0(r,i,o);i.flags|=128}if(m=i.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),Z(lt,lt.current),u)break;return null;case 22:case 23:return i.lanes=0,d0(r,i,o);case 24:br(i,it,r.memoizedState.cache)}return Jn(r,i,o)}function b0(r,i,o){if(r!==null)if(r.memoizedProps!==i.pendingProps)ct=!0;else{if(!Gd(r,o)&&(i.flags&128)===0)return ct=!1,jN(r,i,o);ct=(r.flags&131072)!==0}else ct=!1,Le&&(i.flags&1048576)!==0&&Xm(i,io,i.index);switch(i.lanes=0,i.tag){case 16:e:{r=i.pendingProps;var u=i.elementType,m=u._init;if(u=m(u._payload),i.type=u,typeof u=="function")td(u)?(r=Ss(u,r),i.tag=1,i=p0(null,i,u,r,o)):(i.tag=0,i=Ud(null,i,u,r,o));else{if(u!=null){if(m=u.$$typeof,m===O){i.tag=11,i=o0(null,i,u,r,o);break e}else if(m===G){i.tag=14,i=c0(null,i,u,r,o);break e}}throw i=Me(u)||u,Error(s(306,i,""))}}return i;case 0:return Ud(r,i,i.type,i.pendingProps,o);case 1:return u=i.type,m=Ss(u,i.pendingProps),p0(r,i,u,m,o);case 3:e:{if(Q(i,i.stateNode.containerInfo),r===null)throw Error(s(387));u=i.pendingProps;var y=i.memoizedState;m=y.element,md(r,i),kl(i,u,null,o);var N=i.memoizedState;if(u=N.cache,br(i,it,u),u!==y.cache&&cd(i,[it],o,!0),wl(),u=N.element,y.isDehydrated)if(y={element:u,isDehydrated:!1,cache:N.cache},i.updateQueue.baseState=y,i.memoizedState=y,i.flags&256){i=m0(r,i,u,o);break e}else if(u!==m){m=on(Error(s(424)),i),gl(m),i=m0(r,i,u,o);break e}else{switch(r=i.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(Xe=wn(r.firstChild),Rt=i,Le=!0,ms=null,Mn=!0,o=Qg(i,null,u,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(ml(),u===m){i=Jn(r,i,o);break e}xt(r,i,u,o)}i=i.child}return i;case 26:return Eo(r,i),r===null?(o=wy(i.type,null,i.pendingProps,null))?i.memoizedState=o:Le||(o=i.type,r=i.pendingProps,u=Io(K.current).createElement(o),u[Ct]=i,u[Pt]=r,vt(u,o,r),ot(u),i.stateNode=u):i.memoizedState=wy(i.type,r.memoizedProps,i.pendingProps,r.memoizedState),null;case 27:return Pe(i),r===null&&Le&&(u=i.stateNode=vy(i.type,i.pendingProps,K.current),Rt=i,Mn=!0,m=Xe,Lr(i.type)?(jf=m,Xe=wn(u.firstChild)):Xe=m),xt(r,i,i.pendingProps.children,o),Eo(r,i),r===null&&(i.flags|=4194304),i.child;case 5:return r===null&&Le&&((m=u=Xe)&&(u=tw(u,i.type,i.pendingProps,Mn),u!==null?(i.stateNode=u,Rt=i,Xe=wn(u.firstChild),Mn=!1,m=!0):m=!1),m||gs(i)),Pe(i),m=i.type,y=i.pendingProps,N=r!==null?r.memoizedProps:null,u=y.children,wf(m,y)?u=null:N!==null&&wf(m,N)&&(i.flags|=32),i.memoizedState!==null&&(m=Sd(r,i,bN,null,null,o),Gl._currentValue=m),Eo(r,i),xt(r,i,u,o),i.child;case 6:return r===null&&Le&&((r=o=Xe)&&(o=nw(o,i.pendingProps,Mn),o!==null?(i.stateNode=o,Rt=i,Xe=null,r=!0):r=!1),r||gs(i)),null;case 13:return g0(r,i,o);case 4:return Q(i,i.stateNode.containerInfo),u=i.pendingProps,r===null?i.child=yi(i,null,u,o):xt(r,i,u,o),i.child;case 11:return o0(r,i,i.type,i.pendingProps,o);case 7:return xt(r,i,i.pendingProps,o),i.child;case 8:return xt(r,i,i.pendingProps.children,o),i.child;case 12:return xt(r,i,i.pendingProps.children,o),i.child;case 10:return u=i.pendingProps,br(i,i.type,u.value),xt(r,i,u.children,o),i.child;case 9:return m=i.type._context,u=i.pendingProps.children,xs(i),m=Et(m),u=u(m),i.flags|=1,xt(r,i,u,o),i.child;case 14:return c0(r,i,i.type,i.pendingProps,o);case 15:return u0(r,i,i.type,i.pendingProps,o);case 19:return x0(r,i,o);case 31:return u=i.pendingProps,o=i.mode,u={mode:u.mode,children:u.children},r===null?(o=jo(u,o),o.ref=i.ref,i.child=o,o.return=i,i=o):(o=qn(r.child,u),o.ref=i.ref,i.child=o,o.return=i,i=o),i;case 22:return d0(r,i,o);case 24:return xs(i),u=Et(it),r===null?(m=fd(),m===null&&(m=qe,y=ud(),m.pooledCache=y,y.refCount++,y!==null&&(m.pooledCacheLanes|=o),m=y),i.memoizedState={parent:u,cache:m},pd(i),br(i,it,m)):((r.lanes&o)!==0&&(md(r,i),kl(i,null,null,o),wl()),m=r.memoizedState,y=i.memoizedState,m.parent!==u?(m={parent:u,cache:u},i.memoizedState=m,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=m),br(i,it,u)):(u=y.cache,br(i,it,u),u!==m.cache&&cd(i,[it],o,!0))),xt(r,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function Qn(r){r.flags|=4}function v0(r,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!Ay(i)){if(i=fn.current,i!==null&&((De&4194048)===De?On!==null:(De&62914560)!==De&&(De&536870912)===0||i!==On))throw Sl=hd,rg;r.flags|=8192}}function Ao(r,i){i!==null&&(r.flags|=4),r.flags&16384&&(i=r.tag!==22?Zp():536870912,r.lanes|=i,Si|=i)}function Ol(r,i){if(!Le)switch(r.tailMode){case"hidden":i=r.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function Ke(r){var i=r.alternate!==null&&r.alternate.child===r.child,o=0,u=0;if(i)for(var m=r.child;m!==null;)o|=m.lanes|m.childLanes,u|=m.subtreeFlags&65011712,u|=m.flags&65011712,m.return=r,m=m.sibling;else for(m=r.child;m!==null;)o|=m.lanes|m.childLanes,u|=m.subtreeFlags,u|=m.flags,m.return=r,m=m.sibling;return r.subtreeFlags|=u,r.childLanes=o,i}function AN(r,i,o){var u=i.pendingProps;switch(id(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ke(i),null;case 1:return Ke(i),null;case 3:return o=i.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),Yn(it),Ye(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(r===null||r.child===null)&&(pl(i)?Qn(i):r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Zm())),Ke(i),null;case 26:return o=i.memoizedState,r===null?(Qn(i),o!==null?(Ke(i),v0(i,o)):(Ke(i),i.flags&=-16777217)):o?o!==r.memoizedState?(Qn(i),Ke(i),v0(i,o)):(Ke(i),i.flags&=-16777217):(r.memoizedProps!==u&&Qn(i),Ke(i),i.flags&=-16777217),null;case 27:Ut(i),o=K.current;var m=i.type;if(r!==null&&i.stateNode!=null)r.memoizedProps!==u&&Qn(i);else{if(!u){if(i.stateNode===null)throw Error(s(166));return Ke(i),null}r=de.current,pl(i)?Jm(i):(r=vy(m,u,o),i.stateNode=r,Qn(i))}return Ke(i),null;case 5:if(Ut(i),o=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==u&&Qn(i);else{if(!u){if(i.stateNode===null)throw Error(s(166));return Ke(i),null}if(r=de.current,pl(i))Jm(i);else{switch(m=Io(K.current),r){case 1:r=m.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:r=m.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":r=m.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":r=m.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":r=m.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof u.is=="string"?m.createElement("select",{is:u.is}):m.createElement("select"),u.multiple?r.multiple=!0:u.size&&(r.size=u.size);break;default:r=typeof u.is=="string"?m.createElement(o,{is:u.is}):m.createElement(o)}}r[Ct]=i,r[Pt]=u;e:for(m=i.child;m!==null;){if(m.tag===5||m.tag===6)r.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===i)break e;for(;m.sibling===null;){if(m.return===null||m.return===i)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}i.stateNode=r;e:switch(vt(r,o,u),o){case"button":case"input":case"select":case"textarea":r=!!u.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&Qn(i)}}return Ke(i),i.flags&=-16777217,null;case 6:if(r&&i.stateNode!=null)r.memoizedProps!==u&&Qn(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(s(166));if(r=K.current,pl(i)){if(r=i.stateNode,o=i.memoizedProps,u=null,m=Rt,m!==null)switch(m.tag){case 27:case 5:u=m.memoizedProps}r[Ct]=i,r=!!(r.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||hy(r.nodeValue,o)),r||gs(i)}else r=Io(r).createTextNode(u),r[Ct]=i,i.stateNode=r}return Ke(i),null;case 13:if(u=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(m=pl(i),u!==null&&u.dehydrated!==null){if(r===null){if(!m)throw Error(s(318));if(m=i.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(s(317));m[Ct]=i}else ml(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Ke(i),m=!1}else m=Zm(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=m),m=!0;if(!m)return i.flags&256?(Xn(i),i):(Xn(i),null)}if(Xn(i),(i.flags&128)!==0)return i.lanes=o,i;if(o=u!==null,r=r!==null&&r.memoizedState!==null,o){u=i.child,m=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(m=u.alternate.memoizedState.cachePool.pool);var y=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==m&&(u.flags|=2048)}return o!==r&&o&&(i.child.flags|=8192),Ao(i,i.updateQueue),Ke(i),null;case 4:return Ye(),r===null&&xf(i.stateNode.containerInfo),Ke(i),null;case 10:return Yn(i.type),Ke(i),null;case 19:if(ee(lt),m=i.memoizedState,m===null)return Ke(i),null;if(u=(i.flags&128)!==0,y=m.rendering,y===null)if(u)Ol(m,!1);else{if(Je!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(y=wo(r),y!==null){for(i.flags|=128,Ol(m,!1),r=y.updateQueue,i.updateQueue=r,Ao(i,r),i.subtreeFlags=0,r=o,o=i.child;o!==null;)Km(o,r),o=o.sibling;return Z(lt,lt.current&1|2),i.child}r=r.sibling}m.tail!==null&&Tn()>Oo&&(i.flags|=128,u=!0,Ol(m,!1),i.lanes=4194304)}else{if(!u)if(r=wo(y),r!==null){if(i.flags|=128,u=!0,r=r.updateQueue,i.updateQueue=r,Ao(i,r),Ol(m,!0),m.tail===null&&m.tailMode==="hidden"&&!y.alternate&&!Le)return Ke(i),null}else 2*Tn()-m.renderingStartTime>Oo&&o!==536870912&&(i.flags|=128,u=!0,Ol(m,!1),i.lanes=4194304);m.isBackwards?(y.sibling=i.child,i.child=y):(r=m.last,r!==null?r.sibling=y:i.child=y,m.last=y)}return m.tail!==null?(i=m.tail,m.rendering=i,m.tail=i.sibling,m.renderingStartTime=Tn(),i.sibling=null,r=lt.current,Z(lt,u?r&1|2:r&1),i):(Ke(i),null);case 22:case 23:return Xn(i),bd(),u=i.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(o&536870912)!==0&&(i.flags&128)===0&&(Ke(i),i.subtreeFlags&6&&(i.flags|=8192)):Ke(i),o=i.updateQueue,o!==null&&Ao(i,o.retryQueue),o=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==o&&(i.flags|=2048),r!==null&&ee(bs),null;case 24:return o=null,r!==null&&(o=r.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),Yn(it),Ke(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function TN(r,i){switch(id(i),i.tag){case 1:return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return Yn(it),Ye(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 26:case 27:case 5:return Ut(i),null;case 13:if(Xn(i),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(s(340));ml()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return ee(lt),null;case 4:return Ye(),null;case 10:return Yn(i.type),null;case 22:case 23:return Xn(i),bd(),r!==null&&ee(bs),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 24:return Yn(it),null;case 25:return null;default:return null}}function S0(r,i){switch(id(i),i.tag){case 3:Yn(it),Ye();break;case 26:case 27:case 5:Ut(i);break;case 4:Ye();break;case 13:Xn(i);break;case 19:ee(lt);break;case 10:Yn(i.type);break;case 22:case 23:Xn(i),bd(),r!==null&&ee(bs);break;case 24:Yn(it)}}function Dl(r,i){try{var o=i.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var m=u.next;o=m;do{if((o.tag&r)===r){u=void 0;var y=o.create,N=o.inst;u=y(),N.destroy=u}o=o.next}while(o!==m)}}catch(C){Ie(i,i.return,C)}}function Er(r,i,o){try{var u=i.updateQueue,m=u!==null?u.lastEffect:null;if(m!==null){var y=m.next;u=y;do{if((u.tag&r)===r){var N=u.inst,C=N.destroy;if(C!==void 0){N.destroy=void 0,m=i;var A=o,_=C;try{_()}catch(F){Ie(m,A,F)}}}u=u.next}while(u!==y)}}catch(F){Ie(i,i.return,F)}}function N0(r){var i=r.updateQueue;if(i!==null){var o=r.stateNode;try{cg(i,o)}catch(u){Ie(r,r.return,u)}}}function w0(r,i,o){o.props=Ss(r.type,r.memoizedProps),o.state=r.memoizedState;try{o.componentWillUnmount()}catch(u){Ie(r,i,u)}}function Rl(r,i){try{var o=r.ref;if(o!==null){switch(r.tag){case 26:case 27:case 5:var u=r.stateNode;break;case 30:u=r.stateNode;break;default:u=r.stateNode}typeof o=="function"?r.refCleanup=o(u):o.current=u}}catch(m){Ie(r,i,m)}}function Dn(r,i){var o=r.ref,u=r.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(m){Ie(r,i,m)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(m){Ie(r,i,m)}else o.current=null}function k0(r){var i=r.type,o=r.memoizedProps,u=r.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(m){Ie(r,r.return,m)}}function Yd(r,i,o){try{var u=r.stateNode;JN(u,r.type,o,i),u[Pt]=i}catch(m){Ie(r,r.return,m)}}function C0(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Lr(r.type)||r.tag===4}function Kd(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||C0(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Lr(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Xd(r,i,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(r,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(r),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=Po));else if(u!==4&&(u===27&&Lr(r.type)&&(o=r.stateNode,i=null),r=r.child,r!==null))for(Xd(r,i,o),r=r.sibling;r!==null;)Xd(r,i,o),r=r.sibling}function To(r,i,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,i?o.insertBefore(r,i):o.appendChild(r);else if(u!==4&&(u===27&&Lr(r.type)&&(o=r.stateNode),r=r.child,r!==null))for(To(r,i,o),r=r.sibling;r!==null;)To(r,i,o),r=r.sibling}function E0(r){var i=r.stateNode,o=r.memoizedProps;try{for(var u=r.type,m=i.attributes;m.length;)i.removeAttributeNode(m[0]);vt(i,u,o),i[Ct]=r,i[Pt]=o}catch(y){Ie(r,r.return,y)}}var Zn=!1,et=!1,Jd=!1,j0=typeof WeakSet=="function"?WeakSet:Set,ut=null;function MN(r,i){if(r=r.containerInfo,Sf=Yo,r=Hm(r),Ku(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else e:{o=(o=r.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var m=u.anchorOffset,y=u.focusNode;u=u.focusOffset;try{o.nodeType,y.nodeType}catch{o=null;break e}var N=0,C=-1,A=-1,_=0,F=0,Y=r,U=null;t:for(;;){for(var I;Y!==o||m!==0&&Y.nodeType!==3||(C=N+m),Y!==y||u!==0&&Y.nodeType!==3||(A=N+u),Y.nodeType===3&&(N+=Y.nodeValue.length),(I=Y.firstChild)!==null;)U=Y,Y=I;for(;;){if(Y===r)break t;if(U===o&&++_===m&&(C=N),U===y&&++F===u&&(A=N),(I=Y.nextSibling)!==null)break;Y=U,U=Y.parentNode}Y=I}o=C===-1||A===-1?null:{start:C,end:A}}else o=null}o=o||{start:0,end:0}}else o=null;for(Nf={focusedElem:r,selectionRange:o},Yo=!1,ut=i;ut!==null;)if(i=ut,r=i.child,(i.subtreeFlags&1024)!==0&&r!==null)r.return=i,ut=r;else for(;ut!==null;){switch(i=ut,y=i.alternate,r=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&y!==null){r=void 0,o=i,m=y.memoizedProps,y=y.memoizedState,u=o.stateNode;try{var ye=Ss(o.type,m,o.elementType===o.type);r=u.getSnapshotBeforeUpdate(ye,y),u.__reactInternalSnapshotBeforeUpdate=r}catch(me){Ie(o,o.return,me)}}break;case 3:if((r&1024)!==0){if(r=i.stateNode.containerInfo,o=r.nodeType,o===9)Cf(r);else if(o===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Cf(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(s(163))}if(r=i.sibling,r!==null){r.return=i.return,ut=r;break}ut=i.return}}function A0(r,i,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:jr(r,o),u&4&&Dl(5,o);break;case 1:if(jr(r,o),u&4)if(r=o.stateNode,i===null)try{r.componentDidMount()}catch(N){Ie(o,o.return,N)}else{var m=Ss(o.type,i.memoizedProps);i=i.memoizedState;try{r.componentDidUpdate(m,i,r.__reactInternalSnapshotBeforeUpdate)}catch(N){Ie(o,o.return,N)}}u&64&&N0(o),u&512&&Rl(o,o.return);break;case 3:if(jr(r,o),u&64&&(r=o.updateQueue,r!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{cg(r,i)}catch(N){Ie(o,o.return,N)}}break;case 27:i===null&&u&4&&E0(o);case 26:case 5:jr(r,o),i===null&&u&4&&k0(o),u&512&&Rl(o,o.return);break;case 12:jr(r,o);break;case 13:jr(r,o),u&4&&O0(r,o),u&64&&(r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(o=UN.bind(null,o),rw(r,o))));break;case 22:if(u=o.memoizedState!==null||Zn,!u){i=i!==null&&i.memoizedState!==null||et,m=Zn;var y=et;Zn=u,(et=i)&&!y?Ar(r,o,(o.subtreeFlags&8772)!==0):jr(r,o),Zn=m,et=y}break;case 30:break;default:jr(r,o)}}function T0(r){var i=r.alternate;i!==null&&(r.alternate=null,T0(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&Tu(i)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var $e=null,qt=!1;function Wn(r,i,o){for(o=o.child;o!==null;)M0(r,i,o),o=o.sibling}function M0(r,i,o){if(Yt&&typeof Yt.onCommitFiberUnmount=="function")try{Yt.onCommitFiberUnmount(el,o)}catch{}switch(o.tag){case 26:et||Dn(o,i),Wn(r,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:et||Dn(o,i);var u=$e,m=qt;Lr(o.type)&&($e=o.stateNode,qt=!1),Wn(r,i,o),Vl(o.stateNode),$e=u,qt=m;break;case 5:et||Dn(o,i);case 6:if(u=$e,m=qt,$e=null,Wn(r,i,o),$e=u,qt=m,$e!==null)if(qt)try{($e.nodeType===9?$e.body:$e.nodeName==="HTML"?$e.ownerDocument.body:$e).removeChild(o.stateNode)}catch(y){Ie(o,i,y)}else try{$e.removeChild(o.stateNode)}catch(y){Ie(o,i,y)}break;case 18:$e!==null&&(qt?(r=$e,xy(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.stateNode),Jl(r)):xy($e,o.stateNode));break;case 4:u=$e,m=qt,$e=o.stateNode.containerInfo,qt=!0,Wn(r,i,o),$e=u,qt=m;break;case 0:case 11:case 14:case 15:et||Er(2,o,i),et||Er(4,o,i),Wn(r,i,o);break;case 1:et||(Dn(o,i),u=o.stateNode,typeof u.componentWillUnmount=="function"&&w0(o,i,u)),Wn(r,i,o);break;case 21:Wn(r,i,o);break;case 22:et=(u=et)||o.memoizedState!==null,Wn(r,i,o),et=u;break;default:Wn(r,i,o)}}function O0(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Jl(r)}catch(o){Ie(i,i.return,o)}}function ON(r){switch(r.tag){case 13:case 19:var i=r.stateNode;return i===null&&(i=r.stateNode=new j0),i;case 22:return r=r.stateNode,i=r._retryCache,i===null&&(i=r._retryCache=new j0),i;default:throw Error(s(435,r.tag))}}function Qd(r,i){var o=ON(r);i.forEach(function(u){var m=PN.bind(null,r,u);o.has(u)||(o.add(u),u.then(m,m))})}function Qt(r,i){var o=i.deletions;if(o!==null)for(var u=0;u<o.length;u++){var m=o[u],y=r,N=i,C=N;e:for(;C!==null;){switch(C.tag){case 27:if(Lr(C.type)){$e=C.stateNode,qt=!1;break e}break;case 5:$e=C.stateNode,qt=!1;break e;case 3:case 4:$e=C.stateNode.containerInfo,qt=!0;break e}C=C.return}if($e===null)throw Error(s(160));M0(y,N,m),$e=null,qt=!1,y=m.alternate,y!==null&&(y.return=null),m.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)D0(i,r),i=i.sibling}var Nn=null;function D0(r,i){var o=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Qt(i,r),Zt(r),u&4&&(Er(3,r,r.return),Dl(3,r),Er(5,r,r.return));break;case 1:Qt(i,r),Zt(r),u&512&&(et||o===null||Dn(o,o.return)),u&64&&Zn&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(o=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var m=Nn;if(Qt(i,r),Zt(r),u&512&&(et||o===null||Dn(o,o.return)),u&4){var y=o!==null?o.memoizedState:null;if(u=r.memoizedState,o===null)if(u===null)if(r.stateNode===null){e:{u=r.type,o=r.memoizedProps,m=m.ownerDocument||m;t:switch(u){case"title":y=m.getElementsByTagName("title")[0],(!y||y[rl]||y[Ct]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=m.createElement(u),m.head.insertBefore(y,m.querySelector("head > title"))),vt(y,u,o),y[Ct]=r,ot(y),u=y;break e;case"link":var N=Ey("link","href",m).get(u+(o.href||""));if(N){for(var C=0;C<N.length;C++)if(y=N[C],y.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&y.getAttribute("rel")===(o.rel==null?null:o.rel)&&y.getAttribute("title")===(o.title==null?null:o.title)&&y.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){N.splice(C,1);break t}}y=m.createElement(u),vt(y,u,o),m.head.appendChild(y);break;case"meta":if(N=Ey("meta","content",m).get(u+(o.content||""))){for(C=0;C<N.length;C++)if(y=N[C],y.getAttribute("content")===(o.content==null?null:""+o.content)&&y.getAttribute("name")===(o.name==null?null:o.name)&&y.getAttribute("property")===(o.property==null?null:o.property)&&y.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&y.getAttribute("charset")===(o.charSet==null?null:o.charSet)){N.splice(C,1);break t}}y=m.createElement(u),vt(y,u,o),m.head.appendChild(y);break;default:throw Error(s(468,u))}y[Ct]=r,ot(y),u=y}r.stateNode=u}else jy(m,r.type,r.stateNode);else r.stateNode=Cy(m,u,r.memoizedProps);else y!==u?(y===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):y.count--,u===null?jy(m,r.type,r.stateNode):Cy(m,u,r.memoizedProps)):u===null&&r.stateNode!==null&&Yd(r,r.memoizedProps,o.memoizedProps)}break;case 27:Qt(i,r),Zt(r),u&512&&(et||o===null||Dn(o,o.return)),o!==null&&u&4&&Yd(r,r.memoizedProps,o.memoizedProps);break;case 5:if(Qt(i,r),Zt(r),u&512&&(et||o===null||Dn(o,o.return)),r.flags&32){m=r.stateNode;try{Ws(m,"")}catch(I){Ie(r,r.return,I)}}u&4&&r.stateNode!=null&&(m=r.memoizedProps,Yd(r,m,o!==null?o.memoizedProps:m)),u&1024&&(Jd=!0);break;case 6:if(Qt(i,r),Zt(r),u&4){if(r.stateNode===null)throw Error(s(162));u=r.memoizedProps,o=r.stateNode;try{o.nodeValue=u}catch(I){Ie(r,r.return,I)}}break;case 3:if(Fo=null,m=Nn,Nn=Vo(i.containerInfo),Qt(i,r),Nn=m,Zt(r),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Jl(i.containerInfo)}catch(I){Ie(r,r.return,I)}Jd&&(Jd=!1,R0(r));break;case 4:u=Nn,Nn=Vo(r.stateNode.containerInfo),Qt(i,r),Zt(r),Nn=u;break;case 12:Qt(i,r),Zt(r);break;case 13:Qt(i,r),Zt(r),r.child.flags&8192&&r.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(rf=Tn()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Qd(r,u)));break;case 22:m=r.memoizedState!==null;var A=o!==null&&o.memoizedState!==null,_=Zn,F=et;if(Zn=_||m,et=F||A,Qt(i,r),et=F,Zn=_,Zt(r),u&8192)e:for(i=r.stateNode,i._visibility=m?i._visibility&-2:i._visibility|1,m&&(o===null||A||Zn||et||Ns(r)),o=null,i=r;;){if(i.tag===5||i.tag===26){if(o===null){A=o=i;try{if(y=A.stateNode,m)N=y.style,typeof N.setProperty=="function"?N.setProperty("display","none","important"):N.display="none";else{C=A.stateNode;var Y=A.memoizedProps.style,U=Y!=null&&Y.hasOwnProperty("display")?Y.display:null;C.style.display=U==null||typeof U=="boolean"?"":(""+U).trim()}}catch(I){Ie(A,A.return,I)}}}else if(i.tag===6){if(o===null){A=i;try{A.stateNode.nodeValue=m?"":A.memoizedProps}catch(I){Ie(A,A.return,I)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===r)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=r.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Qd(r,o))));break;case 19:Qt(i,r),Zt(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Qd(r,u)));break;case 30:break;case 21:break;default:Qt(i,r),Zt(r)}}function Zt(r){var i=r.flags;if(i&2){try{for(var o,u=r.return;u!==null;){if(C0(u)){o=u;break}u=u.return}if(o==null)throw Error(s(160));switch(o.tag){case 27:var m=o.stateNode,y=Kd(r);To(r,y,m);break;case 5:var N=o.stateNode;o.flags&32&&(Ws(N,""),o.flags&=-33);var C=Kd(r);To(r,C,N);break;case 3:case 4:var A=o.stateNode.containerInfo,_=Kd(r);Xd(r,_,A);break;default:throw Error(s(161))}}catch(F){Ie(r,r.return,F)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function R0(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var i=r;R0(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),r=r.sibling}}function jr(r,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)A0(r,i.alternate,i),i=i.sibling}function Ns(r){for(r=r.child;r!==null;){var i=r;switch(i.tag){case 0:case 11:case 14:case 15:Er(4,i,i.return),Ns(i);break;case 1:Dn(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&w0(i,i.return,o),Ns(i);break;case 27:Vl(i.stateNode);case 26:case 5:Dn(i,i.return),Ns(i);break;case 22:i.memoizedState===null&&Ns(i);break;case 30:Ns(i);break;default:Ns(i)}r=r.sibling}}function Ar(r,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,m=r,y=i,N=y.flags;switch(y.tag){case 0:case 11:case 15:Ar(m,y,o),Dl(4,y);break;case 1:if(Ar(m,y,o),u=y,m=u.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(_){Ie(u,u.return,_)}if(u=y,m=u.updateQueue,m!==null){var C=u.stateNode;try{var A=m.shared.hiddenCallbacks;if(A!==null)for(m.shared.hiddenCallbacks=null,m=0;m<A.length;m++)og(A[m],C)}catch(_){Ie(u,u.return,_)}}o&&N&64&&N0(y),Rl(y,y.return);break;case 27:E0(y);case 26:case 5:Ar(m,y,o),o&&u===null&&N&4&&k0(y),Rl(y,y.return);break;case 12:Ar(m,y,o);break;case 13:Ar(m,y,o),o&&N&4&&O0(m,y);break;case 22:y.memoizedState===null&&Ar(m,y,o),Rl(y,y.return);break;case 30:break;default:Ar(m,y,o)}i=i.sibling}}function Zd(r,i){var o=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),r=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==o&&(r!=null&&r.refCount++,o!=null&&xl(o))}function Wd(r,i){r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&xl(r))}function Rn(r,i,o,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)L0(r,i,o,u),i=i.sibling}function L0(r,i,o,u){var m=i.flags;switch(i.tag){case 0:case 11:case 15:Rn(r,i,o,u),m&2048&&Dl(9,i);break;case 1:Rn(r,i,o,u);break;case 3:Rn(r,i,o,u),m&2048&&(r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&xl(r)));break;case 12:if(m&2048){Rn(r,i,o,u),r=i.stateNode;try{var y=i.memoizedProps,N=y.id,C=y.onPostCommit;typeof C=="function"&&C(N,i.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(A){Ie(i,i.return,A)}}else Rn(r,i,o,u);break;case 13:Rn(r,i,o,u);break;case 23:break;case 22:y=i.stateNode,N=i.alternate,i.memoizedState!==null?y._visibility&2?Rn(r,i,o,u):Ll(r,i):y._visibility&2?Rn(r,i,o,u):(y._visibility|=2,xi(r,i,o,u,(i.subtreeFlags&10256)!==0)),m&2048&&Zd(N,i);break;case 24:Rn(r,i,o,u),m&2048&&Wd(i.alternate,i);break;default:Rn(r,i,o,u)}}function xi(r,i,o,u,m){for(m=m&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var y=r,N=i,C=o,A=u,_=N.flags;switch(N.tag){case 0:case 11:case 15:xi(y,N,C,A,m),Dl(8,N);break;case 23:break;case 22:var F=N.stateNode;N.memoizedState!==null?F._visibility&2?xi(y,N,C,A,m):Ll(y,N):(F._visibility|=2,xi(y,N,C,A,m)),m&&_&2048&&Zd(N.alternate,N);break;case 24:xi(y,N,C,A,m),m&&_&2048&&Wd(N.alternate,N);break;default:xi(y,N,C,A,m)}i=i.sibling}}function Ll(r,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=r,u=i,m=u.flags;switch(u.tag){case 22:Ll(o,u),m&2048&&Zd(u.alternate,u);break;case 24:Ll(o,u),m&2048&&Wd(u.alternate,u);break;default:Ll(o,u)}i=i.sibling}}var zl=8192;function bi(r){if(r.subtreeFlags&zl)for(r=r.child;r!==null;)z0(r),r=r.sibling}function z0(r){switch(r.tag){case 26:bi(r),r.flags&zl&&r.memoizedState!==null&&gw(Nn,r.memoizedState,r.memoizedProps);break;case 5:bi(r);break;case 3:case 4:var i=Nn;Nn=Vo(r.stateNode.containerInfo),bi(r),Nn=i;break;case 22:r.memoizedState===null&&(i=r.alternate,i!==null&&i.memoizedState!==null?(i=zl,zl=16777216,bi(r),zl=i):bi(r));break;default:bi(r)}}function B0(r){var i=r.alternate;if(i!==null&&(r=i.child,r!==null)){i.child=null;do i=r.sibling,r.sibling=null,r=i;while(r!==null)}}function Bl(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];ut=u,H0(u,r)}B0(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)_0(r),r=r.sibling}function _0(r){switch(r.tag){case 0:case 11:case 15:Bl(r),r.flags&2048&&Er(9,r,r.return);break;case 3:Bl(r);break;case 12:Bl(r);break;case 22:var i=r.stateNode;r.memoizedState!==null&&i._visibility&2&&(r.return===null||r.return.tag!==13)?(i._visibility&=-3,Mo(r)):Bl(r);break;default:Bl(r)}}function Mo(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];ut=u,H0(u,r)}B0(r)}for(r=r.child;r!==null;){switch(i=r,i.tag){case 0:case 11:case 15:Er(8,i,i.return),Mo(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,Mo(i));break;default:Mo(i)}r=r.sibling}}function H0(r,i){for(;ut!==null;){var o=ut;switch(o.tag){case 0:case 11:case 15:Er(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:xl(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,ut=u;else e:for(o=r;ut!==null;){u=ut;var m=u.sibling,y=u.return;if(T0(u),u===o){ut=null;break e}if(m!==null){m.return=y,ut=m;break e}ut=y}}}var DN={getCacheForType:function(r){var i=Et(it),o=i.data.get(r);return o===void 0&&(o=r(),i.data.set(r,o)),o}},RN=typeof WeakMap=="function"?WeakMap:Map,ze=0,qe=null,je=null,De=0,Be=0,Wt=null,Tr=!1,vi=!1,ef=!1,er=0,Je=0,Mr=0,ws=0,tf=0,hn=0,Si=0,_l=null,Ft=null,nf=!1,rf=0,Oo=1/0,Do=null,Or=null,bt=0,Dr=null,Ni=null,wi=0,sf=0,lf=null,U0=null,Hl=0,af=null;function en(){if((ze&2)!==0&&De!==0)return De&-De;if(V.T!==null){var r=ui;return r!==0?r:pf()}return tm()}function P0(){hn===0&&(hn=(De&536870912)===0||Le?Qp():536870912);var r=fn.current;return r!==null&&(r.flags|=32),hn}function tn(r,i,o){(r===qe&&(Be===2||Be===9)||r.cancelPendingCommit!==null)&&(ki(r,0),Rr(r,De,hn,!1)),nl(r,o),((ze&2)===0||r!==qe)&&(r===qe&&((ze&2)===0&&(ws|=o),Je===4&&Rr(r,De,hn,!1)),Ln(r))}function I0(r,i,o){if((ze&6)!==0)throw Error(s(327));var u=!o&&(i&124)===0&&(i&r.expiredLanes)===0||tl(r,i),m=u?BN(r,i):uf(r,i,!0),y=u;do{if(m===0){vi&&!u&&Rr(r,i,0,!1);break}else{if(o=r.current.alternate,y&&!LN(o)){m=uf(r,i,!1),y=!1;continue}if(m===2){if(y=i,r.errorRecoveryDisabledLanes&y)var N=0;else N=r.pendingLanes&-536870913,N=N!==0?N:N&536870912?536870912:0;if(N!==0){i=N;e:{var C=r;m=_l;var A=C.current.memoizedState.isDehydrated;if(A&&(ki(C,N).flags|=256),N=uf(C,N,!1),N!==2){if(ef&&!A){C.errorRecoveryDisabledLanes|=y,ws|=y,m=4;break e}y=Ft,Ft=m,y!==null&&(Ft===null?Ft=y:Ft.push.apply(Ft,y))}m=N}if(y=!1,m!==2)continue}}if(m===1){ki(r,0),Rr(r,i,0,!0);break}e:{switch(u=r,y=m,y){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Rr(u,i,hn,!Tr);break e;case 2:Ft=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(m=rf+300-Tn(),10<m)){if(Rr(u,i,hn,!Tr),Va(u,0,!0)!==0)break e;u.timeoutHandle=gy(V0.bind(null,u,o,Ft,Do,nf,i,hn,ws,Si,Tr,y,2,-0,0),m);break e}V0(u,o,Ft,Do,nf,i,hn,ws,Si,Tr,y,0,-0,0)}}break}while(!0);Ln(r)}function V0(r,i,o,u,m,y,N,C,A,_,F,Y,U,I){if(r.timeoutHandle=-1,Y=i.subtreeFlags,(Y&8192||(Y&16785408)===16785408)&&($l={stylesheets:null,count:0,unsuspend:mw},z0(i),Y=yw(),Y!==null)){r.cancelPendingCommit=Y(X0.bind(null,r,i,y,o,u,m,N,C,A,F,1,U,I)),Rr(r,y,N,!_);return}X0(r,i,y,o,u,m,N,C,A)}function LN(r){for(var i=r;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var m=o[u],y=m.getSnapshot;m=m.value;try{if(!Xt(y(),m))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Rr(r,i,o,u){i&=~tf,i&=~ws,r.suspendedLanes|=i,r.pingedLanes&=~i,u&&(r.warmLanes|=i),u=r.expirationTimes;for(var m=i;0<m;){var y=31-Kt(m),N=1<<y;u[y]=-1,m&=~N}o!==0&&Wp(r,o,i)}function Ro(){return(ze&6)===0?(Ul(0),!1):!0}function of(){if(je!==null){if(Be===0)var r=je.return;else r=je,Gn=ys=null,kd(r),gi=null,Tl=0,r=je;for(;r!==null;)S0(r.alternate,r),r=r.return;je=null}}function ki(r,i){var o=r.timeoutHandle;o!==-1&&(r.timeoutHandle=-1,ZN(o)),o=r.cancelPendingCommit,o!==null&&(r.cancelPendingCommit=null,o()),of(),qe=r,je=o=qn(r.current,null),De=i,Be=0,Wt=null,Tr=!1,vi=tl(r,i),ef=!1,Si=hn=tf=ws=Mr=Je=0,Ft=_l=null,nf=!1,(i&8)!==0&&(i|=i&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=i;0<u;){var m=31-Kt(u),y=1<<m;i|=r[m],u&=~y}return er=i,eo(),o}function q0(r,i){ke=null,V.H=vo,i===vl||i===co?(i=lg(),Be=3):i===rg?(i=lg(),Be=4):Be=i===a0?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Wt=i,je===null&&(Je=1,Co(r,on(i,r.current)))}function F0(){var r=V.H;return V.H=vo,r===null?vo:r}function $0(){var r=V.A;return V.A=DN,r}function cf(){Je=4,Tr||(De&4194048)!==De&&fn.current!==null||(vi=!0),(Mr&134217727)===0&&(ws&134217727)===0||qe===null||Rr(qe,De,hn,!1)}function uf(r,i,o){var u=ze;ze|=2;var m=F0(),y=$0();(qe!==r||De!==i)&&(Do=null,ki(r,i)),i=!1;var N=Je;e:do try{if(Be!==0&&je!==null){var C=je,A=Wt;switch(Be){case 8:of(),N=6;break e;case 3:case 2:case 9:case 6:fn.current===null&&(i=!0);var _=Be;if(Be=0,Wt=null,Ci(r,C,A,_),o&&vi){N=0;break e}break;default:_=Be,Be=0,Wt=null,Ci(r,C,A,_)}}zN(),N=Je;break}catch(F){q0(r,F)}while(!0);return i&&r.shellSuspendCounter++,Gn=ys=null,ze=u,V.H=m,V.A=y,je===null&&(qe=null,De=0,eo()),N}function zN(){for(;je!==null;)G0(je)}function BN(r,i){var o=ze;ze|=2;var u=F0(),m=$0();qe!==r||De!==i?(Do=null,Oo=Tn()+500,ki(r,i)):vi=tl(r,i);e:do try{if(Be!==0&&je!==null){i=je;var y=Wt;t:switch(Be){case 1:Be=0,Wt=null,Ci(r,i,y,1);break;case 2:case 9:if(sg(y)){Be=0,Wt=null,Y0(i);break}i=function(){Be!==2&&Be!==9||qe!==r||(Be=7),Ln(r)},y.then(i,i);break e;case 3:Be=7;break e;case 4:Be=5;break e;case 7:sg(y)?(Be=0,Wt=null,Y0(i)):(Be=0,Wt=null,Ci(r,i,y,7));break;case 5:var N=null;switch(je.tag){case 26:N=je.memoizedState;case 5:case 27:var C=je;if(!N||Ay(N)){Be=0,Wt=null;var A=C.sibling;if(A!==null)je=A;else{var _=C.return;_!==null?(je=_,Lo(_)):je=null}break t}}Be=0,Wt=null,Ci(r,i,y,5);break;case 6:Be=0,Wt=null,Ci(r,i,y,6);break;case 8:of(),Je=6;break e;default:throw Error(s(462))}}_N();break}catch(F){q0(r,F)}while(!0);return Gn=ys=null,V.H=u,V.A=m,ze=o,je!==null?0:(qe=null,De=0,eo(),Je)}function _N(){for(;je!==null&&!iS();)G0(je)}function G0(r){var i=b0(r.alternate,r,er);r.memoizedProps=r.pendingProps,i===null?Lo(r):je=i}function Y0(r){var i=r,o=i.alternate;switch(i.tag){case 15:case 0:i=h0(o,i,i.pendingProps,i.type,void 0,De);break;case 11:i=h0(o,i,i.pendingProps,i.type.render,i.ref,De);break;case 5:kd(i);default:S0(o,i),i=je=Km(i,er),i=b0(o,i,er)}r.memoizedProps=r.pendingProps,i===null?Lo(r):je=i}function Ci(r,i,o,u){Gn=ys=null,kd(i),gi=null,Tl=0;var m=i.return;try{if(EN(r,m,i,o,De)){Je=1,Co(r,on(o,r.current)),je=null;return}}catch(y){if(m!==null)throw je=m,y;Je=1,Co(r,on(o,r.current)),je=null;return}i.flags&32768?(Le||u===1?r=!0:vi||(De&536870912)!==0?r=!1:(Tr=r=!0,(u===2||u===9||u===3||u===6)&&(u=fn.current,u!==null&&u.tag===13&&(u.flags|=16384))),K0(i,r)):Lo(i)}function Lo(r){var i=r;do{if((i.flags&32768)!==0){K0(i,Tr);return}r=i.return;var o=AN(i.alternate,i,er);if(o!==null){je=o;return}if(i=i.sibling,i!==null){je=i;return}je=i=r}while(i!==null);Je===0&&(Je=5)}function K0(r,i){do{var o=TN(r.alternate,r);if(o!==null){o.flags&=32767,je=o;return}if(o=r.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(r=r.sibling,r!==null)){je=r;return}je=r=o}while(r!==null);Je=6,je=null}function X0(r,i,o,u,m,y,N,C,A){r.cancelPendingCommit=null;do zo();while(bt!==0);if((ze&6)!==0)throw Error(s(327));if(i!==null){if(i===r.current)throw Error(s(177));if(y=i.lanes|i.childLanes,y|=Wu,mS(r,o,y,N,C,A),r===qe&&(je=qe=null,De=0),Ni=i,Dr=r,wi=o,sf=y,lf=m,U0=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,IN(Ua,function(){return ey(),null})):(r.callbackNode=null,r.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=V.T,V.T=null,m=W.p,W.p=2,N=ze,ze|=4;try{MN(r,i,o)}finally{ze=N,W.p=m,V.T=u}}bt=1,J0(),Q0(),Z0()}}function J0(){if(bt===1){bt=0;var r=Dr,i=Ni,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=V.T,V.T=null;var u=W.p;W.p=2;var m=ze;ze|=4;try{D0(i,r);var y=Nf,N=Hm(r.containerInfo),C=y.focusedElem,A=y.selectionRange;if(N!==C&&C&&C.ownerDocument&&_m(C.ownerDocument.documentElement,C)){if(A!==null&&Ku(C)){var _=A.start,F=A.end;if(F===void 0&&(F=_),"selectionStart"in C)C.selectionStart=_,C.selectionEnd=Math.min(F,C.value.length);else{var Y=C.ownerDocument||document,U=Y&&Y.defaultView||window;if(U.getSelection){var I=U.getSelection(),ye=C.textContent.length,me=Math.min(A.start,ye),Ue=A.end===void 0?me:Math.min(A.end,ye);!I.extend&&me>Ue&&(N=Ue,Ue=me,me=N);var L=Bm(C,me),M=Bm(C,Ue);if(L&&M&&(I.rangeCount!==1||I.anchorNode!==L.node||I.anchorOffset!==L.offset||I.focusNode!==M.node||I.focusOffset!==M.offset)){var B=Y.createRange();B.setStart(L.node,L.offset),I.removeAllRanges(),me>Ue?(I.addRange(B),I.extend(M.node,M.offset)):(B.setEnd(M.node,M.offset),I.addRange(B))}}}}for(Y=[],I=C;I=I.parentNode;)I.nodeType===1&&Y.push({element:I,left:I.scrollLeft,top:I.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<Y.length;C++){var $=Y[C];$.element.scrollLeft=$.left,$.element.scrollTop=$.top}}Yo=!!Sf,Nf=Sf=null}finally{ze=m,W.p=u,V.T=o}}r.current=i,bt=2}}function Q0(){if(bt===2){bt=0;var r=Dr,i=Ni,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=V.T,V.T=null;var u=W.p;W.p=2;var m=ze;ze|=4;try{A0(r,i.alternate,i)}finally{ze=m,W.p=u,V.T=o}}bt=3}}function Z0(){if(bt===4||bt===3){bt=0,lS();var r=Dr,i=Ni,o=wi,u=U0;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?bt=5:(bt=0,Ni=Dr=null,W0(r,r.pendingLanes));var m=r.pendingLanes;if(m===0&&(Or=null),ju(o),i=i.stateNode,Yt&&typeof Yt.onCommitFiberRoot=="function")try{Yt.onCommitFiberRoot(el,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=V.T,m=W.p,W.p=2,V.T=null;try{for(var y=r.onRecoverableError,N=0;N<u.length;N++){var C=u[N];y(C.value,{componentStack:C.stack})}}finally{V.T=i,W.p=m}}(wi&3)!==0&&zo(),Ln(r),m=r.pendingLanes,(o&4194090)!==0&&(m&42)!==0?r===af?Hl++:(Hl=0,af=r):Hl=0,Ul(0)}}function W0(r,i){(r.pooledCacheLanes&=i)===0&&(i=r.pooledCache,i!=null&&(r.pooledCache=null,xl(i)))}function zo(r){return J0(),Q0(),Z0(),ey()}function ey(){if(bt!==5)return!1;var r=Dr,i=sf;sf=0;var o=ju(wi),u=V.T,m=W.p;try{W.p=32>o?32:o,V.T=null,o=lf,lf=null;var y=Dr,N=wi;if(bt=0,Ni=Dr=null,wi=0,(ze&6)!==0)throw Error(s(331));var C=ze;if(ze|=4,_0(y.current),L0(y,y.current,N,o),ze=C,Ul(0,!1),Yt&&typeof Yt.onPostCommitFiberRoot=="function")try{Yt.onPostCommitFiberRoot(el,y)}catch{}return!0}finally{W.p=m,V.T=u,W0(r,i)}}function ty(r,i,o){i=on(o,i),i=Hd(r.stateNode,i,2),r=Nr(r,i,2),r!==null&&(nl(r,2),Ln(r))}function Ie(r,i,o){if(r.tag===3)ty(r,r,o);else for(;i!==null;){if(i.tag===3){ty(i,r,o);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Or===null||!Or.has(u))){r=on(o,r),o=i0(2),u=Nr(i,o,2),u!==null&&(l0(o,u,i,r),nl(u,2),Ln(u));break}}i=i.return}}function df(r,i,o){var u=r.pingCache;if(u===null){u=r.pingCache=new RN;var m=new Set;u.set(i,m)}else m=u.get(i),m===void 0&&(m=new Set,u.set(i,m));m.has(o)||(ef=!0,m.add(o),r=HN.bind(null,r,i,o),i.then(r,r))}function HN(r,i,o){var u=r.pingCache;u!==null&&u.delete(i),r.pingedLanes|=r.suspendedLanes&o,r.warmLanes&=~o,qe===r&&(De&o)===o&&(Je===4||Je===3&&(De&62914560)===De&&300>Tn()-rf?(ze&2)===0&&ki(r,0):tf|=o,Si===De&&(Si=0)),Ln(r)}function ny(r,i){i===0&&(i=Zp()),r=li(r,i),r!==null&&(nl(r,i),Ln(r))}function UN(r){var i=r.memoizedState,o=0;i!==null&&(o=i.retryLane),ny(r,o)}function PN(r,i){var o=0;switch(r.tag){case 13:var u=r.stateNode,m=r.memoizedState;m!==null&&(o=m.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(i),ny(r,o)}function IN(r,i){return $s(r,i)}var Bo=null,Ei=null,ff=!1,_o=!1,hf=!1,ks=0;function Ln(r){r!==Ei&&r.next===null&&(Ei===null?Bo=Ei=r:Ei=Ei.next=r),_o=!0,ff||(ff=!0,qN())}function Ul(r,i){if(!hf&&_o){hf=!0;do for(var o=!1,u=Bo;u!==null;){if(r!==0){var m=u.pendingLanes;if(m===0)var y=0;else{var N=u.suspendedLanes,C=u.pingedLanes;y=(1<<31-Kt(42|r)+1)-1,y&=m&~(N&~C),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(o=!0,ly(u,y))}else y=De,y=Va(u,u===qe?y:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(y&3)===0||tl(u,y)||(o=!0,ly(u,y));u=u.next}while(o);hf=!1}}function VN(){ry()}function ry(){_o=ff=!1;var r=0;ks!==0&&(QN()&&(r=ks),ks=0);for(var i=Tn(),o=null,u=Bo;u!==null;){var m=u.next,y=sy(u,i);y===0?(u.next=null,o===null?Bo=m:o.next=m,m===null&&(Ei=o)):(o=u,(r!==0||(y&3)!==0)&&(_o=!0)),u=m}Ul(r)}function sy(r,i){for(var o=r.suspendedLanes,u=r.pingedLanes,m=r.expirationTimes,y=r.pendingLanes&-62914561;0<y;){var N=31-Kt(y),C=1<<N,A=m[N];A===-1?((C&o)===0||(C&u)!==0)&&(m[N]=pS(C,i)):A<=i&&(r.expiredLanes|=C),y&=~C}if(i=qe,o=De,o=Va(r,r===i?o:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u=r.callbackNode,o===0||r===i&&(Be===2||Be===9)||r.cancelPendingCommit!==null)return u!==null&&u!==null&&Dt(u),r.callbackNode=null,r.callbackPriority=0;if((o&3)===0||tl(r,o)){if(i=o&-o,i===r.callbackPriority)return i;switch(u!==null&&Dt(u),ju(o)){case 2:case 8:o=Xp;break;case 32:o=Ua;break;case 268435456:o=Jp;break;default:o=Ua}return u=iy.bind(null,r),o=$s(o,u),r.callbackPriority=i,r.callbackNode=o,i}return u!==null&&u!==null&&Dt(u),r.callbackPriority=2,r.callbackNode=null,2}function iy(r,i){if(bt!==0&&bt!==5)return r.callbackNode=null,r.callbackPriority=0,null;var o=r.callbackNode;if(zo()&&r.callbackNode!==o)return null;var u=De;return u=Va(r,r===qe?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u===0?null:(I0(r,u,i),sy(r,Tn()),r.callbackNode!=null&&r.callbackNode===o?iy.bind(null,r):null)}function ly(r,i){if(zo())return null;I0(r,i,!0)}function qN(){WN(function(){(ze&6)!==0?$s(Kp,VN):ry()})}function pf(){return ks===0&&(ks=Qp()),ks}function ay(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Ya(""+r)}function oy(r,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,r.id&&o.setAttribute("form",r.id),i.parentNode.insertBefore(o,i),r=new FormData(r),o.parentNode.removeChild(o),r}function FN(r,i,o,u,m){if(i==="submit"&&o&&o.stateNode===m){var y=ay((m[Pt]||null).action),N=u.submitter;N&&(i=(i=N[Pt]||null)?ay(i.formAction):N.getAttribute("formAction"),i!==null&&(y=i,N=null));var C=new Qa("action","action",null,u,m);r.push({event:C,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(ks!==0){var A=N?oy(m,N):new FormData(m);Rd(o,{pending:!0,data:A,method:m.method,action:y},null,A)}}else typeof y=="function"&&(C.preventDefault(),A=N?oy(m,N):new FormData(m),Rd(o,{pending:!0,data:A,method:m.method,action:y},y,A))},currentTarget:m}]})}}for(var mf=0;mf<Zu.length;mf++){var gf=Zu[mf],$N=gf.toLowerCase(),GN=gf[0].toUpperCase()+gf.slice(1);Sn($N,"on"+GN)}Sn(Im,"onAnimationEnd"),Sn(Vm,"onAnimationIteration"),Sn(qm,"onAnimationStart"),Sn("dblclick","onDoubleClick"),Sn("focusin","onFocus"),Sn("focusout","onBlur"),Sn(cN,"onTransitionRun"),Sn(uN,"onTransitionStart"),Sn(dN,"onTransitionCancel"),Sn(Fm,"onTransitionEnd"),Js("onMouseEnter",["mouseout","mouseover"]),Js("onMouseLeave",["mouseout","mouseover"]),Js("onPointerEnter",["pointerout","pointerover"]),Js("onPointerLeave",["pointerout","pointerover"]),as("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),as("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),as("onBeforeInput",["compositionend","keypress","textInput","paste"]),as("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),as("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),as("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),YN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Pl));function cy(r,i){i=(i&4)!==0;for(var o=0;o<r.length;o++){var u=r[o],m=u.event;u=u.listeners;e:{var y=void 0;if(i)for(var N=u.length-1;0<=N;N--){var C=u[N],A=C.instance,_=C.currentTarget;if(C=C.listener,A!==y&&m.isPropagationStopped())break e;y=C,m.currentTarget=_;try{y(m)}catch(F){ko(F)}m.currentTarget=null,y=A}else for(N=0;N<u.length;N++){if(C=u[N],A=C.instance,_=C.currentTarget,C=C.listener,A!==y&&m.isPropagationStopped())break e;y=C,m.currentTarget=_;try{y(m)}catch(F){ko(F)}m.currentTarget=null,y=A}}}}function Ae(r,i){var o=i[Au];o===void 0&&(o=i[Au]=new Set);var u=r+"__bubble";o.has(u)||(uy(i,r,2,!1),o.add(u))}function yf(r,i,o){var u=0;i&&(u|=4),uy(o,r,u,i)}var Ho="_reactListening"+Math.random().toString(36).slice(2);function xf(r){if(!r[Ho]){r[Ho]=!0,rm.forEach(function(o){o!=="selectionchange"&&(YN.has(o)||yf(o,!1,r),yf(o,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[Ho]||(i[Ho]=!0,yf("selectionchange",!1,i))}}function uy(r,i,o,u){switch(Ly(i)){case 2:var m=vw;break;case 8:m=Sw;break;default:m=Df}o=m.bind(null,i,o,r),m=void 0,!Uu||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(m=!0),u?m!==void 0?r.addEventListener(i,o,{capture:!0,passive:m}):r.addEventListener(i,o,!0):m!==void 0?r.addEventListener(i,o,{passive:m}):r.addEventListener(i,o,!1)}function bf(r,i,o,u,m){var y=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var N=u.tag;if(N===3||N===4){var C=u.stateNode.containerInfo;if(C===m)break;if(N===4)for(N=u.return;N!==null;){var A=N.tag;if((A===3||A===4)&&N.stateNode.containerInfo===m)return;N=N.return}for(;C!==null;){if(N=Ys(C),N===null)return;if(A=N.tag,A===5||A===6||A===26||A===27){u=y=N;continue e}C=C.parentNode}}u=u.return}ym(function(){var _=y,F=_u(o),Y=[];e:{var U=$m.get(r);if(U!==void 0){var I=Qa,ye=r;switch(r){case"keypress":if(Xa(o)===0)break e;case"keydown":case"keyup":I=IS;break;case"focusin":ye="focus",I=qu;break;case"focusout":ye="blur",I=qu;break;case"beforeblur":case"afterblur":I=qu;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":I=vm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":I=TS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":I=FS;break;case Im:case Vm:case qm:I=DS;break;case Fm:I=GS;break;case"scroll":case"scrollend":I=jS;break;case"wheel":I=KS;break;case"copy":case"cut":case"paste":I=LS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":I=Nm;break;case"toggle":case"beforetoggle":I=JS}var me=(i&4)!==0,Ue=!me&&(r==="scroll"||r==="scrollend"),L=me?U!==null?U+"Capture":null:U;me=[];for(var M=_,B;M!==null;){var $=M;if(B=$.stateNode,$=$.tag,$!==5&&$!==26&&$!==27||B===null||L===null||($=il(M,L),$!=null&&me.push(Il(M,$,B))),Ue)break;M=M.return}0<me.length&&(U=new I(U,ye,null,o,F),Y.push({event:U,listeners:me}))}}if((i&7)===0){e:{if(U=r==="mouseover"||r==="pointerover",I=r==="mouseout"||r==="pointerout",U&&o!==Bu&&(ye=o.relatedTarget||o.fromElement)&&(Ys(ye)||ye[Gs]))break e;if((I||U)&&(U=F.window===F?F:(U=F.ownerDocument)?U.defaultView||U.parentWindow:window,I?(ye=o.relatedTarget||o.toElement,I=_,ye=ye?Ys(ye):null,ye!==null&&(Ue=a(ye),me=ye.tag,ye!==Ue||me!==5&&me!==27&&me!==6)&&(ye=null)):(I=null,ye=_),I!==ye)){if(me=vm,$="onMouseLeave",L="onMouseEnter",M="mouse",(r==="pointerout"||r==="pointerover")&&(me=Nm,$="onPointerLeave",L="onPointerEnter",M="pointer"),Ue=I==null?U:sl(I),B=ye==null?U:sl(ye),U=new me($,M+"leave",I,o,F),U.target=Ue,U.relatedTarget=B,$=null,Ys(F)===_&&(me=new me(L,M+"enter",ye,o,F),me.target=B,me.relatedTarget=Ue,$=me),Ue=$,I&&ye)t:{for(me=I,L=ye,M=0,B=me;B;B=ji(B))M++;for(B=0,$=L;$;$=ji($))B++;for(;0<M-B;)me=ji(me),M--;for(;0<B-M;)L=ji(L),B--;for(;M--;){if(me===L||L!==null&&me===L.alternate)break t;me=ji(me),L=ji(L)}me=null}else me=null;I!==null&&dy(Y,U,I,me,!1),ye!==null&&Ue!==null&&dy(Y,Ue,ye,me,!0)}}e:{if(U=_?sl(_):window,I=U.nodeName&&U.nodeName.toLowerCase(),I==="select"||I==="input"&&U.type==="file")var ae=Mm;else if(Am(U))if(Om)ae=lN;else{ae=sN;var Ee=rN}else I=U.nodeName,!I||I.toLowerCase()!=="input"||U.type!=="checkbox"&&U.type!=="radio"?_&&zu(_.elementType)&&(ae=Mm):ae=iN;if(ae&&(ae=ae(r,_))){Tm(Y,ae,o,F);break e}Ee&&Ee(r,U,_),r==="focusout"&&_&&U.type==="number"&&_.memoizedProps.value!=null&&Lu(U,"number",U.value)}switch(Ee=_?sl(_):window,r){case"focusin":(Am(Ee)||Ee.contentEditable==="true")&&(ri=Ee,Xu=_,hl=null);break;case"focusout":hl=Xu=ri=null;break;case"mousedown":Ju=!0;break;case"contextmenu":case"mouseup":case"dragend":Ju=!1,Um(Y,o,F);break;case"selectionchange":if(oN)break;case"keydown":case"keyup":Um(Y,o,F)}var ce;if($u)e:{switch(r){case"compositionstart":var ge="onCompositionStart";break e;case"compositionend":ge="onCompositionEnd";break e;case"compositionupdate":ge="onCompositionUpdate";break e}ge=void 0}else ni?Em(r,o)&&(ge="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(ge="onCompositionStart");ge&&(wm&&o.locale!=="ko"&&(ni||ge!=="onCompositionStart"?ge==="onCompositionEnd"&&ni&&(ce=xm()):(xr=F,Pu="value"in xr?xr.value:xr.textContent,ni=!0)),Ee=Uo(_,ge),0<Ee.length&&(ge=new Sm(ge,r,null,o,F),Y.push({event:ge,listeners:Ee}),ce?ge.data=ce:(ce=jm(o),ce!==null&&(ge.data=ce)))),(ce=ZS?WS(r,o):eN(r,o))&&(ge=Uo(_,"onBeforeInput"),0<ge.length&&(Ee=new Sm("onBeforeInput","beforeinput",null,o,F),Y.push({event:Ee,listeners:ge}),Ee.data=ce)),FN(Y,r,_,o,F)}cy(Y,i)})}function Il(r,i,o){return{instance:r,listener:i,currentTarget:o}}function Uo(r,i){for(var o=i+"Capture",u=[];r!==null;){var m=r,y=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||y===null||(m=il(r,o),m!=null&&u.unshift(Il(r,m,y)),m=il(r,i),m!=null&&u.push(Il(r,m,y))),r.tag===3)return u;r=r.return}return[]}function ji(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function dy(r,i,o,u,m){for(var y=i._reactName,N=[];o!==null&&o!==u;){var C=o,A=C.alternate,_=C.stateNode;if(C=C.tag,A!==null&&A===u)break;C!==5&&C!==26&&C!==27||_===null||(A=_,m?(_=il(o,y),_!=null&&N.unshift(Il(o,_,A))):m||(_=il(o,y),_!=null&&N.push(Il(o,_,A)))),o=o.return}N.length!==0&&r.push({event:i,listeners:N})}var KN=/\r\n?/g,XN=/\u0000|\uFFFD/g;function fy(r){return(typeof r=="string"?r:""+r).replace(KN,`
`).replace(XN,"")}function hy(r,i){return i=fy(i),fy(r)===i}function Po(){}function He(r,i,o,u,m,y){switch(o){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||Ws(r,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&Ws(r,""+u);break;case"className":Fa(r,"class",u);break;case"tabIndex":Fa(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Fa(r,o,u);break;case"style":mm(r,u,y);break;case"data":if(i!=="object"){Fa(r,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||o!=="href")){r.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=Ya(""+u),r.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(o==="formAction"?(i!=="input"&&He(r,i,"name",m.name,m,null),He(r,i,"formEncType",m.formEncType,m,null),He(r,i,"formMethod",m.formMethod,m,null),He(r,i,"formTarget",m.formTarget,m,null)):(He(r,i,"encType",m.encType,m,null),He(r,i,"method",m.method,m,null),He(r,i,"target",m.target,m,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=Ya(""+u),r.setAttribute(o,u);break;case"onClick":u!=null&&(r.onclick=Po);break;case"onScroll":u!=null&&Ae("scroll",r);break;case"onScrollEnd":u!=null&&Ae("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(o=u.__html,o!=null){if(m.children!=null)throw Error(s(60));r.innerHTML=o}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}o=Ya(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""+u):r.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""):r.removeAttribute(o);break;case"capture":case"download":u===!0?r.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,u):r.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(o,u):r.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(o):r.setAttribute(o,u);break;case"popover":Ae("beforetoggle",r),Ae("toggle",r),qa(r,"popover",u);break;case"xlinkActuate":In(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":In(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":In(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":In(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":In(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":In(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":In(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":In(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":In(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":qa(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=CS.get(o)||o,qa(r,o,u))}}function vf(r,i,o,u,m,y){switch(o){case"style":mm(r,u,y);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(o=u.__html,o!=null){if(m.children!=null)throw Error(s(60));r.innerHTML=o}}break;case"children":typeof u=="string"?Ws(r,u):(typeof u=="number"||typeof u=="bigint")&&Ws(r,""+u);break;case"onScroll":u!=null&&Ae("scroll",r);break;case"onScrollEnd":u!=null&&Ae("scrollend",r);break;case"onClick":u!=null&&(r.onclick=Po);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!sm.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(m=o.endsWith("Capture"),i=o.slice(2,m?o.length-7:void 0),y=r[Pt]||null,y=y!=null?y[o]:null,typeof y=="function"&&r.removeEventListener(i,y,m),typeof u=="function")){typeof y!="function"&&y!==null&&(o in r?r[o]=null:r.hasAttribute(o)&&r.removeAttribute(o)),r.addEventListener(i,u,m);break e}o in r?r[o]=u:u===!0?r.setAttribute(o,""):qa(r,o,u)}}}function vt(r,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ae("error",r),Ae("load",r);var u=!1,m=!1,y;for(y in o)if(o.hasOwnProperty(y)){var N=o[y];if(N!=null)switch(y){case"src":u=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:He(r,i,y,N,o,null)}}m&&He(r,i,"srcSet",o.srcSet,o,null),u&&He(r,i,"src",o.src,o,null);return;case"input":Ae("invalid",r);var C=y=N=m=null,A=null,_=null;for(u in o)if(o.hasOwnProperty(u)){var F=o[u];if(F!=null)switch(u){case"name":m=F;break;case"type":N=F;break;case"checked":A=F;break;case"defaultChecked":_=F;break;case"value":y=F;break;case"defaultValue":C=F;break;case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(s(137,i));break;default:He(r,i,u,F,o,null)}}dm(r,y,C,A,_,N,m,!1),$a(r);return;case"select":Ae("invalid",r),u=N=y=null;for(m in o)if(o.hasOwnProperty(m)&&(C=o[m],C!=null))switch(m){case"value":y=C;break;case"defaultValue":N=C;break;case"multiple":u=C;default:He(r,i,m,C,o,null)}i=y,o=N,r.multiple=!!u,i!=null?Zs(r,!!u,i,!1):o!=null&&Zs(r,!!u,o,!0);return;case"textarea":Ae("invalid",r),y=m=u=null;for(N in o)if(o.hasOwnProperty(N)&&(C=o[N],C!=null))switch(N){case"value":u=C;break;case"defaultValue":m=C;break;case"children":y=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(s(91));break;default:He(r,i,N,C,o,null)}hm(r,u,m,y),$a(r);return;case"option":for(A in o)if(o.hasOwnProperty(A)&&(u=o[A],u!=null))switch(A){case"selected":r.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:He(r,i,A,u,o,null)}return;case"dialog":Ae("beforetoggle",r),Ae("toggle",r),Ae("cancel",r),Ae("close",r);break;case"iframe":case"object":Ae("load",r);break;case"video":case"audio":for(u=0;u<Pl.length;u++)Ae(Pl[u],r);break;case"image":Ae("error",r),Ae("load",r);break;case"details":Ae("toggle",r);break;case"embed":case"source":case"link":Ae("error",r),Ae("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(_ in o)if(o.hasOwnProperty(_)&&(u=o[_],u!=null))switch(_){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:He(r,i,_,u,o,null)}return;default:if(zu(i)){for(F in o)o.hasOwnProperty(F)&&(u=o[F],u!==void 0&&vf(r,i,F,u,o,void 0));return}}for(C in o)o.hasOwnProperty(C)&&(u=o[C],u!=null&&He(r,i,C,u,o,null))}function JN(r,i,o,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,y=null,N=null,C=null,A=null,_=null,F=null;for(I in o){var Y=o[I];if(o.hasOwnProperty(I)&&Y!=null)switch(I){case"checked":break;case"value":break;case"defaultValue":A=Y;default:u.hasOwnProperty(I)||He(r,i,I,null,u,Y)}}for(var U in u){var I=u[U];if(Y=o[U],u.hasOwnProperty(U)&&(I!=null||Y!=null))switch(U){case"type":y=I;break;case"name":m=I;break;case"checked":_=I;break;case"defaultChecked":F=I;break;case"value":N=I;break;case"defaultValue":C=I;break;case"children":case"dangerouslySetInnerHTML":if(I!=null)throw Error(s(137,i));break;default:I!==Y&&He(r,i,U,I,u,Y)}}Ru(r,N,C,A,_,F,y,m);return;case"select":I=N=C=U=null;for(y in o)if(A=o[y],o.hasOwnProperty(y)&&A!=null)switch(y){case"value":break;case"multiple":I=A;default:u.hasOwnProperty(y)||He(r,i,y,null,u,A)}for(m in u)if(y=u[m],A=o[m],u.hasOwnProperty(m)&&(y!=null||A!=null))switch(m){case"value":U=y;break;case"defaultValue":C=y;break;case"multiple":N=y;default:y!==A&&He(r,i,m,y,u,A)}i=C,o=N,u=I,U!=null?Zs(r,!!o,U,!1):!!u!=!!o&&(i!=null?Zs(r,!!o,i,!0):Zs(r,!!o,o?[]:"",!1));return;case"textarea":I=U=null;for(C in o)if(m=o[C],o.hasOwnProperty(C)&&m!=null&&!u.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:He(r,i,C,null,u,m)}for(N in u)if(m=u[N],y=o[N],u.hasOwnProperty(N)&&(m!=null||y!=null))switch(N){case"value":U=m;break;case"defaultValue":I=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(s(91));break;default:m!==y&&He(r,i,N,m,u,y)}fm(r,U,I);return;case"option":for(var ye in o)if(U=o[ye],o.hasOwnProperty(ye)&&U!=null&&!u.hasOwnProperty(ye))switch(ye){case"selected":r.selected=!1;break;default:He(r,i,ye,null,u,U)}for(A in u)if(U=u[A],I=o[A],u.hasOwnProperty(A)&&U!==I&&(U!=null||I!=null))switch(A){case"selected":r.selected=U&&typeof U!="function"&&typeof U!="symbol";break;default:He(r,i,A,U,u,I)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var me in o)U=o[me],o.hasOwnProperty(me)&&U!=null&&!u.hasOwnProperty(me)&&He(r,i,me,null,u,U);for(_ in u)if(U=u[_],I=o[_],u.hasOwnProperty(_)&&U!==I&&(U!=null||I!=null))switch(_){case"children":case"dangerouslySetInnerHTML":if(U!=null)throw Error(s(137,i));break;default:He(r,i,_,U,u,I)}return;default:if(zu(i)){for(var Ue in o)U=o[Ue],o.hasOwnProperty(Ue)&&U!==void 0&&!u.hasOwnProperty(Ue)&&vf(r,i,Ue,void 0,u,U);for(F in u)U=u[F],I=o[F],!u.hasOwnProperty(F)||U===I||U===void 0&&I===void 0||vf(r,i,F,U,u,I);return}}for(var L in o)U=o[L],o.hasOwnProperty(L)&&U!=null&&!u.hasOwnProperty(L)&&He(r,i,L,null,u,U);for(Y in u)U=u[Y],I=o[Y],!u.hasOwnProperty(Y)||U===I||U==null&&I==null||He(r,i,Y,U,u,I)}var Sf=null,Nf=null;function Io(r){return r.nodeType===9?r:r.ownerDocument}function py(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function my(r,i){if(r===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&i==="foreignObject"?0:r}function wf(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var kf=null;function QN(){var r=window.event;return r&&r.type==="popstate"?r===kf?!1:(kf=r,!0):(kf=null,!1)}var gy=typeof setTimeout=="function"?setTimeout:void 0,ZN=typeof clearTimeout=="function"?clearTimeout:void 0,yy=typeof Promise=="function"?Promise:void 0,WN=typeof queueMicrotask=="function"?queueMicrotask:typeof yy<"u"?function(r){return yy.resolve(null).then(r).catch(ew)}:gy;function ew(r){setTimeout(function(){throw r})}function Lr(r){return r==="head"}function xy(r,i){var o=i,u=0,m=0;do{var y=o.nextSibling;if(r.removeChild(o),y&&y.nodeType===8)if(o=y.data,o==="/$"){if(0<u&&8>u){o=u;var N=r.ownerDocument;if(o&1&&Vl(N.documentElement),o&2&&Vl(N.body),o&4)for(o=N.head,Vl(o),N=o.firstChild;N;){var C=N.nextSibling,A=N.nodeName;N[rl]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&N.rel.toLowerCase()==="stylesheet"||o.removeChild(N),N=C}}if(m===0){r.removeChild(y),Jl(i);return}m--}else o==="$"||o==="$?"||o==="$!"?m++:u=o.charCodeAt(0)-48;else u=0;o=y}while(o);Jl(i)}function Cf(r){var i=r.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Cf(o),Tu(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}r.removeChild(o)}}function tw(r,i,o,u){for(;r.nodeType===1;){var m=o;if(r.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[rl])switch(i){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(y=r.getAttribute("rel"),y==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(y!==m.rel||r.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||r.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||r.getAttribute("title")!==(m.title==null?null:m.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(y=r.getAttribute("src"),(y!==(m.src==null?null:m.src)||r.getAttribute("type")!==(m.type==null?null:m.type)||r.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&y&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(i==="input"&&r.type==="hidden"){var y=m.name==null?null:""+m.name;if(m.type==="hidden"&&r.getAttribute("name")===y)return r}else return r;if(r=wn(r.nextSibling),r===null)break}return null}function nw(r,i,o){if(i==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=wn(r.nextSibling),r===null))return null;return r}function Ef(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState==="complete"}function rw(r,i){var o=r.ownerDocument;if(r.data!=="$?"||o.readyState==="complete")i();else{var u=function(){i(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),r._reactRetry=u}}function wn(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return r}var jf=null;function by(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"){if(i===0)return r;i--}else o==="/$"&&i++}r=r.previousSibling}return null}function vy(r,i,o){switch(i=Io(o),r){case"html":if(r=i.documentElement,!r)throw Error(s(452));return r;case"head":if(r=i.head,!r)throw Error(s(453));return r;case"body":if(r=i.body,!r)throw Error(s(454));return r;default:throw Error(s(451))}}function Vl(r){for(var i=r.attributes;i.length;)r.removeAttributeNode(i[0]);Tu(r)}var pn=new Map,Sy=new Set;function Vo(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var tr=W.d;W.d={f:sw,r:iw,D:lw,C:aw,L:ow,m:cw,X:dw,S:uw,M:fw};function sw(){var r=tr.f(),i=Ro();return r||i}function iw(r){var i=Ks(r);i!==null&&i.tag===5&&i.type==="form"?Ig(i):tr.r(r)}var Ai=typeof document>"u"?null:document;function Ny(r,i,o){var u=Ai;if(u&&typeof i=="string"&&i){var m=an(i);m='link[rel="'+r+'"][href="'+m+'"]',typeof o=="string"&&(m+='[crossorigin="'+o+'"]'),Sy.has(m)||(Sy.add(m),r={rel:r,crossOrigin:o,href:i},u.querySelector(m)===null&&(i=u.createElement("link"),vt(i,"link",r),ot(i),u.head.appendChild(i)))}}function lw(r){tr.D(r),Ny("dns-prefetch",r,null)}function aw(r,i){tr.C(r,i),Ny("preconnect",r,i)}function ow(r,i,o){tr.L(r,i,o);var u=Ai;if(u&&r&&i){var m='link[rel="preload"][as="'+an(i)+'"]';i==="image"&&o&&o.imageSrcSet?(m+='[imagesrcset="'+an(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(m+='[imagesizes="'+an(o.imageSizes)+'"]')):m+='[href="'+an(r)+'"]';var y=m;switch(i){case"style":y=Ti(r);break;case"script":y=Mi(r)}pn.has(y)||(r=g({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:r,as:i},o),pn.set(y,r),u.querySelector(m)!==null||i==="style"&&u.querySelector(ql(y))||i==="script"&&u.querySelector(Fl(y))||(i=u.createElement("link"),vt(i,"link",r),ot(i),u.head.appendChild(i)))}}function cw(r,i){tr.m(r,i);var o=Ai;if(o&&r){var u=i&&typeof i.as=="string"?i.as:"script",m='link[rel="modulepreload"][as="'+an(u)+'"][href="'+an(r)+'"]',y=m;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Mi(r)}if(!pn.has(y)&&(r=g({rel:"modulepreload",href:r},i),pn.set(y,r),o.querySelector(m)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Fl(y)))return}u=o.createElement("link"),vt(u,"link",r),ot(u),o.head.appendChild(u)}}}function uw(r,i,o){tr.S(r,i,o);var u=Ai;if(u&&r){var m=Xs(u).hoistableStyles,y=Ti(r);i=i||"default";var N=m.get(y);if(!N){var C={loading:0,preload:null};if(N=u.querySelector(ql(y)))C.loading=5;else{r=g({rel:"stylesheet",href:r,"data-precedence":i},o),(o=pn.get(y))&&Af(r,o);var A=N=u.createElement("link");ot(A),vt(A,"link",r),A._p=new Promise(function(_,F){A.onload=_,A.onerror=F}),A.addEventListener("load",function(){C.loading|=1}),A.addEventListener("error",function(){C.loading|=2}),C.loading|=4,qo(N,i,u)}N={type:"stylesheet",instance:N,count:1,state:C},m.set(y,N)}}}function dw(r,i){tr.X(r,i);var o=Ai;if(o&&r){var u=Xs(o).hoistableScripts,m=Mi(r),y=u.get(m);y||(y=o.querySelector(Fl(m)),y||(r=g({src:r,async:!0},i),(i=pn.get(m))&&Tf(r,i),y=o.createElement("script"),ot(y),vt(y,"link",r),o.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(m,y))}}function fw(r,i){tr.M(r,i);var o=Ai;if(o&&r){var u=Xs(o).hoistableScripts,m=Mi(r),y=u.get(m);y||(y=o.querySelector(Fl(m)),y||(r=g({src:r,async:!0,type:"module"},i),(i=pn.get(m))&&Tf(r,i),y=o.createElement("script"),ot(y),vt(y,"link",r),o.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(m,y))}}function wy(r,i,o,u){var m=(m=K.current)?Vo(m):null;if(!m)throw Error(s(446));switch(r){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=Ti(o.href),o=Xs(m).hoistableStyles,u=o.get(i),u||(u={type:"style",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){r=Ti(o.href);var y=Xs(m).hoistableStyles,N=y.get(r);if(N||(m=m.ownerDocument||m,N={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(r,N),(y=m.querySelector(ql(r)))&&!y._p&&(N.instance=y,N.state.loading=5),pn.has(r)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},pn.set(r,o),y||hw(m,r,o,N.state))),i&&u===null)throw Error(s(528,""));return N}if(i&&u!==null)throw Error(s(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Mi(o),o=Xs(m).hoistableScripts,u=o.get(i),u||(u={type:"script",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,r))}}function Ti(r){return'href="'+an(r)+'"'}function ql(r){return'link[rel="stylesheet"]['+r+"]"}function ky(r){return g({},r,{"data-precedence":r.precedence,precedence:null})}function hw(r,i,o,u){r.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=r.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),vt(i,"link",o),ot(i),r.head.appendChild(i))}function Mi(r){return'[src="'+an(r)+'"]'}function Fl(r){return"script[async]"+r}function Cy(r,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var u=r.querySelector('style[data-href~="'+an(o.href)+'"]');if(u)return i.instance=u,ot(u),u;var m=g({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),ot(u),vt(u,"style",m),qo(u,o.precedence,r),i.instance=u;case"stylesheet":m=Ti(o.href);var y=r.querySelector(ql(m));if(y)return i.state.loading|=4,i.instance=y,ot(y),y;u=ky(o),(m=pn.get(m))&&Af(u,m),y=(r.ownerDocument||r).createElement("link"),ot(y);var N=y;return N._p=new Promise(function(C,A){N.onload=C,N.onerror=A}),vt(y,"link",u),i.state.loading|=4,qo(y,o.precedence,r),i.instance=y;case"script":return y=Mi(o.src),(m=r.querySelector(Fl(y)))?(i.instance=m,ot(m),m):(u=o,(m=pn.get(y))&&(u=g({},o),Tf(u,m)),r=r.ownerDocument||r,m=r.createElement("script"),ot(m),vt(m,"link",u),r.head.appendChild(m),i.instance=m);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,qo(u,o.precedence,r));return i.instance}function qo(r,i,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=u.length?u[u.length-1]:null,y=m,N=0;N<u.length;N++){var C=u[N];if(C.dataset.precedence===i)y=C;else if(y!==m)break}y?y.parentNode.insertBefore(r,y.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(r,i.firstChild))}function Af(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.title==null&&(r.title=i.title)}function Tf(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.integrity==null&&(r.integrity=i.integrity)}var Fo=null;function Ey(r,i,o){if(Fo===null){var u=new Map,m=Fo=new Map;m.set(o,u)}else m=Fo,u=m.get(o),u||(u=new Map,m.set(o,u));if(u.has(r))return u;for(u.set(r,null),o=o.getElementsByTagName(r),m=0;m<o.length;m++){var y=o[m];if(!(y[rl]||y[Ct]||r==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var N=y.getAttribute(i)||"";N=r+N;var C=u.get(N);C?C.push(y):u.set(N,[y])}}return u}function jy(r,i,o){r=r.ownerDocument||r,r.head.insertBefore(o,i==="title"?r.querySelector("head > title"):null)}function pw(r,i,o){if(o===1||i.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return r=i.disabled,typeof i.precedence=="string"&&r==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Ay(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var $l=null;function mw(){}function gw(r,i,o){if($l===null)throw Error(s(475));var u=$l;if(i.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var m=Ti(o.href),y=r.querySelector(ql(m));if(y){r=y._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(u.count++,u=$o.bind(u),r.then(u,u)),i.state.loading|=4,i.instance=y,ot(y);return}y=r.ownerDocument||r,o=ky(o),(m=pn.get(m))&&Af(o,m),y=y.createElement("link"),ot(y);var N=y;N._p=new Promise(function(C,A){N.onload=C,N.onerror=A}),vt(y,"link",o),i.instance=y}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(i,r),(r=i.state.preload)&&(i.state.loading&3)===0&&(u.count++,i=$o.bind(u),r.addEventListener("load",i),r.addEventListener("error",i))}}function yw(){if($l===null)throw Error(s(475));var r=$l;return r.stylesheets&&r.count===0&&Mf(r,r.stylesheets),0<r.count?function(i){var o=setTimeout(function(){if(r.stylesheets&&Mf(r,r.stylesheets),r.unsuspend){var u=r.unsuspend;r.unsuspend=null,u()}},6e4);return r.unsuspend=i,function(){r.unsuspend=null,clearTimeout(o)}}:null}function $o(){if(this.count--,this.count===0){if(this.stylesheets)Mf(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Go=null;function Mf(r,i){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Go=new Map,i.forEach(xw,r),Go=null,$o.call(r))}function xw(r,i){if(!(i.state.loading&4)){var o=Go.get(r);if(o)var u=o.get(null);else{o=new Map,Go.set(r,o);for(var m=r.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<m.length;y++){var N=m[y];(N.nodeName==="LINK"||N.getAttribute("media")!=="not all")&&(o.set(N.dataset.precedence,N),u=N)}u&&o.set(null,u)}m=i.instance,N=m.getAttribute("data-precedence"),y=o.get(N)||u,y===u&&o.set(null,m),o.set(N,m),this.count++,u=$o.bind(this),m.addEventListener("load",u),m.addEventListener("error",u),y?y.parentNode.insertBefore(m,y.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(m,r.firstChild)),i.state.loading|=4}}var Gl={$$typeof:R,Provider:null,Consumer:null,_currentValue:re,_currentValue2:re,_threadCount:0};function bw(r,i,o,u,m,y,N,C){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Cu(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cu(0),this.hiddenUpdates=Cu(null),this.identifierPrefix=u,this.onUncaughtError=m,this.onCaughtError=y,this.onRecoverableError=N,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=C,this.incompleteTransitions=new Map}function Ty(r,i,o,u,m,y,N,C,A,_,F,Y){return r=new bw(r,i,o,N,C,A,_,Y),i=1,y===!0&&(i|=24),y=Jt(3,null,null,i),r.current=y,y.stateNode=r,i=ud(),i.refCount++,r.pooledCache=i,i.refCount++,y.memoizedState={element:u,isDehydrated:o,cache:i},pd(y),r}function My(r){return r?(r=ai,r):ai}function Oy(r,i,o,u,m,y){m=My(m),u.context===null?u.context=m:u.pendingContext=m,u=Sr(i),u.payload={element:o},y=y===void 0?null:y,y!==null&&(u.callback=y),o=Nr(r,u,i),o!==null&&(tn(o,r,i),Nl(o,r,i))}function Dy(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<i?o:i}}function Of(r,i){Dy(r,i),(r=r.alternate)&&Dy(r,i)}function Ry(r){if(r.tag===13){var i=li(r,67108864);i!==null&&tn(i,r,67108864),Of(r,67108864)}}var Yo=!0;function vw(r,i,o,u){var m=V.T;V.T=null;var y=W.p;try{W.p=2,Df(r,i,o,u)}finally{W.p=y,V.T=m}}function Sw(r,i,o,u){var m=V.T;V.T=null;var y=W.p;try{W.p=8,Df(r,i,o,u)}finally{W.p=y,V.T=m}}function Df(r,i,o,u){if(Yo){var m=Rf(u);if(m===null)bf(r,i,u,Ko,o),zy(r,u);else if(ww(m,r,i,o,u))u.stopPropagation();else if(zy(r,u),i&4&&-1<Nw.indexOf(r)){for(;m!==null;){var y=Ks(m);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var N=ls(y.pendingLanes);if(N!==0){var C=y;for(C.pendingLanes|=2,C.entangledLanes|=2;N;){var A=1<<31-Kt(N);C.entanglements[1]|=A,N&=~A}Ln(y),(ze&6)===0&&(Oo=Tn()+500,Ul(0))}}break;case 13:C=li(y,2),C!==null&&tn(C,y,2),Ro(),Of(y,2)}if(y=Rf(u),y===null&&bf(r,i,u,Ko,o),y===m)break;m=y}m!==null&&u.stopPropagation()}else bf(r,i,u,null,o)}}function Rf(r){return r=_u(r),Lf(r)}var Ko=null;function Lf(r){if(Ko=null,r=Ys(r),r!==null){var i=a(r);if(i===null)r=null;else{var o=i.tag;if(o===13){if(r=c(i),r!==null)return r;r=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null)}}return Ko=r,null}function Ly(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(aS()){case Kp:return 2;case Xp:return 8;case Ua:case oS:return 32;case Jp:return 268435456;default:return 32}default:return 32}}var zf=!1,zr=null,Br=null,_r=null,Yl=new Map,Kl=new Map,Hr=[],Nw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function zy(r,i){switch(r){case"focusin":case"focusout":zr=null;break;case"dragenter":case"dragleave":Br=null;break;case"mouseover":case"mouseout":_r=null;break;case"pointerover":case"pointerout":Yl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Kl.delete(i.pointerId)}}function Xl(r,i,o,u,m,y){return r===null||r.nativeEvent!==y?(r={blockedOn:i,domEventName:o,eventSystemFlags:u,nativeEvent:y,targetContainers:[m]},i!==null&&(i=Ks(i),i!==null&&Ry(i)),r):(r.eventSystemFlags|=u,i=r.targetContainers,m!==null&&i.indexOf(m)===-1&&i.push(m),r)}function ww(r,i,o,u,m){switch(i){case"focusin":return zr=Xl(zr,r,i,o,u,m),!0;case"dragenter":return Br=Xl(Br,r,i,o,u,m),!0;case"mouseover":return _r=Xl(_r,r,i,o,u,m),!0;case"pointerover":var y=m.pointerId;return Yl.set(y,Xl(Yl.get(y)||null,r,i,o,u,m)),!0;case"gotpointercapture":return y=m.pointerId,Kl.set(y,Xl(Kl.get(y)||null,r,i,o,u,m)),!0}return!1}function By(r){var i=Ys(r.target);if(i!==null){var o=a(i);if(o!==null){if(i=o.tag,i===13){if(i=c(o),i!==null){r.blockedOn=i,gS(r.priority,function(){if(o.tag===13){var u=en();u=Eu(u);var m=li(o,u);m!==null&&tn(m,o,u),Of(o,u)}});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Xo(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var o=Rf(r.nativeEvent);if(o===null){o=r.nativeEvent;var u=new o.constructor(o.type,o);Bu=u,o.target.dispatchEvent(u),Bu=null}else return i=Ks(o),i!==null&&Ry(i),r.blockedOn=o,!1;i.shift()}return!0}function _y(r,i,o){Xo(r)&&o.delete(i)}function kw(){zf=!1,zr!==null&&Xo(zr)&&(zr=null),Br!==null&&Xo(Br)&&(Br=null),_r!==null&&Xo(_r)&&(_r=null),Yl.forEach(_y),Kl.forEach(_y)}function Jo(r,i){r.blockedOn===i&&(r.blockedOn=null,zf||(zf=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,kw)))}var Qo=null;function Hy(r){Qo!==r&&(Qo=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Qo===r&&(Qo=null);for(var i=0;i<r.length;i+=3){var o=r[i],u=r[i+1],m=r[i+2];if(typeof u!="function"){if(Lf(u||o)===null)continue;break}var y=Ks(o);y!==null&&(r.splice(i,3),i-=3,Rd(y,{pending:!0,data:m,method:o.method,action:u},u,m))}}))}function Jl(r){function i(A){return Jo(A,r)}zr!==null&&Jo(zr,r),Br!==null&&Jo(Br,r),_r!==null&&Jo(_r,r),Yl.forEach(i),Kl.forEach(i);for(var o=0;o<Hr.length;o++){var u=Hr[o];u.blockedOn===r&&(u.blockedOn=null)}for(;0<Hr.length&&(o=Hr[0],o.blockedOn===null);)By(o),o.blockedOn===null&&Hr.shift();if(o=(r.ownerDocument||r).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var m=o[u],y=o[u+1],N=m[Pt]||null;if(typeof y=="function")N||Hy(o);else if(N){var C=null;if(y&&y.hasAttribute("formAction")){if(m=y,N=y[Pt]||null)C=N.formAction;else if(Lf(m)!==null)continue}else C=N.action;typeof C=="function"?o[u+1]=C:(o.splice(u,3),u-=3),Hy(o)}}}function Bf(r){this._internalRoot=r}Zo.prototype.render=Bf.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(s(409));var o=i.current,u=en();Oy(o,u,r,i,null,null)},Zo.prototype.unmount=Bf.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;Oy(r.current,2,null,r,null,null),Ro(),i[Gs]=null}};function Zo(r){this._internalRoot=r}Zo.prototype.unstable_scheduleHydration=function(r){if(r){var i=tm();r={blockedOn:null,target:r,priority:i};for(var o=0;o<Hr.length&&i!==0&&i<Hr[o].priority;o++);Hr.splice(o,0,r),o===0&&By(r)}};var Uy=e.version;if(Uy!=="19.1.0")throw Error(s(527,Uy,"19.1.0"));W.findDOMNode=function(r){var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(s(188)):(r=Object.keys(r).join(","),Error(s(268,r)));return r=f(i),r=r!==null?p(r):null,r=r===null?null:r.stateNode,r};var Cw={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:V,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wo.isDisabled&&Wo.supportsFiber)try{el=Wo.inject(Cw),Yt=Wo}catch{}}return Zl.createRoot=function(r,i){if(!l(r))throw Error(s(299));var o=!1,u="",m=t0,y=n0,N=r0,C=null;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(m=i.onUncaughtError),i.onCaughtError!==void 0&&(y=i.onCaughtError),i.onRecoverableError!==void 0&&(N=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(C=i.unstable_transitionCallbacks)),i=Ty(r,1,!1,null,null,o,u,m,y,N,C,null),r[Gs]=i.current,xf(r),new Bf(i)},Zl.hydrateRoot=function(r,i,o){if(!l(r))throw Error(s(299));var u=!1,m="",y=t0,N=n0,C=r0,A=null,_=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(y=o.onUncaughtError),o.onCaughtError!==void 0&&(N=o.onCaughtError),o.onRecoverableError!==void 0&&(C=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(A=o.unstable_transitionCallbacks),o.formState!==void 0&&(_=o.formState)),i=Ty(r,1,!0,i,o??null,u,m,y,N,C,A,_),i.context=My(null),o=i.current,u=en(),u=Eu(u),m=Sr(u),m.callback=null,Nr(o,m,u),o=u,i.current.lanes=o,nl(i,o),Ln(i),r[Gs]=i.current,xf(r),new Zo(i)},Zl.version="19.1.0",Zl}var Xy;function Lw(){if(Xy)return Uf.exports;Xy=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Uf.exports=Rw(),Uf.exports}var zw=Lw();const Bw=Wh(zw);var Wl={},Jy;function _w(){if(Jy)return Wl;Jy=1,Object.defineProperty(Wl,"__esModule",{value:!0}),Wl.parse=c,Wl.serialize=p;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,l=Object.prototype.toString,a=(()=>{const b=function(){};return b.prototype=Object.create(null),b})();function c(b,v){const S=new a,w=b.length;if(w<2)return S;const k=(v==null?void 0:v.decode)||g;let j=0;do{const D=b.indexOf("=",j);if(D===-1)break;const R=b.indexOf(";",j),O=R===-1?w:R;if(D>O){j=b.lastIndexOf(";",D-1)+1;continue}const z=d(b,j,D),H=f(b,D,z),G=b.slice(z,H);if(S[G]===void 0){let q=d(b,D+1,O),ne=f(b,O,q);const fe=k(b.slice(q,ne));S[G]=fe}j=O+1}while(j<w);return S}function d(b,v,S){do{const w=b.charCodeAt(v);if(w!==32&&w!==9)return v}while(++v<S);return S}function f(b,v,S){for(;v>S;){const w=b.charCodeAt(--v);if(w!==32&&w!==9)return v+1}return S}function p(b,v,S){const w=(S==null?void 0:S.encode)||encodeURIComponent;if(!n.test(b))throw new TypeError(`argument name is invalid: ${b}`);const k=w(v);if(!e.test(k))throw new TypeError(`argument val is invalid: ${v}`);let j=b+"="+k;if(!S)return j;if(S.maxAge!==void 0){if(!Number.isInteger(S.maxAge))throw new TypeError(`option maxAge is invalid: ${S.maxAge}`);j+="; Max-Age="+S.maxAge}if(S.domain){if(!t.test(S.domain))throw new TypeError(`option domain is invalid: ${S.domain}`);j+="; Domain="+S.domain}if(S.path){if(!s.test(S.path))throw new TypeError(`option path is invalid: ${S.path}`);j+="; Path="+S.path}if(S.expires){if(!x(S.expires)||!Number.isFinite(S.expires.valueOf()))throw new TypeError(`option expires is invalid: ${S.expires}`);j+="; Expires="+S.expires.toUTCString()}if(S.httpOnly&&(j+="; HttpOnly"),S.secure&&(j+="; Secure"),S.partitioned&&(j+="; Partitioned"),S.priority)switch(typeof S.priority=="string"?S.priority.toLowerCase():void 0){case"low":j+="; Priority=Low";break;case"medium":j+="; Priority=Medium";break;case"high":j+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${S.priority}`)}if(S.sameSite)switch(typeof S.sameSite=="string"?S.sameSite.toLowerCase():S.sameSite){case!0:case"strict":j+="; SameSite=Strict";break;case"lax":j+="; SameSite=Lax";break;case"none":j+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${S.sameSite}`)}return j}function g(b){if(b.indexOf("%")===-1)return b;try{return decodeURIComponent(b)}catch{return b}}function x(b){return l.call(b)==="[object Date]"}return Wl}_w();var Qy="popstate";function Hw(n={}){function e(s,l){let{pathname:a,search:c,hash:d}=s.location;return vh("",{pathname:a,search:c,hash:d},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(s,l){return typeof l=="string"?l:ba(l)}return Pw(e,t,null,n)}function Ge(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Cn(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Uw(){return Math.random().toString(36).substring(2,10)}function Zy(n,e){return{usr:n.state,key:n.key,idx:e}}function vh(n,e,t=null,s){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Xi(e):e,state:t,key:e&&e.key||s||Uw()}}function ba({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Xi(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let s=n.indexOf("?");s>=0&&(e.search=n.substring(s),n=n.substring(0,s)),n&&(e.pathname=n)}return e}function Pw(n,e,t,s={}){let{window:l=document.defaultView,v5Compat:a=!1}=s,c=l.history,d="POP",f=null,p=g();p==null&&(p=0,c.replaceState({...c.state,idx:p},""));function g(){return(c.state||{idx:null}).idx}function x(){d="POP";let k=g(),j=k==null?null:k-p;p=k,f&&f({action:d,location:w.location,delta:j})}function b(k,j){d="PUSH";let D=vh(w.location,k,j);p=g()+1;let R=Zy(D,p),O=w.createHref(D);try{c.pushState(R,"",O)}catch(z){if(z instanceof DOMException&&z.name==="DataCloneError")throw z;l.location.assign(O)}a&&f&&f({action:d,location:w.location,delta:1})}function v(k,j){d="REPLACE";let D=vh(w.location,k,j);p=g();let R=Zy(D,p),O=w.createHref(D);c.replaceState(R,"",O),a&&f&&f({action:d,location:w.location,delta:0})}function S(k){return Iw(k)}let w={get action(){return d},get location(){return n(l,c)},listen(k){if(f)throw new Error("A history only accepts one active listener");return l.addEventListener(Qy,x),f=k,()=>{l.removeEventListener(Qy,x),f=null}},createHref(k){return e(l,k)},createURL:S,encodeLocation(k){let j=S(k);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:b,replace:v,go(k){return c.go(k)}};return w}function Iw(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Ge(t,"No window.location.(origin|href) available to create URL");let s=typeof n=="string"?n:ba(n);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=t+s),new URL(s,t)}function Ob(n,e,t="/"){return Vw(n,e,t,!1)}function Vw(n,e,t,s){let l=typeof e=="string"?Xi(e):e,a=dr(l.pathname||"/",t);if(a==null)return null;let c=Db(n);qw(c);let d=null;for(let f=0;d==null&&f<c.length;++f){let p=e2(a);d=Zw(c[f],p,s)}return d}function Db(n,e=[],t=[],s=""){let l=(a,c,d)=>{let f={relativePath:d===void 0?a.path||"":d,caseSensitive:a.caseSensitive===!0,childrenIndex:c,route:a};f.relativePath.startsWith("/")&&(Ge(f.relativePath.startsWith(s),`Absolute route path "${f.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(s.length));let p=or([s,f.relativePath]),g=t.concat(f);a.children&&a.children.length>0&&(Ge(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),Db(a.children,e,g,p)),!(a.path==null&&!a.index)&&e.push({path:p,score:Jw(p,a.index),routesMeta:g})};return n.forEach((a,c)=>{var d;if(a.path===""||!((d=a.path)!=null&&d.includes("?")))l(a,c);else for(let f of Rb(a.path))l(a,c,f)}),e}function Rb(n){let e=n.split("/");if(e.length===0)return[];let[t,...s]=e,l=t.endsWith("?"),a=t.replace(/\?$/,"");if(s.length===0)return l?[a,""]:[a];let c=Rb(s.join("/")),d=[];return d.push(...c.map(f=>f===""?a:[a,f].join("/"))),l&&d.push(...c),d.map(f=>n.startsWith("/")&&f===""?"/":f)}function qw(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:Qw(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}var Fw=/^:[\w-]+$/,$w=3,Gw=2,Yw=1,Kw=10,Xw=-2,Wy=n=>n==="*";function Jw(n,e){let t=n.split("/"),s=t.length;return t.some(Wy)&&(s+=Xw),e&&(s+=Gw),t.filter(l=>!Wy(l)).reduce((l,a)=>l+(Fw.test(a)?$w:a===""?Yw:Kw),s)}function Qw(n,e){return n.length===e.length&&n.slice(0,-1).every((s,l)=>s===e[l])?n[n.length-1]-e[e.length-1]:0}function Zw(n,e,t=!1){let{routesMeta:s}=n,l={},a="/",c=[];for(let d=0;d<s.length;++d){let f=s[d],p=d===s.length-1,g=a==="/"?e:e.slice(a.length)||"/",x=bc({path:f.relativePath,caseSensitive:f.caseSensitive,end:p},g),b=f.route;if(!x&&p&&t&&!s[s.length-1].route.index&&(x=bc({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},g)),!x)return null;Object.assign(l,x.params),c.push({params:l,pathname:or([a,x.pathname]),pathnameBase:s2(or([a,x.pathnameBase])),route:b}),x.pathnameBase!=="/"&&(a=or([a,x.pathnameBase]))}return c}function bc(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,s]=Ww(n.path,n.caseSensitive,n.end),l=e.match(t);if(!l)return null;let a=l[0],c=a.replace(/(.)\/+$/,"$1"),d=l.slice(1);return{params:s.reduce((p,{paramName:g,isOptional:x},b)=>{if(g==="*"){let S=d[b]||"";c=a.slice(0,a.length-S.length).replace(/(.)\/+$/,"$1")}const v=d[b];return x&&!v?p[g]=void 0:p[g]=(v||"").replace(/%2F/g,"/"),p},{}),pathname:a,pathnameBase:c,pattern:n}}function Ww(n,e=!1,t=!0){Cn(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let s=[],l="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,f)=>(s.push({paramName:d,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(s.push({paramName:"*"}),l+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?l+="\\/*$":n!==""&&n!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,e?void 0:"i"),s]}function e2(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Cn(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function dr(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=n.charAt(t);return s&&s!=="/"?null:n.slice(t)||"/"}function t2(n,e="/"){let{pathname:t,search:s="",hash:l=""}=typeof n=="string"?Xi(n):n;return{pathname:t?t.startsWith("/")?t:n2(t,e):e,search:i2(s),hash:l2(l)}}function n2(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(l=>{l===".."?t.length>1&&t.pop():l!=="."&&t.push(l)}),t.length>1?t.join("/"):"/"}function qf(n,e,t,s){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function r2(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function tp(n){let e=r2(n);return e.map((t,s)=>s===e.length-1?t.pathname:t.pathnameBase)}function np(n,e,t,s=!1){let l;typeof n=="string"?l=Xi(n):(l={...n},Ge(!l.pathname||!l.pathname.includes("?"),qf("?","pathname","search",l)),Ge(!l.pathname||!l.pathname.includes("#"),qf("#","pathname","hash",l)),Ge(!l.search||!l.search.includes("#"),qf("#","search","hash",l)));let a=n===""||l.pathname==="",c=a?"/":l.pathname,d;if(c==null)d=t;else{let x=e.length-1;if(!s&&c.startsWith("..")){let b=c.split("/");for(;b[0]==="..";)b.shift(),x-=1;l.pathname=b.join("/")}d=x>=0?e[x]:"/"}let f=t2(l,d),p=c&&c!=="/"&&c.endsWith("/"),g=(a||c===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(p||g)&&(f.pathname+="/"),f}var or=n=>n.join("/").replace(/\/\/+/g,"/"),s2=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),i2=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,l2=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function a2(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var Lb=["POST","PUT","PATCH","DELETE"];new Set(Lb);var o2=["GET",...Lb];new Set(o2);var Ji=E.createContext(null);Ji.displayName="DataRouter";var ou=E.createContext(null);ou.displayName="DataRouterState";var zb=E.createContext({isTransitioning:!1});zb.displayName="ViewTransition";var c2=E.createContext(new Map);c2.displayName="Fetchers";var u2=E.createContext(null);u2.displayName="Await";var jn=E.createContext(null);jn.displayName="Navigation";var Ra=E.createContext(null);Ra.displayName="Location";var An=E.createContext({outlet:null,matches:[],isDataRoute:!1});An.displayName="Route";var rp=E.createContext(null);rp.displayName="RouteError";function d2(n,{relative:e}={}){Ge(Qi(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:s}=E.useContext(jn),{hash:l,pathname:a,search:c}=La(n,{relative:e}),d=a;return t!=="/"&&(d=a==="/"?t:or([t,a])),s.createHref({pathname:d,search:c,hash:l})}function Qi(){return E.useContext(Ra)!=null}function hr(){return Ge(Qi(),"useLocation() may be used only in the context of a <Router> component."),E.useContext(Ra).location}var Bb="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function _b(n){E.useContext(jn).static||E.useLayoutEffect(n)}function pr(){let{isDataRoute:n}=E.useContext(An);return n?k2():f2()}function f2(){Ge(Qi(),"useNavigate() may be used only in the context of a <Router> component.");let n=E.useContext(Ji),{basename:e,navigator:t}=E.useContext(jn),{matches:s}=E.useContext(An),{pathname:l}=hr(),a=JSON.stringify(tp(s)),c=E.useRef(!1);return _b(()=>{c.current=!0}),E.useCallback((f,p={})=>{if(Cn(c.current,Bb),!c.current)return;if(typeof f=="number"){t.go(f);return}let g=np(f,JSON.parse(a),l,p.relative==="path");n==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:or([e,g.pathname])),(p.replace?t.replace:t.push)(g,p.state,p)},[e,t,a,l,n])}E.createContext(null);function cu(){let{matches:n}=E.useContext(An),e=n[n.length-1];return e?e.params:{}}function La(n,{relative:e}={}){let{matches:t}=E.useContext(An),{pathname:s}=hr(),l=JSON.stringify(tp(t));return E.useMemo(()=>np(n,JSON.parse(l),s,e==="path"),[n,l,s,e])}function h2(n,e){return Hb(n,e)}function Hb(n,e,t,s){var D;Ge(Qi(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l,static:a}=E.useContext(jn),{matches:c}=E.useContext(An),d=c[c.length-1],f=d?d.params:{},p=d?d.pathname:"/",g=d?d.pathnameBase:"/",x=d&&d.route;{let R=x&&x.path||"";Ub(p,!x||R.endsWith("*")||R.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${R}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${R}"> to <Route path="${R==="/"?"*":`${R}/*`}">.`)}let b=hr(),v;if(e){let R=typeof e=="string"?Xi(e):e;Ge(g==="/"||((D=R.pathname)==null?void 0:D.startsWith(g)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${R.pathname}" was given in the \`location\` prop.`),v=R}else v=b;let S=v.pathname||"/",w=S;if(g!=="/"){let R=g.replace(/^\//,"").split("/");w="/"+S.replace(/^\//,"").split("/").slice(R.length).join("/")}let k=!a&&t&&t.matches&&t.matches.length>0?t.matches:Ob(n,{pathname:w});Cn(x||k!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),Cn(k==null||k[k.length-1].route.element!==void 0||k[k.length-1].route.Component!==void 0||k[k.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let j=x2(k&&k.map(R=>Object.assign({},R,{params:Object.assign({},f,R.params),pathname:or([g,l.encodeLocation?l.encodeLocation(R.pathname).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?g:or([g,l.encodeLocation?l.encodeLocation(R.pathnameBase).pathname:R.pathnameBase])})),c,t,s);return e&&j?E.createElement(Ra.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},j):j}function p2(){let n=w2(),e=a2(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:s},a={padding:"2px 4px",backgroundColor:s},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=E.createElement(E.Fragment,null,E.createElement("p",null," Hey developer "),E.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",E.createElement("code",{style:a},"ErrorBoundary")," or"," ",E.createElement("code",{style:a},"errorElement")," prop on your route.")),E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},e),t?E.createElement("pre",{style:l},t):null,c)}var m2=E.createElement(p2,null),g2=class extends E.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?E.createElement(An.Provider,{value:this.props.routeContext},E.createElement(rp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function y2({routeContext:n,match:e,children:t}){let s=E.useContext(Ji);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),E.createElement(An.Provider,{value:n},t)}function x2(n,e=[],t=null,s=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let l=n,a=t==null?void 0:t.errors;if(a!=null){let f=l.findIndex(p=>p.route.id&&(a==null?void 0:a[p.route.id])!==void 0);Ge(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),l=l.slice(0,Math.min(l.length,f+1))}let c=!1,d=-1;if(t)for(let f=0;f<l.length;f++){let p=l[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=f),p.route.id){let{loaderData:g,errors:x}=t,b=p.route.loader&&!g.hasOwnProperty(p.route.id)&&(!x||x[p.route.id]===void 0);if(p.route.lazy||b){c=!0,d>=0?l=l.slice(0,d+1):l=[l[0]];break}}}return l.reduceRight((f,p,g)=>{let x,b=!1,v=null,S=null;t&&(x=a&&p.route.id?a[p.route.id]:void 0,v=p.route.errorElement||m2,c&&(d<0&&g===0?(Ub("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,S=null):d===g&&(b=!0,S=p.route.hydrateFallbackElement||null)));let w=e.concat(l.slice(0,g+1)),k=()=>{let j;return x?j=v:b?j=S:p.route.Component?j=E.createElement(p.route.Component,null):p.route.element?j=p.route.element:j=f,E.createElement(y2,{match:p,routeContext:{outlet:f,matches:w,isDataRoute:t!=null},children:j})};return t&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?E.createElement(g2,{location:t.location,revalidation:t.revalidation,component:v,error:x,children:k(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):k()},null)}function sp(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function b2(n){let e=E.useContext(Ji);return Ge(e,sp(n)),e}function v2(n){let e=E.useContext(ou);return Ge(e,sp(n)),e}function S2(n){let e=E.useContext(An);return Ge(e,sp(n)),e}function ip(n){let e=S2(n),t=e.matches[e.matches.length-1];return Ge(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function N2(){return ip("useRouteId")}function w2(){var s;let n=E.useContext(rp),e=v2("useRouteError"),t=ip("useRouteError");return n!==void 0?n:(s=e.errors)==null?void 0:s[t]}function k2(){let{router:n}=b2("useNavigate"),e=ip("useNavigate"),t=E.useRef(!1);return _b(()=>{t.current=!0}),E.useCallback(async(l,a={})=>{Cn(t.current,Bb),t.current&&(typeof l=="number"?n.navigate(l):await n.navigate(l,{fromRouteId:e,...a}))},[n,e])}var ex={};function Ub(n,e,t){!e&&!ex[n]&&(ex[n]=!0,Cn(!1,t))}E.memo(C2);function C2({routes:n,future:e,state:t}){return Hb(n,void 0,t,e)}function Sh({to:n,replace:e,state:t,relative:s}){Ge(Qi(),"<Navigate> may be used only in the context of a <Router> component.");let{static:l}=E.useContext(jn);Cn(!l,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=E.useContext(An),{pathname:c}=hr(),d=pr(),f=np(n,tp(a),c,s==="path"),p=JSON.stringify(f);return E.useEffect(()=>{d(JSON.parse(p),{replace:e,state:t,relative:s})},[d,p,s,e,t]),null}function ft(n){Ge(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function E2({basename:n="/",children:e=null,location:t,navigationType:s="POP",navigator:l,static:a=!1}){Ge(!Qi(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=n.replace(/^\/*/,"/"),d=E.useMemo(()=>({basename:c,navigator:l,static:a,future:{}}),[c,l,a]);typeof t=="string"&&(t=Xi(t));let{pathname:f="/",search:p="",hash:g="",state:x=null,key:b="default"}=t,v=E.useMemo(()=>{let S=dr(f,c);return S==null?null:{location:{pathname:S,search:p,hash:g,state:x,key:b},navigationType:s}},[c,f,p,g,x,b,s]);return Cn(v!=null,`<Router basename="${c}"> is not able to match the URL "${f}${p}${g}" because it does not start with the basename, so the <Router> won't render anything.`),v==null?null:E.createElement(jn.Provider,{value:d},E.createElement(Ra.Provider,{children:e,value:v}))}function j2({children:n,location:e}){return h2(Nh(n),e)}function Nh(n,e=[]){let t=[];return E.Children.forEach(n,(s,l)=>{if(!E.isValidElement(s))return;let a=[...e,l];if(s.type===E.Fragment){t.push.apply(t,Nh(s.props.children,a));return}Ge(s.type===ft,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ge(!s.props.index||!s.props.children,"An index route cannot have child routes.");let c={id:s.props.id||a.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(c.children=Nh(s.props.children,a)),t.push(c)}),t}var dc="get",fc="application/x-www-form-urlencoded";function uu(n){return n!=null&&typeof n.tagName=="string"}function A2(n){return uu(n)&&n.tagName.toLowerCase()==="button"}function T2(n){return uu(n)&&n.tagName.toLowerCase()==="form"}function M2(n){return uu(n)&&n.tagName.toLowerCase()==="input"}function O2(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function D2(n,e){return n.button===0&&(!e||e==="_self")&&!O2(n)}var ec=null;function R2(){if(ec===null)try{new FormData(document.createElement("form"),0),ec=!1}catch{ec=!0}return ec}var L2=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ff(n){return n!=null&&!L2.has(n)?(Cn(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${fc}"`),null):n}function z2(n,e){let t,s,l,a,c;if(T2(n)){let d=n.getAttribute("action");s=d?dr(d,e):null,t=n.getAttribute("method")||dc,l=Ff(n.getAttribute("enctype"))||fc,a=new FormData(n)}else if(A2(n)||M2(n)&&(n.type==="submit"||n.type==="image")){let d=n.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=n.getAttribute("formaction")||d.getAttribute("action");if(s=f?dr(f,e):null,t=n.getAttribute("formmethod")||d.getAttribute("method")||dc,l=Ff(n.getAttribute("formenctype"))||Ff(d.getAttribute("enctype"))||fc,a=new FormData(d,n),!R2()){let{name:p,type:g,value:x}=n;if(g==="image"){let b=p?`${p}.`:"";a.append(`${b}x`,"0"),a.append(`${b}y`,"0")}else p&&a.append(p,x)}}else{if(uu(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=dc,s=null,l=fc,c=n}return a&&l==="text/plain"&&(c=a,a=void 0),{action:s,method:t.toLowerCase(),encType:l,formData:a,body:c}}function lp(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function B2(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function _2(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function H2(n,e,t){let s=await Promise.all(n.map(async l=>{let a=e.routes[l.route.id];if(a){let c=await B2(a,t);return c.links?c.links():[]}return[]}));return V2(s.flat(1).filter(_2).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function tx(n,e,t,s,l,a){let c=(f,p)=>t[p]?f.route.id!==t[p].route.id:!0,d=(f,p)=>{var g;return t[p].pathname!==f.pathname||((g=t[p].route.path)==null?void 0:g.endsWith("*"))&&t[p].params["*"]!==f.params["*"]};return a==="assets"?e.filter((f,p)=>c(f,p)||d(f,p)):a==="data"?e.filter((f,p)=>{var x;let g=s.routes[f.route.id];if(!g||!g.hasLoader)return!1;if(c(f,p)||d(f,p))return!0;if(f.route.shouldRevalidate){let b=f.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:((x=t[0])==null?void 0:x.params)||{},nextUrl:new URL(n,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function U2(n,e,{includeHydrateFallback:t}={}){return P2(n.map(s=>{let l=e.routes[s.route.id];if(!l)return[];let a=[l.module];return l.clientActionModule&&(a=a.concat(l.clientActionModule)),l.clientLoaderModule&&(a=a.concat(l.clientLoaderModule)),t&&l.hydrateFallbackModule&&(a=a.concat(l.hydrateFallbackModule)),l.imports&&(a=a.concat(l.imports)),a}).flat(1))}function P2(n){return[...new Set(n)]}function I2(n){let e={},t=Object.keys(n).sort();for(let s of t)e[s]=n[s];return e}function V2(n,e){let t=new Set;return new Set(e),n.reduce((s,l)=>{let a=JSON.stringify(I2(l));return t.has(a)||(t.add(a),s.push({key:a,link:l})),s},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var q2=new Set([100,101,204,205]);function F2(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&dr(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function Pb(){let n=E.useContext(Ji);return lp(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function $2(){let n=E.useContext(ou);return lp(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var ap=E.createContext(void 0);ap.displayName="FrameworkContext";function Ib(){let n=E.useContext(ap);return lp(n,"You must render this element inside a <HydratedRouter> element"),n}function G2(n,e){let t=E.useContext(ap),[s,l]=E.useState(!1),[a,c]=E.useState(!1),{onFocus:d,onBlur:f,onMouseEnter:p,onMouseLeave:g,onTouchStart:x}=e,b=E.useRef(null);E.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let w=j=>{j.forEach(D=>{c(D.isIntersecting)})},k=new IntersectionObserver(w,{threshold:.5});return b.current&&k.observe(b.current),()=>{k.disconnect()}}},[n]),E.useEffect(()=>{if(s){let w=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(w)}}},[s]);let v=()=>{l(!0)},S=()=>{l(!1),c(!1)};return t?n!=="intent"?[a,b,{}]:[a,b,{onFocus:ea(d,v),onBlur:ea(f,S),onMouseEnter:ea(p,v),onMouseLeave:ea(g,S),onTouchStart:ea(x,v)}]:[!1,b,{}]}function ea(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function Y2({page:n,...e}){let{router:t}=Pb(),s=E.useMemo(()=>Ob(t.routes,n,t.basename),[t.routes,n,t.basename]);return s?E.createElement(X2,{page:n,matches:s,...e}):null}function K2(n){let{manifest:e,routeModules:t}=Ib(),[s,l]=E.useState([]);return E.useEffect(()=>{let a=!1;return H2(n,e,t).then(c=>{a||l(c)}),()=>{a=!0}},[n,e,t]),s}function X2({page:n,matches:e,...t}){let s=hr(),{manifest:l,routeModules:a}=Ib(),{basename:c}=Pb(),{loaderData:d,matches:f}=$2(),p=E.useMemo(()=>tx(n,e,f,l,s,"data"),[n,e,f,l,s]),g=E.useMemo(()=>tx(n,e,f,l,s,"assets"),[n,e,f,l,s]),x=E.useMemo(()=>{if(n===s.pathname+s.search+s.hash)return[];let S=new Set,w=!1;if(e.forEach(j=>{var R;let D=l.routes[j.route.id];!D||!D.hasLoader||(!p.some(O=>O.route.id===j.route.id)&&j.route.id in d&&((R=a[j.route.id])!=null&&R.shouldRevalidate)||D.hasClientLoader?w=!0:S.add(j.route.id))}),S.size===0)return[];let k=F2(n,c);return w&&S.size>0&&k.searchParams.set("_routes",e.filter(j=>S.has(j.route.id)).map(j=>j.route.id).join(",")),[k.pathname+k.search]},[c,d,s,l,p,e,n,a]),b=E.useMemo(()=>U2(g,l),[g,l]),v=K2(g);return E.createElement(E.Fragment,null,x.map(S=>E.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...t})),b.map(S=>E.createElement("link",{key:S,rel:"modulepreload",href:S,...t})),v.map(({key:S,link:w})=>E.createElement("link",{key:S,...w})))}function J2(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var Vb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Vb&&(window.__reactRouterVersion="7.6.0")}catch{}function Q2({basename:n,children:e,window:t}){let s=E.useRef();s.current==null&&(s.current=Hw({window:t,v5Compat:!0}));let l=s.current,[a,c]=E.useState({action:l.action,location:l.location}),d=E.useCallback(f=>{E.startTransition(()=>c(f))},[c]);return E.useLayoutEffect(()=>l.listen(d),[l,d]),E.createElement(E2,{basename:n,children:e,location:a.location,navigationType:a.action,navigator:l})}var qb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,pe=E.forwardRef(function({onClick:e,discover:t="render",prefetch:s="none",relative:l,reloadDocument:a,replace:c,state:d,target:f,to:p,preventScrollReset:g,viewTransition:x,...b},v){let{basename:S}=E.useContext(jn),w=typeof p=="string"&&qb.test(p),k,j=!1;if(typeof p=="string"&&w&&(k=p,Vb))try{let ne=new URL(window.location.href),fe=p.startsWith("//")?new URL(ne.protocol+p):new URL(p),ue=dr(fe.pathname,S);fe.origin===ne.origin&&ue!=null?p=ue+fe.search+fe.hash:j=!0}catch{Cn(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let D=d2(p,{relative:l}),[R,O,z]=G2(s,b),H=tk(p,{replace:c,state:d,target:f,preventScrollReset:g,relative:l,viewTransition:x});function G(ne){e&&e(ne),ne.defaultPrevented||H(ne)}let q=E.createElement("a",{...b,...z,href:k||D,onClick:j||a?e:G,ref:J2(v,O),target:f,"data-discover":!w&&t==="render"?"true":void 0});return R&&!w?E.createElement(E.Fragment,null,q,E.createElement(Y2,{page:D})):q});pe.displayName="Link";var Z2=E.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:s="",end:l=!1,style:a,to:c,viewTransition:d,children:f,...p},g){let x=La(c,{relative:p.relative}),b=hr(),v=E.useContext(ou),{navigator:S,basename:w}=E.useContext(jn),k=v!=null&&lk(x)&&d===!0,j=S.encodeLocation?S.encodeLocation(x).pathname:x.pathname,D=b.pathname,R=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;t||(D=D.toLowerCase(),R=R?R.toLowerCase():null,j=j.toLowerCase()),R&&w&&(R=dr(R,w)||R);const O=j!=="/"&&j.endsWith("/")?j.length-1:j.length;let z=D===j||!l&&D.startsWith(j)&&D.charAt(O)==="/",H=R!=null&&(R===j||!l&&R.startsWith(j)&&R.charAt(j.length)==="/"),G={isActive:z,isPending:H,isTransitioning:k},q=z?e:void 0,ne;typeof s=="function"?ne=s(G):ne=[s,z?"active":null,H?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let fe=typeof a=="function"?a(G):a;return E.createElement(pe,{...p,"aria-current":q,className:ne,ref:g,style:fe,to:c,viewTransition:d},typeof f=="function"?f(G):f)});Z2.displayName="NavLink";var W2=E.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:s,replace:l,state:a,method:c=dc,action:d,onSubmit:f,relative:p,preventScrollReset:g,viewTransition:x,...b},v)=>{let S=sk(),w=ik(d,{relative:p}),k=c.toLowerCase()==="get"?"get":"post",j=typeof d=="string"&&qb.test(d),D=R=>{if(f&&f(R),R.defaultPrevented)return;R.preventDefault();let O=R.nativeEvent.submitter,z=(O==null?void 0:O.getAttribute("formmethod"))||c;S(O||R.currentTarget,{fetcherKey:e,method:z,navigate:t,replace:l,state:a,relative:p,preventScrollReset:g,viewTransition:x})};return E.createElement("form",{ref:v,method:k,action:w,onSubmit:s?f:D,...b,"data-discover":!j&&n==="render"?"true":void 0})});W2.displayName="Form";function ek(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Fb(n){let e=E.useContext(Ji);return Ge(e,ek(n)),e}function tk(n,{target:e,replace:t,state:s,preventScrollReset:l,relative:a,viewTransition:c}={}){let d=pr(),f=hr(),p=La(n,{relative:a});return E.useCallback(g=>{if(D2(g,e)){g.preventDefault();let x=t!==void 0?t:ba(f)===ba(p);d(n,{replace:x,state:s,preventScrollReset:l,relative:a,viewTransition:c})}},[f,d,p,t,s,e,n,l,a,c])}var nk=0,rk=()=>`__${String(++nk)}__`;function sk(){let{router:n}=Fb("useSubmit"),{basename:e}=E.useContext(jn),t=N2();return E.useCallback(async(s,l={})=>{let{action:a,method:c,encType:d,formData:f,body:p}=z2(s,e);if(l.navigate===!1){let g=l.fetcherKey||rk();await n.fetch(g,t,l.action||a,{preventScrollReset:l.preventScrollReset,formData:f,body:p,formMethod:l.method||c,formEncType:l.encType||d,flushSync:l.flushSync})}else await n.navigate(l.action||a,{preventScrollReset:l.preventScrollReset,formData:f,body:p,formMethod:l.method||c,formEncType:l.encType||d,replace:l.replace,state:l.state,fromRouteId:t,flushSync:l.flushSync,viewTransition:l.viewTransition})},[n,e,t])}function ik(n,{relative:e}={}){let{basename:t}=E.useContext(jn),s=E.useContext(An);Ge(s,"useFormAction must be used inside a RouteContext");let[l]=s.matches.slice(-1),a={...La(n||".",{relative:e})},c=hr();if(n==null){a.search=c.search;let d=new URLSearchParams(a.search),f=d.getAll("index");if(f.some(g=>g==="")){d.delete("index"),f.filter(x=>x).forEach(x=>d.append("index",x));let g=d.toString();a.search=g?`?${g}`:""}}return(!n||n===".")&&l.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:or([t,a.pathname])),ba(a)}function lk(n,e={}){let t=E.useContext(zb);Ge(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=Fb("useViewTransitionState"),l=La(n,{relative:e.relative});if(!t.isTransitioning)return!1;let a=dr(t.currentLocation.pathname,s)||t.currentLocation.pathname,c=dr(t.nextLocation.pathname,s)||t.nextLocation.pathname;return bc(l.pathname,c)!=null||bc(l.pathname,a)!=null}[...q2];var ak=Mb();const ok=Wh(ak),va={BASE_URL:"https://api.shopmaraph.com/api"},$b=E.createContext(void 0),ta=va.BASE_URL,ck=({children:n})=>{const[e,t]=E.useState(null),[s,l]=E.useState(null),[a,c]=E.useState(!0);E.useEffect(()=>{(async()=>{try{const w=localStorage.getItem("user"),k=localStorage.getItem("token");if(w&&k){t(JSON.parse(w)),l(k);const j=await fetch(`${ta}/user`,{method:"GET",headers:{Authorization:`Bearer ${k}`,Accept:"application/json"},credentials:"include"});if(!j.ok)t(null),l(null),localStorage.removeItem("user"),localStorage.removeItem("token"),console.log("Token validation failed during initialization");else{const D=await j.json();D.success&&D.user&&(t(D.user),localStorage.setItem("user",JSON.stringify(D.user)))}}}catch(w){console.error("Error loading user or validating token:",w),t(null),l(null),localStorage.removeItem("user"),localStorage.removeItem("token")}finally{c(!1)}})()},[]);const d=!!e&&!!s,f=(e==null?void 0:e.role)==="admin",p=async()=>!!s,g=async(S,w,k,j,D)=>{try{const R={name:S,email:w,password:k,password_confirmation:j};D&&(R.cart_items=D);const O=await fetch(`${ta}/register`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify(R)});if(!O.ok){const H=await O.json();throw new Error(H.message||"Registration failed")}const z=await O.json();return t(z.user),l(z.token),localStorage.setItem("user",JSON.stringify(z.user)),localStorage.setItem("token",z.token),{user:z.user,token:z.token}}catch(R){throw console.error("Registration error:",R),R}},x=async(S,w)=>{try{const k=await fetch(`${ta}/login`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({email:S,password:w})});if(!k.ok){const D=await k.json();throw new Error(D.message||"Login failed")}const j=await k.json();t(j.user),l(j.token),localStorage.setItem("user",JSON.stringify(j.user)),localStorage.setItem("token",j.token)}catch(k){throw console.error("Login error:",k),k}},b=async()=>{if(s)try{await fetch(`${ta}/logout`,{method:"POST",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json",Accept:"application/json"},credentials:"include"})}catch(S){console.error("Logout error:",S)}t(null),l(null),localStorage.removeItem("user"),localStorage.removeItem("token")},v=async()=>{if(console.log("migrateGuestCart called, token:",s?s.substring(0,10)+"...":"missing"),!s)return console.log("No token available, cannot migrate cart"),!1;try{const S="guest_cart",w=localStorage.getItem(S);if(console.log("Guest cart from localStorage:",w?"found":"not found","Key:",S),!w)return!1;const k=JSON.parse(w);if(console.log("Parsed guest cart:",k.length,"items"),!k||!k.length)return!1;for(const j of k){console.log("Adding item to cart:",j.product.id,j.size,j.quantity);const R=await(await fetch(`${ta}/cart/add`,{method:"POST",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({product_id:j.product.id,size:j.size,quantity:j.quantity})})).json();console.log("API response:",R.success?"success":"failed",R)}return localStorage.removeItem(S),console.log("Guest cart cleared from localStorage"),!0}catch(S){return console.error("Error migrating guest cart:",S),!1}};return a?h.jsx("div",{children:"Loading..."}):h.jsx($b.Provider,{value:{user:e,token:s,isAuthenticated:d,isAdmin:f,login:x,register:g,logout:b,validateToken:p,migrateGuestCart:v},children:n})},st=()=>{const n=E.useContext($b);if(n===void 0)throw new Error("useAuth must be used within an AuthProvider");return n},uk=va.BASE_URL,we=async(n,e="GET",t,s,l=!1)=>{const a=`${uk}${n}`,c={...s,Accept:"application/json"};!l&&e!=="GET"&&(c["Content-Type"]="application/json");const d={method:e,headers:c,credentials:"include"};e!=="GET"&&t&&(d.body=l?t:JSON.stringify(t));try{const f=await fetch(a,d),p=await f.json();if(!f.ok){if(p.errors){const g=Object.values(p.errors).flat().join("; ");throw new Error(g??"")}throw p.message?new Error(p.message):new Error("Something went wrong")}return p}catch(f){throw console.error(`API Request Error (${n}):`,f),f}},ts={getAllProducts:n=>{const e=n?`?${Object.entries(n).filter(([t,s])=>s!=null&&s!=="").map(([t,s])=>`${t}=${encodeURIComponent(String(s))}`).join("&")}`:"";return we(`/products${e}`)},getProductById:n=>we(`/products/${n}`),createProduct:(n,e)=>we("/products","POST",e,{Authorization:`Bearer ${n}`},!0),updateProduct:(n,e,t)=>(t.append("_method","PUT"),we(`/products/${e}`,"POST",t,{Authorization:`Bearer ${n}`},!0)),deleteProduct:(n,e)=>we(`/products/${e}`,"DELETE",null,{Authorization:`Bearer ${n}`}),restockProduct:(n,e,t)=>we(`/products/${e}/restock`,"POST",t,{Authorization:`Bearer ${n}`})},na={getCart:n=>{console.log(n);const t=n["X-Guest-ID"]?"/guest/cart":"/cart";return we(t,"GET",null,n)},addToCart:(n,e)=>{const s=n["X-Guest-ID"]?"/guest/cart/add":"/cart/add";return we(s,"POST",{product_id:e},n)},removeFromCart:(n,e)=>{const s=n["X-Guest-ID"]?"/guest/cart/remove":"/cart/remove";return we(s,"POST",{cart_item_id:e},n)},clearCart:n=>{const t=n["X-Guest-ID"]?"/guest/cart/clear":"/cart/clear";return we(t,"POST",null,n)},putProductsOnHold:n=>{const t=n["X-Guest-ID"]?"/guest/cart/hold":"/cart/hold";return we(t,"POST",null,n)}},Vi={createOrder:(n,e)=>we("/orders","POST",e,{Authorization:`Bearer ${n}`},!0),createGuestOrder:n=>we("/guest-orders","POST",n,{},!0),getUserOrders:n=>we("/orders","GET",null,{Authorization:`Bearer ${n}`}),getUserOrder:(n,e)=>we(`/orders/${e}`,"GET",null,{Authorization:`Bearer ${n}`}),getAllOrders:(n,e)=>{const t=e?`?status=${e}`:"";return we(`/admin/orders${t}`,"GET",null,{Authorization:`Bearer ${n}`})},getOrder:(n,e)=>we(`/admin/orders/${e}`,"GET",null,{Authorization:`Bearer ${n}`}),updateOrderStatus:(n,e,t,s)=>we(`/admin/orders/${e}/status`,"POST",{status:t,admin_notes:s},{Authorization:`Bearer ${n}`}),getGuestOrders:n=>we(`/guest-orders/${n}`,"GET",null,{})},ia={getAll:n=>we("/admin/hero-carousel","GET",null,{Authorization:`Bearer ${n}`}),create:(n,e)=>we("/admin/hero-carousel","POST",e,{Authorization:`Bearer ${n}`},!0),update:(n,e,t)=>(t.append("_method","PUT"),we(`/admin/hero-carousel/${e}`,"POST",t,{Authorization:`Bearer ${n}`},!0)),delete:(n,e)=>we(`/admin/hero-carousel/${e}`,"DELETE",null,{Authorization:`Bearer ${n}`}),updateInterval:(n,e)=>we("/admin/hero-carousel/interval","POST",{interval:e},{Authorization:`Bearer ${n}`}),getPublic:()=>we("/hero-carousel","GET")},nx={getAllUsers:n=>we("/admin/users","GET",null,{Authorization:`Bearer ${n}`}),changeUserPassword:(n,e,t,s)=>we(`/admin/users/${e}/change-password`,"POST",{password:t,password_confirmation:s},{Authorization:`Bearer ${n}`})},rx={getProfile:n=>we("/guest/profile","GET",null,n),saveProfile:(n,e)=>we("/guest/profile","POST",e,n)},dk=({message:n,type:e="info",duration:t=3e3,onClose:s,isVisible:l})=>{if(E.useEffect(()=>{if(l){const c=setTimeout(()=>{s()},t);return()=>clearTimeout(c)}},[l,t,s]),!l)return null;const a={success:"bg-green-500",error:"bg-red-500",warning:"bg-yellow-500",info:"bg-blue-500"}[e];return h.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:h.jsxs("div",{className:`${a} text-white px-4 py-3 rounded-md shadow-lg flex items-center`,children:[h.jsx("div",{className:"mr-3",children:n}),h.jsx("button",{onClick:s,className:"text-white hover:text-gray-200",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:h.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})})},Gb=E.createContext(void 0),fk=({children:n})=>{const[e,t]=E.useState({message:"",type:"info",isVisible:!1}),s=(a,c="info")=>{t({message:a,type:c,isVisible:!0})},l=()=>{t(a=>({...a,isVisible:!1}))};return h.jsxs(Gb.Provider,{value:{showToast:s},children:[n,h.jsx(dk,{message:e.message,type:e.type,isVisible:e.isVisible,onClose:l})]})},Zi=()=>{const n=E.useContext(Gb);if(!n)throw new Error("useToast must be used within a ToastProvider");return n},Yb=E.createContext(void 0),sx="guest_id",hk=({children:n})=>{const{token:e,isAuthenticated:t}=st(),[s,l]=E.useState([]),[a,c]=E.useState(!1),[d,f]=E.useState(null),{showToast:p}=Zi(),g=()=>{let O=localStorage.getItem(sx);return O||(O=`guest-${Date.now()}-${Math.random().toString(36).substring(2,11)}`,localStorage.setItem(sx,O)),O},x=()=>{const O={};return t&&e?O.Authorization=`Bearer ${e}`:O["X-Guest-ID"]=g(),O};E.useEffect(()=>{b()},[t,e]);const b=async()=>{c(!0),f(null);try{const O=await na.getCart(x());l(O.data.items||[])}catch(O){console.error("Error fetching cart:",O),f(O instanceof Error?O.message:"An error occurred while fetching the cart")}finally{c(!1)}},v=async O=>{c(!0),f(null);try{const H=(await ts.getProductById(O.id)).data;if(H.status!=="Available")throw new Error(H.status==="Sold"?"This product is no longer available as it has been sold.":"This product is currently on hold by another customer.");const G=x();await na.addToCart(G,O.id),await b(),p("Product added to cart!","success")}catch(z){const H=z.message||"Failed to add product to cart";throw p(H,"error"),f(H),z}finally{c(!1)}},S=async O=>{c(!0),f(null);try{const z=await na.removeFromCart(x(),O.toString());l(z.data.items||[]),p("Item removed from cart","info")}catch(z){console.error("Error removing from cart:",z),f(z instanceof Error?z.message:"An error occurred while removing from cart"),p("Failed to remove item from cart","error")}finally{c(!1)}},w=async()=>{c(!0),f(null);try{const O=await na.clearCart(x());l(O.data.items||[]),p("Cart cleared successfully","info")}catch(O){console.error("Error clearing cart:",O),f(O instanceof Error?O.message:"An error occurred while clearing cart"),p("Failed to clear cart","error")}finally{c(!1)}},k=async()=>{var O;c(!0),f(null);try{const z=await na.putProductsOnHold(x());return(O=z.data)!=null&&O.items&&l(z.data.items),b(),{success:z.success,message:z.message,hold_duration:z.hold_duration,hold_expiry_time_in_seconds:z.hold_expiry_time_in_seconds,is_hold_expired:z.is_hold_expired}}catch(z){throw console.error("Error holding products:",z),f(z instanceof Error?z.message:"An error occurred while holding products"),p("Some items in your cart are no longer available. Please remove them before proceeding to checkout.","error"),z}finally{c(!1)}},j=()=>s.length,D=()=>s.reduce((O,z)=>O+Number(z.product.price||0),0),R=O=>s.some(z=>z.product.id===O);return h.jsx(Yb.Provider,{value:{cartItems:s,addToCart:v,removeFromCart:S,clearCart:w,getTotalItems:j,getTotalPrice:D,isInCart:R,isLoading:a,error:d,token:e,fetchCart:b,holdProducts:k},children:n})},za=()=>{const n=E.useContext(Yb);if(n===void 0)throw new Error("useCart must be used within a CartProvider");return n},pk=()=>{const[n,e]=E.useState(!1),[t,s]=E.useState(!1),{getTotalItems:l}=za(),{user:a,isAuthenticated:c,isAdmin:d,logout:f}=st(),p=E.useRef(null),[g,x]=E.useState(!1);E.useEffect(()=>{x(!!localStorage.getItem("guest_id"));const w=j=>{j.key==="guest_id"&&x(!!j.newValue)};window.addEventListener("storage",w);const k=()=>x(!0);return window.addEventListener("guest_id_set",k),()=>{window.removeEventListener("storage",w),window.removeEventListener("guest_id_set",k)}},[]),E.useEffect(()=>{n&&x(!!localStorage.getItem("guest_id"))},[n]);const b=()=>{e(!n),t&&s(!1)},v=()=>{s(!t),n&&e(!1)},S=async()=>{await f(),e(!1),s(!1)};return h.jsxs("nav",{className:"bg-white shadow-sm fixed w-full top-0 z-50",children:[h.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:h.jsxs("div",{className:"flex justify-between items-center h-16",children:[h.jsx(pe,{to:"/",className:"flex-shrink-0 flex items-center",children:h.jsx("img",{src:"/app-logo.jpg",alt:"SHOPMARA PH",className:"h-8 w-auto",onError:w=>{const k=w.target;k.src="https://via.placeholder.com/120x40?text=SHOPMARA+PH"}})}),h.jsxs("div",{className:"hidden md:flex items-center space-x-8",children:[h.jsx(pe,{to:"/products",className:"text-gray-700 hover:text-black transition-colors",children:"All Products"}),h.jsx(pe,{to:"/new",className:"text-gray-700 hover:text-black transition-colors",children:"New Arrivals"}),h.jsx(pe,{to:"/sale",className:"text-gray-700 hover:text-black transition-colors",children:"Sale"}),h.jsx(pe,{to:"/about",className:"text-gray-700 hover:text-black transition-colors",children:"About Us"})]}),h.jsxs("div",{className:"hidden md:flex items-center space-x-6",children:[h.jsxs(pe,{to:"/cart",className:"text-gray-700 hover:text-black transition-colors relative",children:[h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),l()>0&&h.jsx("span",{className:"absolute -top-2 -right-2 bg-black text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:l()})]}),h.jsxs("div",{className:"relative",ref:p,children:[h.jsxs("button",{onClick:v,className:"flex items-center space-x-2 text-gray-700 hover:text-black transition-colors focus:outline-none",children:[h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),h.jsx("span",{className:"text-sm",children:"Account"})]}),t&&h.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50",children:c?h.jsxs(h.Fragment,{children:[d&&h.jsx(pe,{to:"/admin",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:()=>s(!1),children:"Admin Dashboard"}),h.jsx(pe,{to:"/my-orders",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:()=>s(!1),children:"My Orders"}),h.jsxs("button",{onClick:S,className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:["Logout ",a&&`(${a.name})`]})]}):h.jsxs(h.Fragment,{children:[h.jsx(pe,{to:"/login",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:()=>s(!1),children:"Login"}),h.jsx(pe,{to:"/register",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:()=>s(!1),children:"Sign Up"}),g&&h.jsx(pe,{to:"/my-orders",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:()=>s(!1),children:"My Orders"})]})})]})]}),h.jsxs("div",{className:"flex md:hidden items-center space-x-4",children:[h.jsxs(pe,{to:"/cart",className:"text-gray-700 hover:text-black transition-colors relative",children:[h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),l()>0&&h.jsx("span",{className:"absolute -top-2 -right-2 bg-black text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:l()})]}),h.jsx("button",{onClick:b,className:"text-gray-700 hover:text-black focus:outline-none",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:n?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16"})})})]})]})}),h.jsx("div",{className:`md:hidden transition-all duration-300 ease-in-out ${n?"max-h-screen":"max-h-0"} overflow-hidden bg-white border-t border-gray-200`,children:h.jsxs("div",{className:"px-4 pt-2 pb-3 space-y-1",children:[h.jsx(pe,{to:"/products",className:"block px-3 py-2 text-base font-medium text-gray-700 hover:text-black hover:bg-gray-50 rounded-md",onClick:()=>e(!1),children:"All Products"}),h.jsx(pe,{to:"/new",className:"block px-3 py-2 text-base font-medium text-gray-700 hover:text-black hover:bg-gray-50 rounded-md",onClick:()=>e(!1),children:"New Arrivals"}),h.jsx(pe,{to:"/sale",className:"block px-3 py-2 text-base font-medium text-gray-700 hover:text-black hover:bg-gray-50 rounded-md",onClick:()=>e(!1),children:"Sale"}),h.jsx(pe,{to:"/about",className:"block px-3 py-2 text-base font-medium text-gray-700 hover:text-black hover:bg-gray-50 rounded-md",onClick:()=>e(!1),children:"About Us"}),h.jsx("div",{className:"pt-4 pb-3 border-t border-gray-200",children:h.jsx("div",{className:"px-3 space-y-1",children:c?h.jsxs(h.Fragment,{children:[d&&h.jsx(pe,{to:"/admin",className:"block px-3 py-2 text-base font-medium text-gray-700 hover:text-black hover:bg-gray-50 rounded-md",onClick:()=>e(!1),children:"Admin Dashboard"}),h.jsx(pe,{to:"/my-orders",className:"block px-3 py-2 text-base font-medium text-gray-700 hover:text-black hover:bg-gray-50 rounded-md",onClick:()=>e(!1),children:"My Orders"}),h.jsxs("button",{onClick:S,className:"block w-full text-left px-3 py-2 text-base font-medium text-gray-700 hover:text-black hover:bg-gray-50 rounded-md",children:["Logout ",a&&`(${a.name})`]})]}):h.jsxs(h.Fragment,{children:[h.jsx(pe,{to:"/login",className:"block px-3 py-2 text-base font-medium text-gray-700 hover:text-black hover:bg-gray-50 rounded-md",onClick:()=>e(!1),children:"Login"}),h.jsx(pe,{to:"/register",className:"block px-3 py-2 text-base font-medium text-gray-700 hover:text-black hover:bg-gray-50 rounded-md",onClick:()=>e(!1),children:"Sign Up"}),g&&h.jsx(pe,{to:"/my-orders",className:"block px-3 py-2 text-base font-medium text-gray-700 hover:text-black hover:bg-gray-50 rounded-md",onClick:()=>e(!1),children:"My Orders"})]})})})]})})]})},mk=()=>{const n=new Date().getFullYear();return h.jsx("footer",{className:"bg-gray-100 pt-12 pb-8 font-como font-light",children:h.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mb-12",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"font-como font-light text-lg mb-4",children:"SHOPMARA PH"}),h.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"ShopMaraPH curates stylish, sustainable vintage pieces that empower modern women to wear confidence and elegancefrom office to everyday. With ShopMaraPH, wear your story."}),h.jsxs("div",{className:"flex items-center mb-4 text-gray-600",children:[h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),h.jsx("span",{className:"text-sm",children:"Located in Pasig City, PH"})]}),h.jsxs("div",{className:"flex space-x-4",children:[h.jsx("a",{href:"#",className:"text-gray-500 hover:text-black",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{d:"M22.675 0h-21.35c-.732 0-1.325.593-1.325 1.325v21.351c0 .731.593 1.324 1.325 1.324h11.495v-9.294h-3.128v-3.622h3.128v-2.671c0-3.1 1.893-4.788 4.659-4.788 1.325 0 2.463.099 2.795.143v3.24l-1.918.001c-1.504 0-1.795.715-1.795 1.763v2.313h3.587l-.467 3.622h-3.12v9.293h6.116c.73 0 1.323-.593 1.323-1.325v-21.35c0-.732-.593-1.325-1.325-1.325z"})})}),h.jsx("a",{href:"#",className:"text-gray-500 hover:text-black",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"})})}),h.jsx("a",{href:"#",className:"text-gray-500 hover:text-black",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{d:"M19.59 6.69a4.83 4.83 0 0 1-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 0 1-5.2 1.74 2.89 2.89 0 0 1 2.31-4.64 2.93 2.93 0 0 1 .88.13V9.4a6.84 6.84 0 0 0-1-.05A6.33 6.33 0 0 0 5 20.1a6.34 6.34 0 0 0 10.86-4.43v-7a8.16 8.16 0 0 0 4.77 1.52v-3.4a4.85 4.85 0 0 1-1-.1z"})})})]})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-como font-light text-lg mb-4",children:"Shop"}),h.jsxs("ul",{className:"space-y-2",children:[h.jsx("li",{children:h.jsx(pe,{to:"/products",className:"text-gray-600 hover:text-black text-sm",children:"All Products"})}),h.jsx("li",{children:h.jsx(pe,{to:"/new",className:"text-gray-600 hover:text-black text-sm",children:"New Arrivals"})}),h.jsx("li",{children:h.jsx(pe,{to:"/sale",className:"text-gray-600 hover:text-black text-sm",children:"Sale"})})]})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-como font-light text-lg mb-4",children:"Company"}),h.jsxs("ul",{className:"space-y-2",children:[h.jsx("li",{children:h.jsx(pe,{to:"/about",className:"text-gray-600 hover:text-black text-sm",children:"About Us"})}),h.jsx("li",{children:h.jsx(pe,{to:"/contact",className:"text-gray-600 hover:text-black text-sm",children:"Contact"})}),h.jsx("li",{children:h.jsx(pe,{to:"/terms",className:"text-gray-600 hover:text-black text-sm",children:"Terms & Conditions"})}),h.jsx("li",{children:h.jsx(pe,{to:"/privacy",className:"text-gray-600 hover:text-black text-sm",children:"Privacy Policy"})})]})]})]}),h.jsxs("div",{className:"border-t border-gray-200 pt-8",children:[h.jsxs("p",{className:"text-sm text-gray-500 text-center",children:[" ",n," SHOPMARA PH. All rights reserved."]}),h.jsx("p",{className:"text-xs text-gray-400 text-center mt-2",children:"All product names, logos, and brands are property of their respective owners. ShopMaraPH is not affiliated with or endorsed by any brand featured."})]})]})})},Oi=n=>({id:n.id,text:n.text,isActive:n.is_active,displayOrder:n.display_order,buttonText:n.button_text,buttonLink:n.button_link,backgroundColor:n.background_color,textColor:n.text_color,createdAt:n.created_at,updatedAt:n.updated_at}),Rs={getActiveAnnouncements:async()=>{try{return(await we("/announcements")).data.map(Oi)}catch(n){return console.error("Error fetching announcements:",n),[]}},getAllAnnouncements:async n=>{const e={};return e.Authorization=`Bearer ${n}`,(await we("/admin/announcements","GET",null,e)).data.map(Oi)},getAnnouncementById:async(n,e)=>{const t={};t.Authorization=`Bearer ${n}`;const s=await we(`/admin/announcements/${e}`,"GET",null,t);return Oi(s.data)},createAnnouncement:async(n,e)=>{const t={text:e.text,is_active:e.isActive,display_order:e.displayOrder,button_text:e.buttonText,button_link:e.buttonLink,background_color:e.backgroundColor,text_color:e.textColor},s={};s.Authorization=`Bearer ${n}`;const l=await we("/admin/announcements","POST",t,s);return Oi(l.data)},updateAnnouncement:async(n,e,t)=>{const s={};t.text!==void 0&&(s.text=t.text),t.isActive!==void 0&&(s.is_active=t.isActive),t.displayOrder!==void 0&&(s.display_order=t.displayOrder),t.buttonText!==void 0&&(s.button_text=t.buttonText),t.buttonLink!==void 0&&(s.button_link=t.buttonLink),t.backgroundColor!==void 0&&(s.background_color=t.backgroundColor),t.textColor!==void 0&&(s.text_color=t.textColor);const l={};l.Authorization=`Bearer ${n}`;const a=await we(`/admin/announcements/${e}`,"PUT",s,l);return Oi(a.data)},deleteAnnouncement:async(n,e)=>{const t={};return t.Authorization=`Bearer ${n}`,await we(`/admin/announcements/${e}`,"DELETE",null,t),!0},toggleAnnouncementStatus:async(n,e,t)=>{const s={};s.Authorization=`Bearer ${n}`;const l=await we(`/admin/announcements/${e}/toggle`,"POST",{is_active:t},s);return Oi(l.data)}},gk=()=>{const[n,e]=E.useState([]),[t,s]=E.useState(0),[l,a]=E.useState(!0);E.useEffect(()=>{(async()=>{try{a(!0);const g=[...await Rs.getActiveAnnouncements()].sort((x,b)=>x.displayOrder-b.displayOrder);e(g)}catch(p){console.error("Failed to fetch announcements:",p)}finally{a(!1)}})()},[]),E.useEffect(()=>{if(n.length<=1)return;const f=setInterval(()=>{s(p=>(p+1)%n.length)},5e3);return()=>clearInterval(f)},[n.length]);const c=E.useCallback(f=>{s(f)},[]);if(l||n.length===0)return null;const d=n[t];return h.jsx("div",{className:"w-full",children:h.jsxs("div",{className:"w-full py-3 px-4 flex items-center justify-center transition-all duration-300",style:{backgroundColor:d.backgroundColor,color:d.textColor},children:[h.jsxs("div",{className:"flex items-center justify-center flex-1",children:[h.jsx("p",{className:"text-center font-como font-light",children:d.text}),d.buttonText&&d.buttonLink&&h.jsx(pe,{to:d.buttonLink,className:"ml-4 px-3 py-1 border border-current hover:bg-opacity-20 hover:bg-white transition-colors",children:d.buttonText})]}),n.length>1&&h.jsx("div",{className:"flex gap-2 ml-4",children:n.map((f,p)=>h.jsx("button",{onClick:()=>c(p),className:`w-2 h-2 rounded-full ${p===t?"bg-current opacity-100":"bg-current opacity-50"}`,"aria-label":`Go to announcement ${p+1}`},p))})]})})},ix=["https://images.unsplash.com/photo-1512436991641-6745cdb1723f?auto=format&fit=crop&w=1200&q=80","https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=1200&q=80","https://images.unsplash.com/photo-1465101046530-73398c7f28ca?auto=format&fit=crop&w=1200&q=80"],yk=()=>{var b,v,S;const[n,e]=E.useState([]),[t,s]=E.useState(4e3),[l,a]=E.useState(0),[c,d]=E.useState(0),[f,p]=E.useState(!1),g=E.useRef(null);E.useEffect(()=>{ia.getPublic().then(w=>{w.data.carousels&&w.data.carousels.length>0?(e(w.data.carousels),s(w.data.interval||4e3)):(e(ix.map(k=>({image_url:k}))),s(4e3))}).catch(()=>{e(ix.map(w=>({image_url:w}))),s(4e3)})},[]),E.useEffect(()=>{if(n.length===0)return;const w=setInterval(()=>{d(l),a(k=>(k+1)%n.length),p(!0),g.current&&clearTimeout(g.current),g.current=setTimeout(()=>p(!1),700)},t);return()=>{clearInterval(w),g.current&&clearTimeout(g.current)}},[n,t,l]);const x=w=>w===l&&f?{transform:"translateX(0%)",transition:"transform 0.7s cubic-bezier(0.4,0,0.2,1)",zIndex:2,opacity:1}:w===c&&f?{transform:"translateX(-100%)",transition:"transform 0.7s cubic-bezier(0.4,0,0.2,1)",zIndex:1,opacity:1}:w===l&&!f?{transform:"translateX(0%)",transition:"none",zIndex:2,opacity:1}:{transform:"translateX(100%)",transition:"none",zIndex:0,opacity:0};return h.jsxs("div",{className:"relative w-full h-[450px] md:h-[600px] flex items-center justify-center overflow-hidden border-b border-gray-200 bg-black",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-full",children:n.map((w,k)=>h.jsx("img",{src:w.image_url,alt:"carousel background",className:"absolute top-0 left-0 w-full h-full object-cover",style:x(k)},w.image_url+k))}),h.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-40 z-10"}),h.jsxs("div",{className:"relative z-20 w-full flex flex-col items-center justify-center h-full",children:[(b=n[l])!=null&&b.title?h.jsx("h1",{className:"text-5xl md:text-7xl font-como font-light mb-4 text-center text-white drop-shadow-lg",children:n[l].title}):h.jsx("h1",{className:"text-5xl md:text-7xl font-como font-light mb-4 text-center text-white drop-shadow-lg",children:"SHOPMARA PH"}),(v=n[l])!=null&&v.subtitle?h.jsx("div",{className:"bg-[#ad688f] px-6 py-2 mb-8 bg-opacity-90 rounded",children:h.jsx("p",{className:"text-lg font-como font-light text-white",children:n[l].subtitle})}):h.jsx("div",{className:"bg-[#ad688f] px-6 py-2 mb-8 bg-opacity-90 rounded",children:h.jsx("p",{className:"text-lg font-como font-light text-white",children:"Timeless Finds, Consciously Curated"})}),h.jsxs("div",{className:"max-w-2xl text-center px-4",children:[(S=n[l])!=null&&S.link?h.jsx("a",{href:n[l].link,className:"text-white underline mb-4 block",target:"_blank",rel:"noopener noreferrer",children:n[l].link}):null,h.jsx("p",{className:"text-gray-100 mb-8 font-como font-light drop-shadow",children:"ShopMaraPH is a passion project rooted in timeless style and conscious living. We offer carefully handpicked vintage poloselegant, versatile pieces made for modern women who lead, whether in the office or off-duty. Beautifully curated, sustainably sourced."}),h.jsx(gk,{})]})]})]})},op=async()=>{try{return((await ts.getAllProducts()).data||[]).map(e=>({...e,price:Number(e.price)}))}catch(n){throw console.error("Error fetching products:",n),n}},Kb=async()=>{try{return(await op()).filter(e=>e.isNewArrival)}catch(n){throw console.error("Error fetching new arrival products:",n),n}},xk=async()=>{try{return(await op()).filter(e=>e.isSale)}catch(n){throw console.error("Error fetching sale products:",n),n}},bk=()=>{const[n,e]=E.useState([]),[t,s]=E.useState(!0),[l,a]=E.useState(null);return E.useEffect(()=>{(async()=>{try{s(!0);const d=await Kb();e(d.slice(0,8))}catch(d){console.error("Error fetching new arrivals:",d),a("Failed to load new arrivals")}finally{s(!1)}})()},[]),t?h.jsx("div",{className:"py-16 bg-white",children:h.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[h.jsx("h2",{className:"text-3xl font-bold mb-8",children:"New Drops"}),h.jsx("div",{className:"text-center py-8",children:h.jsx("p",{children:"Loading new arrivals..."})})]})}):l?h.jsx("div",{className:"py-16 bg-white",children:h.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[h.jsx("h2",{className:"text-3xl font-bold mb-8",children:"New Drops"}),h.jsx("div",{className:"text-center py-8",children:h.jsx("p",{className:"text-red-500",children:l})})]})}):n.length===0?h.jsx("div",{className:"py-16 bg-white",children:h.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[h.jsx("h2",{className:"text-3xl font-bold mb-8",children:"New Drops"}),h.jsx("div",{className:"text-center py-8",children:h.jsx("p",{children:"No new arrivals found at the moment. Check back soon!"})})]})}):h.jsx("div",{className:"py-16 bg-white",children:h.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[h.jsx("h2",{className:"text-3xl font-bold mb-8",children:"New Drops"}),h.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:n.map(c=>h.jsx("div",{className:"group relative",children:h.jsxs(pe,{to:`/product/${c.id}`,className:"block no-underline text-inherit",children:[h.jsx("div",{className:"aspect-h-1 aspect-w-1 w-full overflow-hidden bg-gray-200 group-hover:opacity-90",children:h.jsx("img",{src:c.image,alt:c.name,className:"h-full w-full object-cover object-center"})}),h.jsxs("div",{className:"mt-4",children:[h.jsx("h3",{className:"text-sm text-gray-700",children:c.name}),h.jsxs("p",{className:"mt-1 text-sm font-medium text-gray-900",children:["",c.price.toFixed(2)]})]})]})},c.id))}),h.jsx("div",{className:"text-center mt-12",children:h.jsx(pe,{to:"/products",className:"inline-block border border-black px-8 py-3 hover:bg-black hover:text-white transition-colors no-underline text-black",children:"View All Products"})})]})})},vk=()=>h.jsxs(h.Fragment,{children:[h.jsx(yk,{}),h.jsx(bk,{}),h.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8"})]}),cp=({activeCategory:n="all",onCategoryChange:e,activeSize:t,onSizeChange:s,searchKeyword:l,onKeywordChange:a,showCategoryFilter:c=!0,hideSoldProducts:d=!1,onHideSoldChange:f})=>h.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm space-y-6",children:[h.jsxs("div",{className:"mb-6",children:[h.jsx("h3",{className:"text-gray-800 font-semibold text-sm uppercase tracking-wider mb-3",children:"Search"}),h.jsx("input",{type:"text",value:l,onChange:p=>a(p.target.value),placeholder:"Search products...",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent transition-all"})]}),h.jsxs("div",{className:"mb-6",children:[h.jsx("h3",{className:"text-gray-800 font-semibold text-sm uppercase tracking-wider mb-3",children:"Availability"}),h.jsxs("div",{className:"flex items-center",children:[h.jsx("input",{type:"checkbox",id:"hideSold",checked:d,onChange:p=>f==null?void 0:f(p.target.checked),className:"form-checkbox h-4 w-4 text-black focus:ring-black rounded"}),h.jsx("label",{htmlFor:"hideSold",className:"ml-2 text-gray-700 cursor-pointer select-none",children:"Hide Sold Products"})]})]}),c&&e&&h.jsxs("div",{className:"mb-6",children:[h.jsx("h3",{className:"text-gray-800 font-semibold text-sm uppercase tracking-wider mb-3",children:"Category"}),h.jsxs("div",{className:"space-y-3",children:[h.jsxs("label",{className:"flex items-center cursor-pointer group",children:[h.jsx("input",{type:"radio",id:"all",name:"category",checked:n==="all",onChange:()=>e("all"),className:"form-radio text-black focus:ring-black h-4 w-4"}),h.jsx("span",{className:"ml-3 text-gray-700 group-hover:text-black transition-colors",children:"All Products"})]}),h.jsxs("label",{className:"flex items-center cursor-pointer group",children:[h.jsx("input",{type:"radio",id:"men",name:"category",checked:n==="men",onChange:()=>e("men"),className:"form-radio text-black focus:ring-black h-4 w-4"}),h.jsx("span",{className:"ml-3 text-gray-700 group-hover:text-black transition-colors",children:"Men"})]}),h.jsxs("label",{className:"flex items-center cursor-pointer group",children:[h.jsx("input",{type:"radio",id:"women",name:"category",checked:n==="women",onChange:()=>e("women"),className:"form-radio text-black focus:ring-black h-4 w-4"}),h.jsx("span",{className:"ml-3 text-gray-700 group-hover:text-black transition-colors",children:"Women"})]})]})]}),h.jsxs("div",{className:"mb-6",children:[h.jsx("h3",{className:"text-gray-800 font-semibold text-sm uppercase tracking-wider mb-3",children:"Size"}),h.jsxs("div",{className:"space-y-3",children:[h.jsxs("label",{className:"flex items-center cursor-pointer group",children:[h.jsx("input",{type:"radio",id:"size-all",name:"size",checked:t==="all",onChange:()=>s("all"),className:"form-radio text-black focus:ring-black h-4 w-4"}),h.jsx("span",{className:"ml-3 text-gray-700 group-hover:text-black transition-colors",children:"All Sizes"})]}),["xs","s","m","l","xl","xxl"].map(p=>h.jsxs("label",{className:"flex items-center cursor-pointer group",children:[h.jsx("input",{type:"radio",id:`size-${p}`,name:"size",checked:t===p,onChange:()=>s(p),className:"form-radio text-black focus:ring-black h-4 w-4"}),h.jsx("span",{className:"ml-3 text-gray-700 group-hover:text-black transition-colors",children:p.toUpperCase()})]},p))]})]})]}),Sk=({product:n})=>{var c;const{addToCart:e,isInCart:t}=za(),[s,l]=E.useState(!1),a=async d=>{if(d.preventDefault(),d.stopPropagation(),n.status==="Available"&&n.size)try{l(!0),await e(n)}catch(f){console.error("Error adding to cart:",f)}finally{l(!1)}};return h.jsxs("div",{className:"product-card",children:[h.jsxs("div",{className:"absolute top-0 right-0 z-10 flex flex-col gap-1 m-2",children:[n.isNewArrival&&h.jsx("div",{className:"bg-green-500 text-white text-xs font-bold px-2 py-1 rounded",children:"New Arrival"}),n.isSale&&h.jsx("div",{className:"bg-red-500 text-white text-xs font-bold px-2 py-1 rounded",children:"Sale"})]}),h.jsx(pe,{to:`/product/${n.id}`,className:"no-underline text-inherit block",children:h.jsxs("div",{className:"product-card__image-container",children:[h.jsx("img",{src:n.image,alt:n.name,className:"product-card__image"}),(n.status==="Sold"||n.status==="OnHold")&&h.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-60 flex items-center justify-center",children:h.jsx("span",{className:`text-2xl font-bold font-como ${n.status==="Sold"?"text-black":"text-yellow-800"}`,children:n.status==="Sold"?"SOLD":"ON HOLD"})})]})}),h.jsxs("div",{className:"p-4",children:[h.jsxs("div",{className:"flex items-start justify-between mb-1",style:{height:"20px"},children:[h.jsx(pe,{to:`/product/${n.id}`,className:"no-underline text-inherit flex-1",children:h.jsx("h3",{className:"product-card__title text-sm font-medium line-clamp-1 m-0",children:n.name})}),h.jsxs("span",{className:"ml-2 bg-gray-100 text-gray-800 text-xs font-medium px-2 py-0.5 rounded whitespace-nowrap",children:["Size: ",(c=n.size)==null?void 0:c.toUpperCase()]})]}),h.jsxs("div",{className:"product-card__price text-sm font-semibold mb-2",children:["",n.price.toFixed(2)]}),h.jsx("button",{type:"button",onClick:a,disabled:n.status!=="Available"||!n.size||s||t(n.id),className:`w-full py-1.5 px-3 text-sm font-medium rounded transition-colors ${n.status!=="Available"||!n.size?"bg-gray-200 text-gray-500 cursor-not-allowed":t(n.id)?"bg-green-600 text-white cursor-not-allowed":"bg-black text-white hover:bg-gray-800"}`,children:s?h.jsxs("div",{className:"flex items-center justify-center",children:[h.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Adding..."]}):n.status==="Sold"?"Sold":n.status==="OnHold"?"On Hold":t(n.id)?"In Cart":"Add to Cart"})]})]})},up=({products:n,onResetFilters:e,searchKeyword:t=""})=>h.jsxs("div",{className:"md:col-span-3",children:[t&&h.jsx("div",{className:"mb-6",children:h.jsx("h2",{className:"text-lg font-medium mb-2",children:n.length>0?`Search results for "${t}" (${n.length} ${n.length===1?"product":"products"})`:`No products found for "${t}"`})}),n.length>0?h.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-3 gap-4 md:gap-6 equal-height-grid",children:n.map(s=>h.jsx("div",{className:"h-full",children:h.jsx(Sk,{product:s})},s.id))}):h.jsxs("div",{className:"bg-white p-8 rounded shadow text-center",children:[h.jsx("p",{className:"text-gray-600",children:t?`No products found matching "${t}". Try a different search term or reset filters.`:"No products found with the selected filters."}),h.jsx("button",{onClick:e,className:"mt-4 px-4 py-2 bg-black text-white rounded",children:"Reset Filters"})]})]}),dp=(n,e="all",t="",s=!1)=>{let l=[...n];if(e!=="all"&&(l=l.filter(a=>a.size===e)),t){const a=t.toLowerCase();l=l.filter(c=>{var d;return c.name.toLowerCase().includes(a)||(((d=c.description)==null?void 0:d.toLowerCase().includes(a))??!1)})}return s&&(l=l.filter(a=>a.status!=="Sold")),l.sort((a,c)=>a.status==="Sold"&&c.status!=="Sold"?1:a.status!=="Sold"&&c.status==="Sold"?-1:0)},Nk=()=>{const[n,e]=E.useState("all"),[t,s]=E.useState(""),[l,a]=E.useState([]),[c,d]=E.useState([]),[f,p]=E.useState(!0),[g,x]=E.useState(null),[b,v]=E.useState(!1);E.useEffect(()=>{(async()=>{try{p(!0);const k=await Kb();a(k)}catch(k){console.error("Error fetching new arrival products:",k),x("Failed to load new arrival products")}finally{p(!1)}})()},[]),E.useEffect(()=>{l.length>0&&d(dp(l,n,t,b))},[l,n,t,b]);const S=()=>{e("all"),s(""),v(!1)};return f?h.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[h.jsx("h1",{className:"text-3xl font-bold mb-8",children:"New Arrivals"}),h.jsx("div",{className:"text-center py-12",children:h.jsx("p",{children:"Loading products..."})})]}):g?h.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[h.jsx("h1",{className:"text-3xl font-bold mb-8",children:"New Arrivals"}),h.jsx("div",{className:"text-center py-12",children:h.jsx("p",{className:"text-red-500",children:g})})]}):h.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[h.jsx("h1",{className:"text-3xl font-bold mb-8",children:"New Arrivals"}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8 mb-8",children:[h.jsx("div",{className:"md:col-span-1",children:h.jsx(cp,{activeSize:n,searchKeyword:t,onSizeChange:e,onKeywordChange:s,showCategoryFilter:!1,hideSoldProducts:b,onHideSoldChange:v})}),h.jsx("div",{className:"md:col-span-3",children:h.jsx(up,{products:c,onResetFilters:S,searchKeyword:t})})]})]})},wk=()=>{const[n,e]=E.useState([]),[t,s]=E.useState([]),[l,a]=E.useState(!0),[c,d]=E.useState("all"),[f,p]=E.useState(""),[g,x]=E.useState(!1);E.useEffect(()=>{(async()=>{a(!0);try{const k=await xk();e(k)}catch(k){console.error("Error fetching sale products:",k)}finally{a(!1)}})()},[]),E.useEffect(()=>{const w=dp(n,c,f,g);s(w)},[n,c,f,g]);const b=w=>{d(w)},v=w=>{p(w)},S=()=>{d("all"),p(""),x(!1)};return l?h.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[h.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Sale"}),h.jsx("div",{className:"animate-pulse",children:h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[h.jsx("div",{className:"h-64 bg-gray-200 rounded"}),h.jsx("div",{className:"h-64 bg-gray-200 rounded"}),h.jsx("div",{className:"h-64 bg-gray-200 rounded"}),h.jsx("div",{className:"h-64 bg-gray-200 rounded"})]})})]}):h.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[h.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Sale"}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[h.jsx("div",{className:"md:col-span-1",children:h.jsx(cp,{activeSize:c,searchKeyword:f,onSizeChange:b,onKeywordChange:v,showCategoryFilter:!1,hideSoldProducts:g,onHideSoldChange:x})}),h.jsx("div",{className:"md:col-span-3",children:h.jsx(up,{products:t,onResetFilters:S,searchKeyword:f})})]})]})},kk=()=>h.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[h.jsxs("div",{className:"text-center mb-16",children:[h.jsx("div",{className:"flex justify-center mb-6",children:h.jsx("img",{src:"/app-logo.jpg",alt:"ShopMara PH Logo",className:"h-28 w-auto",onError:n=>{const e=n.target;e.src="https://via.placeholder.com/180x180?text=ShopMara+PH"}})}),h.jsx("h1",{className:"text-4xl font-como font-light text-gray-900 mb-4",children:"About ShopMara PH"}),h.jsx("div",{className:"w-20 h-1 bg-[#ad688f] mx-auto"})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-12 items-center mb-16",children:[h.jsx("div",{children:h.jsx("img",{src:"/mara.png",alt:"ShopMara PH",className:"rounded-lg shadow-lg w-full h-auto object-cover",onError:n=>{const e=n.target;e.src="https://via.placeholder.com/600x800?text=ShopMara+PH"}})}),h.jsxs("div",{children:[h.jsx("h2",{className:"text-3xl font-como font-light text-gray-900 mb-6",children:"Story Time!"}),h.jsx("p",{className:"text-gray-700 mb-4 leading-relaxed font-como font-light",children:'ShopMaraPH started in 2022 on Instagram, born from a love of vintage fashion and sustainability. After a heartbreaking loss that year, we lent the name "Mara" to our business as a tribute to our angel baby.'}),h.jsx("p",{className:"text-gray-700 mb-4 leading-relaxed font-como font-light",children:"In 2023, we paused operations due to severe nausea. Little did we know, we were expecting our rainbow baby, who would one day carry the name Mara, just as it was meant to be."}),h.jsx("p",{className:"text-gray-700 mb-4 leading-relaxed font-como font-light",children:"Now a proud mom of two, I spend my days curating timeless pieces I loveelegant, confident styles that help modern women build a conscious wardrobe for work and beyond."}),h.jsx("p",{className:"text-gray-700 font-como font-light italic",children:"This journey is for her, and we can't wait to grow with you."})]})]}),h.jsx("div",{className:"bg-gray-50 rounded-lg p-8 shadow-sm",children:h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-[#ad688f]/20 text-[#ad688f] mb-4",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),h.jsx("h3",{className:"text-lg font-como font-normal mb-2",children:"Sustainable Fashion"}),h.jsx("p",{className:"text-gray-600 font-como font-light",children:"Curated pieces that are timeless and eco-conscious"})]}),h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-[#ad688f]/20 text-[#ad688f] mb-4",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})}),h.jsx("h3",{className:"text-lg font-como font-normal mb-2",children:"Made with Love"}),h.jsx("p",{className:"text-gray-600 font-como font-light",children:"Each piece is selected with purpose and meaning"})]}),h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-[#ad688f]/20 text-[#ad688f] mb-4",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v13m0-13V6a2 2 0 112 2h-2zm0 0V5.5A2.5 2.5 0 109.5 8H12zm-7 4h14M5 12a2 2 0 110-4h14a2 2 0 110 4M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"})})}),h.jsx("h3",{className:"text-lg font-como font-normal mb-2",children:"Elegant Designs"}),h.jsx("p",{className:"text-gray-600 font-como font-light",children:"Confident styles for the modern woman"})]})]})}),h.jsxs("div",{className:"mt-16 text-center",children:[h.jsx("h3",{className:"text-2xl font-como font-normal mb-6",children:"Connect With Us"}),h.jsxs("div",{className:"flex justify-center space-x-6",children:[h.jsxs("a",{href:"https://instagram.com/shopmaraph",target:"_blank",rel:"noopener noreferrer",className:"text-gray-500 hover:text-[#ad688f]",children:[h.jsx("span",{className:"sr-only",children:"Instagram"}),h.jsx("svg",{className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:h.jsx("path",{fillRule:"evenodd",d:"M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.218 2.427.465a4.902 4.902 0 011.772 1.153 4.902 4.902 0 011.153 1.772c.247.636.416 1.363.465 2.427.048 1.067.06 1.407.06 4.123v.08c0 2.643-.012 2.987-.06 4.043-.049 1.064-.218 1.791-.465 2.427a4.902 4.902 0 01-1.153 1.772 4.902 4.902 0 01-1.772 1.153c-.636.247-1.363.416-2.427.465-1.067.048-1.407.06-4.123.06h-.08c-2.643 0-2.987-.012-4.043-.06-1.064-.049-1.791-.218-2.427-.465a4.902 4.902 0 01-1.772-1.153 4.902 4.902 0 01-1.153-1.772c-.247-.636-.416-1.363-.465-2.427-.047-1.024-.06-1.379-.06-3.808v-.63c0-2.43.013-2.784.06-3.808.049-1.064.218-1.791.465-2.427a4.902 4.902 0 011.153-1.772A4.902 4.902 0 015.45 2.525c.636-.247 1.363-.416 2.427-.465C8.901 2.013 9.256 2 11.685 2h.63zm-.081 1.802h-.468c-2.456 0-2.784.011-3.807.058-.975.045-1.504.207-1.857.344-.467.182-.8.398-1.15.748-.35.35-.566.683-.748 1.15-.137.353-.3.882-.344 1.857-.047 1.023-.058 1.351-.058 3.807v.468c0 2.456.011 2.784.058 3.807.045.975.207 1.504.344 1.857.182.466.399.8.748 1.15.35.35.683.566 1.15.748.353.137.882.3 1.857.344 1.054.048 1.37.058 4.041.058h.08c2.597 0 2.917-.01 3.96-.058.976-.045 1.505-.207 1.858-.344.466-.182.8-.398 1.15-.748.35-.35.566-.683.748-1.15.137-.353.3-.882.344-1.857.048-1.055.058-1.37.058-4.041v-.08c0-2.597-.01-2.917-.058-3.96-.045-.976-.207-1.505-.344-1.858a3.097 3.097 0 00-.748-1.15 3.098 3.098 0 00-1.15-.748c-.353-.137-.882-.3-1.857-.344-1.023-.047-1.351-.058-3.807-.058zM12 6.865a5.135 5.135 0 110 10.27 5.135 5.135 0 010-10.27zm0 1.802a3.333 3.333 0 100 6.666 3.333 3.333 0 000-6.666zm5.338-3.205a1.2 1.2 0 110 2.4 1.2 1.2 0 010-2.4z",clipRule:"evenodd"})})]}),h.jsxs("a",{href:"https://facebook.com/shopmaraph",target:"_blank",rel:"noopener noreferrer",className:"text-gray-500 hover:text-[#ad688f]",children:[h.jsx("span",{className:"sr-only",children:"Facebook"}),h.jsx("svg",{className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:h.jsx("path",{fillRule:"evenodd",d:"M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z",clipRule:"evenodd"})})]}),h.jsxs("a",{href:"mailto:contact@shopmaraph.com",className:"text-gray-500 hover:text-[#ad688f]",children:[h.jsx("span",{className:"sr-only",children:"Email"}),h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})]})]})]})]}),Ck=()=>{const[n,e]=E.useState(""),[t,s]=E.useState(""),[l,a]=E.useState(""),[c,d]=E.useState(!1),[f,p]=E.useState("/"),{login:g}=st(),x=pr(),b=hr();E.useEffect(()=>{const w=new URLSearchParams(b.search).get("returnUrl");w&&p(w)},[b.search]);const v=async S=>{S.preventDefault(),a(""),d(!0);try{await g(n,t),x(f)}catch(w){a("Invalid email or password"),console.error(w)}finally{d(!1)}};return h.jsxs("div",{className:"max-w-md mx-auto px-4 py-16",children:[h.jsx("h1",{className:"text-3xl font-bold mb-6 text-center",children:"Login"}),l&&h.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",role:"alert",children:h.jsx("p",{children:l})}),f!=="/"&&h.jsx("div",{className:"bg-blue-100 border border-blue-400 text-blue-700 px-4 py-3 rounded mb-4",role:"alert",children:h.jsx("p",{children:"You need to log in to access that page"})}),h.jsxs("form",{className:"bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4",onSubmit:v,children:[h.jsxs("div",{className:"mb-4",children:[h.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"email",children:"Email"}),h.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"email",type:"email",placeholder:"Email",value:n,onChange:S=>e(S.target.value),required:!0})]}),h.jsxs("div",{className:"mb-6",children:[h.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"password",children:"Password"}),h.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline",id:"password",type:"password",placeholder:"******************",value:t,onChange:S=>s(S.target.value),required:!0})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("button",{className:`bg-black ${c?"opacity-50 cursor-not-allowed":"hover:bg-gray-800"} text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline`,type:"submit",disabled:c,children:c?"Signing In...":"Sign In"}),h.jsx(pe,{className:"inline-block align-baseline font-bold text-sm text-black hover:text-gray-800",to:"/forgot-password",children:"Forgot Password?"})]})]}),h.jsxs("p",{className:"text-center text-gray-500 text-sm",children:["Don't have an account? ",h.jsx(pe,{to:"/register",className:"text-black font-bold",children:"Sign up"})]})]})},Ek=()=>{const[n,e]=E.useState(""),[t,s]=E.useState(""),[l,a]=E.useState(""),[c,d]=E.useState(""),[f,p]=E.useState(""),[g,x]=E.useState(!1),{register:b}=st(),v=pr(),S=async w=>{if(w.preventDefault(),p(""),x(!0),l!==c){p("Passwords do not match"),x(!1);return}try{await b(n,t,l,c),v("/")}catch(k){p("Registration failed. Please check your information and try again."),console.error(k)}finally{x(!1)}};return h.jsxs("div",{className:"max-w-md mx-auto px-4 py-16",children:[h.jsx("h1",{className:"text-3xl font-bold mb-6 text-center",children:"Register"}),f&&h.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",role:"alert",children:h.jsx("p",{children:f})}),h.jsxs("form",{className:"bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4",onSubmit:S,children:[h.jsxs("div",{className:"mb-4",children:[h.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"name",children:"Name"}),h.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"name",type:"text",placeholder:"Full Name",value:n,onChange:w=>e(w.target.value),required:!0})]}),h.jsxs("div",{className:"mb-4",children:[h.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"email",children:"Email"}),h.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"email",type:"email",placeholder:"Email",value:t,onChange:w=>s(w.target.value),required:!0})]}),h.jsxs("div",{className:"mb-4",children:[h.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"password",children:"Password"}),h.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"password",type:"password",placeholder:"******************",value:l,onChange:w=>a(w.target.value),required:!0,minLength:8})]}),h.jsxs("div",{className:"mb-6",children:[h.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"password-confirmation",children:"Confirm Password"}),h.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"password-confirmation",type:"password",placeholder:"******************",value:c,onChange:w=>d(w.target.value),required:!0,minLength:8})]}),h.jsx("div",{className:"flex items-center justify-between",children:h.jsx("button",{className:`bg-black ${g?"opacity-50 cursor-not-allowed":"hover:bg-gray-800"} text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline w-full`,type:"submit",disabled:g,children:g?"Creating Account...":"Create Account"})})]}),h.jsxs("p",{className:"text-center text-gray-500 text-sm",children:["Already have an account? ",h.jsx(pe,{to:"/login",className:"text-black font-bold",children:"Sign in"})]})]})},Xb=E.createContext(void 0),jk=({children:n})=>{const{token:e,isAuthenticated:t}=st(),[s,l]=E.useState(null),[a,c]=E.useState(!1),[d,f]=E.useState(null);E.useEffect(()=>{t&&e?p():l(null)},[t,e]);const p=async()=>{if(!(!t||!e)){c(!0),f(null);try{const x=await fetch(`${va.BASE_URL}/profile`,{method:"GET",headers:{Authorization:`Bearer ${e}`,Accept:"application/json"},credentials:"include"});if(!x.ok)throw new Error("Failed to fetch profile");const b=await x.json();l(b.data.profile)}catch(x){console.error("Error fetching profile:",x),f(x instanceof Error?x.message:"An error occurred while fetching the profile")}finally{c(!1)}}},g=async x=>{if(!(!t||!e)){c(!0),f(null);try{const b=await fetch(`${va.BASE_URL}/profile`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`,Accept:"application/json"},credentials:"include",body:JSON.stringify(x)});if(!b.ok){const S=await b.json();throw new Error(S.message||"Failed to update profile")}const v=await b.json();l(v.data.profile)}catch(b){throw console.error("Error updating profile:",b),f(b instanceof Error?b.message:"An error occurred while updating the profile"),b}finally{c(!1)}}};return h.jsx(Xb.Provider,{value:{profile:s,isLoading:a,error:d,fetchProfile:p,updateProfile:g},children:n})},Jb=()=>{const n=E.useContext(Xb);if(n===void 0)throw new Error("useProfile must be used within a ProfileProvider");return n},vc="guest_id",Qb=E.createContext(void 0),Ak=({children:n})=>{const[e,t]=E.useState(null),[s,l]=E.useState(!1),[a,c]=E.useState(null),{showToast:d}=Zi(),f=async()=>{const g=localStorage.getItem(vc);if(!g){t(null);return}l(!0),c(null);try{const x={"X-Guest-ID":g},b=await rx.getProfile(x);t(b.data)}catch(x){console.error("Error fetching guest profile:",x),c(x instanceof Error?x.message:"An error occurred while fetching the profile")}finally{l(!1)}},p=async g=>{const x=localStorage.getItem(vc);if(!x){d("Guest ID not found","error");return}l(!0),c(null);try{const b={"X-Guest-ID":x},v=await rx.saveProfile(b,g);t(v.data),d("Profile saved successfully","success")}catch(b){console.error("Error saving guest profile:",b),c(b instanceof Error?b.message:"An error occurred while saving the profile"),d("Failed to save profile","error")}finally{l(!1)}};return E.useEffect(()=>{f()},[]),h.jsx(Qb.Provider,{value:{profile:e,isLoading:s,error:a,fetchProfile:f,saveProfile:p},children:n})},Zb=()=>{const n=E.useContext(Qb);if(n===void 0)throw new Error("useGuestProfile must be used within a GuestProfileProvider");return n},wh={getPublicSettings:async()=>{try{return(await we("/settings")).data}catch(n){return console.error("Error fetching public settings:",n),{delivery_fee_ncr:80,delivery_fee_outside_ncr:120,free_delivery_threshold:0,payment_options_description:"",what_happens_after_payment:""}}},getAllSettings:async n=>{const e={};return e.Authorization=`Bearer ${n}`,(await we("/admin/settings","GET",null,e)).data},updateSetting:async(n,e,t)=>{const s={};return s.Authorization=`Bearer ${n}`,(await we(`/admin/settings/${e}`,"PUT",{value:t},s)).data},updateMultipleSettings:async(n,e)=>{const t={};return t.Authorization=`Bearer ${n}`,(await we("/admin/settings","POST",{settings:e},t)).data}},Li={deliveryFeeNcr:80,deliveryFeeOutsideNcr:120,freeDeliveryThreshold:0,paymentOptionsDescription:"",whatHappensAfterPayment:"",isLoading:!0,refreshSettings:async()=>{}},Wb=E.createContext(Li),ev=()=>E.useContext(Wb),Tk=({children:n})=>{const[e,t]=E.useState(Li.deliveryFeeNcr),[s,l]=E.useState(Li.deliveryFeeOutsideNcr),[a,c]=E.useState(Li.freeDeliveryThreshold),[d,f]=E.useState(Li.paymentOptionsDescription),[p,g]=E.useState(Li.whatHappensAfterPayment),[x,b]=E.useState(!0),v=async()=>{try{b(!0);const k=await wh.getPublicSettings();t(k.delivery_fee_ncr),l(k.delivery_fee_outside_ncr),c(k.free_delivery_threshold),f(k.payment_options_description||""),g(k.what_happens_after_payment||"")}catch(k){console.error("Error fetching settings:",k)}finally{b(!1)}};E.useEffect(()=>{v()},[]);const w={deliveryFeeNcr:e,deliveryFeeOutsideNcr:s,freeDeliveryThreshold:a,paymentOptionsDescription:d,whatHappensAfterPayment:p,isLoading:x,refreshSettings:async()=>{await v()}};return h.jsx(Wb.Provider,{value:w,children:n})},Mk="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let Ok=(n=21)=>{let e="",t=crypto.getRandomValues(new Uint8Array(n|=0));for(;n--;)e+=Mk[t[n]&63];return e};const tv=[{value:"",label:"Select Province"},{value:"Metro Manila",label:"Metro Manila (NCR)"},{value:"Abra",label:"Abra"},{value:"Agusan del Norte",label:"Agusan del Norte"},{value:"Agusan del Sur",label:"Agusan del Sur"},{value:"Aklan",label:"Aklan"},{value:"Albay",label:"Albay"},{value:"Antique",label:"Antique"},{value:"Apayao",label:"Apayao"},{value:"Aurora",label:"Aurora"},{value:"Basilan",label:"Basilan"},{value:"Bataan",label:"Bataan"},{value:"Batanes",label:"Batanes"},{value:"Batangas",label:"Batangas"},{value:"Benguet",label:"Benguet"},{value:"Biliran",label:"Biliran"},{value:"Bohol",label:"Bohol"},{value:"Bukidnon",label:"Bukidnon"},{value:"Bulacan",label:"Bulacan"},{value:"Cagayan",label:"Cagayan"},{value:"Camarines Norte",label:"Camarines Norte"},{value:"Camarines Sur",label:"Camarines Sur"},{value:"Camiguin",label:"Camiguin"},{value:"Capiz",label:"Capiz"},{value:"Catanduanes",label:"Catanduanes"},{value:"Cavite",label:"Cavite"},{value:"Cebu",label:"Cebu"},{value:"Cotabato",label:"Cotabato"},{value:"Davao de Oro",label:"Davao de Oro"},{value:"Davao del Norte",label:"Davao del Norte"},{value:"Davao del Sur",label:"Davao del Sur"},{value:"Davao Occidental",label:"Davao Occidental"},{value:"Davao Oriental",label:"Davao Oriental"},{value:"Dinagat Islands",label:"Dinagat Islands"},{value:"Eastern Samar",label:"Eastern Samar"},{value:"Guimaras",label:"Guimaras"},{value:"Ifugao",label:"Ifugao"},{value:"Ilocos Norte",label:"Ilocos Norte"},{value:"Ilocos Sur",label:"Ilocos Sur"},{value:"Iloilo",label:"Iloilo"},{value:"Isabela",label:"Isabela"},{value:"Kalinga",label:"Kalinga"},{value:"La Union",label:"La Union"},{value:"Laguna",label:"Laguna"},{value:"Lanao del Norte",label:"Lanao del Norte"},{value:"Lanao del Sur",label:"Lanao del Sur"},{value:"Leyte",label:"Leyte"},{value:"Maguindanao",label:"Maguindanao"},{value:"Marinduque",label:"Marinduque"},{value:"Masbate",label:"Masbate"},{value:"Misamis Occidental",label:"Misamis Occidental"},{value:"Misamis Oriental",label:"Misamis Oriental"},{value:"Mountain Province",label:"Mountain Province"},{value:"Negros Occidental",label:"Negros Occidental"},{value:"Negros Oriental",label:"Negros Oriental"},{value:"Northern Samar",label:"Northern Samar"},{value:"Nueva Ecija",label:"Nueva Ecija"},{value:"Nueva Vizcaya",label:"Nueva Vizcaya"},{value:"Occidental Mindoro",label:"Occidental Mindoro"},{value:"Oriental Mindoro",label:"Oriental Mindoro"},{value:"Palawan",label:"Palawan"},{value:"Pampanga",label:"Pampanga"},{value:"Pangasinan",label:"Pangasinan"},{value:"Quezon",label:"Quezon"},{value:"Quirino",label:"Quirino"},{value:"Rizal",label:"Rizal"},{value:"Romblon",label:"Romblon"},{value:"Samar",label:"Samar"},{value:"Sarangani",label:"Sarangani"},{value:"Siquijor",label:"Siquijor"},{value:"Sorsogon",label:"Sorsogon"},{value:"South Cotabato",label:"South Cotabato"},{value:"Southern Leyte",label:"Southern Leyte"},{value:"Sultan Kudarat",label:"Sultan Kudarat"},{value:"Sulu",label:"Sulu"},{value:"Surigao del Norte",label:"Surigao del Norte"},{value:"Surigao del Sur",label:"Surigao del Sur"},{value:"Tarlac",label:"Tarlac"},{value:"Tawi-Tawi",label:"Tawi-Tawi"},{value:"Zambales",label:"Zambales"},{value:"Zamboanga del Norte",label:"Zamboanga del Norte"},{value:"Zamboanga del Sur",label:"Zamboanga del Sur"},{value:"Zamboanga Sibugay",label:"Zamboanga Sibugay"}],Dk=({expiryTime:n,handleExpired:e})=>{const[t,s]=E.useState(Math.abs(n));E.useEffect(()=>{if(t<=0)return;const a=setInterval(()=>{s(c=>c<=1?(clearInterval(a),0):c-1)},1e3);return()=>clearInterval(a)},[t]);const l=a=>{if(a<=0)return e(),"Expired";const c=Math.floor(a),d=Math.floor(c/60),f=c%60;return`${d}:${f.toString().padStart(2,"0")}`};return h.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-md p-4 mb-4",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-yellow-800 font-medium",children:"Products on hold"}),h.jsx("p",{className:"text-sm text-yellow-600",children:"Your selected items are reserved for:"})]}),h.jsx("div",{className:"text-2xl font-bold text-yellow-800",children:l(t)})]})})},$f={name:"",email:"",password:"",password_confirmation:"",instagramUsername:"",addressLine1:"",barangay:"",province:"",city:"",mobileNumber:"",paymentProof:null},Rk=({isOpen:n,onClose:e,totalAmount:t,onOrderSuccess:s,province:l})=>{const{user:a,isAuthenticated:c,register:d}=st(),{profile:f,updateProfile:p}=Jb(),{profile:g}=Zb(),x=ev(),{cartItems:b,clearCart:v,holdProducts:S,fetchCart:w}=za(),[k,j]=E.useState(c?"checkout":"initial"),[D,R]=E.useState(1),[O,z]=E.useState({...$f}),[H,G]=E.useState({}),[q,ne]=E.useState(!1),[fe,ue]=E.useState(!1),[te,le]=E.useState(null),[Me,xe]=E.useState(!1),[V,W]=E.useState(null);if(E.useEffect(()=>{(async()=>{if(D===2){const Q=await S();if(console.log(Q),Q.success)Q.is_hold_expired||W(Q.hold_expiry_time_in_seconds);else{e(),await w();return}}})()},[D]),E.useEffect(()=>{if(n){let ie=l||"";if(c&&a){const Q={name:a.name||"",email:a.email||""};if(f){const Ye={instagramUsername:f.instagram_username||"",addressLine1:f.address_line1||"",barangay:f.barangay||"",city:f.city||"",mobileNumber:f.mobile_number||"",province:ie||f.province||""};z(Pe=>({...Pe,...Q,...Ye}))}else z(Ye=>({...Ye,...Q,province:ie}))}else if(g){const Q={name:g.customer_name||"",email:g.email||"",instagramUsername:g.instagram_username||"",addressLine1:g.address_line1||"",barangay:g.barangay||"",city:g.city||"",mobileNumber:g.mobile_number||"",province:ie||g.province||""};z(()=>({...$f,...Q}))}else z(()=>({...$f,province:ie}));j(c?"checkout":"initial"),R(1),G({}),ue(!1),le(null),ne(!1),xe(!1)}},[n,c,a,f,g,l]),!n)return null;const re=ie=>{const{name:Q,value:Ye}=ie.target;z({...O,[Q]:Ye}),H[Q]&&G({...H,[Q]:""})},Oe=ie=>{ie.target.files&&ie.target.files[0]&&(z({...O,paymentProof:ie.target.files[0]}),H.paymentProof&&G({...H,paymentProof:""}))},T=ie=>{const{name:Q,value:Ye}=ie.target;z({...O,[Q]:Ye}),H[Q]&&G({...H,[Q]:""})},P=ie=>{const Q={};return k==="register"?(O.name.trim()||(Q.name="Name is required"),O.email.trim()?/\S+@\S+\.\S+/.test(O.email)||(Q.email="Email is invalid"):Q.email="Email is required",O.password.trim()?O.password.length<8&&(Q.password="Password must be at least 8 characters"):Q.password="Password is required",O.password!==O.password_confirmation&&(Q.password_confirmation="Passwords do not match")):ie===1?(O.name.trim()||(Q.name="Name is required"),!c&&!O.email.trim()?Q.email="Email is required":!c&&!/\S+@\S+\.\S+/.test(O.email)&&(Q.email="Email is invalid"),O.instagramUsername.trim()||(Q.instagramUsername="Instagram username is required"),O.addressLine1.trim()||(Q.addressLine1="Address is required"),O.barangay.trim()||(Q.barangay="Barangay is required"),O.city.trim()||(Q.city="City is required"),O.mobileNumber.trim()||(Q.mobileNumber="Mobile number is required"),O.province||(Q.province="Province is required")):ie===2&&(O.paymentProof||(Q.paymentProof="Proof of payment is required")),G(Q),Object.keys(Q).length===0},ee=()=>{P(D)&&R(ie=>ie<3?ie+1:ie)},Z=()=>R(ie=>ie>1?ie-1:ie),de=async ie=>{if(ie.preventDefault(),!!P(1)){ne(!0);try{await d(O.name,O.email,O.password,O.password_confirmation,JSON.stringify(b.map(Q=>({product_id:Q.product.id})))),xe(!0),j("checkout")}catch(Q){G({form:Q.message||"Registration failed"})}finally{ne(!1)}}},Te=async ie=>{if(ie.preventDefault(),!!P(D)){ne(!0),le(null);try{let Q=0;O.province&&(Q=O.province==="Metro Manila"?x.deliveryFeeNcr:x.deliveryFeeOutsideNcr);const Ye=t+Q,Pe=new FormData;if(Pe.append("customer_name",O.name),Pe.append("instagram_username",O.instagramUsername),Pe.append("address_line1",O.addressLine1),Pe.append("barangay",O.barangay),Pe.append("province",O.province),Pe.append("city",O.city),Pe.append("mobile_number",O.mobileNumber),Pe.append("payment_proof",O.paymentProof),Pe.append("shipping_fee",Q.toString()),Pe.append("grand_total",Ye.toString()),c)await p({instagram_username:O.instagramUsername,address_line1:O.addressLine1,barangay:O.barangay,province:O.province,city:O.city,mobile_number:O.mobileNumber}),await Vi.createOrder(localStorage.getItem("token"),Pe);else{let Ut=localStorage.getItem("guest_id");Ut||(Ut=Ok(),localStorage.setItem("guest_id",Ut),window.dispatchEvent(new Event("guest_id_set"))),Pe.append("guest_id",Ut),Pe.append("email",O.email),Pe.append("cart_items",JSON.stringify(b.map(mr=>({product_id:mr.product.id})))),await Vi.createGuestOrder(Pe)}ue(!0),v(),s&&s()}catch(Q){le(Q.message||"An error occurred while processing your order")}finally{ne(!1)}}},K=({title:ie})=>h.jsxs("div",{className:"flex justify-between items-center mb-4",children:[h.jsx("h3",{className:"text-xl leading-6 font-medium text-gray-900",id:"modal-headline",children:ie}),h.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 focus:outline-none","aria-label":"Close",children:"x"})]});return h.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:h.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[h.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:h.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75",onClick:e})}),h.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:""}),h.jsx("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline",children:h.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:h.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:text-left w-full",children:[!c&&k==="initial"&&h.jsxs(h.Fragment,{children:[h.jsx(K,{title:"Before you checkout"}),h.jsx("p",{className:"text-gray-600 mb-6",children:"Would you like to save your cart by creating an account, or continue as a guest?"}),h.jsxs("div",{className:"space-y-3",children:[h.jsx("button",{onClick:()=>j("register"),className:"w-full bg-[#ad688f] text-white px-4 py-3 rounded hover:bg-[#96577b] transition-colors",children:"Create an Account"}),h.jsx("button",{onClick:()=>j("checkout"),className:"w-full border border-gray-300 bg-white text-gray-700 px-4 py-3 rounded hover:bg-gray-50 transition-colors",children:"Continue as Guest"})]})]}),k==="register"&&!Me&&h.jsxs(h.Fragment,{children:[h.jsx(K,{title:"Create Your Account"}),h.jsxs("form",{onSubmit:de,className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Name"}),h.jsx("input",{type:"text",id:"name",name:"name",value:O.name,onChange:re,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-[#ad688f] focus:border-[#ad688f] sm:text-sm"}),H.name&&h.jsx("p",{className:"mt-1 text-sm text-red-600",children:H.name})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),h.jsx("input",{type:"email",id:"email",name:"email",value:O.email,onChange:re,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-[#ad688f] focus:border-[#ad688f] sm:text-sm"}),H.email&&h.jsx("p",{className:"mt-1 text-sm text-red-600",children:H.email})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),h.jsx("input",{type:"password",id:"password",name:"password",value:O.password,onChange:re,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-[#ad688f] focus:border-[#ad688f] sm:text-sm"}),H.password&&h.jsx("p",{className:"mt-1 text-sm text-red-600",children:H.password})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"password_confirmation",className:"block text-sm font-medium text-gray-700",children:"Confirm Password"}),h.jsx("input",{type:"password",id:"password_confirmation",name:"password_confirmation",value:O.password_confirmation,onChange:re,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-[#ad688f] focus:border-[#ad688f] sm:text-sm"}),H.password_confirmation&&h.jsx("p",{className:"mt-1 text-sm text-red-600",children:H.password_confirmation})]}),H.form&&h.jsx("div",{className:"mb-4 p-3 bg-red-50 text-red-700 rounded border border-red-200",children:H.form}),h.jsxs("div",{className:"pt-3",children:[h.jsx("button",{type:"submit",disabled:q,className:"w-full bg-[#ad688f] text-white px-4 py-3 rounded hover:bg-[#96577b] transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:q?"Creating Account...":"Create Account & Continue"}),h.jsx("button",{type:"button",onClick:()=>j("initial"),className:"w-full text-gray-600 mt-2 text-sm",children:"Back to options"})]})]})]}),(k==="checkout"||k==="register"&&Me)&&!fe&&h.jsxs(h.Fragment,{children:[h.jsx(K,{title:"Checkout"}),h.jsxs("div",{className:"mt-4 mb-6",children:[h.jsxs("div",{className:"flex items-center",children:[h.jsx("div",{className:`flex items-center justify-center h-8 w-8 rounded-full ${D>=1?"bg-[#ad688f] text-white":"bg-gray-200"}`,children:"1"}),h.jsx("div",{className:`flex-1 h-1 mx-2 ${D>=2?"bg-[#ad688f]":"bg-gray-200"}`}),h.jsx("div",{className:`flex items-center justify-center h-8 w-8 rounded-full ${D>=2?"bg-[#ad688f] text-white":"bg-gray-200"}`,children:"2"}),h.jsx("div",{className:`flex-1 h-1 mx-2 ${D>=3?"bg-[#ad688f]":"bg-gray-200"}`}),h.jsx("div",{className:`flex items-center justify-center h-8 w-8 rounded-full ${D>=3?"bg-[#ad688f] text-white":"bg-gray-200"}`,children:"3"})]}),h.jsxs("div",{className:"flex justify-between mt-1 text-xs text-gray-500",children:[h.jsx("span",{children:"Customer Info"}),h.jsx("span",{children:"Payment"}),h.jsx("span",{children:"Confirmation"})]})]}),te&&h.jsxs("div",{className:"bg-red-50 p-4 rounded border border-red-200 mb-4",children:[h.jsx("p",{className:"text-red-800",children:te}),h.jsx("p",{className:"text-sm text-red-600 mt-1",children:"Please try again or contact support for assistance."})]}),V&&h.jsx(Dk,{expiryTime:V,handleExpired:async()=>{await w(),e()}}),h.jsxs("form",{onSubmit:Te,children:[D===1&&h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Full Name"}),h.jsx("input",{type:"text",id:"name",name:"name",value:O.name,onChange:re,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-[#ad688f] focus:border-[#ad688f] sm:text-sm"}),H.name&&h.jsx("p",{className:"mt-1 text-sm text-red-600",children:H.name})]}),!c&&h.jsxs("div",{children:[h.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),h.jsx("input",{type:"email",id:"email",name:"email",value:O.email,onChange:re,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-[#ad688f] focus:border-[#ad688f] sm:text-sm"}),H.email&&h.jsx("p",{className:"mt-1 text-sm text-red-600",children:H.email})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"instagramUsername",className:"block text-sm font-medium text-gray-700",children:"Instagram Username"}),h.jsxs("div",{className:"mt-1 flex rounded-md shadow-sm",children:[h.jsx("span",{className:"inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500 sm:text-sm",children:"@"}),h.jsx("input",{type:"text",id:"instagramUsername",name:"instagramUsername",value:O.instagramUsername,onChange:re,className:"flex-1 block w-full border border-gray-300 rounded-none rounded-r-md shadow-sm py-2 px-3 focus:outline-none focus:ring-[#ad688f] focus:border-[#ad688f] sm:text-sm"})]}),H.instagramUsername&&h.jsx("p",{className:"mt-1 text-sm text-red-600",children:H.instagramUsername})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"addressLine1",className:"block text-sm font-medium text-gray-700",children:"Address Line 1"}),h.jsx("input",{type:"text",id:"addressLine1",name:"addressLine1",value:O.addressLine1,onChange:re,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-[#ad688f] focus:border-[#ad688f] sm:text-sm"}),H.addressLine1&&h.jsx("p",{className:"mt-1 text-sm text-red-600",children:H.addressLine1})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{htmlFor:"barangay",className:"block text-sm font-medium text-gray-700",children:"Barangay"}),h.jsx("input",{type:"text",id:"barangay",name:"barangay",value:O.barangay,onChange:re,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-[#ad688f] focus:border-[#ad688f] sm:text-sm"}),H.barangay&&h.jsx("p",{className:"mt-1 text-sm text-red-600",children:H.barangay})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"province",className:"block text-sm font-medium text-gray-700",children:"Province"}),h.jsx("select",{id:"province",name:"province",value:O.province,onChange:T,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-[#ad688f] focus:border-[#ad688f] sm:text-sm",children:tv.map(ie=>h.jsx("option",{value:ie.value,children:ie.label},ie.value))}),H.province&&h.jsx("p",{className:"mt-1 text-sm text-red-600",children:H.province})]})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700",children:"City"}),h.jsx("input",{type:"text",id:"city",name:"city",value:O.city,onChange:re,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-[#ad688f] focus:border-[#ad688f] sm:text-sm"}),H.city&&h.jsx("p",{className:"mt-1 text-sm text-red-600",children:H.city})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"mobileNumber",className:"block text-sm font-medium text-gray-700",children:"Mobile Number"}),h.jsx("input",{type:"text",id:"mobileNumber",name:"mobileNumber",value:O.mobileNumber,onChange:re,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-[#ad688f] focus:border-[#ad688f] sm:text-sm"}),H.mobileNumber&&h.jsx("p",{className:"mt-1 text-sm text-red-600",children:H.mobileNumber})]})]})]}),D===2&&h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"bg-green-50 p-4 rounded border border-green-200",children:[h.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Order Summary"}),h.jsxs("ul",{className:"text-sm text-gray-700 space-y-2",children:[h.jsxs("li",{children:[h.jsx("span",{className:"font-medium",children:"Name:"})," ",O.name]}),!c&&h.jsxs("li",{children:[h.jsx("span",{className:"font-medium",children:"Email:"})," ",O.email]}),h.jsxs("li",{children:[h.jsx("span",{className:"font-medium",children:"Instagram:"})," @",O.instagramUsername]}),h.jsxs("li",{children:[h.jsx("span",{className:"font-medium",children:"Address:"})," ",O.addressLine1,", ",O.barangay,", ",O.city,", ",O.province]}),h.jsxs("li",{children:[h.jsx("span",{className:"font-medium",children:"Mobile:"})," ",O.mobileNumber]}),h.jsxs("li",{children:[h.jsx("span",{className:"font-medium",children:"Subtotal:"})," ",t.toFixed(2)]}),h.jsxs("li",{children:[h.jsx("span",{className:"font-medium",children:"Shipping Fee:"})," ",x.isLoading?"Loading...":`${O.province?(O.province==="Metro Manila"?x.deliveryFeeNcr:x.deliveryFeeOutsideNcr).toFixed(2):"0.00"}`]}),h.jsxs("li",{children:[h.jsx("span",{className:"font-medium",children:"Grand Total:"})," ",x.isLoading?"Loading...":`${O.province?(t+(O.province==="Metro Manila"?x.deliveryFeeNcr:x.deliveryFeeOutsideNcr)).toFixed(2):t.toFixed(2)}`]})]})]}),!!x.paymentOptionsDescription&&h.jsx("div",{className:"mt-4",children:h.jsx("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:x.paymentOptionsDescription}})}),h.jsxs("div",{className:"mt-4",children:[h.jsx("label",{htmlFor:"paymentProof",className:"block text-sm font-medium text-gray-700",children:"Proof of Payment"}),h.jsx("input",{type:"file",id:"paymentProof",name:"paymentProof",accept:"image/*",onChange:Oe,className:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-black focus:border-black sm:text-sm"}),h.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Please upload a screenshot of your payment receipt."}),H.paymentProof&&h.jsx("p",{className:"mt-1 text-sm text-red-600",children:H.paymentProof})]})]}),D===3&&x.whatHappensAfterPayment&&h.jsxs("div",{className:"bg-yellow-50 p-4 rounded border border-yellow-200",children:[h.jsx("h4",{className:"font-medium text-yellow-800 mb-2",children:"What happens next?"}),h.jsx("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:x.whatHappensAfterPayment}})]}),h.jsxs("div",{className:"flex justify-between mt-6",children:[D>1&&h.jsx("button",{type:"button",onClick:Z,className:"inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:w-auto sm:text-sm",children:"Back"}),D<3&&h.jsx("button",{type:"button",onClick:ee,className:"inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-[#ad688f] text-base font-medium text-white hover:bg-[#96577b] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#ad688f] sm:ml-3 sm:w-auto sm:text-sm",children:"Continue"}),D===3&&h.jsx("button",{type:"submit",disabled:q,className:"inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-[#ad688f] text-base font-medium text-white hover:bg-[#96577b] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#ad688f] disabled:bg-gray-400 disabled:cursor-not-allowed sm:ml-3 sm:w-auto sm:text-sm",children:q?"Processing...":"Place Order"})]})]})]}),fe&&h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"bg-green-50 p-4 rounded border border-green-200",children:[h.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Your order has been placed!"}),h.jsx("p",{className:"text-gray-700 mb-2",children:"Thank you for your order. We have received your payment proof and will verify it shortly."}),h.jsxs("p",{className:"text-gray-700",children:["Your order is now on ",h.jsx("span",{className:"font-medium",children:"hold"})," and the products have been reserved for you."]})]}),x.whatHappensAfterPayment&&h.jsxs("div",{className:"bg-yellow-50 p-4 rounded border border-yellow-200",children:[h.jsx("h4",{className:"font-medium text-yellow-800 mb-2",children:"What happens next?"}),h.jsx("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:x.whatHappensAfterPayment}})]})]})]})})})]})})},Lk=()=>{const{isAuthenticated:n,user:e}=st(),[t,s]=E.useState(!1),{cartItems:l,removeFromCart:a,getTotalPrice:c,clearCart:d}=za(),{profile:f}=Jb(),{profile:p}=Zb(),{deliveryFeeNcr:g,deliveryFeeOutsideNcr:x,isLoading:b}=ev(),{showToast:v}=Zi(),[S,w]=E.useState(""),k=l.some(q=>{if(q.product.status==="Sold")return!0;if(q.product.status==="OnHold"){const ne=n?e==null?void 0:e.id:localStorage.getItem(vc),fe=q.product.onhold_by_id==ne&&q.product.onhold_by_type==(n?"user":"guest");return console.log({isHeldByCurrentUser:fe,currentUserId:ne,isAuthenticated:n,item:q,profile:f}),!fe}return!1});E.useEffect(()=>{n&&(f!=null&&f.province)?w(f.province):!n&&(p!=null&&p.province)&&w(p.province)},[n,f,p]);const j=c();let D=0;l.length>0&&(S?D=S==="Metro Manila"?g:x:D=0);const R=j+D,O=()=>{if(k){v("Please remove unavailable items from your cart before proceeding to checkout.","error");return}s(!0)},z=()=>{s(!1)},H=q=>{w(q.target.value)},G=q=>{if(q.status==="Sold")return h.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-red-100 text-red-800",children:"Sold"});if(q.status==="OnHold"){const ne=n?e==null?void 0:e.id:localStorage.getItem(vc),fe=q.onhold_by_id==ne&&q.onhold_by_type==(n?"user":"guest");return console.log("getProductStatusBadge"),console.log({isHeldByCurrentUser:fe,currentUserId:ne,isAuthenticated:n,product:q}),h.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded text-xs font-medium ${fe?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:fe?"Reserved by You":"On hold by other user"})}return null};return h.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[h.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Your Cart"}),l.length===0?h.jsxs("div",{className:"text-center py-12 bg-white shadow rounded p-8",children:[h.jsx("p",{className:"text-xl mb-6",children:"Your cart is empty"}),h.jsx(pe,{to:"/products",className:"inline-block border border-black px-8 py-3 hover:bg-black hover:text-white transition-colors no-underline text-black",children:"Continue Shopping"})]}):h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[h.jsx("div",{className:"lg:col-span-2",children:h.jsxs("div",{className:"bg-white shadow rounded overflow-hidden",children:[h.jsx("div",{className:"hidden md:block",children:h.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[h.jsx("thead",{className:"bg-gray-50",children:h.jsxs("tr",{children:[h.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),h.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),h.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),h.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),h.jsx("tbody",{className:"divide-y divide-gray-200",children:l.map(q=>{var ne;return h.jsxs("tr",{className:q.product.status!=="Available"?"bg-gray-50":"",children:[h.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:h.jsxs("div",{className:"flex items-center",children:[h.jsx("div",{className:"h-16 w-16 bg-gray-200 rounded flex-shrink-0 overflow-hidden",children:h.jsx("img",{src:q.product.image,alt:q.product.name,className:"h-full w-full object-cover"})}),h.jsxs("div",{className:"ml-4",children:[h.jsx("div",{className:"text-sm font-medium text-gray-900",children:q.product.name}),h.jsxs("div",{className:"text-sm text-gray-500",children:["Size: ",(ne=q.product.size)==null?void 0:ne.toUpperCase()]})]})]})}),h.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:h.jsxs("div",{className:"text-sm font-medium text-gray-900",children:["",Number(q.product.price).toFixed(2)]})}),h.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:G(q.product)}),h.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:h.jsx("button",{className:"text-red-600 hover:text-red-800 font-medium",onClick:()=>q.id!==void 0?a(q.id):null,children:"Remove"})})]},`desktop-${q.product.id}`)})})]})}),h.jsx("div",{className:"md:hidden",children:h.jsx("div",{className:"divide-y divide-gray-200",children:l.map(q=>{var ne;return h.jsxs("div",{className:`p-4 ${q.product.status!=="Available"?"bg-gray-50":""}`,children:[h.jsxs("div",{className:"flex mb-4",children:[h.jsx("div",{className:"h-20 w-20 bg-gray-200 rounded flex-shrink-0 overflow-hidden",children:h.jsx("img",{src:q.product.image,alt:q.product.name,className:"h-full w-full object-cover"})}),h.jsxs("div",{className:"ml-4 flex-grow",children:[h.jsx("div",{className:"text-sm font-medium text-gray-900",children:q.product.name}),h.jsxs("div",{className:"text-sm text-gray-500",children:["Size: ",(ne=q.product.size)==null?void 0:ne.toUpperCase()]}),h.jsxs("div",{className:"text-sm font-medium text-gray-900 mt-1",children:["",Number(q.product.price).toFixed(2)]}),h.jsx("div",{className:"mt-2",children:G(q.product)})]})]}),h.jsx("div",{className:"flex justify-end items-center mt-2",children:h.jsx("button",{className:"text-red-600 hover:text-red-800 font-medium",onClick:()=>q.id!==void 0?a(q.id):null,children:"Remove"})})]},`mobile-${q.product.id}`)})})}),h.jsxs("div",{className:"p-4 flex justify-between border-t border-gray-200",children:[h.jsx(pe,{to:"/products",className:"text-sm font-medium text-gray-700 hover:text-black",children:"Continue Shopping"}),h.jsx("button",{onClick:d,className:"text-sm font-medium text-red-600 hover:text-red-800",children:"Clear Cart"})]})]})}),h.jsxs("div",{className:"bg-white shadow rounded p-6",children:[h.jsx("h2",{className:"text-lg font-medium mb-4",children:"Order Summary"}),k&&h.jsx("div",{className:"mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:h.jsx("p",{className:"text-sm text-yellow-800",children:"Some items in your cart are no longer available. Please remove them before proceeding to checkout."})}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex justify-between",children:[h.jsxs("span",{className:"text-gray-600",children:["Subtotal (",l.length," ",l.length===1?"item":"items",")"]}),h.jsxs("span",{className:"font-medium",children:["",Number(j).toFixed(2)]})]}),h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsx("span",{className:"text-gray-600",children:"Shipping"}),h.jsx("select",{className:"border border-gray-300 rounded-md py-1 px-2 focus:outline-none focus:ring-black focus:border-black text-sm ml-2",value:S,onChange:H,disabled:b,children:tv.map(q=>h.jsx("option",{value:q.value,children:q.label},q.value))}),h.jsx("span",{className:"font-medium ml-2",children:S?b?"Loading...":`${Number(D).toFixed(2)}`:""})]}),h.jsxs("div",{className:"flex justify-between border-t border-gray-200 pt-4",children:[h.jsx("span",{className:"font-medium text-lg",children:"Total"}),h.jsxs("span",{className:"font-medium text-lg",children:["",Number(R).toFixed(2)]})]}),h.jsx("button",{onClick:O,disabled:k,className:`w-full py-3 px-4 font-medium rounded transition-colors ${k?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-[#ad688f] text-white hover:bg-[#96577b]"}`,children:k?"Remove Unavailable Items":"Checkout"}),n&&h.jsx(pe,{to:"/my-orders",className:"w-full text-center block text-gray-700 hover:text-black py-2 text-sm font-medium",children:"View Your Orders"})]})]})]}),h.jsx(Rk,{isOpen:t,onClose:z,totalAmount:R,province:S})]})},nv=({filteredOrders:n,selectedOrder:e,onSelectOrder:t,loading:s,error:l,tabs:a,activeTab:c,onTabChange:d,onClearFilters:f,searchQuery:p,onSearchQueryChange:g,mobileView:x=!1,adminMode:b=!1,updateStatus:v="",onUpdateStatus:S,adminNotes:w="",onAdminNotesChange:k,onStatusUpdate:j,isUpdating:D=!1,updateSuccess:R=!1,getStatusBadgeClass:O,formatDate:z})=>{var H;return h.jsxs(h.Fragment,{children:[l&&h.jsx("div",{className:"mb-4 p-4 bg-red-100 text-red-700 rounded",children:l}),b&&h.jsx("div",{className:"bg-white shadow rounded p-4 mb-6",children:h.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4",children:[h.jsxs("div",{className:"flex-1",children:[h.jsx("label",{htmlFor:"search",className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),h.jsx("input",{type:"text",id:"search",className:"w-full p-2 border border-gray-300 rounded",placeholder:"Search by name, username, or order #",value:p||"",onChange:G=>g&&g(G.target.value)})]}),h.jsx("div",{className:"mt-2 md:mt-6",children:h.jsx("button",{className:"bg-gray-100 text-gray-800 px-6 py-2 rounded inline-block hover:bg-gray-200 transition-colors",onClick:f,children:"Clear Filters"})})]})}),h.jsx("div",{className:"flex gap-2 mb-4",children:a.map(G=>h.jsxs("button",{className:`px-4 py-2 rounded ${c===G.id?"bg-black text-white":"bg-gray-100 text-gray-800"} font-medium`,onClick:()=>d(G.id),children:[G.label," ",typeof G.count=="number"&&h.jsxs("span",{children:["(",G.count,")"]})]},G.id))}),s?h.jsx("div",{className:"bg-white shadow rounded p-6 text-center",children:h.jsx("p",{className:"text-gray-600",children:"Loading orders..."})}):(n==null?void 0:n.length)===0?h.jsx("div",{className:"bg-white shadow rounded p-6",children:h.jsxs("div",{className:"text-center py-8",children:[h.jsx("h2",{className:"text-lg font-medium mb-2",children:"No orders found"}),h.jsx("p",{className:"text-gray-600 mb-4",children:"Try adjusting your filters to see more results."}),f&&h.jsx("button",{onClick:f,className:"bg-gray-100 text-gray-800 px-6 py-2 rounded inline-block hover:bg-gray-200 transition-colors",children:"Clear Filters"})]})}):h.jsxs("div",{className:"grid md:grid-cols-12 gap-6",children:[h.jsxs("div",{className:`${e&&x?"hidden":""} md:col-span-5 lg:col-span-4 bg-white shadow rounded overflow-auto`,style:{maxHeight:"calc(100vh - 200px)"},children:[h.jsxs("div",{className:"p-4 bg-gray-50 border-b border-gray-200 flex justify-between items-center",children:[h.jsxs("h2",{className:"font-semibold",children:["Orders (",n==null?void 0:n.length,")"]}),x&&e&&h.jsx("button",{className:"text-sm text-blue-600",onClick:()=>t(null),children:" Back to List"})]}),h.jsx("div",{className:"divide-y divide-gray-200",children:n==null?void 0:n.map(G=>h.jsxs("div",{className:`p-4 cursor-pointer hover:bg-gray-50 ${(e==null?void 0:e.id)===G.id?"bg-gray-100":""}`,onClick:()=>t(G),children:[h.jsxs("div",{className:"flex justify-between",children:[h.jsxs("span",{className:"font-medium",children:["Order #",G.id]}),h.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${O(G.status)}`,children:G.status.charAt(0).toUpperCase()+G.status.slice(1)})]}),h.jsx("p",{className:"text-sm text-gray-600 mt-1",children:G.customer_name}),h.jsxs("p",{className:"text-sm text-gray-600",children:["@",G.instagram_username]}),h.jsxs("div",{className:"mt-2 flex justify-between items-center",children:[h.jsx("p",{className:"text-sm text-gray-500",children:new Date(G.created_at).toLocaleDateString()}),h.jsxs("p",{className:"font-medium",children:["",parseFloat(G.total_amount.toString()).toFixed(2)]})]})]},G.id))})]}),h.jsx("div",{className:`${!e&&x?"hidden":""} md:col-span-7 lg:col-span-8 bg-white shadow rounded overflow-auto`,style:{maxHeight:"calc(100vh - 200px)"},children:e?h.jsxs("div",{className:"p-6",children:[h.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start gap-4 mb-6",children:[h.jsxs("div",{children:[h.jsxs("h2",{className:"text-xl font-semibold",children:["Order #",e.id]}),h.jsxs("p",{className:"text-sm text-gray-500",children:["Placed on ",z(e.created_at)]})]}),x&&h.jsx("button",{className:"text-sm text-blue-600",onClick:()=>t(null),children:" Back to List"})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"text-md font-medium mb-2",children:"Customer Information"}),h.jsxs("p",{className:"mb-1",children:[h.jsx("span",{className:"font-medium",children:"Name:"})," ",e.customer_name]}),h.jsxs("p",{className:"mb-1",children:[h.jsx("span",{className:"font-medium",children:"Email:"})," ",((H=e.user)==null?void 0:H.email)||"No email available"]}),h.jsxs("p",{className:"mb-1",children:[h.jsx("span",{className:"font-medium",children:"Instagram:"})," @",e.instagram_username]}),h.jsxs("p",{className:"mb-1",children:[h.jsx("span",{className:"font-medium",children:"Address:"})," ",e.address_line1,", ",e.barangay,", ",e.city,", ",e.province]}),h.jsxs("p",{className:"mb-1",children:[h.jsx("span",{className:"font-medium",children:"Mobile:"})," ",e.mobile_number]})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-md font-medium mb-2",children:"Order Information"}),h.jsxs("p",{className:"mb-1",children:[h.jsx("span",{className:"font-medium",children:"Status:"}),h.jsx("span",{className:`ml-2 px-2 py-1 text-xs rounded-full ${O(e.status)}`,children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})]}),h.jsxs("p",{className:"mb-1",children:[h.jsx("span",{className:"font-medium",children:"Payment Method:"})," ",e.payment_method]}),h.jsxs("p",{className:"mb-1",children:[h.jsx("span",{className:"font-medium",children:"Total Amount:"})," ",parseFloat(e.total_amount.toString()).toFixed(2)]}),h.jsxs("p",{className:"mb-1",children:[h.jsx("span",{className:"font-medium",children:"Shipping Fee:"})," ",parseFloat((e.shipping_fee||0).toString()).toFixed(2)]}),h.jsxs("p",{className:"mb-1",children:[h.jsx("span",{className:"font-medium",children:"Grand Total:"})," ",(parseFloat(e.total_amount.toString())+parseFloat((e.shipping_fee||0).toString())).toFixed(2)]}),e.approved_at&&h.jsxs("p",{className:"mb-1",children:[h.jsx("span",{className:"font-medium",children:"Approved:"})," ",z(e.approved_at)]})]})]}),e.payment_proof&&h.jsxs("div",{className:"mb-6",children:[h.jsx("h3",{className:"text-md font-medium mb-2",children:"Payment Proof"}),h.jsx("div",{className:"w-full max-w-sm border border-gray-200 rounded overflow-hidden",children:h.jsx("img",{src:`${va.BASE_URL.replace("api.","")}/storage/${e.payment_proof}`,alt:"Payment Proof",className:"w-full h-auto"})})]}),h.jsxs("div",{className:"mb-6",children:[h.jsx("h3",{className:"text-md font-medium mb-2",children:"Order Items"}),h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[h.jsx("thead",{className:"bg-gray-50",children:h.jsxs("tr",{children:[h.jsx("th",{scope:"col",className:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),h.jsx("th",{scope:"col",className:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Size"}),h.jsx("th",{scope:"col",className:"px-2 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantity"}),h.jsx("th",{scope:"col",className:"px-2 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"})]})}),h.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.items&&e.items.map(G=>h.jsxs("tr",{children:[h.jsx("td",{className:"px-2 py-2 text-xs sm:text-sm text-gray-900",children:G.product_name}),h.jsxs("td",{className:"px-2 py-2 text-xs sm:text-sm text-gray-500 text-right",children:["",parseFloat(G.price.toString()).toFixed(2)]})]},G.id))})]})})]}),b&&h.jsxs("div",{children:[h.jsx("h3",{className:"text-md font-medium mb-4",children:"Update Order Status"}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[h.jsxs("div",{children:[h.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),h.jsxs("select",{id:"status",className:"w-full p-2 border border-gray-300 rounded",value:v,onChange:G=>S&&S(G.target.value),children:[h.jsx("option",{value:"pending",children:"Pending"}),h.jsx("option",{value:"approved",children:"Approved"}),h.jsx("option",{value:"shipped",children:"Shipped"}),h.jsx("option",{value:"delivered",children:"Delivered"}),h.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700 mb-2",children:"Admin Notes"}),h.jsx("textarea",{id:"notes",className:"w-full p-2 border border-gray-300 rounded",value:w,onChange:G=>k&&k(G.target.value),rows:3,placeholder:"Add notes visible to customer (optional)"})]})]}),h.jsx("button",{className:"bg-black text-white px-4 py-2 rounded disabled:bg-gray-400",onClick:j,disabled:D,children:D?"Updating...":"Update Order"}),R&&h.jsx("div",{className:"mt-4 p-3 bg-green-100 text-green-700 rounded",children:"Order status updated successfully."})]})]}):h.jsx("div",{className:"p-6 text-center text-gray-500",children:h.jsx("p",{children:"Select an order to view details"})})})]})]})},zk=()=>{const{token:n}=st(),[e,t]=E.useState([]),[s,l]=E.useState([]),[a,c]=E.useState(!0),[d,f]=E.useState(null),[p,g]=E.useState(null),[x,b]=E.useState("all"),[v,S]=E.useState(!1),[w,k]=E.useState(null),j=[{id:"all",label:"All Orders"},{id:"pending",label:"Pending"},{id:"approved",label:"Approved"},{id:"shipped",label:"Shipped"},{id:"delivered",label:"Delivered"},{id:"cancelled",label:"Cancelled"}];E.useEffect(()=>{k(localStorage.getItem("guest_id"))},[]),E.useEffect(()=>{H()},[n,w]),E.useEffect(()=>{(e==null?void 0:e.length)>0&&(G(),z())},[e,x]),E.useEffect(()=>{const ue=()=>{S(window.innerWidth<768)};return ue(),window.addEventListener("resize",ue),()=>{window.removeEventListener("resize",ue)}},[]);const D=()=>{const ue={all:e==null?void 0:e.length,pending:0,approved:0,shipped:0,delivered:0,cancelled:0};return e==null||e.forEach(te=>{ue[te.status]!==void 0&&ue[te.status]++}),ue},[R,O]=E.useState(j),z=()=>{const ue=D(),te=j.map(le=>({...le,count:ue[le.id]}));O(te)},H=async()=>{if(n){c(!0),f(null);try{const te=(await Vi.getUserOrders(n)).data.orders;t(te),l(te),te.length>0&&g(te[0])}catch(ue){f(ue instanceof Error?ue.message:"An error occurred while fetching orders")}finally{c(!1)}}else if(w){c(!0),f(null);try{const te=(await Vi.getGuestOrders(w)).data.orders;t(te),l(te),te.length>0&&g(te[0])}catch(ue){f(ue instanceof Error?ue.message:"An error occurred while fetching guest orders")}finally{c(!1)}}else t([]),l([]),c(!1)},G=()=>{l(x==="all"?e:e.filter(ue=>ue.status===x))},q=ue=>{b(ue)},ne=ue=>{switch(ue){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-green-100 text-green-800";case"shipped":return"bg-blue-100 text-blue-800";case"delivered":return"bg-indigo-100 text-indigo-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},fe=ue=>{const te=new Date(ue);return te.toLocaleDateString()+" "+te.toLocaleTimeString()};return!n&&!w?h.jsx("div",{className:"container mx-auto px-4 py-8",children:h.jsxs("div",{className:"text-center py-12",children:[h.jsx("h2",{className:"text-2xl font-bold mb-4",children:"No Orders Found"}),h.jsx("p",{className:"text-gray-600 mb-4",children:"You are not logged in and have not placed any guest orders yet."}),h.jsx(pe,{to:"/products",className:"bg-black text-white px-6 py-2 rounded inline-block",children:"Browse Products"})]})}):h.jsxs("div",{className:"container mx-auto px-4 py-8",children:[h.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[h.jsx("h1",{className:"text-2xl font-bold",children:"My Orders"}),h.jsx(pe,{to:"/",className:"bg-black text-white px-4 py-2 rounded whitespace-nowrap",children:"Continue Shopping"})]}),h.jsx(nv,{filteredOrders:s,selectedOrder:p,onSelectOrder:g,loading:a,error:d,tabs:R,activeTab:x,onTabChange:q,getStatusBadgeClass:ne,formatDate:fe,adminMode:!1,mobileView:v})]})},Bk=()=>{const[n,e]=E.useState("all"),[t,s]=E.useState(""),[l,a]=E.useState([]),[c,d]=E.useState([]),[f,p]=E.useState(!0),[g,x]=E.useState(null),[b,v]=E.useState(!1);E.useEffect(()=>{(async()=>{try{p(!0);const k=await op();a(k)}catch(k){console.error("Error fetching products:",k),x("Failed to load products")}finally{p(!1)}})()},[]),E.useEffect(()=>{l.length>0&&d(dp(l,n,t,b))},[l,n,t,b]);const S=()=>{e("all"),s(""),v(!1)};return f?h.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[h.jsx("h1",{className:"text-3xl font-bold mb-8",children:"All Products"}),h.jsx("div",{className:"text-center py-12",children:h.jsx("p",{children:"Loading products..."})})]}):g?h.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[h.jsx("h1",{className:"text-3xl font-bold mb-8",children:"All Products"}),h.jsx("div",{className:"text-center py-12",children:h.jsx("p",{className:"text-red-500",children:g})})]}):h.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[h.jsx("h1",{className:"text-3xl font-bold mb-8",children:"All Products"}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8 mb-8",children:[h.jsx("div",{className:"md:col-span-1",children:h.jsx(cp,{activeSize:n,searchKeyword:t,onSizeChange:e,onKeywordChange:s,showCategoryFilter:!1,hideSoldProducts:b,onHideSoldChange:v})}),h.jsx("div",{className:"md:col-span-3",children:h.jsx(up,{products:c,onResetFilters:S,searchKeyword:t})})]})]})},_k=()=>{const{id:n}=cu(),{addToCart:e,isInCart:t}=za(),{showToast:s}=Zi(),[l,a]=E.useState(null),[c,d]=E.useState(!0),[f,p]=E.useState(null),[g,x]=E.useState(0),[b,v]=E.useState(!1);E.useEffect(()=>{(async()=>{try{const R=await ts.getProductById(n||"");a(R.data)}catch(R){console.error("Error:",R),p("Failed to load product details")}finally{d(!1)}})()},[n]);const S=async()=>{if(!(!l||l.status!=="Available"))try{v(!0),await e(l),s("Product added to cart!","success")}catch(D){console.error("Error:",D),s("Failed to add product to cart","error")}finally{v(!1)}},w=()=>{if(!l)return[];const D=[l.image];if(l.images&&l.images.length>0){const R=l.images.filter(O=>O!==l.image);D.push(...R)}return D},k=D=>{x(D)};if(c)return h.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:h.jsxs("div",{className:"text-center",children:[h.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Loading Product"}),h.jsx("p",{children:"Please wait while we fetch the product details..."})]})});if(f||!l)return h.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:h.jsxs("div",{className:"text-center",children:[h.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Product Not Found"}),h.jsx("p",{className:"text-red-500 mb-4",children:f}),h.jsx(pe,{to:"/products",className:"inline-block border border-black px-8 py-3 hover:bg-black hover:text-white transition-colors no-underline text-black",children:"Back to Products"})]})});const j=w();return h.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[h.jsxs("div",{children:[h.jsxs("div",{className:"relative aspect-square mb-4 bg-gray-100 rounded-lg overflow-hidden",children:[h.jsx("img",{src:j[g],alt:l.name,className:"w-full h-full object-cover"}),(l.status==="Sold"||l.status==="OnHold")&&h.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-60 flex items-center justify-center",children:h.jsx("span",{className:`text-2xl font-bold font-como ${l.status==="Sold"?"text-black":"text-yellow-800"}`,children:l.status==="Sold"?"SOLD":"ON HOLD"})})]}),j.length>1&&h.jsx("div",{className:"grid grid-cols-5 gap-2",children:j.map((D,R)=>h.jsx("button",{onClick:()=>k(R),className:`aspect-square bg-gray-100 rounded-lg overflow-hidden border-2 ${g===R?"border-black":"border-transparent"}`,children:h.jsx("img",{src:D,alt:`${l.name} thumbnail ${R+1}`,className:"w-full h-full object-cover"})},R))})]}),h.jsxs("div",{children:[h.jsxs("div",{className:"mb-6",children:[h.jsxs("div",{className:"flex justify-between items-start",children:[h.jsx("h1",{className:"text-2xl font-bold",children:l.name}),h.jsxs("div",{className:"flex space-x-2",children:[l.isNewArrival&&h.jsx("div",{className:"bg-green-500 text-white text-xs font-bold px-2 py-1 rounded",children:"New Arrival"}),l.isSale&&h.jsx("div",{className:"bg-red-500 text-white text-xs font-bold px-2 py-1 rounded",children:"Sale"})]})]}),h.jsx("div",{className:"mt-2",children:h.jsx("span",{className:`text-sm font-medium px-2 py-1 rounded ${l.status==="Sold"?"text-red-600":l.status==="OnHold"?"text-yellow-600":"text-green-600"}`,children:l.status})}),h.jsx("div",{className:"mt-4",children:h.jsxs("p",{className:"text-xl font-semibold",children:["",Number(l.price).toFixed(2)]})})]}),h.jsxs("div",{className:"mb-6",children:[h.jsx("h2",{className:"text-lg font-medium mb-2",children:"Description"}),h.jsx("div",{className:"text-gray-700 prose prose-sm",dangerouslySetInnerHTML:{__html:l.description||"No description available."}})]}),l.careInstructions&&h.jsxs("div",{className:"mb-6",children:[h.jsx("h2",{className:"text-lg font-medium mb-2",children:"Before You Buy"}),h.jsx("div",{className:"text-gray-700 prose prose-sm",dangerouslySetInnerHTML:{__html:l.careInstructions}})]}),h.jsx("button",{onClick:S,disabled:!l||l.status!=="Available"||b||t(l.id),className:`w-full py-3 px-6 text-center font-medium rounded-md transition-colors ${!l||l.status!=="Available"?"bg-gray-200 text-gray-500 cursor-not-allowed":t(l.id)?"bg-green-600 text-white cursor-not-allowed":"bg-black text-white hover:bg-gray-800"}`,children:b?h.jsxs("div",{className:"flex items-center justify-center",children:[h.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Adding to Cart..."]}):(l==null?void 0:l.status)==="Sold"?"Sold Out":(l==null?void 0:l.status)==="OnHold"?"On Hold":t(l==null?void 0:l.id)?"In Cart":"Add to Cart"})]})]})})},Hk=()=>{const[n,e]=E.useState([]),[t,s]=E.useState(!0),{showToast:l}=Zi(),{token:a}=st();E.useEffect(()=>{c()},[]);const c=async()=>{try{const p=(await ts.getAllProducts()).data.map(g=>({...g,price:Number(g.price)}));e(p)}catch(f){console.error("Error:",f),l("Failed to load products","error")}finally{s(!1)}},d=async f=>{if(window.confirm("Are you sure you want to delete this product?"))try{await ts.deleteProduct(a,f),l("Product deleted successfully","success"),c()}catch(p){console.error("Error:",p),l("Failed to delete product","error")}};return t?h.jsx("div",{children:"Loading..."}):h.jsxs("div",{className:"container mx-auto px-4 py-8",children:[h.jsxs("div",{className:"flex justify-between items-center mb-6",children:[h.jsx("h1",{className:"text-2xl font-bold",children:"Manage Products"}),h.jsx(pe,{to:"/admin/products/add",className:"bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700",children:"Add New Product"})]}),h.jsx("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:h.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[h.jsx("thead",{className:"bg-gray-50",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),h.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),h.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),h.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),h.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),h.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(f=>h.jsxs("tr",{children:[h.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:h.jsxs("div",{className:"flex items-center",children:[h.jsx("div",{className:"h-10 w-10 flex-shrink-0",children:h.jsx("img",{className:"h-10 w-10 rounded-full object-cover",src:f.image,alt:f.name})}),h.jsx("div",{className:"ml-4",children:h.jsx("div",{className:"text-sm font-medium text-gray-900",children:f.name})})]})}),h.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:h.jsxs("div",{className:"text-sm text-gray-900",children:["",f.price.toFixed(2)]})}),h.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:h.jsx("div",{className:"text-sm text-gray-900",children:f.category})}),h.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:h.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${f.status==="Available"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:f.status})}),h.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[h.jsx(pe,{to:`/admin/products/edit/${f.id}`,className:"text-indigo-600 hover:text-indigo-900 mr-4",children:"Edit"}),h.jsx("button",{onClick:()=>d(f.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},f.id))})]})})]})},Uk=()=>{const n=pr();return E.useEffect(()=>{n("/admin-orders")},[n]),h.jsx("div",{className:"bg-white shadow rounded-lg p-6 text-center",children:h.jsx("p",{className:"text-gray-700",children:"Redirecting to the order management system..."})})},Pk=({token:n})=>{const[e,t]=E.useState([]),[s,l]=E.useState(!0),[a,c]=E.useState(null),d=pr(),f=async()=>{try{l(!0),c(null);const S=[...await Rs.getAllAnnouncements(n)].sort((w,k)=>w.displayOrder-k.displayOrder);t(S)}catch(v){c("Failed to load announcements. Please try again."),console.error("Error fetching announcements:",v)}finally{l(!1)}};E.useEffect(()=>{f()},[n]);const p=async(v,S)=>{try{await Rs.toggleAnnouncementStatus(n,v,!S),t(w=>w.map(k=>k.id===v?{...k,isActive:!S}:k))}catch(w){c("Failed to update announcement status. Please try again."),console.error("Error updating announcement status:",w)}},g=async v=>{if(window.confirm("Are you sure you want to delete this announcement?"))try{await Rs.deleteAnnouncement(n,v),t(S=>S.filter(w=>w.id!==v))}catch(S){c("Failed to delete announcement. Please try again."),console.error("Error deleting announcement:",S)}},x=v=>{d(`/admin/announcements/edit/${v}`)},b=()=>{d("/admin/announcements/new")};return s?h.jsx("div",{className:"p-4",children:"Loading announcements..."}):h.jsxs("div",{className:"p-4",children:[h.jsxs("div",{className:"flex justify-between items-center mb-6",children:[h.jsx("h2",{className:"text-2xl font-como",children:"Manage Announcements"}),h.jsx("button",{onClick:b,className:"bg-black text-white px-4 py-2 hover:bg-gray-800",children:"Create New Announcement"})]}),a&&h.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:a}),e.length===0?h.jsx("div",{className:"text-gray-500",children:"No announcements found. Create your first one!"}):h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"min-w-full bg-white",children:[h.jsx("thead",{className:"bg-gray-100",children:h.jsxs("tr",{children:[h.jsx("th",{className:"py-2 px-4 text-left",children:"Order"}),h.jsx("th",{className:"py-2 px-4 text-left",children:"Text"}),h.jsx("th",{className:"py-2 px-4 text-left",children:"Status"}),h.jsx("th",{className:"py-2 px-4 text-left",children:"Button"}),h.jsx("th",{className:"py-2 px-4 text-left",children:"Colors"}),h.jsx("th",{className:"py-2 px-4 text-left",children:"Actions"})]})}),h.jsx("tbody",{children:e.map(v=>h.jsxs("tr",{className:"border-t",children:[h.jsx("td",{className:"py-2 px-4",children:v.displayOrder}),h.jsx("td",{className:"py-2 px-4",children:v.text}),h.jsx("td",{className:"py-2 px-4",children:h.jsx("span",{className:`inline-block px-2 py-1 rounded ${v.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:v.isActive?"Active":"Inactive"})}),h.jsx("td",{className:"py-2 px-4",children:v.buttonText?h.jsxs("span",{className:"text-sm",children:[v.buttonText,"  ",v.buttonLink]}):h.jsx("span",{className:"text-gray-400",children:"None"})}),h.jsx("td",{className:"py-2 px-4",children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:v.backgroundColor},title:`Background: ${v.backgroundColor}`}),h.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:v.textColor},title:`Text: ${v.textColor}`})]})}),h.jsx("td",{className:"py-2 px-4",children:h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>x(v.id),className:"text-blue-600 hover:text-blue-800",children:"Edit"}),h.jsx("button",{onClick:()=>p(v.id,v.isActive),className:"text-yellow-600 hover:text-yellow-800",children:v.isActive?"Deactivate":"Activate"}),h.jsx("button",{onClick:()=>g(v.id),className:"text-red-600 hover:text-red-800",children:"Delete"})]})})]},v.id))})]})})]})},Ik=({message:n,type:e,isVisible:t,onClose:s,autoClose:l=!0,duration:a=3e3})=>{if(E.useEffect(()=>{let d;return t&&l&&(d=setTimeout(()=>{s()},a)),()=>{d&&clearTimeout(d)}},[t,l,a,s]),!t)return null;const c={success:"bg-green-500",error:"bg-red-500",warning:"bg-yellow-500",info:"bg-blue-500"}[e];return h.jsx("div",{className:"fixed bottom-4 right-4 z-50 flex flex-col items-end",children:h.jsxs("div",{className:`${c} text-white px-4 py-3 rounded-md shadow-lg flex items-center max-w-sm`,children:[h.jsx("div",{className:"flex-grow mr-2",children:n}),h.jsx("button",{onClick:s,className:"text-white hover:text-gray-200 focus:outline-none",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:h.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})})},Vk=({isOpen:n,onClose:e,children:t,title:s,widthClass:l="max-w-lg"})=>n?h.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:h.jsxs("div",{className:`bg-white rounded shadow-lg w-full ${l} mx-4 relative`,children:[h.jsxs("div",{className:"flex justify-between items-center border-b px-6 py-4",children:[h.jsx("h3",{className:"text-lg font-semibold",children:s}),h.jsx("button",{onClick:e,className:"text-gray-500 hover:text-black text-2xl font-bold",children:""})]}),h.jsx("div",{className:"p-6",children:t})]})}):null;function St(n){this.content=n}St.prototype={constructor:St,find:function(n){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===n)return e;return-1},get:function(n){var e=this.find(n);return e==-1?void 0:this.content[e+1]},update:function(n,e,t){var s=t&&t!=n?this.remove(t):this,l=s.find(n),a=s.content.slice();return l==-1?a.push(t||n,e):(a[l+1]=e,t&&(a[l]=t)),new St(a)},remove:function(n){var e=this.find(n);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new St(t)},addToStart:function(n,e){return new St([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var t=this.remove(n).content.slice();return t.push(n,e),new St(t)},addBefore:function(n,e,t){var s=this.remove(e),l=s.content.slice(),a=s.find(n);return l.splice(a==-1?l.length:a,0,e,t),new St(l)},forEach:function(n){for(var e=0;e<this.content.length;e+=2)n(this.content[e],this.content[e+1])},prepend:function(n){return n=St.from(n),n.size?new St(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=St.from(n),n.size?new St(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=St.from(n);for(var t=0;t<n.content.length;t+=2)e=e.remove(n.content[t]);return e},toObject:function(){var n={};return this.forEach(function(e,t){n[e]=t}),n},get size(){return this.content.length>>1}};St.from=function(n){if(n instanceof St)return n;var e=[];if(n)for(var t in n)e.push(t,n[t]);return new St(e)};function rv(n,e,t){for(let s=0;;s++){if(s==n.childCount||s==e.childCount)return n.childCount==e.childCount?null:t;let l=n.child(s),a=e.child(s);if(l==a){t+=l.nodeSize;continue}if(!l.sameMarkup(a))return t;if(l.isText&&l.text!=a.text){for(let c=0;l.text[c]==a.text[c];c++)t++;return t}if(l.content.size||a.content.size){let c=rv(l.content,a.content,t+1);if(c!=null)return c}t+=l.nodeSize}}function sv(n,e,t,s){for(let l=n.childCount,a=e.childCount;;){if(l==0||a==0)return l==a?null:{a:t,b:s};let c=n.child(--l),d=e.child(--a),f=c.nodeSize;if(c==d){t-=f,s-=f;continue}if(!c.sameMarkup(d))return{a:t,b:s};if(c.isText&&c.text!=d.text){let p=0,g=Math.min(c.text.length,d.text.length);for(;p<g&&c.text[c.text.length-p-1]==d.text[d.text.length-p-1];)p++,t--,s--;return{a:t,b:s}}if(c.content.size||d.content.size){let p=sv(c.content,d.content,t-1,s-1);if(p)return p}t-=f,s-=f}}class X{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let s=0;s<e.length;s++)this.size+=e[s].nodeSize}nodesBetween(e,t,s,l=0,a){for(let c=0,d=0;d<t;c++){let f=this.content[c],p=d+f.nodeSize;if(p>e&&s(f,l+d,a||null,c)!==!1&&f.content.size){let g=d+1;f.nodesBetween(Math.max(0,e-g),Math.min(f.content.size,t-g),s,l+g)}d=p}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,s,l){let a="",c=!0;return this.nodesBetween(e,t,(d,f)=>{let p=d.isText?d.text.slice(Math.max(e,f)-f,t-f):d.isLeaf?l?typeof l=="function"?l(d):l:d.type.spec.leafText?d.type.spec.leafText(d):"":"";d.isBlock&&(d.isLeaf&&p||d.isTextblock)&&s&&(c?c=!1:a+=s),a+=p},0),a}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,s=e.firstChild,l=this.content.slice(),a=0;for(t.isText&&t.sameMarkup(s)&&(l[l.length-1]=t.withText(t.text+s.text),a=1);a<e.content.length;a++)l.push(e.content[a]);return new X(l,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let s=[],l=0;if(t>e)for(let a=0,c=0;c<t;a++){let d=this.content[a],f=c+d.nodeSize;f>e&&((c<e||f>t)&&(d.isText?d=d.cut(Math.max(0,e-c),Math.min(d.text.length,t-c)):d=d.cut(Math.max(0,e-c-1),Math.min(d.content.size,t-c-1))),s.push(d),l+=d.nodeSize),c=f}return new X(s,l)}cutByIndex(e,t){return e==t?X.empty:e==0&&t==this.content.length?this:new X(this.content.slice(e,t))}replaceChild(e,t){let s=this.content[e];if(s==t)return this;let l=this.content.slice(),a=this.size+t.nodeSize-s.nodeSize;return l[e]=t,new X(l,a)}addToStart(e){return new X([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new X(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,s=0;t<this.content.length;t++){let l=this.content[t];e(l,s,t),s+=l.nodeSize}}findDiffStart(e,t=0){return rv(this,e,t)}findDiffEnd(e,t=this.size,s=e.size){return sv(this,e,t,s)}findIndex(e,t=-1){if(e==0)return tc(0,e);if(e==this.size)return tc(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let s=0,l=0;;s++){let a=this.child(s),c=l+a.nodeSize;if(c>=e)return c==e||t>0?tc(s+1,c):tc(s,l);l=c}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return X.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new X(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return X.empty;let t,s=0;for(let l=0;l<e.length;l++){let a=e[l];s+=a.nodeSize,l&&a.isText&&e[l-1].sameMarkup(a)?(t||(t=e.slice(0,l)),t[t.length-1]=a.withText(t[t.length-1].text+a.text)):t&&t.push(a)}return new X(t||e,s)}static from(e){if(!e)return X.empty;if(e instanceof X)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new X([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}X.empty=new X([],0);const Gf={index:0,offset:0};function tc(n,e){return Gf.index=n,Gf.offset=e,Gf}function Sc(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let s=0;s<n.length;s++)if(!Sc(n[s],e[s]))return!1}else{for(let s in n)if(!(s in e)||!Sc(n[s],e[s]))return!1;for(let s in e)if(!(s in n))return!1}return!0}let Ve=class kh{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,s=!1;for(let l=0;l<e.length;l++){let a=e[l];if(this.eq(a))return e;if(this.type.excludes(a.type))t||(t=e.slice(0,l));else{if(a.type.excludes(this.type))return e;!s&&a.type.rank>this.type.rank&&(t||(t=e.slice(0,l)),t.push(this),s=!0),t&&t.push(a)}}return t||(t=e.slice()),s||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Sc(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let s=e.marks[t.type];if(!s)throw new RangeError(`There is no mark type ${t.type} in this schema`);let l=s.create(t.attrs);return s.checkAttrs(l.attrs),l}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let s=0;s<e.length;s++)if(!e[s].eq(t[s]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return kh.none;if(e instanceof kh)return[e];let t=e.slice();return t.sort((s,l)=>s.type.rank-l.type.rank),t}};Ve.none=[];class Nc extends Error{}class se{constructor(e,t,s){this.content=e,this.openStart=t,this.openEnd=s}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let s=lv(this.content,e+this.openStart,t);return s&&new se(s,this.openStart,this.openEnd)}removeBetween(e,t){return new se(iv(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return se.empty;let s=t.openStart||0,l=t.openEnd||0;if(typeof s!="number"||typeof l!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new se(X.fromJSON(e,t.content),s,l)}static maxOpen(e,t=!0){let s=0,l=0;for(let a=e.firstChild;a&&!a.isLeaf&&(t||!a.type.spec.isolating);a=a.firstChild)s++;for(let a=e.lastChild;a&&!a.isLeaf&&(t||!a.type.spec.isolating);a=a.lastChild)l++;return new se(e,s,l)}}se.empty=new se(X.empty,0,0);function iv(n,e,t){let{index:s,offset:l}=n.findIndex(e),a=n.maybeChild(s),{index:c,offset:d}=n.findIndex(t);if(l==e||a.isText){if(d!=t&&!n.child(c).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(s!=c)throw new RangeError("Removing non-flat range");return n.replaceChild(s,a.copy(iv(a.content,e-l-1,t-l-1)))}function lv(n,e,t,s){let{index:l,offset:a}=n.findIndex(e),c=n.maybeChild(l);if(a==e||c.isText)return n.cut(0,e).append(t).append(n.cut(e));let d=lv(c.content,e-a-1,t);return d&&n.replaceChild(l,c.copy(d))}function qk(n,e,t){if(t.openStart>n.depth)throw new Nc("Inserted content deeper than insertion position");if(n.depth-t.openStart!=e.depth-t.openEnd)throw new Nc("Inconsistent open depths");return av(n,e,t,0)}function av(n,e,t,s){let l=n.index(s),a=n.node(s);if(l==e.index(s)&&s<n.depth-t.openStart){let c=av(n,e,t,s+1);return a.copy(a.content.replaceChild(l,c))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&n.depth==s&&e.depth==s){let c=n.parent,d=c.content;return zs(c,d.cut(0,n.parentOffset).append(t.content).append(d.cut(e.parentOffset)))}else{let{start:c,end:d}=Fk(t,n);return zs(a,cv(n,c,d,e,s))}else return zs(a,wc(n,e,s))}function ov(n,e){if(!e.type.compatibleContent(n.type))throw new Nc("Cannot join "+e.type.name+" onto "+n.type.name)}function Ch(n,e,t){let s=n.node(t);return ov(s,e.node(t)),s}function Ls(n,e){let t=e.length-1;t>=0&&n.isText&&n.sameMarkup(e[t])?e[t]=n.withText(e[t].text+n.text):e.push(n)}function ua(n,e,t,s){let l=(e||n).node(t),a=0,c=e?e.index(t):l.childCount;n&&(a=n.index(t),n.depth>t?a++:n.textOffset&&(Ls(n.nodeAfter,s),a++));for(let d=a;d<c;d++)Ls(l.child(d),s);e&&e.depth==t&&e.textOffset&&Ls(e.nodeBefore,s)}function zs(n,e){return n.type.checkContent(e),n.copy(e)}function cv(n,e,t,s,l){let a=n.depth>l&&Ch(n,e,l+1),c=s.depth>l&&Ch(t,s,l+1),d=[];return ua(null,n,l,d),a&&c&&e.index(l)==t.index(l)?(ov(a,c),Ls(zs(a,cv(n,e,t,s,l+1)),d)):(a&&Ls(zs(a,wc(n,e,l+1)),d),ua(e,t,l,d),c&&Ls(zs(c,wc(t,s,l+1)),d)),ua(s,null,l,d),new X(d)}function wc(n,e,t){let s=[];if(ua(null,n,t,s),n.depth>t){let l=Ch(n,e,t+1);Ls(zs(l,wc(n,e,t+1)),s)}return ua(e,null,t,s),new X(s)}function Fk(n,e){let t=e.depth-n.openStart,l=e.node(t).copy(n.content);for(let a=t-1;a>=0;a--)l=e.node(a).copy(X.from(l));return{start:l.resolveNoCache(n.openStart+t),end:l.resolveNoCache(l.content.size-n.openEnd-t)}}class Sa{constructor(e,t,s){this.pos=e,this.path=t,this.parentOffset=s,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let s=this.pos-this.path[this.path.length-1],l=e.child(t);return s?e.child(t).cut(s):l}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let s=this.path[t*3],l=t==0?0:this.path[t*3-1]+1;for(let a=0;a<e;a++)l+=s.child(a).nodeSize;return l}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return Ve.none;if(this.textOffset)return e.child(t).marks;let s=e.maybeChild(t-1),l=e.maybeChild(t);if(!s){let d=s;s=l,l=d}let a=s.marks;for(var c=0;c<a.length;c++)a[c].type.spec.inclusive===!1&&(!l||!a[c].isInSet(l.marks))&&(a=a[c--].removeFromSet(a));return a}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let s=t.marks,l=e.parent.maybeChild(e.index());for(var a=0;a<s.length;a++)s[a].type.spec.inclusive===!1&&(!l||!s[a].isInSet(l.marks))&&(s=s[a--].removeFromSet(s));return s}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let s=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);s>=0;s--)if(e.pos<=this.end(s)&&(!t||t(this.node(s))))return new kc(this,e,s);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let s=[],l=0,a=t;for(let c=e;;){let{index:d,offset:f}=c.content.findIndex(a),p=a-f;if(s.push(c,d,l+f),!p||(c=c.child(d),c.isText))break;a=p-1,l+=f+1}return new Sa(t,s,a)}static resolveCached(e,t){let s=lx.get(e);if(s)for(let a=0;a<s.elts.length;a++){let c=s.elts[a];if(c.pos==t)return c}else lx.set(e,s=new $k);let l=s.elts[s.i]=Sa.resolve(e,t);return s.i=(s.i+1)%Gk,l}}class $k{constructor(){this.elts=[],this.i=0}}const Gk=12,lx=new WeakMap;class kc{constructor(e,t,s){this.$from=e,this.$to=t,this.depth=s}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const Yk=Object.create(null);let Jr=class Eh{constructor(e,t,s,l=Ve.none){this.type=e,this.attrs=t,this.marks=l,this.content=s||X.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,s,l=0){this.content.nodesBetween(e,t,s,l,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,s,l){return this.content.textBetween(e,t,s,l)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,s){return this.type==e&&Sc(this.attrs,t||e.defaultAttrs||Yk)&&Ve.sameSet(this.marks,s||Ve.none)}copy(e=null){return e==this.content?this:new Eh(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Eh(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,s=!1){if(e==t)return se.empty;let l=this.resolve(e),a=this.resolve(t),c=s?0:l.sharedDepth(t),d=l.start(c),p=l.node(c).content.cut(l.pos-d,a.pos-d);return new se(p,l.depth-c,a.depth-c)}replace(e,t,s){return qk(this.resolve(e),this.resolve(t),s)}nodeAt(e){for(let t=this;;){let{index:s,offset:l}=t.content.findIndex(e);if(t=t.maybeChild(s),!t)return null;if(l==e||t.isText)return t;e-=l+1}}childAfter(e){let{index:t,offset:s}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:s}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:s}=this.content.findIndex(e);if(s<e)return{node:this.content.child(t),index:t,offset:s};let l=this.content.child(t-1);return{node:l,index:t-1,offset:s-l.nodeSize}}resolve(e){return Sa.resolveCached(this,e)}resolveNoCache(e){return Sa.resolve(this,e)}rangeHasMark(e,t,s){let l=!1;return t>e&&this.nodesBetween(e,t,a=>(s.isInSet(a.marks)&&(l=!0),!l)),l}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),uv(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,s=X.empty,l=0,a=s.childCount){let c=this.contentMatchAt(e).matchFragment(s,l,a),d=c&&c.matchFragment(this.content,t);if(!d||!d.validEnd)return!1;for(let f=l;f<a;f++)if(!this.type.allowsMarks(s.child(f).marks))return!1;return!0}canReplaceWith(e,t,s,l){if(l&&!this.type.allowsMarks(l))return!1;let a=this.contentMatchAt(e).matchType(s),c=a&&a.matchFragment(this.content,t);return c?c.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Ve.none;for(let t=0;t<this.marks.length;t++){let s=this.marks[t];s.type.checkAttrs(s.attrs),e=s.addToSet(e)}if(!Ve.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let s;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");s=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,s)}let l=X.fromJSON(e,t.content),a=e.nodeType(t.type).create(t.attrs,l,s);return a.type.checkAttrs(a.attrs),a}};Jr.prototype.text=void 0;class Cc extends Jr{constructor(e,t,s,l){if(super(e,t,null,l),!s)throw new RangeError("Empty text nodes are not allowed");this.text=s}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):uv(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Cc(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Cc(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function uv(n,e){for(let t=n.length-1;t>=0;t--)e=n[t].type.name+"("+e+")";return e}class Us{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let s=new Kk(e,t);if(s.next==null)return Us.empty;let l=dv(s);s.next&&s.err("Unexpected trailing text");let a=tC(eC(l));return nC(a,s),a}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,s=e.childCount){let l=this;for(let a=t;l&&a<s;a++)l=l.matchType(e.child(a).type);return l}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let s=0;s<e.next.length;s++)if(this.next[t].type==e.next[s].type)return!0;return!1}fillBefore(e,t=!1,s=0){let l=[this];function a(c,d){let f=c.matchFragment(e,s);if(f&&(!t||f.validEnd))return X.from(d.map(p=>p.createAndFill()));for(let p=0;p<c.next.length;p++){let{type:g,next:x}=c.next[p];if(!(g.isText||g.hasRequiredAttrs())&&l.indexOf(x)==-1){l.push(x);let b=a(x,d.concat(g));if(b)return b}}return null}return a(this,[])}findWrapping(e){for(let s=0;s<this.wrapCache.length;s+=2)if(this.wrapCache[s]==e)return this.wrapCache[s+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),s=[{match:this,type:null,via:null}];for(;s.length;){let l=s.shift(),a=l.match;if(a.matchType(e)){let c=[];for(let d=l;d.type;d=d.via)c.push(d.type);return c.reverse()}for(let c=0;c<a.next.length;c++){let{type:d,next:f}=a.next[c];!d.isLeaf&&!d.hasRequiredAttrs()&&!(d.name in t)&&(!l.type||f.validEnd)&&(s.push({match:d.contentMatch,type:d,via:l}),t[d.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(s){e.push(s);for(let l=0;l<s.next.length;l++)e.indexOf(s.next[l].next)==-1&&t(s.next[l].next)}return t(this),e.map((s,l)=>{let a=l+(s.validEnd?"*":" ")+" ";for(let c=0;c<s.next.length;c++)a+=(c?", ":"")+s.next[c].type.name+"->"+e.indexOf(s.next[c].next);return a}).join(`
`)}}Us.empty=new Us(!0);class Kk{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function dv(n){let e=[];do e.push(Xk(n));while(n.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function Xk(n){let e=[];do e.push(Jk(n));while(n.next&&n.next!=")"&&n.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function Jk(n){let e=Wk(n);for(;;)if(n.eat("+"))e={type:"plus",expr:e};else if(n.eat("*"))e={type:"star",expr:e};else if(n.eat("?"))e={type:"opt",expr:e};else if(n.eat("{"))e=Qk(n,e);else break;return e}function ax(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let e=Number(n.next);return n.pos++,e}function Qk(n,e){let t=ax(n),s=t;return n.eat(",")&&(n.next!="}"?s=ax(n):s=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:t,max:s,expr:e}}function Zk(n,e){let t=n.nodeTypes,s=t[e];if(s)return[s];let l=[];for(let a in t){let c=t[a];c.isInGroup(e)&&l.push(c)}return l.length==0&&n.err("No node type or group '"+e+"' found"),l}function Wk(n){if(n.eat("(")){let e=dv(n);return n.eat(")")||n.err("Missing closing paren"),e}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let e=Zk(n,n.next).map(t=>(n.inline==null?n.inline=t.isInline:n.inline!=t.isInline&&n.err("Mixing inline and block content"),{type:"name",value:t}));return n.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function eC(n){let e=[[]];return l(a(n,0),t()),e;function t(){return e.push([])-1}function s(c,d,f){let p={term:f,to:d};return e[c].push(p),p}function l(c,d){c.forEach(f=>f.to=d)}function a(c,d){if(c.type=="choice")return c.exprs.reduce((f,p)=>f.concat(a(p,d)),[]);if(c.type=="seq")for(let f=0;;f++){let p=a(c.exprs[f],d);if(f==c.exprs.length-1)return p;l(p,d=t())}else if(c.type=="star"){let f=t();return s(d,f),l(a(c.expr,f),f),[s(f)]}else if(c.type=="plus"){let f=t();return l(a(c.expr,d),f),l(a(c.expr,f),f),[s(f)]}else{if(c.type=="opt")return[s(d)].concat(a(c.expr,d));if(c.type=="range"){let f=d;for(let p=0;p<c.min;p++){let g=t();l(a(c.expr,f),g),f=g}if(c.max==-1)l(a(c.expr,f),f);else for(let p=c.min;p<c.max;p++){let g=t();s(f,g),l(a(c.expr,f),g),f=g}return[s(f)]}else{if(c.type=="name")return[s(d,void 0,c.value)];throw new Error("Unknown expr type")}}}}function fv(n,e){return e-n}function ox(n,e){let t=[];return s(e),t.sort(fv);function s(l){let a=n[l];if(a.length==1&&!a[0].term)return s(a[0].to);t.push(l);for(let c=0;c<a.length;c++){let{term:d,to:f}=a[c];!d&&t.indexOf(f)==-1&&s(f)}}}function tC(n){let e=Object.create(null);return t(ox(n,0));function t(s){let l=[];s.forEach(c=>{n[c].forEach(({term:d,to:f})=>{if(!d)return;let p;for(let g=0;g<l.length;g++)l[g][0]==d&&(p=l[g][1]);ox(n,f).forEach(g=>{p||l.push([d,p=[]]),p.indexOf(g)==-1&&p.push(g)})})});let a=e[s.join(",")]=new Us(s.indexOf(n.length-1)>-1);for(let c=0;c<l.length;c++){let d=l[c][1].sort(fv);a.next.push({type:l[c][0],next:e[d.join(",")]||t(d)})}return a}}function nC(n,e){for(let t=0,s=[n];t<s.length;t++){let l=s[t],a=!l.validEnd,c=[];for(let d=0;d<l.next.length;d++){let{type:f,next:p}=l.next[d];c.push(f.name),a&&!(f.isText||f.hasRequiredAttrs())&&(a=!1),s.indexOf(p)==-1&&s.push(p)}a&&e.err("Only non-generatable nodes ("+c.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function hv(n){let e=Object.create(null);for(let t in n){let s=n[t];if(!s.hasDefault)return null;e[t]=s.default}return e}function pv(n,e){let t=Object.create(null);for(let s in n){let l=e&&e[s];if(l===void 0){let a=n[s];if(a.hasDefault)l=a.default;else throw new RangeError("No value supplied for attribute "+s)}t[s]=l}return t}function mv(n,e,t,s){for(let l in e)if(!(l in n))throw new RangeError(`Unsupported attribute ${l} for ${t} of type ${l}`);for(let l in n){let a=n[l];a.validate&&a.validate(e[l])}}function gv(n,e){let t=Object.create(null);if(e)for(let s in e)t[s]=new sC(n,s,e[s]);return t}let cx=class yv{constructor(e,t,s){this.name=e,this.schema=t,this.spec=s,this.markSet=null,this.groups=s.group?s.group.split(" "):[],this.attrs=gv(e,s.attrs),this.defaultAttrs=hv(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(s.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Us.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:pv(this.attrs,e)}create(e=null,t,s){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Jr(this,this.computeAttrs(e),X.from(t),Ve.setFrom(s))}createChecked(e=null,t,s){return t=X.from(t),this.checkContent(t),new Jr(this,this.computeAttrs(e),t,Ve.setFrom(s))}createAndFill(e=null,t,s){if(e=this.computeAttrs(e),t=X.from(t),t.size){let c=this.contentMatch.fillBefore(t);if(!c)return null;t=c.append(t)}let l=this.contentMatch.matchFragment(t),a=l&&l.fillBefore(X.empty,!0);return a?new Jr(this,e,t.append(a),Ve.setFrom(s)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let s=0;s<e.childCount;s++)if(!this.allowsMarks(e.child(s).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){mv(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let s=0;s<e.length;s++)this.allowsMarkType(e[s].type)?t&&t.push(e[s]):t||(t=e.slice(0,s));return t?t.length?t:Ve.none:e}static compile(e,t){let s=Object.create(null);e.forEach((a,c)=>s[a]=new yv(a,t,c));let l=t.spec.topNode||"doc";if(!s[l])throw new RangeError("Schema is missing its top node type ('"+l+"')");if(!s.text)throw new RangeError("Every schema needs a 'text' type");for(let a in s.text.attrs)throw new RangeError("The text node type should not have attributes");return s}};function rC(n,e,t){let s=t.split("|");return l=>{let a=l===null?"null":typeof l;if(s.indexOf(a)<0)throw new RangeError(`Expected value of type ${s} for attribute ${e} on type ${n}, got ${a}`)}}class sC{constructor(e,t,s){this.hasDefault=Object.prototype.hasOwnProperty.call(s,"default"),this.default=s.default,this.validate=typeof s.validate=="string"?rC(e,t,s.validate):s.validate}get isRequired(){return!this.hasDefault}}class du{constructor(e,t,s,l){this.name=e,this.rank=t,this.schema=s,this.spec=l,this.attrs=gv(e,l.attrs),this.excluded=null;let a=hv(this.attrs);this.instance=a?new Ve(this,a):null}create(e=null){return!e&&this.instance?this.instance:new Ve(this,pv(this.attrs,e))}static compile(e,t){let s=Object.create(null),l=0;return e.forEach((a,c)=>s[a]=new du(a,l++,t,c)),s}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){mv(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class xv{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let l in e)t[l]=e[l];t.nodes=St.from(e.nodes),t.marks=St.from(e.marks||{}),this.nodes=cx.compile(this.spec.nodes,this),this.marks=du.compile(this.spec.marks,this);let s=Object.create(null);for(let l in this.nodes){if(l in this.marks)throw new RangeError(l+" can not be both a node and a mark");let a=this.nodes[l],c=a.spec.content||"",d=a.spec.marks;if(a.contentMatch=s[c]||(s[c]=Us.parse(c,this.nodes)),a.inlineContent=a.contentMatch.inlineContent,a.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!a.isInline||!a.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=a}a.markSet=d=="_"?null:d?ux(this,d.split(" ")):d==""||!a.inlineContent?[]:null}for(let l in this.marks){let a=this.marks[l],c=a.spec.excludes;a.excluded=c==null?[a]:c==""?[]:ux(this,c.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,s,l){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof cx){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,s,l)}text(e,t){let s=this.nodes.text;return new Cc(s,s.defaultAttrs,e,Ve.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return Jr.fromJSON(this,e)}markFromJSON(e){return Ve.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function ux(n,e){let t=[];for(let s=0;s<e.length;s++){let l=e[s],a=n.marks[l],c=a;if(a)t.push(a);else for(let d in n.marks){let f=n.marks[d];(l=="_"||f.spec.group&&f.spec.group.split(" ").indexOf(l)>-1)&&t.push(c=f)}if(!c)throw new SyntaxError("Unknown mark type: '"+e[s]+"'")}return t}function iC(n){return n.tag!=null}function lC(n){return n.style!=null}class Qr{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let s=this.matchedStyles=[];t.forEach(l=>{if(iC(l))this.tags.push(l);else if(lC(l)){let a=/[^=]*/.exec(l.style)[0];s.indexOf(a)<0&&s.push(a),this.styles.push(l)}}),this.normalizeLists=!this.tags.some(l=>{if(!/^(ul|ol)\b/.test(l.tag)||!l.node)return!1;let a=e.nodes[l.node];return a.contentMatch.matchType(a)})}parse(e,t={}){let s=new fx(this,t,!1);return s.addAll(e,Ve.none,t.from,t.to),s.finish()}parseSlice(e,t={}){let s=new fx(this,t,!0);return s.addAll(e,Ve.none,t.from,t.to),se.maxOpen(s.finish())}matchTag(e,t,s){for(let l=s?this.tags.indexOf(s)+1:0;l<this.tags.length;l++){let a=this.tags[l];if(cC(e,a.tag)&&(a.namespace===void 0||e.namespaceURI==a.namespace)&&(!a.context||t.matchesContext(a.context))){if(a.getAttrs){let c=a.getAttrs(e);if(c===!1)continue;a.attrs=c||void 0}return a}}}matchStyle(e,t,s,l){for(let a=l?this.styles.indexOf(l)+1:0;a<this.styles.length;a++){let c=this.styles[a],d=c.style;if(!(d.indexOf(e)!=0||c.context&&!s.matchesContext(c.context)||d.length>e.length&&(d.charCodeAt(e.length)!=61||d.slice(e.length+1)!=t))){if(c.getAttrs){let f=c.getAttrs(t);if(f===!1)continue;c.attrs=f||void 0}return c}}}static schemaRules(e){let t=[];function s(l){let a=l.priority==null?50:l.priority,c=0;for(;c<t.length;c++){let d=t[c];if((d.priority==null?50:d.priority)<a)break}t.splice(c,0,l)}for(let l in e.marks){let a=e.marks[l].spec.parseDOM;a&&a.forEach(c=>{s(c=hx(c)),c.mark||c.ignore||c.clearMark||(c.mark=l)})}for(let l in e.nodes){let a=e.nodes[l].spec.parseDOM;a&&a.forEach(c=>{s(c=hx(c)),c.node||c.ignore||c.mark||(c.node=l)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Qr(e,Qr.schemaRules(e)))}}const bv={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},aC={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},vv={ol:!0,ul:!0},Na=1,jh=2,hc=4;function dx(n,e,t){return e!=null?(e?Na:0)|(e==="full"?jh:0):n&&n.whitespace=="pre"?Na|jh:t&-5}class nc{constructor(e,t,s,l,a,c){this.type=e,this.attrs=t,this.marks=s,this.solid=l,this.options=c,this.content=[],this.activeMarks=Ve.none,this.match=a||(c&hc?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(X.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let s=this.type.contentMatch,l;return(l=s.findWrapping(e.type))?(this.match=s,l):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Na)){let s=this.content[this.content.length-1],l;if(s&&s.isText&&(l=/[ \t\r\n\u000c]+$/.exec(s.text))){let a=s;s.text.length==l[0].length?this.content.pop():this.content[this.content.length-1]=a.withText(a.text.slice(0,a.text.length-l[0].length))}}let t=X.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(X.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!bv.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class fx{constructor(e,t,s){this.parser=e,this.options=t,this.isOpen=s,this.open=0,this.localPreserveWS=!1;let l=t.topNode,a,c=dx(null,t.preserveWhitespace,0)|(s?hc:0);l?a=new nc(l.type,l.attrs,Ve.none,!0,t.topMatch||l.type.contentMatch,c):s?a=new nc(null,null,Ve.none,!0,null,c):a=new nc(e.schema.topNodeType,null,Ve.none,!0,null,c),this.nodes=[a],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){e.nodeType==3?this.addTextNode(e,t):e.nodeType==1&&this.addElement(e,t)}addTextNode(e,t){let s=e.nodeValue,l=this.top,a=l.options&jh?"full":this.localPreserveWS||(l.options&Na)>0;if(a==="full"||l.inlineContext(e)||/[^ \t\r\n\u000c]/.test(s)){if(a)a!=="full"?s=s.replace(/\r?\n|\r/g," "):s=s.replace(/\r\n?/g,`
`);else if(s=s.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(s)&&this.open==this.nodes.length-1){let c=l.content[l.content.length-1],d=e.previousSibling;(!c||d&&d.nodeName=="BR"||c.isText&&/[ \t\r\n\u000c]$/.test(c.text))&&(s=s.slice(1))}s&&this.insertNode(this.parser.schema.text(s),t,!/\S/.test(s)),this.findInText(e)}else this.findInside(e)}addElement(e,t,s){let l=this.localPreserveWS,a=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let c=e.nodeName.toLowerCase(),d;vv.hasOwnProperty(c)&&this.parser.normalizeLists&&oC(e);let f=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(d=this.parser.matchTag(e,this,s));e:if(f?f.ignore:aC.hasOwnProperty(c))this.findInside(e),this.ignoreFallback(e,t);else if(!f||f.skip||f.closeParent){f&&f.closeParent?this.open=Math.max(0,this.open-1):f&&f.skip.nodeType&&(e=f.skip);let p,g=this.needsBlock;if(bv.hasOwnProperty(c))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),p=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let x=f&&f.skip?t:this.readStyles(e,t);x&&this.addAll(e,x),p&&this.sync(a),this.needsBlock=g}else{let p=this.readStyles(e,t);p&&this.addElementByRule(e,f,p,f.consuming===!1?d:void 0)}this.localPreserveWS=l}leafFallback(e,t){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),t)}ignoreFallback(e,t){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),t,!0)}readStyles(e,t){let s=e.style;if(s&&s.length)for(let l=0;l<this.parser.matchedStyles.length;l++){let a=this.parser.matchedStyles[l],c=s.getPropertyValue(a);if(c)for(let d=void 0;;){let f=this.parser.matchStyle(a,c,this,d);if(!f)break;if(f.ignore)return null;if(f.clearMark?t=t.filter(p=>!f.clearMark(p)):t=t.concat(this.parser.schema.marks[f.mark].create(f.attrs)),f.consuming===!1)d=f;else break}}return t}addElementByRule(e,t,s,l){let a,c;if(t.node)if(c=this.parser.schema.nodes[t.node],c.isLeaf)this.insertNode(c.create(t.attrs),s,e.nodeName=="BR")||this.leafFallback(e,s);else{let f=this.enter(c,t.attrs||null,s,t.preserveWhitespace);f&&(a=!0,s=f)}else{let f=this.parser.schema.marks[t.mark];s=s.concat(f.create(t.attrs))}let d=this.top;if(c&&c.isLeaf)this.findInside(e);else if(l)this.addElement(e,s,l);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(f=>this.insertNode(f,s,!1));else{let f=e;typeof t.contentElement=="string"?f=e.querySelector(t.contentElement):typeof t.contentElement=="function"?f=t.contentElement(e):t.contentElement&&(f=t.contentElement),this.findAround(e,f,!0),this.addAll(f,s),this.findAround(e,f,!1)}a&&this.sync(d)&&this.open--}addAll(e,t,s,l){let a=s||0;for(let c=s?e.childNodes[s]:e.firstChild,d=l==null?null:e.childNodes[l];c!=d;c=c.nextSibling,++a)this.findAtPoint(e,a),this.addDOM(c,t);this.findAtPoint(e,a)}findPlace(e,t,s){let l,a;for(let c=this.open,d=0;c>=0;c--){let f=this.nodes[c],p=f.findWrapping(e);if(p&&(!l||l.length>p.length+d)&&(l=p,a=f,!p.length))break;if(f.solid){if(s)break;d+=2}}if(!l)return null;this.sync(a);for(let c=0;c<l.length;c++)t=this.enterInner(l[c],null,t,!1);return t}insertNode(e,t,s){if(e.isInline&&this.needsBlock&&!this.top.type){let a=this.textblockFromContext();a&&(t=this.enterInner(a,null,t))}let l=this.findPlace(e,t,s);if(l){this.closeExtra();let a=this.top;a.match&&(a.match=a.match.matchType(e.type));let c=Ve.none;for(let d of l.concat(e.marks))(a.type?a.type.allowsMarkType(d.type):px(d.type,e.type))&&(c=d.addToSet(c));return a.content.push(e.mark(c)),!0}return!1}enter(e,t,s,l){let a=this.findPlace(e.create(t),s,!1);return a&&(a=this.enterInner(e,t,s,!0,l)),a}enterInner(e,t,s,l=!1,a){this.closeExtra();let c=this.top;c.match=c.match&&c.match.matchType(e);let d=dx(e,a,c.options);c.options&hc&&c.content.length==0&&(d|=hc);let f=Ve.none;return s=s.filter(p=>(c.type?c.type.allowsMarkType(p.type):px(p.type,e))?(f=p.addToSet(f),!1):!0),this.nodes.push(new nc(e,t,f,l,null,d)),this.open++,s}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=Na)}return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let s=this.nodes[t].content;for(let l=s.length-1;l>=0;l--)e+=s[l].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let s=0;s<this.find.length;s++)this.find[s].node==e&&this.find[s].offset==t&&(this.find[s].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,s){if(e!=t&&this.find)for(let l=0;l<this.find.length;l++)this.find[l].pos==null&&e.nodeType==1&&e.contains(this.find[l].node)&&t.compareDocumentPosition(this.find[l].node)&(s?2:4)&&(this.find[l].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),s=this.options.context,l=!this.isOpen&&(!s||s.parent.type==this.nodes[0].type),a=-(s?s.depth+1:0)+(l?0:1),c=(d,f)=>{for(;d>=0;d--){let p=t[d];if(p==""){if(d==t.length-1||d==0)continue;for(;f>=a;f--)if(c(d-1,f))return!0;return!1}else{let g=f>0||f==0&&l?this.nodes[f].type:s&&f>=a?s.node(f-a).type:null;if(!g||g.name!=p&&!g.isInGroup(p))return!1;f--}}return!0};return c(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let s=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(s&&s.isTextblock&&s.defaultAttrs)return s}for(let t in this.parser.schema.nodes){let s=this.parser.schema.nodes[t];if(s.isTextblock&&s.defaultAttrs)return s}}}function oC(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let s=e.nodeType==1?e.nodeName.toLowerCase():null;s&&vv.hasOwnProperty(s)&&t?(t.appendChild(e),e=t):s=="li"?t=e:s&&(t=null)}}function cC(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function hx(n){let e={};for(let t in n)e[t]=n[t];return e}function px(n,e){let t=e.schema.nodes;for(let s in t){let l=t[s];if(!l.allowsMarkType(n))continue;let a=[],c=d=>{a.push(d);for(let f=0;f<d.edgeCount;f++){let{type:p,next:g}=d.edge(f);if(p==e||a.indexOf(g)<0&&c(g))return!0}};if(c(l.contentMatch))return!0}}class Fs{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},s){s||(s=Yf(t).createDocumentFragment());let l=s,a=[];return e.forEach(c=>{if(a.length||c.marks.length){let d=0,f=0;for(;d<a.length&&f<c.marks.length;){let p=c.marks[f];if(!this.marks[p.type.name]){f++;continue}if(!p.eq(a[d][0])||p.type.spec.spanning===!1)break;d++,f++}for(;d<a.length;)l=a.pop()[1];for(;f<c.marks.length;){let p=c.marks[f++],g=this.serializeMark(p,c.isInline,t);g&&(a.push([p,l]),l.appendChild(g.dom),l=g.contentDOM||g.dom)}}l.appendChild(this.serializeNodeInner(c,t))}),s}serializeNodeInner(e,t){let{dom:s,contentDOM:l}=pc(Yf(t),this.nodes[e.type.name](e),null,e.attrs);if(l){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,l)}return s}serializeNode(e,t={}){let s=this.serializeNodeInner(e,t);for(let l=e.marks.length-1;l>=0;l--){let a=this.serializeMark(e.marks[l],e.isInline,t);a&&((a.contentDOM||a.dom).appendChild(s),s=a.dom)}return s}serializeMark(e,t,s={}){let l=this.marks[e.type.name];return l&&pc(Yf(s),l(e,t),null,e.attrs)}static renderSpec(e,t,s=null,l){return pc(e,t,s,l)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Fs(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=mx(e.nodes);return t.text||(t.text=s=>s.text),t}static marksFromSchema(e){return mx(e.marks)}}function mx(n){let e={};for(let t in n){let s=n[t].spec.toDOM;s&&(e[t]=s)}return e}function Yf(n){return n.document||window.document}const gx=new WeakMap;function uC(n){let e=gx.get(n);return e===void 0&&gx.set(n,e=dC(n)),e}function dC(n){let e=null;function t(s){if(s&&typeof s=="object")if(Array.isArray(s))if(typeof s[0]=="string")e||(e=[]),e.push(s);else for(let l=0;l<s.length;l++)t(s[l]);else for(let l in s)t(s[l])}return t(n),e}function pc(n,e,t,s){if(typeof e=="string")return{dom:n.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let l=e[0],a;if(typeof l!="string")throw new RangeError("Invalid array passed to renderSpec");if(s&&(a=uC(s))&&a.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let c=l.indexOf(" ");c>0&&(t=l.slice(0,c),l=l.slice(c+1));let d,f=t?n.createElementNS(t,l):n.createElement(l),p=e[1],g=1;if(p&&typeof p=="object"&&p.nodeType==null&&!Array.isArray(p)){g=2;for(let x in p)if(p[x]!=null){let b=x.indexOf(" ");b>0?f.setAttributeNS(x.slice(0,b),x.slice(b+1),p[x]):f.setAttribute(x,p[x])}}for(let x=g;x<e.length;x++){let b=e[x];if(b===0){if(x<e.length-1||x>g)throw new RangeError("Content hole must be the only child of its parent node");return{dom:f,contentDOM:f}}else{let{dom:v,contentDOM:S}=pc(n,b,t,s);if(f.appendChild(v),S){if(d)throw new RangeError("Multiple content holes");d=S}}}return{dom:f,contentDOM:d}}const Sv=65535,Nv=Math.pow(2,16);function fC(n,e){return n+e*Nv}function yx(n){return n&Sv}function hC(n){return(n-(n&Sv))/Nv}const wv=1,kv=2,mc=4,Cv=8;class Ah{constructor(e,t,s){this.pos=e,this.delInfo=t,this.recover=s}get deleted(){return(this.delInfo&Cv)>0}get deletedBefore(){return(this.delInfo&(wv|mc))>0}get deletedAfter(){return(this.delInfo&(kv|mc))>0}get deletedAcross(){return(this.delInfo&mc)>0}}class nn{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&nn.empty)return nn.empty}recover(e){let t=0,s=yx(e);if(!this.inverted)for(let l=0;l<s;l++)t+=this.ranges[l*3+2]-this.ranges[l*3+1];return this.ranges[s*3]+t+hC(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,s){let l=0,a=this.inverted?2:1,c=this.inverted?1:2;for(let d=0;d<this.ranges.length;d+=3){let f=this.ranges[d]-(this.inverted?l:0);if(f>e)break;let p=this.ranges[d+a],g=this.ranges[d+c],x=f+p;if(e<=x){let b=p?e==f?-1:e==x?1:t:t,v=f+l+(b<0?0:g);if(s)return v;let S=e==(t<0?f:x)?null:fC(d/3,e-f),w=e==f?kv:e==x?wv:mc;return(t<0?e!=f:e!=x)&&(w|=Cv),new Ah(v,w,S)}l+=g-p}return s?e+l:new Ah(e+l,0,null)}touches(e,t){let s=0,l=yx(t),a=this.inverted?2:1,c=this.inverted?1:2;for(let d=0;d<this.ranges.length;d+=3){let f=this.ranges[d]-(this.inverted?s:0);if(f>e)break;let p=this.ranges[d+a],g=f+p;if(e<=g&&d==l*3)return!0;s+=this.ranges[d+c]-p}return!1}forEach(e){let t=this.inverted?2:1,s=this.inverted?1:2;for(let l=0,a=0;l<this.ranges.length;l+=3){let c=this.ranges[l],d=c-(this.inverted?a:0),f=c+(this.inverted?0:a),p=this.ranges[l+t],g=this.ranges[l+s];e(d,d+p,f,f+g),a+=g-p}}invert(){return new nn(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?nn.empty:new nn(e<0?[0,-e,0]:[0,0,e])}}nn.empty=new nn([]);class wa{constructor(e,t,s=0,l=e?e.length:0){this.mirror=t,this.from=s,this.to=l,this._maps=e||[],this.ownData=!(e||t)}get maps(){return this._maps}slice(e=0,t=this.maps.length){return new wa(this._maps,this.mirror,e,t)}appendMap(e,t){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),t!=null&&this.setMirror(this._maps.length-1,t)}appendMapping(e){for(let t=0,s=this._maps.length;t<e._maps.length;t++){let l=e.getMirror(t);this.appendMap(e._maps[t],l!=null&&l<t?s+l:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,s=this._maps.length+e._maps.length;t>=0;t--){let l=e.getMirror(t);this.appendMap(e._maps[t].invert(),l!=null&&l>t?s-l-1:void 0)}}invert(){let e=new wa;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let s=this.from;s<this.to;s++)e=this._maps[s].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,s){let l=0;for(let a=this.from;a<this.to;a++){let c=this._maps[a],d=c.mapResult(e,t);if(d.recover!=null){let f=this.getMirror(a);if(f!=null&&f>a&&f<this.to){a=f,e=this._maps[f].recover(d.recover);continue}}l|=d.delInfo,e=d.pos}return s?e:new Ah(e,l,null)}}const Kf=Object.create(null);class Ot{getMap(){return nn.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let s=Kf[t.stepType];if(!s)throw new RangeError(`No step type ${t.stepType} defined`);return s.fromJSON(e,t)}static jsonID(e,t){if(e in Kf)throw new RangeError("Duplicate use of step JSON ID "+e);return Kf[e]=t,t.prototype.jsonID=e,t}}class rt{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new rt(e,null)}static fail(e){return new rt(null,e)}static fromReplace(e,t,s,l){try{return rt.ok(e.replace(t,s,l))}catch(a){if(a instanceof Nc)return rt.fail(a.message);throw a}}}function fp(n,e,t){let s=[];for(let l=0;l<n.childCount;l++){let a=n.child(l);a.content.size&&(a=a.copy(fp(a.content,e,a))),a.isInline&&(a=e(a,t,l)),s.push(a)}return X.fromArray(s)}class Yr extends Ot{constructor(e,t,s){super(),this.from=e,this.to=t,this.mark=s}apply(e){let t=e.slice(this.from,this.to),s=e.resolve(this.from),l=s.node(s.sharedDepth(this.to)),a=new se(fp(t.content,(c,d)=>!c.isAtom||!d.type.allowsMarkType(this.mark.type)?c:c.mark(this.mark.addToSet(c.marks)),l),t.openStart,t.openEnd);return rt.fromReplace(e,this.from,this.to,a)}invert(){return new Hn(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),s=e.mapResult(this.to,-1);return t.deleted&&s.deleted||t.pos>=s.pos?null:new Yr(t.pos,s.pos,this.mark)}merge(e){return e instanceof Yr&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Yr(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Yr(t.from,t.to,e.markFromJSON(t.mark))}}Ot.jsonID("addMark",Yr);class Hn extends Ot{constructor(e,t,s){super(),this.from=e,this.to=t,this.mark=s}apply(e){let t=e.slice(this.from,this.to),s=new se(fp(t.content,l=>l.mark(this.mark.removeFromSet(l.marks)),e),t.openStart,t.openEnd);return rt.fromReplace(e,this.from,this.to,s)}invert(){return new Yr(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),s=e.mapResult(this.to,-1);return t.deleted&&s.deleted||t.pos>=s.pos?null:new Hn(t.pos,s.pos,this.mark)}merge(e){return e instanceof Hn&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Hn(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Hn(t.from,t.to,e.markFromJSON(t.mark))}}Ot.jsonID("removeMark",Hn);class Kr extends Ot{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return rt.fail("No node at mark step's position");let s=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return rt.fromReplace(e,this.pos,this.pos+1,new se(X.from(s),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let s=this.mark.addToSet(t.marks);if(s.length==t.marks.length){for(let l=0;l<t.marks.length;l++)if(!t.marks[l].isInSet(s))return new Kr(this.pos,t.marks[l]);return new Kr(this.pos,this.mark)}}return new Ps(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Kr(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Kr(t.pos,e.markFromJSON(t.mark))}}Ot.jsonID("addNodeMark",Kr);class Ps extends Ot{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return rt.fail("No node at mark step's position");let s=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return rt.fromReplace(e,this.pos,this.pos+1,new se(X.from(s),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new Kr(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Ps(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Ps(t.pos,e.markFromJSON(t.mark))}}Ot.jsonID("removeNodeMark",Ps);class ht extends Ot{constructor(e,t,s,l=!1){super(),this.from=e,this.to=t,this.slice=s,this.structure=l}apply(e){return this.structure&&Th(e,this.from,this.to)?rt.fail("Structure replace would overwrite content"):rt.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new nn([this.from,this.to-this.from,this.slice.size])}invert(e){return new ht(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),s=e.mapResult(this.to,-1);return t.deletedAcross&&s.deletedAcross?null:new ht(t.pos,Math.max(t.pos,s.pos),this.slice,this.structure)}merge(e){if(!(e instanceof ht)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?se.empty:new se(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new ht(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?se.empty:new se(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new ht(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new ht(t.from,t.to,se.fromJSON(e,t.slice),!!t.structure)}}Ot.jsonID("replace",ht);class pt extends Ot{constructor(e,t,s,l,a,c,d=!1){super(),this.from=e,this.to=t,this.gapFrom=s,this.gapTo=l,this.slice=a,this.insert=c,this.structure=d}apply(e){if(this.structure&&(Th(e,this.from,this.gapFrom)||Th(e,this.gapTo,this.to)))return rt.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return rt.fail("Gap is not a flat range");let s=this.slice.insertAt(this.insert,t.content);return s?rt.fromReplace(e,this.from,this.to,s):rt.fail("Content does not fit in gap")}getMap(){return new nn([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new pt(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),s=e.mapResult(this.to,-1),l=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),a=this.to==this.gapTo?s.pos:e.map(this.gapTo,1);return t.deletedAcross&&s.deletedAcross||l<t.pos||a>s.pos?null:new pt(t.pos,s.pos,l,a,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new pt(t.from,t.to,t.gapFrom,t.gapTo,se.fromJSON(e,t.slice),t.insert,!!t.structure)}}Ot.jsonID("replaceAround",pt);function Th(n,e,t){let s=n.resolve(e),l=t-e,a=s.depth;for(;l>0&&a>0&&s.indexAfter(a)==s.node(a).childCount;)a--,l--;if(l>0){let c=s.node(a).maybeChild(s.indexAfter(a));for(;l>0;){if(!c||c.isLeaf)return!0;c=c.firstChild,l--}}return!1}function pC(n,e,t,s){let l=[],a=[],c,d;n.doc.nodesBetween(e,t,(f,p,g)=>{if(!f.isInline)return;let x=f.marks;if(!s.isInSet(x)&&g.type.allowsMarkType(s.type)){let b=Math.max(p,e),v=Math.min(p+f.nodeSize,t),S=s.addToSet(x);for(let w=0;w<x.length;w++)x[w].isInSet(S)||(c&&c.to==b&&c.mark.eq(x[w])?c.to=v:l.push(c=new Hn(b,v,x[w])));d&&d.to==b?d.to=v:a.push(d=new Yr(b,v,s))}}),l.forEach(f=>n.step(f)),a.forEach(f=>n.step(f))}function mC(n,e,t,s){let l=[],a=0;n.doc.nodesBetween(e,t,(c,d)=>{if(!c.isInline)return;a++;let f=null;if(s instanceof du){let p=c.marks,g;for(;g=s.isInSet(p);)(f||(f=[])).push(g),p=g.removeFromSet(p)}else s?s.isInSet(c.marks)&&(f=[s]):f=c.marks;if(f&&f.length){let p=Math.min(d+c.nodeSize,t);for(let g=0;g<f.length;g++){let x=f[g],b;for(let v=0;v<l.length;v++){let S=l[v];S.step==a-1&&x.eq(l[v].style)&&(b=S)}b?(b.to=p,b.step=a):l.push({style:x,from:Math.max(d,e),to:p,step:a})}}}),l.forEach(c=>n.step(new Hn(c.from,c.to,c.style)))}function hp(n,e,t,s=t.contentMatch,l=!0){let a=n.doc.nodeAt(e),c=[],d=e+1;for(let f=0;f<a.childCount;f++){let p=a.child(f),g=d+p.nodeSize,x=s.matchType(p.type);if(!x)c.push(new ht(d,g,se.empty));else{s=x;for(let b=0;b<p.marks.length;b++)t.allowsMarkType(p.marks[b].type)||n.step(new Hn(d,g,p.marks[b]));if(l&&p.isText&&t.whitespace!="pre"){let b,v=/\r?\n|\r/g,S;for(;b=v.exec(p.text);)S||(S=new se(X.from(t.schema.text(" ",t.allowedMarks(p.marks))),0,0)),c.push(new ht(d+b.index,d+b.index+b[0].length,S))}}d=g}if(!s.validEnd){let f=s.fillBefore(X.empty,!0);n.replace(d,d,new se(f,0,0))}for(let f=c.length-1;f>=0;f--)n.step(c[f])}function gC(n,e,t){return(e==0||n.canReplace(e,n.childCount))&&(t==n.childCount||n.canReplace(0,t))}function Wi(n){let t=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let s=n.depth;;--s){let l=n.$from.node(s),a=n.$from.index(s),c=n.$to.indexAfter(s);if(s<n.depth&&l.canReplace(a,c,t))return s;if(s==0||l.type.spec.isolating||!gC(l,a,c))break}return null}function yC(n,e,t){let{$from:s,$to:l,depth:a}=e,c=s.before(a+1),d=l.after(a+1),f=c,p=d,g=X.empty,x=0;for(let S=a,w=!1;S>t;S--)w||s.index(S)>0?(w=!0,g=X.from(s.node(S).copy(g)),x++):f--;let b=X.empty,v=0;for(let S=a,w=!1;S>t;S--)w||l.after(S+1)<l.end(S)?(w=!0,b=X.from(l.node(S).copy(b)),v++):p++;n.step(new pt(f,p,c,d,new se(g.append(b),x,v),g.size-x,!0))}function pp(n,e,t=null,s=n){let l=xC(n,e),a=l&&bC(s,e);return a?l.map(xx).concat({type:e,attrs:t}).concat(a.map(xx)):null}function xx(n){return{type:n,attrs:null}}function xC(n,e){let{parent:t,startIndex:s,endIndex:l}=n,a=t.contentMatchAt(s).findWrapping(e);if(!a)return null;let c=a.length?a[0]:e;return t.canReplaceWith(s,l,c)?a:null}function bC(n,e){let{parent:t,startIndex:s,endIndex:l}=n,a=t.child(s),c=e.contentMatch.findWrapping(a.type);if(!c)return null;let f=(c.length?c[c.length-1]:e).contentMatch;for(let p=s;f&&p<l;p++)f=f.matchType(t.child(p).type);return!f||!f.validEnd?null:c}function vC(n,e,t){let s=X.empty;for(let c=t.length-1;c>=0;c--){if(s.size){let d=t[c].type.contentMatch.matchFragment(s);if(!d||!d.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}s=X.from(t[c].type.create(t[c].attrs,s))}let l=e.start,a=e.end;n.step(new pt(l,a,l,a,new se(s,0,0),t.length,!0))}function SC(n,e,t,s,l){if(!s.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let a=n.steps.length;n.doc.nodesBetween(e,t,(c,d)=>{let f=typeof l=="function"?l(c):l;if(c.isTextblock&&!c.hasMarkup(s,f)&&NC(n.doc,n.mapping.slice(a).map(d),s)){let p=null;if(s.schema.linebreakReplacement){let v=s.whitespace=="pre",S=!!s.contentMatch.matchType(s.schema.linebreakReplacement);v&&!S?p=!1:!v&&S&&(p=!0)}p===!1&&jv(n,c,d,a),hp(n,n.mapping.slice(a).map(d,1),s,void 0,p===null);let g=n.mapping.slice(a),x=g.map(d,1),b=g.map(d+c.nodeSize,1);return n.step(new pt(x,b,x+1,b-1,new se(X.from(s.create(f,null,c.marks)),0,0),1,!0)),p===!0&&Ev(n,c,d,a),!1}})}function Ev(n,e,t,s){e.forEach((l,a)=>{if(l.isText){let c,d=/\r?\n|\r/g;for(;c=d.exec(l.text);){let f=n.mapping.slice(s).map(t+1+a+c.index);n.replaceWith(f,f+1,e.type.schema.linebreakReplacement.create())}}})}function jv(n,e,t,s){e.forEach((l,a)=>{if(l.type==l.type.schema.linebreakReplacement){let c=n.mapping.slice(s).map(t+1+a);n.replaceWith(c,c+1,e.type.schema.text(`
`))}})}function NC(n,e,t){let s=n.resolve(e),l=s.index();return s.parent.canReplaceWith(l,l+1,t)}function wC(n,e,t,s,l){let a=n.doc.nodeAt(e);if(!a)throw new RangeError("No node at given position");t||(t=a.type);let c=t.create(s,null,l||a.marks);if(a.isLeaf)return n.replaceWith(e,e+a.nodeSize,c);if(!t.validContent(a.content))throw new RangeError("Invalid content for node type "+t.name);n.step(new pt(e,e+a.nodeSize,e+1,e+a.nodeSize-1,new se(X.from(c),0,0),1,!0))}function cr(n,e,t=1,s){let l=n.resolve(e),a=l.depth-t,c=s&&s[s.length-1]||l.parent;if(a<0||l.parent.type.spec.isolating||!l.parent.canReplace(l.index(),l.parent.childCount)||!c.type.validContent(l.parent.content.cutByIndex(l.index(),l.parent.childCount)))return!1;for(let p=l.depth-1,g=t-2;p>a;p--,g--){let x=l.node(p),b=l.index(p);if(x.type.spec.isolating)return!1;let v=x.content.cutByIndex(b,x.childCount),S=s&&s[g+1];S&&(v=v.replaceChild(0,S.type.create(S.attrs)));let w=s&&s[g]||x;if(!x.canReplace(b+1,x.childCount)||!w.type.validContent(v))return!1}let d=l.indexAfter(a),f=s&&s[0];return l.node(a).canReplaceWith(d,d,f?f.type:l.node(a+1).type)}function kC(n,e,t=1,s){let l=n.doc.resolve(e),a=X.empty,c=X.empty;for(let d=l.depth,f=l.depth-t,p=t-1;d>f;d--,p--){a=X.from(l.node(d).copy(a));let g=s&&s[p];c=X.from(g?g.type.create(g.attrs,c):l.node(d).copy(c))}n.step(new ht(e,e,new se(a.append(c),t,t),!0))}function rs(n,e){let t=n.resolve(e),s=t.index();return Av(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(s,s+1)}function CC(n,e){e.content.size||n.type.compatibleContent(e.type);let t=n.contentMatchAt(n.childCount),{linebreakReplacement:s}=n.type.schema;for(let l=0;l<e.childCount;l++){let a=e.child(l),c=a.type==s?n.type.schema.nodes.text:a.type;if(t=t.matchType(c),!t||!n.type.allowsMarks(a.marks))return!1}return t.validEnd}function Av(n,e){return!!(n&&e&&!n.isLeaf&&CC(n,e))}function fu(n,e,t=-1){let s=n.resolve(e);for(let l=s.depth;;l--){let a,c,d=s.index(l);if(l==s.depth?(a=s.nodeBefore,c=s.nodeAfter):t>0?(a=s.node(l+1),d++,c=s.node(l).maybeChild(d)):(a=s.node(l).maybeChild(d-1),c=s.node(l+1)),a&&!a.isTextblock&&Av(a,c)&&s.node(l).canReplace(d,d+1))return e;if(l==0)break;e=t<0?s.before(l):s.after(l)}}function EC(n,e,t){let s=null,{linebreakReplacement:l}=n.doc.type.schema,a=n.doc.resolve(e-t),c=a.node().type;if(l&&c.inlineContent){let g=c.whitespace=="pre",x=!!c.contentMatch.matchType(l);g&&!x?s=!1:!g&&x&&(s=!0)}let d=n.steps.length;if(s===!1){let g=n.doc.resolve(e+t);jv(n,g.node(),g.before(),d)}c.inlineContent&&hp(n,e+t-1,c,a.node().contentMatchAt(a.index()),s==null);let f=n.mapping.slice(d),p=f.map(e-t);if(n.step(new ht(p,f.map(e+t,-1),se.empty,!0)),s===!0){let g=n.doc.resolve(p);Ev(n,g.node(),g.before(),n.steps.length)}return n}function jC(n,e,t){let s=n.resolve(e);if(s.parent.canReplaceWith(s.index(),s.index(),t))return e;if(s.parentOffset==0)for(let l=s.depth-1;l>=0;l--){let a=s.index(l);if(s.node(l).canReplaceWith(a,a,t))return s.before(l+1);if(a>0)return null}if(s.parentOffset==s.parent.content.size)for(let l=s.depth-1;l>=0;l--){let a=s.indexAfter(l);if(s.node(l).canReplaceWith(a,a,t))return s.after(l+1);if(a<s.node(l).childCount)return null}return null}function Tv(n,e,t){let s=n.resolve(e);if(!t.content.size)return e;let l=t.content;for(let a=0;a<t.openStart;a++)l=l.firstChild.content;for(let a=1;a<=(t.openStart==0&&t.size?2:1);a++)for(let c=s.depth;c>=0;c--){let d=c==s.depth?0:s.pos<=(s.start(c+1)+s.end(c+1))/2?-1:1,f=s.index(c)+(d>0?1:0),p=s.node(c),g=!1;if(a==1)g=p.canReplace(f,f,l);else{let x=p.contentMatchAt(f).findWrapping(l.firstChild.type);g=x&&p.canReplaceWith(f,f,x[0])}if(g)return d==0?s.pos:d<0?s.before(c+1):s.after(c+1)}return null}function hu(n,e,t=e,s=se.empty){if(e==t&&!s.size)return null;let l=n.resolve(e),a=n.resolve(t);return Mv(l,a,s)?new ht(e,t,s):new AC(l,a,s).fit()}function Mv(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}class AC{constructor(e,t,s){this.$from=e,this.$to=t,this.unplaced=s,this.frontier=[],this.placed=X.empty;for(let l=0;l<=e.depth;l++){let a=e.node(l);this.frontier.push({type:a.type,match:a.contentMatchAt(e.indexAfter(l))})}for(let l=e.depth;l>0;l--)this.placed=X.from(e.node(l).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let p=this.findFittable();p?this.placeNodes(p):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,s=this.$from,l=this.close(e<0?this.$to:s.doc.resolve(e));if(!l)return null;let a=this.placed,c=s.depth,d=l.depth;for(;c&&d&&a.childCount==1;)a=a.firstChild.content,c--,d--;let f=new se(a,c,d);return e>-1?new pt(s.pos,e,this.$to.pos,this.$to.end(),f,t):f.size||s.pos!=this.$to.pos?new ht(s.pos,l.pos,f):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,s=0,l=this.unplaced.openEnd;s<e;s++){let a=t.firstChild;if(t.childCount>1&&(l=0),a.type.spec.isolating&&l<=s){e=s;break}t=a.content}for(let t=1;t<=2;t++)for(let s=t==1?e:this.unplaced.openStart;s>=0;s--){let l,a=null;s?(a=Xf(this.unplaced.content,s-1).firstChild,l=a.content):l=this.unplaced.content;let c=l.firstChild;for(let d=this.depth;d>=0;d--){let{type:f,match:p}=this.frontier[d],g,x=null;if(t==1&&(c?p.matchType(c.type)||(x=p.fillBefore(X.from(c),!1)):a&&f.compatibleContent(a.type)))return{sliceDepth:s,frontierDepth:d,parent:a,inject:x};if(t==2&&c&&(g=p.findWrapping(c.type)))return{sliceDepth:s,frontierDepth:d,parent:a,wrap:g};if(a&&p.matchType(a.type))break}}}openMore(){let{content:e,openStart:t,openEnd:s}=this.unplaced,l=Xf(e,t);return!l.childCount||l.firstChild.isLeaf?!1:(this.unplaced=new se(e,t+1,Math.max(s,l.size+t>=e.size-s?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:s}=this.unplaced,l=Xf(e,t);if(l.childCount<=1&&t>0){let a=e.size-t<=t+l.size;this.unplaced=new se(la(e,t-1,1),t-1,a?t-1:s)}else this.unplaced=new se(la(e,t,1),t,s)}placeNodes({sliceDepth:e,frontierDepth:t,parent:s,inject:l,wrap:a}){for(;this.depth>t;)this.closeFrontierNode();if(a)for(let w=0;w<a.length;w++)this.openFrontierNode(a[w]);let c=this.unplaced,d=s?s.content:c.content,f=c.openStart-e,p=0,g=[],{match:x,type:b}=this.frontier[t];if(l){for(let w=0;w<l.childCount;w++)g.push(l.child(w));x=x.matchFragment(l)}let v=d.size+e-(c.content.size-c.openEnd);for(;p<d.childCount;){let w=d.child(p),k=x.matchType(w.type);if(!k)break;p++,(p>1||f==0||w.content.size)&&(x=k,g.push(Ov(w.mark(b.allowedMarks(w.marks)),p==1?f:0,p==d.childCount?v:-1)))}let S=p==d.childCount;S||(v=-1),this.placed=aa(this.placed,t,X.from(g)),this.frontier[t].match=x,S&&v<0&&s&&s.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let w=0,k=d;w<v;w++){let j=k.lastChild;this.frontier.push({type:j.type,match:j.contentMatchAt(j.childCount)}),k=j.content}this.unplaced=S?e==0?se.empty:new se(la(c.content,e-1,1),e-1,v<0?c.openEnd:e-1):new se(la(c.content,e,p),c.openStart,c.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!Jf(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:s}=this.$to,l=this.$to.after(s);for(;s>1&&l==this.$to.end(--s);)++l;return l}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:s,type:l}=this.frontier[t],a=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),c=Jf(e,t,l,s,a);if(c){for(let d=t-1;d>=0;d--){let{match:f,type:p}=this.frontier[d],g=Jf(e,d,p,f,!0);if(!g||g.childCount)continue e}return{depth:t,fit:c,move:a?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=aa(this.placed,t.depth,t.fit)),e=t.move;for(let s=t.depth+1;s<=e.depth;s++){let l=e.node(s),a=l.type.contentMatch.fillBefore(l.content,!0,e.index(s));this.openFrontierNode(l.type,l.attrs,a)}return e}openFrontierNode(e,t=null,s){let l=this.frontier[this.depth];l.match=l.match.matchType(e),this.placed=aa(this.placed,this.depth,X.from(e.create(t,s))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(X.empty,!0);t.childCount&&(this.placed=aa(this.placed,this.frontier.length,t))}}function la(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy(la(n.firstChild.content,e-1,t)))}function aa(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy(aa(n.lastChild.content,e-1,t)))}function Xf(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function Ov(n,e,t){if(e<=0)return n;let s=n.content;return e>1&&(s=s.replaceChild(0,Ov(s.firstChild,e-1,s.childCount==1?t-1:0))),e>0&&(s=n.type.contentMatch.fillBefore(s).append(s),t<=0&&(s=s.append(n.type.contentMatch.matchFragment(s).fillBefore(X.empty,!0)))),n.copy(s)}function Jf(n,e,t,s,l){let a=n.node(e),c=l?n.indexAfter(e):n.index(e);if(c==a.childCount&&!t.compatibleContent(a.type))return null;let d=s.fillBefore(a.content,!0,c);return d&&!TC(t,a.content,c)?d:null}function TC(n,e,t){for(let s=t;s<e.childCount;s++)if(!n.allowsMarks(e.child(s).marks))return!0;return!1}function MC(n){return n.spec.defining||n.spec.definingForContent}function OC(n,e,t,s){if(!s.size)return n.deleteRange(e,t);let l=n.doc.resolve(e),a=n.doc.resolve(t);if(Mv(l,a,s))return n.step(new ht(e,t,s));let c=Rv(l,n.doc.resolve(t));c[c.length-1]==0&&c.pop();let d=-(l.depth+1);c.unshift(d);for(let b=l.depth,v=l.pos-1;b>0;b--,v--){let S=l.node(b).type.spec;if(S.defining||S.definingAsContext||S.isolating)break;c.indexOf(b)>-1?d=b:l.before(b)==v&&c.splice(1,0,-b)}let f=c.indexOf(d),p=[],g=s.openStart;for(let b=s.content,v=0;;v++){let S=b.firstChild;if(p.push(S),v==s.openStart)break;b=S.content}for(let b=g-1;b>=0;b--){let v=p[b],S=MC(v.type);if(S&&!v.sameMarkup(l.node(Math.abs(d)-1)))g=b;else if(S||!v.type.isTextblock)break}for(let b=s.openStart;b>=0;b--){let v=(b+g+1)%(s.openStart+1),S=p[v];if(S)for(let w=0;w<c.length;w++){let k=c[(w+f)%c.length],j=!0;k<0&&(j=!1,k=-k);let D=l.node(k-1),R=l.index(k-1);if(D.canReplaceWith(R,R,S.type,S.marks))return n.replace(l.before(k),j?a.after(k):t,new se(Dv(s.content,0,s.openStart,v),v,s.openEnd))}}let x=n.steps.length;for(let b=c.length-1;b>=0&&(n.replace(e,t,s),!(n.steps.length>x));b--){let v=c[b];v<0||(e=l.before(v),t=a.after(v))}}function Dv(n,e,t,s,l){if(e<t){let a=n.firstChild;n=n.replaceChild(0,a.copy(Dv(a.content,e+1,t,s,a)))}if(e>s){let a=l.contentMatchAt(0),c=a.fillBefore(n).append(n);n=c.append(a.matchFragment(c).fillBefore(X.empty,!0))}return n}function DC(n,e,t,s){if(!s.isInline&&e==t&&n.doc.resolve(e).parent.content.size){let l=jC(n.doc,e,s.type);l!=null&&(e=t=l)}n.replaceRange(e,t,new se(X.from(s),0,0))}function RC(n,e,t){let s=n.doc.resolve(e),l=n.doc.resolve(t),a=Rv(s,l);for(let c=0;c<a.length;c++){let d=a[c],f=c==a.length-1;if(f&&d==0||s.node(d).type.contentMatch.validEnd)return n.delete(s.start(d),l.end(d));if(d>0&&(f||s.node(d-1).canReplace(s.index(d-1),l.indexAfter(d-1))))return n.delete(s.before(d),l.after(d))}for(let c=1;c<=s.depth&&c<=l.depth;c++)if(e-s.start(c)==s.depth-c&&t>s.end(c)&&l.end(c)-t!=l.depth-c&&s.start(c-1)==l.start(c-1)&&s.node(c-1).canReplace(s.index(c-1),l.index(c-1)))return n.delete(s.before(c),t);n.delete(e,t)}function Rv(n,e){let t=[],s=Math.min(n.depth,e.depth);for(let l=s;l>=0;l--){let a=n.start(l);if(a<n.pos-(n.depth-l)||e.end(l)>e.pos+(e.depth-l)||n.node(l).type.spec.isolating||e.node(l).type.spec.isolating)break;(a==e.start(l)||l==n.depth&&l==e.depth&&n.parent.inlineContent&&e.parent.inlineContent&&l&&e.start(l-1)==a-1)&&t.push(l)}return t}class Pi extends Ot{constructor(e,t,s){super(),this.pos=e,this.attr=t,this.value=s}apply(e){let t=e.nodeAt(this.pos);if(!t)return rt.fail("No node at attribute step's position");let s=Object.create(null);for(let a in t.attrs)s[a]=t.attrs[a];s[this.attr]=this.value;let l=t.type.create(s,null,t.marks);return rt.fromReplace(e,this.pos,this.pos+1,new se(X.from(l),0,t.isLeaf?0:1))}getMap(){return nn.empty}invert(e){return new Pi(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Pi(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Pi(t.pos,t.attr,t.value)}}Ot.jsonID("attr",Pi);class ka extends Ot{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let l in e.attrs)t[l]=e.attrs[l];t[this.attr]=this.value;let s=e.type.create(t,e.content,e.marks);return rt.ok(s)}getMap(){return nn.empty}invert(e){return new ka(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new ka(t.attr,t.value)}}Ot.jsonID("docAttr",ka);let qi=class extends Error{};qi=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};qi.prototype=Object.create(Error.prototype);qi.prototype.constructor=qi;qi.prototype.name="TransformError";class Lv{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new wa}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new qi(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,s=se.empty){let l=hu(this.doc,e,t,s);return l&&this.step(l),this}replaceWith(e,t,s){return this.replace(e,t,new se(X.from(s),0,0))}delete(e,t){return this.replace(e,t,se.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,s){return OC(this,e,t,s),this}replaceRangeWith(e,t,s){return DC(this,e,t,s),this}deleteRange(e,t){return RC(this,e,t),this}lift(e,t){return yC(this,e,t),this}join(e,t=1){return EC(this,e,t),this}wrap(e,t){return vC(this,e,t),this}setBlockType(e,t=e,s,l=null){return SC(this,e,t,s,l),this}setNodeMarkup(e,t,s=null,l){return wC(this,e,t,s,l),this}setNodeAttribute(e,t,s){return this.step(new Pi(e,t,s)),this}setDocAttribute(e,t){return this.step(new ka(e,t)),this}addNodeMark(e,t){return this.step(new Kr(e,t)),this}removeNodeMark(e,t){let s=this.doc.nodeAt(e);if(!s)throw new RangeError("No node at position "+e);if(t instanceof Ve)t.isInSet(s.marks)&&this.step(new Ps(e,t));else{let l=s.marks,a,c=[];for(;a=t.isInSet(l);)c.push(new Ps(e,a)),l=a.removeFromSet(l);for(let d=c.length-1;d>=0;d--)this.step(c[d])}return this}split(e,t=1,s){return kC(this,e,t,s),this}addMark(e,t,s){return pC(this,e,t,s),this}removeMark(e,t,s){return mC(this,e,t,s),this}clearIncompatible(e,t,s){return hp(this,e,t,s),this}}const Qf=Object.create(null);class Se{constructor(e,t,s){this.$anchor=e,this.$head=t,this.ranges=s||[new LC(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=se.empty){let s=t.content.lastChild,l=null;for(let d=0;d<t.openEnd;d++)l=s,s=s.lastChild;let a=e.steps.length,c=this.ranges;for(let d=0;d<c.length;d++){let{$from:f,$to:p}=c[d],g=e.mapping.slice(a);e.replaceRange(g.map(f.pos),g.map(p.pos),d?se.empty:t),d==0&&Sx(e,a,(s?s.isInline:l&&l.isTextblock)?-1:1)}}replaceWith(e,t){let s=e.steps.length,l=this.ranges;for(let a=0;a<l.length;a++){let{$from:c,$to:d}=l[a],f=e.mapping.slice(s),p=f.map(c.pos),g=f.map(d.pos);a?e.deleteRange(p,g):(e.replaceRangeWith(p,g,t),Sx(e,s,t.isInline?-1:1))}}static findFrom(e,t,s=!1){let l=e.parent.inlineContent?new be(e):zi(e.node(0),e.parent,e.pos,e.index(),t,s);if(l)return l;for(let a=e.depth-1;a>=0;a--){let c=t<0?zi(e.node(0),e.node(a),e.before(a+1),e.index(a),t,s):zi(e.node(0),e.node(a),e.after(a+1),e.index(a)+1,t,s);if(c)return c}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new rn(e.node(0))}static atStart(e){return zi(e,e,0,0,1)||new rn(e)}static atEnd(e){return zi(e,e,e.content.size,e.childCount,-1)||new rn(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let s=Qf[t.type];if(!s)throw new RangeError(`No selection type ${t.type} defined`);return s.fromJSON(e,t)}static jsonID(e,t){if(e in Qf)throw new RangeError("Duplicate use of selection JSON ID "+e);return Qf[e]=t,t.prototype.jsonID=e,t}getBookmark(){return be.between(this.$anchor,this.$head).getBookmark()}}Se.prototype.visible=!0;class LC{constructor(e,t){this.$from=e,this.$to=t}}let bx=!1;function vx(n){!bx&&!n.parent.inlineContent&&(bx=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class be extends Se{constructor(e,t=e){vx(e),vx(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let s=e.resolve(t.map(this.head));if(!s.parent.inlineContent)return Se.near(s);let l=e.resolve(t.map(this.anchor));return new be(l.parent.inlineContent?l:s,s)}replace(e,t=se.empty){if(super.replace(e,t),t==se.empty){let s=this.$from.marksAcross(this.$to);s&&e.ensureMarks(s)}}eq(e){return e instanceof be&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new pu(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new be(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,s=t){let l=e.resolve(t);return new this(l,s==t?l:e.resolve(s))}static between(e,t,s){let l=e.pos-t.pos;if((!s||l)&&(s=l>=0?1:-1),!t.parent.inlineContent){let a=Se.findFrom(t,s,!0)||Se.findFrom(t,-s,!0);if(a)t=a.$head;else return Se.near(t,s)}return e.parent.inlineContent||(l==0?e=t:(e=(Se.findFrom(e,-s,!0)||Se.findFrom(e,s,!0)).$anchor,e.pos<t.pos!=l<0&&(e=t))),new be(e,t)}}Se.jsonID("text",be);class pu{constructor(e,t){this.anchor=e,this.head=t}map(e){return new pu(e.map(this.anchor),e.map(this.head))}resolve(e){return be.between(e.resolve(this.anchor),e.resolve(this.head))}}class he extends Se{constructor(e){let t=e.nodeAfter,s=e.node(0).resolve(e.pos+t.nodeSize);super(e,s),this.node=t}map(e,t){let{deleted:s,pos:l}=t.mapResult(this.anchor),a=e.resolve(l);return s?Se.near(a):new he(a)}content(){return new se(X.from(this.node),0,0)}eq(e){return e instanceof he&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new mp(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new he(e.resolve(t.anchor))}static create(e,t){return new he(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}he.prototype.visible=!1;Se.jsonID("node",he);class mp{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:s}=e.mapResult(this.anchor);return t?new pu(s,s):new mp(s)}resolve(e){let t=e.resolve(this.anchor),s=t.nodeAfter;return s&&he.isSelectable(s)?new he(t):Se.near(t)}}class rn extends Se{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=se.empty){if(t==se.empty){e.delete(0,e.doc.content.size);let s=Se.atStart(e.doc);s.eq(e.selection)||e.setSelection(s)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new rn(e)}map(e){return new rn(e)}eq(e){return e instanceof rn}getBookmark(){return zC}}Se.jsonID("all",rn);const zC={map(){return this},resolve(n){return new rn(n)}};function zi(n,e,t,s,l,a=!1){if(e.inlineContent)return be.create(n,t);for(let c=s-(l>0?0:1);l>0?c<e.childCount:c>=0;c+=l){let d=e.child(c);if(d.isAtom){if(!a&&he.isSelectable(d))return he.create(n,t-(l<0?d.nodeSize:0))}else{let f=zi(n,d,t+l,l<0?d.childCount:0,l,a);if(f)return f}t+=d.nodeSize*l}return null}function Sx(n,e,t){let s=n.steps.length-1;if(s<e)return;let l=n.steps[s];if(!(l instanceof ht||l instanceof pt))return;let a=n.mapping.maps[s],c;a.forEach((d,f,p,g)=>{c==null&&(c=g)}),n.setSelection(Se.near(n.doc.resolve(c),t))}const Nx=1,wx=2,kx=4;class BC extends Lv{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Nx)&-3,this.storedMarks=null,this}get selectionSet(){return(this.updated&Nx)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=wx,this}ensureMarks(e){return Ve.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&wx)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&-3,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let s=this.selection;return t&&(e=e.mark(this.storedMarks||(s.empty?s.$from.marks():s.$from.marksAcross(s.$to)||Ve.none))),s.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,s){let l=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(l.text(e),!0):this.deleteSelection();{if(s==null&&(s=t),s=s??t,!e)return this.deleteRange(t,s);let a=this.storedMarks;if(!a){let c=this.doc.resolve(t);a=s==t?c.marks():c.marksAcross(this.doc.resolve(s))}return this.replaceRangeWith(t,s,l.text(e,a)),this.selection.empty||this.setSelection(Se.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=kx,this}get scrolledIntoView(){return(this.updated&kx)>0}}function Cx(n,e){return!e||!n?n:n.bind(e)}class oa{constructor(e,t,s){this.name=e,this.init=Cx(t.init,s),this.apply=Cx(t.apply,s)}}const _C=[new oa("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new oa("selection",{init(n,e){return n.selection||Se.atStart(e.doc)},apply(n){return n.selection}}),new oa("storedMarks",{init(n){return n.storedMarks||null},apply(n,e,t,s){return s.selection.$cursor?n.storedMarks:null}}),new oa("scrollToSelection",{init(){return 0},apply(n,e){return n.scrolledIntoView?e+1:e}})];class Zf{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=_C.slice(),t&&t.forEach(s=>{if(this.pluginsByKey[s.key])throw new RangeError("Adding different instances of a keyed plugin ("+s.key+")");this.plugins.push(s),this.pluginsByKey[s.key]=s,s.spec.state&&this.fields.push(new oa(s.key,s.spec.state,s))})}}class Hi{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let s=0;s<this.config.plugins.length;s++)if(s!=t){let l=this.config.plugins[s];if(l.spec.filterTransaction&&!l.spec.filterTransaction.call(l,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],s=this.applyInner(e),l=null;for(;;){let a=!1;for(let c=0;c<this.config.plugins.length;c++){let d=this.config.plugins[c];if(d.spec.appendTransaction){let f=l?l[c].n:0,p=l?l[c].state:this,g=f<t.length&&d.spec.appendTransaction.call(d,f?t.slice(f):t,p,s);if(g&&s.filterTransaction(g,c)){if(g.setMeta("appendedTransaction",e),!l){l=[];for(let x=0;x<this.config.plugins.length;x++)l.push(x<c?{state:s,n:t.length}:{state:this,n:0})}t.push(g),s=s.applyInner(g),a=!0}l&&(l[c]={state:s,n:t.length})}}if(!a)return{state:s,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new Hi(this.config),s=this.config.fields;for(let l=0;l<s.length;l++){let a=s[l];t[a.name]=a.apply(e,this[a.name],this,t)}return t}get tr(){return new BC(this)}static create(e){let t=new Zf(e.doc?e.doc.type.schema:e.schema,e.plugins),s=new Hi(t);for(let l=0;l<t.fields.length;l++)s[t.fields[l].name]=t.fields[l].init(e,s);return s}reconfigure(e){let t=new Zf(this.schema,e.plugins),s=t.fields,l=new Hi(t);for(let a=0;a<s.length;a++){let c=s[a].name;l[c]=this.hasOwnProperty(c)?this[c]:s[a].init(e,l)}return l}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(s=>s.toJSON())),e&&typeof e=="object")for(let s in e){if(s=="doc"||s=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let l=e[s],a=l.spec.state;a&&a.toJSON&&(t[s]=a.toJSON.call(l,this[l.key]))}return t}static fromJSON(e,t,s){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let l=new Zf(e.schema,e.plugins),a=new Hi(l);return l.fields.forEach(c=>{if(c.name=="doc")a.doc=Jr.fromJSON(e.schema,t.doc);else if(c.name=="selection")a.selection=Se.fromJSON(a.doc,t.selection);else if(c.name=="storedMarks")t.storedMarks&&(a.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(s)for(let d in s){let f=s[d],p=f.spec.state;if(f.key==c.name&&p&&p.fromJSON&&Object.prototype.hasOwnProperty.call(t,d)){a[c.name]=p.fromJSON.call(f,e,t[d],a);return}}a[c.name]=c.init(e,a)}}),a}}function zv(n,e,t){for(let s in n){let l=n[s];l instanceof Function?l=l.bind(e):s=="handleDOMEvents"&&(l=zv(l,e,{})),t[s]=l}return t}class kt{constructor(e){this.spec=e,this.props={},e.props&&zv(e.props,this,this.props),this.key=e.key?e.key.key:Bv("plugin")}getState(e){return e[this.key]}}const Wf=Object.create(null);function Bv(n){return n in Wf?n+"$"+ ++Wf[n]:(Wf[n]=0,n+"$")}class sn{constructor(e="key"){this.key=Bv(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Nt=function(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e},Fi=function(n){let e=n.assignedSlot||n.parentNode;return e&&e.nodeType==11?e.host:e};let Mh=null;const lr=function(n,e,t){let s=Mh||(Mh=document.createRange());return s.setEnd(n,t??n.nodeValue.length),s.setStart(n,e||0),s},HC=function(){Mh=null},Is=function(n,e,t,s){return t&&(Ex(n,e,t,s,-1)||Ex(n,e,t,s,1))},UC=/^(img|br|input|textarea|hr)$/i;function Ex(n,e,t,s,l){for(var a;;){if(n==t&&e==s)return!0;if(e==(l<0?0:xn(n))){let c=n.parentNode;if(!c||c.nodeType!=1||Ba(n)||UC.test(n.nodeName)||n.contentEditable=="false")return!1;e=Nt(n)+(l<0?0:1),n=c}else if(n.nodeType==1){let c=n.childNodes[e+(l<0?-1:0)];if(c.nodeType==1&&c.contentEditable=="false")if(!((a=c.pmViewDesc)===null||a===void 0)&&a.ignoreForSelection)e+=l;else return!1;else n=c,e=l<0?xn(n):0}else return!1}}function xn(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function PC(n,e){for(;;){if(n.nodeType==3&&e)return n;if(n.nodeType==1&&e>0){if(n.contentEditable=="false")return null;n=n.childNodes[e-1],e=xn(n)}else if(n.parentNode&&!Ba(n))e=Nt(n),n=n.parentNode;else return null}}function IC(n,e){for(;;){if(n.nodeType==3&&e<n.nodeValue.length)return n;if(n.nodeType==1&&e<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[e],e=0}else if(n.parentNode&&!Ba(n))e=Nt(n)+1,n=n.parentNode;else return null}}function VC(n,e,t){for(let s=e==0,l=e==xn(n);s||l;){if(n==t)return!0;let a=Nt(n);if(n=n.parentNode,!n)return!1;s=s&&a==0,l=l&&a==xn(n)}}function Ba(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const mu=function(n){return n.focusNode&&Is(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function js(n,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=n,t.key=t.code=e,t}function qC(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function FC(n,e,t){if(n.caretPositionFromPoint)try{let s=n.caretPositionFromPoint(e,t);if(s)return{node:s.offsetNode,offset:Math.min(xn(s.offsetNode),s.offset)}}catch{}if(n.caretRangeFromPoint){let s=n.caretRangeFromPoint(e,t);if(s)return{node:s.startContainer,offset:Math.min(xn(s.startContainer),s.startOffset)}}}const Un=typeof navigator<"u"?navigator:null,jx=typeof document<"u"?document:null,ss=Un&&Un.userAgent||"",Oh=/Edge\/(\d+)/.exec(ss),_v=/MSIE \d/.exec(ss),Dh=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ss),Gt=!!(_v||Dh||Oh),Zr=_v?document.documentMode:Dh?+Dh[1]:Oh?+Oh[1]:0,En=!Gt&&/gecko\/(\d+)/i.test(ss);En&&+(/Firefox\/(\d+)/.exec(ss)||[0,0])[1];const Rh=!Gt&&/Chrome\/(\d+)/.exec(ss),Mt=!!Rh,Hv=Rh?+Rh[1]:0,Lt=!Gt&&!!Un&&/Apple Computer/.test(Un.vendor),$i=Lt&&(/Mobile\/\w+/.test(ss)||!!Un&&Un.maxTouchPoints>2),yn=$i||(Un?/Mac/.test(Un.platform):!1),$C=Un?/Win/.test(Un.platform):!1,ar=/Android \d/.test(ss),_a=!!jx&&"webkitFontSmoothing"in jx.documentElement.style,GC=_a?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function YC(n){let e=n.defaultView&&n.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function nr(n,e){return typeof n=="number"?n:n[e]}function KC(n){let e=n.getBoundingClientRect(),t=e.width/n.offsetWidth||1,s=e.height/n.offsetHeight||1;return{left:e.left,right:e.left+n.clientWidth*t,top:e.top,bottom:e.top+n.clientHeight*s}}function Ax(n,e,t){let s=n.someProp("scrollThreshold")||0,l=n.someProp("scrollMargin")||5,a=n.dom.ownerDocument;for(let c=t||n.dom;c;){if(c.nodeType!=1){c=Fi(c);continue}let d=c,f=d==a.body,p=f?YC(a):KC(d),g=0,x=0;if(e.top<p.top+nr(s,"top")?x=-(p.top-e.top+nr(l,"top")):e.bottom>p.bottom-nr(s,"bottom")&&(x=e.bottom-e.top>p.bottom-p.top?e.top+nr(l,"top")-p.top:e.bottom-p.bottom+nr(l,"bottom")),e.left<p.left+nr(s,"left")?g=-(p.left-e.left+nr(l,"left")):e.right>p.right-nr(s,"right")&&(g=e.right-p.right+nr(l,"right")),g||x)if(f)a.defaultView.scrollBy(g,x);else{let v=d.scrollLeft,S=d.scrollTop;x&&(d.scrollTop+=x),g&&(d.scrollLeft+=g);let w=d.scrollLeft-v,k=d.scrollTop-S;e={left:e.left-w,top:e.top-k,right:e.right-w,bottom:e.bottom-k}}let b=f?"fixed":getComputedStyle(c).position;if(/^(fixed|sticky)$/.test(b))break;c=b=="absolute"?c.offsetParent:Fi(c)}}function XC(n){let e=n.dom.getBoundingClientRect(),t=Math.max(0,e.top),s,l;for(let a=(e.left+e.right)/2,c=t+1;c<Math.min(innerHeight,e.bottom);c+=5){let d=n.root.elementFromPoint(a,c);if(!d||d==n.dom||!n.dom.contains(d))continue;let f=d.getBoundingClientRect();if(f.top>=t-20){s=d,l=f.top;break}}return{refDOM:s,refTop:l,stack:Uv(n.dom)}}function Uv(n){let e=[],t=n.ownerDocument;for(let s=n;s&&(e.push({dom:s,top:s.scrollTop,left:s.scrollLeft}),n!=t);s=Fi(s));return e}function JC({refDOM:n,refTop:e,stack:t}){let s=n?n.getBoundingClientRect().top:0;Pv(t,s==0?0:s-e)}function Pv(n,e){for(let t=0;t<n.length;t++){let{dom:s,top:l,left:a}=n[t];s.scrollTop!=l+e&&(s.scrollTop=l+e),s.scrollLeft!=a&&(s.scrollLeft=a)}}let Di=null;function QC(n){if(n.setActive)return n.setActive();if(Di)return n.focus(Di);let e=Uv(n);n.focus(Di==null?{get preventScroll(){return Di={preventScroll:!0},!0}}:void 0),Di||(Di=!1,Pv(e,0))}function Iv(n,e){let t,s=2e8,l,a=0,c=e.top,d=e.top,f,p;for(let g=n.firstChild,x=0;g;g=g.nextSibling,x++){let b;if(g.nodeType==1)b=g.getClientRects();else if(g.nodeType==3)b=lr(g).getClientRects();else continue;for(let v=0;v<b.length;v++){let S=b[v];if(S.top<=c&&S.bottom>=d){c=Math.max(S.bottom,c),d=Math.min(S.top,d);let w=S.left>e.left?S.left-e.left:S.right<e.left?e.left-S.right:0;if(w<s){t=g,s=w,l=w&&t.nodeType==3?{left:S.right<e.left?S.right:S.left,top:e.top}:e,g.nodeType==1&&w&&(a=x+(e.left>=(S.left+S.right)/2?1:0));continue}}else S.top>e.top&&!f&&S.left<=e.left&&S.right>=e.left&&(f=g,p={left:Math.max(S.left,Math.min(S.right,e.left)),top:S.top});!t&&(e.left>=S.right&&e.top>=S.top||e.left>=S.left&&e.top>=S.bottom)&&(a=x+1)}}return!t&&f&&(t=f,l=p,s=0),t&&t.nodeType==3?ZC(t,l):!t||s&&t.nodeType==1?{node:n,offset:a}:Iv(t,l)}function ZC(n,e){let t=n.nodeValue.length,s=document.createRange();for(let l=0;l<t;l++){s.setEnd(n,l+1),s.setStart(n,l);let a=Ir(s,1);if(a.top!=a.bottom&&gp(e,a))return{node:n,offset:l+(e.left>=(a.left+a.right)/2?1:0)}}return{node:n,offset:0}}function gp(n,e){return n.left>=e.left-1&&n.left<=e.right+1&&n.top>=e.top-1&&n.top<=e.bottom+1}function WC(n,e){let t=n.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<n.getBoundingClientRect().left?t:n}function eE(n,e,t){let{node:s,offset:l}=Iv(e,t),a=-1;if(s.nodeType==1&&!s.firstChild){let c=s.getBoundingClientRect();a=c.left!=c.right&&t.left>(c.left+c.right)/2?1:-1}return n.docView.posFromDOM(s,l,a)}function tE(n,e,t,s){let l=-1;for(let a=e,c=!1;a!=n.dom;){let d=n.docView.nearestDesc(a,!0),f;if(!d)return null;if(d.dom.nodeType==1&&(d.node.isBlock&&d.parent||!d.contentDOM)&&((f=d.dom.getBoundingClientRect()).width||f.height)&&(d.node.isBlock&&d.parent&&(!c&&f.left>s.left||f.top>s.top?l=d.posBefore:(!c&&f.right<s.left||f.bottom<s.top)&&(l=d.posAfter),c=!0),!d.contentDOM&&l<0&&!d.node.isText))return(d.node.isBlock?s.top<(f.top+f.bottom)/2:s.left<(f.left+f.right)/2)?d.posBefore:d.posAfter;a=d.dom.parentNode}return l>-1?l:n.docView.posFromDOM(e,t,-1)}function Vv(n,e,t){let s=n.childNodes.length;if(s&&t.top<t.bottom)for(let l=Math.max(0,Math.min(s-1,Math.floor(s*(e.top-t.top)/(t.bottom-t.top))-2)),a=l;;){let c=n.childNodes[a];if(c.nodeType==1){let d=c.getClientRects();for(let f=0;f<d.length;f++){let p=d[f];if(gp(e,p))return Vv(c,e,p)}}if((a=(a+1)%s)==l)break}return n}function nE(n,e){let t=n.dom.ownerDocument,s,l=0,a=FC(t,e.left,e.top);a&&({node:s,offset:l}=a);let c=(n.root.elementFromPoint?n.root:t).elementFromPoint(e.left,e.top),d;if(!c||!n.dom.contains(c.nodeType!=1?c.parentNode:c)){let p=n.dom.getBoundingClientRect();if(!gp(e,p)||(c=Vv(n.dom,e,p),!c))return null}if(Lt)for(let p=c;s&&p;p=Fi(p))p.draggable&&(s=void 0);if(c=WC(c,e),s){if(En&&s.nodeType==1&&(l=Math.min(l,s.childNodes.length),l<s.childNodes.length)){let g=s.childNodes[l],x;g.nodeName=="IMG"&&(x=g.getBoundingClientRect()).right<=e.left&&x.bottom>e.top&&l++}let p;_a&&l&&s.nodeType==1&&(p=s.childNodes[l-1]).nodeType==1&&p.contentEditable=="false"&&p.getBoundingClientRect().top>=e.top&&l--,s==n.dom&&l==s.childNodes.length-1&&s.lastChild.nodeType==1&&e.top>s.lastChild.getBoundingClientRect().bottom?d=n.state.doc.content.size:(l==0||s.nodeType!=1||s.childNodes[l-1].nodeName!="BR")&&(d=tE(n,s,l,e))}d==null&&(d=eE(n,c,e));let f=n.docView.nearestDesc(c,!0);return{pos:d,inside:f?f.posAtStart-f.border:-1}}function Tx(n){return n.top<n.bottom||n.left<n.right}function Ir(n,e){let t=n.getClientRects();if(t.length){let s=t[e<0?0:t.length-1];if(Tx(s))return s}return Array.prototype.find.call(t,Tx)||n.getBoundingClientRect()}const rE=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function qv(n,e,t){let{node:s,offset:l,atom:a}=n.docView.domFromPos(e,t<0?-1:1),c=_a||En;if(s.nodeType==3)if(c&&(rE.test(s.nodeValue)||(t<0?!l:l==s.nodeValue.length))){let f=Ir(lr(s,l,l),t);if(En&&l&&/\s/.test(s.nodeValue[l-1])&&l<s.nodeValue.length){let p=Ir(lr(s,l-1,l-1),-1);if(p.top==f.top){let g=Ir(lr(s,l,l+1),-1);if(g.top!=f.top)return ra(g,g.left<p.left)}}return f}else{let f=l,p=l,g=t<0?1:-1;return t<0&&!l?(p++,g=-1):t>=0&&l==s.nodeValue.length?(f--,g=1):t<0?f--:p++,ra(Ir(lr(s,f,p),g),g<0)}if(!n.state.doc.resolve(e-(a||0)).parent.inlineContent){if(a==null&&l&&(t<0||l==xn(s))){let f=s.childNodes[l-1];if(f.nodeType==1)return eh(f.getBoundingClientRect(),!1)}if(a==null&&l<xn(s)){let f=s.childNodes[l];if(f.nodeType==1)return eh(f.getBoundingClientRect(),!0)}return eh(s.getBoundingClientRect(),t>=0)}if(a==null&&l&&(t<0||l==xn(s))){let f=s.childNodes[l-1],p=f.nodeType==3?lr(f,xn(f)-(c?0:1)):f.nodeType==1&&(f.nodeName!="BR"||!f.nextSibling)?f:null;if(p)return ra(Ir(p,1),!1)}if(a==null&&l<xn(s)){let f=s.childNodes[l];for(;f.pmViewDesc&&f.pmViewDesc.ignoreForCoords;)f=f.nextSibling;let p=f?f.nodeType==3?lr(f,0,c?0:1):f.nodeType==1?f:null:null;if(p)return ra(Ir(p,-1),!0)}return ra(Ir(s.nodeType==3?lr(s):s,-t),t>=0)}function ra(n,e){if(n.width==0)return n;let t=e?n.left:n.right;return{top:n.top,bottom:n.bottom,left:t,right:t}}function eh(n,e){if(n.height==0)return n;let t=e?n.top:n.bottom;return{top:t,bottom:t,left:n.left,right:n.right}}function Fv(n,e,t){let s=n.state,l=n.root.activeElement;s!=e&&n.updateState(e),l!=n.dom&&n.focus();try{return t()}finally{s!=e&&n.updateState(s),l!=n.dom&&l&&l.focus()}}function sE(n,e,t){let s=e.selection,l=t=="up"?s.$from:s.$to;return Fv(n,e,()=>{let{node:a}=n.docView.domFromPos(l.pos,t=="up"?-1:1);for(;;){let d=n.docView.nearestDesc(a,!0);if(!d)break;if(d.node.isBlock){a=d.contentDOM||d.dom;break}a=d.dom.parentNode}let c=qv(n,l.pos,1);for(let d=a.firstChild;d;d=d.nextSibling){let f;if(d.nodeType==1)f=d.getClientRects();else if(d.nodeType==3)f=lr(d,0,d.nodeValue.length).getClientRects();else continue;for(let p=0;p<f.length;p++){let g=f[p];if(g.bottom>g.top+1&&(t=="up"?c.top-g.top>(g.bottom-c.top)*2:g.bottom-c.bottom>(c.bottom-g.top)*2))return!1}}return!0})}const iE=/[\u0590-\u08ac]/;function lE(n,e,t){let{$head:s}=e.selection;if(!s.parent.isTextblock)return!1;let l=s.parentOffset,a=!l,c=l==s.parent.content.size,d=n.domSelection();return d?!iE.test(s.parent.textContent)||!d.modify?t=="left"||t=="backward"?a:c:Fv(n,e,()=>{let{focusNode:f,focusOffset:p,anchorNode:g,anchorOffset:x}=n.domSelectionRange(),b=d.caretBidiLevel;d.modify("move",t,"character");let v=s.depth?n.docView.domAfterPos(s.before()):n.dom,{focusNode:S,focusOffset:w}=n.domSelectionRange(),k=S&&!v.contains(S.nodeType==1?S:S.parentNode)||f==S&&p==w;try{d.collapse(g,x),f&&(f!=g||p!=x)&&d.extend&&d.extend(f,p)}catch{}return b!=null&&(d.caretBidiLevel=b),k}):s.pos==s.start()||s.pos==s.end()}let Mx=null,Ox=null,Dx=!1;function aE(n,e,t){return Mx==e&&Ox==t?Dx:(Mx=e,Ox=t,Dx=t=="up"||t=="down"?sE(n,e,t):lE(n,e,t))}const vn=0,Rx=1,Ts=2,Pn=3;class Ha{constructor(e,t,s,l){this.parent=e,this.children=t,this.dom=s,this.contentDOM=l,this.dirty=vn,s.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,s){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,s=this.posAtStart;;t++){let l=this.children[t];if(l==e)return s;s+=l.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,s){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(s<0){let a,c;if(e==this.contentDOM)a=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;a=e.previousSibling}for(;a&&!((c=a.pmViewDesc)&&c.parent==this);)a=a.previousSibling;return a?this.posBeforeChild(c)+c.size:this.posAtStart}else{let a,c;if(e==this.contentDOM)a=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;a=e.nextSibling}for(;a&&!((c=a.pmViewDesc)&&c.parent==this);)a=a.nextSibling;return a?this.posBeforeChild(c):this.posAtEnd}let l;if(e==this.dom&&this.contentDOM)l=t>Nt(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))l=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let a=e;;a=a.parentNode){if(a==this.dom){l=!1;break}if(a.previousSibling)break}if(l==null&&t==e.childNodes.length)for(let a=e;;a=a.parentNode){if(a==this.dom){l=!0;break}if(a.nextSibling)break}}return l??s>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let s=!0,l=e;l;l=l.parentNode){let a=this.getDesc(l),c;if(a&&(!t||a.node))if(s&&(c=a.nodeDOM)&&!(c.nodeType==1?c.contains(e.nodeType==1?e:e.parentNode):c==e))s=!1;else return a}}getDesc(e){let t=e.pmViewDesc;for(let s=t;s;s=s.parent)if(s==this)return t}posFromDOM(e,t,s){for(let l=e;l;l=l.parentNode){let a=this.getDesc(l);if(a)return a.localPosFromDOM(e,t,s)}return-1}descAt(e){for(let t=0,s=0;t<this.children.length;t++){let l=this.children[t],a=s+l.size;if(s==e&&a!=s){for(;!l.border&&l.children.length;)for(let c=0;c<l.children.length;c++){let d=l.children[c];if(d.size){l=d;break}}return l}if(e<a)return l.descAt(e-s-l.border);s=a}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let s=0,l=0;for(let a=0;s<this.children.length;s++){let c=this.children[s],d=a+c.size;if(d>e||c instanceof Gv){l=e-a;break}a=d}if(l)return this.children[s].domFromPos(l-this.children[s].border,t);for(let a;s&&!(a=this.children[s-1]).size&&a instanceof $v&&a.side>=0;s--);if(t<=0){let a,c=!0;for(;a=s?this.children[s-1]:null,!(!a||a.dom.parentNode==this.contentDOM);s--,c=!1);return a&&t&&c&&!a.border&&!a.domAtom?a.domFromPos(a.size,t):{node:this.contentDOM,offset:a?Nt(a.dom)+1:0}}else{let a,c=!0;for(;a=s<this.children.length?this.children[s]:null,!(!a||a.dom.parentNode==this.contentDOM);s++,c=!1);return a&&c&&!a.border&&!a.domAtom?a.domFromPos(0,t):{node:this.contentDOM,offset:a?Nt(a.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,s=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let l=-1,a=-1;for(let c=s,d=0;;d++){let f=this.children[d],p=c+f.size;if(l==-1&&e<=p){let g=c+f.border;if(e>=g&&t<=p-f.border&&f.node&&f.contentDOM&&this.contentDOM.contains(f.contentDOM))return f.parseRange(e,t,g);e=c;for(let x=d;x>0;x--){let b=this.children[x-1];if(b.size&&b.dom.parentNode==this.contentDOM&&!b.emptyChildAt(1)){l=Nt(b.dom)+1;break}e-=b.size}l==-1&&(l=0)}if(l>-1&&(p>t||d==this.children.length-1)){t=p;for(let g=d+1;g<this.children.length;g++){let x=this.children[g];if(x.size&&x.dom.parentNode==this.contentDOM&&!x.emptyChildAt(-1)){a=Nt(x.dom);break}t+=x.size}a==-1&&(a=this.contentDOM.childNodes.length);break}c=p}return{node:this.contentDOM,from:e,to:t,fromOffset:l,toOffset:a}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:s}=this.domFromPos(e,0);if(t.nodeType!=1||s==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[s]}setSelection(e,t,s,l=!1){let a=Math.min(e,t),c=Math.max(e,t);for(let v=0,S=0;v<this.children.length;v++){let w=this.children[v],k=S+w.size;if(a>S&&c<k)return w.setSelection(e-S-w.border,t-S-w.border,s,l);S=k}let d=this.domFromPos(e,e?-1:1),f=t==e?d:this.domFromPos(t,t?-1:1),p=s.root.getSelection(),g=s.domSelectionRange(),x=!1;if((En||Lt)&&e==t){let{node:v,offset:S}=d;if(v.nodeType==3){if(x=!!(S&&v.nodeValue[S-1]==`
`),x&&S==v.nodeValue.length)for(let w=v,k;w;w=w.parentNode){if(k=w.nextSibling){k.nodeName=="BR"&&(d=f={node:k.parentNode,offset:Nt(k)+1});break}let j=w.pmViewDesc;if(j&&j.node&&j.node.isBlock)break}}else{let w=v.childNodes[S-1];x=w&&(w.nodeName=="BR"||w.contentEditable=="false")}}if(En&&g.focusNode&&g.focusNode!=f.node&&g.focusNode.nodeType==1){let v=g.focusNode.childNodes[g.focusOffset];v&&v.contentEditable=="false"&&(l=!0)}if(!(l||x&&Lt)&&Is(d.node,d.offset,g.anchorNode,g.anchorOffset)&&Is(f.node,f.offset,g.focusNode,g.focusOffset))return;let b=!1;if((p.extend||e==t)&&!x){p.collapse(d.node,d.offset);try{e!=t&&p.extend(f.node,f.offset),b=!0}catch{}}if(!b){if(e>t){let S=d;d=f,f=S}let v=document.createRange();v.setEnd(f.node,f.offset),v.setStart(d.node,d.offset),p.removeAllRanges(),p.addRange(v)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let s=0,l=0;l<this.children.length;l++){let a=this.children[l],c=s+a.size;if(s==c?e<=c&&t>=s:e<c&&t>s){let d=s+a.border,f=c-a.border;if(e>=d&&t<=f){this.dirty=e==s||t==c?Ts:Rx,e==d&&t==f&&(a.contentLost||a.dom.parentNode!=this.contentDOM)?a.dirty=Pn:a.markDirty(e-d,t-d);return}else a.dirty=a.dom==a.contentDOM&&a.dom.parentNode==this.contentDOM&&!a.children.length?Ts:Pn}s=c}this.dirty=Ts}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let s=e==1?Ts:Rx;t.dirty<s&&(t.dirty=s)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class $v extends Ha{constructor(e,t,s,l){let a,c=t.type.toDOM;if(typeof c=="function"&&(c=c(s,()=>{if(!a)return l;if(a.parent)return a.parent.posBeforeChild(a)})),!t.type.spec.raw){if(c.nodeType!=1){let d=document.createElement("span");d.appendChild(c),c=d}c.contentEditable="false",c.classList.add("ProseMirror-widget")}super(e,[],c,null),this.widget=t,this.widget=t,a=this}matchesWidget(e){return this.dirty==vn&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class oE extends Ha{constructor(e,t,s,l){super(e,[],t,null),this.textDOM=s,this.text=l}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Vs extends Ha{constructor(e,t,s,l,a){super(e,[],s,l),this.mark=t,this.spec=a}static create(e,t,s,l){let a=l.nodeViews[t.type.name],c=a&&a(t,l,s);return(!c||!c.dom)&&(c=Fs.renderSpec(document,t.type.spec.toDOM(t,s),null,t.attrs)),new Vs(e,t,c.dom,c.contentDOM||c.dom,c)}parseRule(){return this.dirty&Pn||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Pn&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=vn){let s=this.parent;for(;!s.node;)s=s.parent;s.dirty<this.dirty&&(s.dirty=this.dirty),this.dirty=vn}}slice(e,t,s){let l=Vs.create(this.parent,this.mark,!0,s),a=this.children,c=this.size;t<c&&(a=zh(a,t,c,s)),e>0&&(a=zh(a,0,e,s));for(let d=0;d<a.length;d++)a[d].parent=l;return l.children=a,l}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Wr extends Ha{constructor(e,t,s,l,a,c,d,f,p){super(e,[],a,c),this.node=t,this.outerDeco=s,this.innerDeco=l,this.nodeDOM=d}static create(e,t,s,l,a,c){let d=a.nodeViews[t.type.name],f,p=d&&d(t,a,()=>{if(!f)return c;if(f.parent)return f.parent.posBeforeChild(f)},s,l),g=p&&p.dom,x=p&&p.contentDOM;if(t.isText){if(!g)g=document.createTextNode(t.text);else if(g.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else g||({dom:g,contentDOM:x}=Fs.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs));!x&&!t.isText&&g.nodeName!="BR"&&(g.hasAttribute("contenteditable")||(g.contentEditable="false"),t.type.spec.draggable&&(g.draggable=!0));let b=g;return g=Xv(g,s,t),p?f=new cE(e,t,s,l,g,x||null,b,p,a,c+1):t.isText?new gu(e,t,s,l,g,b,a):new Wr(e,t,s,l,g,x||null,b,a,c+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let s=this.children[t];if(this.dom.contains(s.dom.parentNode)){e.contentElement=s.dom.parentNode;break}}e.contentElement||(e.getContent=()=>X.empty)}return e}matchesNode(e,t,s){return this.dirty==vn&&e.eq(this.node)&&Ec(t,this.outerDeco)&&s.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let s=this.node.inlineContent,l=t,a=e.composing?this.localCompositionInfo(e,t):null,c=a&&a.pos>-1?a:null,d=a&&a.pos<0,f=new dE(this,c&&c.node,e);pE(this.node,this.innerDeco,(p,g,x)=>{p.spec.marks?f.syncToMarks(p.spec.marks,s,e):p.type.side>=0&&!x&&f.syncToMarks(g==this.node.childCount?Ve.none:this.node.child(g).marks,s,e),f.placeWidget(p,e,l)},(p,g,x,b)=>{f.syncToMarks(p.marks,s,e);let v;f.findNodeMatch(p,g,x,b)||d&&e.state.selection.from>l&&e.state.selection.to<l+p.nodeSize&&(v=f.findIndexWithChild(a.node))>-1&&f.updateNodeAt(p,g,x,v,e)||f.updateNextNode(p,g,x,e,b,l)||f.addNode(p,g,x,e,l),l+=p.nodeSize}),f.syncToMarks([],s,e),this.node.isTextblock&&f.addTextblockHacks(),f.destroyRest(),(f.changed||this.dirty==Ts)&&(c&&this.protectLocalComposition(e,c),Yv(this.contentDOM,this.children,e),$i&&mE(this.dom))}localCompositionInfo(e,t){let{from:s,to:l}=e.state.selection;if(!(e.state.selection instanceof be)||s<t||l>t+this.node.content.size)return null;let a=e.input.compositionNode;if(!a||!this.dom.contains(a.parentNode))return null;if(this.node.inlineContent){let c=a.nodeValue,d=gE(this.node.content,c,s-t,l-t);return d<0?null:{node:a,pos:d,text:c}}else return{node:a,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:s,text:l}){if(this.getDesc(t))return;let a=t;for(;a.parentNode!=this.contentDOM;a=a.parentNode){for(;a.previousSibling;)a.parentNode.removeChild(a.previousSibling);for(;a.nextSibling;)a.parentNode.removeChild(a.nextSibling);a.pmViewDesc&&(a.pmViewDesc=void 0)}let c=new oE(this,a,t,l);e.input.compositionNodes.push(c),this.children=zh(this.children,s,s+l.length,e,c)}update(e,t,s,l){return this.dirty==Pn||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,s,l),!0)}updateInner(e,t,s,l){this.updateOuterDeco(t),this.node=e,this.innerDeco=s,this.contentDOM&&this.updateChildren(l,this.posAtStart),this.dirty=vn}updateOuterDeco(e){if(Ec(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,s=this.dom;this.dom=Kv(this.dom,this.nodeDOM,Lh(this.outerDeco,this.node,t),Lh(e,this.node,t)),this.dom!=s&&(s.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function Lx(n,e,t,s,l){Xv(s,e,n);let a=new Wr(void 0,n,e,t,s,s,s,l,0);return a.contentDOM&&a.updateChildren(l,0),a}class gu extends Wr{constructor(e,t,s,l,a,c,d){super(e,t,s,l,a,null,c,d,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,s,l){return this.dirty==Pn||this.dirty!=vn&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=vn||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,l.trackWrites==this.nodeDOM&&(l.trackWrites=null)),this.node=e,this.dirty=vn,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,s){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,s)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,s){let l=this.node.cut(e,t),a=document.createTextNode(l.text);return new gu(this.parent,l,this.outerDeco,this.innerDeco,a,a,s)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=Pn)}get domAtom(){return!1}isText(e){return this.node.text==e}}class Gv extends Ha{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==vn&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class cE extends Wr{constructor(e,t,s,l,a,c,d,f,p,g){super(e,t,s,l,a,c,d,p,g),this.spec=f}update(e,t,s,l){if(this.dirty==Pn)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let a=this.spec.update(e,t,s);return a&&this.updateInner(e,t,s,l),a}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,s,l)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,s,l){this.spec.setSelection?this.spec.setSelection(e,t,s.root):super.setSelection(e,t,s,l)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function Yv(n,e,t){let s=n.firstChild,l=!1;for(let a=0;a<e.length;a++){let c=e[a],d=c.dom;if(d.parentNode==n){for(;d!=s;)s=zx(s),l=!0;s=s.nextSibling}else l=!0,n.insertBefore(d,s);if(c instanceof Vs){let f=s?s.previousSibling:n.lastChild;Yv(c.contentDOM,c.children,t),s=f?f.nextSibling:n.firstChild}}for(;s;)s=zx(s),l=!0;l&&t.trackWrites==n&&(t.trackWrites=null)}const da=function(n){n&&(this.nodeName=n)};da.prototype=Object.create(null);const Ms=[new da];function Lh(n,e,t){if(n.length==0)return Ms;let s=t?Ms[0]:new da,l=[s];for(let a=0;a<n.length;a++){let c=n[a].type.attrs;if(c){c.nodeName&&l.push(s=new da(c.nodeName));for(let d in c){let f=c[d];f!=null&&(t&&l.length==1&&l.push(s=new da(e.isInline?"span":"div")),d=="class"?s.class=(s.class?s.class+" ":"")+f:d=="style"?s.style=(s.style?s.style+";":"")+f:d!="nodeName"&&(s[d]=f))}}}return l}function Kv(n,e,t,s){if(t==Ms&&s==Ms)return e;let l=e;for(let a=0;a<s.length;a++){let c=s[a],d=t[a];if(a){let f;d&&d.nodeName==c.nodeName&&l!=n&&(f=l.parentNode)&&f.nodeName.toLowerCase()==c.nodeName||(f=document.createElement(c.nodeName),f.pmIsDeco=!0,f.appendChild(l),d=Ms[0]),l=f}uE(l,d||Ms[0],c)}return l}function uE(n,e,t){for(let s in e)s!="class"&&s!="style"&&s!="nodeName"&&!(s in t)&&n.removeAttribute(s);for(let s in t)s!="class"&&s!="style"&&s!="nodeName"&&t[s]!=e[s]&&n.setAttribute(s,t[s]);if(e.class!=t.class){let s=e.class?e.class.split(" ").filter(Boolean):[],l=t.class?t.class.split(" ").filter(Boolean):[];for(let a=0;a<s.length;a++)l.indexOf(s[a])==-1&&n.classList.remove(s[a]);for(let a=0;a<l.length;a++)s.indexOf(l[a])==-1&&n.classList.add(l[a]);n.classList.length==0&&n.removeAttribute("class")}if(e.style!=t.style){if(e.style){let s=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,l;for(;l=s.exec(e.style);)n.style.removeProperty(l[1])}t.style&&(n.style.cssText+=t.style)}}function Xv(n,e,t){return Kv(n,n,Ms,Lh(e,t,n.nodeType!=1))}function Ec(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].type.eq(e[t].type))return!1;return!0}function zx(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class dE{constructor(e,t,s){this.lock=t,this.view=s,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=fE(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let s=e;s<t;s++)this.top.children[s].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,s){let l=0,a=this.stack.length>>1,c=Math.min(a,e.length);for(;l<c&&(l==a-1?this.top:this.stack[l+1<<1]).matchesMark(e[l])&&e[l].type.spec.spanning!==!1;)l++;for(;l<a;)this.destroyRest(),this.top.dirty=vn,this.index=this.stack.pop(),this.top=this.stack.pop(),a--;for(;a<e.length;){this.stack.push(this.top,this.index+1);let d=-1;for(let f=this.index;f<Math.min(this.index+3,this.top.children.length);f++){let p=this.top.children[f];if(p.matchesMark(e[a])&&!this.isLocked(p.dom)){d=f;break}}if(d>-1)d>this.index&&(this.changed=!0,this.destroyBetween(this.index,d)),this.top=this.top.children[this.index];else{let f=Vs.create(this.top,e[a],t,s);this.top.children.splice(this.index,0,f),this.top=f,this.changed=!0}this.index=0,a++}}findNodeMatch(e,t,s,l){let a=-1,c;if(l>=this.preMatch.index&&(c=this.preMatch.matches[l-this.preMatch.index]).parent==this.top&&c.matchesNode(e,t,s))a=this.top.children.indexOf(c,this.index);else for(let d=this.index,f=Math.min(this.top.children.length,d+5);d<f;d++){let p=this.top.children[d];if(p.matchesNode(e,t,s)&&!this.preMatch.matched.has(p)){a=d;break}}return a<0?!1:(this.destroyBetween(this.index,a),this.index++,!0)}updateNodeAt(e,t,s,l,a){let c=this.top.children[l];return c.dirty==Pn&&c.dom==c.contentDOM&&(c.dirty=Ts),c.update(e,t,s,a)?(this.destroyBetween(this.index,l),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let s=e.pmViewDesc;if(s){for(let l=this.index;l<this.top.children.length;l++)if(this.top.children[l]==s)return l}return-1}e=t}}updateNextNode(e,t,s,l,a,c){for(let d=this.index;d<this.top.children.length;d++){let f=this.top.children[d];if(f instanceof Wr){let p=this.preMatch.matched.get(f);if(p!=null&&p!=a)return!1;let g=f.dom,x,b=this.isLocked(g)&&!(e.isText&&f.node&&f.node.isText&&f.nodeDOM.nodeValue==e.text&&f.dirty!=Pn&&Ec(t,f.outerDeco));if(!b&&f.update(e,t,s,l))return this.destroyBetween(this.index,d),f.dom!=g&&(this.changed=!0),this.index++,!0;if(!b&&(x=this.recreateWrapper(f,e,t,s,l,c)))return this.destroyBetween(this.index,d),this.top.children[this.index]=x,x.contentDOM&&(x.dirty=Ts,x.updateChildren(l,c+1),x.dirty=vn),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,s,l,a,c){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!Ec(s,e.outerDeco)||!l.eq(e.innerDeco))return null;let d=Wr.create(this.top,t,s,l,a,c);if(d.contentDOM){d.children=e.children,e.children=[];for(let f of d.children)f.parent=d}return e.destroy(),d}addNode(e,t,s,l,a){let c=Wr.create(this.top,e,t,s,l,a);c.contentDOM&&c.updateChildren(l,a+1),this.top.children.splice(this.index++,0,c),this.changed=!0}placeWidget(e,t,s){let l=this.index<this.top.children.length?this.top.children[this.index]:null;if(l&&l.matchesWidget(e)&&(e==l.widget||!l.widget.type.toDOM.parentNode))this.index++;else{let a=new $v(this.top,e,t,s);this.top.children.splice(this.index++,0,a),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof Vs;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof gu)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Lt||Mt)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let s=document.createElement(e);e=="IMG"&&(s.className="ProseMirror-separator",s.alt=""),e=="BR"&&(s.className="ProseMirror-trailingBreak");let l=new Gv(this.top,[],s,null);t!=this.top?t.children.push(l):t.children.splice(this.index++,0,l),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function fE(n,e){let t=e,s=t.children.length,l=n.childCount,a=new Map,c=[];e:for(;l>0;){let d;for(;;)if(s){let p=t.children[s-1];if(p instanceof Vs)t=p,s=p.children.length;else{d=p,s--;break}}else{if(t==e)break e;s=t.parent.children.indexOf(t),t=t.parent}let f=d.node;if(f){if(f!=n.child(l-1))break;--l,a.set(d,l),c.push(d)}}return{index:l,matched:a,matches:c.reverse()}}function hE(n,e){return n.type.side-e.type.side}function pE(n,e,t,s){let l=e.locals(n),a=0;if(l.length==0){for(let p=0;p<n.childCount;p++){let g=n.child(p);s(g,l,e.forChild(a,g),p),a+=g.nodeSize}return}let c=0,d=[],f=null;for(let p=0;;){let g,x;for(;c<l.length&&l[c].to==a;){let k=l[c++];k.widget&&(g?(x||(x=[g])).push(k):g=k)}if(g)if(x){x.sort(hE);for(let k=0;k<x.length;k++)t(x[k],p,!!f)}else t(g,p,!!f);let b,v;if(f)v=-1,b=f,f=null;else if(p<n.childCount)v=p,b=n.child(p++);else break;for(let k=0;k<d.length;k++)d[k].to<=a&&d.splice(k--,1);for(;c<l.length&&l[c].from<=a&&l[c].to>a;)d.push(l[c++]);let S=a+b.nodeSize;if(b.isText){let k=S;c<l.length&&l[c].from<k&&(k=l[c].from);for(let j=0;j<d.length;j++)d[j].to<k&&(k=d[j].to);k<S&&(f=b.cut(k-a),b=b.cut(0,k-a),S=k,v=-1)}else for(;c<l.length&&l[c].to<S;)c++;let w=b.isInline&&!b.isLeaf?d.filter(k=>!k.inline):d.slice();s(b,w,e.forChild(a,b),v),a=S}}function mE(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let e=n.style.cssText;n.style.cssText=e+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=e}}function gE(n,e,t,s){for(let l=0,a=0;l<n.childCount&&a<=s;){let c=n.child(l++),d=a;if(a+=c.nodeSize,!c.isText)continue;let f=c.text;for(;l<n.childCount;){let p=n.child(l++);if(a+=p.nodeSize,!p.isText)break;f+=p.text}if(a>=t){if(a>=s&&f.slice(s-e.length-d,s-d)==e)return s-e.length;let p=d<s?f.lastIndexOf(e,s-d-1):-1;if(p>=0&&p+e.length+d>=t)return d+p;if(t==s&&f.length>=s+e.length-d&&f.slice(s-d,s-d+e.length)==e)return s}}return-1}function zh(n,e,t,s,l){let a=[];for(let c=0,d=0;c<n.length;c++){let f=n[c],p=d,g=d+=f.size;p>=t||g<=e?a.push(f):(p<e&&a.push(f.slice(0,e-p,s)),l&&(a.push(l),l=void 0),g>t&&a.push(f.slice(t-p,f.size,s)))}return a}function yp(n,e=null){let t=n.domSelectionRange(),s=n.state.doc;if(!t.focusNode)return null;let l=n.docView.nearestDesc(t.focusNode),a=l&&l.size==0,c=n.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(c<0)return null;let d=s.resolve(c),f,p;if(mu(t)){for(f=c;l&&!l.node;)l=l.parent;let x=l.node;if(l&&x.isAtom&&he.isSelectable(x)&&l.parent&&!(x.isInline&&VC(t.focusNode,t.focusOffset,l.dom))){let b=l.posBefore;p=new he(c==b?d:s.resolve(b))}}else{if(t instanceof n.dom.ownerDocument.defaultView.Selection&&t.rangeCount>1){let x=c,b=c;for(let v=0;v<t.rangeCount;v++){let S=t.getRangeAt(v);x=Math.min(x,n.docView.posFromDOM(S.startContainer,S.startOffset,1)),b=Math.max(b,n.docView.posFromDOM(S.endContainer,S.endOffset,-1))}if(x<0)return null;[f,c]=b==n.state.selection.anchor?[b,x]:[x,b],d=s.resolve(c)}else f=n.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(f<0)return null}let g=s.resolve(f);if(!p){let x=e=="pointer"||n.state.selection.head<d.pos&&!a?1:-1;p=xp(n,g,d,x)}return p}function Jv(n){return n.editable?n.hasFocus():Zv(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function ur(n,e=!1){let t=n.state.selection;if(Qv(n,t),!!Jv(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&Mt){let s=n.domSelectionRange(),l=n.domObserver.currentSelection;if(s.anchorNode&&l.anchorNode&&Is(s.anchorNode,s.anchorOffset,l.anchorNode,l.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)xE(n);else{let{anchor:s,head:l}=t,a,c;Bx&&!(t instanceof be)&&(t.$from.parent.inlineContent||(a=_x(n,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(c=_x(n,t.to))),n.docView.setSelection(s,l,n,e),Bx&&(a&&Hx(a),c&&Hx(c)),t.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&yE(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const Bx=Lt||Mt&&Hv<63;function _x(n,e){let{node:t,offset:s}=n.docView.domFromPos(e,0),l=s<t.childNodes.length?t.childNodes[s]:null,a=s?t.childNodes[s-1]:null;if(Lt&&l&&l.contentEditable=="false")return th(l);if((!l||l.contentEditable=="false")&&(!a||a.contentEditable=="false")){if(l)return th(l);if(a)return th(a)}}function th(n){return n.contentEditable="true",Lt&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function Hx(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function yE(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let t=n.domSelectionRange(),s=t.anchorNode,l=t.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(t.anchorNode!=s||t.anchorOffset!=l)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!Jv(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function xE(n){let e=n.domSelection(),t=document.createRange();if(!e)return;let s=n.cursorWrapper.dom,l=s.nodeName=="IMG";l?t.setStart(s.parentNode,Nt(s)+1):t.setStart(s,0),t.collapse(!0),e.removeAllRanges(),e.addRange(t),!l&&!n.state.selection.visible&&Gt&&Zr<=11&&(s.disabled=!0,s.disabled=!1)}function Qv(n,e){if(e instanceof he){let t=n.docView.descAt(e.from);t!=n.lastSelectedViewDesc&&(Ux(n),t&&t.selectNode(),n.lastSelectedViewDesc=t)}else Ux(n)}function Ux(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function xp(n,e,t,s){return n.someProp("createSelectionBetween",l=>l(n,e,t))||be.between(e,t,s)}function Px(n){return n.editable&&!n.hasFocus()?!1:Zv(n)}function Zv(n){let e=n.domSelectionRange();if(!e.anchorNode)return!1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function bE(n){let e=n.docView.domFromPos(n.state.selection.anchor,0),t=n.domSelectionRange();return Is(e.node,e.offset,t.anchorNode,t.anchorOffset)}function Bh(n,e){let{$anchor:t,$head:s}=n.selection,l=e>0?t.max(s):t.min(s),a=l.parent.inlineContent?l.depth?n.doc.resolve(e>0?l.after():l.before()):null:l;return a&&Se.findFrom(a,e)}function Vr(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function Ix(n,e,t){let s=n.state.selection;if(s instanceof be)if(t.indexOf("s")>-1){let{$head:l}=s,a=l.textOffset?null:e<0?l.nodeBefore:l.nodeAfter;if(!a||a.isText||!a.isLeaf)return!1;let c=n.state.doc.resolve(l.pos+a.nodeSize*(e<0?-1:1));return Vr(n,new be(s.$anchor,c))}else if(s.empty){if(n.endOfTextblock(e>0?"forward":"backward")){let l=Bh(n.state,e);return l&&l instanceof he?Vr(n,l):!1}else if(!(yn&&t.indexOf("m")>-1)){let l=s.$head,a=l.textOffset?null:e<0?l.nodeBefore:l.nodeAfter,c;if(!a||a.isText)return!1;let d=e<0?l.pos-a.nodeSize:l.pos;return a.isAtom||(c=n.docView.descAt(d))&&!c.contentDOM?he.isSelectable(a)?Vr(n,new he(e<0?n.state.doc.resolve(l.pos-a.nodeSize):l)):_a?Vr(n,new be(n.state.doc.resolve(e<0?d:d+a.nodeSize))):!1:!1}}else return!1;else{if(s instanceof he&&s.node.isInline)return Vr(n,new be(e>0?s.$to:s.$from));{let l=Bh(n.state,e);return l?Vr(n,l):!1}}}function jc(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function fa(n,e){let t=n.pmViewDesc;return t&&t.size==0&&(e<0||n.nextSibling||n.nodeName!="BR")}function Ri(n,e){return e<0?vE(n):SE(n)}function vE(n){let e=n.domSelectionRange(),t=e.focusNode,s=e.focusOffset;if(!t)return;let l,a,c=!1;for(En&&t.nodeType==1&&s<jc(t)&&fa(t.childNodes[s],-1)&&(c=!0);;)if(s>0){if(t.nodeType!=1)break;{let d=t.childNodes[s-1];if(fa(d,-1))l=t,a=--s;else if(d.nodeType==3)t=d,s=t.nodeValue.length;else break}}else{if(Wv(t))break;{let d=t.previousSibling;for(;d&&fa(d,-1);)l=t.parentNode,a=Nt(d),d=d.previousSibling;if(d)t=d,s=jc(t);else{if(t=t.parentNode,t==n.dom)break;s=0}}}c?_h(n,t,s):l&&_h(n,l,a)}function SE(n){let e=n.domSelectionRange(),t=e.focusNode,s=e.focusOffset;if(!t)return;let l=jc(t),a,c;for(;;)if(s<l){if(t.nodeType!=1)break;let d=t.childNodes[s];if(fa(d,1))a=t,c=++s;else break}else{if(Wv(t))break;{let d=t.nextSibling;for(;d&&fa(d,1);)a=d.parentNode,c=Nt(d)+1,d=d.nextSibling;if(d)t=d,s=0,l=jc(t);else{if(t=t.parentNode,t==n.dom)break;s=l=0}}}a&&_h(n,a,c)}function Wv(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function NE(n,e){for(;n&&e==n.childNodes.length&&!Ba(n);)e=Nt(n)+1,n=n.parentNode;for(;n&&e<n.childNodes.length;){let t=n.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=0}}function wE(n,e){for(;n&&!e&&!Ba(n);)e=Nt(n),n=n.parentNode;for(;n&&e;){let t=n.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=n.childNodes.length}}function _h(n,e,t){if(e.nodeType!=3){let a,c;(c=NE(e,t))?(e=c,t=0):(a=wE(e,t))&&(e=a,t=a.nodeValue.length)}let s=n.domSelection();if(!s)return;if(mu(s)){let a=document.createRange();a.setEnd(e,t),a.setStart(e,t),s.removeAllRanges(),s.addRange(a)}else s.extend&&s.extend(e,t);n.domObserver.setCurSelection();let{state:l}=n;setTimeout(()=>{n.state==l&&ur(n)},50)}function Vx(n,e){let t=n.state.doc.resolve(e);if(!(Mt||$C)&&t.parent.inlineContent){let l=n.coordsAtPos(e);if(e>t.start()){let a=n.coordsAtPos(e-1),c=(a.top+a.bottom)/2;if(c>l.top&&c<l.bottom&&Math.abs(a.left-l.left)>1)return a.left<l.left?"ltr":"rtl"}if(e<t.end()){let a=n.coordsAtPos(e+1),c=(a.top+a.bottom)/2;if(c>l.top&&c<l.bottom&&Math.abs(a.left-l.left)>1)return a.left>l.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function qx(n,e,t){let s=n.state.selection;if(s instanceof be&&!s.empty||t.indexOf("s")>-1||yn&&t.indexOf("m")>-1)return!1;let{$from:l,$to:a}=s;if(!l.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let c=Bh(n.state,e);if(c&&c instanceof he)return Vr(n,c)}if(!l.parent.inlineContent){let c=e<0?l:a,d=s instanceof rn?Se.near(c,e):Se.findFrom(c,e);return d?Vr(n,d):!1}return!1}function Fx(n,e){if(!(n.state.selection instanceof be))return!0;let{$head:t,$anchor:s,empty:l}=n.state.selection;if(!t.sameParent(s))return!0;if(!l)return!1;if(n.endOfTextblock(e>0?"forward":"backward"))return!0;let a=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(a&&!a.isText){let c=n.state.tr;return e<0?c.delete(t.pos-a.nodeSize,t.pos):c.delete(t.pos,t.pos+a.nodeSize),n.dispatch(c),!0}return!1}function $x(n,e,t){n.domObserver.stop(),e.contentEditable=t,n.domObserver.start()}function kE(n){if(!Lt||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let s=e.firstChild;$x(n,s,"true"),setTimeout(()=>$x(n,s,"false"),20)}return!1}function CE(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}function EE(n,e){let t=e.keyCode,s=CE(e);if(t==8||yn&&t==72&&s=="c")return Fx(n,-1)||Ri(n,-1);if(t==46&&!e.shiftKey||yn&&t==68&&s=="c")return Fx(n,1)||Ri(n,1);if(t==13||t==27)return!0;if(t==37||yn&&t==66&&s=="c"){let l=t==37?Vx(n,n.state.selection.from)=="ltr"?-1:1:-1;return Ix(n,l,s)||Ri(n,l)}else if(t==39||yn&&t==70&&s=="c"){let l=t==39?Vx(n,n.state.selection.from)=="ltr"?1:-1:1;return Ix(n,l,s)||Ri(n,l)}else{if(t==38||yn&&t==80&&s=="c")return qx(n,-1,s)||Ri(n,-1);if(t==40||yn&&t==78&&s=="c")return kE(n)||qx(n,1,s)||Ri(n,1);if(s==(yn?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function bp(n,e){n.someProp("transformCopied",v=>{e=v(e,n)});let t=[],{content:s,openStart:l,openEnd:a}=e;for(;l>1&&a>1&&s.childCount==1&&s.firstChild.childCount==1;){l--,a--;let v=s.firstChild;t.push(v.type.name,v.attrs!=v.type.defaultAttrs?v.attrs:null),s=v.content}let c=n.someProp("clipboardSerializer")||Fs.fromSchema(n.state.schema),d=i1(),f=d.createElement("div");f.appendChild(c.serializeFragment(s,{document:d}));let p=f.firstChild,g,x=0;for(;p&&p.nodeType==1&&(g=s1[p.nodeName.toLowerCase()]);){for(let v=g.length-1;v>=0;v--){let S=d.createElement(g[v]);for(;f.firstChild;)S.appendChild(f.firstChild);f.appendChild(S),x++}p=f.firstChild}p&&p.nodeType==1&&p.setAttribute("data-pm-slice",`${l} ${a}${x?` -${x}`:""} ${JSON.stringify(t)}`);let b=n.someProp("clipboardTextSerializer",v=>v(e,n))||e.content.textBetween(0,e.content.size,`

`);return{dom:f,text:b,slice:e}}function e1(n,e,t,s,l){let a=l.parent.type.spec.code,c,d;if(!t&&!e)return null;let f=e&&(s||a||!t);if(f){if(n.someProp("transformPastedText",b=>{e=b(e,a||s,n)}),a)return e?new se(X.from(n.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):se.empty;let x=n.someProp("clipboardTextParser",b=>b(e,l,s,n));if(x)d=x;else{let b=l.marks(),{schema:v}=n.state,S=Fs.fromSchema(v);c=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(w=>{let k=c.appendChild(document.createElement("p"));w&&k.appendChild(S.serializeNode(v.text(w,b)))})}}else n.someProp("transformPastedHTML",x=>{t=x(t,n)}),c=ME(t),_a&&OE(c);let p=c&&c.querySelector("[data-pm-slice]"),g=p&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(p.getAttribute("data-pm-slice")||"");if(g&&g[3])for(let x=+g[3];x>0;x--){let b=c.firstChild;for(;b&&b.nodeType!=1;)b=b.nextSibling;if(!b)break;c=b}if(d||(d=(n.someProp("clipboardParser")||n.someProp("domParser")||Qr.fromSchema(n.state.schema)).parseSlice(c,{preserveWhitespace:!!(f||g),context:l,ruleFromNode(b){return b.nodeName=="BR"&&!b.nextSibling&&b.parentNode&&!jE.test(b.parentNode.nodeName)?{ignore:!0}:null}})),g)d=DE(Gx(d,+g[1],+g[2]),g[4]);else if(d=se.maxOpen(AE(d.content,l),!0),d.openStart||d.openEnd){let x=0,b=0;for(let v=d.content.firstChild;x<d.openStart&&!v.type.spec.isolating;x++,v=v.firstChild);for(let v=d.content.lastChild;b<d.openEnd&&!v.type.spec.isolating;b++,v=v.lastChild);d=Gx(d,x,b)}return n.someProp("transformPasted",x=>{d=x(d,n)}),d}const jE=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function AE(n,e){if(n.childCount<2)return n;for(let t=e.depth;t>=0;t--){let l=e.node(t).contentMatchAt(e.index(t)),a,c=[];if(n.forEach(d=>{if(!c)return;let f=l.findWrapping(d.type),p;if(!f)return c=null;if(p=c.length&&a.length&&n1(f,a,d,c[c.length-1],0))c[c.length-1]=p;else{c.length&&(c[c.length-1]=r1(c[c.length-1],a.length));let g=t1(d,f);c.push(g),l=l.matchType(g.type),a=f}}),c)return X.from(c)}return n}function t1(n,e,t=0){for(let s=e.length-1;s>=t;s--)n=e[s].create(null,X.from(n));return n}function n1(n,e,t,s,l){if(l<n.length&&l<e.length&&n[l]==e[l]){let a=n1(n,e,t,s.lastChild,l+1);if(a)return s.copy(s.content.replaceChild(s.childCount-1,a));if(s.contentMatchAt(s.childCount).matchType(l==n.length-1?t.type:n[l+1]))return s.copy(s.content.append(X.from(t1(t,n,l+1))))}}function r1(n,e){if(e==0)return n;let t=n.content.replaceChild(n.childCount-1,r1(n.lastChild,e-1)),s=n.contentMatchAt(n.childCount).fillBefore(X.empty,!0);return n.copy(t.append(s))}function Hh(n,e,t,s,l,a){let c=e<0?n.firstChild:n.lastChild,d=c.content;return n.childCount>1&&(a=0),l<s-1&&(d=Hh(d,e,t,s,l+1,a)),l>=t&&(d=e<0?c.contentMatchAt(0).fillBefore(d,a<=l).append(d):d.append(c.contentMatchAt(c.childCount).fillBefore(X.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,c.copy(d))}function Gx(n,e,t){return e<n.openStart&&(n=new se(Hh(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),t<n.openEnd&&(n=new se(Hh(n.content,1,t,n.openEnd,0,0),n.openStart,t)),n}const s1={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Yx=null;function i1(){return Yx||(Yx=document.implementation.createHTMLDocument("title"))}let nh=null;function TE(n){let e=window.trustedTypes;return e?(nh||(nh=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:t=>t})),nh.createHTML(n)):n}function ME(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let t=i1().createElement("div"),s=/<([a-z][^>\s]+)/i.exec(n),l;if((l=s&&s1[s[1].toLowerCase()])&&(n=l.map(a=>"<"+a+">").join("")+n+l.map(a=>"</"+a+">").reverse().join("")),t.innerHTML=TE(n),l)for(let a=0;a<l.length;a++)t=t.querySelector(l[a])||t;return t}function OE(n){let e=n.querySelectorAll(Mt?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let s=e[t];s.childNodes.length==1&&s.textContent==""&&s.parentNode&&s.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),s)}}function DE(n,e){if(!n.size)return n;let t=n.content.firstChild.type.schema,s;try{s=JSON.parse(e)}catch{return n}let{content:l,openStart:a,openEnd:c}=n;for(let d=s.length-2;d>=0;d-=2){let f=t.nodes[s[d]];if(!f||f.hasRequiredAttrs())break;l=X.from(f.create(s[d+1],l)),a++,c++}return new se(l,a,c)}const zt={},Bt={},RE={touchstart:!0,touchmove:!0};class LE{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function zE(n){for(let e in zt){let t=zt[e];n.dom.addEventListener(e,n.input.eventHandlers[e]=s=>{_E(n,s)&&!vp(n,s)&&(n.editable||!(s.type in Bt))&&t(n,s)},RE[e]?{passive:!0}:void 0)}Lt&&n.dom.addEventListener("input",()=>null),Uh(n)}function Xr(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now()}function BE(n){n.domObserver.stop();for(let e in n.input.eventHandlers)n.dom.removeEventListener(e,n.input.eventHandlers[e]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function Uh(n){n.someProp("handleDOMEvents",e=>{for(let t in e)n.input.eventHandlers[t]||n.dom.addEventListener(t,n.input.eventHandlers[t]=s=>vp(n,s))})}function vp(n,e){return n.someProp("handleDOMEvents",t=>{let s=t[e.type];return s?s(n,e)||e.defaultPrevented:!1})}function _E(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=n.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function HE(n,e){!vp(n,e)&&zt[e.type]&&(n.editable||!(e.type in Bt))&&zt[e.type](n,e)}Bt.keydown=(n,e)=>{let t=e;if(n.input.shiftKey=t.keyCode==16||t.shiftKey,!a1(n,t)&&(n.input.lastKeyCode=t.keyCode,n.input.lastKeyCodeTime=Date.now(),!(ar&&Mt&&t.keyCode==13)))if(t.keyCode!=229&&n.domObserver.forceFlush(),$i&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let s=Date.now();n.input.lastIOSEnter=s,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==s&&(n.someProp("handleKeyDown",l=>l(n,js(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",s=>s(n,t))||EE(n,t)?t.preventDefault():Xr(n,"key")};Bt.keyup=(n,e)=>{e.keyCode==16&&(n.input.shiftKey=!1)};Bt.keypress=(n,e)=>{let t=e;if(a1(n,t)||!t.charCode||t.ctrlKey&&!t.altKey||yn&&t.metaKey)return;if(n.someProp("handleKeyPress",l=>l(n,t))){t.preventDefault();return}let s=n.state.selection;if(!(s instanceof be)||!s.$from.sameParent(s.$to)){let l=String.fromCharCode(t.charCode),a=()=>n.state.tr.insertText(l).scrollIntoView();!/[\r\n]/.test(l)&&!n.someProp("handleTextInput",c=>c(n,s.$from.pos,s.$to.pos,l,a))&&n.dispatch(a()),t.preventDefault()}};function yu(n){return{left:n.clientX,top:n.clientY}}function UE(n,e){let t=e.x-n.clientX,s=e.y-n.clientY;return t*t+s*s<100}function Sp(n,e,t,s,l){if(s==-1)return!1;let a=n.state.doc.resolve(s);for(let c=a.depth+1;c>0;c--)if(n.someProp(e,d=>c>a.depth?d(n,t,a.nodeAfter,a.before(c),l,!0):d(n,t,a.node(c),a.before(c),l,!1)))return!0;return!1}function Ii(n,e,t){if(n.focused||n.focus(),n.state.selection.eq(e))return;let s=n.state.tr.setSelection(e);s.setMeta("pointer",!0),n.dispatch(s)}function PE(n,e){if(e==-1)return!1;let t=n.state.doc.resolve(e),s=t.nodeAfter;return s&&s.isAtom&&he.isSelectable(s)?(Ii(n,new he(t)),!0):!1}function IE(n,e){if(e==-1)return!1;let t=n.state.selection,s,l;t instanceof he&&(s=t.node);let a=n.state.doc.resolve(e);for(let c=a.depth+1;c>0;c--){let d=c>a.depth?a.nodeAfter:a.node(c);if(he.isSelectable(d)){s&&t.$from.depth>0&&c>=t.$from.depth&&a.before(t.$from.depth+1)==t.$from.pos?l=a.before(t.$from.depth):l=a.before(c);break}}return l!=null?(Ii(n,he.create(n.state.doc,l)),!0):!1}function VE(n,e,t,s,l){return Sp(n,"handleClickOn",e,t,s)||n.someProp("handleClick",a=>a(n,e,s))||(l?IE(n,t):PE(n,t))}function qE(n,e,t,s){return Sp(n,"handleDoubleClickOn",e,t,s)||n.someProp("handleDoubleClick",l=>l(n,e,s))}function FE(n,e,t,s){return Sp(n,"handleTripleClickOn",e,t,s)||n.someProp("handleTripleClick",l=>l(n,e,s))||$E(n,t,s)}function $E(n,e,t){if(t.button!=0)return!1;let s=n.state.doc;if(e==-1)return s.inlineContent?(Ii(n,be.create(s,0,s.content.size)),!0):!1;let l=s.resolve(e);for(let a=l.depth+1;a>0;a--){let c=a>l.depth?l.nodeAfter:l.node(a),d=l.before(a);if(c.inlineContent)Ii(n,be.create(s,d+1,d+1+c.content.size));else if(he.isSelectable(c))Ii(n,he.create(s,d));else continue;return!0}}function Np(n){return Ac(n)}const l1=yn?"metaKey":"ctrlKey";zt.mousedown=(n,e)=>{let t=e;n.input.shiftKey=t.shiftKey;let s=Np(n),l=Date.now(),a="singleClick";l-n.input.lastClick.time<500&&UE(t,n.input.lastClick)&&!t[l1]&&n.input.lastClick.button==t.button&&(n.input.lastClick.type=="singleClick"?a="doubleClick":n.input.lastClick.type=="doubleClick"&&(a="tripleClick")),n.input.lastClick={time:l,x:t.clientX,y:t.clientY,type:a,button:t.button};let c=n.posAtCoords(yu(t));c&&(a=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new GE(n,c,t,!!s)):(a=="doubleClick"?qE:FE)(n,c.pos,c.inside,t)?t.preventDefault():Xr(n,"pointer"))};class GE{constructor(e,t,s,l){this.view=e,this.pos=t,this.event=s,this.flushed=l,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!s[l1],this.allowDefault=s.shiftKey;let a,c;if(t.inside>-1)a=e.state.doc.nodeAt(t.inside),c=t.inside;else{let g=e.state.doc.resolve(t.pos);a=g.parent,c=g.depth?g.before():0}const d=l?null:s.target,f=d?e.docView.nearestDesc(d,!0):null;this.target=f&&f.dom.nodeType==1?f.dom:null;let{selection:p}=e.state;(s.button==0&&a.type.spec.draggable&&a.type.spec.selectable!==!1||p instanceof he&&p.from<=c&&p.to>c)&&(this.mightDrag={node:a,pos:c,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&En&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Xr(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>ur(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(yu(e))),this.updateAllowDefault(e),this.allowDefault||!t?Xr(this.view,"pointer"):VE(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Lt&&this.mightDrag&&!this.mightDrag.node.isAtom||Mt&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(Ii(this.view,Se.near(this.view.state.doc.resolve(t.pos))),e.preventDefault()):Xr(this.view,"pointer")}move(e){this.updateAllowDefault(e),Xr(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}zt.touchstart=n=>{n.input.lastTouch=Date.now(),Np(n),Xr(n,"pointer")};zt.touchmove=n=>{n.input.lastTouch=Date.now(),Xr(n,"pointer")};zt.contextmenu=n=>Np(n);function a1(n,e){return n.composing?!0:Lt&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const YE=ar?5e3:-1;Bt.compositionstart=Bt.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,t=e.selection.$to;if(e.selection instanceof be&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(s=>s.type.spec.inclusive===!1)))n.markCursor=n.state.storedMarks||t.marks(),Ac(n,!0),n.markCursor=null;else if(Ac(n,!e.selection.empty),En&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let s=n.domSelectionRange();for(let l=s.focusNode,a=s.focusOffset;l&&l.nodeType==1&&a!=0;){let c=a<0?l.lastChild:l.childNodes[a-1];if(!c)break;if(c.nodeType==3){let d=n.domSelection();d&&d.collapse(c,c.nodeValue.length);break}else l=c,a=-1}}n.input.composing=!0}o1(n,YE)};Bt.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,n.input.compositionPendingChanges=n.domObserver.pendingRecords().length?n.input.compositionID:0,n.input.compositionNode=null,n.input.compositionPendingChanges&&Promise.resolve().then(()=>n.domObserver.flush()),n.input.compositionID++,o1(n,20))};function o1(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>Ac(n),e))}function c1(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=XE());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function KE(n){let e=n.domSelectionRange();if(!e.focusNode)return null;let t=PC(e.focusNode,e.focusOffset),s=IC(e.focusNode,e.focusOffset);if(t&&s&&t!=s){let l=s.pmViewDesc,a=n.domObserver.lastChangedTextNode;if(t==a||s==a)return a;if(!l||!l.isText(s.nodeValue))return s;if(n.input.compositionNode==s){let c=t.pmViewDesc;if(!(!c||!c.isText(t.nodeValue)))return s}}return t||s}function XE(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function Ac(n,e=!1){if(!(ar&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),c1(n),e||n.docView&&n.docView.dirty){let t=yp(n),s=n.state.selection;return t&&!t.eq(s)?n.dispatch(n.state.tr.setSelection(t)):(n.markCursor||e)&&!s.$from.node(s.$from.sharedDepth(s.to)).inlineContent?n.dispatch(n.state.tr.deleteSelection()):n.updateState(n.state),!0}return!1}}function JE(n,e){if(!n.dom.parentNode)return;let t=n.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let s=getSelection(),l=document.createRange();l.selectNodeContents(e),n.dom.blur(),s.removeAllRanges(),s.addRange(l),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),n.focus()},50)}const Ca=Gt&&Zr<15||$i&&GC<604;zt.copy=Bt.cut=(n,e)=>{let t=e,s=n.state.selection,l=t.type=="cut";if(s.empty)return;let a=Ca?null:t.clipboardData,c=s.content(),{dom:d,text:f}=bp(n,c);a?(t.preventDefault(),a.clearData(),a.setData("text/html",d.innerHTML),a.setData("text/plain",f)):JE(n,d),l&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function QE(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function ZE(n,e){if(!n.dom.parentNode)return;let t=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,s=n.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(s.contentEditable="true"),s.style.cssText="position: fixed; left: -10000px; top: 10px",s.focus();let l=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),s.parentNode&&s.parentNode.removeChild(s),t?Ea(n,s.value,null,l,e):Ea(n,s.textContent,s.innerHTML,l,e)},50)}function Ea(n,e,t,s,l){let a=e1(n,e,t,s,n.state.selection.$from);if(n.someProp("handlePaste",f=>f(n,l,a||se.empty)))return!0;if(!a)return!1;let c=QE(a),d=c?n.state.tr.replaceSelectionWith(c,s):n.state.tr.replaceSelection(a);return n.dispatch(d.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function u1(n){let e=n.getData("text/plain")||n.getData("Text");if(e)return e;let t=n.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}Bt.paste=(n,e)=>{let t=e;if(n.composing&&!ar)return;let s=Ca?null:t.clipboardData,l=n.input.shiftKey&&n.input.lastKeyCode!=45;s&&Ea(n,u1(s),s.getData("text/html"),l,t)?t.preventDefault():ZE(n,t)};class d1{constructor(e,t,s){this.slice=e,this.move=t,this.node=s}}const WE=yn?"altKey":"ctrlKey";function f1(n,e){let t=n.someProp("dragCopies",s=>!s(e));return t??!e[WE]}zt.dragstart=(n,e)=>{let t=e,s=n.input.mouseDown;if(s&&s.done(),!t.dataTransfer)return;let l=n.state.selection,a=l.empty?null:n.posAtCoords(yu(t)),c;if(!(a&&a.pos>=l.from&&a.pos<=(l instanceof he?l.to-1:l.to))){if(s&&s.mightDrag)c=he.create(n.state.doc,s.mightDrag.pos);else if(t.target&&t.target.nodeType==1){let x=n.docView.nearestDesc(t.target,!0);x&&x.node.type.spec.draggable&&x!=n.docView&&(c=he.create(n.state.doc,x.posBefore))}}let d=(c||n.state.selection).content(),{dom:f,text:p,slice:g}=bp(n,d);(!t.dataTransfer.files.length||!Mt||Hv>120)&&t.dataTransfer.clearData(),t.dataTransfer.setData(Ca?"Text":"text/html",f.innerHTML),t.dataTransfer.effectAllowed="copyMove",Ca||t.dataTransfer.setData("text/plain",p),n.dragging=new d1(g,f1(n,t),c)};zt.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null)},50)};Bt.dragover=Bt.dragenter=(n,e)=>e.preventDefault();Bt.drop=(n,e)=>{let t=e,s=n.dragging;if(n.dragging=null,!t.dataTransfer)return;let l=n.posAtCoords(yu(t));if(!l)return;let a=n.state.doc.resolve(l.pos),c=s&&s.slice;c?n.someProp("transformPasted",S=>{c=S(c,n)}):c=e1(n,u1(t.dataTransfer),Ca?null:t.dataTransfer.getData("text/html"),!1,a);let d=!!(s&&f1(n,t));if(n.someProp("handleDrop",S=>S(n,t,c||se.empty,d))){t.preventDefault();return}if(!c)return;t.preventDefault();let f=c?Tv(n.state.doc,a.pos,c):a.pos;f==null&&(f=a.pos);let p=n.state.tr;if(d){let{node:S}=s;S?S.replace(p):p.deleteSelection()}let g=p.mapping.map(f),x=c.openStart==0&&c.openEnd==0&&c.content.childCount==1,b=p.doc;if(x?p.replaceRangeWith(g,g,c.content.firstChild):p.replaceRange(g,g,c),p.doc.eq(b))return;let v=p.doc.resolve(g);if(x&&he.isSelectable(c.content.firstChild)&&v.nodeAfter&&v.nodeAfter.sameMarkup(c.content.firstChild))p.setSelection(new he(v));else{let S=p.mapping.map(f);p.mapping.maps[p.mapping.maps.length-1].forEach((w,k,j,D)=>S=D),p.setSelection(xp(n,v,p.doc.resolve(S)))}n.focus(),n.dispatch(p.setMeta("uiEvent","drop"))};zt.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&ur(n)},20))};zt.blur=(n,e)=>{let t=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),t.relatedTarget&&n.dom.contains(t.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};zt.beforeinput=(n,e)=>{if(Mt&&ar&&e.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:s}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=s||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",a=>a(n,js(8,"Backspace")))))return;let{$cursor:l}=n.state.selection;l&&l.pos>0&&n.dispatch(n.state.tr.delete(l.pos-1,l.pos).scrollIntoView())},50)}};for(let n in Bt)zt[n]=Bt[n];function ja(n,e){if(n==e)return!0;for(let t in n)if(n[t]!==e[t])return!1;for(let t in e)if(!(t in n))return!1;return!0}class Tc{constructor(e,t){this.toDOM=e,this.spec=t||Bs,this.side=this.spec.side||0}map(e,t,s,l){let{pos:a,deleted:c}=e.mapResult(t.from+l,this.side<0?-1:1);return c?null:new bn(a-s,a-s,this)}valid(){return!0}eq(e){return this==e||e instanceof Tc&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&ja(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class es{constructor(e,t){this.attrs=e,this.spec=t||Bs}map(e,t,s,l){let a=e.map(t.from+l,this.spec.inclusiveStart?-1:1)-s,c=e.map(t.to+l,this.spec.inclusiveEnd?1:-1)-s;return a>=c?null:new bn(a,c,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof es&&ja(this.attrs,e.attrs)&&ja(this.spec,e.spec)}static is(e){return e.type instanceof es}destroy(){}}class wp{constructor(e,t){this.attrs=e,this.spec=t||Bs}map(e,t,s,l){let a=e.mapResult(t.from+l,1);if(a.deleted)return null;let c=e.mapResult(t.to+l,-1);return c.deleted||c.pos<=a.pos?null:new bn(a.pos-s,c.pos-s,this)}valid(e,t){let{index:s,offset:l}=e.content.findIndex(t.from),a;return l==t.from&&!(a=e.child(s)).isText&&l+a.nodeSize==t.to}eq(e){return this==e||e instanceof wp&&ja(this.attrs,e.attrs)&&ja(this.spec,e.spec)}destroy(){}}class bn{constructor(e,t,s){this.from=e,this.to=t,this.type=s}copy(e,t){return new bn(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,s){return this.type.map(e,this,t,s)}static widget(e,t,s){return new bn(e,e,new Tc(t,s))}static inline(e,t,s,l){return new bn(e,t,new es(s,l))}static node(e,t,s,l){return new bn(e,t,new wp(s,l))}get spec(){return this.type.spec}get inline(){return this.type instanceof es}get widget(){return this.type instanceof Tc}}const Bi=[],Bs={};class at{constructor(e,t){this.local=e.length?e:Bi,this.children=t.length?t:Bi}static create(e,t){return t.length?Mc(t,e,0,Bs):At}find(e,t,s){let l=[];return this.findInner(e??0,t??1e9,l,0,s),l}findInner(e,t,s,l,a){for(let c=0;c<this.local.length;c++){let d=this.local[c];d.from<=t&&d.to>=e&&(!a||a(d.spec))&&s.push(d.copy(d.from+l,d.to+l))}for(let c=0;c<this.children.length;c+=3)if(this.children[c]<t&&this.children[c+1]>e){let d=this.children[c]+1;this.children[c+2].findInner(e-d,t-d,s,l+d,a)}}map(e,t,s){return this==At||e.maps.length==0?this:this.mapInner(e,t,0,0,s||Bs)}mapInner(e,t,s,l,a){let c;for(let d=0;d<this.local.length;d++){let f=this.local[d].map(e,s,l);f&&f.type.valid(t,f)?(c||(c=[])).push(f):a.onRemove&&a.onRemove(this.local[d].spec)}return this.children.length?ej(this.children,c||[],e,t,s,l,a):c?new at(c.sort(_s),Bi):At}add(e,t){return t.length?this==At?at.create(e,t):this.addInner(e,t,0):this}addInner(e,t,s){let l,a=0;e.forEach((d,f)=>{let p=f+s,g;if(g=p1(t,d,p)){for(l||(l=this.children.slice());a<l.length&&l[a]<f;)a+=3;l[a]==f?l[a+2]=l[a+2].addInner(d,g,p+1):l.splice(a,0,f,f+d.nodeSize,Mc(g,d,p+1,Bs)),a+=3}});let c=h1(a?m1(t):t,-s);for(let d=0;d<c.length;d++)c[d].type.valid(e,c[d])||c.splice(d--,1);return new at(c.length?this.local.concat(c).sort(_s):this.local,l||this.children)}remove(e){return e.length==0||this==At?this:this.removeInner(e,0)}removeInner(e,t){let s=this.children,l=this.local;for(let a=0;a<s.length;a+=3){let c,d=s[a]+t,f=s[a+1]+t;for(let g=0,x;g<e.length;g++)(x=e[g])&&x.from>d&&x.to<f&&(e[g]=null,(c||(c=[])).push(x));if(!c)continue;s==this.children&&(s=this.children.slice());let p=s[a+2].removeInner(c,d+1);p!=At?s[a+2]=p:(s.splice(a,3),a-=3)}if(l.length){for(let a=0,c;a<e.length;a++)if(c=e[a])for(let d=0;d<l.length;d++)l[d].eq(c,t)&&(l==this.local&&(l=this.local.slice()),l.splice(d--,1))}return s==this.children&&l==this.local?this:l.length||s.length?new at(l,s):At}forChild(e,t){if(this==At)return this;if(t.isLeaf)return at.empty;let s,l;for(let d=0;d<this.children.length;d+=3)if(this.children[d]>=e){this.children[d]==e&&(s=this.children[d+2]);break}let a=e+1,c=a+t.content.size;for(let d=0;d<this.local.length;d++){let f=this.local[d];if(f.from<c&&f.to>a&&f.type instanceof es){let p=Math.max(a,f.from)-a,g=Math.min(c,f.to)-a;p<g&&(l||(l=[])).push(f.copy(p,g))}}if(l){let d=new at(l.sort(_s),Bi);return s?new $r([d,s]):d}return s||At}eq(e){if(this==e)return!0;if(!(e instanceof at)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return kp(this.localsInner(e))}localsInner(e){if(this==At)return Bi;if(e.inlineContent||!this.local.some(es.is))return this.local;let t=[];for(let s=0;s<this.local.length;s++)this.local[s].type instanceof es||t.push(this.local[s]);return t}forEachSet(e){e(this)}}at.empty=new at([],[]);at.removeOverlap=kp;const At=at.empty;class $r{constructor(e){this.members=e}map(e,t){const s=this.members.map(l=>l.map(e,t,Bs));return $r.from(s)}forChild(e,t){if(t.isLeaf)return at.empty;let s=[];for(let l=0;l<this.members.length;l++){let a=this.members[l].forChild(e,t);a!=At&&(a instanceof $r?s=s.concat(a.members):s.push(a))}return $r.from(s)}eq(e){if(!(e instanceof $r)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,s=!0;for(let l=0;l<this.members.length;l++){let a=this.members[l].localsInner(e);if(a.length)if(!t)t=a;else{s&&(t=t.slice(),s=!1);for(let c=0;c<a.length;c++)t.push(a[c])}}return t?kp(s?t:t.sort(_s)):Bi}static from(e){switch(e.length){case 0:return At;case 1:return e[0];default:return new $r(e.every(t=>t instanceof at)?e:e.reduce((t,s)=>t.concat(s instanceof at?s:s.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function ej(n,e,t,s,l,a,c){let d=n.slice();for(let p=0,g=a;p<t.maps.length;p++){let x=0;t.maps[p].forEach((b,v,S,w)=>{let k=w-S-(v-b);for(let j=0;j<d.length;j+=3){let D=d[j+1];if(D<0||b>D+g-x)continue;let R=d[j]+g-x;v>=R?d[j+1]=b<=R?-2:-1:b>=g&&k&&(d[j]+=k,d[j+1]+=k)}x+=k}),g=t.maps[p].map(g,-1)}let f=!1;for(let p=0;p<d.length;p+=3)if(d[p+1]<0){if(d[p+1]==-2){f=!0,d[p+1]=-1;continue}let g=t.map(n[p]+a),x=g-l;if(x<0||x>=s.content.size){f=!0;continue}let b=t.map(n[p+1]+a,-1),v=b-l,{index:S,offset:w}=s.content.findIndex(x),k=s.maybeChild(S);if(k&&w==x&&w+k.nodeSize==v){let j=d[p+2].mapInner(t,k,g+1,n[p]+a+1,c);j!=At?(d[p]=x,d[p+1]=v,d[p+2]=j):(d[p+1]=-2,f=!0)}else f=!0}if(f){let p=tj(d,n,e,t,l,a,c),g=Mc(p,s,0,c);e=g.local;for(let x=0;x<d.length;x+=3)d[x+1]<0&&(d.splice(x,3),x-=3);for(let x=0,b=0;x<g.children.length;x+=3){let v=g.children[x];for(;b<d.length&&d[b]<v;)b+=3;d.splice(b,0,g.children[x],g.children[x+1],g.children[x+2])}}return new at(e.sort(_s),d)}function h1(n,e){if(!e||!n.length)return n;let t=[];for(let s=0;s<n.length;s++){let l=n[s];t.push(new bn(l.from+e,l.to+e,l.type))}return t}function tj(n,e,t,s,l,a,c){function d(f,p){for(let g=0;g<f.local.length;g++){let x=f.local[g].map(s,l,p);x?t.push(x):c.onRemove&&c.onRemove(f.local[g].spec)}for(let g=0;g<f.children.length;g+=3)d(f.children[g+2],f.children[g]+p+1)}for(let f=0;f<n.length;f+=3)n[f+1]==-1&&d(n[f+2],e[f]+a+1);return t}function p1(n,e,t){if(e.isLeaf)return null;let s=t+e.nodeSize,l=null;for(let a=0,c;a<n.length;a++)(c=n[a])&&c.from>t&&c.to<s&&((l||(l=[])).push(c),n[a]=null);return l}function m1(n){let e=[];for(let t=0;t<n.length;t++)n[t]!=null&&e.push(n[t]);return e}function Mc(n,e,t,s){let l=[],a=!1;e.forEach((d,f)=>{let p=p1(n,d,f+t);if(p){a=!0;let g=Mc(p,d,t+f+1,s);g!=At&&l.push(f,f+d.nodeSize,g)}});let c=h1(a?m1(n):n,-t).sort(_s);for(let d=0;d<c.length;d++)c[d].type.valid(e,c[d])||(s.onRemove&&s.onRemove(c[d].spec),c.splice(d--,1));return c.length||l.length?new at(c,l):At}function _s(n,e){return n.from-e.from||n.to-e.to}function kp(n){let e=n;for(let t=0;t<e.length-1;t++){let s=e[t];if(s.from!=s.to)for(let l=t+1;l<e.length;l++){let a=e[l];if(a.from==s.from){a.to!=s.to&&(e==n&&(e=n.slice()),e[l]=a.copy(a.from,s.to),Kx(e,l+1,a.copy(s.to,a.to)));continue}else{a.from<s.to&&(e==n&&(e=n.slice()),e[t]=s.copy(s.from,a.from),Kx(e,l,s.copy(a.from,s.to)));break}}}return e}function Kx(n,e,t){for(;e<n.length&&_s(t,n[e])>0;)e++;n.splice(e,0,t)}function rh(n){let e=[];return n.someProp("decorations",t=>{let s=t(n.state);s&&s!=At&&e.push(s)}),n.cursorWrapper&&e.push(at.create(n.state.doc,[n.cursorWrapper.deco])),$r.from(e)}const nj={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},rj=Gt&&Zr<=11;class sj{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class ij{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new sj,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(s=>{for(let l=0;l<s.length;l++)this.queue.push(s[l]);Gt&&Zr<=11&&s.some(l=>l.type=="childList"&&l.removedNodes.length||l.type=="characterData"&&l.oldValue.length>l.target.nodeValue.length)?this.flushSoon():this.flush()}),rj&&(this.onCharData=s=>{this.queue.push({target:s.target,type:"characterData",oldValue:s.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,nj)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(Px(this.view)){if(this.suppressingSelectionUpdates)return ur(this.view);if(Gt&&Zr<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Is(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,s;for(let a=e.focusNode;a;a=Fi(a))t.add(a);for(let a=e.anchorNode;a;a=Fi(a))if(t.has(a)){s=a;break}let l=s&&this.view.docView.nearestDesc(s);if(l&&l.ignoreMutation({type:"selection",target:s.nodeType==3?s.parentNode:s}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let s=e.domSelectionRange(),l=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(s)&&Px(e)&&!this.ignoreSelectionChange(s),a=-1,c=-1,d=!1,f=[];if(e.editable)for(let g=0;g<t.length;g++){let x=this.registerMutation(t[g],f);x&&(a=a<0?x.from:Math.min(x.from,a),c=c<0?x.to:Math.max(x.to,c),x.typeOver&&(d=!0))}if(En&&f.length){let g=f.filter(x=>x.nodeName=="BR");if(g.length==2){let[x,b]=g;x.parentNode&&x.parentNode.parentNode==b.parentNode?b.remove():x.remove()}else{let{focusNode:x}=this.currentSelection;for(let b of g){let v=b.parentNode;v&&v.nodeName=="LI"&&(!x||oj(e,x)!=v)&&b.remove()}}}let p=null;a<0&&l&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&mu(s)&&(p=yp(e))&&p.eq(Se.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,ur(e),this.currentSelection.set(s),e.scrollToSelection()):(a>-1||l)&&(a>-1&&(e.docView.markDirty(a,c),lj(e)),this.handleDOMChange(a,c,d,f),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(s)||ur(e),this.currentSelection.set(s))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let s=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(s==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!s||s.ignoreMutation(e))return null;if(e.type=="childList"){for(let g=0;g<e.addedNodes.length;g++){let x=e.addedNodes[g];t.push(x),x.nodeType==3&&(this.lastChangedTextNode=x)}if(s.contentDOM&&s.contentDOM!=s.dom&&!s.contentDOM.contains(e.target))return{from:s.posBefore,to:s.posAfter};let l=e.previousSibling,a=e.nextSibling;if(Gt&&Zr<=11&&e.addedNodes.length)for(let g=0;g<e.addedNodes.length;g++){let{previousSibling:x,nextSibling:b}=e.addedNodes[g];(!x||Array.prototype.indexOf.call(e.addedNodes,x)<0)&&(l=x),(!b||Array.prototype.indexOf.call(e.addedNodes,b)<0)&&(a=b)}let c=l&&l.parentNode==e.target?Nt(l)+1:0,d=s.localPosFromDOM(e.target,c,-1),f=a&&a.parentNode==e.target?Nt(a):e.target.childNodes.length,p=s.localPosFromDOM(e.target,f,1);return{from:d,to:p}}else return e.type=="attributes"?{from:s.posAtStart-s.border,to:s.posAtEnd+s.border}:(this.lastChangedTextNode=e.target,{from:s.posAtStart,to:s.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let Xx=new WeakMap,Jx=!1;function lj(n){if(!Xx.has(n)&&(Xx.set(n,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace)!==-1)){if(n.requiresGeckoHackNode=En,Jx)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Jx=!0}}function Qx(n,e){let t=e.startContainer,s=e.startOffset,l=e.endContainer,a=e.endOffset,c=n.domAtPos(n.state.selection.anchor);return Is(c.node,c.offset,l,a)&&([t,s,l,a]=[l,a,t,s]),{anchorNode:t,anchorOffset:s,focusNode:l,focusOffset:a}}function aj(n,e){if(e.getComposedRanges){let l=e.getComposedRanges(n.root)[0];if(l)return Qx(n,l)}let t;function s(l){l.preventDefault(),l.stopImmediatePropagation(),t=l.getTargetRanges()[0]}return n.dom.addEventListener("beforeinput",s,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",s,!0),t?Qx(n,t):null}function oj(n,e){for(let t=e.parentNode;t&&t!=n.dom;t=t.parentNode){let s=n.docView.nearestDesc(t,!0);if(s&&s.node.isBlock)return t}return null}function cj(n,e,t){let{node:s,fromOffset:l,toOffset:a,from:c,to:d}=n.docView.parseRange(e,t),f=n.domSelectionRange(),p,g=f.anchorNode;if(g&&n.dom.contains(g.nodeType==1?g:g.parentNode)&&(p=[{node:g,offset:f.anchorOffset}],mu(f)||p.push({node:f.focusNode,offset:f.focusOffset})),Mt&&n.input.lastKeyCode===8)for(let k=a;k>l;k--){let j=s.childNodes[k-1],D=j.pmViewDesc;if(j.nodeName=="BR"&&!D){a=k;break}if(!D||D.size)break}let x=n.state.doc,b=n.someProp("domParser")||Qr.fromSchema(n.state.schema),v=x.resolve(c),S=null,w=b.parse(s,{topNode:v.parent,topMatch:v.parent.contentMatchAt(v.index()),topOpen:!0,from:l,to:a,preserveWhitespace:v.parent.type.whitespace=="pre"?"full":!0,findPositions:p,ruleFromNode:uj,context:v});if(p&&p[0].pos!=null){let k=p[0].pos,j=p[1]&&p[1].pos;j==null&&(j=k),S={anchor:k+c,head:j+c}}return{doc:w,sel:S,from:c,to:d}}function uj(n){let e=n.pmViewDesc;if(e)return e.parseRule();if(n.nodeName=="BR"&&n.parentNode){if(Lt&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(n.parentNode.lastChild==n||Lt&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}const dj=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function fj(n,e,t,s,l){let a=n.input.compositionPendingChanges||(n.composing?n.input.compositionID:0);if(n.input.compositionPendingChanges=0,e<0){let q=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,ne=yp(n,q);if(ne&&!n.state.selection.eq(ne)){if(Mt&&ar&&n.input.lastKeyCode===13&&Date.now()-100<n.input.lastKeyCodeTime&&n.someProp("handleKeyDown",ue=>ue(n,js(13,"Enter"))))return;let fe=n.state.tr.setSelection(ne);q=="pointer"?fe.setMeta("pointer",!0):q=="key"&&fe.scrollIntoView(),a&&fe.setMeta("composition",a),n.dispatch(fe)}return}let c=n.state.doc.resolve(e),d=c.sharedDepth(t);e=c.before(d+1),t=n.state.doc.resolve(t).after(d+1);let f=n.state.selection,p=cj(n,e,t),g=n.state.doc,x=g.slice(p.from,p.to),b,v;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(b=n.state.selection.to,v="end"):(b=n.state.selection.from,v="start"),n.input.lastKeyCode=null;let S=mj(x.content,p.doc.content,p.from,b,v);if(S&&n.input.domChangeCount++,($i&&n.input.lastIOSEnter>Date.now()-225||ar)&&l.some(q=>q.nodeType==1&&!dj.test(q.nodeName))&&(!S||S.endA>=S.endB)&&n.someProp("handleKeyDown",q=>q(n,js(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!S)if(s&&f instanceof be&&!f.empty&&f.$head.sameParent(f.$anchor)&&!n.composing&&!(p.sel&&p.sel.anchor!=p.sel.head))S={start:f.from,endA:f.to,endB:f.to};else{if(p.sel){let q=Zx(n,n.state.doc,p.sel);if(q&&!q.eq(n.state.selection)){let ne=n.state.tr.setSelection(q);a&&ne.setMeta("composition",a),n.dispatch(ne)}}return}n.state.selection.from<n.state.selection.to&&S.start==S.endB&&n.state.selection instanceof be&&(S.start>n.state.selection.from&&S.start<=n.state.selection.from+2&&n.state.selection.from>=p.from?S.start=n.state.selection.from:S.endA<n.state.selection.to&&S.endA>=n.state.selection.to-2&&n.state.selection.to<=p.to&&(S.endB+=n.state.selection.to-S.endA,S.endA=n.state.selection.to)),Gt&&Zr<=11&&S.endB==S.start+1&&S.endA==S.start&&S.start>p.from&&p.doc.textBetween(S.start-p.from-1,S.start-p.from+1)==" "&&(S.start--,S.endA--,S.endB--);let w=p.doc.resolveNoCache(S.start-p.from),k=p.doc.resolveNoCache(S.endB-p.from),j=g.resolve(S.start),D=w.sameParent(k)&&w.parent.inlineContent&&j.end()>=S.endA,R;if(($i&&n.input.lastIOSEnter>Date.now()-225&&(!D||l.some(q=>q.nodeName=="DIV"||q.nodeName=="P"))||!D&&w.pos<p.doc.content.size&&(!w.sameParent(k)||!w.parent.inlineContent)&&!/\S/.test(p.doc.textBetween(w.pos,k.pos,"",""))&&(R=Se.findFrom(p.doc.resolve(w.pos+1),1,!0))&&R.head>w.pos)&&n.someProp("handleKeyDown",q=>q(n,js(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>S.start&&pj(g,S.start,S.endA,w,k)&&n.someProp("handleKeyDown",q=>q(n,js(8,"Backspace")))){ar&&Mt&&n.domObserver.suppressSelectionUpdates();return}Mt&&S.endB==S.start&&(n.input.lastChromeDelete=Date.now()),ar&&!D&&w.start()!=k.start()&&k.parentOffset==0&&w.depth==k.depth&&p.sel&&p.sel.anchor==p.sel.head&&p.sel.head==S.endA&&(S.endB-=2,k=p.doc.resolveNoCache(S.endB-p.from),setTimeout(()=>{n.someProp("handleKeyDown",function(q){return q(n,js(13,"Enter"))})},20));let O=S.start,z=S.endA,H=q=>{let ne=q||n.state.tr.replace(O,z,p.doc.slice(S.start-p.from,S.endB-p.from));if(p.sel){let fe=Zx(n,ne.doc,p.sel);fe&&!(Mt&&n.composing&&fe.empty&&(S.start!=S.endB||n.input.lastChromeDelete<Date.now()-100)&&(fe.head==O||fe.head==ne.mapping.map(z)-1)||Gt&&fe.empty&&fe.head==O)&&ne.setSelection(fe)}return a&&ne.setMeta("composition",a),ne.scrollIntoView()},G;if(D){if(w.pos==k.pos){Gt&&Zr<=11&&w.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>ur(n),20));let q=H(n.state.tr.delete(O,z)),ne=g.resolve(S.start).marksAcross(g.resolve(S.endA));ne&&q.ensureMarks(ne),n.dispatch(q)}else if(S.endA==S.endB&&(G=hj(w.parent.content.cut(w.parentOffset,k.parentOffset),j.parent.content.cut(j.parentOffset,S.endA-j.start())))){let q=H(n.state.tr);G.type=="add"?q.addMark(O,z,G.mark):q.removeMark(O,z,G.mark),n.dispatch(q)}else if(w.parent.child(w.index()).isText&&w.index()==k.index()-(k.textOffset?0:1)){let q=w.parent.textBetween(w.parentOffset,k.parentOffset),ne=()=>H(n.state.tr.insertText(q,O,z));n.someProp("handleTextInput",fe=>fe(n,O,z,q,ne))||n.dispatch(ne())}}else n.dispatch(H())}function Zx(n,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:xp(n,e.resolve(t.anchor),e.resolve(t.head))}function hj(n,e){let t=n.firstChild.marks,s=e.firstChild.marks,l=t,a=s,c,d,f;for(let g=0;g<s.length;g++)l=s[g].removeFromSet(l);for(let g=0;g<t.length;g++)a=t[g].removeFromSet(a);if(l.length==1&&a.length==0)d=l[0],c="add",f=g=>g.mark(d.addToSet(g.marks));else if(l.length==0&&a.length==1)d=a[0],c="remove",f=g=>g.mark(d.removeFromSet(g.marks));else return null;let p=[];for(let g=0;g<e.childCount;g++)p.push(f(e.child(g)));if(X.from(p).eq(n))return{mark:d,type:c}}function pj(n,e,t,s,l){if(t-e<=l.pos-s.pos||sh(s,!0,!1)<l.pos)return!1;let a=n.resolve(e);if(!s.parent.isTextblock){let d=a.nodeAfter;return d!=null&&t==e+d.nodeSize}if(a.parentOffset<a.parent.content.size||!a.parent.isTextblock)return!1;let c=n.resolve(sh(a,!0,!0));return!c.parent.isTextblock||c.pos>t||sh(c,!0,!1)<t?!1:s.parent.content.cut(s.parentOffset).eq(c.parent.content)}function sh(n,e,t){let s=n.depth,l=e?n.end():n.pos;for(;s>0&&(e||n.indexAfter(s)==n.node(s).childCount);)s--,l++,e=!1;if(t){let a=n.node(s).maybeChild(n.indexAfter(s));for(;a&&!a.isLeaf;)a=a.firstChild,l++}return l}function mj(n,e,t,s,l){let a=n.findDiffStart(e,t);if(a==null)return null;let{a:c,b:d}=n.findDiffEnd(e,t+n.size,t+e.size);if(l=="end"){let f=Math.max(0,a-Math.min(c,d));s-=c+f-a}if(c<a&&n.size<e.size){let f=s<=a&&s>=c?a-s:0;a-=f,a&&a<e.size&&Wx(e.textBetween(a-1,a+1))&&(a+=f?1:-1),d=a+(d-c),c=a}else if(d<a){let f=s<=a&&s>=d?a-s:0;a-=f,a&&a<n.size&&Wx(n.textBetween(a-1,a+1))&&(a+=f?1:-1),c=a+(c-d),d=a}return{start:a,endA:c,endB:d}}function Wx(n){if(n.length!=2)return!1;let e=n.charCodeAt(0),t=n.charCodeAt(1);return e>=56320&&e<=57343&&t>=55296&&t<=56319}class g1{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new LE,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(sb),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=nb(this),tb(this),this.nodeViews=rb(this),this.docView=Lx(this.state.doc,eb(this),rh(this),this.dom,this),this.domObserver=new ij(this,(s,l,a,c)=>fj(this,s,l,a,c)),this.domObserver.start(),zE(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Uh(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(sb),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let s in this._props)t[s]=this._props[s];t.state=this.state;for(let s in e)t[s]=e[s];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var s;let l=this.state,a=!1,c=!1;e.storedMarks&&this.composing&&(c1(this),c=!0),this.state=e;let d=l.plugins!=e.plugins||this._props.plugins!=t.plugins;if(d||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let v=rb(this);yj(v,this.nodeViews)&&(this.nodeViews=v,a=!0)}(d||t.handleDOMEvents!=this._props.handleDOMEvents)&&Uh(this),this.editable=nb(this),tb(this);let f=rh(this),p=eb(this),g=l.plugins!=e.plugins&&!l.doc.eq(e.doc)?"reset":e.scrollToSelection>l.scrollToSelection?"to selection":"preserve",x=a||!this.docView.matchesNode(e.doc,p,f);(x||!e.selection.eq(l.selection))&&(c=!0);let b=g=="preserve"&&c&&this.dom.style.overflowAnchor==null&&XC(this);if(c){this.domObserver.stop();let v=x&&(Gt||Mt)&&!this.composing&&!l.selection.empty&&!e.selection.empty&&gj(l.selection,e.selection);if(x){let S=Mt?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=KE(this)),(a||!this.docView.update(e.doc,p,f,this))&&(this.docView.updateOuterDeco(p),this.docView.destroy(),this.docView=Lx(e.doc,p,f,this.dom,this)),S&&!this.trackWrites&&(v=!0)}v||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&bE(this))?ur(this,v):(Qv(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(l),!((s=this.dragging)===null||s===void 0)&&s.node&&!l.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,l),g=="reset"?this.dom.scrollTop=0:g=="to selection"?this.scrollToSelection():b&&JC(b)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof he){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&Ax(this,t.getBoundingClientRect(),e)}else Ax(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let s=this.directPlugins[t];s.spec.view&&this.pluginViews.push(s.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let s=this.state.plugins[t];s.spec.view&&this.pluginViews.push(s.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let s=this.pluginViews[t];s.update&&s.update(this,e)}}updateDraggedNode(e,t){let s=e.node,l=-1;if(this.state.doc.nodeAt(s.from)==s.node)l=s.from;else{let a=s.from+(this.state.doc.content.size-t.doc.content.size);(a>0&&this.state.doc.nodeAt(a))==s.node&&(l=a)}this.dragging=new d1(e.slice,e.move,l<0?void 0:he.create(this.state.doc,l))}someProp(e,t){let s=this._props&&this._props[e],l;if(s!=null&&(l=t?t(s):s))return l;for(let c=0;c<this.directPlugins.length;c++){let d=this.directPlugins[c].props[e];if(d!=null&&(l=t?t(d):d))return l}let a=this.state.plugins;if(a)for(let c=0;c<a.length;c++){let d=a[c].props[e];if(d!=null&&(l=t?t(d):d))return l}}hasFocus(){if(Gt){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&QC(this.dom),ur(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}updateRoot(){this._root=null}posAtCoords(e){return nE(this,e)}coordsAtPos(e,t=1){return qv(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,s=-1){let l=this.docView.posFromDOM(e,t,s);if(l==null)throw new RangeError("DOM position not inside the editor");return l}endOfTextblock(e,t){return aE(this,t||this.state,e)}pasteHTML(e,t){return Ea(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return Ea(this,e,null,!0,t||new ClipboardEvent("paste"))}serializeForClipboard(e){return bp(this,e)}destroy(){this.docView&&(BE(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],rh(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,HC())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return HE(this,e)}domSelectionRange(){let e=this.domSelection();return e?Lt&&this.root.nodeType===11&&qC(this.dom.ownerDocument)==this.dom&&aj(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}g1.prototype.dispatch=function(n){let e=this._props.dispatchTransaction;e?e.call(this,n):this.updateState(this.state.apply(n))};function eb(n){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(n.editable),n.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(n.state)),t)for(let s in t)s=="class"?e.class+=" "+t[s]:s=="style"?e.style=(e.style?e.style+";":"")+t[s]:!e[s]&&s!="contenteditable"&&s!="nodeName"&&(e[s]=String(t[s]))}),e.translate||(e.translate="no"),[bn.node(0,n.state.doc.content.size,e)]}function tb(n){if(n.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),n.cursorWrapper={dom:e,deco:bn.widget(n.state.selection.from,e,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function nb(n){return!n.someProp("editable",e=>e(n.state)===!1)}function gj(n,e){let t=Math.min(n.$anchor.sharedDepth(n.head),e.$anchor.sharedDepth(e.head));return n.$anchor.start(t)!=e.$anchor.start(t)}function rb(n){let e=Object.create(null);function t(s){for(let l in s)Object.prototype.hasOwnProperty.call(e,l)||(e[l]=s[l])}return n.someProp("nodeViews",t),n.someProp("markViews",t),e}function yj(n,e){let t=0,s=0;for(let l in n){if(n[l]!=e[l])return!0;t++}for(let l in e)s++;return t!=s}function sb(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var ns={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Oc={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},xj=typeof navigator<"u"&&/Mac/.test(navigator.platform),bj=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var wt=0;wt<10;wt++)ns[48+wt]=ns[96+wt]=String(wt);for(var wt=1;wt<=24;wt++)ns[wt+111]="F"+wt;for(var wt=65;wt<=90;wt++)ns[wt]=String.fromCharCode(wt+32),Oc[wt]=String.fromCharCode(wt);for(var ih in ns)Oc.hasOwnProperty(ih)||(Oc[ih]=ns[ih]);function vj(n){var e=xj&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||bj&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?Oc:ns)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}const Sj=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),Nj=typeof navigator<"u"&&/Win/.test(navigator.platform);function wj(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let s,l,a,c;for(let d=0;d<e.length-1;d++){let f=e[d];if(/^(cmd|meta|m)$/i.test(f))c=!0;else if(/^a(lt)?$/i.test(f))s=!0;else if(/^(c|ctrl|control)$/i.test(f))l=!0;else if(/^s(hift)?$/i.test(f))a=!0;else if(/^mod$/i.test(f))Sj?c=!0:l=!0;else throw new Error("Unrecognized modifier name: "+f)}return s&&(t="Alt-"+t),l&&(t="Ctrl-"+t),c&&(t="Meta-"+t),a&&(t="Shift-"+t),t}function kj(n){let e=Object.create(null);for(let t in n)e[wj(t)]=n[t];return e}function lh(n,e,t=!0){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t&&e.shiftKey&&(n="Shift-"+n),n}function Cj(n){return new kt({props:{handleKeyDown:y1(n)}})}function y1(n){let e=kj(n);return function(t,s){let l=vj(s),a,c=e[lh(l,s)];if(c&&c(t.state,t.dispatch,t))return!0;if(l.length==1&&l!=" "){if(s.shiftKey){let d=e[lh(l,s,!1)];if(d&&d(t.state,t.dispatch,t))return!0}if((s.altKey||s.metaKey||s.ctrlKey)&&!(Nj&&s.ctrlKey&&s.altKey)&&(a=ns[s.keyCode])&&a!=l){let d=e[lh(a,s)];if(d&&d(t.state,t.dispatch,t))return!0}}return!1}}const Cp=(n,e)=>n.selection.empty?!1:(e&&e(n.tr.deleteSelection().scrollIntoView()),!0);function x1(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("backward",n):t.parentOffset>0)?null:t}const b1=(n,e,t)=>{let s=x1(n,t);if(!s)return!1;let l=Ep(s);if(!l){let c=s.blockRange(),d=c&&Wi(c);return d==null?!1:(e&&e(n.tr.lift(c,d).scrollIntoView()),!0)}let a=l.nodeBefore;if(A1(n,l,e,-1))return!0;if(s.parent.content.size==0&&(Gi(a,"end")||he.isSelectable(a)))for(let c=s.depth;;c--){let d=hu(n.doc,s.before(c),s.after(c),se.empty);if(d&&d.slice.size<d.to-d.from){if(e){let f=n.tr.step(d);f.setSelection(Gi(a,"end")?Se.findFrom(f.doc.resolve(f.mapping.map(l.pos,-1)),-1):he.create(f.doc,l.pos-a.nodeSize)),e(f.scrollIntoView())}return!0}if(c==1||s.node(c-1).childCount>1)break}return a.isAtom&&l.depth==s.depth-1?(e&&e(n.tr.delete(l.pos-a.nodeSize,l.pos).scrollIntoView()),!0):!1},Ej=(n,e,t)=>{let s=x1(n,t);if(!s)return!1;let l=Ep(s);return l?v1(n,l,e):!1},jj=(n,e,t)=>{let s=N1(n,t);if(!s)return!1;let l=jp(s);return l?v1(n,l,e):!1};function v1(n,e,t){let s=e.nodeBefore,l=s,a=e.pos-1;for(;!l.isTextblock;a--){if(l.type.spec.isolating)return!1;let g=l.lastChild;if(!g)return!1;l=g}let c=e.nodeAfter,d=c,f=e.pos+1;for(;!d.isTextblock;f++){if(d.type.spec.isolating)return!1;let g=d.firstChild;if(!g)return!1;d=g}let p=hu(n.doc,a,f,se.empty);if(!p||p.from!=a||p instanceof ht&&p.slice.size>=f-a)return!1;if(t){let g=n.tr.step(p);g.setSelection(be.create(g.doc,a)),t(g.scrollIntoView())}return!0}function Gi(n,e,t=!1){for(let s=n;s;s=e=="start"?s.firstChild:s.lastChild){if(s.isTextblock)return!0;if(t&&s.childCount!=1)return!1}return!1}const S1=(n,e,t)=>{let{$head:s,empty:l}=n.selection,a=s;if(!l)return!1;if(s.parent.isTextblock){if(t?!t.endOfTextblock("backward",n):s.parentOffset>0)return!1;a=Ep(s)}let c=a&&a.nodeBefore;return!c||!he.isSelectable(c)?!1:(e&&e(n.tr.setSelection(he.create(n.doc,a.pos-c.nodeSize)).scrollIntoView()),!0)};function Ep(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){if(n.index(e)>0)return n.doc.resolve(n.before(e+1));if(n.node(e).type.spec.isolating)break}return null}function N1(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("forward",n):t.parentOffset<t.parent.content.size)?null:t}const w1=(n,e,t)=>{let s=N1(n,t);if(!s)return!1;let l=jp(s);if(!l)return!1;let a=l.nodeAfter;if(A1(n,l,e,1))return!0;if(s.parent.content.size==0&&(Gi(a,"start")||he.isSelectable(a))){let c=hu(n.doc,s.before(),s.after(),se.empty);if(c&&c.slice.size<c.to-c.from){if(e){let d=n.tr.step(c);d.setSelection(Gi(a,"start")?Se.findFrom(d.doc.resolve(d.mapping.map(l.pos)),1):he.create(d.doc,d.mapping.map(l.pos))),e(d.scrollIntoView())}return!0}}return a.isAtom&&l.depth==s.depth-1?(e&&e(n.tr.delete(l.pos,l.pos+a.nodeSize).scrollIntoView()),!0):!1},k1=(n,e,t)=>{let{$head:s,empty:l}=n.selection,a=s;if(!l)return!1;if(s.parent.isTextblock){if(t?!t.endOfTextblock("forward",n):s.parentOffset<s.parent.content.size)return!1;a=jp(s)}let c=a&&a.nodeAfter;return!c||!he.isSelectable(c)?!1:(e&&e(n.tr.setSelection(he.create(n.doc,a.pos)).scrollIntoView()),!0)};function jp(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){let t=n.node(e);if(n.index(e)+1<t.childCount)return n.doc.resolve(n.after(e+1));if(t.type.spec.isolating)break}return null}const Aj=(n,e)=>{let t=n.selection,s=t instanceof he,l;if(s){if(t.node.isTextblock||!rs(n.doc,t.from))return!1;l=t.from}else if(l=fu(n.doc,t.from,-1),l==null)return!1;if(e){let a=n.tr.join(l);s&&a.setSelection(he.create(a.doc,l-n.doc.resolve(l).nodeBefore.nodeSize)),e(a.scrollIntoView())}return!0},Tj=(n,e)=>{let t=n.selection,s;if(t instanceof he){if(t.node.isTextblock||!rs(n.doc,t.to))return!1;s=t.to}else if(s=fu(n.doc,t.to,1),s==null)return!1;return e&&e(n.tr.join(s).scrollIntoView()),!0},Mj=(n,e)=>{let{$from:t,$to:s}=n.selection,l=t.blockRange(s),a=l&&Wi(l);return a==null?!1:(e&&e(n.tr.lift(l,a).scrollIntoView()),!0)},C1=(n,e)=>{let{$head:t,$anchor:s}=n.selection;return!t.parent.type.spec.code||!t.sameParent(s)?!1:(e&&e(n.tr.insertText(`
`).scrollIntoView()),!0)};function Ap(n){for(let e=0;e<n.edgeCount;e++){let{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const Oj=(n,e)=>{let{$head:t,$anchor:s}=n.selection;if(!t.parent.type.spec.code||!t.sameParent(s))return!1;let l=t.node(-1),a=t.indexAfter(-1),c=Ap(l.contentMatchAt(a));if(!c||!l.canReplaceWith(a,a,c))return!1;if(e){let d=t.after(),f=n.tr.replaceWith(d,d,c.createAndFill());f.setSelection(Se.near(f.doc.resolve(d),1)),e(f.scrollIntoView())}return!0},E1=(n,e)=>{let t=n.selection,{$from:s,$to:l}=t;if(t instanceof rn||s.parent.inlineContent||l.parent.inlineContent)return!1;let a=Ap(l.parent.contentMatchAt(l.indexAfter()));if(!a||!a.isTextblock)return!1;if(e){let c=(!s.parentOffset&&l.index()<l.parent.childCount?s:l).pos,d=n.tr.insert(c,a.createAndFill());d.setSelection(be.create(d.doc,c+1)),e(d.scrollIntoView())}return!0},j1=(n,e)=>{let{$cursor:t}=n.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let a=t.before();if(cr(n.doc,a))return e&&e(n.tr.split(a).scrollIntoView()),!0}let s=t.blockRange(),l=s&&Wi(s);return l==null?!1:(e&&e(n.tr.lift(s,l).scrollIntoView()),!0)};function Dj(n){return(e,t)=>{let{$from:s,$to:l}=e.selection;if(e.selection instanceof he&&e.selection.node.isBlock)return!s.parentOffset||!cr(e.doc,s.pos)?!1:(t&&t(e.tr.split(s.pos).scrollIntoView()),!0);if(!s.depth)return!1;let a=[],c,d,f=!1,p=!1;for(let v=s.depth;;v--)if(s.node(v).isBlock){f=s.end(v)==s.pos+(s.depth-v),p=s.start(v)==s.pos-(s.depth-v),d=Ap(s.node(v-1).contentMatchAt(s.indexAfter(v-1))),a.unshift(f&&d?{type:d}:null),c=v;break}else{if(v==1)return!1;a.unshift(null)}let g=e.tr;(e.selection instanceof be||e.selection instanceof rn)&&g.deleteSelection();let x=g.mapping.map(s.pos),b=cr(g.doc,x,a.length,a);if(b||(a[0]=d?{type:d}:null,b=cr(g.doc,x,a.length,a)),!b)return!1;if(g.split(x,a.length,a),!f&&p&&s.node(c).type!=d){let v=g.mapping.map(s.before(c)),S=g.doc.resolve(v);d&&s.node(c-1).canReplaceWith(S.index(),S.index()+1,d)&&g.setNodeMarkup(g.mapping.map(s.before(c)),d)}return t&&t(g.scrollIntoView()),!0}}const Rj=Dj(),Lj=(n,e)=>{let{$from:t,to:s}=n.selection,l,a=t.sharedDepth(s);return a==0?!1:(l=t.before(a),e&&e(n.tr.setSelection(he.create(n.doc,l))),!0)};function zj(n,e,t){let s=e.nodeBefore,l=e.nodeAfter,a=e.index();return!s||!l||!s.type.compatibleContent(l.type)?!1:!s.content.size&&e.parent.canReplace(a-1,a)?(t&&t(n.tr.delete(e.pos-s.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(a,a+1)||!(l.isTextblock||rs(n.doc,e.pos))?!1:(t&&t(n.tr.join(e.pos).scrollIntoView()),!0)}function A1(n,e,t,s){let l=e.nodeBefore,a=e.nodeAfter,c,d,f=l.type.spec.isolating||a.type.spec.isolating;if(!f&&zj(n,e,t))return!0;let p=!f&&e.parent.canReplace(e.index(),e.index()+1);if(p&&(c=(d=l.contentMatchAt(l.childCount)).findWrapping(a.type))&&d.matchType(c[0]||a.type).validEnd){if(t){let v=e.pos+a.nodeSize,S=X.empty;for(let j=c.length-1;j>=0;j--)S=X.from(c[j].create(null,S));S=X.from(l.copy(S));let w=n.tr.step(new pt(e.pos-1,v,e.pos,v,new se(S,1,0),c.length,!0)),k=w.doc.resolve(v+2*c.length);k.nodeAfter&&k.nodeAfter.type==l.type&&rs(w.doc,k.pos)&&w.join(k.pos),t(w.scrollIntoView())}return!0}let g=a.type.spec.isolating||s>0&&f?null:Se.findFrom(e,1),x=g&&g.$from.blockRange(g.$to),b=x&&Wi(x);if(b!=null&&b>=e.depth)return t&&t(n.tr.lift(x,b).scrollIntoView()),!0;if(p&&Gi(a,"start",!0)&&Gi(l,"end")){let v=l,S=[];for(;S.push(v),!v.isTextblock;)v=v.lastChild;let w=a,k=1;for(;!w.isTextblock;w=w.firstChild)k++;if(v.canReplace(v.childCount,v.childCount,w.content)){if(t){let j=X.empty;for(let R=S.length-1;R>=0;R--)j=X.from(S[R].copy(j));let D=n.tr.step(new pt(e.pos-S.length,e.pos+a.nodeSize,e.pos+k,e.pos+a.nodeSize-k,new se(j,S.length,0),0,!0));t(D.scrollIntoView())}return!0}}return!1}function T1(n){return function(e,t){let s=e.selection,l=n<0?s.$from:s.$to,a=l.depth;for(;l.node(a).isInline;){if(!a)return!1;a--}return l.node(a).isTextblock?(t&&t(e.tr.setSelection(be.create(e.doc,n<0?l.start(a):l.end(a)))),!0):!1}}const Bj=T1(-1),_j=T1(1);function Hj(n,e=null){return function(t,s){let{$from:l,$to:a}=t.selection,c=l.blockRange(a),d=c&&pp(c,n,e);return d?(s&&s(t.tr.wrap(c,d).scrollIntoView()),!0):!1}}function ib(n,e=null){return function(t,s){let l=!1;for(let a=0;a<t.selection.ranges.length&&!l;a++){let{$from:{pos:c},$to:{pos:d}}=t.selection.ranges[a];t.doc.nodesBetween(c,d,(f,p)=>{if(l)return!1;if(!(!f.isTextblock||f.hasMarkup(n,e)))if(f.type==n)l=!0;else{let g=t.doc.resolve(p),x=g.index();l=g.parent.canReplaceWith(x,x+1,n)}})}if(!l)return!1;if(s){let a=t.tr;for(let c=0;c<t.selection.ranges.length;c++){let{$from:{pos:d},$to:{pos:f}}=t.selection.ranges[c];a.setBlockType(d,f,n,e)}s(a.scrollIntoView())}return!0}}function Tp(...n){return function(e,t,s){for(let l=0;l<n.length;l++)if(n[l](e,t,s))return!0;return!1}}Tp(Cp,b1,S1);Tp(Cp,w1,k1);Tp(C1,E1,j1,Rj);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function Uj(n,e=null){return function(t,s){let{$from:l,$to:a}=t.selection,c=l.blockRange(a);if(!c)return!1;let d=s?t.tr:null;return Pj(d,c,n,e)?(s&&s(d.scrollIntoView()),!0):!1}}function Pj(n,e,t,s=null){let l=!1,a=e,c=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(t)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let f=c.resolve(e.start-2);a=new kc(f,f,e.depth),e.endIndex<e.parent.childCount&&(e=new kc(e.$from,c.resolve(e.$to.end(e.depth)),e.depth)),l=!0}let d=pp(a,t,s,e);return d?(n&&Ij(n,e,d,l,t),!0):!1}function Ij(n,e,t,s,l){let a=X.empty;for(let g=t.length-1;g>=0;g--)a=X.from(t[g].type.create(t[g].attrs,a));n.step(new pt(e.start-(s?2:0),e.end,e.start,e.end,new se(a,0,0),t.length,!0));let c=0;for(let g=0;g<t.length;g++)t[g].type==l&&(c=g+1);let d=t.length-c,f=e.start+t.length-(s?2:0),p=e.parent;for(let g=e.startIndex,x=e.endIndex,b=!0;g<x;g++,b=!1)!b&&cr(n.doc,f,d)&&(n.split(f,d),f+=2*d),f+=p.child(g).nodeSize;return n}function Vj(n){return function(e,t){let{$from:s,$to:l}=e.selection,a=s.blockRange(l,c=>c.childCount>0&&c.firstChild.type==n);return a?t?s.node(a.depth-1).type==n?qj(e,t,n,a):Fj(e,t,a):!0:!1}}function qj(n,e,t,s){let l=n.tr,a=s.end,c=s.$to.end(s.depth);a<c&&(l.step(new pt(a-1,c,a,c,new se(X.from(t.create(null,s.parent.copy())),1,0),1,!0)),s=new kc(l.doc.resolve(s.$from.pos),l.doc.resolve(c),s.depth));const d=Wi(s);if(d==null)return!1;l.lift(s,d);let f=l.doc.resolve(l.mapping.map(a,-1)-1);return rs(l.doc,f.pos)&&f.nodeBefore.type==f.nodeAfter.type&&l.join(f.pos),e(l.scrollIntoView()),!0}function Fj(n,e,t){let s=n.tr,l=t.parent;for(let v=t.end,S=t.endIndex-1,w=t.startIndex;S>w;S--)v-=l.child(S).nodeSize,s.delete(v-1,v+1);let a=s.doc.resolve(t.start),c=a.nodeAfter;if(s.mapping.map(t.end)!=t.start+a.nodeAfter.nodeSize)return!1;let d=t.startIndex==0,f=t.endIndex==l.childCount,p=a.node(-1),g=a.index(-1);if(!p.canReplace(g+(d?0:1),g+1,c.content.append(f?X.empty:X.from(l))))return!1;let x=a.pos,b=x+c.nodeSize;return s.step(new pt(x-(d?1:0),b+(f?1:0),x+1,b-1,new se((d?X.empty:X.from(l.copy(X.empty))).append(f?X.empty:X.from(l.copy(X.empty))),d?0:1,f?0:1),d?0:1)),e(s.scrollIntoView()),!0}function $j(n){return function(e,t){let{$from:s,$to:l}=e.selection,a=s.blockRange(l,p=>p.childCount>0&&p.firstChild.type==n);if(!a)return!1;let c=a.startIndex;if(c==0)return!1;let d=a.parent,f=d.child(c-1);if(f.type!=n)return!1;if(t){let p=f.lastChild&&f.lastChild.type==d.type,g=X.from(p?n.create():null),x=new se(X.from(n.create(null,X.from(d.type.create(null,g)))),p?3:1,0),b=a.start,v=a.end;t(e.tr.step(new pt(b-(p?3:1),v,b,v,x,1,!0)).scrollIntoView())}return!0}}function xu(n){const{state:e,transaction:t}=n;let{selection:s}=t,{doc:l}=t,{storedMarks:a}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return a},get selection(){return s},get doc(){return l},get tr(){return s=t.selection,l=t.doc,a=t.storedMarks,t}}}class bu{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:s}=this,{view:l}=t,{tr:a}=s,c=this.buildProps(a);return Object.fromEntries(Object.entries(e).map(([d,f])=>[d,(...g)=>{const x=f(...g)(c);return!a.getMeta("preventDispatch")&&!this.hasCustomState&&l.dispatch(a),x}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:s,editor:l,state:a}=this,{view:c}=l,d=[],f=!!e,p=e||a.tr,g=()=>(!f&&t&&!p.getMeta("preventDispatch")&&!this.hasCustomState&&c.dispatch(p),d.every(b=>b===!0)),x={...Object.fromEntries(Object.entries(s).map(([b,v])=>[b,(...w)=>{const k=this.buildProps(p,t),j=v(...w)(k);return d.push(j),x}])),run:g};return x}createCan(e){const{rawCommands:t,state:s}=this,l=!1,a=e||s.tr,c=this.buildProps(a,l);return{...Object.fromEntries(Object.entries(t).map(([f,p])=>[f,(...g)=>p(...g)({...c,dispatch:void 0})])),chain:()=>this.createChain(a,l)}}buildProps(e,t=!0){const{rawCommands:s,editor:l,state:a}=this,{view:c}=l,d={tr:e,editor:l,view:c,state:xu({state:a,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(s).map(([f,p])=>[f,(...g)=>p(...g)(d)]))}};return d}}class Gj{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const s=this.callbacks[e];return s&&s.forEach(l=>l.apply(this,t)),this}off(e,t){const s=this.callbacks[e];return s&&(t?this.callbacks[e]=s.filter(l=>l!==t):delete this.callbacks[e]),this}once(e,t){const s=(...l)=>{this.off(e,s),t.apply(this,l)};return this.on(e,s)}removeAllListeners(){this.callbacks={}}}function oe(n,e,t){return n.config[e]===void 0&&n.parent?oe(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?oe(n.parent,e,t):null}):n.config[e]}function vu(n){const e=n.filter(l=>l.type==="extension"),t=n.filter(l=>l.type==="node"),s=n.filter(l=>l.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:s}}function M1(n){const e=[],{nodeExtensions:t,markExtensions:s}=vu(n),l=[...t,...s],a={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return n.forEach(c=>{const d={name:c.name,options:c.options,storage:c.storage,extensions:l},f=oe(c,"addGlobalAttributes",d);if(!f)return;f().forEach(g=>{g.types.forEach(x=>{Object.entries(g.attributes).forEach(([b,v])=>{e.push({type:x,name:b,attribute:{...a,...v}})})})})}),l.forEach(c=>{const d={name:c.name,options:c.options,storage:c.storage},f=oe(c,"addAttributes",d);if(!f)return;const p=f();Object.entries(p).forEach(([g,x])=>{const b={...a,...x};typeof(b==null?void 0:b.default)=="function"&&(b.default=b.default()),b!=null&&b.isRequired&&(b==null?void 0:b.default)===void 0&&delete b.default,e.push({type:c.name,name:g,attribute:b})})}),e}function gt(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}function yt(...n){return n.filter(e=>!!e).reduce((e,t)=>{const s={...e};return Object.entries(t).forEach(([l,a])=>{if(!s[l]){s[l]=a;return}if(l==="class"){const d=a?String(a).split(" "):[],f=s[l]?s[l].split(" "):[],p=d.filter(g=>!f.includes(g));s[l]=[...f,...p].join(" ")}else if(l==="style"){const d=a?a.split(";").map(g=>g.trim()).filter(Boolean):[],f=s[l]?s[l].split(";").map(g=>g.trim()).filter(Boolean):[],p=new Map;f.forEach(g=>{const[x,b]=g.split(":").map(v=>v.trim());p.set(x,b)}),d.forEach(g=>{const[x,b]=g.split(":").map(v=>v.trim());p.set(x,b)}),s[l]=Array.from(p.entries()).map(([g,x])=>`${g}: ${x}`).join("; ")}else s[l]=a}),s},{})}function Ph(n,e){return e.filter(t=>t.type===n.type.name).filter(t=>t.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(n.attrs)||{}:{[t.name]:n.attrs[t.name]}).reduce((t,s)=>yt(t,s),{})}function O1(n){return typeof n=="function"}function Ce(n,e=void 0,...t){return O1(n)?e?n.bind(e)(...t):n(...t):n}function Yj(n={}){return Object.keys(n).length===0&&n.constructor===Object}function Kj(n){return typeof n!="string"?n:n.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(n):n==="true"?!0:n==="false"?!1:n}function lb(n,e){return"style"in n?n:{...n,getAttrs:t=>{const s=n.getAttrs?n.getAttrs(t):n.attrs;if(s===!1)return!1;const l=e.reduce((a,c)=>{const d=c.attribute.parseHTML?c.attribute.parseHTML(t):Kj(t.getAttribute(c.name));return d==null?a:{...a,[c.name]:d}},{});return{...s,...l}}}}function ab(n){return Object.fromEntries(Object.entries(n).filter(([e,t])=>e==="attrs"&&Yj(t)?!1:t!=null))}function Xj(n,e){var t;const s=M1(n),{nodeExtensions:l,markExtensions:a}=vu(n),c=(t=l.find(p=>oe(p,"topNode")))===null||t===void 0?void 0:t.name,d=Object.fromEntries(l.map(p=>{const g=s.filter(j=>j.type===p.name),x={name:p.name,options:p.options,storage:p.storage,editor:e},b=n.reduce((j,D)=>{const R=oe(D,"extendNodeSchema",x);return{...j,...R?R(p):{}}},{}),v=ab({...b,content:Ce(oe(p,"content",x)),marks:Ce(oe(p,"marks",x)),group:Ce(oe(p,"group",x)),inline:Ce(oe(p,"inline",x)),atom:Ce(oe(p,"atom",x)),selectable:Ce(oe(p,"selectable",x)),draggable:Ce(oe(p,"draggable",x)),code:Ce(oe(p,"code",x)),whitespace:Ce(oe(p,"whitespace",x)),linebreakReplacement:Ce(oe(p,"linebreakReplacement",x)),defining:Ce(oe(p,"defining",x)),isolating:Ce(oe(p,"isolating",x)),attrs:Object.fromEntries(g.map(j=>{var D;return[j.name,{default:(D=j==null?void 0:j.attribute)===null||D===void 0?void 0:D.default}]}))}),S=Ce(oe(p,"parseHTML",x));S&&(v.parseDOM=S.map(j=>lb(j,g)));const w=oe(p,"renderHTML",x);w&&(v.toDOM=j=>w({node:j,HTMLAttributes:Ph(j,g)}));const k=oe(p,"renderText",x);return k&&(v.toText=k),[p.name,v]})),f=Object.fromEntries(a.map(p=>{const g=s.filter(k=>k.type===p.name),x={name:p.name,options:p.options,storage:p.storage,editor:e},b=n.reduce((k,j)=>{const D=oe(j,"extendMarkSchema",x);return{...k,...D?D(p):{}}},{}),v=ab({...b,inclusive:Ce(oe(p,"inclusive",x)),excludes:Ce(oe(p,"excludes",x)),group:Ce(oe(p,"group",x)),spanning:Ce(oe(p,"spanning",x)),code:Ce(oe(p,"code",x)),attrs:Object.fromEntries(g.map(k=>{var j;return[k.name,{default:(j=k==null?void 0:k.attribute)===null||j===void 0?void 0:j.default}]}))}),S=Ce(oe(p,"parseHTML",x));S&&(v.parseDOM=S.map(k=>lb(k,g)));const w=oe(p,"renderHTML",x);return w&&(v.toDOM=k=>w({mark:k,HTMLAttributes:Ph(k,g)})),[p.name,v]}));return new xv({topNode:c,nodes:d,marks:f})}function ah(n,e){return e.nodes[n]||e.marks[n]||null}function ob(n,e){return Array.isArray(e)?e.some(t=>(typeof t=="string"?t:t.name)===n.name):e}function Mp(n,e){const t=Fs.fromSchema(e).serializeFragment(n),l=document.implementation.createHTMLDocument().createElement("div");return l.appendChild(t),l.innerHTML}const Jj=(n,e=500)=>{let t="";const s=n.parentOffset;return n.parent.nodesBetween(Math.max(0,s-e),s,(l,a,c,d)=>{var f,p;const g=((p=(f=l.type.spec).toText)===null||p===void 0?void 0:p.call(f,{node:l,pos:a,parent:c,index:d}))||l.textContent||"%leaf%";t+=l.isAtom&&!l.isText?g:g.slice(0,Math.max(0,s-a))}),t};function Op(n){return Object.prototype.toString.call(n)==="[object RegExp]"}class Su{constructor(e){this.find=e.find,this.handler=e.handler}}const Qj=(n,e)=>{if(Op(e))return e.exec(n);const t=e(n);if(!t)return null;const s=[t.text];return s.index=t.index,s.input=n,s.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),s.push(t.replaceWith)),s};function rc(n){var e;const{editor:t,from:s,to:l,text:a,rules:c,plugin:d}=n,{view:f}=t;if(f.composing)return!1;const p=f.state.doc.resolve(s);if(p.parent.type.spec.code||!((e=p.nodeBefore||p.nodeAfter)===null||e===void 0)&&e.marks.find(b=>b.type.spec.code))return!1;let g=!1;const x=Jj(p)+a;return c.forEach(b=>{if(g)return;const v=Qj(x,b.find);if(!v)return;const S=f.state.tr,w=xu({state:f.state,transaction:S}),k={from:s-(v[0].length-a.length),to:l},{commands:j,chain:D,can:R}=new bu({editor:t,state:w});b.handler({state:w,range:k,match:v,commands:j,chain:D,can:R})===null||!S.steps.length||(S.setMeta(d,{transform:S,from:s,to:l,text:a}),f.dispatch(S),g=!0)}),g}function Zj(n){const{editor:e,rules:t}=n,s=new kt({state:{init(){return null},apply(l,a,c){const d=l.getMeta(s);if(d)return d;const f=l.getMeta("applyInputRules");return!!f&&setTimeout(()=>{let{text:g}=f;typeof g=="string"?g=g:g=Mp(X.from(g),c.schema);const{from:x}=f,b=x+g.length;rc({editor:e,from:x,to:b,text:g,rules:t,plugin:s})}),l.selectionSet||l.docChanged?null:a}},props:{handleTextInput(l,a,c,d){return rc({editor:e,from:a,to:c,text:d,rules:t,plugin:s})},handleDOMEvents:{compositionend:l=>(setTimeout(()=>{const{$cursor:a}=l.state.selection;a&&rc({editor:e,from:a.pos,to:a.pos,text:"",rules:t,plugin:s})}),!1)},handleKeyDown(l,a){if(a.key!=="Enter")return!1;const{$cursor:c}=l.state.selection;return c?rc({editor:e,from:c.pos,to:c.pos,text:`
`,rules:t,plugin:s}):!1}},isInputRules:!0});return s}function Wj(n){return Object.prototype.toString.call(n).slice(8,-1)}function sc(n){return Wj(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function Nu(n,e){const t={...n};return sc(n)&&sc(e)&&Object.keys(e).forEach(s=>{sc(e[s])&&sc(n[s])?t[s]=Nu(n[s],e[s]):t[s]=e[s]}),t}class fr{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Ce(oe(this,"addOptions",{name:this.name}))),this.storage=Ce(oe(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new fr(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>Nu(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new fr(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=Ce(oe(t,"addOptions",{name:t.name})),t.storage=Ce(oe(t,"addStorage",{name:t.name,options:t.options})),t}static handleExit({editor:e,mark:t}){const{tr:s}=e.state,l=e.state.selection.$from;if(l.pos===l.end()){const c=l.marks();if(!!!c.find(p=>(p==null?void 0:p.type.name)===t.name))return!1;const f=c.find(p=>(p==null?void 0:p.type.name)===t.name);return f&&s.removeStoredMark(f),s.insertText(" ",l.pos),e.view.dispatch(s),!0}return!1}}function eA(n){return typeof n=="number"}class tA{constructor(e){this.find=e.find,this.handler=e.handler}}const nA=(n,e,t)=>{if(Op(e))return[...n.matchAll(e)];const s=e(n,t);return s?s.map(l=>{const a=[l.text];return a.index=l.index,a.input=n,a.data=l.data,l.replaceWith&&(l.text.includes(l.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),a.push(l.replaceWith)),a}):[]};function rA(n){const{editor:e,state:t,from:s,to:l,rule:a,pasteEvent:c,dropEvent:d}=n,{commands:f,chain:p,can:g}=new bu({editor:e,state:t}),x=[];return t.doc.nodesBetween(s,l,(v,S)=>{if(!v.isTextblock||v.type.spec.code)return;const w=Math.max(s,S),k=Math.min(l,S+v.content.size),j=v.textBetween(w-S,k-S,void 0,"");nA(j,a.find,c).forEach(R=>{if(R.index===void 0)return;const O=w+R.index+1,z=O+R[0].length,H={from:t.tr.mapping.map(O),to:t.tr.mapping.map(z)},G=a.handler({state:t,range:H,match:R,commands:f,chain:p,can:g,pasteEvent:c,dropEvent:d});x.push(G)})}),x.every(v=>v!==null)}let ic=null;const sA=n=>{var e;const t=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=t.clipboardData)===null||e===void 0||e.setData("text/html",n),t};function iA(n){const{editor:e,rules:t}=n;let s=null,l=!1,a=!1,c=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,d;try{d=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{d=null}const f=({state:g,from:x,to:b,rule:v,pasteEvt:S})=>{const w=g.tr,k=xu({state:g,transaction:w});if(!(!rA({editor:e,state:k,from:Math.max(x-1,0),to:b.b-1,rule:v,pasteEvent:S,dropEvent:d})||!w.steps.length)){try{d=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{d=null}return c=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,w}};return t.map(g=>new kt({view(x){const b=S=>{var w;s=!((w=x.dom.parentElement)===null||w===void 0)&&w.contains(S.target)?x.dom.parentElement:null,s&&(ic=e)},v=()=>{ic&&(ic=null)};return window.addEventListener("dragstart",b),window.addEventListener("dragend",v),{destroy(){window.removeEventListener("dragstart",b),window.removeEventListener("dragend",v)}}},props:{handleDOMEvents:{drop:(x,b)=>{if(a=s===x.dom.parentElement,d=b,!a){const v=ic;v&&setTimeout(()=>{const S=v.state.selection;S&&v.commands.deleteRange({from:S.from,to:S.to})},10)}return!1},paste:(x,b)=>{var v;const S=(v=b.clipboardData)===null||v===void 0?void 0:v.getData("text/html");return c=b,l=!!(S!=null&&S.includes("data-pm-slice")),!1}}},appendTransaction:(x,b,v)=>{const S=x[0],w=S.getMeta("uiEvent")==="paste"&&!l,k=S.getMeta("uiEvent")==="drop"&&!a,j=S.getMeta("applyPasteRules"),D=!!j;if(!w&&!k&&!D)return;if(D){let{text:z}=j;typeof z=="string"?z=z:z=Mp(X.from(z),v.schema);const{from:H}=j,G=H+z.length,q=sA(z);return f({rule:g,state:v,from:H,to:{b:G},pasteEvt:q})}const R=b.doc.content.findDiffStart(v.doc.content),O=b.doc.content.findDiffEnd(v.doc.content);if(!(!eA(R)||!O||R===O.b))return f({rule:g,state:v,from:R,to:O,pasteEvt:c})}}))}function lA(n){const e=n.filter((t,s)=>n.indexOf(t)!==s);return Array.from(new Set(e))}class Ui{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=Ui.resolve(e),this.schema=Xj(this.extensions,t),this.setupExtensions()}static resolve(e){const t=Ui.sort(Ui.flatten(e)),s=lA(t.map(l=>l.name));return s.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${s.map(l=>`'${l}'`).join(", ")}]. This can lead to issues.`),t}static flatten(e){return e.map(t=>{const s={name:t.name,options:t.options,storage:t.storage},l=oe(t,"addExtensions",s);return l?[t,...this.flatten(l())]:t}).flat(10)}static sort(e){return e.sort((s,l)=>{const a=oe(s,"priority")||100,c=oe(l,"priority")||100;return a>c?-1:a<c?1:0})}get commands(){return this.extensions.reduce((e,t)=>{const s={name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:ah(t.name,this.schema)},l=oe(t,"addCommands",s);return l?{...e,...l()}:e},{})}get plugins(){const{editor:e}=this,t=Ui.sort([...this.extensions].reverse()),s=[],l=[],a=t.map(c=>{const d={name:c.name,options:c.options,storage:c.storage,editor:e,type:ah(c.name,this.schema)},f=[],p=oe(c,"addKeyboardShortcuts",d);let g={};if(c.type==="mark"&&oe(c,"exitable",d)&&(g.ArrowRight=()=>fr.handleExit({editor:e,mark:c})),p){const w=Object.fromEntries(Object.entries(p()).map(([k,j])=>[k,()=>j({editor:e})]));g={...g,...w}}const x=Cj(g);f.push(x);const b=oe(c,"addInputRules",d);ob(c,e.options.enableInputRules)&&b&&s.push(...b());const v=oe(c,"addPasteRules",d);ob(c,e.options.enablePasteRules)&&v&&l.push(...v());const S=oe(c,"addProseMirrorPlugins",d);if(S){const w=S();f.push(...w)}return f}).flat();return[Zj({editor:e,rules:s}),...iA({editor:e,rules:l}),...a]}get attributes(){return M1(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=vu(this.extensions);return Object.fromEntries(t.filter(s=>!!oe(s,"addNodeView")).map(s=>{const l=this.attributes.filter(f=>f.type===s.name),a={name:s.name,options:s.options,storage:s.storage,editor:e,type:gt(s.name,this.schema)},c=oe(s,"addNodeView",a);if(!c)return[];const d=(f,p,g,x,b)=>{const v=Ph(f,l);return c()({node:f,view:p,getPos:g,decorations:x,innerDecorations:b,editor:e,extension:s,HTMLAttributes:v})};return[s.name,d]}))}setupExtensions(){this.extensions.forEach(e=>{var t;this.editor.extensionStorage[e.name]=e.storage;const s={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:ah(e.name,this.schema)};e.type==="mark"&&(!((t=Ce(oe(e,"keepOnSplit",s)))!==null&&t!==void 0)||t)&&this.splittableMarks.push(e.name);const l=oe(e,"onBeforeCreate",s),a=oe(e,"onCreate",s),c=oe(e,"onUpdate",s),d=oe(e,"onSelectionUpdate",s),f=oe(e,"onTransaction",s),p=oe(e,"onFocus",s),g=oe(e,"onBlur",s),x=oe(e,"onDestroy",s);l&&this.editor.on("beforeCreate",l),a&&this.editor.on("create",a),c&&this.editor.on("update",c),d&&this.editor.on("selectionUpdate",d),f&&this.editor.on("transaction",f),p&&this.editor.on("focus",p),g&&this.editor.on("blur",g),x&&this.editor.on("destroy",x)})}}class _t{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Ce(oe(this,"addOptions",{name:this.name}))),this.storage=Ce(oe(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new _t(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>Nu(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new _t({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=Ce(oe(t,"addOptions",{name:t.name})),t.storage=Ce(oe(t,"addStorage",{name:t.name,options:t.options})),t}}function D1(n,e,t){const{from:s,to:l}=e,{blockSeparator:a=`

`,textSerializers:c={}}=t||{};let d="";return n.nodesBetween(s,l,(f,p,g,x)=>{var b;f.isBlock&&p>s&&(d+=a);const v=c==null?void 0:c[f.type.name];if(v)return g&&(d+=v({node:f,pos:p,parent:g,index:x,range:e})),!1;f.isText&&(d+=(b=f==null?void 0:f.text)===null||b===void 0?void 0:b.slice(Math.max(s,p)-p,l-p))}),d}function R1(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}const aA=_t.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new kt({key:new sn("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:s,selection:l}=e,{ranges:a}=l,c=Math.min(...a.map(g=>g.$from.pos)),d=Math.max(...a.map(g=>g.$to.pos)),f=R1(t);return D1(s,{from:c,to:d},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:f})}}})]}}),oA=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())===null||t===void 0||t.removeAllRanges())}),!0),cA=(n=!1)=>({commands:e})=>e.setContent("",n),uA=()=>({state:n,tr:e,dispatch:t})=>{const{selection:s}=e,{ranges:l}=s;return t&&l.forEach(({$from:a,$to:c})=>{n.doc.nodesBetween(a.pos,c.pos,(d,f)=>{if(d.type.isText)return;const{doc:p,mapping:g}=e,x=p.resolve(g.map(f)),b=p.resolve(g.map(f+d.nodeSize)),v=x.blockRange(b);if(!v)return;const S=Wi(v);if(d.type.isTextblock){const{defaultType:w}=x.parent.contentMatchAt(x.index());e.setNodeMarkup(v.start,w)}(S||S===0)&&e.lift(v,S)})}),!0},dA=n=>e=>n(e),fA=()=>({state:n,dispatch:e})=>E1(n,e),hA=(n,e)=>({editor:t,tr:s})=>{const{state:l}=t,a=l.doc.slice(n.from,n.to);s.deleteRange(n.from,n.to);const c=s.mapping.map(e);return s.insert(c,a.content),s.setSelection(new be(s.doc.resolve(c-1))),!0},pA=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,s=t.$anchor.node();if(s.content.size>0)return!1;const l=n.selection.$anchor;for(let a=l.depth;a>0;a-=1)if(l.node(a).type===s.type){if(e){const d=l.before(a),f=l.after(a);n.delete(d,f).scrollIntoView()}return!0}return!1},mA=n=>({tr:e,state:t,dispatch:s})=>{const l=gt(n,t.schema),a=e.selection.$anchor;for(let c=a.depth;c>0;c-=1)if(a.node(c).type===l){if(s){const f=a.before(c),p=a.after(c);e.delete(f,p).scrollIntoView()}return!0}return!1},gA=n=>({tr:e,dispatch:t})=>{const{from:s,to:l}=n;return t&&e.delete(s,l),!0},yA=()=>({state:n,dispatch:e})=>Cp(n,e),xA=()=>({commands:n})=>n.keyboardShortcut("Enter"),bA=()=>({state:n,dispatch:e})=>Oj(n,e);function Dc(n,e,t={strict:!0}){const s=Object.keys(e);return s.length?s.every(l=>t.strict?e[l]===n[l]:Op(e[l])?e[l].test(n[l]):e[l]===n[l]):!0}function L1(n,e,t={}){return n.find(s=>s.type===e&&Dc(Object.fromEntries(Object.keys(t).map(l=>[l,s.attrs[l]])),t))}function cb(n,e,t={}){return!!L1(n,e,t)}function Dp(n,e,t){var s;if(!n||!e)return;let l=n.parent.childAfter(n.parentOffset);if((!l.node||!l.node.marks.some(g=>g.type===e))&&(l=n.parent.childBefore(n.parentOffset)),!l.node||!l.node.marks.some(g=>g.type===e)||(t=t||((s=l.node.marks[0])===null||s===void 0?void 0:s.attrs),!L1([...l.node.marks],e,t)))return;let c=l.index,d=n.start()+l.offset,f=c+1,p=d+l.node.nodeSize;for(;c>0&&cb([...n.parent.child(c-1).marks],e,t);)c-=1,d-=n.parent.child(c).nodeSize;for(;f<n.parent.childCount&&cb([...n.parent.child(f).marks],e,t);)p+=n.parent.child(f).nodeSize,f+=1;return{from:d,to:p}}function is(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}const vA=(n,e={})=>({tr:t,state:s,dispatch:l})=>{const a=is(n,s.schema),{doc:c,selection:d}=t,{$from:f,from:p,to:g}=d;if(l){const x=Dp(f,a,e);if(x&&x.from<=p&&x.to>=g){const b=be.create(c,x.from,x.to);t.setSelection(b)}}return!0},SA=n=>e=>{const t=typeof n=="function"?n(e):n;for(let s=0;s<t.length;s+=1)if(t[s](e))return!0;return!1};function z1(n){return n instanceof be}function Os(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function B1(n,e=null){if(!e)return null;const t=Se.atStart(n),s=Se.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return s;const l=t.from,a=s.to;return e==="all"?be.create(n,Os(0,l,a),Os(n.content.size,l,a)):be.create(n,Os(e,l,a),Os(e,l,a))}function NA(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function Rp(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const wA=(n=null,e={})=>({editor:t,view:s,tr:l,dispatch:a})=>{e={scrollIntoView:!0,...e};const c=()=>{(Rp()||NA())&&s.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(s.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};if(s.hasFocus()&&n===null||n===!1)return!0;if(a&&n===null&&!z1(t.state.selection))return c(),!0;const d=B1(l.doc,n)||t.state.selection,f=t.state.selection.eq(d);return a&&(f||l.setSelection(d),f&&l.storedMarks&&l.setStoredMarks(l.storedMarks),c()),!0},kA=(n,e)=>t=>n.every((s,l)=>e(s,{...t,index:l})),CA=(n,e)=>({tr:t,commands:s})=>s.insertContentAt({from:t.selection.from,to:t.selection.to},n,e),_1=n=>{const e=n.childNodes;for(let t=e.length-1;t>=0;t-=1){const s=e[t];s.nodeType===3&&s.nodeValue&&/^(\n\s\s|\n)$/.test(s.nodeValue)?n.removeChild(s):s.nodeType===1&&_1(s)}return n};function lc(n){const e=`<body>${n}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return _1(t)}function Aa(n,e,t){if(n instanceof Jr||n instanceof X)return n;t={slice:!0,parseOptions:{},...t};const s=typeof n=="object"&&n!==null,l=typeof n=="string";if(s)try{if(Array.isArray(n)&&n.length>0)return X.fromArray(n.map(d=>e.nodeFromJSON(d)));const c=e.nodeFromJSON(n);return t.errorOnInvalidContent&&c.check(),c}catch(a){if(t.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:a});return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",a),Aa("",e,t)}if(l){if(t.errorOnInvalidContent){let c=!1,d="";const f=new xv({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:p=>(c=!0,d=typeof p=="string"?p:p.outerHTML,null)}]}})});if(t.slice?Qr.fromSchema(f).parseSlice(lc(n),t.parseOptions):Qr.fromSchema(f).parse(lc(n),t.parseOptions),t.errorOnInvalidContent&&c)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${d}`)})}const a=Qr.fromSchema(e);return t.slice?a.parseSlice(lc(n),t.parseOptions).content:a.parse(lc(n),t.parseOptions)}return Aa("",e,t)}function EA(n,e,t){const s=n.steps.length-1;if(s<e)return;const l=n.steps[s];if(!(l instanceof ht||l instanceof pt))return;const a=n.mapping.maps[s];let c=0;a.forEach((d,f,p,g)=>{c===0&&(c=g)}),n.setSelection(Se.near(n.doc.resolve(c),t))}const jA=n=>!("type"in n),AA=(n,e,t)=>({tr:s,dispatch:l,editor:a})=>{var c;if(l){t={parseOptions:a.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...t};let d;const f=k=>{a.emit("contentError",{editor:a,error:k,disableCollaboration:()=>{a.storage.collaboration&&(a.storage.collaboration.isDisabled=!0)}})},p={preserveWhitespace:"full",...t.parseOptions};if(!t.errorOnInvalidContent&&!a.options.enableContentCheck&&a.options.emitContentError)try{Aa(e,a.schema,{parseOptions:p,errorOnInvalidContent:!0})}catch(k){f(k)}try{d=Aa(e,a.schema,{parseOptions:p,errorOnInvalidContent:(c=t.errorOnInvalidContent)!==null&&c!==void 0?c:a.options.enableContentCheck})}catch(k){return f(k),!1}let{from:g,to:x}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},b=!0,v=!0;if((jA(d)?d:[d]).forEach(k=>{k.check(),b=b?k.isText&&k.marks.length===0:!1,v=v?k.isBlock:!1}),g===x&&v){const{parent:k}=s.doc.resolve(g);k.isTextblock&&!k.type.spec.code&&!k.childCount&&(g-=1,x+=1)}let w;if(b){if(Array.isArray(e))w=e.map(k=>k.text||"").join("");else if(e instanceof X){let k="";e.forEach(j=>{j.text&&(k+=j.text)}),w=k}else typeof e=="object"&&e&&e.text?w=e.text:w=e;s.insertText(w,g,x)}else w=d,s.replaceWith(g,x,w);t.updateSelection&&EA(s,s.steps.length-1,-1),t.applyInputRules&&s.setMeta("applyInputRules",{from:g,text:w}),t.applyPasteRules&&s.setMeta("applyPasteRules",{from:g,text:w})}return!0},TA=()=>({state:n,dispatch:e})=>Aj(n,e),MA=()=>({state:n,dispatch:e})=>Tj(n,e),OA=()=>({state:n,dispatch:e})=>b1(n,e),DA=()=>({state:n,dispatch:e})=>w1(n,e),RA=()=>({state:n,dispatch:e,tr:t})=>{try{const s=fu(n.doc,n.selection.$from.pos,-1);return s==null?!1:(t.join(s,2),e&&e(t),!0)}catch{return!1}},LA=()=>({state:n,dispatch:e,tr:t})=>{try{const s=fu(n.doc,n.selection.$from.pos,1);return s==null?!1:(t.join(s,2),e&&e(t),!0)}catch{return!1}},zA=()=>({state:n,dispatch:e})=>Ej(n,e),BA=()=>({state:n,dispatch:e})=>jj(n,e);function H1(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function _A(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let s,l,a,c;for(let d=0;d<e.length-1;d+=1){const f=e[d];if(/^(cmd|meta|m)$/i.test(f))c=!0;else if(/^a(lt)?$/i.test(f))s=!0;else if(/^(c|ctrl|control)$/i.test(f))l=!0;else if(/^s(hift)?$/i.test(f))a=!0;else if(/^mod$/i.test(f))Rp()||H1()?c=!0:l=!0;else throw new Error(`Unrecognized modifier name: ${f}`)}return s&&(t=`Alt-${t}`),l&&(t=`Ctrl-${t}`),c&&(t=`Meta-${t}`),a&&(t=`Shift-${t}`),t}const HA=n=>({editor:e,view:t,tr:s,dispatch:l})=>{const a=_A(n).split(/-(?!$)/),c=a.find(p=>!["Alt","Ctrl","Meta","Shift"].includes(p)),d=new KeyboardEvent("keydown",{key:c==="Space"?" ":c,altKey:a.includes("Alt"),ctrlKey:a.includes("Ctrl"),metaKey:a.includes("Meta"),shiftKey:a.includes("Shift"),bubbles:!0,cancelable:!0}),f=e.captureTransaction(()=>{t.someProp("handleKeyDown",p=>p(t,d))});return f==null||f.steps.forEach(p=>{const g=p.map(s.mapping);g&&l&&s.maybeStep(g)}),!0};function Ta(n,e,t={}){const{from:s,to:l,empty:a}=n.selection,c=e?gt(e,n.schema):null,d=[];n.doc.nodesBetween(s,l,(x,b)=>{if(x.isText)return;const v=Math.max(s,b),S=Math.min(l,b+x.nodeSize);d.push({node:x,from:v,to:S})});const f=l-s,p=d.filter(x=>c?c.name===x.node.type.name:!0).filter(x=>Dc(x.node.attrs,t,{strict:!1}));return a?!!p.length:p.reduce((x,b)=>x+b.to-b.from,0)>=f}const UA=(n,e={})=>({state:t,dispatch:s})=>{const l=gt(n,t.schema);return Ta(t,l,e)?Mj(t,s):!1},PA=()=>({state:n,dispatch:e})=>j1(n,e),IA=n=>({state:e,dispatch:t})=>{const s=gt(n,e.schema);return Vj(s)(e,t)},VA=()=>({state:n,dispatch:e})=>C1(n,e);function wu(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function ub(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((s,l)=>(t.includes(l)||(s[l]=n[l]),s),{})}const qA=(n,e)=>({tr:t,state:s,dispatch:l})=>{let a=null,c=null;const d=wu(typeof n=="string"?n:n.name,s.schema);return d?(d==="node"&&(a=gt(n,s.schema)),d==="mark"&&(c=is(n,s.schema)),l&&t.selection.ranges.forEach(f=>{s.doc.nodesBetween(f.$from.pos,f.$to.pos,(p,g)=>{a&&a===p.type&&t.setNodeMarkup(g,void 0,ub(p.attrs,e)),c&&p.marks.length&&p.marks.forEach(x=>{c===x.type&&t.addMark(g,g+p.nodeSize,c.create(ub(x.attrs,e)))})})}),!0):!1},FA=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),$A=()=>({tr:n,dispatch:e})=>{if(e){const t=new rn(n.doc);n.setSelection(t)}return!0},GA=()=>({state:n,dispatch:e})=>S1(n,e),YA=()=>({state:n,dispatch:e})=>k1(n,e),KA=()=>({state:n,dispatch:e})=>Lj(n,e),XA=()=>({state:n,dispatch:e})=>_j(n,e),JA=()=>({state:n,dispatch:e})=>Bj(n,e);function Ih(n,e,t={},s={}){return Aa(n,e,{slice:!1,parseOptions:t,errorOnInvalidContent:s.errorOnInvalidContent})}const QA=(n,e=!1,t={},s={})=>({editor:l,tr:a,dispatch:c,commands:d})=>{var f,p;const{doc:g}=a;if(t.preserveWhitespace!=="full"){const x=Ih(n,l.schema,t,{errorOnInvalidContent:(f=s.errorOnInvalidContent)!==null&&f!==void 0?f:l.options.enableContentCheck});return c&&a.replaceWith(0,g.content.size,x).setMeta("preventUpdate",!e),!0}return c&&a.setMeta("preventUpdate",!e),d.insertContentAt({from:0,to:g.content.size},n,{parseOptions:t,errorOnInvalidContent:(p=s.errorOnInvalidContent)!==null&&p!==void 0?p:l.options.enableContentCheck})};function U1(n,e){const t=is(e,n.schema),{from:s,to:l,empty:a}=n.selection,c=[];a?(n.storedMarks&&c.push(...n.storedMarks),c.push(...n.selection.$head.marks())):n.doc.nodesBetween(s,l,f=>{c.push(...f.marks)});const d=c.find(f=>f.type.name===t.name);return d?{...d.attrs}:{}}function ZA(n,e){const t=new Lv(n);return e.forEach(s=>{s.steps.forEach(l=>{t.step(l)})}),t}function WA(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function eT(n,e,t){const s=[];return n.nodesBetween(e.from,e.to,(l,a)=>{t(l)&&s.push({node:l,pos:a})}),s}function tT(n,e){for(let t=n.depth;t>0;t-=1){const s=n.node(t);if(e(s))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:s}}}function Lp(n){return e=>tT(e.$from,n)}function nT(n,e){const t={from:0,to:n.content.size};return D1(n,t,e)}function rT(n,e){const t=gt(e,n.schema),{from:s,to:l}=n.selection,a=[];n.doc.nodesBetween(s,l,d=>{a.push(d)});const c=a.reverse().find(d=>d.type.name===t.name);return c?{...c.attrs}:{}}function P1(n,e){const t=wu(typeof e=="string"?e:e.name,n.schema);return t==="node"?rT(n,e):t==="mark"?U1(n,e):{}}function sT(n,e=JSON.stringify){const t={};return n.filter(s=>{const l=e(s);return Object.prototype.hasOwnProperty.call(t,l)?!1:t[l]=!0})}function iT(n){const e=sT(n);return e.length===1?e:e.filter((t,s)=>!e.filter((a,c)=>c!==s).some(a=>t.oldRange.from>=a.oldRange.from&&t.oldRange.to<=a.oldRange.to&&t.newRange.from>=a.newRange.from&&t.newRange.to<=a.newRange.to))}function lT(n){const{mapping:e,steps:t}=n,s=[];return e.maps.forEach((l,a)=>{const c=[];if(l.ranges.length)l.forEach((d,f)=>{c.push({from:d,to:f})});else{const{from:d,to:f}=t[a];if(d===void 0||f===void 0)return;c.push({from:d,to:f})}c.forEach(({from:d,to:f})=>{const p=e.slice(a).map(d,-1),g=e.slice(a).map(f),x=e.invert().map(p,-1),b=e.invert().map(g);s.push({oldRange:{from:x,to:b},newRange:{from:p,to:g}})})}),iT(s)}function zp(n,e,t){const s=[];return n===e?t.resolve(n).marks().forEach(l=>{const a=t.resolve(n),c=Dp(a,l.type);c&&s.push({mark:l,...c})}):t.nodesBetween(n,e,(l,a)=>{!l||(l==null?void 0:l.nodeSize)===void 0||s.push(...l.marks.map(c=>({from:a,to:a+l.nodeSize,mark:c})))}),s}function gc(n,e,t){return Object.fromEntries(Object.entries(t).filter(([s])=>{const l=n.find(a=>a.type===e&&a.name===s);return l?l.attribute.keepOnSplit:!1}))}function Vh(n,e,t={}){const{empty:s,ranges:l}=n.selection,a=e?is(e,n.schema):null;if(s)return!!(n.storedMarks||n.selection.$from.marks()).filter(x=>a?a.name===x.type.name:!0).find(x=>Dc(x.attrs,t,{strict:!1}));let c=0;const d=[];if(l.forEach(({$from:x,$to:b})=>{const v=x.pos,S=b.pos;n.doc.nodesBetween(v,S,(w,k)=>{if(!w.isText&&!w.marks.length)return;const j=Math.max(v,k),D=Math.min(S,k+w.nodeSize),R=D-j;c+=R,d.push(...w.marks.map(O=>({mark:O,from:j,to:D})))})}),c===0)return!1;const f=d.filter(x=>a?a.name===x.mark.type.name:!0).filter(x=>Dc(x.mark.attrs,t,{strict:!1})).reduce((x,b)=>x+b.to-b.from,0),p=d.filter(x=>a?x.mark.type!==a&&x.mark.type.excludes(a):!0).reduce((x,b)=>x+b.to-b.from,0);return(f>0?f+p:f)>=c}function aT(n,e,t={}){if(!e)return Ta(n,null,t)||Vh(n,null,t);const s=wu(e,n.schema);return s==="node"?Ta(n,e,t):s==="mark"?Vh(n,e,t):!1}function db(n,e){const{nodeExtensions:t}=vu(e),s=t.find(c=>c.name===n);if(!s)return!1;const l={name:s.name,options:s.options,storage:s.storage},a=Ce(oe(s,"group",l));return typeof a!="string"?!1:a.split(" ").includes("list")}function Bp(n,{checkChildren:e=!0,ignoreWhitespace:t=!1}={}){var s;if(t){if(n.type.name==="hardBreak")return!0;if(n.isText)return/^\s*$/m.test((s=n.text)!==null&&s!==void 0?s:"")}if(n.isText)return!n.text;if(n.isAtom||n.isLeaf)return!1;if(n.content.childCount===0)return!0;if(e){let l=!0;return n.content.forEach(a=>{l!==!1&&(Bp(a,{ignoreWhitespace:t,checkChildren:e})||(l=!1))}),l}return!1}function oT(n){return n instanceof he}function cT(n,e,t){var s;const{selection:l}=e;let a=null;if(z1(l)&&(a=l.$cursor),a){const d=(s=n.storedMarks)!==null&&s!==void 0?s:a.marks();return!!t.isInSet(d)||!d.some(f=>f.type.excludes(t))}const{ranges:c}=l;return c.some(({$from:d,$to:f})=>{let p=d.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(d.pos,f.pos,(g,x,b)=>{if(p)return!1;if(g.isInline){const v=!b||b.type.allowsMarkType(t),S=!!t.isInSet(g.marks)||!g.marks.some(w=>w.type.excludes(t));p=v&&S}return!p}),p})}const uT=(n,e={})=>({tr:t,state:s,dispatch:l})=>{const{selection:a}=t,{empty:c,ranges:d}=a,f=is(n,s.schema);if(l)if(c){const p=U1(s,f);t.addStoredMark(f.create({...p,...e}))}else d.forEach(p=>{const g=p.$from.pos,x=p.$to.pos;s.doc.nodesBetween(g,x,(b,v)=>{const S=Math.max(v,g),w=Math.min(v+b.nodeSize,x);b.marks.find(j=>j.type===f)?b.marks.forEach(j=>{f===j.type&&t.addMark(S,w,f.create({...j.attrs,...e}))}):t.addMark(S,w,f.create(e))})});return cT(s,t,f)},dT=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),fT=(n,e={})=>({state:t,dispatch:s,chain:l})=>{const a=gt(n,t.schema);let c;return t.selection.$anchor.sameParent(t.selection.$head)&&(c=t.selection.$anchor.parent.attrs),a.isTextblock?l().command(({commands:d})=>ib(a,{...c,...e})(t)?!0:d.clearNodes()).command(({state:d})=>ib(a,{...c,...e})(d,s)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},hT=n=>({tr:e,dispatch:t})=>{if(t){const{doc:s}=e,l=Os(n,0,s.content.size),a=he.create(s,l);e.setSelection(a)}return!0},pT=n=>({tr:e,dispatch:t})=>{if(t){const{doc:s}=e,{from:l,to:a}=typeof n=="number"?{from:n,to:n}:n,c=be.atStart(s).from,d=be.atEnd(s).to,f=Os(l,c,d),p=Os(a,c,d),g=be.create(s,f,p);e.setSelection(g)}return!0},mT=n=>({state:e,dispatch:t})=>{const s=gt(n,e.schema);return $j(s)(e,t)};function fb(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const s=t.filter(l=>e==null?void 0:e.includes(l.type.name));n.tr.ensureMarks(s)}}const gT=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:s,editor:l})=>{const{selection:a,doc:c}=e,{$from:d,$to:f}=a,p=l.extensionManager.attributes,g=gc(p,d.node().type.name,d.node().attrs);if(a instanceof he&&a.node.isBlock)return!d.parentOffset||!cr(c,d.pos)?!1:(s&&(n&&fb(t,l.extensionManager.splittableMarks),e.split(d.pos).scrollIntoView()),!0);if(!d.parent.isBlock)return!1;const x=f.parentOffset===f.parent.content.size,b=d.depth===0?void 0:WA(d.node(-1).contentMatchAt(d.indexAfter(-1)));let v=x&&b?[{type:b,attrs:g}]:void 0,S=cr(e.doc,e.mapping.map(d.pos),1,v);if(!v&&!S&&cr(e.doc,e.mapping.map(d.pos),1,b?[{type:b}]:void 0)&&(S=!0,v=b?[{type:b,attrs:g}]:void 0),s){if(S&&(a instanceof be&&e.deleteSelection(),e.split(e.mapping.map(d.pos),1,v),b&&!x&&!d.parentOffset&&d.parent.type!==b)){const w=e.mapping.map(d.before()),k=e.doc.resolve(w);d.node(-1).canReplaceWith(k.index(),k.index()+1,b)&&e.setNodeMarkup(e.mapping.map(d.before()),b)}n&&fb(t,l.extensionManager.splittableMarks),e.scrollIntoView()}return S},yT=(n,e={})=>({tr:t,state:s,dispatch:l,editor:a})=>{var c;const d=gt(n,s.schema),{$from:f,$to:p}=s.selection,g=s.selection.node;if(g&&g.isBlock||f.depth<2||!f.sameParent(p))return!1;const x=f.node(-1);if(x.type!==d)return!1;const b=a.extensionManager.attributes;if(f.parent.content.size===0&&f.node(-1).childCount===f.indexAfter(-1)){if(f.depth===2||f.node(-3).type!==d||f.index(-2)!==f.node(-2).childCount-1)return!1;if(l){let j=X.empty;const D=f.index(-1)?1:f.index(-2)?2:3;for(let q=f.depth-D;q>=f.depth-3;q-=1)j=X.from(f.node(q).copy(j));const R=f.indexAfter(-1)<f.node(-2).childCount?1:f.indexAfter(-2)<f.node(-3).childCount?2:3,O={...gc(b,f.node().type.name,f.node().attrs),...e},z=((c=d.contentMatch.defaultType)===null||c===void 0?void 0:c.createAndFill(O))||void 0;j=j.append(X.from(d.createAndFill(null,z)||void 0));const H=f.before(f.depth-(D-1));t.replace(H,f.after(-R),new se(j,4-D,0));let G=-1;t.doc.nodesBetween(H,t.doc.content.size,(q,ne)=>{if(G>-1)return!1;q.isTextblock&&q.content.size===0&&(G=ne+1)}),G>-1&&t.setSelection(be.near(t.doc.resolve(G))),t.scrollIntoView()}return!0}const v=p.pos===f.end()?x.contentMatchAt(0).defaultType:null,S={...gc(b,x.type.name,x.attrs),...e},w={...gc(b,f.node().type.name,f.node().attrs),...e};t.delete(f.pos,p.pos);const k=v?[{type:d,attrs:S},{type:v,attrs:w}]:[{type:d,attrs:S}];if(!cr(t.doc,f.pos,2))return!1;if(l){const{selection:j,storedMarks:D}=s,{splittableMarks:R}=a.extensionManager,O=D||j.$to.parentOffset&&j.$from.marks();if(t.split(f.pos,2,k).scrollIntoView(),!O||!l)return!0;const z=O.filter(H=>R.includes(H.type.name));t.ensureMarks(z)}return!0},oh=(n,e)=>{const t=Lp(c=>c.type===e)(n.selection);if(!t)return!0;const s=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(s===void 0)return!0;const l=n.doc.nodeAt(s);return t.node.type===(l==null?void 0:l.type)&&rs(n.doc,t.pos)&&n.join(t.pos),!0},ch=(n,e)=>{const t=Lp(c=>c.type===e)(n.selection);if(!t)return!0;const s=n.doc.resolve(t.start).after(t.depth);if(s===void 0)return!0;const l=n.doc.nodeAt(s);return t.node.type===(l==null?void 0:l.type)&&rs(n.doc,s)&&n.join(s),!0},xT=(n,e,t,s={})=>({editor:l,tr:a,state:c,dispatch:d,chain:f,commands:p,can:g})=>{const{extensions:x,splittableMarks:b}=l.extensionManager,v=gt(n,c.schema),S=gt(e,c.schema),{selection:w,storedMarks:k}=c,{$from:j,$to:D}=w,R=j.blockRange(D),O=k||w.$to.parentOffset&&w.$from.marks();if(!R)return!1;const z=Lp(H=>db(H.type.name,x))(w);if(R.depth>=1&&z&&R.depth-z.depth<=1){if(z.node.type===v)return p.liftListItem(S);if(db(z.node.type.name,x)&&v.validContent(z.node.content)&&d)return f().command(()=>(a.setNodeMarkup(z.pos,v),!0)).command(()=>oh(a,v)).command(()=>ch(a,v)).run()}return!t||!O||!d?f().command(()=>g().wrapInList(v,s)?!0:p.clearNodes()).wrapInList(v,s).command(()=>oh(a,v)).command(()=>ch(a,v)).run():f().command(()=>{const H=g().wrapInList(v,s),G=O.filter(q=>b.includes(q.type.name));return a.ensureMarks(G),H?!0:p.clearNodes()}).wrapInList(v,s).command(()=>oh(a,v)).command(()=>ch(a,v)).run()},bT=(n,e={},t={})=>({state:s,commands:l})=>{const{extendEmptyMarkRange:a=!1}=t,c=is(n,s.schema);return Vh(s,c,e)?l.unsetMark(c,{extendEmptyMarkRange:a}):l.setMark(c,e)},vT=(n,e,t={})=>({state:s,commands:l})=>{const a=gt(n,s.schema),c=gt(e,s.schema),d=Ta(s,a,t);let f;return s.selection.$anchor.sameParent(s.selection.$head)&&(f=s.selection.$anchor.parent.attrs),d?l.setNode(c,f):l.setNode(a,{...f,...t})},ST=(n,e={})=>({state:t,commands:s})=>{const l=gt(n,t.schema);return Ta(t,l,e)?s.lift(l):s.wrapIn(l,e)},NT=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let s=0;s<t.length;s+=1){const l=t[s];let a;if(l.spec.isInputRules&&(a=l.getState(n))){if(e){const c=n.tr,d=a.transform;for(let f=d.steps.length-1;f>=0;f-=1)c.step(d.steps[f].invert(d.docs[f]));if(a.text){const f=c.doc.resolve(a.from).marks();c.replaceWith(a.from,a.to,n.schema.text(a.text,f))}else c.delete(a.from,a.to)}return!0}}return!1},wT=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:s,ranges:l}=t;return s||e&&l.forEach(a=>{n.removeMark(a.$from.pos,a.$to.pos)}),!0},kT=(n,e={})=>({tr:t,state:s,dispatch:l})=>{var a;const{extendEmptyMarkRange:c=!1}=e,{selection:d}=t,f=is(n,s.schema),{$from:p,empty:g,ranges:x}=d;if(!l)return!0;if(g&&c){let{from:b,to:v}=d;const S=(a=p.marks().find(k=>k.type===f))===null||a===void 0?void 0:a.attrs,w=Dp(p,f,S);w&&(b=w.from,v=w.to),t.removeMark(b,v,f)}else x.forEach(b=>{t.removeMark(b.$from.pos,b.$to.pos,f)});return t.removeStoredMark(f),!0},CT=(n,e={})=>({tr:t,state:s,dispatch:l})=>{let a=null,c=null;const d=wu(typeof n=="string"?n:n.name,s.schema);return d?(d==="node"&&(a=gt(n,s.schema)),d==="mark"&&(c=is(n,s.schema)),l&&t.selection.ranges.forEach(f=>{const p=f.$from.pos,g=f.$to.pos;let x,b,v,S;t.selection.empty?s.doc.nodesBetween(p,g,(w,k)=>{a&&a===w.type&&(v=Math.max(k,p),S=Math.min(k+w.nodeSize,g),x=k,b=w)}):s.doc.nodesBetween(p,g,(w,k)=>{k<p&&a&&a===w.type&&(v=Math.max(k,p),S=Math.min(k+w.nodeSize,g),x=k,b=w),k>=p&&k<=g&&(a&&a===w.type&&t.setNodeMarkup(k,void 0,{...w.attrs,...e}),c&&w.marks.length&&w.marks.forEach(j=>{if(c===j.type){const D=Math.max(k,p),R=Math.min(k+w.nodeSize,g);t.addMark(D,R,c.create({...j.attrs,...e}))}}))}),b&&(x!==void 0&&t.setNodeMarkup(x,void 0,{...b.attrs,...e}),c&&b.marks.length&&b.marks.forEach(w=>{c===w.type&&t.addMark(v,S,c.create({...w.attrs,...e}))}))}),!0):!1},ET=(n,e={})=>({state:t,dispatch:s})=>{const l=gt(n,t.schema);return Hj(l,e)(t,s)},jT=(n,e={})=>({state:t,dispatch:s})=>{const l=gt(n,t.schema);return Uj(l,e)(t,s)};var AT=Object.freeze({__proto__:null,blur:oA,clearContent:cA,clearNodes:uA,command:dA,createParagraphNear:fA,cut:hA,deleteCurrentNode:pA,deleteNode:mA,deleteRange:gA,deleteSelection:yA,enter:xA,exitCode:bA,extendMarkRange:vA,first:SA,focus:wA,forEach:kA,insertContent:CA,insertContentAt:AA,joinBackward:OA,joinDown:MA,joinForward:DA,joinItemBackward:RA,joinItemForward:LA,joinTextblockBackward:zA,joinTextblockForward:BA,joinUp:TA,keyboardShortcut:HA,lift:UA,liftEmptyBlock:PA,liftListItem:IA,newlineInCode:VA,resetAttributes:qA,scrollIntoView:FA,selectAll:$A,selectNodeBackward:GA,selectNodeForward:YA,selectParentNode:KA,selectTextblockEnd:XA,selectTextblockStart:JA,setContent:QA,setMark:uT,setMeta:dT,setNode:fT,setNodeSelection:hT,setTextSelection:pT,sinkListItem:mT,splitBlock:gT,splitListItem:yT,toggleList:xT,toggleMark:bT,toggleNode:vT,toggleWrap:ST,undoInputRule:NT,unsetAllMarks:wT,unsetMark:kT,updateAttributes:CT,wrapIn:ET,wrapInList:jT});const TT=_t.create({name:"commands",addCommands(){return{...AT}}}),MT=_t.create({name:"drop",addProseMirrorPlugins(){return[new kt({key:new sn("tiptapDrop"),props:{handleDrop:(n,e,t,s)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:t,moved:s})}}})]}}),OT=_t.create({name:"editable",addProseMirrorPlugins(){return[new kt({key:new sn("editable"),props:{editable:()=>this.editor.options.editable}})]}}),DT=new sn("focusEvents"),RT=_t.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new kt({key:DT,props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const s=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(s),!1},blur:(e,t)=>{n.isFocused=!1;const s=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(s),!1}}}})]}}),LT=_t.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:c})=>[()=>c.undoInputRule(),()=>c.command(({tr:d})=>{const{selection:f,doc:p}=d,{empty:g,$anchor:x}=f,{pos:b,parent:v}=x,S=x.parent.isTextblock&&b>0?d.doc.resolve(b-1):x,w=S.parent.type.spec.isolating,k=x.pos-x.parentOffset,j=w&&S.parent.childCount===1?k===x.pos:Se.atStart(p).from===b;return!g||!v.type.isTextblock||v.textContent.length||!j||j&&x.parent.type.name==="paragraph"?!1:c.clearNodes()}),()=>c.deleteSelection(),()=>c.joinBackward(),()=>c.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:c})=>[()=>c.deleteSelection(),()=>c.deleteCurrentNode(),()=>c.joinForward(),()=>c.selectNodeForward()]),s={Enter:()=>this.editor.commands.first(({commands:c})=>[()=>c.newlineInCode(),()=>c.createParagraphNear(),()=>c.liftEmptyBlock(),()=>c.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},l={...s},a={...s,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Rp()||H1()?a:l},addProseMirrorPlugins(){return[new kt({key:new sn("clearDocument"),appendTransaction:(n,e,t)=>{if(n.some(w=>w.getMeta("composition")))return;const s=n.some(w=>w.docChanged)&&!e.doc.eq(t.doc),l=n.some(w=>w.getMeta("preventClearDocument"));if(!s||l)return;const{empty:a,from:c,to:d}=e.selection,f=Se.atStart(e.doc).from,p=Se.atEnd(e.doc).to;if(a||!(c===f&&d===p)||!Bp(t.doc))return;const b=t.tr,v=xu({state:t,transaction:b}),{commands:S}=new bu({editor:this.editor,state:v});if(S.clearNodes(),!!b.steps.length)return b}})]}}),zT=_t.create({name:"paste",addProseMirrorPlugins(){return[new kt({key:new sn("tiptapPaste"),props:{handlePaste:(n,e,t)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:t})}}})]}}),BT=_t.create({name:"tabindex",addProseMirrorPlugins(){return[new kt({key:new sn("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class As{get name(){return this.node.type.name}constructor(e,t,s=!1,l=null){this.currentNode=null,this.actualDepth=null,this.isBlock=s,this.resolvedPos=e,this.editor=t,this.currentNode=l}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let t=this.from,s=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}t=this.from+1,s=this.to-1}this.editor.commands.insertContentAt({from:t,to:s},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),t=this.resolvedPos.doc.resolve(e);return new As(t,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new As(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new As(e,this.editor)}get children(){const e=[];return this.node.content.forEach((t,s)=>{const l=t.isBlock&&!t.isTextblock,a=t.isAtom&&!t.isText,c=this.pos+s+(a?0:1),d=this.resolvedPos.doc.resolve(c);if(!l&&d.depth<=this.depth)return;const f=new As(d,this.editor,l,l?t:null);l&&(f.actualDepth=this.depth+1),e.push(new As(d,this.editor,l,l?t:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,t={}){let s=null,l=this.parent;for(;l&&!s;){if(l.node.type.name===e)if(Object.keys(t).length>0){const a=l.node.attrs,c=Object.keys(t);for(let d=0;d<c.length;d+=1){const f=c[d];if(a[f]!==t[f])break}}else s=l;l=l.parent}return s}querySelector(e,t={}){return this.querySelectorAll(e,t,!0)[0]||null}querySelectorAll(e,t={},s=!1){let l=[];if(!this.children||this.children.length===0)return l;const a=Object.keys(t);return this.children.forEach(c=>{s&&l.length>0||(c.node.type.name===e&&a.every(f=>t[f]===c.node.attrs[f])&&l.push(c),!(s&&l.length>0)&&(l=l.concat(c.querySelectorAll(e,t,s))))}),l}setAttribute(e){const{tr:t}=this.editor.state;t.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(t)}}const _T=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function HT(n,e,t){const s=document.querySelector("style[data-tiptap-style]");if(s!==null)return s;const l=document.createElement("style");return e&&l.setAttribute("nonce",e),l.setAttribute("data-tiptap-style",""),l.innerHTML=n,document.getElementsByTagName("head")[0].appendChild(l),l}class UT extends Gj{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:t})=>{throw t},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:t,slice:s,moved:l})=>this.options.onDrop(t,s,l)),this.on("paste",({event:t,slice:s})=>this.options.onPaste(t,s)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=HT(_T,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,t){const s=O1(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],l=this.state.reconfigure({plugins:s});return this.view.updateState(l),l}unregisterPlugin(e){if(this.isDestroyed)return;const t=this.state.plugins;let s=t;if([].concat(e).forEach(a=>{const c=typeof a=="string"?`${a}$`:a.key;s=s.filter(d=>!d.key.startsWith(c))}),t.length===s.length)return;const l=this.state.reconfigure({plugins:s});return this.view.updateState(l),l}createExtensionManager(){var e,t;const l=[...this.options.enableCoreExtensions?[OT,aA.configure({blockSeparator:(t=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||t===void 0?void 0:t.blockSeparator}),TT,RT,LT,BT,MT,zT].filter(a=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[a.name]!==!1:!0):[],...this.options.extensions].filter(a=>["extension","node","mark"].includes(a==null?void 0:a.type));this.extensionManager=new Ui(l,this)}createCommandManager(){this.commandManager=new bu({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let t;try{t=Ih(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(c){if(!(c instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(c.message))throw c;this.emit("contentError",{editor:this,error:c,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(d=>d.name!=="collaboration"),this.createExtensionManager()}}),t=Ih(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const s=B1(t,this.options.autofocus);this.view=new g1(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:Hi.create({doc:t,selection:s||void 0})});const l=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(l),this.createNodeViews(),this.prependClass();const a=this.view.dom;a.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(c=>{var d;return(d=this.capturedTransaction)===null||d===void 0?void 0:d.step(c)});return}const t=this.state.apply(e),s=!this.state.selection.eq(t.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e}),s&&this.emit("selectionUpdate",{editor:this,transaction:e});const l=e.getMeta("focus"),a=e.getMeta("blur");l&&this.emit("focus",{editor:this,event:l.event,transaction:e}),a&&this.emit("blur",{editor:this,event:a.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return P1(this.state,e)}isActive(e,t){const s=typeof e=="string"?e:null,l=typeof e=="string"?t:e;return aT(this.state,s,l)}getJSON(){return this.state.doc.toJSON()}getHTML(){return Mp(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:s={}}=e||{};return nT(this.state.doc,{blockSeparator:t,textSerializers:{...R1(this.schema),...s}})}get isEmpty(){return Bp(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,t){var s;return((s=this.$doc)===null||s===void 0?void 0:s.querySelector(e,t))||null}$nodes(e,t){var s;return((s=this.$doc)===null||s===void 0?void 0:s.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new As(t,this)}get $doc(){return this.$pos(0)}}function Yi(n){return new Su({find:n.find,handler:({state:e,range:t,match:s})=>{const l=Ce(n.getAttributes,void 0,s);if(l===!1||l===null)return null;const{tr:a}=e,c=s[s.length-1],d=s[0];if(c){const f=d.search(/\S/),p=t.from+d.indexOf(c),g=p+c.length;if(zp(t.from,t.to,e.doc).filter(v=>v.mark.type.excluded.find(w=>w===n.type&&w!==v.mark.type)).filter(v=>v.to>p).length)return null;g<t.to&&a.delete(g,t.to),p>t.from&&a.delete(t.from+f,p);const b=t.from+f+c.length;a.addMark(t.from+f,b,n.type.create(l||{})),a.removeStoredMark(n.type)}}})}function I1(n){return new Su({find:n.find,handler:({state:e,range:t,match:s})=>{const l=Ce(n.getAttributes,void 0,s)||{},{tr:a}=e,c=t.from;let d=t.to;const f=n.type.create(l);if(s[1]){const p=s[0].lastIndexOf(s[1]);let g=c+p;g>d?g=d:d=g+s[1].length;const x=s[0][s[0].length-1];a.insertText(x,c+s[0].length-1),a.replaceWith(g,d,f)}else if(s[0]){const p=n.type.isInline?c:c-1;a.insert(p,n.type.create(l)).delete(a.mapping.map(c),a.mapping.map(d))}a.scrollIntoView()}})}function qh(n){return new Su({find:n.find,handler:({state:e,range:t,match:s})=>{const l=e.doc.resolve(t.from),a=Ce(n.getAttributes,void 0,s)||{};if(!l.node(-1).canReplaceWith(l.index(-1),l.indexAfter(-1),n.type))return null;e.tr.delete(t.from,t.to).setBlockType(t.from,t.from,n.type,a)}})}function Ma(n){return new Su({find:n.find,handler:({state:e,range:t,match:s,chain:l})=>{const a=Ce(n.getAttributes,void 0,s)||{},c=e.tr.delete(t.from,t.to),f=c.doc.resolve(t.from).blockRange(),p=f&&pp(f,n.type,a);if(!p)return null;if(c.wrap(f,p),n.keepMarks&&n.editor){const{selection:x,storedMarks:b}=e,{splittableMarks:v}=n.editor.extensionManager,S=b||x.$to.parentOffset&&x.$from.marks();if(S){const w=S.filter(k=>v.includes(k.type.name));c.ensureMarks(w)}}if(n.keepAttributes){const x=n.type.name==="bulletList"||n.type.name==="orderedList"?"listItem":"taskList";l().updateAttributes(x,a).run()}const g=c.doc.resolve(t.from-1).nodeBefore;g&&g.type===n.type&&rs(c.doc,t.from-1)&&(!n.joinPredicate||n.joinPredicate(s,g))&&c.join(t.from-1)}})}class Ht{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Ce(oe(this,"addOptions",{name:this.name}))),this.storage=Ce(oe(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Ht(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>Nu(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new Ht(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=Ce(oe(t,"addOptions",{name:t.name})),t.storage=Ce(oe(t,"addStorage",{name:t.name,options:t.options})),t}}function qs(n){return new tA({find:n.find,handler:({state:e,range:t,match:s,pasteEvent:l})=>{const a=Ce(n.getAttributes,void 0,s,l);if(a===!1||a===null)return null;const{tr:c}=e,d=s[s.length-1],f=s[0];let p=t.to;if(d){const g=f.search(/\S/),x=t.from+f.indexOf(d),b=x+d.length;if(zp(t.from,t.to,e.doc).filter(S=>S.mark.type.excluded.find(k=>k===n.type&&k!==S.mark.type)).filter(S=>S.to>x).length)return null;b<t.to&&c.delete(b,t.to),x>t.from&&c.delete(t.from+g,x),p=t.from+g+d.length,c.addMark(t.from+g,p,n.type.create(a||{})),c.removeStoredMark(n.type)}}})}function PT(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var V1={exports:{}},uh={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hb;function IT(){if(hb)return uh;hb=1;var n=Tt;function e(x,b){return x===b&&(x!==0||1/x===1/b)||x!==x&&b!==b}var t=typeof Object.is=="function"?Object.is:e,s=n.useState,l=n.useEffect,a=n.useLayoutEffect,c=n.useDebugValue;function d(x,b){var v=b(),S=s({inst:{value:v,getSnapshot:b}}),w=S[0].inst,k=S[1];return a(function(){w.value=v,w.getSnapshot=b,f(w)&&k({inst:w})},[x,v,b]),l(function(){return f(w)&&k({inst:w}),x(function(){f(w)&&k({inst:w})})},[x]),c(v),v}function f(x){var b=x.getSnapshot;x=x.value;try{var v=b();return!t(x,v)}catch{return!0}}function p(x,b){return b()}var g=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:d;return uh.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:g,uh}V1.exports=IT();var _p=V1.exports;const VT=(...n)=>e=>{n.forEach(t=>{typeof t=="function"?t(e):t&&(t.current=e)})},qT=({contentComponent:n})=>{const e=_p.useSyncExternalStore(n.subscribe,n.getSnapshot,n.getServerSnapshot);return Tt.createElement(Tt.Fragment,null,Object.values(e))};function FT(){const n=new Set;let e={};return{subscribe(t){return n.add(t),()=>{n.delete(t)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(t,s){e={...e,[t]:ok.createPortal(s.reactElement,s.element,t)},n.forEach(l=>l())},removeRenderer(t){const s={...e};delete s[t],e=s,n.forEach(l=>l())}}}class $T extends Tt.Component{constructor(e){var t;super(e),this.editorContentRef=Tt.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(!((t=e.editor)===null||t===void 0)&&t.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const t=this.editorContentRef.current;t.append(...e.options.element.childNodes),e.setOptions({element:t}),e.contentComponent=FT(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(s=>s.hasContentComponentInitialized?s:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild))return;const t=document.createElement("div");t.append(...e.options.element.childNodes),e.setOptions({element:t})}render(){const{editor:e,innerRef:t,...s}=this.props;return Tt.createElement(Tt.Fragment,null,Tt.createElement("div",{ref:VT(t,this.editorContentRef),...s}),(e==null?void 0:e.contentComponent)&&Tt.createElement(qT,{contentComponent:e.contentComponent}))}}const GT=E.forwardRef((n,e)=>{const t=Tt.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[n.editor]);return Tt.createElement($T,{key:t,innerRef:e,...n})}),YT=Tt.memo(GT);var KT=function n(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var s,l,a;if(Array.isArray(e)){if(s=e.length,s!=t.length)return!1;for(l=s;l--!==0;)if(!n(e[l],t[l]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(l of e.entries())if(!t.has(l[0]))return!1;for(l of e.entries())if(!n(l[1],t.get(l[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(l of e.entries())if(!t.has(l[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(s=e.length,s!=t.length)return!1;for(l=s;l--!==0;)if(e[l]!==t[l])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(a=Object.keys(e),s=a.length,s!==Object.keys(t).length)return!1;for(l=s;l--!==0;)if(!Object.prototype.hasOwnProperty.call(t,a[l]))return!1;for(l=s;l--!==0;){var c=a[l];if(!(c==="_owner"&&e.$$typeof)&&!n(e[c],t[c]))return!1}return!0}return e!==e&&t!==t},XT=PT(KT),q1={exports:{}},dh={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pb;function JT(){if(pb)return dh;pb=1;var n=Tt,e=_p;function t(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var s=typeof Object.is=="function"?Object.is:t,l=e.useSyncExternalStore,a=n.useRef,c=n.useEffect,d=n.useMemo,f=n.useDebugValue;return dh.useSyncExternalStoreWithSelector=function(p,g,x,b,v){var S=a(null);if(S.current===null){var w={hasValue:!1,value:null};S.current=w}else w=S.current;S=d(function(){function j(H){if(!D){if(D=!0,R=H,H=b(H),v!==void 0&&w.hasValue){var G=w.value;if(v(G,H))return O=G}return O=H}if(G=O,s(R,H))return G;var q=b(H);return v!==void 0&&v(G,q)?G:(R=H,O=q)}var D=!1,R,O,z=x===void 0?null:x;return[function(){return j(g())},z===null?void 0:function(){return j(z())}]},[g,x,b,v]);var k=l(p,S[0],S[1]);return c(function(){w.hasValue=!0,w.value=k},[k]),f(k),k},dh}q1.exports=JT();var QT=q1.exports;const ZT=typeof window<"u"?E.useLayoutEffect:E.useEffect;class WT{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const t=()=>{this.transactionNumber+=1,this.subscribers.forEach(l=>l())},s=this.editor;return s.on("transaction",t),()=>{s.off("transaction",t)}}}}function eM(n){var e;const[t]=E.useState(()=>new WT(n.editor)),s=QT.useSyncExternalStoreWithSelector(t.subscribe,t.getSnapshot,t.getServerSnapshot,n.selector,(e=n.equalityFn)!==null&&e!==void 0?e:XT);return ZT(()=>t.watch(n.editor),[n.editor,t]),E.useDebugValue(s),s}const tM=!1,Fh=typeof window>"u",nM=Fh||!!(typeof window<"u"&&window.next);class Hp{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(t=>t())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?Fh||nM?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...s)=>{var l,a;return(a=(l=this.options.current).onBeforeCreate)===null||a===void 0?void 0:a.call(l,...s)},onBlur:(...s)=>{var l,a;return(a=(l=this.options.current).onBlur)===null||a===void 0?void 0:a.call(l,...s)},onCreate:(...s)=>{var l,a;return(a=(l=this.options.current).onCreate)===null||a===void 0?void 0:a.call(l,...s)},onDestroy:(...s)=>{var l,a;return(a=(l=this.options.current).onDestroy)===null||a===void 0?void 0:a.call(l,...s)},onFocus:(...s)=>{var l,a;return(a=(l=this.options.current).onFocus)===null||a===void 0?void 0:a.call(l,...s)},onSelectionUpdate:(...s)=>{var l,a;return(a=(l=this.options.current).onSelectionUpdate)===null||a===void 0?void 0:a.call(l,...s)},onTransaction:(...s)=>{var l,a;return(a=(l=this.options.current).onTransaction)===null||a===void 0?void 0:a.call(l,...s)},onUpdate:(...s)=>{var l,a;return(a=(l=this.options.current).onUpdate)===null||a===void 0?void 0:a.call(l,...s)},onContentError:(...s)=>{var l,a;return(a=(l=this.options.current).onContentError)===null||a===void 0?void 0:a.call(l,...s)},onDrop:(...s)=>{var l,a;return(a=(l=this.options.current).onDrop)===null||a===void 0?void 0:a.call(l,...s)},onPaste:(...s)=>{var l,a;return(a=(l=this.options.current).onPaste)===null||a===void 0?void 0:a.call(l,...s)}};return new UT(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,t){return Object.keys(e).every(s=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(s)?!0:s==="extensions"&&e.extensions&&t.extensions?e.extensions.length!==t.extensions.length?!1:e.extensions.every((l,a)=>{var c;return l===((c=t.extensions)===null||c===void 0?void 0:c[a])}):e[s]===t[s])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?Hp.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((s,l)=>s===e[l]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,t=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){t&&t.setOptions(this.options.current);return}t&&!t.isDestroyed&&(t.destroy(),this.instanceId===e&&this.setEditor(null))},1)}}function rM(n={},e=[]){const t=E.useRef(n);t.current=n;const[s]=E.useState(()=>new Hp(t)),l=_p.useSyncExternalStore(s.subscribe,s.getEditor,s.getServerSnapshot);return E.useDebugValue(l),E.useEffect(s.onRender(e)),eM({editor:l,selector:({transactionNumber:a})=>n.shouldRerenderOnTransaction===!1?null:n.immediatelyRender&&a===0?0:a+1}),l}const sM=E.createContext({editor:null});sM.Consumer;const iM=E.createContext({onDragStart:void 0}),lM=()=>E.useContext(iM);Tt.forwardRef((n,e)=>{const{onDragStart:t}=lM(),s=n.as||"div";return Tt.createElement(s,{...n,ref:e,"data-node-view-wrapper":"",onDragStart:t,style:{whiteSpace:"normal",...n.style}})});const aM=/^\s*>\s$/,oM=Ht.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:n}){return["blockquote",yt(this.options.HTMLAttributes,n),0]},addCommands(){return{setBlockquote:()=>({commands:n})=>n.wrapIn(this.name),toggleBlockquote:()=>({commands:n})=>n.toggleWrap(this.name),unsetBlockquote:()=>({commands:n})=>n.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Ma({find:aM,type:this.type})]}}),cM=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,uM=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,dM=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,fM=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,hM=fr.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:n=>n.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:n=>n.type.name===this.name},{style:"font-weight",getAttrs:n=>/^(bold(er)?|[5-9]\d{2,})$/.test(n)&&null}]},renderHTML({HTMLAttributes:n}){return["strong",yt(this.options.HTMLAttributes,n),0]},addCommands(){return{setBold:()=>({commands:n})=>n.setMark(this.name),toggleBold:()=>({commands:n})=>n.toggleMark(this.name),unsetBold:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Yi({find:cM,type:this.type}),Yi({find:dM,type:this.type})]},addPasteRules(){return[qs({find:uM,type:this.type}),qs({find:fM,type:this.type})]}}),pM="listItem",mb="textStyle",gb=/^\s*([-+*])\s$/,mM=Ht.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:n}){return["ul",yt(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleBulletList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(pM,this.editor.getAttributes(mb)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let n=Ma({find:gb,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(n=Ma({find:gb,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(mb),editor:this.editor})),[n]}}),gM=/(^|[^`])`([^`]+)`(?!`)/,yM=/(^|[^`])`([^`]+)`(?!`)/g,xM=fr.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:n}){return["code",yt(this.options.HTMLAttributes,n),0]},addCommands(){return{setCode:()=>({commands:n})=>n.setMark(this.name),toggleCode:()=>({commands:n})=>n.toggleMark(this.name),unsetCode:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Yi({find:gM,type:this.type})]},addPasteRules(){return[qs({find:yM,type:this.type})]}}),bM=/^```([a-z]+)?[\s\n]$/,vM=/^~~~([a-z]+)?[\s\n]$/,SM=Ht.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:n=>{var e;const{languageClassPrefix:t}=this.options,a=[...((e=n.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(c=>c.startsWith(t)).map(c=>c.replace(t,""))[0];return a||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:n,HTMLAttributes:e}){return["pre",yt(this.options.HTMLAttributes,e),["code",{class:n.attrs.language?this.options.languageClassPrefix+n.attrs.language:null},0]]},addCommands(){return{setCodeBlock:n=>({commands:e})=>e.setNode(this.name,n),toggleCodeBlock:n=>({commands:e})=>e.toggleNode(this.name,"paragraph",n)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:n,$anchor:e}=this.editor.state.selection,t=e.pos===1;return!n||e.parent.type.name!==this.name?!1:t||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:n})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=n,{selection:t}=e,{$from:s,empty:l}=t;if(!l||s.parent.type!==this.type)return!1;const a=s.parentOffset===s.parent.nodeSize-2,c=s.parent.textContent.endsWith(`

`);return!a||!c?!1:n.chain().command(({tr:d})=>(d.delete(s.pos-2,s.pos),!0)).exitCode().run()},ArrowDown:({editor:n})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=n,{selection:t,doc:s}=e,{$from:l,empty:a}=t;if(!a||l.parent.type!==this.type||!(l.parentOffset===l.parent.nodeSize-2))return!1;const d=l.after();return d===void 0?!1:s.nodeAt(d)?n.commands.command(({tr:p})=>(p.setSelection(Se.near(s.resolve(d))),!0)):n.commands.exitCode()}}},addInputRules(){return[qh({find:bM,type:this.type,getAttributes:n=>({language:n[1]})}),qh({find:vM,type:this.type,getAttributes:n=>({language:n[1]})})]},addProseMirrorPlugins(){return[new kt({key:new sn("codeBlockVSCodeHandler"),props:{handlePaste:(n,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const t=e.clipboardData.getData("text/plain"),s=e.clipboardData.getData("vscode-editor-data"),l=s?JSON.parse(s):void 0,a=l==null?void 0:l.mode;if(!t||!a)return!1;const{tr:c,schema:d}=n.state,f=d.text(t.replace(/\r\n?/g,`
`));return c.replaceSelectionWith(this.type.create({language:a},f)),c.selection.$from.parent.type!==this.type&&c.setSelection(be.near(c.doc.resolve(Math.max(0,c.selection.from-2)))),c.setMeta("paste",!0),n.dispatch(c),!0}}})]}}),NM=Ht.create({name:"doc",topNode:!0,content:"block+"});function wM(n={}){return new kt({view(e){return new kM(e,n)}})}class kM{constructor(e,t){var s;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(s=t.width)!==null&&s!==void 0?s:1,this.color=t.color===!1?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(l=>{let a=c=>{this[l](c)};return e.dom.addEventListener(l,a),{name:l,handler:a}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){this.cursorPos!=null&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),t=!e.parent.inlineContent,s,l=this.editorView.dom,a=l.getBoundingClientRect(),c=a.width/l.offsetWidth,d=a.height/l.offsetHeight;if(t){let x=e.nodeBefore,b=e.nodeAfter;if(x||b){let v=this.editorView.nodeDOM(this.cursorPos-(x?x.nodeSize:0));if(v){let S=v.getBoundingClientRect(),w=x?S.bottom:S.top;x&&b&&(w=(w+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let k=this.width/2*d;s={left:S.left,right:S.right,top:w-k,bottom:w+k}}}}if(!s){let x=this.editorView.coordsAtPos(this.cursorPos),b=this.width/2*c;s={left:x.left-b,right:x.left+b,top:x.top,bottom:x.bottom}}let f=this.editorView.dom.offsetParent;this.element||(this.element=f.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",t),this.element.classList.toggle("prosemirror-dropcursor-inline",!t);let p,g;if(!f||f==document.body&&getComputedStyle(f).position=="static")p=-pageXOffset,g=-pageYOffset;else{let x=f.getBoundingClientRect(),b=x.width/f.offsetWidth,v=x.height/f.offsetHeight;p=x.left-f.scrollLeft*b,g=x.top-f.scrollTop*v}this.element.style.left=(s.left-p)/c+"px",this.element.style.top=(s.top-g)/d+"px",this.element.style.width=(s.right-s.left)/c+"px",this.element.style.height=(s.bottom-s.top)/d+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),s=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),l=s&&s.type.spec.disableDropCursor,a=typeof l=="function"?l(this.editorView,t,e):l;if(t&&!a){let c=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let d=Tv(this.editorView.state.doc,c,this.editorView.dragging.slice);d!=null&&(c=d)}this.setCursor(c),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}const CM=_t.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[wM(this.options)]}});class Ze extends Se{constructor(e){super(e,e)}map(e,t){let s=e.resolve(t.map(this.head));return Ze.valid(s)?new Ze(s):Se.near(s)}content(){return se.empty}eq(e){return e instanceof Ze&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Ze(e.resolve(t.pos))}getBookmark(){return new Up(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!EM(e)||!jM(e))return!1;let s=t.type.spec.allowGapCursor;if(s!=null)return s;let l=t.contentMatchAt(e.index()).defaultType;return l&&l.isTextblock}static findGapCursorFrom(e,t,s=!1){e:for(;;){if(!s&&Ze.valid(e))return e;let l=e.pos,a=null;for(let c=e.depth;;c--){let d=e.node(c);if(t>0?e.indexAfter(c)<d.childCount:e.index(c)>0){a=d.child(t>0?e.indexAfter(c):e.index(c)-1);break}else if(c==0)return null;l+=t;let f=e.doc.resolve(l);if(Ze.valid(f))return f}for(;;){let c=t>0?a.firstChild:a.lastChild;if(!c){if(a.isAtom&&!a.isText&&!he.isSelectable(a)){e=e.doc.resolve(l+a.nodeSize*t),s=!1;continue e}break}a=c,l+=t;let d=e.doc.resolve(l);if(Ze.valid(d))return d}return null}}}Ze.prototype.visible=!1;Ze.findFrom=Ze.findGapCursorFrom;Se.jsonID("gapcursor",Ze);class Up{constructor(e){this.pos=e}map(e){return new Up(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return Ze.valid(t)?new Ze(t):Se.near(t)}}function EM(n){for(let e=n.depth;e>=0;e--){let t=n.index(e),s=n.node(e);if(t==0){if(s.type.spec.isolating)return!0;continue}for(let l=s.child(t-1);;l=l.lastChild){if(l.childCount==0&&!l.inlineContent||l.isAtom||l.type.spec.isolating)return!0;if(l.inlineContent)return!1}}return!0}function jM(n){for(let e=n.depth;e>=0;e--){let t=n.indexAfter(e),s=n.node(e);if(t==s.childCount){if(s.type.spec.isolating)return!0;continue}for(let l=s.child(t);;l=l.firstChild){if(l.childCount==0&&!l.inlineContent||l.isAtom||l.type.spec.isolating)return!0;if(l.inlineContent)return!1}}return!0}function AM(){return new kt({props:{decorations:DM,createSelectionBetween(n,e,t){return e.pos==t.pos&&Ze.valid(t)?new Ze(t):null},handleClick:MM,handleKeyDown:TM,handleDOMEvents:{beforeinput:OM}}})}const TM=y1({ArrowLeft:ac("horiz",-1),ArrowRight:ac("horiz",1),ArrowUp:ac("vert",-1),ArrowDown:ac("vert",1)});function ac(n,e){const t=n=="vert"?e>0?"down":"up":e>0?"right":"left";return function(s,l,a){let c=s.selection,d=e>0?c.$to:c.$from,f=c.empty;if(c instanceof be){if(!a.endOfTextblock(t)||d.depth==0)return!1;f=!1,d=s.doc.resolve(e>0?d.after():d.before())}let p=Ze.findGapCursorFrom(d,e,f);return p?(l&&l(s.tr.setSelection(new Ze(p))),!0):!1}}function MM(n,e,t){if(!n||!n.editable)return!1;let s=n.state.doc.resolve(e);if(!Ze.valid(s))return!1;let l=n.posAtCoords({left:t.clientX,top:t.clientY});return l&&l.inside>-1&&he.isSelectable(n.state.doc.nodeAt(l.inside))?!1:(n.dispatch(n.state.tr.setSelection(new Ze(s))),!0)}function OM(n,e){if(e.inputType!="insertCompositionText"||!(n.state.selection instanceof Ze))return!1;let{$from:t}=n.state.selection,s=t.parent.contentMatchAt(t.index()).findWrapping(n.state.schema.nodes.text);if(!s)return!1;let l=X.empty;for(let c=s.length-1;c>=0;c--)l=X.from(s[c].createAndFill(null,l));let a=n.state.tr.replace(t.pos,t.pos,new se(l,0,0));return a.setSelection(be.near(a.doc.resolve(t.pos+1))),n.dispatch(a),!1}function DM(n){if(!(n.selection instanceof Ze))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",at.create(n.doc,[bn.widget(n.selection.head,e,{key:"gapcursor"})])}const RM=_t.create({name:"gapCursor",addProseMirrorPlugins(){return[AM()]},extendNodeSchema(n){var e;const t={name:n.name,options:n.options,storage:n.storage};return{allowGapCursor:(e=Ce(oe(n,"allowGapCursor",t)))!==null&&e!==void 0?e:null}}}),LM=Ht.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:n}){return["br",yt(this.options.HTMLAttributes,n)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:n,chain:e,state:t,editor:s})=>n.first([()=>n.exitCode(),()=>n.command(()=>{const{selection:l,storedMarks:a}=t;if(l.$from.parent.type.spec.isolating)return!1;const{keepMarks:c}=this.options,{splittableMarks:d}=s.extensionManager,f=a||l.$to.parentOffset&&l.$from.marks();return e().insertContent({type:this.name}).command(({tr:p,dispatch:g})=>{if(g&&f&&c){const x=f.filter(b=>d.includes(b.type.name));p.ensureMarks(x)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),zM=Ht.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(n=>({tag:`h${n}`,attrs:{level:n}}))},renderHTML({node:n,HTMLAttributes:e}){return[`h${this.options.levels.includes(n.attrs.level)?n.attrs.level:this.options.levels[0]}`,yt(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.setNode(this.name,n):!1,toggleHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.toggleNode(this.name,"paragraph",n):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((n,e)=>({...n,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(n=>qh({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${n}})\\s$`),type:this.type,getAttributes:{level:n}}))}});var Rc=200,mt=function(){};mt.prototype.append=function(e){return e.length?(e=mt.from(e),!this.length&&e||e.length<Rc&&this.leafAppend(e)||this.length<Rc&&e.leafPrepend(this)||this.appendInner(e)):this};mt.prototype.prepend=function(e){return e.length?mt.from(e).append(this):this};mt.prototype.appendInner=function(e){return new BM(this,e)};mt.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?mt.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};mt.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};mt.prototype.forEach=function(e,t,s){t===void 0&&(t=0),s===void 0&&(s=this.length),t<=s?this.forEachInner(e,t,s,0):this.forEachInvertedInner(e,t,s,0)};mt.prototype.map=function(e,t,s){t===void 0&&(t=0),s===void 0&&(s=this.length);var l=[];return this.forEach(function(a,c){return l.push(e(a,c))},t,s),l};mt.from=function(e){return e instanceof mt?e:e&&e.length?new F1(e):mt.empty};var F1=function(n){function e(s){n.call(this),this.values=s}n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(l,a){return l==0&&a==this.length?this:new e(this.values.slice(l,a))},e.prototype.getInner=function(l){return this.values[l]},e.prototype.forEachInner=function(l,a,c,d){for(var f=a;f<c;f++)if(l(this.values[f],d+f)===!1)return!1},e.prototype.forEachInvertedInner=function(l,a,c,d){for(var f=a-1;f>=c;f--)if(l(this.values[f],d+f)===!1)return!1},e.prototype.leafAppend=function(l){if(this.length+l.length<=Rc)return new e(this.values.concat(l.flatten()))},e.prototype.leafPrepend=function(l){if(this.length+l.length<=Rc)return new e(l.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e}(mt);mt.empty=new F1([]);var BM=function(n){function e(t,s){n.call(this),this.left=t,this.right=s,this.length=t.length+s.length,this.depth=Math.max(t.depth,s.depth)+1}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(s){return s<this.left.length?this.left.get(s):this.right.get(s-this.left.length)},e.prototype.forEachInner=function(s,l,a,c){var d=this.left.length;if(l<d&&this.left.forEachInner(s,l,Math.min(a,d),c)===!1||a>d&&this.right.forEachInner(s,Math.max(l-d,0),Math.min(this.length,a)-d,c+d)===!1)return!1},e.prototype.forEachInvertedInner=function(s,l,a,c){var d=this.left.length;if(l>d&&this.right.forEachInvertedInner(s,l-d,Math.max(a,d)-d,c+d)===!1||a<d&&this.left.forEachInvertedInner(s,Math.min(l,d),a,c)===!1)return!1},e.prototype.sliceInner=function(s,l){if(s==0&&l==this.length)return this;var a=this.left.length;return l<=a?this.left.slice(s,l):s>=a?this.right.slice(s-a,l-a):this.left.slice(s,a).append(this.right.slice(0,l-a))},e.prototype.leafAppend=function(s){var l=this.right.leafAppend(s);if(l)return new e(this.left,l)},e.prototype.leafPrepend=function(s){var l=this.left.leafPrepend(s);if(l)return new e(l,this.right)},e.prototype.appendInner=function(s){return this.left.depth>=Math.max(this.right.depth,s.depth)+1?new e(this.left,new e(this.right,s)):new e(this,s)},e}(mt);const _M=500;class kn{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let s=this.items.length;for(;;s--)if(this.items.get(s-1).selection){--s;break}let l,a;t&&(l=this.remapping(s,this.items.length),a=l.maps.length);let c=e.tr,d,f,p=[],g=[];return this.items.forEach((x,b)=>{if(!x.step){l||(l=this.remapping(s,b+1),a=l.maps.length),a--,g.push(x);return}if(l){g.push(new zn(x.map));let v=x.step.map(l.slice(a)),S;v&&c.maybeStep(v).doc&&(S=c.mapping.maps[c.mapping.maps.length-1],p.push(new zn(S,void 0,void 0,p.length+g.length))),a--,S&&l.appendMap(S,a)}else c.maybeStep(x.step);if(x.selection)return d=l?x.selection.map(l.slice(a)):x.selection,f=new kn(this.items.slice(0,s).append(g.reverse().concat(p)),this.eventCount-1),!1},this.items.length,0),{remaining:f,transform:c,selection:d}}addTransform(e,t,s,l){let a=[],c=this.eventCount,d=this.items,f=!l&&d.length?d.get(d.length-1):null;for(let g=0;g<e.steps.length;g++){let x=e.steps[g].invert(e.docs[g]),b=new zn(e.mapping.maps[g],x,t),v;(v=f&&f.merge(b))&&(b=v,g?a.pop():d=d.slice(0,d.length-1)),a.push(b),t&&(c++,t=void 0),l||(f=b)}let p=c-s.depth;return p>UM&&(d=HM(d,p),c-=p),new kn(d.append(a),c)}remapping(e,t){let s=new wa;return this.items.forEach((l,a)=>{let c=l.mirrorOffset!=null&&a-l.mirrorOffset>=e?s.maps.length-l.mirrorOffset:void 0;s.appendMap(l.map,c)},e,t),s}addMaps(e){return this.eventCount==0?this:new kn(this.items.append(e.map(t=>new zn(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let s=[],l=Math.max(0,this.items.length-t),a=e.mapping,c=e.steps.length,d=this.eventCount;this.items.forEach(b=>{b.selection&&d--},l);let f=t;this.items.forEach(b=>{let v=a.getMirror(--f);if(v==null)return;c=Math.min(c,v);let S=a.maps[v];if(b.step){let w=e.steps[v].invert(e.docs[v]),k=b.selection&&b.selection.map(a.slice(f+1,v));k&&d++,s.push(new zn(S,w,k))}else s.push(new zn(S))},l);let p=[];for(let b=t;b<c;b++)p.push(new zn(a.maps[b]));let g=this.items.slice(0,l).append(p).append(s),x=new kn(g,d);return x.emptyItemCount()>_M&&(x=x.compress(this.items.length-s.length)),x}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),s=t.maps.length,l=[],a=0;return this.items.forEach((c,d)=>{if(d>=e)l.push(c),c.selection&&a++;else if(c.step){let f=c.step.map(t.slice(s)),p=f&&f.getMap();if(s--,p&&t.appendMap(p,s),f){let g=c.selection&&c.selection.map(t.slice(s));g&&a++;let x=new zn(p.invert(),f,g),b,v=l.length-1;(b=l.length&&l[v].merge(x))?l[v]=b:l.push(x)}}else c.map&&s--},this.items.length,0),new kn(mt.from(l.reverse()),a)}}kn.empty=new kn(mt.empty,0);function HM(n,e){let t;return n.forEach((s,l)=>{if(s.selection&&e--==0)return t=l,!1}),n.slice(t)}class zn{constructor(e,t,s,l){this.map=e,this.step=t,this.selection=s,this.mirrorOffset=l}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new zn(t.getMap().invert(),t,this.selection)}}}class qr{constructor(e,t,s,l,a){this.done=e,this.undone=t,this.prevRanges=s,this.prevTime=l,this.prevComposition=a}}const UM=20;function PM(n,e,t,s){let l=t.getMeta(Hs),a;if(l)return l.historyState;t.getMeta(qM)&&(n=new qr(n.done,n.undone,null,0,-1));let c=t.getMeta("appendedTransaction");if(t.steps.length==0)return n;if(c&&c.getMeta(Hs))return c.getMeta(Hs).redo?new qr(n.done.addTransform(t,void 0,s,yc(e)),n.undone,yb(t.mapping.maps),n.prevTime,n.prevComposition):new qr(n.done,n.undone.addTransform(t,void 0,s,yc(e)),null,n.prevTime,n.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(c&&c.getMeta("addToHistory")===!1)){let d=t.getMeta("composition"),f=n.prevTime==0||!c&&n.prevComposition!=d&&(n.prevTime<(t.time||0)-s.newGroupDelay||!IM(t,n.prevRanges)),p=c?fh(n.prevRanges,t.mapping):yb(t.mapping.maps);return new qr(n.done.addTransform(t,f?e.selection.getBookmark():void 0,s,yc(e)),kn.empty,p,t.time,d??n.prevComposition)}else return(a=t.getMeta("rebased"))?new qr(n.done.rebased(t,a),n.undone.rebased(t,a),fh(n.prevRanges,t.mapping),n.prevTime,n.prevComposition):new qr(n.done.addMaps(t.mapping.maps),n.undone.addMaps(t.mapping.maps),fh(n.prevRanges,t.mapping),n.prevTime,n.prevComposition)}function IM(n,e){if(!e)return!1;if(!n.docChanged)return!0;let t=!1;return n.mapping.maps[0].forEach((s,l)=>{for(let a=0;a<e.length;a+=2)s<=e[a+1]&&l>=e[a]&&(t=!0)}),t}function yb(n){let e=[];for(let t=n.length-1;t>=0&&e.length==0;t--)n[t].forEach((s,l,a,c)=>e.push(a,c));return e}function fh(n,e){if(!n)return null;let t=[];for(let s=0;s<n.length;s+=2){let l=e.map(n[s],1),a=e.map(n[s+1],-1);l<=a&&t.push(l,a)}return t}function VM(n,e,t){let s=yc(e),l=Hs.get(e).spec.config,a=(t?n.undone:n.done).popEvent(e,s);if(!a)return null;let c=a.selection.resolve(a.transform.doc),d=(t?n.done:n.undone).addTransform(a.transform,e.selection.getBookmark(),l,s),f=new qr(t?d:a.remaining,t?a.remaining:d,null,0,-1);return a.transform.setSelection(c).setMeta(Hs,{redo:t,historyState:f})}let hh=!1,xb=null;function yc(n){let e=n.plugins;if(xb!=e){hh=!1,xb=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){hh=!0;break}}return hh}const Hs=new sn("history"),qM=new sn("closeHistory");function FM(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new kt({key:Hs,state:{init(){return new qr(kn.empty,kn.empty,null,0,-1)},apply(e,t,s){return PM(t,s,e,n)}},config:n,props:{handleDOMEvents:{beforeinput(e,t){let s=t.inputType,l=s=="historyUndo"?G1:s=="historyRedo"?Y1:null;return l?(t.preventDefault(),l(e.state,e.dispatch)):!1}}}})}function $1(n,e){return(t,s)=>{let l=Hs.getState(t);if(!l||(n?l.undone:l.done).eventCount==0)return!1;if(s){let a=VM(l,t,n);a&&s(e?a.scrollIntoView():a)}return!0}}const G1=$1(!1,!0),Y1=$1(!0,!0),$M=_t.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:n,dispatch:e})=>G1(n,e),redo:()=>({state:n,dispatch:e})=>Y1(n,e)}},addProseMirrorPlugins(){return[FM(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),GM=Ht.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:n}){return["hr",yt(this.options.HTMLAttributes,n)]},addCommands(){return{setHorizontalRule:()=>({chain:n,state:e})=>{const{selection:t}=e,{$from:s,$to:l}=t,a=n();return s.parentOffset===0?a.insertContentAt({from:Math.max(s.pos-1,0),to:l.pos},{type:this.name}):oT(t)?a.insertContentAt(l.pos,{type:this.name}):a.insertContent({type:this.name}),a.command(({tr:c,dispatch:d})=>{var f;if(d){const{$to:p}=c.selection,g=p.end();if(p.nodeAfter)p.nodeAfter.isTextblock?c.setSelection(be.create(c.doc,p.pos+1)):p.nodeAfter.isBlock?c.setSelection(he.create(c.doc,p.pos)):c.setSelection(be.create(c.doc,p.pos));else{const x=(f=p.parent.type.contentMatch.defaultType)===null||f===void 0?void 0:f.create();x&&(c.insert(g,x),c.setSelection(be.create(c.doc,g+1)))}c.scrollIntoView()}return!0}).run()}}},addInputRules(){return[I1({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),YM=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,KM=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,XM=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,JM=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,QM=fr.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:n=>n.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:n=>n.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:n}){return["em",yt(this.options.HTMLAttributes,n),0]},addCommands(){return{setItalic:()=>({commands:n})=>n.setMark(this.name),toggleItalic:()=>({commands:n})=>n.toggleMark(this.name),unsetItalic:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Yi({find:YM,type:this.type}),Yi({find:XM,type:this.type})]},addPasteRules(){return[qs({find:KM,type:this.type}),qs({find:JM,type:this.type})]}}),ZM=Ht.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",yt(this.options.HTMLAttributes,n),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),WM="listItem",bb="textStyle",vb=/^(\d+)\.\s$/,e4=Ht.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:n=>n.hasAttribute("start")?parseInt(n.getAttribute("start")||"",10):1},type:{default:null,parseHTML:n=>n.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:n}){const{start:e,...t}=n;return e===1?["ol",yt(this.options.HTMLAttributes,t),0]:["ol",yt(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleOrderedList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(WM,this.editor.getAttributes(bb)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let n=Ma({find:vb,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(n=Ma({find:vb,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(bb)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[n]}}),t4=Ht.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:n}){return["p",yt(this.options.HTMLAttributes,n),0]},addCommands(){return{setParagraph:()=>({commands:n})=>n.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),n4=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,r4=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,s4=fr.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["s",yt(this.options.HTMLAttributes,n),0]},addCommands(){return{setStrike:()=>({commands:n})=>n.setMark(this.name),toggleStrike:()=>({commands:n})=>n.toggleMark(this.name),unsetStrike:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Yi({find:n4,type:this.type})]},addPasteRules(){return[qs({find:r4,type:this.type})]}}),i4=Ht.create({name:"text",group:"inline"}),l4=_t.create({name:"starterKit",addExtensions(){const n=[];return this.options.bold!==!1&&n.push(hM.configure(this.options.bold)),this.options.blockquote!==!1&&n.push(oM.configure(this.options.blockquote)),this.options.bulletList!==!1&&n.push(mM.configure(this.options.bulletList)),this.options.code!==!1&&n.push(xM.configure(this.options.code)),this.options.codeBlock!==!1&&n.push(SM.configure(this.options.codeBlock)),this.options.document!==!1&&n.push(NM.configure(this.options.document)),this.options.dropcursor!==!1&&n.push(CM.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&n.push(RM.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&n.push(LM.configure(this.options.hardBreak)),this.options.heading!==!1&&n.push(zM.configure(this.options.heading)),this.options.history!==!1&&n.push($M.configure(this.options.history)),this.options.horizontalRule!==!1&&n.push(GM.configure(this.options.horizontalRule)),this.options.italic!==!1&&n.push(QM.configure(this.options.italic)),this.options.listItem!==!1&&n.push(ZM.configure(this.options.listItem)),this.options.orderedList!==!1&&n.push(e4.configure(this.options.orderedList)),this.options.paragraph!==!1&&n.push(t4.configure(this.options.paragraph)),this.options.strike!==!1&&n.push(s4.configure(this.options.strike)),this.options.text!==!1&&n.push(i4.configure(this.options.text)),n}}),a4="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0america6xi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",o4="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",Ki=(n,e)=>{for(const t in e)n[t]=e[t];return n},$h="numeric",Gh="ascii",Yh="alpha",ha="asciinumeric",ca="alphanumeric",Kh="domain",K1="emoji",c4="scheme",u4="slashscheme",ph="whitespace";function d4(n,e){return n in e||(e[n]=[]),e[n]}function Ds(n,e,t){e[$h]&&(e[ha]=!0,e[ca]=!0),e[Gh]&&(e[ha]=!0,e[Yh]=!0),e[ha]&&(e[ca]=!0),e[Yh]&&(e[ca]=!0),e[ca]&&(e[Kh]=!0),e[K1]&&(e[Kh]=!0);for(const s in e){const l=d4(s,t);l.indexOf(n)<0&&l.push(n)}}function f4(n,e){const t={};for(const s in e)e[s].indexOf(n)>=0&&(t[s]=!0);return t}function $t(n=null){this.j={},this.jr=[],this.jd=null,this.t=n}$t.groups={};$t.prototype={accepts(){return!!this.t},go(n){const e=this,t=e.j[n];if(t)return t;for(let s=0;s<e.jr.length;s++){const l=e.jr[s][0],a=e.jr[s][1];if(a&&l.test(n))return a}return e.jd},has(n,e=!1){return e?n in this.j:!!this.go(n)},ta(n,e,t,s){for(let l=0;l<n.length;l++)this.tt(n[l],e,t,s)},tr(n,e,t,s){s=s||$t.groups;let l;return e&&e.j?l=e:(l=new $t(e),t&&s&&Ds(e,t,s)),this.jr.push([n,l]),l},ts(n,e,t,s){let l=this;const a=n.length;if(!a)return l;for(let c=0;c<a-1;c++)l=l.tt(n[c]);return l.tt(n[a-1],e,t,s)},tt(n,e,t,s){s=s||$t.groups;const l=this;if(e&&e.j)return l.j[n]=e,e;const a=e;let c,d=l.go(n);if(d?(c=new $t,Ki(c.j,d.j),c.jr.push.apply(c.jr,d.jr),c.jd=d.jd,c.t=d.t):c=new $t,a){if(s)if(c.t&&typeof c.t=="string"){const f=Ki(f4(c.t,s),t);Ds(a,f,s)}else t&&Ds(a,t,s);c.t=a}return l.j[n]=c,c}};const Ne=(n,e,t,s,l)=>n.ta(e,t,s,l),Qe=(n,e,t,s,l)=>n.tr(e,t,s,l),Sb=(n,e,t,s,l)=>n.ts(e,t,s,l),J=(n,e,t,s,l)=>n.tt(e,t,s,l),ir="WORD",Xh="UWORD",X1="ASCIINUMERICAL",J1="ALPHANUMERICAL",Oa="LOCALHOST",Jh="TLD",Qh="UTLD",xc="SCHEME",_i="SLASH_SCHEME",Pp="NUM",Zh="WS",Ip="NL",pa="OPENBRACE",ma="CLOSEBRACE",Lc="OPENBRACKET",zc="CLOSEBRACKET",Bc="OPENPAREN",_c="CLOSEPAREN",Hc="OPENANGLEBRACKET",Uc="CLOSEANGLEBRACKET",Pc="FULLWIDTHLEFTPAREN",Ic="FULLWIDTHRIGHTPAREN",Vc="LEFTCORNERBRACKET",qc="RIGHTCORNERBRACKET",Fc="LEFTWHITECORNERBRACKET",$c="RIGHTWHITECORNERBRACKET",Gc="FULLWIDTHLESSTHAN",Yc="FULLWIDTHGREATERTHAN",Kc="AMPERSAND",Xc="APOSTROPHE",Jc="ASTERISK",Fr="AT",Qc="BACKSLASH",Zc="BACKTICK",Wc="CARET",Gr="COLON",Vp="COMMA",eu="DOLLAR",Bn="DOT",tu="EQUALS",qp="EXCLAMATION",gn="HYPHEN",ga="PERCENT",nu="PIPE",ru="PLUS",su="POUND",ya="QUERY",Fp="QUOTE",Q1="FULLWIDTHMIDDLEDOT",$p="SEMI",_n="SLASH",xa="TILDE",iu="UNDERSCORE",Z1="EMOJI",lu="SYM";var W1=Object.freeze({__proto__:null,ALPHANUMERICAL:J1,AMPERSAND:Kc,APOSTROPHE:Xc,ASCIINUMERICAL:X1,ASTERISK:Jc,AT:Fr,BACKSLASH:Qc,BACKTICK:Zc,CARET:Wc,CLOSEANGLEBRACKET:Uc,CLOSEBRACE:ma,CLOSEBRACKET:zc,CLOSEPAREN:_c,COLON:Gr,COMMA:Vp,DOLLAR:eu,DOT:Bn,EMOJI:Z1,EQUALS:tu,EXCLAMATION:qp,FULLWIDTHGREATERTHAN:Yc,FULLWIDTHLEFTPAREN:Pc,FULLWIDTHLESSTHAN:Gc,FULLWIDTHMIDDLEDOT:Q1,FULLWIDTHRIGHTPAREN:Ic,HYPHEN:gn,LEFTCORNERBRACKET:Vc,LEFTWHITECORNERBRACKET:Fc,LOCALHOST:Oa,NL:Ip,NUM:Pp,OPENANGLEBRACKET:Hc,OPENBRACE:pa,OPENBRACKET:Lc,OPENPAREN:Bc,PERCENT:ga,PIPE:nu,PLUS:ru,POUND:su,QUERY:ya,QUOTE:Fp,RIGHTCORNERBRACKET:qc,RIGHTWHITECORNERBRACKET:$c,SCHEME:xc,SEMI:$p,SLASH:_n,SLASH_SCHEME:_i,SYM:lu,TILDE:xa,TLD:Jh,UNDERSCORE:iu,UTLD:Qh,UWORD:Xh,WORD:ir,WS:Zh});const rr=/[a-z]/,sa=new RegExp("\\p{L}","u"),mh=new RegExp("\\p{Emoji}","u"),sr=/\d/,gh=/\s/,Nb="\r",yh=`
`,h4="",p4="",xh="";let oc=null,cc=null;function m4(n=[]){const e={};$t.groups=e;const t=new $t;oc==null&&(oc=wb(a4)),cc==null&&(cc=wb(o4)),J(t,"'",Xc),J(t,"{",pa),J(t,"}",ma),J(t,"[",Lc),J(t,"]",zc),J(t,"(",Bc),J(t,")",_c),J(t,"<",Hc),J(t,">",Uc),J(t,"",Pc),J(t,"",Ic),J(t,"",Vc),J(t,"",qc),J(t,"",Fc),J(t,"",$c),J(t,"",Gc),J(t,"",Yc),J(t,"&",Kc),J(t,"*",Jc),J(t,"@",Fr),J(t,"`",Zc),J(t,"^",Wc),J(t,":",Gr),J(t,",",Vp),J(t,"$",eu),J(t,".",Bn),J(t,"=",tu),J(t,"!",qp),J(t,"-",gn),J(t,"%",ga),J(t,"|",nu),J(t,"+",ru),J(t,"#",su),J(t,"?",ya),J(t,'"',Fp),J(t,"/",_n),J(t,";",$p),J(t,"~",xa),J(t,"_",iu),J(t,"\\",Qc),J(t,"",Q1);const s=Qe(t,sr,Pp,{[$h]:!0});Qe(s,sr,s);const l=Qe(s,rr,X1,{[ha]:!0}),a=Qe(s,sa,J1,{[ca]:!0}),c=Qe(t,rr,ir,{[Gh]:!0});Qe(c,sr,l),Qe(c,rr,c),Qe(l,sr,l),Qe(l,rr,l);const d=Qe(t,sa,Xh,{[Yh]:!0});Qe(d,rr),Qe(d,sr,a),Qe(d,sa,d),Qe(a,sr,a),Qe(a,rr),Qe(a,sa,a);const f=J(t,yh,Ip,{[ph]:!0}),p=J(t,Nb,Zh,{[ph]:!0}),g=Qe(t,gh,Zh,{[ph]:!0});J(t,xh,g),J(p,yh,f),J(p,xh,g),Qe(p,gh,g),J(g,Nb),J(g,yh),Qe(g,gh,g),J(g,xh,g);const x=Qe(t,mh,Z1,{[K1]:!0});J(x,"#"),Qe(x,mh,x),J(x,h4,x);const b=J(x,p4);J(b,"#"),Qe(b,mh,x);const v=[[rr,c],[sr,l]],S=[[rr,null],[sa,d],[sr,a]];for(let w=0;w<oc.length;w++)Pr(t,oc[w],Jh,ir,v);for(let w=0;w<cc.length;w++)Pr(t,cc[w],Qh,Xh,S);Ds(Jh,{tld:!0,ascii:!0},e),Ds(Qh,{utld:!0,alpha:!0},e),Pr(t,"file",xc,ir,v),Pr(t,"mailto",xc,ir,v),Pr(t,"http",_i,ir,v),Pr(t,"https",_i,ir,v),Pr(t,"ftp",_i,ir,v),Pr(t,"ftps",_i,ir,v),Ds(xc,{scheme:!0,ascii:!0},e),Ds(_i,{slashscheme:!0,ascii:!0},e),n=n.sort((w,k)=>w[0]>k[0]?1:-1);for(let w=0;w<n.length;w++){const k=n[w][0],D=n[w][1]?{[c4]:!0}:{[u4]:!0};k.indexOf("-")>=0?D[Kh]=!0:rr.test(k)?sr.test(k)?D[ha]=!0:D[Gh]=!0:D[$h]=!0,Sb(t,k,k,D)}return Sb(t,"localhost",Oa,{ascii:!0}),t.jd=new $t(lu),{start:t,tokens:Ki({groups:e},W1)}}function eS(n,e){const t=g4(e.replace(/[A-Z]/g,d=>d.toLowerCase())),s=t.length,l=[];let a=0,c=0;for(;c<s;){let d=n,f=null,p=0,g=null,x=-1,b=-1;for(;c<s&&(f=d.go(t[c]));)d=f,d.accepts()?(x=0,b=0,g=d):x>=0&&(x+=t[c].length,b++),p+=t[c].length,a+=t[c].length,c++;a-=x,c-=b,p-=x,l.push({t:g.t,v:e.slice(a-p,a),s:a-p,e:a})}return l}function g4(n){const e=[],t=n.length;let s=0;for(;s<t;){let l=n.charCodeAt(s),a,c=l<55296||l>56319||s+1===t||(a=n.charCodeAt(s+1))<56320||a>57343?n[s]:n.slice(s,s+2);e.push(c),s+=c.length}return e}function Pr(n,e,t,s,l){let a;const c=e.length;for(let d=0;d<c-1;d++){const f=e[d];n.j[f]?a=n.j[f]:(a=new $t(s),a.jr=l.slice(),n.j[f]=a),n=a}return a=new $t(t),a.jr=l.slice(),n.j[e[c-1]]=a,a}function wb(n){const e=[],t=[];let s=0,l="0123456789";for(;s<n.length;){let a=0;for(;l.indexOf(n[s+a])>=0;)a++;if(a>0){e.push(t.join(""));for(let c=parseInt(n.substring(s,s+a),10);c>0;c--)t.pop();s+=a}else t.push(n[s]),s++}return e}const Da={defaultProtocol:"http",events:null,format:kb,formatHref:kb,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function Gp(n,e=null){let t=Ki({},Da);n&&(t=Ki(t,n instanceof Gp?n.o:n));const s=t.ignoreTags,l=[];for(let a=0;a<s.length;a++)l.push(s[a].toUpperCase());this.o=t,e&&(this.defaultRender=e),this.ignoreTags=l}Gp.prototype={o:Da,ignoreTags:[],defaultRender(n){return n},check(n){return this.get("validate",n.toString(),n)},get(n,e,t){const s=e!=null;let l=this.o[n];return l&&(typeof l=="object"?(l=t.t in l?l[t.t]:Da[n],typeof l=="function"&&s&&(l=l(e,t))):typeof l=="function"&&s&&(l=l(e,t.t,t)),l)},getObj(n,e,t){let s=this.o[n];return typeof s=="function"&&e!=null&&(s=s(e,t.t,t)),s},render(n){const e=n.render(this);return(this.get("render",null,n)||this.defaultRender)(e,n.t,n)}};function kb(n){return n}function tS(n,e){this.t="token",this.v=n,this.tk=e}tS.prototype={isLink:!1,toString(){return this.v},toHref(n){return this.toString()},toFormattedString(n){const e=this.toString(),t=n.get("truncate",e,this),s=n.get("format",e,this);return t&&s.length>t?s.substring(0,t)+"":s},toFormattedHref(n){return n.get("formatHref",this.toHref(n.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(n=Da.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(n),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(n){return{type:this.t,value:this.toFormattedString(n),isLink:this.isLink,href:this.toFormattedHref(n),start:this.startIndex(),end:this.endIndex()}},validate(n){return n.get("validate",this.toString(),this)},render(n){const e=this,t=this.toHref(n.get("defaultProtocol")),s=n.get("formatHref",t,this),l=n.get("tagName",t,e),a=this.toFormattedString(n),c={},d=n.get("className",t,e),f=n.get("target",t,e),p=n.get("rel",t,e),g=n.getObj("attributes",t,e),x=n.getObj("events",t,e);return c.href=s,d&&(c.class=d),f&&(c.target=f),p&&(c.rel=p),g&&Ki(c,g),{tagName:l,attributes:c,content:a,eventListeners:x}}};function ku(n,e){class t extends tS{constructor(l,a){super(l,a),this.t=n}}for(const s in e)t.prototype[s]=e[s];return t.t=n,t}const Cb=ku("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),Eb=ku("text"),y4=ku("nl"),uc=ku("url",{isLink:!0,toHref(n=Da.defaultProtocol){return this.hasProtocol()?this.v:`${n}://${this.v}`},hasProtocol(){const n=this.tk;return n.length>=2&&n[0].t!==Oa&&n[1].t===Gr}}),mn=n=>new $t(n);function x4({groups:n}){const e=n.domain.concat([Kc,Jc,Fr,Qc,Zc,Wc,eu,tu,gn,Pp,ga,nu,ru,su,_n,lu,xa,iu]),t=[Xc,Gr,Vp,Bn,qp,ga,ya,Fp,$p,Hc,Uc,pa,ma,zc,Lc,Bc,_c,Pc,Ic,Vc,qc,Fc,$c,Gc,Yc],s=[Kc,Xc,Jc,Qc,Zc,Wc,eu,tu,gn,pa,ma,ga,nu,ru,su,ya,_n,lu,xa,iu],l=mn(),a=J(l,xa);Ne(a,s,a),Ne(a,n.domain,a);const c=mn(),d=mn(),f=mn();Ne(l,n.domain,c),Ne(l,n.scheme,d),Ne(l,n.slashscheme,f),Ne(c,s,a),Ne(c,n.domain,c);const p=J(c,Fr);J(a,Fr,p),J(d,Fr,p),J(f,Fr,p);const g=J(a,Bn);Ne(g,s,a),Ne(g,n.domain,a);const x=mn();Ne(p,n.domain,x),Ne(x,n.domain,x);const b=J(x,Bn);Ne(b,n.domain,x);const v=mn(Cb);Ne(b,n.tld,v),Ne(b,n.utld,v),J(p,Oa,v);const S=J(x,gn);J(S,gn,S),Ne(S,n.domain,x),Ne(v,n.domain,x),J(v,Bn,b),J(v,gn,S);const w=J(v,Gr);Ne(w,n.numeric,Cb);const k=J(c,gn),j=J(c,Bn);J(k,gn,k),Ne(k,n.domain,c),Ne(j,s,a),Ne(j,n.domain,c);const D=mn(uc);Ne(j,n.tld,D),Ne(j,n.utld,D),Ne(D,n.domain,c),Ne(D,s,a),J(D,Bn,j),J(D,gn,k),J(D,Fr,p);const R=J(D,Gr),O=mn(uc);Ne(R,n.numeric,O);const z=mn(uc),H=mn();Ne(z,e,z),Ne(z,t,H),Ne(H,e,z),Ne(H,t,H),J(D,_n,z),J(O,_n,z);const G=J(d,Gr),q=J(f,Gr),ne=J(q,_n),fe=J(ne,_n);Ne(d,n.domain,c),J(d,Bn,j),J(d,gn,k),Ne(f,n.domain,c),J(f,Bn,j),J(f,gn,k),Ne(G,n.domain,z),J(G,_n,z),J(G,ya,z),Ne(fe,n.domain,z),Ne(fe,e,z),J(fe,_n,z);const ue=[[pa,ma],[Lc,zc],[Bc,_c],[Hc,Uc],[Pc,Ic],[Vc,qc],[Fc,$c],[Gc,Yc]];for(let te=0;te<ue.length;te++){const[le,Me]=ue[te],xe=J(z,le);J(H,le,xe),J(xe,Me,z);const V=mn(uc);Ne(xe,e,V);const W=mn();Ne(xe,t),Ne(V,e,V),Ne(V,t,W),Ne(W,e,V),Ne(W,t,W),J(V,Me,z),J(W,Me,z)}return J(l,Oa,D),J(l,Ip,y4),{start:l,tokens:W1}}function b4(n,e,t){let s=t.length,l=0,a=[],c=[];for(;l<s;){let d=n,f=null,p=null,g=0,x=null,b=-1;for(;l<s&&!(f=d.go(t[l].t));)c.push(t[l++]);for(;l<s&&(p=f||d.go(t[l].t));)f=null,d=p,d.accepts()?(b=0,x=d):b>=0&&b++,l++,g++;if(b<0)l-=g,l<s&&(c.push(t[l]),l++);else{c.length>0&&(a.push(bh(Eb,e,c)),c=[]),l-=b,g-=b;const v=x.t,S=t.slice(l-g,l);a.push(bh(v,e,S))}}return c.length>0&&a.push(bh(Eb,e,c)),a}function bh(n,e,t){const s=t[0].s,l=t[t.length-1].e,a=e.slice(s,l);return new n(a,t)}const v4=typeof console<"u"&&console&&console.warn||(()=>{}),S4="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Fe={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function N4(){return $t.groups={},Fe.scanner=null,Fe.parser=null,Fe.tokenQueue=[],Fe.pluginQueue=[],Fe.customSchemes=[],Fe.initialized=!1,Fe}function jb(n,e=!1){if(Fe.initialized&&v4(`linkifyjs: already initialized - will not register custom scheme "${n}" ${S4}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(n))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);Fe.customSchemes.push([n,e])}function w4(){Fe.scanner=m4(Fe.customSchemes);for(let n=0;n<Fe.tokenQueue.length;n++)Fe.tokenQueue[n][1]({scanner:Fe.scanner});Fe.parser=x4(Fe.scanner.tokens);for(let n=0;n<Fe.pluginQueue.length;n++)Fe.pluginQueue[n][1]({scanner:Fe.scanner,parser:Fe.parser});return Fe.initialized=!0,Fe}function Yp(n){return Fe.initialized||w4(),b4(Fe.parser.start,n,eS(Fe.scanner.start,n))}Yp.scan=eS;function nS(n,e=null,t=null){if(e&&typeof e=="object"){if(t)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);t=e,e=null}const s=new Gp(t),l=Yp(n),a=[];for(let c=0;c<l.length;c++){const d=l[c];d.isLink&&(!e||d.t===e)&&s.check(d)&&a.push(d.toFormattedObject(s))}return a}function k4(n){return n.length===1?n[0].isLink:n.length===3&&n[1].isLink?["()","[]"].includes(n[0].value+n[2].value):!1}function C4(n){return new kt({key:new sn("autolink"),appendTransaction:(e,t,s)=>{const l=e.some(p=>p.docChanged)&&!t.doc.eq(s.doc),a=e.some(p=>p.getMeta("preventAutolink"));if(!l||a)return;const{tr:c}=s,d=ZA(t.doc,[...e]);if(lT(d).forEach(({newRange:p})=>{const g=eT(s.doc,p,v=>v.isTextblock);let x,b;if(g.length>1?(x=g[0],b=s.doc.textBetween(x.pos,x.pos+x.node.nodeSize,void 0," ")):g.length&&s.doc.textBetween(p.from,p.to," "," ").endsWith(" ")&&(x=g[0],b=s.doc.textBetween(x.pos,p.to,void 0," ")),x&&b){const v=b.split(" ").filter(j=>j!=="");if(v.length<=0)return!1;const S=v[v.length-1],w=x.pos+b.lastIndexOf(S);if(!S)return!1;const k=Yp(S).map(j=>j.toObject(n.defaultProtocol));if(!k4(k))return!1;k.filter(j=>j.isLink).map(j=>({...j,from:w+j.start+1,to:w+j.end+1})).filter(j=>s.schema.marks.code?!s.doc.rangeHasMark(j.from,j.to,s.schema.marks.code):!0).filter(j=>n.validate(j.value)).filter(j=>n.shouldAutoLink(j.value)).forEach(j=>{zp(j.from,j.to,s.doc).some(D=>D.mark.type===n.type)||c.addMark(j.from,j.to,n.type.create({href:j.href}))})}}),!!c.steps.length)return c}})}function E4(n){return new kt({key:new sn("handleClickLink"),props:{handleClick:(e,t,s)=>{var l,a;if(s.button!==0||!e.editable)return!1;let c=s.target;const d=[];for(;c.nodeName!=="DIV";)d.push(c),c=c.parentNode;if(!d.find(b=>b.nodeName==="A"))return!1;const f=P1(e.state,n.type.name),p=s.target,g=(l=p==null?void 0:p.href)!==null&&l!==void 0?l:f.href,x=(a=p==null?void 0:p.target)!==null&&a!==void 0?a:f.target;return p&&g?(window.open(g,x),!0):!1}}})}function j4(n){return new kt({key:new sn("handlePasteLink"),props:{handlePaste:(e,t,s)=>{const{state:l}=e,{selection:a}=l,{empty:c}=a;if(c)return!1;let d="";s.content.forEach(p=>{d+=p.textContent});const f=nS(d,{defaultProtocol:n.defaultProtocol}).find(p=>p.isLink&&p.value===d);return!d||!f?!1:n.editor.commands.setMark(n.type,{href:f.href})}}})}const A4=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g;function Cs(n,e){const t=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(s=>{const l=typeof s=="string"?s:s.scheme;l&&t.push(l)}),!n||n.replace(A4,"").match(new RegExp(`^(?:(?:${t.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}const T4=fr.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(n=>{if(typeof n=="string"){jb(n);return}jb(n.scheme,n.optionalSlashes)})},onDestroy(){N4()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(n,e)=>!!Cs(n,e.protocols),validate:n=>!!n,shouldAutoLink:n=>!!n}},addAttributes(){return{href:{default:null,parseHTML(n){return n.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:n=>{const e=n.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:t=>!!Cs(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:n}){return this.options.isAllowedUri(n.href,{defaultValidate:e=>!!Cs(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",yt(this.options.HTMLAttributes,n),0]:["a",yt(this.options.HTMLAttributes,{...n,href:""}),0]},addCommands(){return{setLink:n=>({chain:e})=>{const{href:t}=n;return this.options.isAllowedUri(t,{defaultValidate:s=>!!Cs(s,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,n).setMeta("preventAutolink",!0).run():!1},toggleLink:n=>({chain:e})=>{const{href:t}=n;return this.options.isAllowedUri(t,{defaultValidate:s=>!!Cs(s,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().toggleMark(this.name,n,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run():!1},unsetLink:()=>({chain:n})=>n().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[qs({find:n=>{const e=[];if(n){const{protocols:t,defaultProtocol:s}=this.options,l=nS(n).filter(a=>a.isLink&&this.options.isAllowedUri(a.value,{defaultValidate:c=>!!Cs(c,t),protocols:t,defaultProtocol:s}));l.length&&l.forEach(a=>e.push({text:a.value,data:{href:a.href},index:a.start}))}return e},type:this.type,getAttributes:n=>{var e;return{href:(e=n.data)===null||e===void 0?void 0:e.href}}})]},addProseMirrorPlugins(){const n=[],{protocols:e,defaultProtocol:t}=this.options;return this.options.autolink&&n.push(C4({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:s=>this.options.isAllowedUri(s,{defaultValidate:l=>!!Cs(l,e),protocols:e,defaultProtocol:t}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&n.push(E4({type:this.type})),this.options.linkOnPaste&&n.push(j4({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),n}}),M4=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,O4=Ht.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{}}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:n}){return["img",yt(this.options.HTMLAttributes,n)]},addCommands(){return{setImage:n=>({commands:e})=>e.insertContent({type:this.name,attrs:n})}},addInputRules(){return[I1({find:M4,type:this.type,getAttributes:n=>{const[,,e,t,s]=n;return{src:t,alt:e,title:s}}})]}}),au=({value:n,onChange:e})=>{const t=rM({extensions:[l4.configure({heading:{levels:[1,2,3]}}),T4.configure({openOnClick:!1,HTMLAttributes:{class:"text-blue-600 hover:underline"}}),O4.configure({HTMLAttributes:{class:"max-w-full h-auto rounded"},allowBase64:!0})],content:n||"",editorProps:{attributes:{class:"prose prose-sm max-w-none focus:outline-none min-h-[150px] p-4"},handlePaste:(s,l)=>{var d;console.log("handlePaste",s);const c=Array.from(((d=l.clipboardData)==null?void 0:d.items)||[]).find(f=>f.type.startsWith("image/"));if(c){l.preventDefault();const f=c.getAsFile();if(!f)return!1;const p=new FileReader;return p.onload=g=>{var b;const x=(b=g.target)==null?void 0:b.result;x&&(t==null||t.chain().focus().setImage({src:x}).run())},p.readAsDataURL(f),!0}return!1}}});return E.useEffect(()=>{t&&n!==void 0&&t.getHTML()!==n&&t.commands.setContent(n||"",!1)},[n,t]),E.useEffect(()=>{t&&t.on("update",()=>{const s=t.getHTML();s!==n&&e(s)})},[t,e,n]),t?h.jsxs("div",{className:"border border-gray-300 rounded-md shadow-sm",children:[h.jsxs("div",{className:"flex gap-1 p-1 border-b border-gray-300",children:[h.jsx("button",{onClick:()=>t.chain().focus().toggleBold().run(),className:`p-1 rounded ${t.isActive("bold")?"bg-gray-200":"hover:bg-gray-100"}`,title:"Bold",children:h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M6 4h8a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"}),h.jsx("path",{d:"M6 12h9a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"})]})}),h.jsx("button",{onClick:()=>t.chain().focus().toggleItalic().run(),className:`p-1 rounded ${t.isActive("italic")?"bg-gray-200":"hover:bg-gray-100"}`,title:"Italic",children:h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("line",{x1:"19",y1:"4",x2:"10",y2:"4"}),h.jsx("line",{x1:"14",y1:"20",x2:"5",y2:"20"}),h.jsx("line",{x1:"15",y1:"4",x2:"9",y2:"20"})]})}),h.jsx("button",{onClick:()=>t.chain().focus().toggleBulletList().run(),className:`p-1 rounded ${t.isActive("bulletList")?"bg-gray-200":"hover:bg-gray-100"}`,title:"Bullet List",children:h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("line",{x1:"8",y1:"6",x2:"21",y2:"6"}),h.jsx("line",{x1:"8",y1:"12",x2:"21",y2:"12"}),h.jsx("line",{x1:"8",y1:"18",x2:"21",y2:"18"}),h.jsx("line",{x1:"3",y1:"6",x2:"3.01",y2:"6"}),h.jsx("line",{x1:"3",y1:"12",x2:"3.01",y2:"12"}),h.jsx("line",{x1:"3",y1:"18",x2:"3.01",y2:"18"})]})}),h.jsx("button",{onClick:()=>t.chain().focus().toggleOrderedList().run(),className:`p-1 rounded ${t.isActive("orderedList")?"bg-gray-200":"hover:bg-gray-100"}`,title:"Ordered List",children:h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("line",{x1:"10",y1:"6",x2:"21",y2:"6"}),h.jsx("line",{x1:"10",y1:"12",x2:"21",y2:"12"}),h.jsx("line",{x1:"10",y1:"18",x2:"21",y2:"18"}),h.jsx("path",{d:"M4 6h1v4"}),h.jsx("path",{d:"M4 10h2"}),h.jsx("path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1"})]})}),h.jsx("button",{onClick:()=>{const s=window.prompt("Enter the URL");s&&t.chain().focus().setLink({href:s}).run()},className:`p-1 rounded ${t.isActive("link")?"bg-gray-200":"hover:bg-gray-100"}`,title:"Add Link",children:h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}),h.jsx("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"})]})}),h.jsx("button",{onClick:()=>{const s=window.prompt("Enter the image URL");s&&t.chain().focus().setImage({src:s}).run()},className:"p-1 rounded hover:bg-gray-100",title:"Add Image",children:h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),h.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),h.jsx("polyline",{points:"21 15 16 10 5 21"})]})})]}),h.jsx(YT,{editor:t})]}):null},D4=({onSuccess:n,onError:e})=>{const{token:t}=st(),[s,l]=E.useState(80),[a,c]=E.useState(120),[d,f]=E.useState(0),[p,g]=E.useState(30),[x,b]=E.useState(5e3),[v,S]=E.useState([]),[w,k]=E.useState(!1),[j,D]=E.useState(null),[R,O]=E.useState({image:null,title:"",subtitle:"",link:"",order:0,is_active:!0}),[z,H]=E.useState({}),[G,q]=E.useState({message:"",type:"success",visible:!1}),[ne,fe]=E.useState(!0),[ue,te]=E.useState(!1),le=E.useRef(null),[Me,xe]=E.useState(""),[V,W]=E.useState(""),re=(K,ie)=>{q({message:K,type:ie,visible:!0}),ie==="success"&&n&&n(K),ie==="error"&&e&&e(K)},Oe=async()=>{fe(!0);try{if(!t)return;const K=await wh.getAllSettings(t),ie=K.find(Dt=>Dt.key==="delivery_fee_ncr"),Q=K.find(Dt=>Dt.key==="delivery_fee_outside_ncr"),Ye=K.find(Dt=>Dt.key==="free_delivery_threshold"),Pe=K.find(Dt=>Dt.key==="payment_options_description"),Ut=K.find(Dt=>Dt.key==="what_happens_after_payment"),mr=K.find(Dt=>Dt.key==="product_hold_duration");ie&&l(parseInt(ie.value)),Q&&c(parseInt(Q.value)),Ye&&f(parseInt(Ye.value)),Pe&&xe(Pe.value||""),Ut&&W(Ut.value||""),mr&&g(parseInt(mr.value));const $s=await ia.getAll(t);S($s.data.carousels),b($s.data.interval)}catch{re("Failed to load settings","error")}finally{fe(!1)}};E.useEffect(()=>{Oe()},[t]);const T=async K=>{if(K.preventDefault(),!!t){te(!0);try{await wh.updateMultipleSettings(t,[{key:"delivery_fee_ncr",value:s},{key:"delivery_fee_outside_ncr",value:a},{key:"free_delivery_threshold",value:d},{key:"hero_carousel_interval",value:x},{key:"payment_options_description",value:Me},{key:"what_happens_after_payment",value:V},{key:"product_hold_duration",value:p}]),re("Settings updated successfully.","success")}catch{re("Failed to update settings.","error")}finally{te(!1)}}},P=K=>{D(K),O({...K,image:null}),k(!0)},ee=async K=>{if(t&&window.confirm("Delete this slide?"))try{await ia.delete(t,K),re("Slide deleted successfully.","success"),Oe()}catch{re("Failed to delete slide.","error")}},Z=K=>{const{name:ie,value:Q,type:Ye}=K.target;let Pe=Q;Ye==="checkbox"&&K.target instanceof HTMLInputElement&&(Pe=K.target.checked),O(Ut=>({...Ut,[ie]:Pe}))},de=K=>{K.target.files&&K.target.files[0]&&O(ie=>({...ie,image:K.target.files[0]}))},Te=async K=>{if(K.preventDefault(),!t)return;H({});const ie=new FormData;R.image&&ie.append("image",R.image),ie.append("title",R.title||""),ie.append("subtitle",R.subtitle||""),ie.append("link",R.link||""),ie.append("order",String(R.order||0)),ie.append("is_active",R.is_active?"1":"0");try{j?(await ia.update(t,j.id,ie),re("Slide updated successfully.","success")):(await ia.create(t,ie),re("Slide created successfully.","success")),k(!1),D(null),O({image:null,title:"",subtitle:"",link:"",order:0,is_active:!0}),Oe()}catch(Q){console.log(Q),Q&&Q.message&&Q.message.includes("422")?Q.response&&Q.response.errors?H(Q.response.errors):Q.errors?H(Q.errors):re("Validation error. Please check your input.","error"):Q&&Q.errors?(H(Q.errors),re("Validation error. Please check your input.","error")):re(Q.message||"Failed to save.","error")}};return ne?h.jsx("div",{className:"p-4",children:"Loading settings..."}):h.jsxs("div",{className:"bg-white p-6 rounded shadow",children:[h.jsx(Ik,{message:G.message,type:G.type,isVisible:G.visible,onClose:()=>q(K=>({...K,visible:!1}))}),h.jsx("h2",{className:"text-xl font-medium mb-6",children:"Shop Settings"}),h.jsxs("form",{onSubmit:T,children:[h.jsxs("div",{className:"mb-4",children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Hold Duration (minutes)"}),h.jsx("input",{type:"number",min:1,step:1,value:p,onChange:K=>g(parseInt(K.target.value)||30),className:"w-full border-gray-300 rounded-md shadow-sm p-2 border",required:!0}),h.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"How long a product will be held for a customer during checkout before being released back to available status."})]}),h.jsxs("div",{className:"mb-4",children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Standard Delivery Fee Within NCR ()"}),h.jsx("input",{type:"number",min:0,step:1,value:s,onChange:K=>l(parseInt(K.target.value)||0),className:"w-full border-gray-300 rounded-md shadow-sm p-2 border",required:!0}),h.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"The standard delivery fee for addresses within NCR."})]}),h.jsxs("div",{className:"mb-4",children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Standard Delivery Fee Outside NCR ()"}),h.jsx("input",{type:"number",min:0,step:1,value:a,onChange:K=>c(parseInt(K.target.value)||0),className:"w-full border-gray-300 rounded-md shadow-sm p-2 border",required:!0}),h.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"The standard delivery fee for addresses outside NCR."})]}),h.jsxs("div",{className:"mb-4",children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Free Delivery Threshold ()"}),h.jsx("input",{type:"number",min:0,step:1,value:d,onChange:K=>f(parseInt(K.target.value)||0),className:"w-full border-gray-300 rounded-md shadow-sm p-2 border"}),h.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Orders above this amount will qualify for free delivery. Set to 0 to disable free delivery."})]}),h.jsxs("div",{className:"mb-6",children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Options Description"}),h.jsx(au,{value:Me,onChange:xe}),h.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"This description will be shown to customers at checkout. You can use formatting, links, and images."})]}),h.jsxs("div",{className:"mb-6",children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"What Happens After Payment"}),h.jsx(au,{value:V,onChange:W}),h.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"This description will be shown to customers after they place an order. You can use formatting, links, and images."})]}),h.jsxs("div",{className:"mb-6",children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hero Carousel Image Change Interval (ms)"}),h.jsx("input",{type:"number",min:1e3,step:100,value:x,onChange:K=>b(parseInt(K.target.value,10)),className:"w-40 border-gray-300 rounded-md shadow-sm p-2 border"})]}),h.jsx("div",{className:"flex justify-end",children:h.jsx("button",{type:"submit",disabled:ue,className:"bg-black text-white px-4 py-2 rounded hover:bg-gray-800 disabled:bg-gray-400",children:ue?"Saving...":"Save Settings"})})]}),h.jsxs("div",{className:"mt-10",children:[h.jsxs("div",{className:"flex justify-between items-center mb-4",children:[h.jsx("h3",{className:"text-lg font-semibold",children:"Hero Carousel Slides"}),h.jsx("button",{className:"bg-black text-white px-4 py-2 rounded hover:bg-gray-800",onClick:()=>{k(!0),D(null),O({image:null,title:"",subtitle:"",link:"",order:0,is_active:!0})},children:"Add Slide"})]}),h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"min-w-full divide-y divide-gray-200 mb-6",children:[h.jsx("thead",{className:"bg-gray-50",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-4 py-2",children:"Image"}),h.jsx("th",{className:"px-4 py-2",children:"Title"}),h.jsx("th",{className:"px-4 py-2",children:"Subtitle"}),h.jsx("th",{className:"px-4 py-2",children:"Link"}),h.jsx("th",{className:"px-4 py-2",children:"Order"}),h.jsx("th",{className:"px-4 py-2",children:"Active"}),h.jsx("th",{className:"px-4 py-2",children:"Actions"})]})}),h.jsx("tbody",{children:v.map(K=>h.jsxs("tr",{className:"border-b",children:[h.jsx("td",{className:"px-4 py-2",children:K.image_url&&h.jsx("img",{src:K.image_url,alt:"",className:"h-16 w-32 object-cover rounded"})}),h.jsx("td",{className:"px-4 py-2",children:K.title}),h.jsx("td",{className:"px-4 py-2",children:K.subtitle}),h.jsx("td",{className:"px-4 py-2",children:K.link}),h.jsx("td",{className:"px-4 py-2",children:K.order}),h.jsx("td",{className:"px-4 py-2",children:K.is_active?"Yes":"No"}),h.jsxs("td",{className:"px-4 py-2 space-x-2",children:[h.jsx("button",{className:"text-blue-600 hover:underline",onClick:()=>P(K),children:"Edit"}),h.jsx("button",{className:"text-red-600 hover:underline",onClick:()=>ee(K.id),children:"Delete"})]})]},K.id))})]})})]}),h.jsx(Vk,{isOpen:w,onClose:()=>{k(!1),D(null),H({})},title:j?"Edit Slide":"Add Slide",children:h.jsxs("form",{onSubmit:Te,className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Image"}),h.jsx("input",{type:"file",accept:"image/*",onChange:de,ref:le}),R.image&&h.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Selected: ",R.image.name]}),!R.image&&R.image_url&&h.jsx("img",{src:R.image_url,alt:"",className:"h-16 w-32 object-cover rounded mt-2"}),z.image&&h.jsx("div",{className:"text-red-600 text-xs mt-1",children:z.image.join(", ")})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Title"}),h.jsx("input",{type:"text",name:"title",value:R.title||"",onChange:Z,className:"w-full border-gray-300 rounded-md shadow-sm p-2 border"}),z.title&&h.jsx("div",{className:"text-red-600 text-xs mt-1",children:z.title.join(", ")})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Subtitle"}),h.jsx("input",{type:"text",name:"subtitle",value:R.subtitle||"",onChange:Z,className:"w-full border-gray-300 rounded-md shadow-sm p-2 border"}),z.subtitle&&h.jsx("div",{className:"text-red-600 text-xs mt-1",children:z.subtitle.join(", ")})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Link"}),h.jsx("input",{type:"text",name:"link",value:R.link||"",onChange:Z,className:"w-full border-gray-300 rounded-md shadow-sm p-2 border"}),z.link&&h.jsx("div",{className:"text-red-600 text-xs mt-1",children:z.link.join(", ")})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Order"}),h.jsx("input",{type:"number",name:"order",value:R.order||0,onChange:Z,className:"w-full border-gray-300 rounded-md shadow-sm p-2 border"}),z.order&&h.jsx("div",{className:"text-red-600 text-xs mt-1",children:z.order.join(", ")})]}),h.jsxs("div",{children:[h.jsxs("label",{className:"inline-flex items-center",children:[h.jsx("input",{type:"checkbox",name:"is_active",checked:!!R.is_active,onChange:Z,className:"mr-2"}),"Active"]}),z.is_active&&h.jsx("div",{className:"text-red-600 text-xs mt-1",children:z.is_active.join(", ")})]}),h.jsxs("div",{className:"flex space-x-2",children:[h.jsx("button",{type:"submit",className:"bg-black text-white px-4 py-2 rounded hover:bg-gray-800",children:j?"Update":"Create"}),h.jsx("button",{type:"button",className:"bg-gray-200 text-gray-700 px-4 py-2 rounded",onClick:()=>{k(!1),D(null),H({})},children:"Cancel"})]})]})})]})},R4=({user:n,isOpen:e,onClose:t,onSubmit:s,isLoading:l,error:a})=>{const[c,d]=E.useState(""),[f,p]=E.useState("");return E.useEffect(()=>{d(""),p("")},[e,n]),!e||!n?null:h.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:h.jsxs("div",{className:"bg-white rounded shadow-lg p-6 w-full max-w-sm",children:[h.jsxs("h3",{className:"text-lg font-semibold mb-4",children:["Change Password for ",n.name]}),a&&h.jsx("div",{className:"mb-2 text-red-600 text-sm",children:a}),h.jsxs("div",{className:"mb-4",children:[h.jsx("label",{className:"block text-sm font-medium mb-1",children:"New Password"}),h.jsx("input",{type:"password",className:"w-full border border-gray-300 rounded px-3 py-2",value:c,onChange:g=>d(g.target.value),autoFocus:!0})]}),h.jsxs("div",{className:"mb-4",children:[h.jsx("label",{className:"block text-sm font-medium mb-1",children:"Confirm Password"}),h.jsx("input",{type:"password",className:"w-full border border-gray-300 rounded px-3 py-2",value:f,onChange:g=>p(g.target.value)})]}),h.jsxs("div",{className:"flex justify-end gap-2",children:[h.jsx("button",{className:"px-4 py-2 bg-gray-200 rounded text-gray-700",onClick:t,disabled:l,children:"Cancel"}),h.jsx("button",{className:"px-4 py-2 bg-black text-white rounded",onClick:()=>s(n.id,c,f),disabled:l||!c||!f,children:l?"Saving...":"Save"})]})]})})},L4=()=>{const{token:n}=st(),[e,t]=E.useState([]),[s,l]=E.useState(!0),[a,c]=E.useState(""),[d,f]=E.useState(null),[p,g]=E.useState(!1),[x,b]=E.useState(!1),[v,S]=E.useState(null),[w,k]=E.useState(null);E.useEffect(()=>{j()},[n]);const j=async()=>{l(!0);try{if(!n)return;const H=await nx.getAllUsers(n);t(H.users||[])}catch{}finally{l(!1)}},D=e.filter(H=>{var G,q;return H.name.toLowerCase().includes(a.toLowerCase())||H.email.toLowerCase().includes(a.toLowerCase())||(((q=(G=H.profile)==null?void 0:G.instagram_username)==null?void 0:q.toLowerCase().includes(a.toLowerCase()))??!1)}),R=H=>{f(H),g(!0),S(null),k(null)},O=()=>{g(!1),f(null),S(null),k(null)},z=async(H,G,q)=>{b(!0),S(null);try{if(!n)return;await nx.changeUserPassword(n,H,G,q),k("Password updated successfully."),setTimeout(()=>{O()},1200)}catch(ne){S(ne.message||"Failed to update password.")}finally{b(!1)}};return h.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[h.jsx("h2",{className:"text-xl font-semibold mb-6",children:"Manage Users"}),h.jsx("div",{className:"mb-4 flex flex-col sm:flex-row sm:items-center gap-2",children:h.jsx("input",{type:"text",placeholder:"Search by name, email, or Instagram username...",value:a,onChange:H=>c(H.target.value),className:"w-full sm:w-64 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-black focus:border-black"})}),s?h.jsx("div",{className:"text-center py-8",children:"Loading users..."}):D.length===0?h.jsx("div",{className:"text-center py-8 text-gray-500",children:"No users found."}):h.jsxs("div",{className:"overflow-x-auto",children:[h.jsxs("table",{className:"min-w-full divide-y divide-gray-200 mb-6 hidden md:table",children:[h.jsx("thead",{className:"bg-gray-50",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),h.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Email"}),h.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Role"}),h.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Instagram"}),h.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Address"}),h.jsx("th",{className:"px-4 py-2"})]})}),h.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:D.map(H=>{var G;return h.jsxs("tr",{children:[h.jsx("td",{className:"px-4 py-2",children:H.name}),h.jsx("td",{className:"px-4 py-2",children:H.email}),h.jsx("td",{className:"px-4 py-2",children:H.role}),h.jsx("td",{className:"px-4 py-2",children:((G=H.profile)==null?void 0:G.instagram_username)||""}),h.jsx("td",{className:"px-4 py-2",children:H.profile?[H.profile.address_line1,H.profile.barangay,H.profile.city,H.profile.province].filter(Boolean).join(", "):""}),h.jsx("td",{className:"px-4 py-2",children:h.jsx("button",{className:"bg-black text-white px-3 py-1 rounded text-sm",onClick:()=>R(H),children:"Change Password"})})]},H.id)})})]}),h.jsx("div",{className:"md:hidden space-y-4",children:D.map(H=>{var G;return h.jsxs("div",{className:"bg-gray-50 rounded shadow p-4 flex flex-col gap-2",children:[h.jsx("div",{className:"font-semibold text-lg",children:H.name}),h.jsx("div",{className:"text-sm text-gray-700",children:H.email}),h.jsxs("div",{className:"text-xs text-gray-500",children:["Role: ",H.role]}),h.jsxs("div",{className:"text-xs text-gray-500",children:["Instagram: ",((G=H.profile)==null?void 0:G.instagram_username)||""]}),h.jsxs("div",{className:"text-xs text-gray-500",children:["Address: ",H.profile?[H.profile.address_line1,H.profile.barangay,H.profile.city,H.profile.province].filter(Boolean).join(", "):""]}),h.jsx("button",{className:"mt-2 bg-black text-white px-3 py-1 rounded text-sm self-start",onClick:()=>R(H),children:"Change Password"})]},H.id)})})]}),h.jsx(R4,{user:d,isOpen:p,onClose:O,onSubmit:z,isLoading:x,error:v}),w&&h.jsx("div",{className:"fixed bottom-4 left-1/2 transform -translate-x-1/2 bg-green-100 text-green-800 px-4 py-2 rounded shadow",children:w})]})},z4=({tabs:n,activeTab:e,onTabChange:t,className:s="",darkMode:l=!1})=>h.jsxs("div",{className:`border-b ${l?"border-gray-700":"border-gray-200"} ${s}`,children:[h.jsx("nav",{className:"hidden md:flex overflow-x-auto",children:n.map(a=>h.jsxs("button",{className:`px-4 lg:px-6 py-3 font-medium text-sm transition-colors whitespace-nowrap ${e===a.id?l?"border-b-2 border-white text-white bg-gray-800":"border-b-2 border-black text-black bg-white":l?"text-gray-400 hover:text-white hover:bg-gray-700":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,onClick:()=>t(a.id),children:[a.label,a.count!==void 0&&h.jsx("span",{className:`ml-2 px-2 py-0.5 rounded-full text-xs ${e===a.id?l?"bg-white text-gray-800":"bg-black text-white":l?"bg-gray-700 text-gray-200":"bg-gray-200 text-gray-700"}`,children:a.count})]},a.id))}),h.jsx("nav",{className:"md:hidden flex overflow-x-auto hide-scrollbar",children:n.map(a=>h.jsxs("button",{className:`px-3 py-2 font-medium text-xs transition-colors whitespace-nowrap flex items-center ${e===a.id?l?"border-b-2 border-white text-white bg-gray-800":"border-b-2 border-black text-black bg-white":l?"text-gray-400 hover:text-white hover:bg-gray-700":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,onClick:()=>t(a.id),children:[h.jsx("span",{children:a.label}),a.count!==void 0&&h.jsx("span",{className:`ml-1 px-1.5 py-0.5 rounded-full text-xs ${e===a.id?l?"bg-white text-gray-800":"bg-black text-white":l?"bg-gray-700 text-gray-200":"bg-gray-200 text-gray-700"}`,children:a.count})]},a.id))})]}),rS=({children:n,title:e,showBackButton:t=!1,backButtonPath:s="/admin",backButtonText:l="Back to Admin",tabs:a,activeTab:c,onTabChange:d,darkTabs:f=!1})=>{const{isAdmin:p}=st();return p?h.jsx("div",{className:"-mt-16 md:-mt-20",children:h.jsxs("div",{className:"container mx-auto px-4 py-8",children:[h.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[h.jsx("h1",{className:"text-2xl font-bold",children:e}),t&&h.jsx(pe,{to:s,className:"bg-black text-white px-4 py-2 rounded whitespace-nowrap",children:l})]}),a&&c&&d&&h.jsx("div",{className:`${f?"bg-gray-900":"bg-white"} shadow rounded mb-6`,children:h.jsx(z4,{tabs:a,activeTab:c,onTabChange:d,darkMode:f})}),n]})}):h.jsx("div",{className:"container mx-auto px-4 py-8",children:h.jsx("div",{className:"bg-red-100 text-red-700 p-4 rounded",children:h.jsx("p",{children:"You do not have permission to access this page."})})})},Ab=()=>{const{isAdmin:n,token:e}=st(),{tab:t}=cu(),s=pr(),[l,a]=E.useState("products"),[c,d]=E.useState(null),[f,p]=E.useState(null),g=[{id:"products",label:"Products"},{id:"orders",label:"Orders"},{id:"users",label:"Users"},{id:"announcements",label:"Announcements"},{id:"settings",label:"Settings"}];E.useEffect(()=>{t&&g.some(w=>w.id===t)&&a(t)},[t]);const x=w=>{a(w),s(`/admin/${w}`),d(null),p(null)},b=w=>{d(w),p(null),setTimeout(()=>{d(null)},5e3)},v=w=>{p(w),d(null)},S=()=>l==="products"?null:l==="orders"?h.jsx(pe,{to:"/admin-orders",className:"mt-4 sm:mt-0 inline-block bg-black text-white px-4 py-2 rounded",children:"Manage Orders"}):l==="users"?h.jsx(pe,{to:"/admin/users",className:"mt-4 sm:mt-0 inline-block bg-black text-white px-4 py-2",children:"Manage Users"}):null;return n?h.jsxs(rS,{title:"Admin Dashboard",tabs:g,activeTab:l,onTabChange:x,darkTabs:!0,children:[h.jsx("div",{className:"flex justify-end mb-4",children:h.jsx(S,{})}),c&&h.jsx("div",{className:"mb-4 p-4 bg-green-100 text-green-700 rounded",children:c}),f&&h.jsx("div",{className:"mb-4 p-4 bg-red-100 text-red-700 rounded",children:f}),h.jsxs("div",{className:"bg-white shadow rounded overflow-hidden p-4",children:[l==="products"&&h.jsx(Hk,{}),l==="orders"&&h.jsx(Uk,{}),l==="users"&&h.jsx(L4,{}),l==="announcements"&&h.jsx(Pk,{token:e||""}),l==="settings"&&h.jsx("div",{className:"space-y-8",children:h.jsx(D4,{onSuccess:b,onError:v})})]})]}):h.jsx("div",{className:"container mx-auto px-4 py-8",children:h.jsx("div",{className:"bg-red-100 text-red-700 p-4 rounded",children:h.jsx("p",{children:"You do not have permission to access this page."})})})},sS=({initialData:n,isEditing:e=!1,onSuccess:t,onError:s})=>{const l=pr(),{showToast:a}=Zi(),{token:c}=st(),[d,f]=E.useState(!1),[p,g]=E.useState(null),[x,b]=E.useState([]),[v,S]=E.useState(""),[w,k]=E.useState([]),[j,D]=E.useState([]),[R,O]=E.useState({sku:"",name:"",description:"",careInstructions:"",price:"",size:"m",isNewArrival:!1,isSale:!1});E.useEffect(()=>{var te;n&&e&&(console.log({initialData:n}),O({sku:n.sku||"",name:n.name||"",description:n.description||"",careInstructions:n.careInstructions||"",price:((te=n.price)==null?void 0:te.toString())||"",size:n.size||"m",isNewArrival:n.isNewArrival||!1,isSale:n.isSale||!1}),n.image&&S(n.image),n.images&&Array.isArray(n.images)&&k(n.images))},[n,e]);const z=te=>{const{name:le,value:Me,type:xe}=te.target;O(V=>({...V,[le]:xe==="checkbox"?te.target.checked:Me}))},H=te=>{te.target.files&&te.target.files[0]&&(g(te.target.files[0]),S(URL.createObjectURL(te.target.files[0])))},G=te=>{if(te.target.files){const le=Array.from(te.target.files);b(xe=>[...xe,...le]);const Me=le.map(xe=>URL.createObjectURL(xe));D(xe=>[...xe,...Me])}},q=te=>{k(le=>le.filter((Me,xe)=>xe!==te))},ne=te=>{b(le=>le.filter((Me,xe)=>xe!==te)),D(le=>le.filter((Me,xe)=>xe!==te))},fe=async te=>{te.preventDefault(),f(!0);try{const le=new FormData;le.append("sku",R.sku),le.append("name",R.name),le.append("description",R.description),le.append("care_instructions",R.careInstructions),le.append("price",R.price),le.append("size",R.size),le.append("is_new_arrival",R.isNewArrival.toString()),le.append("is_sale",R.isSale.toString()),p?le.append("image",p):e&&v&&le.append("existing_image",v),w.length>0&&le.append("existing_additional_images",JSON.stringify(w)),x.forEach(xe=>{le.append("additional_images[]",xe)}),e?await ts.updateProduct(c,n.id,le):await ts.createProduct(c,le);const Me=e?"Product updated successfully!":"Product created successfully!";a(Me,"success"),t&&t(Me),l("/admin/products")}catch(le){console.error("Error:",le);const Me=le.message||"Something went wrong";a(Me,"error"),s&&s(Me)}finally{f(!1)}},ue=(te,le)=>{console.log(`Updating ${te} with:`,le),O(Me=>({...Me,[te]:le}))};return h.jsxs("form",{onSubmit:fe,className:"space-y-8 divide-y divide-gray-200",children:[h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"text-lg font-medium leading-6 text-gray-900",children:e?"Edit Product":"Add New Product"}),h.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:["Fill in the information below to ",e?"update":"create"," your product."]})]}),h.jsxs("div",{className:"grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6",children:[h.jsxs("div",{className:"sm:col-span-3",children:[h.jsx("label",{htmlFor:"sku",className:"block text-sm font-medium text-gray-700",children:"SKU"}),h.jsx("div",{className:"mt-1",children:h.jsx("input",{type:"text",name:"sku",id:"sku",value:R.sku,onChange:z,className:"w-full border-gray-300 rounded-md shadow-sm p-2 border"})})]}),h.jsxs("div",{className:"sm:col-span-3",children:[h.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Product Name"}),h.jsx("div",{className:"mt-1",children:h.jsx("input",{type:"text",name:"name",id:"name",value:R.name,onChange:z,required:!0,className:"w-full border-gray-300 rounded-md shadow-sm p-2 border"})})]}),h.jsxs("div",{className:"sm:col-span-6",children:[h.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description"}),h.jsx("div",{className:"mt-1",children:h.jsx(au,{value:R.description,onChange:te=>ue("description",te)},`description-${(n==null?void 0:n.id)||"new"}`)})]}),h.jsxs("div",{className:"sm:col-span-6",children:[h.jsx("label",{htmlFor:"careInstructions",className:"block text-sm font-medium text-gray-700",children:"Care Instructions"}),h.jsx("div",{className:"mt-1",children:h.jsx(au,{value:R.careInstructions,onChange:te=>ue("careInstructions",te)},`care-${(n==null?void 0:n.id)||"new"}`)})]}),h.jsxs("div",{className:"sm:col-span-2",children:[h.jsx("label",{htmlFor:"price",className:"block text-sm font-medium text-gray-700",children:"Price"}),h.jsx("div",{className:"mt-1",children:h.jsx("input",{type:"number",name:"price",id:"price",value:R.price,onChange:z,required:!0,min:"0",step:"0.01",className:"w-full border-gray-300 rounded-md shadow-sm p-2 border"})})]}),h.jsxs("div",{className:"sm:col-span-2",children:[h.jsx("label",{htmlFor:"size",className:"block text-sm font-medium text-gray-700",children:"Size"}),h.jsx("div",{className:"mt-1",children:h.jsxs("select",{id:"size",name:"size",value:R.size,onChange:z,required:!0,className:"w-full border-gray-300 rounded-md shadow-sm p-2 border",children:[h.jsx("option",{value:"xs",children:"XS"}),h.jsx("option",{value:"s",children:"S"}),h.jsx("option",{value:"m",children:"M"}),h.jsx("option",{value:"l",children:"L"}),h.jsx("option",{value:"xl",children:"XL"}),h.jsx("option",{value:"xxl",children:"XXL"})]})})]}),h.jsx("div",{className:"sm:col-span-2",children:h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsxs("div",{className:"flex items-center",children:[h.jsx("input",{id:"isNewArrival",name:"isNewArrival",type:"checkbox",checked:R.isNewArrival,onChange:z,className:"w-full border-gray-300 rounded-md shadow-sm p-2 border"}),h.jsx("label",{htmlFor:"isNewArrival",className:"ml-2 block text-sm text-gray-900",children:"New Arrival"})]}),h.jsxs("div",{className:"flex items-center",children:[h.jsx("input",{id:"isSale",name:"isSale",type:"checkbox",checked:R.isSale,onChange:z,className:"w-full border-gray-300 rounded-md shadow-sm p-2 border"}),h.jsx("label",{htmlFor:"isSale",className:"ml-2 block text-sm text-gray-900",children:"On Sale"})]})]})}),h.jsxs("div",{className:"sm:col-span-6",children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Main Product Image"}),h.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md",children:h.jsx("div",{className:"space-y-1 text-center",children:v?h.jsxs("div",{children:[h.jsx("img",{src:v,alt:"Preview",className:"mx-auto h-32 w-32 object-cover"}),h.jsx("button",{type:"button",onClick:()=>{g(null),S("")},className:"mt-2 text-sm text-red-600 hover:text-red-500",children:"Remove"})]}):h.jsx("div",{className:"text-center",children:h.jsx("div",{className:"mt-4 flex text-sm text-gray-600",children:h.jsxs("label",{htmlFor:"main-image-upload",className:"relative cursor-pointer bg-white rounded-md font-medium text-indigo-600 hover:text-indigo-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-indigo-500",children:[h.jsx("span",{children:"Upload a file"}),h.jsx("input",{id:"main-image-upload",name:"main-image-upload",type:"file",accept:"image/*",onChange:H,className:"sr-only"})]})})})})})]}),h.jsxs("div",{className:"sm:col-span-6",children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Additional Images"}),h.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md",children:h.jsxs("div",{className:"space-y-1 text-center",children:[h.jsxs("div",{className:"flex flex-wrap gap-4 justify-center",children:[w.map((te,le)=>h.jsxs("div",{className:"relative",children:[h.jsx("img",{src:te,alt:`Existing ${le+1}`,className:"h-32 w-32 object-cover"}),h.jsx("button",{type:"button",onClick:()=>q(le),className:"absolute top-0 right-0 -mt-2 -mr-2 bg-red-500 text-white rounded-full p-1",children:""})]},`existing-${le}`)),j.map((te,le)=>h.jsxs("div",{className:"relative",children:[h.jsx("img",{src:te,alt:`New ${le+1}`,className:"h-32 w-32 object-cover"}),h.jsx("button",{type:"button",onClick:()=>ne(le),className:"absolute top-0 right-0 -mt-2 -mr-2 bg-red-500 text-white rounded-full p-1",children:""})]},`new-${le}`))]}),h.jsx("div",{className:"text-center mt-4",children:h.jsxs("label",{htmlFor:"additional-images-upload",className:"relative cursor-pointer bg-white rounded-md font-medium text-indigo-600 hover:text-indigo-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-indigo-500",children:[h.jsx("span",{children:"Upload additional images"}),h.jsx("input",{id:"additional-images-upload",name:"additional-images-upload",type:"file",accept:"image/*",multiple:!0,onChange:G,className:"sr-only"})]})})]})})]})]})]}),h.jsx("div",{className:"pt-5",children:h.jsxs("div",{className:"flex justify-end",children:[h.jsx("button",{type:"button",onClick:()=>l("/admin/products"),className:"bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"}),h.jsx("button",{type:"submit",disabled:d,className:"ml-3 inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:d?"Saving...":e?"Update Product":"Create Product"})]})})]})},B4=()=>{const{isAdmin:n}=st(),[e,t]=E.useState(null),[s,l]=E.useState(null),a=d=>{t(d),l(null),setTimeout(()=>{t(null)},5e3)},c=d=>{l(d),t(null)};return n?h.jsxs("div",{className:"container mx-auto px-4 py-8",children:[h.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[h.jsx("h1",{className:"text-2xl font-bold",children:"Add Product"}),h.jsx(pe,{to:"/admin/products",className:"bg-black text-white px-4 py-2 rounded whitespace-nowrap w-full sm:w-auto text-center",children:"Back to Products"})]}),e&&h.jsx("div",{className:"mb-4 p-4 bg-green-100 text-green-700 rounded",children:e}),s&&h.jsx("div",{className:"mb-4 p-4 bg-red-100 text-red-700 rounded",children:s}),h.jsx("div",{className:"bg-white shadow rounded p-4 sm:p-6",children:h.jsx(sS,{onSuccess:a,onError:c})})]}):h.jsx("div",{className:"container mx-auto px-4 py-8",children:h.jsx("div",{className:"bg-red-100 text-red-700 p-4 rounded",children:h.jsx("p",{children:"You do not have permission to access this page."})})})},_4=()=>{const{isAdmin:n}=st(),{productId:e}=cu(),[t,s]=E.useState(null),[l,a]=E.useState(null),[c,d]=E.useState(null),[f,p]=E.useState(!0);E.useEffect(()=>{(async()=>{try{if(!e)return;const v=await ts.getProductById(e);d(v.data)}catch(v){console.error("Error fetching product:",v),a("Failed to load product data")}finally{p(!1)}})()},[e]);const g=b=>{s(b),a(null),setTimeout(()=>{s(null)},5e3)},x=b=>{a(b),s(null)};return n?f?h.jsxs("div",{className:"container mx-auto px-4 py-8",children:[h.jsxs("div",{className:"flex justify-between items-center mb-6",children:[h.jsx("h1",{className:"text-2xl font-bold",children:"Edit Product"}),h.jsx(pe,{to:"/admin/products",className:"bg-black text-white px-4 py-2 rounded whitespace-nowrap",children:"Back to Products"})]}),h.jsx("div",{className:"bg-white shadow rounded p-6",children:h.jsx("div",{className:"text-center py-8",children:h.jsx("p",{className:"text-gray-600",children:"Loading product data..."})})})]}):h.jsxs("div",{className:"container mx-auto px-4 py-8",children:[h.jsxs("div",{className:"flex justify-between items-center mb-6",children:[h.jsx("h1",{className:"text-2xl font-bold",children:"Edit Product"}),h.jsx(pe,{to:"/admin/products",className:"bg-black text-white px-4 py-2 rounded whitespace-nowrap",children:"Back to Products"})]}),t&&h.jsx("div",{className:"mb-4 p-4 bg-green-100 text-green-700 rounded",children:t}),l&&h.jsx("div",{className:"mb-4 p-4 bg-red-100 text-red-700 rounded",children:l}),h.jsx("div",{className:"bg-white shadow rounded p-6",children:h.jsx(sS,{initialData:c,isEditing:!0,onSuccess:g,onError:x})})]}):h.jsx("div",{className:"container mx-auto px-4 py-8",children:h.jsx("div",{className:"bg-red-100 text-red-700 p-4 rounded",children:h.jsx("p",{children:"You do not have permission to access this page."})})})},H4=()=>{const{token:n,isAdmin:e}=st(),[t,s]=E.useState([]),[l,a]=E.useState([]),[c,d]=E.useState(!0),[f,p]=E.useState(null),[g,x]=E.useState(null),[b,v]=E.useState(""),[S,w]=E.useState(""),[k,j]=E.useState(!1),[D,R]=E.useState(!1),[O,z]=E.useState(""),[H,G]=E.useState(""),[q,ne]=E.useState(!1),[fe,ue]=E.useState("all"),le=(()=>{const P={all:t.length,pending:0,approved:0,shipped:0,delivered:0,cancelled:0};return t.forEach(ee=>{P[ee.status]!==void 0&&P[ee.status]++}),P})(),Me=[{id:"all",label:"All Orders",count:le.all},{id:"pending",label:"Pending",count:le.pending},{id:"approved",label:"Approved",count:le.approved},{id:"shipped",label:"Shipped",count:le.shipped},{id:"delivered",label:"Delivered",count:le.delivered},{id:"cancelled",label:"Cancelled",count:le.cancelled}],xe=P=>{ue(P),z(P==="all"?"":P)};E.useEffect(()=>{const P=()=>{ne(window.innerWidth<768)};return P(),window.addEventListener("resize",P),()=>{window.removeEventListener("resize",P)}},[]),E.useEffect(()=>{e&&V()},[e]),E.useEffect(()=>{W()},[t,O,H]);const V=async()=>{if(n){d(!0),p(null);try{const P=await Vi.getAllOrders(n);s(P.data.orders)}catch(P){console.error("Error fetching orders:",P),p(P instanceof Error?P.message:"An error occurred while fetching orders")}finally{d(!1)}}},W=()=>{let P=[...t];if(O&&(P=P.filter(ee=>ee.status===O)),H){const ee=H.toLowerCase();P=P.filter(Z=>Z.customer_name.toLowerCase().includes(ee)||Z.instagram_username.toLowerCase().includes(ee)||String(Z.id).includes(ee)||Z.mobile_number.includes(ee))}a(P)},re=async()=>{if(!(!n||!g)){j(!0),R(!1);try{if(await Vi.updateOrderStatus(n,g.id,b,S),g){const P={...g,status:b,admin_notes:S};x(P)}V(),R(!0)}catch(P){console.error("Error updating order status:",P),p(P instanceof Error?P.message:"An error occurred while updating order status")}finally{j(!1)}}},Oe=P=>{switch(P){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-green-100 text-green-800";case"shipped":return"bg-blue-100 text-blue-800";case"delivered":return"bg-indigo-100 text-indigo-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},T=P=>{if(!P)return"N/A";const ee=new Date(P);return ee.toLocaleDateString()+" "+ee.toLocaleTimeString()};return e?h.jsx(rS,{title:"Order Management",showBackButton:!0,tabs:Me,activeTab:fe,onTabChange:xe,darkTabs:!0,children:h.jsx(nv,{filteredOrders:l,selectedOrder:g,onSelectOrder:P=>{x(P),v((P==null?void 0:P.status)||""),w((P==null?void 0:P.admin_notes)||""),R(!1)},loading:c,error:f,tabs:Me,activeTab:fe,onTabChange:xe,onClearFilters:()=>{G(""),z(""),ue("all")},searchQuery:H,onSearchQueryChange:G,mobileView:q,adminMode:!0,updateStatus:b,onUpdateStatus:v,adminNotes:S,onAdminNotesChange:w,onStatusUpdate:re,isUpdating:k,updateSuccess:D,getStatusBadgeClass:Oe,formatDate:T})}):null},U4=({token:n})=>{const e=pr(),{id:t}=cu(),s=!!t,[l,a]=E.useState({text:"",isActive:!0,displayOrder:0,buttonText:null,buttonLink:null,backgroundColor:"#000000",textColor:"#FFFFFF"}),[c,d]=E.useState(s),[f,p]=E.useState(!1),[g,x]=E.useState(null),[b,v]=E.useState(null);E.useEffect(()=>{(async()=>{if(s)try{d(!0);const D=await Rs.getAnnouncementById(n,Number(t));a({text:D.text,isActive:D.isActive,displayOrder:D.displayOrder,buttonText:D.buttonText,buttonLink:D.buttonLink,backgroundColor:D.backgroundColor,textColor:D.textColor})}catch(D){x("Failed to load announcement data. Please try again."),console.error("Error fetching announcement:",D)}finally{d(!1)}})()},[t,s,n]);const S=j=>{const{name:D,value:R,type:O}=j.target;if(D==="isActive"&&O==="checkbox"){const z=j.target;a(H=>({...H,[D]:z.checked}))}else a(z=>({...z,[D]:R}))},w=async j=>{j.preventDefault(),x(null),v(null),p(!0);try{s?(await Rs.updateAnnouncement(n,Number(t),l),v("Announcement updated successfully!")):(await Rs.createAnnouncement(n,l),v("Announcement created successfully!"),a({text:"",isActive:!0,displayOrder:0,buttonText:null,buttonLink:null,backgroundColor:"#000000",textColor:"#FFFFFF"}))}catch(D){x(`Failed to ${s?"update":"create"} announcement. Please try again.`),console.error(`Error ${s?"updating":"creating"} announcement:`,D)}finally{p(!1)}},k=()=>{e("/admin/announcements")};return c?h.jsx("div",{className:"p-4",children:"Loading announcement data..."}):h.jsxs("div",{className:"p-4 max-w-2xl mx-auto",children:[h.jsx("h2",{className:"text-2xl font-como mb-6",children:s?"Edit Announcement":"Create New Announcement"}),g&&h.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:g}),b&&h.jsx("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4",children:b}),h.jsxs("form",{onSubmit:w,className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{htmlFor:"text",className:"block mb-1 font-medium",children:"Announcement Text*"}),h.jsx("input",{type:"text",id:"text",name:"text",value:l.text,onChange:S,required:!0,className:"w-full p-2 border border-gray-300",placeholder:"Enter announcement text"})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"displayOrder",className:"block mb-1 font-medium",children:"Display Order"}),h.jsx("input",{type:"number",id:"displayOrder",name:"displayOrder",value:l.displayOrder,onChange:S,className:"w-full p-2 border border-gray-300",min:"0"}),h.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Lower numbers appear first. Announcements with the same order are sorted by creation date."})]}),h.jsxs("div",{className:"flex items-center",children:[h.jsx("input",{type:"checkbox",id:"isActive",name:"isActive",checked:l.isActive,onChange:S,className:"mr-2"}),h.jsx("label",{htmlFor:"isActive",className:"font-medium",children:"Active (visible to users)"})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"buttonText",className:"block mb-1 font-medium",children:"Button Text (Optional)"}),h.jsx("input",{type:"text",id:"buttonText",name:"buttonText",value:l.buttonText||"",onChange:S,className:"w-full p-2 border border-gray-300",placeholder:"e.g., Shop Now"})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"buttonLink",className:"block mb-1 font-medium",children:"Button Link (Optional)"}),h.jsx("input",{type:"text",id:"buttonLink",name:"buttonLink",value:l.buttonLink||"",onChange:S,className:"w-full p-2 border border-gray-300",placeholder:"e.g., /sale"})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{htmlFor:"backgroundColor",className:"block mb-1 font-medium",children:"Background Color"}),h.jsxs("div",{className:"flex items-center",children:[h.jsx("input",{type:"color",id:"backgroundColor",name:"backgroundColor",value:l.backgroundColor,onChange:S,className:"h-10 w-10 mr-2"}),h.jsx("input",{type:"text",name:"backgroundColor",value:l.backgroundColor,onChange:S,className:"flex-1 p-2 border border-gray-300",placeholder:"#000000"})]})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"textColor",className:"block mb-1 font-medium",children:"Text Color"}),h.jsxs("div",{className:"flex items-center",children:[h.jsx("input",{type:"color",id:"textColor",name:"textColor",value:l.textColor,onChange:S,className:"h-10 w-10 mr-2"}),h.jsx("input",{type:"text",name:"textColor",value:l.textColor,onChange:S,className:"flex-1 p-2 border border-gray-300",placeholder:"#FFFFFF"})]})]})]}),h.jsxs("div",{className:"mt-6",children:[h.jsx("h3",{className:"font-medium mb-2",children:"Preview"}),h.jsxs("div",{className:"p-3 flex items-center justify-center",style:{backgroundColor:l.backgroundColor,color:l.textColor},children:[h.jsx("span",{children:l.text}),l.buttonText&&h.jsx("button",{className:"ml-4 px-3 py-1 border border-current",style:{color:l.textColor},children:l.buttonText})]})]}),h.jsxs("div",{className:"flex justify-end space-x-4 pt-4",children:[h.jsx("button",{type:"button",onClick:k,className:"px-4 py-2 border border-gray-300 hover:bg-gray-100",disabled:f,children:"Cancel"}),h.jsx("button",{type:"submit",className:"px-4 py-2 bg-black text-white hover:bg-gray-800",disabled:f,children:f?"Saving...":s?"Update Announcement":"Create Announcement"})]})]})]})},Tb=()=>{const{token:n}=st();return h.jsx("div",{className:"container mx-auto py-8",children:h.jsx(U4,{token:n||""})})},Es=({children:n})=>{const{isAuthenticated:e,isAdmin:t}=st();return e?t?n:h.jsx(Sh,{to:"/"}):h.jsx(Sh,{to:"/login"})},P4=({children:n})=>{const{isAuthenticated:e}=st(),t=typeof window<"u"&&localStorage.getItem("guest_id");return!e&&!t?h.jsx(Sh,{to:"/login"}):n},I4=({children:n})=>h.jsx("div",{className:"min-h-screen pt-16 md:pt-20",children:n}),V4=()=>h.jsx(fk,{children:h.jsx(ck,{children:h.jsx(hk,{children:h.jsx(Tk,{children:h.jsx(Ak,{children:h.jsx(jk,{children:h.jsxs("div",{className:"app",children:[h.jsx(pk,{}),h.jsx(I4,{children:h.jsxs(j2,{children:[h.jsx(ft,{path:"/",element:h.jsx(vk,{})}),h.jsx(ft,{path:"/new",element:h.jsx(Nk,{})}),h.jsx(ft,{path:"/sale",element:h.jsx(wk,{})}),h.jsx(ft,{path:"/about",element:h.jsx(kk,{})}),h.jsx(ft,{path:"/login",element:h.jsx(Ck,{})}),h.jsx(ft,{path:"/register",element:h.jsx(Ek,{})}),h.jsx(ft,{path:"/cart",element:h.jsx(Lk,{})}),h.jsx(ft,{path:"/my-orders",element:h.jsx(P4,{children:h.jsx(zk,{})})}),h.jsx(ft,{path:"/products",element:h.jsx(Bk,{})}),h.jsx(ft,{path:"/product/:id",element:h.jsx(_k,{})}),h.jsx(ft,{path:"/admin",element:h.jsx(Es,{children:h.jsx(Ab,{})})}),h.jsx(ft,{path:"/admin/:tab",element:h.jsx(Es,{children:h.jsx(Ab,{})})}),h.jsx(ft,{path:"/admin/products/add",element:h.jsx(Es,{children:h.jsx(B4,{})})}),h.jsx(ft,{path:"/admin/products/edit/:productId",element:h.jsx(Es,{children:h.jsx(_4,{})})}),h.jsx(ft,{path:"/admin-orders",element:h.jsx(Es,{children:h.jsx(H4,{})})}),h.jsx(ft,{path:"/admin/announcements/new",element:h.jsx(Es,{children:h.jsx(Tb,{})})}),h.jsx(ft,{path:"/admin/announcements/edit/:id",element:h.jsx(Es,{children:h.jsx(Tb,{})})})]})}),h.jsx(mk,{})]})})})})})})});Bw.createRoot(document.getElementById("root")).render(h.jsx(Tt.StrictMode,{children:h.jsx(Q2,{children:h.jsx(V4,{})})}));
