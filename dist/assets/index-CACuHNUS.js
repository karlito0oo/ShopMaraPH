(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();function Xh(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Lf={exports:{}},Ji={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ux;function NN(){if(Ux)return Ji;Ux=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,i,a){var c=null;if(a!==void 0&&(c=""+a),i.key!==void 0&&(c=""+i.key),"key"in i){a={};for(var f in i)f!=="key"&&(a[f]=i[f])}else a=i;return i=a.ref,{$$typeof:n,type:s,key:c,ref:i!==void 0?i:null,props:a}}return Ji.Fragment=e,Ji.jsx=t,Ji.jsxs=t,Ji}var Px;function wN(){return Px||(Px=1,Lf.exports=NN()),Lf.exports}var d=wN(),Bf={exports:{}},ve={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ix;function kN(){if(Ix)return ve;Ix=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.iterator;function b(T){return T===null||typeof T!="object"?null:(T=y&&T[y]||T["@@iterator"],typeof T=="function"?T:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,w={};function k(T,H,F){this.props=T,this.context=H,this.refs=w,this.updater=F||S}k.prototype.isReactComponent={},k.prototype.setState=function(T,H){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,H,"setState")},k.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function E(){}E.prototype=k.prototype;function O(T,H,F){this.props=T,this.context=H,this.refs=w,this.updater=F||S}var B=O.prototype=new E;B.constructor=O,v(B,k.prototype),B.isPureReactComponent=!0;var q=Array.isArray,D={H:null,A:null,T:null,S:null,V:null},R=Object.prototype.hasOwnProperty;function L(T,H,F,Q,X,ae){return F=ae.ref,{$$typeof:n,type:T,key:H,ref:F!==void 0?F:null,props:ae}}function $(T,H){return L(T.type,H,void 0,void 0,void 0,T.props)}function te(T){return typeof T=="object"&&T!==null&&T.$$typeof===n}function se(T){var H={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(F){return H[F]})}var ue=/\/+/g;function Z(T,H){return typeof T=="object"&&T!==null&&T.key!=null?se(""+T.key):H.toString(36)}function ye(){}function ge(T){switch(T.status){case"fulfilled":return T.value;case"rejected":throw T.reason;default:switch(typeof T.status=="string"?T.then(ye,ye):(T.status="pending",T.then(function(H){T.status==="pending"&&(T.status="fulfilled",T.value=H)},function(H){T.status==="pending"&&(T.status="rejected",T.reason=H)})),T.status){case"fulfilled":return T.value;case"rejected":throw T.reason}}throw T}function Te(T,H,F,Q,X){var ae=typeof T;(ae==="undefined"||ae==="boolean")&&(T=null);var le=!1;if(T===null)le=!0;else switch(ae){case"bigint":case"string":case"number":le=!0;break;case"object":switch(T.$$typeof){case n:case e:le=!0;break;case g:return le=T._init,Te(le(T._payload),H,F,Q,X)}}if(le)return X=X(T),le=Q===""?"."+Z(T,0):Q,q(X)?(F="",le!=null&&(F=le.replace(ue,"$&/")+"/"),Te(X,H,F,"",function(Ft){return Ft})):X!=null&&(te(X)&&(X=$(X,F+(X.key==null||T&&T.key===X.key?"":(""+X.key).replace(ue,"$&/")+"/")+le)),H.push(X)),1;le=0;var lt=Q===""?".":Q+":";if(q(T))for(var De=0;De<T.length;De++)Q=T[De],ae=lt+Z(Q,De),le+=Te(Q,H,F,ae,X);else if(De=b(T),typeof De=="function")for(T=De.call(T),De=0;!(Q=T.next()).done;)Q=Q.value,ae=lt+Z(Q,De++),le+=Te(Q,H,F,ae,X);else if(ae==="object"){if(typeof T.then=="function")return Te(ge(T),H,F,Q,X);throw H=String(T),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.")}return le}function I(T,H,F){if(T==null)return T;var Q=[],X=0;return Te(T,Q,"","",function(ae){return H.call(F,ae,X++)}),Q}function ne(T){if(T._status===-1){var H=T._result;H=H(),H.then(function(F){(T._status===0||T._status===-1)&&(T._status=1,T._result=F)},function(F){(T._status===0||T._status===-1)&&(T._status=2,T._result=F)}),T._status===-1&&(T._status=0,T._result=H)}if(T._status===1)return T._result.default;throw T._result}var re=typeof reportError=="function"?reportError:function(T){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var H=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof T=="object"&&T!==null&&typeof T.message=="string"?String(T.message):String(T),error:T});if(!window.dispatchEvent(H))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",T);return}console.error(T)};function K(){}return ve.Children={map:I,forEach:function(T,H,F){I(T,function(){H.apply(this,arguments)},F)},count:function(T){var H=0;return I(T,function(){H++}),H},toArray:function(T){return I(T,function(H){return H})||[]},only:function(T){if(!te(T))throw Error("React.Children.only expected to receive a single React element child.");return T}},ve.Component=k,ve.Fragment=t,ve.Profiler=i,ve.PureComponent=O,ve.StrictMode=s,ve.Suspense=h,ve.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,ve.__COMPILER_RUNTIME={__proto__:null,c:function(T){return D.H.useMemoCache(T)}},ve.cache=function(T){return function(){return T.apply(null,arguments)}},ve.cloneElement=function(T,H,F){if(T==null)throw Error("The argument must be a React element, but you passed "+T+".");var Q=v({},T.props),X=T.key,ae=void 0;if(H!=null)for(le in H.ref!==void 0&&(ae=void 0),H.key!==void 0&&(X=""+H.key),H)!R.call(H,le)||le==="key"||le==="__self"||le==="__source"||le==="ref"&&H.ref===void 0||(Q[le]=H[le]);var le=arguments.length-2;if(le===1)Q.children=F;else if(1<le){for(var lt=Array(le),De=0;De<le;De++)lt[De]=arguments[De+2];Q.children=lt}return L(T.type,X,void 0,void 0,ae,Q)},ve.createContext=function(T){return T={$$typeof:c,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null},T.Provider=T,T.Consumer={$$typeof:a,_context:T},T},ve.createElement=function(T,H,F){var Q,X={},ae=null;if(H!=null)for(Q in H.key!==void 0&&(ae=""+H.key),H)R.call(H,Q)&&Q!=="key"&&Q!=="__self"&&Q!=="__source"&&(X[Q]=H[Q]);var le=arguments.length-2;if(le===1)X.children=F;else if(1<le){for(var lt=Array(le),De=0;De<le;De++)lt[De]=arguments[De+2];X.children=lt}if(T&&T.defaultProps)for(Q in le=T.defaultProps,le)X[Q]===void 0&&(X[Q]=le[Q]);return L(T,ae,void 0,void 0,null,X)},ve.createRef=function(){return{current:null}},ve.forwardRef=function(T){return{$$typeof:f,render:T}},ve.isValidElement=te,ve.lazy=function(T){return{$$typeof:g,_payload:{_status:-1,_result:T},_init:ne}},ve.memo=function(T,H){return{$$typeof:m,type:T,compare:H===void 0?null:H}},ve.startTransition=function(T){var H=D.T,F={};D.T=F;try{var Q=T(),X=D.S;X!==null&&X(F,Q),typeof Q=="object"&&Q!==null&&typeof Q.then=="function"&&Q.then(K,re)}catch(ae){re(ae)}finally{D.T=H}},ve.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},ve.use=function(T){return D.H.use(T)},ve.useActionState=function(T,H,F){return D.H.useActionState(T,H,F)},ve.useCallback=function(T,H){return D.H.useCallback(T,H)},ve.useContext=function(T){return D.H.useContext(T)},ve.useDebugValue=function(){},ve.useDeferredValue=function(T,H){return D.H.useDeferredValue(T,H)},ve.useEffect=function(T,H,F){var Q=D.H;if(typeof F=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Q.useEffect(T,H)},ve.useId=function(){return D.H.useId()},ve.useImperativeHandle=function(T,H,F){return D.H.useImperativeHandle(T,H,F)},ve.useInsertionEffect=function(T,H){return D.H.useInsertionEffect(T,H)},ve.useLayoutEffect=function(T,H){return D.H.useLayoutEffect(T,H)},ve.useMemo=function(T,H){return D.H.useMemo(T,H)},ve.useOptimistic=function(T,H){return D.H.useOptimistic(T,H)},ve.useReducer=function(T,H,F){return D.H.useReducer(T,H,F)},ve.useRef=function(T){return D.H.useRef(T)},ve.useState=function(T){return D.H.useState(T)},ve.useSyncExternalStore=function(T,H,F){return D.H.useSyncExternalStore(T,H,F)},ve.useTransition=function(){return D.H.useTransition()},ve.version="19.1.0",ve}var Vx;function Zh(){return Vx||(Vx=1,Bf.exports=kN()),Bf.exports}var C=Zh();const Et=Xh(C);var _f={exports:{}},Qi={},Hf={exports:{}},Uf={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qx;function jN(){return qx||(qx=1,function(n){function e(I,ne){var re=I.length;I.push(ne);e:for(;0<re;){var K=re-1>>>1,T=I[K];if(0<i(T,ne))I[K]=ne,I[re]=T,re=K;else break e}}function t(I){return I.length===0?null:I[0]}function s(I){if(I.length===0)return null;var ne=I[0],re=I.pop();if(re!==ne){I[0]=re;e:for(var K=0,T=I.length,H=T>>>1;K<H;){var F=2*(K+1)-1,Q=I[F],X=F+1,ae=I[X];if(0>i(Q,re))X<T&&0>i(ae,Q)?(I[K]=ae,I[X]=re,K=X):(I[K]=Q,I[F]=re,K=F);else if(X<T&&0>i(ae,re))I[K]=ae,I[X]=re,K=X;else break e}}return ne}function i(I,ne){var re=I.sortIndex-ne.sortIndex;return re!==0?re:I.id-ne.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var c=Date,f=c.now();n.unstable_now=function(){return c.now()-f}}var h=[],m=[],g=1,y=null,b=3,S=!1,v=!1,w=!1,k=!1,E=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function q(I){for(var ne=t(m);ne!==null;){if(ne.callback===null)s(m);else if(ne.startTime<=I)s(m),ne.sortIndex=ne.expirationTime,e(h,ne);else break;ne=t(m)}}function D(I){if(w=!1,q(I),!v)if(t(h)!==null)v=!0,R||(R=!0,Z());else{var ne=t(m);ne!==null&&Te(D,ne.startTime-I)}}var R=!1,L=-1,$=5,te=-1;function se(){return k?!0:!(n.unstable_now()-te<$)}function ue(){if(k=!1,R){var I=n.unstable_now();te=I;var ne=!0;try{e:{v=!1,w&&(w=!1,O(L),L=-1),S=!0;var re=b;try{t:{for(q(I),y=t(h);y!==null&&!(y.expirationTime>I&&se());){var K=y.callback;if(typeof K=="function"){y.callback=null,b=y.priorityLevel;var T=K(y.expirationTime<=I);if(I=n.unstable_now(),typeof T=="function"){y.callback=T,q(I),ne=!0;break t}y===t(h)&&s(h),q(I)}else s(h);y=t(h)}if(y!==null)ne=!0;else{var H=t(m);H!==null&&Te(D,H.startTime-I),ne=!1}}break e}finally{y=null,b=re,S=!1}ne=void 0}}finally{ne?Z():R=!1}}}var Z;if(typeof B=="function")Z=function(){B(ue)};else if(typeof MessageChannel<"u"){var ye=new MessageChannel,ge=ye.port2;ye.port1.onmessage=ue,Z=function(){ge.postMessage(null)}}else Z=function(){E(ue,0)};function Te(I,ne){L=E(function(){I(n.unstable_now())},ne)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(I){I.callback=null},n.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<I?Math.floor(1e3/I):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_next=function(I){switch(b){case 1:case 2:case 3:var ne=3;break;default:ne=b}var re=b;b=ne;try{return I()}finally{b=re}},n.unstable_requestPaint=function(){k=!0},n.unstable_runWithPriority=function(I,ne){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var re=b;b=I;try{return ne()}finally{b=re}},n.unstable_scheduleCallback=function(I,ne,re){var K=n.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?K+re:K):re=K,I){case 1:var T=-1;break;case 2:T=250;break;case 5:T=1073741823;break;case 4:T=1e4;break;default:T=5e3}return T=re+T,I={id:g++,callback:ne,priorityLevel:I,startTime:re,expirationTime:T,sortIndex:-1},re>K?(I.sortIndex=re,e(m,I),t(h)===null&&I===t(m)&&(w?(O(L),L=-1):w=!0,Te(D,re-K))):(I.sortIndex=T,e(h,I),v||S||(v=!0,R||(R=!0,Z()))),I},n.unstable_shouldYield=se,n.unstable_wrapCallback=function(I){var ne=b;return function(){var re=b;b=ne;try{return I.apply(this,arguments)}finally{b=re}}}}(Uf)),Uf}var Fx;function CN(){return Fx||(Fx=1,Hf.exports=jN()),Hf.exports}var Pf={exports:{}},jt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $x;function EN(){if($x)return jt;$x=1;var n=Zh();function e(h){var m="https://react.dev/errors/"+h;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)m+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+h+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(h,m,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:y==null?null:""+y,children:h,containerInfo:m,implementation:g}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(h,m){if(h==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return jt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,jt.createPortal=function(h,m){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return a(h,m,null,g)},jt.flushSync=function(h){var m=c.T,g=s.p;try{if(c.T=null,s.p=2,h)return h()}finally{c.T=m,s.p=g,s.d.f()}},jt.preconnect=function(h,m){typeof h=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,s.d.C(h,m))},jt.prefetchDNS=function(h){typeof h=="string"&&s.d.D(h)},jt.preinit=function(h,m){if(typeof h=="string"&&m&&typeof m.as=="string"){var g=m.as,y=f(g,m.crossOrigin),b=typeof m.integrity=="string"?m.integrity:void 0,S=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;g==="style"?s.d.S(h,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:y,integrity:b,fetchPriority:S}):g==="script"&&s.d.X(h,{crossOrigin:y,integrity:b,fetchPriority:S,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},jt.preinitModule=function(h,m){if(typeof h=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var g=f(m.as,m.crossOrigin);s.d.M(h,{crossOrigin:g,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&s.d.M(h)},jt.preload=function(h,m){if(typeof h=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var g=m.as,y=f(g,m.crossOrigin);s.d.L(h,g,{crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},jt.preloadModule=function(h,m){if(typeof h=="string")if(m){var g=f(m.as,m.crossOrigin);s.d.m(h,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:g,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else s.d.m(h)},jt.requestFormReset=function(h){s.d.r(h)},jt.unstable_batchedUpdates=function(h,m){return h(m)},jt.useFormState=function(h,m,g){return c.H.useFormState(h,m,g)},jt.useFormStatus=function(){return c.H.useHostTransitionStatus()},jt.version="19.1.0",jt}var Gx;function Tb(){if(Gx)return Pf.exports;Gx=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Pf.exports=EN(),Pf.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yx;function AN(){if(Yx)return Qi;Yx=1;var n=CN(),e=Zh(),t=Tb();function s(r){var l="https://react.dev/errors/"+r;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)l+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+r+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function a(r){var l=r,o=r;if(r.alternate)for(;l.return;)l=l.return;else{r=l;do l=r,(l.flags&4098)!==0&&(o=l.return),r=l.return;while(r)}return l.tag===3?o:null}function c(r){if(r.tag===13){var l=r.memoizedState;if(l===null&&(r=r.alternate,r!==null&&(l=r.memoizedState)),l!==null)return l.dehydrated}return null}function f(r){if(a(r)!==r)throw Error(s(188))}function h(r){var l=r.alternate;if(!l){if(l=a(r),l===null)throw Error(s(188));return l!==r?null:r}for(var o=r,u=l;;){var p=o.return;if(p===null)break;var x=p.alternate;if(x===null){if(u=p.return,u!==null){o=u;continue}break}if(p.child===x.child){for(x=p.child;x;){if(x===o)return f(p),r;if(x===u)return f(p),l;x=x.sibling}throw Error(s(188))}if(o.return!==u.return)o=p,u=x;else{for(var N=!1,j=p.child;j;){if(j===o){N=!0,o=p,u=x;break}if(j===u){N=!0,u=p,o=x;break}j=j.sibling}if(!N){for(j=x.child;j;){if(j===o){N=!0,o=x,u=p;break}if(j===u){N=!0,u=x,o=p;break}j=j.sibling}if(!N)throw Error(s(189))}}if(o.alternate!==u)throw Error(s(190))}if(o.tag!==3)throw Error(s(188));return o.stateNode.current===o?r:l}function m(r){var l=r.tag;if(l===5||l===26||l===27||l===6)return r;for(r=r.child;r!==null;){if(l=m(r),l!==null)return l;r=r.sibling}return null}var g=Object.assign,y=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),O=Symbol.for("react.consumer"),B=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),$=Symbol.for("react.lazy"),te=Symbol.for("react.activity"),se=Symbol.for("react.memo_cache_sentinel"),ue=Symbol.iterator;function Z(r){return r===null||typeof r!="object"?null:(r=ue&&r[ue]||r["@@iterator"],typeof r=="function"?r:null)}var ye=Symbol.for("react.client.reference");function ge(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===ye?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case v:return"Fragment";case k:return"Profiler";case w:return"StrictMode";case D:return"Suspense";case R:return"SuspenseList";case te:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case S:return"Portal";case B:return(r.displayName||"Context")+".Provider";case O:return(r._context.displayName||"Context")+".Consumer";case q:var l=r.render;return r=r.displayName,r||(r=l.displayName||l.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case L:return l=r.displayName||null,l!==null?l:ge(r.type)||"Memo";case $:l=r._payload,r=r._init;try{return ge(r(l))}catch{}}return null}var Te=Array.isArray,I=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re={pending:!1,data:null,method:null,action:null},K=[],T=-1;function H(r){return{current:r}}function F(r){0>T||(r.current=K[T],K[T]=null,T--)}function Q(r,l){T++,K[T]=r.current,r.current=l}var X=H(null),ae=H(null),le=H(null),lt=H(null);function De(r,l){switch(Q(le,l),Q(ae,r),Q(X,null),l.nodeType){case 9:case 11:r=(r=l.documentElement)&&(r=r.namespaceURI)?hx(r):0;break;default:if(r=l.tagName,l=l.namespaceURI)l=hx(l),r=mx(l,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}F(X),Q(X,r)}function Ft(){F(X),F(ae),F(le)}function Vs(r){r.memoizedState!==null&&Q(lt,r);var l=X.current,o=mx(l,r.type);l!==o&&(Q(ae,r),Q(X,o))}function Bt(r){ae.current===r&&(F(X),F(ae)),lt.current===r&&(F(lt),Fi._currentValue=re)}var vu=Object.prototype.hasOwnProperty,Su=n.unstable_scheduleCallback,Nu=n.unstable_cancelCallback,eS=n.unstable_shouldYield,tS=n.unstable_requestPaint,En=n.unstable_now,nS=n.unstable_getCurrentPriorityLevel,Ym=n.unstable_ImmediatePriority,Km=n.unstable_UserBlockingPriority,La=n.unstable_NormalPriority,rS=n.unstable_LowPriority,Jm=n.unstable_IdlePriority,sS=n.log,lS=n.unstable_setDisableYieldValue,Zl=null,$t=null;function hr(r){if(typeof sS=="function"&&lS(r),$t&&typeof $t.setStrictMode=="function")try{$t.setStrictMode(Zl,r)}catch{}}var Gt=Math.clz32?Math.clz32:oS,iS=Math.log,aS=Math.LN2;function oS(r){return r>>>=0,r===0?32:31-(iS(r)/aS|0)|0}var Ba=256,_a=4194304;function ns(r){var l=r&42;if(l!==0)return l;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Ha(r,l,o){var u=r.pendingLanes;if(u===0)return 0;var p=0,x=r.suspendedLanes,N=r.pingedLanes;r=r.warmLanes;var j=u&134217727;return j!==0?(u=j&~x,u!==0?p=ns(u):(N&=j,N!==0?p=ns(N):o||(o=j&~r,o!==0&&(p=ns(o))))):(j=u&~x,j!==0?p=ns(j):N!==0?p=ns(N):o||(o=u&~r,o!==0&&(p=ns(o)))),p===0?0:l!==0&&l!==p&&(l&x)===0&&(x=p&-p,o=l&-l,x>=o||x===32&&(o&4194048)!==0)?l:p}function Wl(r,l){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&l)===0}function cS(r,l){switch(r){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qm(){var r=Ba;return Ba<<=1,(Ba&4194048)===0&&(Ba=256),r}function Xm(){var r=_a;return _a<<=1,(_a&62914560)===0&&(_a=4194304),r}function wu(r){for(var l=[],o=0;31>o;o++)l.push(r);return l}function ei(r,l){r.pendingLanes|=l,l!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function uS(r,l,o,u,p,x){var N=r.pendingLanes;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=o,r.entangledLanes&=o,r.errorRecoveryDisabledLanes&=o,r.shellSuspendCounter=0;var j=r.entanglements,A=r.expirationTimes,U=r.hiddenUpdates;for(o=N&~o;0<o;){var G=31-Gt(o),J=1<<G;j[G]=0,A[G]=-1;var P=U[G];if(P!==null)for(U[G]=null,G=0;G<P.length;G++){var V=P[G];V!==null&&(V.lane&=-536870913)}o&=~J}u!==0&&Zm(r,u,0),x!==0&&p===0&&r.tag!==0&&(r.suspendedLanes|=x&~(N&~l))}function Zm(r,l,o){r.pendingLanes|=l,r.suspendedLanes&=~l;var u=31-Gt(l);r.entangledLanes|=l,r.entanglements[u]=r.entanglements[u]|1073741824|o&4194090}function Wm(r,l){var o=r.entangledLanes|=l;for(r=r.entanglements;o;){var u=31-Gt(o),p=1<<u;p&l|r[u]&l&&(r[u]|=l),o&=~p}}function ku(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function ju(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function ep(){var r=ne.p;return r!==0?r:(r=window.event,r===void 0?32:Dx(r.type))}function dS(r,l){var o=ne.p;try{return ne.p=r,l()}finally{ne.p=o}}var mr=Math.random().toString(36).slice(2),wt="__reactFiber$"+mr,_t="__reactProps$"+mr,qs="__reactContainer$"+mr,Cu="__reactEvents$"+mr,fS="__reactListeners$"+mr,hS="__reactHandles$"+mr,tp="__reactResources$"+mr,ti="__reactMarker$"+mr;function Eu(r){delete r[wt],delete r[_t],delete r[Cu],delete r[fS],delete r[hS]}function Fs(r){var l=r[wt];if(l)return l;for(var o=r.parentNode;o;){if(l=o[qs]||o[wt]){if(o=l.alternate,l.child!==null||o!==null&&o.child!==null)for(r=yx(r);r!==null;){if(o=r[wt])return o;r=yx(r)}return l}r=o,o=r.parentNode}return null}function $s(r){if(r=r[wt]||r[qs]){var l=r.tag;if(l===5||l===6||l===13||l===26||l===27||l===3)return r}return null}function ni(r){var l=r.tag;if(l===5||l===26||l===27||l===6)return r.stateNode;throw Error(s(33))}function Gs(r){var l=r[tp];return l||(l=r[tp]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function it(r){r[ti]=!0}var np=new Set,rp={};function rs(r,l){Ys(r,l),Ys(r+"Capture",l)}function Ys(r,l){for(rp[r]=l,r=0;r<l.length;r++)np.add(l[r])}var mS=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),sp={},lp={};function pS(r){return vu.call(lp,r)?!0:vu.call(sp,r)?!1:mS.test(r)?lp[r]=!0:(sp[r]=!0,!1)}function Ua(r,l,o){if(pS(l))if(o===null)r.removeAttribute(l);else{switch(typeof o){case"undefined":case"function":case"symbol":r.removeAttribute(l);return;case"boolean":var u=l.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(l);return}}r.setAttribute(l,""+o)}}function Pa(r,l,o){if(o===null)r.removeAttribute(l);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(l);return}r.setAttribute(l,""+o)}}function Un(r,l,o,u){if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttributeNS(l,o,""+u)}}var Au,ip;function Ks(r){if(Au===void 0)try{throw Error()}catch(o){var l=o.stack.trim().match(/\n( *(at )?)/);Au=l&&l[1]||"",ip=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Au+r+ip}var Tu=!1;function Mu(r,l){if(!r||Tu)return"";Tu=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(l){var J=function(){throw Error()};if(Object.defineProperty(J.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(J,[])}catch(V){var P=V}Reflect.construct(r,[],J)}else{try{J.call()}catch(V){P=V}r.call(J.prototype)}}else{try{throw Error()}catch(V){P=V}(J=r())&&typeof J.catch=="function"&&J.catch(function(){})}}catch(V){if(V&&P&&typeof V.stack=="string")return[V.stack,P.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var x=u.DetermineComponentFrameRoot(),N=x[0],j=x[1];if(N&&j){var A=N.split(`
`),U=j.split(`
`);for(p=u=0;u<A.length&&!A[u].includes("DetermineComponentFrameRoot");)u++;for(;p<U.length&&!U[p].includes("DetermineComponentFrameRoot");)p++;if(u===A.length||p===U.length)for(u=A.length-1,p=U.length-1;1<=u&&0<=p&&A[u]!==U[p];)p--;for(;1<=u&&0<=p;u--,p--)if(A[u]!==U[p]){if(u!==1||p!==1)do if(u--,p--,0>p||A[u]!==U[p]){var G=`
`+A[u].replace(" at new "," at ");return r.displayName&&G.includes("<anonymous>")&&(G=G.replace("<anonymous>",r.displayName)),G}while(1<=u&&0<=p);break}}}finally{Tu=!1,Error.prepareStackTrace=o}return(o=r?r.displayName||r.name:"")?Ks(o):""}function gS(r){switch(r.tag){case 26:case 27:case 5:return Ks(r.type);case 16:return Ks("Lazy");case 13:return Ks("Suspense");case 19:return Ks("SuspenseList");case 0:case 15:return Mu(r.type,!1);case 11:return Mu(r.type.render,!1);case 1:return Mu(r.type,!0);case 31:return Ks("Activity");default:return""}}function ap(r){try{var l="";do l+=gS(r),r=r.return;while(r);return l}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function rn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function op(r){var l=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function xS(r){var l=op(r)?"checked":"value",o=Object.getOwnPropertyDescriptor(r.constructor.prototype,l),u=""+r[l];if(!r.hasOwnProperty(l)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var p=o.get,x=o.set;return Object.defineProperty(r,l,{configurable:!0,get:function(){return p.call(this)},set:function(N){u=""+N,x.call(this,N)}}),Object.defineProperty(r,l,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(N){u=""+N},stopTracking:function(){r._valueTracker=null,delete r[l]}}}}function Ia(r){r._valueTracker||(r._valueTracker=xS(r))}function cp(r){if(!r)return!1;var l=r._valueTracker;if(!l)return!0;var o=l.getValue(),u="";return r&&(u=op(r)?r.checked?"true":"false":r.value),r=u,r!==o?(l.setValue(r),!0):!1}function Va(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var yS=/[\n"\\]/g;function sn(r){return r.replace(yS,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function Ou(r,l,o,u,p,x,N,j){r.name="",N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?r.type=N:r.removeAttribute("type"),l!=null?N==="number"?(l===0&&r.value===""||r.value!=l)&&(r.value=""+rn(l)):r.value!==""+rn(l)&&(r.value=""+rn(l)):N!=="submit"&&N!=="reset"||r.removeAttribute("value"),l!=null?Ru(r,N,rn(l)):o!=null?Ru(r,N,rn(o)):u!=null&&r.removeAttribute("value"),p==null&&x!=null&&(r.defaultChecked=!!x),p!=null&&(r.checked=p&&typeof p!="function"&&typeof p!="symbol"),j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?r.name=""+rn(j):r.removeAttribute("name")}function up(r,l,o,u,p,x,N,j){if(x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(r.type=x),l!=null||o!=null){if(!(x!=="submit"&&x!=="reset"||l!=null))return;o=o!=null?""+rn(o):"",l=l!=null?""+rn(l):o,j||l===r.value||(r.value=l),r.defaultValue=l}u=u??p,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=j?r.checked:!!u,r.defaultChecked=!!u,N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"&&(r.name=N)}function Ru(r,l,o){l==="number"&&Va(r.ownerDocument)===r||r.defaultValue===""+o||(r.defaultValue=""+o)}function Js(r,l,o,u){if(r=r.options,l){l={};for(var p=0;p<o.length;p++)l["$"+o[p]]=!0;for(o=0;o<r.length;o++)p=l.hasOwnProperty("$"+r[o].value),r[o].selected!==p&&(r[o].selected=p),p&&u&&(r[o].defaultSelected=!0)}else{for(o=""+rn(o),l=null,p=0;p<r.length;p++){if(r[p].value===o){r[p].selected=!0,u&&(r[p].defaultSelected=!0);return}l!==null||r[p].disabled||(l=r[p])}l!==null&&(l.selected=!0)}}function dp(r,l,o){if(l!=null&&(l=""+rn(l),l!==r.value&&(r.value=l),o==null)){r.defaultValue!==l&&(r.defaultValue=l);return}r.defaultValue=o!=null?""+rn(o):""}function fp(r,l,o,u){if(l==null){if(u!=null){if(o!=null)throw Error(s(92));if(Te(u)){if(1<u.length)throw Error(s(93));u=u[0]}o=u}o==null&&(o=""),l=o}o=rn(l),r.defaultValue=o,u=r.textContent,u===o&&u!==""&&u!==null&&(r.value=u)}function Qs(r,l){if(l){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=l;return}}r.textContent=l}var bS=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function hp(r,l,o){var u=l.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?r.setProperty(l,""):l==="float"?r.cssFloat="":r[l]="":u?r.setProperty(l,o):typeof o!="number"||o===0||bS.has(l)?l==="float"?r.cssFloat=o:r[l]=(""+o).trim():r[l]=o+"px"}function mp(r,l,o){if(l!=null&&typeof l!="object")throw Error(s(62));if(r=r.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||l!=null&&l.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var p in l)u=l[p],l.hasOwnProperty(p)&&o[p]!==u&&hp(r,p,u)}else for(var x in l)l.hasOwnProperty(x)&&hp(r,x,l[x])}function Du(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vS=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),SS=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function qa(r){return SS.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var zu=null;function Lu(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Xs=null,Zs=null;function pp(r){var l=$s(r);if(l&&(r=l.stateNode)){var o=r[_t]||null;e:switch(r=l.stateNode,l.type){case"input":if(Ou(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),l=o.name,o.type==="radio"&&l!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+sn(""+l)+'"][type="radio"]'),l=0;l<o.length;l++){var u=o[l];if(u!==r&&u.form===r.form){var p=u[_t]||null;if(!p)throw Error(s(90));Ou(u,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(l=0;l<o.length;l++)u=o[l],u.form===r.form&&cp(u)}break e;case"textarea":dp(r,o.value,o.defaultValue);break e;case"select":l=o.value,l!=null&&Js(r,!!o.multiple,l,!1)}}}var Bu=!1;function gp(r,l,o){if(Bu)return r(l,o);Bu=!0;try{var u=r(l);return u}finally{if(Bu=!1,(Xs!==null||Zs!==null)&&(To(),Xs&&(l=Xs,r=Zs,Zs=Xs=null,pp(l),r)))for(l=0;l<r.length;l++)pp(r[l])}}function ri(r,l){var o=r.stateNode;if(o===null)return null;var u=o[_t]||null;if(u===null)return null;o=u[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(s(231,l,typeof o));return o}var Pn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_u=!1;if(Pn)try{var si={};Object.defineProperty(si,"passive",{get:function(){_u=!0}}),window.addEventListener("test",si,si),window.removeEventListener("test",si,si)}catch{_u=!1}var pr=null,Hu=null,Fa=null;function xp(){if(Fa)return Fa;var r,l=Hu,o=l.length,u,p="value"in pr?pr.value:pr.textContent,x=p.length;for(r=0;r<o&&l[r]===p[r];r++);var N=o-r;for(u=1;u<=N&&l[o-u]===p[x-u];u++);return Fa=p.slice(r,1<u?1-u:void 0)}function $a(r){var l=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&l===13&&(r=13)):r=l,r===10&&(r=13),32<=r||r===13?r:0}function Ga(){return!0}function yp(){return!1}function Ht(r){function l(o,u,p,x,N){this._reactName=o,this._targetInst=p,this.type=u,this.nativeEvent=x,this.target=N,this.currentTarget=null;for(var j in r)r.hasOwnProperty(j)&&(o=r[j],this[j]=o?o(x):x[j]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?Ga:yp,this.isPropagationStopped=yp,this}return g(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Ga)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Ga)},persist:function(){},isPersistent:Ga}),l}var ss={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ya=Ht(ss),li=g({},ss,{view:0,detail:0}),NS=Ht(li),Uu,Pu,ii,Ka=g({},li,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vu,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ii&&(ii&&r.type==="mousemove"?(Uu=r.screenX-ii.screenX,Pu=r.screenY-ii.screenY):Pu=Uu=0,ii=r),Uu)},movementY:function(r){return"movementY"in r?r.movementY:Pu}}),bp=Ht(Ka),wS=g({},Ka,{dataTransfer:0}),kS=Ht(wS),jS=g({},li,{relatedTarget:0}),Iu=Ht(jS),CS=g({},ss,{animationName:0,elapsedTime:0,pseudoElement:0}),ES=Ht(CS),AS=g({},ss,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),TS=Ht(AS),MS=g({},ss,{data:0}),vp=Ht(MS),OS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},RS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},DS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zS(r){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(r):(r=DS[r])?!!l[r]:!1}function Vu(){return zS}var LS=g({},li,{key:function(r){if(r.key){var l=OS[r.key]||r.key;if(l!=="Unidentified")return l}return r.type==="keypress"?(r=$a(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?RS[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vu,charCode:function(r){return r.type==="keypress"?$a(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?$a(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),BS=Ht(LS),_S=g({},Ka,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Sp=Ht(_S),HS=g({},li,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vu}),US=Ht(HS),PS=g({},ss,{propertyName:0,elapsedTime:0,pseudoElement:0}),IS=Ht(PS),VS=g({},Ka,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),qS=Ht(VS),FS=g({},ss,{newState:0,oldState:0}),$S=Ht(FS),GS=[9,13,27,32],qu=Pn&&"CompositionEvent"in window,ai=null;Pn&&"documentMode"in document&&(ai=document.documentMode);var YS=Pn&&"TextEvent"in window&&!ai,Np=Pn&&(!qu||ai&&8<ai&&11>=ai),wp=" ",kp=!1;function jp(r,l){switch(r){case"keyup":return GS.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Cp(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Ws=!1;function KS(r,l){switch(r){case"compositionend":return Cp(l);case"keypress":return l.which!==32?null:(kp=!0,wp);case"textInput":return r=l.data,r===wp&&kp?null:r;default:return null}}function JS(r,l){if(Ws)return r==="compositionend"||!qu&&jp(r,l)?(r=xp(),Fa=Hu=pr=null,Ws=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Np&&l.locale!=="ko"?null:l.data;default:return null}}var QS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ep(r){var l=r&&r.nodeName&&r.nodeName.toLowerCase();return l==="input"?!!QS[r.type]:l==="textarea"}function Ap(r,l,o,u){Xs?Zs?Zs.push(u):Zs=[u]:Xs=u,l=Lo(l,"onChange"),0<l.length&&(o=new Ya("onChange","change",null,o,u),r.push({event:o,listeners:l}))}var oi=null,ci=null;function XS(r){ox(r,0)}function Ja(r){var l=ni(r);if(cp(l))return r}function Tp(r,l){if(r==="change")return l}var Mp=!1;if(Pn){var Fu;if(Pn){var $u="oninput"in document;if(!$u){var Op=document.createElement("div");Op.setAttribute("oninput","return;"),$u=typeof Op.oninput=="function"}Fu=$u}else Fu=!1;Mp=Fu&&(!document.documentMode||9<document.documentMode)}function Rp(){oi&&(oi.detachEvent("onpropertychange",Dp),ci=oi=null)}function Dp(r){if(r.propertyName==="value"&&Ja(ci)){var l=[];Ap(l,ci,r,Lu(r)),gp(XS,l)}}function ZS(r,l,o){r==="focusin"?(Rp(),oi=l,ci=o,oi.attachEvent("onpropertychange",Dp)):r==="focusout"&&Rp()}function WS(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Ja(ci)}function e2(r,l){if(r==="click")return Ja(l)}function t2(r,l){if(r==="input"||r==="change")return Ja(l)}function n2(r,l){return r===l&&(r!==0||1/r===1/l)||r!==r&&l!==l}var Yt=typeof Object.is=="function"?Object.is:n2;function ui(r,l){if(Yt(r,l))return!0;if(typeof r!="object"||r===null||typeof l!="object"||l===null)return!1;var o=Object.keys(r),u=Object.keys(l);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var p=o[u];if(!vu.call(l,p)||!Yt(r[p],l[p]))return!1}return!0}function zp(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Lp(r,l){var o=zp(r);r=0;for(var u;o;){if(o.nodeType===3){if(u=r+o.textContent.length,r<=l&&u>=l)return{node:o,offset:l-r};r=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=zp(o)}}function Bp(r,l){return r&&l?r===l?!0:r&&r.nodeType===3?!1:l&&l.nodeType===3?Bp(r,l.parentNode):"contains"in r?r.contains(l):r.compareDocumentPosition?!!(r.compareDocumentPosition(l)&16):!1:!1}function _p(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var l=Va(r.document);l instanceof r.HTMLIFrameElement;){try{var o=typeof l.contentWindow.location.href=="string"}catch{o=!1}if(o)r=l.contentWindow;else break;l=Va(r.document)}return l}function Gu(r){var l=r&&r.nodeName&&r.nodeName.toLowerCase();return l&&(l==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||l==="textarea"||r.contentEditable==="true")}var r2=Pn&&"documentMode"in document&&11>=document.documentMode,el=null,Yu=null,di=null,Ku=!1;function Hp(r,l,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Ku||el==null||el!==Va(u)||(u=el,"selectionStart"in u&&Gu(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),di&&ui(di,u)||(di=u,u=Lo(Yu,"onSelect"),0<u.length&&(l=new Ya("onSelect","select",null,l,o),r.push({event:l,listeners:u}),l.target=el)))}function ls(r,l){var o={};return o[r.toLowerCase()]=l.toLowerCase(),o["Webkit"+r]="webkit"+l,o["Moz"+r]="moz"+l,o}var tl={animationend:ls("Animation","AnimationEnd"),animationiteration:ls("Animation","AnimationIteration"),animationstart:ls("Animation","AnimationStart"),transitionrun:ls("Transition","TransitionRun"),transitionstart:ls("Transition","TransitionStart"),transitioncancel:ls("Transition","TransitionCancel"),transitionend:ls("Transition","TransitionEnd")},Ju={},Up={};Pn&&(Up=document.createElement("div").style,"AnimationEvent"in window||(delete tl.animationend.animation,delete tl.animationiteration.animation,delete tl.animationstart.animation),"TransitionEvent"in window||delete tl.transitionend.transition);function is(r){if(Ju[r])return Ju[r];if(!tl[r])return r;var l=tl[r],o;for(o in l)if(l.hasOwnProperty(o)&&o in Up)return Ju[r]=l[o];return r}var Pp=is("animationend"),Ip=is("animationiteration"),Vp=is("animationstart"),s2=is("transitionrun"),l2=is("transitionstart"),i2=is("transitioncancel"),qp=is("transitionend"),Fp=new Map,Qu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Qu.push("scrollEnd");function bn(r,l){Fp.set(r,l),rs(l,[r])}var $p=new WeakMap;function ln(r,l){if(typeof r=="object"&&r!==null){var o=$p.get(r);return o!==void 0?o:(l={value:r,source:l,stack:ap(l)},$p.set(r,l),l)}return{value:r,source:l,stack:ap(l)}}var an=[],nl=0,Xu=0;function Qa(){for(var r=nl,l=Xu=nl=0;l<r;){var o=an[l];an[l++]=null;var u=an[l];an[l++]=null;var p=an[l];an[l++]=null;var x=an[l];if(an[l++]=null,u!==null&&p!==null){var N=u.pending;N===null?p.next=p:(p.next=N.next,N.next=p),u.pending=p}x!==0&&Gp(o,p,x)}}function Xa(r,l,o,u){an[nl++]=r,an[nl++]=l,an[nl++]=o,an[nl++]=u,Xu|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function Zu(r,l,o,u){return Xa(r,l,o,u),Za(r)}function rl(r,l){return Xa(r,null,null,l),Za(r)}function Gp(r,l,o){r.lanes|=o;var u=r.alternate;u!==null&&(u.lanes|=o);for(var p=!1,x=r.return;x!==null;)x.childLanes|=o,u=x.alternate,u!==null&&(u.childLanes|=o),x.tag===22&&(r=x.stateNode,r===null||r._visibility&1||(p=!0)),r=x,x=x.return;return r.tag===3?(x=r.stateNode,p&&l!==null&&(p=31-Gt(o),r=x.hiddenUpdates,u=r[p],u===null?r[p]=[l]:u.push(l),l.lane=o|536870912),x):null}function Za(r){if(50<Bi)throw Bi=0,sf=null,Error(s(185));for(var l=r.return;l!==null;)r=l,l=r.return;return r.tag===3?r.stateNode:null}var sl={};function a2(r,l,o,u){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kt(r,l,o,u){return new a2(r,l,o,u)}function Wu(r){return r=r.prototype,!(!r||!r.isReactComponent)}function In(r,l){var o=r.alternate;return o===null?(o=Kt(r.tag,l,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=l,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&65011712,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,l=r.dependencies,o.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o.refCleanup=r.refCleanup,o}function Yp(r,l){r.flags&=65011714;var o=r.alternate;return o===null?(r.childLanes=0,r.lanes=l,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,l=o.dependencies,r.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),r}function Wa(r,l,o,u,p,x){var N=0;if(u=r,typeof r=="function")Wu(r)&&(N=1);else if(typeof r=="string")N=cN(r,o,X.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case te:return r=Kt(31,o,l,p),r.elementType=te,r.lanes=x,r;case v:return as(o.children,p,x,l);case w:N=8,p|=24;break;case k:return r=Kt(12,o,l,p|2),r.elementType=k,r.lanes=x,r;case D:return r=Kt(13,o,l,p),r.elementType=D,r.lanes=x,r;case R:return r=Kt(19,o,l,p),r.elementType=R,r.lanes=x,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case E:case B:N=10;break e;case O:N=9;break e;case q:N=11;break e;case L:N=14;break e;case $:N=16,u=null;break e}N=29,o=Error(s(130,r===null?"null":typeof r,"")),u=null}return l=Kt(N,o,l,p),l.elementType=r,l.type=u,l.lanes=x,l}function as(r,l,o,u){return r=Kt(7,r,u,l),r.lanes=o,r}function ed(r,l,o){return r=Kt(6,r,null,l),r.lanes=o,r}function td(r,l,o){return l=Kt(4,r.children!==null?r.children:[],r.key,l),l.lanes=o,l.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},l}var ll=[],il=0,eo=null,to=0,on=[],cn=0,cs=null,Vn=1,qn="";function us(r,l){ll[il++]=to,ll[il++]=eo,eo=r,to=l}function Kp(r,l,o){on[cn++]=Vn,on[cn++]=qn,on[cn++]=cs,cs=r;var u=Vn;r=qn;var p=32-Gt(u)-1;u&=~(1<<p),o+=1;var x=32-Gt(l)+p;if(30<x){var N=p-p%5;x=(u&(1<<N)-1).toString(32),u>>=N,p-=N,Vn=1<<32-Gt(l)+p|o<<p|u,qn=x+r}else Vn=1<<x|o<<p|u,qn=r}function nd(r){r.return!==null&&(us(r,1),Kp(r,1,0))}function rd(r){for(;r===eo;)eo=ll[--il],ll[il]=null,to=ll[--il],ll[il]=null;for(;r===cs;)cs=on[--cn],on[cn]=null,qn=on[--cn],on[cn]=null,Vn=on[--cn],on[cn]=null}var Mt=null,Ge=null,Re=!1,ds=null,An=!1,sd=Error(s(519));function fs(r){var l=Error(s(418,""));throw mi(ln(l,r)),sd}function Jp(r){var l=r.stateNode,o=r.type,u=r.memoizedProps;switch(l[wt]=r,l[_t]=u,o){case"dialog":Ae("cancel",l),Ae("close",l);break;case"iframe":case"object":case"embed":Ae("load",l);break;case"video":case"audio":for(o=0;o<Hi.length;o++)Ae(Hi[o],l);break;case"source":Ae("error",l);break;case"img":case"image":case"link":Ae("error",l),Ae("load",l);break;case"details":Ae("toggle",l);break;case"input":Ae("invalid",l),up(l,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),Ia(l);break;case"select":Ae("invalid",l);break;case"textarea":Ae("invalid",l),fp(l,u.value,u.defaultValue,u.children),Ia(l)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||l.textContent===""+o||u.suppressHydrationWarning===!0||fx(l.textContent,o)?(u.popover!=null&&(Ae("beforetoggle",l),Ae("toggle",l)),u.onScroll!=null&&Ae("scroll",l),u.onScrollEnd!=null&&Ae("scrollend",l),u.onClick!=null&&(l.onclick=Bo),l=!0):l=!1,l||fs(r)}function Qp(r){for(Mt=r.return;Mt;)switch(Mt.tag){case 5:case 13:An=!1;return;case 27:case 3:An=!0;return;default:Mt=Mt.return}}function fi(r){if(r!==Mt)return!1;if(!Re)return Qp(r),Re=!0,!1;var l=r.tag,o;if((o=l!==3&&l!==27)&&((o=l===5)&&(o=r.type,o=!(o!=="form"&&o!=="button")||Sf(r.type,r.memoizedProps)),o=!o),o&&Ge&&fs(r),Qp(r),l===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));e:{for(r=r.nextSibling,l=0;r;){if(r.nodeType===8)if(o=r.data,o==="/$"){if(l===0){Ge=Sn(r.nextSibling);break e}l--}else o!=="$"&&o!=="$!"&&o!=="$?"||l++;r=r.nextSibling}Ge=null}}else l===27?(l=Ge,Or(r.type)?(r=jf,jf=null,Ge=r):Ge=l):Ge=Mt?Sn(r.stateNode.nextSibling):null;return!0}function hi(){Ge=Mt=null,Re=!1}function Xp(){var r=ds;return r!==null&&(It===null?It=r:It.push.apply(It,r),ds=null),r}function mi(r){ds===null?ds=[r]:ds.push(r)}var ld=H(null),hs=null,Fn=null;function gr(r,l,o){Q(ld,l._currentValue),l._currentValue=o}function $n(r){r._currentValue=ld.current,F(ld)}function id(r,l,o){for(;r!==null;){var u=r.alternate;if((r.childLanes&l)!==l?(r.childLanes|=l,u!==null&&(u.childLanes|=l)):u!==null&&(u.childLanes&l)!==l&&(u.childLanes|=l),r===o)break;r=r.return}}function ad(r,l,o,u){var p=r.child;for(p!==null&&(p.return=r);p!==null;){var x=p.dependencies;if(x!==null){var N=p.child;x=x.firstContext;e:for(;x!==null;){var j=x;x=p;for(var A=0;A<l.length;A++)if(j.context===l[A]){x.lanes|=o,j=x.alternate,j!==null&&(j.lanes|=o),id(x.return,o,r),u||(N=null);break e}x=j.next}}else if(p.tag===18){if(N=p.return,N===null)throw Error(s(341));N.lanes|=o,x=N.alternate,x!==null&&(x.lanes|=o),id(N,o,r),N=null}else N=p.child;if(N!==null)N.return=p;else for(N=p;N!==null;){if(N===r){N=null;break}if(p=N.sibling,p!==null){p.return=N.return,N=p;break}N=N.return}p=N}}function pi(r,l,o,u){r=null;for(var p=l,x=!1;p!==null;){if(!x){if((p.flags&524288)!==0)x=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var N=p.alternate;if(N===null)throw Error(s(387));if(N=N.memoizedProps,N!==null){var j=p.type;Yt(p.pendingProps.value,N.value)||(r!==null?r.push(j):r=[j])}}else if(p===lt.current){if(N=p.alternate,N===null)throw Error(s(387));N.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(r!==null?r.push(Fi):r=[Fi])}p=p.return}r!==null&&ad(l,r,o,u),l.flags|=262144}function no(r){for(r=r.firstContext;r!==null;){if(!Yt(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function ms(r){hs=r,Fn=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function kt(r){return Zp(hs,r)}function ro(r,l){return hs===null&&ms(r),Zp(r,l)}function Zp(r,l){var o=l._currentValue;if(l={context:l,memoizedValue:o,next:null},Fn===null){if(r===null)throw Error(s(308));Fn=l,r.dependencies={lanes:0,firstContext:l},r.flags|=524288}else Fn=Fn.next=l;return o}var o2=typeof AbortController<"u"?AbortController:function(){var r=[],l=this.signal={aborted:!1,addEventListener:function(o,u){r.push(u)}};this.abort=function(){l.aborted=!0,r.forEach(function(o){return o()})}},c2=n.unstable_scheduleCallback,u2=n.unstable_NormalPriority,nt={$$typeof:B,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function od(){return{controller:new o2,data:new Map,refCount:0}}function gi(r){r.refCount--,r.refCount===0&&c2(u2,function(){r.controller.abort()})}var xi=null,cd=0,al=0,ol=null;function d2(r,l){if(xi===null){var o=xi=[];cd=0,al=ff(),ol={status:"pending",value:void 0,then:function(u){o.push(u)}}}return cd++,l.then(Wp,Wp),l}function Wp(){if(--cd===0&&xi!==null){ol!==null&&(ol.status="fulfilled");var r=xi;xi=null,al=0,ol=null;for(var l=0;l<r.length;l++)(0,r[l])()}}function f2(r,l){var o=[],u={status:"pending",value:null,reason:null,then:function(p){o.push(p)}};return r.then(function(){u.status="fulfilled",u.value=l;for(var p=0;p<o.length;p++)(0,o[p])(l)},function(p){for(u.status="rejected",u.reason=p,p=0;p<o.length;p++)(0,o[p])(void 0)}),u}var eg=I.S;I.S=function(r,l){typeof l=="object"&&l!==null&&typeof l.then=="function"&&d2(r,l),eg!==null&&eg(r,l)};var ps=H(null);function ud(){var r=ps.current;return r!==null?r:Ie.pooledCache}function so(r,l){l===null?Q(ps,ps.current):Q(ps,l.pool)}function tg(){var r=ud();return r===null?null:{parent:nt._currentValue,pool:r}}var yi=Error(s(460)),ng=Error(s(474)),lo=Error(s(542)),dd={then:function(){}};function rg(r){return r=r.status,r==="fulfilled"||r==="rejected"}function io(){}function sg(r,l,o){switch(o=r[o],o===void 0?r.push(l):o!==l&&(l.then(io,io),l=o),l.status){case"fulfilled":return l.value;case"rejected":throw r=l.reason,ig(r),r;default:if(typeof l.status=="string")l.then(io,io);else{if(r=Ie,r!==null&&100<r.shellSuspendCounter)throw Error(s(482));r=l,r.status="pending",r.then(function(u){if(l.status==="pending"){var p=l;p.status="fulfilled",p.value=u}},function(u){if(l.status==="pending"){var p=l;p.status="rejected",p.reason=u}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw r=l.reason,ig(r),r}throw bi=l,yi}}var bi=null;function lg(){if(bi===null)throw Error(s(459));var r=bi;return bi=null,r}function ig(r){if(r===yi||r===lo)throw Error(s(483))}var xr=!1;function fd(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function hd(r,l){r=r.updateQueue,l.updateQueue===r&&(l.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function yr(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function br(r,l,o){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(ze&2)!==0){var p=u.pending;return p===null?l.next=l:(l.next=p.next,p.next=l),u.pending=l,l=Za(r),Gp(r,null,o),l}return Xa(r,u,l,o),Za(r)}function vi(r,l,o){if(l=l.updateQueue,l!==null&&(l=l.shared,(o&4194048)!==0)){var u=l.lanes;u&=r.pendingLanes,o|=u,l.lanes=o,Wm(r,o)}}function md(r,l){var o=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var p=null,x=null;if(o=o.firstBaseUpdate,o!==null){do{var N={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};x===null?p=x=N:x=x.next=N,o=o.next}while(o!==null);x===null?p=x=l:x=x.next=l}else p=x=l;o={baseState:u.baseState,firstBaseUpdate:p,lastBaseUpdate:x,shared:u.shared,callbacks:u.callbacks},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=l:r.next=l,o.lastBaseUpdate=l}var pd=!1;function Si(){if(pd){var r=ol;if(r!==null)throw r}}function Ni(r,l,o,u){pd=!1;var p=r.updateQueue;xr=!1;var x=p.firstBaseUpdate,N=p.lastBaseUpdate,j=p.shared.pending;if(j!==null){p.shared.pending=null;var A=j,U=A.next;A.next=null,N===null?x=U:N.next=U,N=A;var G=r.alternate;G!==null&&(G=G.updateQueue,j=G.lastBaseUpdate,j!==N&&(j===null?G.firstBaseUpdate=U:j.next=U,G.lastBaseUpdate=A))}if(x!==null){var J=p.baseState;N=0,G=U=A=null,j=x;do{var P=j.lane&-536870913,V=P!==j.lane;if(V?(Me&P)===P:(u&P)===P){P!==0&&P===al&&(pd=!0),G!==null&&(G=G.next={lane:0,tag:j.tag,payload:j.payload,callback:null,next:null});e:{var xe=r,he=j;P=l;var He=o;switch(he.tag){case 1:if(xe=he.payload,typeof xe=="function"){J=xe.call(He,J,P);break e}J=xe;break e;case 3:xe.flags=xe.flags&-65537|128;case 0:if(xe=he.payload,P=typeof xe=="function"?xe.call(He,J,P):xe,P==null)break e;J=g({},J,P);break e;case 2:xr=!0}}P=j.callback,P!==null&&(r.flags|=64,V&&(r.flags|=8192),V=p.callbacks,V===null?p.callbacks=[P]:V.push(P))}else V={lane:P,tag:j.tag,payload:j.payload,callback:j.callback,next:null},G===null?(U=G=V,A=J):G=G.next=V,N|=P;if(j=j.next,j===null){if(j=p.shared.pending,j===null)break;V=j,j=V.next,V.next=null,p.lastBaseUpdate=V,p.shared.pending=null}}while(!0);G===null&&(A=J),p.baseState=A,p.firstBaseUpdate=U,p.lastBaseUpdate=G,x===null&&(p.shared.lanes=0),Er|=N,r.lanes=N,r.memoizedState=J}}function ag(r,l){if(typeof r!="function")throw Error(s(191,r));r.call(l)}function og(r,l){var o=r.callbacks;if(o!==null)for(r.callbacks=null,r=0;r<o.length;r++)ag(o[r],l)}var cl=H(null),ao=H(0);function cg(r,l){r=Zn,Q(ao,r),Q(cl,l),Zn=r|l.baseLanes}function gd(){Q(ao,Zn),Q(cl,cl.current)}function xd(){Zn=ao.current,F(cl),F(ao)}var vr=0,we=null,Be=null,Ze=null,oo=!1,ul=!1,gs=!1,co=0,wi=0,dl=null,h2=0;function Qe(){throw Error(s(321))}function yd(r,l){if(l===null)return!1;for(var o=0;o<l.length&&o<r.length;o++)if(!Yt(r[o],l[o]))return!1;return!0}function bd(r,l,o,u,p,x){return vr=x,we=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,I.H=r===null||r.memoizedState===null?Gg:Yg,gs=!1,x=o(u,p),gs=!1,ul&&(x=dg(l,o,u,p)),ug(r),x}function ug(r){I.H=go;var l=Be!==null&&Be.next!==null;if(vr=0,Ze=Be=we=null,oo=!1,wi=0,dl=null,l)throw Error(s(300));r===null||at||(r=r.dependencies,r!==null&&no(r)&&(at=!0))}function dg(r,l,o,u){we=r;var p=0;do{if(ul&&(dl=null),wi=0,ul=!1,25<=p)throw Error(s(301));if(p+=1,Ze=Be=null,r.updateQueue!=null){var x=r.updateQueue;x.lastEffect=null,x.events=null,x.stores=null,x.memoCache!=null&&(x.memoCache.index=0)}I.H=v2,x=l(o,u)}while(ul);return x}function m2(){var r=I.H,l=r.useState()[0];return l=typeof l.then=="function"?ki(l):l,r=r.useState()[0],(Be!==null?Be.memoizedState:null)!==r&&(we.flags|=1024),l}function vd(){var r=co!==0;return co=0,r}function Sd(r,l,o){l.updateQueue=r.updateQueue,l.flags&=-2053,r.lanes&=~o}function Nd(r){if(oo){for(r=r.memoizedState;r!==null;){var l=r.queue;l!==null&&(l.pending=null),r=r.next}oo=!1}vr=0,Ze=Be=we=null,ul=!1,wi=co=0,dl=null}function Ut(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ze===null?we.memoizedState=Ze=r:Ze=Ze.next=r,Ze}function We(){if(Be===null){var r=we.alternate;r=r!==null?r.memoizedState:null}else r=Be.next;var l=Ze===null?we.memoizedState:Ze.next;if(l!==null)Ze=l,Be=r;else{if(r===null)throw we.alternate===null?Error(s(467)):Error(s(310));Be=r,r={memoizedState:Be.memoizedState,baseState:Be.baseState,baseQueue:Be.baseQueue,queue:Be.queue,next:null},Ze===null?we.memoizedState=Ze=r:Ze=Ze.next=r}return Ze}function wd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ki(r){var l=wi;return wi+=1,dl===null&&(dl=[]),r=sg(dl,r,l),l=we,(Ze===null?l.memoizedState:Ze.next)===null&&(l=l.alternate,I.H=l===null||l.memoizedState===null?Gg:Yg),r}function uo(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return ki(r);if(r.$$typeof===B)return kt(r)}throw Error(s(438,String(r)))}function kd(r){var l=null,o=we.updateQueue;if(o!==null&&(l=o.memoCache),l==null){var u=we.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(l={data:u.data.map(function(p){return p.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),o===null&&(o=wd(),we.updateQueue=o),o.memoCache=l,o=l.data[l.index],o===void 0)for(o=l.data[l.index]=Array(r),u=0;u<r;u++)o[u]=se;return l.index++,o}function Gn(r,l){return typeof l=="function"?l(r):l}function fo(r){var l=We();return jd(l,Be,r)}function jd(r,l,o){var u=r.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=o;var p=r.baseQueue,x=u.pending;if(x!==null){if(p!==null){var N=p.next;p.next=x.next,x.next=N}l.baseQueue=p=x,u.pending=null}if(x=r.baseState,p===null)r.memoizedState=x;else{l=p.next;var j=N=null,A=null,U=l,G=!1;do{var J=U.lane&-536870913;if(J!==U.lane?(Me&J)===J:(vr&J)===J){var P=U.revertLane;if(P===0)A!==null&&(A=A.next={lane:0,revertLane:0,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),J===al&&(G=!0);else if((vr&P)===P){U=U.next,P===al&&(G=!0);continue}else J={lane:0,revertLane:U.revertLane,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},A===null?(j=A=J,N=x):A=A.next=J,we.lanes|=P,Er|=P;J=U.action,gs&&o(x,J),x=U.hasEagerState?U.eagerState:o(x,J)}else P={lane:J,revertLane:U.revertLane,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},A===null?(j=A=P,N=x):A=A.next=P,we.lanes|=J,Er|=J;U=U.next}while(U!==null&&U!==l);if(A===null?N=x:A.next=j,!Yt(x,r.memoizedState)&&(at=!0,G&&(o=ol,o!==null)))throw o;r.memoizedState=x,r.baseState=N,r.baseQueue=A,u.lastRenderedState=x}return p===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function Cd(r){var l=We(),o=l.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=r;var u=o.dispatch,p=o.pending,x=l.memoizedState;if(p!==null){o.pending=null;var N=p=p.next;do x=r(x,N.action),N=N.next;while(N!==p);Yt(x,l.memoizedState)||(at=!0),l.memoizedState=x,l.baseQueue===null&&(l.baseState=x),o.lastRenderedState=x}return[x,u]}function fg(r,l,o){var u=we,p=We(),x=Re;if(x){if(o===void 0)throw Error(s(407));o=o()}else o=l();var N=!Yt((Be||p).memoizedState,o);N&&(p.memoizedState=o,at=!0),p=p.queue;var j=pg.bind(null,u,p,r);if(ji(2048,8,j,[r]),p.getSnapshot!==l||N||Ze!==null&&Ze.memoizedState.tag&1){if(u.flags|=2048,fl(9,ho(),mg.bind(null,u,p,o,l),null),Ie===null)throw Error(s(349));x||(vr&124)!==0||hg(u,l,o)}return o}function hg(r,l,o){r.flags|=16384,r={getSnapshot:l,value:o},l=we.updateQueue,l===null?(l=wd(),we.updateQueue=l,l.stores=[r]):(o=l.stores,o===null?l.stores=[r]:o.push(r))}function mg(r,l,o,u){l.value=o,l.getSnapshot=u,gg(l)&&xg(r)}function pg(r,l,o){return o(function(){gg(l)&&xg(r)})}function gg(r){var l=r.getSnapshot;r=r.value;try{var o=l();return!Yt(r,o)}catch{return!0}}function xg(r){var l=rl(r,2);l!==null&&Wt(l,r,2)}function Ed(r){var l=Ut();if(typeof r=="function"){var o=r;if(r=o(),gs){hr(!0);try{o()}finally{hr(!1)}}}return l.memoizedState=l.baseState=r,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gn,lastRenderedState:r},l}function yg(r,l,o,u){return r.baseState=o,jd(r,Be,typeof u=="function"?u:Gn)}function p2(r,l,o,u,p){if(po(r))throw Error(s(485));if(r=l.action,r!==null){var x={payload:p,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(N){x.listeners.push(N)}};I.T!==null?o(!0):x.isTransition=!1,u(x),o=l.pending,o===null?(x.next=l.pending=x,bg(l,x)):(x.next=o.next,l.pending=o.next=x)}}function bg(r,l){var o=l.action,u=l.payload,p=r.state;if(l.isTransition){var x=I.T,N={};I.T=N;try{var j=o(p,u),A=I.S;A!==null&&A(N,j),vg(r,l,j)}catch(U){Ad(r,l,U)}finally{I.T=x}}else try{x=o(p,u),vg(r,l,x)}catch(U){Ad(r,l,U)}}function vg(r,l,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){Sg(r,l,u)},function(u){return Ad(r,l,u)}):Sg(r,l,o)}function Sg(r,l,o){l.status="fulfilled",l.value=o,Ng(l),r.state=o,l=r.pending,l!==null&&(o=l.next,o===l?r.pending=null:(o=o.next,l.next=o,bg(r,o)))}function Ad(r,l,o){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do l.status="rejected",l.reason=o,Ng(l),l=l.next;while(l!==u)}r.action=null}function Ng(r){r=r.listeners;for(var l=0;l<r.length;l++)(0,r[l])()}function wg(r,l){return l}function kg(r,l){if(Re){var o=Ie.formState;if(o!==null){e:{var u=we;if(Re){if(Ge){t:{for(var p=Ge,x=An;p.nodeType!==8;){if(!x){p=null;break t}if(p=Sn(p.nextSibling),p===null){p=null;break t}}x=p.data,p=x==="F!"||x==="F"?p:null}if(p){Ge=Sn(p.nextSibling),u=p.data==="F!";break e}}fs(u)}u=!1}u&&(l=o[0])}}return o=Ut(),o.memoizedState=o.baseState=l,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wg,lastRenderedState:l},o.queue=u,o=qg.bind(null,we,u),u.dispatch=o,u=Ed(!1),x=Dd.bind(null,we,!1,u.queue),u=Ut(),p={state:l,dispatch:null,action:r,pending:null},u.queue=p,o=p2.bind(null,we,p,x,o),p.dispatch=o,u.memoizedState=r,[l,o,!1]}function jg(r){var l=We();return Cg(l,Be,r)}function Cg(r,l,o){if(l=jd(r,l,wg)[0],r=fo(Gn)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var u=ki(l)}catch(N){throw N===yi?lo:N}else u=l;l=We();var p=l.queue,x=p.dispatch;return o!==l.memoizedState&&(we.flags|=2048,fl(9,ho(),g2.bind(null,p,o),null)),[u,x,r]}function g2(r,l){r.action=l}function Eg(r){var l=We(),o=Be;if(o!==null)return Cg(l,o,r);We(),l=l.memoizedState,o=We();var u=o.queue.dispatch;return o.memoizedState=r,[l,u,!1]}function fl(r,l,o,u){return r={tag:r,create:o,deps:u,inst:l,next:null},l=we.updateQueue,l===null&&(l=wd(),we.updateQueue=l),o=l.lastEffect,o===null?l.lastEffect=r.next=r:(u=o.next,o.next=r,r.next=u,l.lastEffect=r),r}function ho(){return{destroy:void 0,resource:void 0}}function Ag(){return We().memoizedState}function mo(r,l,o,u){var p=Ut();u=u===void 0?null:u,we.flags|=r,p.memoizedState=fl(1|l,ho(),o,u)}function ji(r,l,o,u){var p=We();u=u===void 0?null:u;var x=p.memoizedState.inst;Be!==null&&u!==null&&yd(u,Be.memoizedState.deps)?p.memoizedState=fl(l,x,o,u):(we.flags|=r,p.memoizedState=fl(1|l,x,o,u))}function Tg(r,l){mo(8390656,8,r,l)}function Mg(r,l){ji(2048,8,r,l)}function Og(r,l){return ji(4,2,r,l)}function Rg(r,l){return ji(4,4,r,l)}function Dg(r,l){if(typeof l=="function"){r=r();var o=l(r);return function(){typeof o=="function"?o():l(null)}}if(l!=null)return r=r(),l.current=r,function(){l.current=null}}function zg(r,l,o){o=o!=null?o.concat([r]):null,ji(4,4,Dg.bind(null,l,r),o)}function Td(){}function Lg(r,l){var o=We();l=l===void 0?null:l;var u=o.memoizedState;return l!==null&&yd(l,u[1])?u[0]:(o.memoizedState=[r,l],r)}function Bg(r,l){var o=We();l=l===void 0?null:l;var u=o.memoizedState;if(l!==null&&yd(l,u[1]))return u[0];if(u=r(),gs){hr(!0);try{r()}finally{hr(!1)}}return o.memoizedState=[u,l],u}function Md(r,l,o){return o===void 0||(vr&1073741824)!==0?r.memoizedState=l:(r.memoizedState=o,r=U0(),we.lanes|=r,Er|=r,o)}function _g(r,l,o,u){return Yt(o,l)?o:cl.current!==null?(r=Md(r,o,u),Yt(r,l)||(at=!0),r):(vr&42)===0?(at=!0,r.memoizedState=o):(r=U0(),we.lanes|=r,Er|=r,l)}function Hg(r,l,o,u,p){var x=ne.p;ne.p=x!==0&&8>x?x:8;var N=I.T,j={};I.T=j,Dd(r,!1,l,o);try{var A=p(),U=I.S;if(U!==null&&U(j,A),A!==null&&typeof A=="object"&&typeof A.then=="function"){var G=f2(A,u);Ci(r,l,G,Zt(r))}else Ci(r,l,u,Zt(r))}catch(J){Ci(r,l,{then:function(){},status:"rejected",reason:J},Zt())}finally{ne.p=x,I.T=N}}function x2(){}function Od(r,l,o,u){if(r.tag!==5)throw Error(s(476));var p=Ug(r).queue;Hg(r,p,l,re,o===null?x2:function(){return Pg(r),o(u)})}function Ug(r){var l=r.memoizedState;if(l!==null)return l;l={memoizedState:re,baseState:re,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gn,lastRenderedState:re},next:null};var o={};return l.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gn,lastRenderedState:o},next:null},r.memoizedState=l,r=r.alternate,r!==null&&(r.memoizedState=l),l}function Pg(r){var l=Ug(r).next.queue;Ci(r,l,{},Zt())}function Rd(){return kt(Fi)}function Ig(){return We().memoizedState}function Vg(){return We().memoizedState}function y2(r){for(var l=r.return;l!==null;){switch(l.tag){case 24:case 3:var o=Zt();r=yr(o);var u=br(l,r,o);u!==null&&(Wt(u,l,o),vi(u,l,o)),l={cache:od()},r.payload=l;return}l=l.return}}function b2(r,l,o){var u=Zt();o={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},po(r)?Fg(l,o):(o=Zu(r,l,o,u),o!==null&&(Wt(o,r,u),$g(o,l,u)))}function qg(r,l,o){var u=Zt();Ci(r,l,o,u)}function Ci(r,l,o,u){var p={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(po(r))Fg(l,p);else{var x=r.alternate;if(r.lanes===0&&(x===null||x.lanes===0)&&(x=l.lastRenderedReducer,x!==null))try{var N=l.lastRenderedState,j=x(N,o);if(p.hasEagerState=!0,p.eagerState=j,Yt(j,N))return Xa(r,l,p,0),Ie===null&&Qa(),!1}catch{}finally{}if(o=Zu(r,l,p,u),o!==null)return Wt(o,r,u),$g(o,l,u),!0}return!1}function Dd(r,l,o,u){if(u={lane:2,revertLane:ff(),action:u,hasEagerState:!1,eagerState:null,next:null},po(r)){if(l)throw Error(s(479))}else l=Zu(r,o,u,2),l!==null&&Wt(l,r,2)}function po(r){var l=r.alternate;return r===we||l!==null&&l===we}function Fg(r,l){ul=oo=!0;var o=r.pending;o===null?l.next=l:(l.next=o.next,o.next=l),r.pending=l}function $g(r,l,o){if((o&4194048)!==0){var u=l.lanes;u&=r.pendingLanes,o|=u,l.lanes=o,Wm(r,o)}}var go={readContext:kt,use:uo,useCallback:Qe,useContext:Qe,useEffect:Qe,useImperativeHandle:Qe,useLayoutEffect:Qe,useInsertionEffect:Qe,useMemo:Qe,useReducer:Qe,useRef:Qe,useState:Qe,useDebugValue:Qe,useDeferredValue:Qe,useTransition:Qe,useSyncExternalStore:Qe,useId:Qe,useHostTransitionStatus:Qe,useFormState:Qe,useActionState:Qe,useOptimistic:Qe,useMemoCache:Qe,useCacheRefresh:Qe},Gg={readContext:kt,use:uo,useCallback:function(r,l){return Ut().memoizedState=[r,l===void 0?null:l],r},useContext:kt,useEffect:Tg,useImperativeHandle:function(r,l,o){o=o!=null?o.concat([r]):null,mo(4194308,4,Dg.bind(null,l,r),o)},useLayoutEffect:function(r,l){return mo(4194308,4,r,l)},useInsertionEffect:function(r,l){mo(4,2,r,l)},useMemo:function(r,l){var o=Ut();l=l===void 0?null:l;var u=r();if(gs){hr(!0);try{r()}finally{hr(!1)}}return o.memoizedState=[u,l],u},useReducer:function(r,l,o){var u=Ut();if(o!==void 0){var p=o(l);if(gs){hr(!0);try{o(l)}finally{hr(!1)}}}else p=l;return u.memoizedState=u.baseState=p,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:p},u.queue=r,r=r.dispatch=b2.bind(null,we,r),[u.memoizedState,r]},useRef:function(r){var l=Ut();return r={current:r},l.memoizedState=r},useState:function(r){r=Ed(r);var l=r.queue,o=qg.bind(null,we,l);return l.dispatch=o,[r.memoizedState,o]},useDebugValue:Td,useDeferredValue:function(r,l){var o=Ut();return Md(o,r,l)},useTransition:function(){var r=Ed(!1);return r=Hg.bind(null,we,r.queue,!0,!1),Ut().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,l,o){var u=we,p=Ut();if(Re){if(o===void 0)throw Error(s(407));o=o()}else{if(o=l(),Ie===null)throw Error(s(349));(Me&124)!==0||hg(u,l,o)}p.memoizedState=o;var x={value:o,getSnapshot:l};return p.queue=x,Tg(pg.bind(null,u,x,r),[r]),u.flags|=2048,fl(9,ho(),mg.bind(null,u,x,o,l),null),o},useId:function(){var r=Ut(),l=Ie.identifierPrefix;if(Re){var o=qn,u=Vn;o=(u&~(1<<32-Gt(u)-1)).toString(32)+o,l="«"+l+"R"+o,o=co++,0<o&&(l+="H"+o.toString(32)),l+="»"}else o=h2++,l="«"+l+"r"+o.toString(32)+"»";return r.memoizedState=l},useHostTransitionStatus:Rd,useFormState:kg,useActionState:kg,useOptimistic:function(r){var l=Ut();l.memoizedState=l.baseState=r;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=o,l=Dd.bind(null,we,!0,o),o.dispatch=l,[r,l]},useMemoCache:kd,useCacheRefresh:function(){return Ut().memoizedState=y2.bind(null,we)}},Yg={readContext:kt,use:uo,useCallback:Lg,useContext:kt,useEffect:Mg,useImperativeHandle:zg,useInsertionEffect:Og,useLayoutEffect:Rg,useMemo:Bg,useReducer:fo,useRef:Ag,useState:function(){return fo(Gn)},useDebugValue:Td,useDeferredValue:function(r,l){var o=We();return _g(o,Be.memoizedState,r,l)},useTransition:function(){var r=fo(Gn)[0],l=We().memoizedState;return[typeof r=="boolean"?r:ki(r),l]},useSyncExternalStore:fg,useId:Ig,useHostTransitionStatus:Rd,useFormState:jg,useActionState:jg,useOptimistic:function(r,l){var o=We();return yg(o,Be,r,l)},useMemoCache:kd,useCacheRefresh:Vg},v2={readContext:kt,use:uo,useCallback:Lg,useContext:kt,useEffect:Mg,useImperativeHandle:zg,useInsertionEffect:Og,useLayoutEffect:Rg,useMemo:Bg,useReducer:Cd,useRef:Ag,useState:function(){return Cd(Gn)},useDebugValue:Td,useDeferredValue:function(r,l){var o=We();return Be===null?Md(o,r,l):_g(o,Be.memoizedState,r,l)},useTransition:function(){var r=Cd(Gn)[0],l=We().memoizedState;return[typeof r=="boolean"?r:ki(r),l]},useSyncExternalStore:fg,useId:Ig,useHostTransitionStatus:Rd,useFormState:Eg,useActionState:Eg,useOptimistic:function(r,l){var o=We();return Be!==null?yg(o,Be,r,l):(o.baseState=r,[r,o.queue.dispatch])},useMemoCache:kd,useCacheRefresh:Vg},hl=null,Ei=0;function xo(r){var l=Ei;return Ei+=1,hl===null&&(hl=[]),sg(hl,r,l)}function Ai(r,l){l=l.props.ref,r.ref=l!==void 0?l:null}function yo(r,l){throw l.$$typeof===y?Error(s(525)):(r=Object.prototype.toString.call(l),Error(s(31,r==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":r)))}function Kg(r){var l=r._init;return l(r._payload)}function Jg(r){function l(z,M){if(r){var _=z.deletions;_===null?(z.deletions=[M],z.flags|=16):_.push(M)}}function o(z,M){if(!r)return null;for(;M!==null;)l(z,M),M=M.sibling;return null}function u(z){for(var M=new Map;z!==null;)z.key!==null?M.set(z.key,z):M.set(z.index,z),z=z.sibling;return M}function p(z,M){return z=In(z,M),z.index=0,z.sibling=null,z}function x(z,M,_){return z.index=_,r?(_=z.alternate,_!==null?(_=_.index,_<M?(z.flags|=67108866,M):_):(z.flags|=67108866,M)):(z.flags|=1048576,M)}function N(z){return r&&z.alternate===null&&(z.flags|=67108866),z}function j(z,M,_,Y){return M===null||M.tag!==6?(M=ed(_,z.mode,Y),M.return=z,M):(M=p(M,_),M.return=z,M)}function A(z,M,_,Y){var oe=_.type;return oe===v?G(z,M,_.props.children,Y,_.key):M!==null&&(M.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===$&&Kg(oe)===M.type)?(M=p(M,_.props),Ai(M,_),M.return=z,M):(M=Wa(_.type,_.key,_.props,null,z.mode,Y),Ai(M,_),M.return=z,M)}function U(z,M,_,Y){return M===null||M.tag!==4||M.stateNode.containerInfo!==_.containerInfo||M.stateNode.implementation!==_.implementation?(M=td(_,z.mode,Y),M.return=z,M):(M=p(M,_.children||[]),M.return=z,M)}function G(z,M,_,Y,oe){return M===null||M.tag!==7?(M=as(_,z.mode,Y,oe),M.return=z,M):(M=p(M,_),M.return=z,M)}function J(z,M,_){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=ed(""+M,z.mode,_),M.return=z,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case b:return _=Wa(M.type,M.key,M.props,null,z.mode,_),Ai(_,M),_.return=z,_;case S:return M=td(M,z.mode,_),M.return=z,M;case $:var Y=M._init;return M=Y(M._payload),J(z,M,_)}if(Te(M)||Z(M))return M=as(M,z.mode,_,null),M.return=z,M;if(typeof M.then=="function")return J(z,xo(M),_);if(M.$$typeof===B)return J(z,ro(z,M),_);yo(z,M)}return null}function P(z,M,_,Y){var oe=M!==null?M.key:null;if(typeof _=="string"&&_!==""||typeof _=="number"||typeof _=="bigint")return oe!==null?null:j(z,M,""+_,Y);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case b:return _.key===oe?A(z,M,_,Y):null;case S:return _.key===oe?U(z,M,_,Y):null;case $:return oe=_._init,_=oe(_._payload),P(z,M,_,Y)}if(Te(_)||Z(_))return oe!==null?null:G(z,M,_,Y,null);if(typeof _.then=="function")return P(z,M,xo(_),Y);if(_.$$typeof===B)return P(z,M,ro(z,_),Y);yo(z,_)}return null}function V(z,M,_,Y,oe){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return z=z.get(_)||null,j(M,z,""+Y,oe);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case b:return z=z.get(Y.key===null?_:Y.key)||null,A(M,z,Y,oe);case S:return z=z.get(Y.key===null?_:Y.key)||null,U(M,z,Y,oe);case $:var je=Y._init;return Y=je(Y._payload),V(z,M,_,Y,oe)}if(Te(Y)||Z(Y))return z=z.get(_)||null,G(M,z,Y,oe,null);if(typeof Y.then=="function")return V(z,M,_,xo(Y),oe);if(Y.$$typeof===B)return V(z,M,_,ro(M,Y),oe);yo(M,Y)}return null}function xe(z,M,_,Y){for(var oe=null,je=null,de=M,pe=M=0,ct=null;de!==null&&pe<_.length;pe++){de.index>pe?(ct=de,de=null):ct=de.sibling;var Oe=P(z,de,_[pe],Y);if(Oe===null){de===null&&(de=ct);break}r&&de&&Oe.alternate===null&&l(z,de),M=x(Oe,M,pe),je===null?oe=Oe:je.sibling=Oe,je=Oe,de=ct}if(pe===_.length)return o(z,de),Re&&us(z,pe),oe;if(de===null){for(;pe<_.length;pe++)de=J(z,_[pe],Y),de!==null&&(M=x(de,M,pe),je===null?oe=de:je.sibling=de,je=de);return Re&&us(z,pe),oe}for(de=u(de);pe<_.length;pe++)ct=V(de,z,pe,_[pe],Y),ct!==null&&(r&&ct.alternate!==null&&de.delete(ct.key===null?pe:ct.key),M=x(ct,M,pe),je===null?oe=ct:je.sibling=ct,je=ct);return r&&de.forEach(function(Br){return l(z,Br)}),Re&&us(z,pe),oe}function he(z,M,_,Y){if(_==null)throw Error(s(151));for(var oe=null,je=null,de=M,pe=M=0,ct=null,Oe=_.next();de!==null&&!Oe.done;pe++,Oe=_.next()){de.index>pe?(ct=de,de=null):ct=de.sibling;var Br=P(z,de,Oe.value,Y);if(Br===null){de===null&&(de=ct);break}r&&de&&Br.alternate===null&&l(z,de),M=x(Br,M,pe),je===null?oe=Br:je.sibling=Br,je=Br,de=ct}if(Oe.done)return o(z,de),Re&&us(z,pe),oe;if(de===null){for(;!Oe.done;pe++,Oe=_.next())Oe=J(z,Oe.value,Y),Oe!==null&&(M=x(Oe,M,pe),je===null?oe=Oe:je.sibling=Oe,je=Oe);return Re&&us(z,pe),oe}for(de=u(de);!Oe.done;pe++,Oe=_.next())Oe=V(de,z,pe,Oe.value,Y),Oe!==null&&(r&&Oe.alternate!==null&&de.delete(Oe.key===null?pe:Oe.key),M=x(Oe,M,pe),je===null?oe=Oe:je.sibling=Oe,je=Oe);return r&&de.forEach(function(SN){return l(z,SN)}),Re&&us(z,pe),oe}function He(z,M,_,Y){if(typeof _=="object"&&_!==null&&_.type===v&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case b:e:{for(var oe=_.key;M!==null;){if(M.key===oe){if(oe=_.type,oe===v){if(M.tag===7){o(z,M.sibling),Y=p(M,_.props.children),Y.return=z,z=Y;break e}}else if(M.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===$&&Kg(oe)===M.type){o(z,M.sibling),Y=p(M,_.props),Ai(Y,_),Y.return=z,z=Y;break e}o(z,M);break}else l(z,M);M=M.sibling}_.type===v?(Y=as(_.props.children,z.mode,Y,_.key),Y.return=z,z=Y):(Y=Wa(_.type,_.key,_.props,null,z.mode,Y),Ai(Y,_),Y.return=z,z=Y)}return N(z);case S:e:{for(oe=_.key;M!==null;){if(M.key===oe)if(M.tag===4&&M.stateNode.containerInfo===_.containerInfo&&M.stateNode.implementation===_.implementation){o(z,M.sibling),Y=p(M,_.children||[]),Y.return=z,z=Y;break e}else{o(z,M);break}else l(z,M);M=M.sibling}Y=td(_,z.mode,Y),Y.return=z,z=Y}return N(z);case $:return oe=_._init,_=oe(_._payload),He(z,M,_,Y)}if(Te(_))return xe(z,M,_,Y);if(Z(_)){if(oe=Z(_),typeof oe!="function")throw Error(s(150));return _=oe.call(_),he(z,M,_,Y)}if(typeof _.then=="function")return He(z,M,xo(_),Y);if(_.$$typeof===B)return He(z,M,ro(z,_),Y);yo(z,_)}return typeof _=="string"&&_!==""||typeof _=="number"||typeof _=="bigint"?(_=""+_,M!==null&&M.tag===6?(o(z,M.sibling),Y=p(M,_),Y.return=z,z=Y):(o(z,M),Y=ed(_,z.mode,Y),Y.return=z,z=Y),N(z)):o(z,M)}return function(z,M,_,Y){try{Ei=0;var oe=He(z,M,_,Y);return hl=null,oe}catch(de){if(de===yi||de===lo)throw de;var je=Kt(29,de,null,z.mode);return je.lanes=Y,je.return=z,je}finally{}}}var ml=Jg(!0),Qg=Jg(!1),un=H(null),Tn=null;function Sr(r){var l=r.alternate;Q(rt,rt.current&1),Q(un,r),Tn===null&&(l===null||cl.current!==null||l.memoizedState!==null)&&(Tn=r)}function Xg(r){if(r.tag===22){if(Q(rt,rt.current),Q(un,r),Tn===null){var l=r.alternate;l!==null&&l.memoizedState!==null&&(Tn=r)}}else Nr()}function Nr(){Q(rt,rt.current),Q(un,un.current)}function Yn(r){F(un),Tn===r&&(Tn=null),F(rt)}var rt=H(0);function bo(r){for(var l=r;l!==null;){if(l.tag===13){var o=l.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||kf(o)))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===r)break;for(;l.sibling===null;){if(l.return===null||l.return===r)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}function zd(r,l,o,u){l=r.memoizedState,o=o(u,l),o=o==null?l:g({},l,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var Ld={enqueueSetState:function(r,l,o){r=r._reactInternals;var u=Zt(),p=yr(u);p.payload=l,o!=null&&(p.callback=o),l=br(r,p,u),l!==null&&(Wt(l,r,u),vi(l,r,u))},enqueueReplaceState:function(r,l,o){r=r._reactInternals;var u=Zt(),p=yr(u);p.tag=1,p.payload=l,o!=null&&(p.callback=o),l=br(r,p,u),l!==null&&(Wt(l,r,u),vi(l,r,u))},enqueueForceUpdate:function(r,l){r=r._reactInternals;var o=Zt(),u=yr(o);u.tag=2,l!=null&&(u.callback=l),l=br(r,u,o),l!==null&&(Wt(l,r,o),vi(l,r,o))}};function Zg(r,l,o,u,p,x,N){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,x,N):l.prototype&&l.prototype.isPureReactComponent?!ui(o,u)||!ui(p,x):!0}function Wg(r,l,o,u){r=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(o,u),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(o,u),l.state!==r&&Ld.enqueueReplaceState(l,l.state,null)}function xs(r,l){var o=l;if("ref"in l){o={};for(var u in l)u!=="ref"&&(o[u]=l[u])}if(r=r.defaultProps){o===l&&(o=g({},o));for(var p in r)o[p]===void 0&&(o[p]=r[p])}return o}var vo=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function e0(r){vo(r)}function t0(r){console.error(r)}function n0(r){vo(r)}function So(r,l){try{var o=r.onUncaughtError;o(l.value,{componentStack:l.stack})}catch(u){setTimeout(function(){throw u})}}function r0(r,l,o){try{var u=r.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function Bd(r,l,o){return o=yr(o),o.tag=3,o.payload={element:null},o.callback=function(){So(r,l)},o}function s0(r){return r=yr(r),r.tag=3,r}function l0(r,l,o,u){var p=o.type.getDerivedStateFromError;if(typeof p=="function"){var x=u.value;r.payload=function(){return p(x)},r.callback=function(){r0(l,o,u)}}var N=o.stateNode;N!==null&&typeof N.componentDidCatch=="function"&&(r.callback=function(){r0(l,o,u),typeof p!="function"&&(Ar===null?Ar=new Set([this]):Ar.add(this));var j=u.stack;this.componentDidCatch(u.value,{componentStack:j!==null?j:""})})}function S2(r,l,o,u,p){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(l=o.alternate,l!==null&&pi(l,o,p,!0),o=un.current,o!==null){switch(o.tag){case 13:return Tn===null?af():o.alternate===null&&Ye===0&&(Ye=3),o.flags&=-257,o.flags|=65536,o.lanes=p,u===dd?o.flags|=16384:(l=o.updateQueue,l===null?o.updateQueue=new Set([u]):l.add(u),cf(r,u,p)),!1;case 22:return o.flags|=65536,u===dd?o.flags|=16384:(l=o.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=l):(o=l.retryQueue,o===null?l.retryQueue=new Set([u]):o.add(u)),cf(r,u,p)),!1}throw Error(s(435,o.tag))}return cf(r,u,p),af(),!1}if(Re)return l=un.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=p,u!==sd&&(r=Error(s(422),{cause:u}),mi(ln(r,o)))):(u!==sd&&(l=Error(s(423),{cause:u}),mi(ln(l,o))),r=r.current.alternate,r.flags|=65536,p&=-p,r.lanes|=p,u=ln(u,o),p=Bd(r.stateNode,u,p),md(r,p),Ye!==4&&(Ye=2)),!1;var x=Error(s(520),{cause:u});if(x=ln(x,o),Li===null?Li=[x]:Li.push(x),Ye!==4&&(Ye=2),l===null)return!0;u=ln(u,o),o=l;do{switch(o.tag){case 3:return o.flags|=65536,r=p&-p,o.lanes|=r,r=Bd(o.stateNode,u,r),md(o,r),!1;case 1:if(l=o.type,x=o.stateNode,(o.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Ar===null||!Ar.has(x))))return o.flags|=65536,p&=-p,o.lanes|=p,p=s0(p),l0(p,r,o,u),md(o,p),!1}o=o.return}while(o!==null);return!1}var i0=Error(s(461)),at=!1;function gt(r,l,o,u){l.child=r===null?Qg(l,null,o,u):ml(l,r.child,o,u)}function a0(r,l,o,u,p){o=o.render;var x=l.ref;if("ref"in u){var N={};for(var j in u)j!=="ref"&&(N[j]=u[j])}else N=u;return ms(l),u=bd(r,l,o,N,x,p),j=vd(),r!==null&&!at?(Sd(r,l,p),Kn(r,l,p)):(Re&&j&&nd(l),l.flags|=1,gt(r,l,u,p),l.child)}function o0(r,l,o,u,p){if(r===null){var x=o.type;return typeof x=="function"&&!Wu(x)&&x.defaultProps===void 0&&o.compare===null?(l.tag=15,l.type=x,c0(r,l,x,u,p)):(r=Wa(o.type,null,u,l,l.mode,p),r.ref=l.ref,r.return=l,l.child=r)}if(x=r.child,!Fd(r,p)){var N=x.memoizedProps;if(o=o.compare,o=o!==null?o:ui,o(N,u)&&r.ref===l.ref)return Kn(r,l,p)}return l.flags|=1,r=In(x,u),r.ref=l.ref,r.return=l,l.child=r}function c0(r,l,o,u,p){if(r!==null){var x=r.memoizedProps;if(ui(x,u)&&r.ref===l.ref)if(at=!1,l.pendingProps=u=x,Fd(r,p))(r.flags&131072)!==0&&(at=!0);else return l.lanes=r.lanes,Kn(r,l,p)}return _d(r,l,o,u,p)}function u0(r,l,o){var u=l.pendingProps,p=u.children,x=r!==null?r.memoizedState:null;if(u.mode==="hidden"){if((l.flags&128)!==0){if(u=x!==null?x.baseLanes|o:o,r!==null){for(p=l.child=r.child,x=0;p!==null;)x=x|p.lanes|p.childLanes,p=p.sibling;l.childLanes=x&~u}else l.childLanes=0,l.child=null;return d0(r,l,u,o)}if((o&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},r!==null&&so(l,x!==null?x.cachePool:null),x!==null?cg(l,x):gd(),Xg(l);else return l.lanes=l.childLanes=536870912,d0(r,l,x!==null?x.baseLanes|o:o,o)}else x!==null?(so(l,x.cachePool),cg(l,x),Nr(),l.memoizedState=null):(r!==null&&so(l,null),gd(),Nr());return gt(r,l,p,o),l.child}function d0(r,l,o,u){var p=ud();return p=p===null?null:{parent:nt._currentValue,pool:p},l.memoizedState={baseLanes:o,cachePool:p},r!==null&&so(l,null),gd(),Xg(l),r!==null&&pi(r,l,u,!0),null}function No(r,l){var o=l.ref;if(o===null)r!==null&&r.ref!==null&&(l.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(s(284));(r===null||r.ref!==o)&&(l.flags|=4194816)}}function _d(r,l,o,u,p){return ms(l),o=bd(r,l,o,u,void 0,p),u=vd(),r!==null&&!at?(Sd(r,l,p),Kn(r,l,p)):(Re&&u&&nd(l),l.flags|=1,gt(r,l,o,p),l.child)}function f0(r,l,o,u,p,x){return ms(l),l.updateQueue=null,o=dg(l,u,o,p),ug(r),u=vd(),r!==null&&!at?(Sd(r,l,x),Kn(r,l,x)):(Re&&u&&nd(l),l.flags|=1,gt(r,l,o,x),l.child)}function h0(r,l,o,u,p){if(ms(l),l.stateNode===null){var x=sl,N=o.contextType;typeof N=="object"&&N!==null&&(x=kt(N)),x=new o(u,x),l.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=Ld,l.stateNode=x,x._reactInternals=l,x=l.stateNode,x.props=u,x.state=l.memoizedState,x.refs={},fd(l),N=o.contextType,x.context=typeof N=="object"&&N!==null?kt(N):sl,x.state=l.memoizedState,N=o.getDerivedStateFromProps,typeof N=="function"&&(zd(l,o,N,u),x.state=l.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(N=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),N!==x.state&&Ld.enqueueReplaceState(x,x.state,null),Ni(l,u,x,p),Si(),x.state=l.memoizedState),typeof x.componentDidMount=="function"&&(l.flags|=4194308),u=!0}else if(r===null){x=l.stateNode;var j=l.memoizedProps,A=xs(o,j);x.props=A;var U=x.context,G=o.contextType;N=sl,typeof G=="object"&&G!==null&&(N=kt(G));var J=o.getDerivedStateFromProps;G=typeof J=="function"||typeof x.getSnapshotBeforeUpdate=="function",j=l.pendingProps!==j,G||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(j||U!==N)&&Wg(l,x,u,N),xr=!1;var P=l.memoizedState;x.state=P,Ni(l,u,x,p),Si(),U=l.memoizedState,j||P!==U||xr?(typeof J=="function"&&(zd(l,o,J,u),U=l.memoizedState),(A=xr||Zg(l,o,A,u,P,U,N))?(G||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(l.flags|=4194308)):(typeof x.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=u,l.memoizedState=U),x.props=u,x.state=U,x.context=N,u=A):(typeof x.componentDidMount=="function"&&(l.flags|=4194308),u=!1)}else{x=l.stateNode,hd(r,l),N=l.memoizedProps,G=xs(o,N),x.props=G,J=l.pendingProps,P=x.context,U=o.contextType,A=sl,typeof U=="object"&&U!==null&&(A=kt(U)),j=o.getDerivedStateFromProps,(U=typeof j=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(N!==J||P!==A)&&Wg(l,x,u,A),xr=!1,P=l.memoizedState,x.state=P,Ni(l,u,x,p),Si();var V=l.memoizedState;N!==J||P!==V||xr||r!==null&&r.dependencies!==null&&no(r.dependencies)?(typeof j=="function"&&(zd(l,o,j,u),V=l.memoizedState),(G=xr||Zg(l,o,G,u,P,V,A)||r!==null&&r.dependencies!==null&&no(r.dependencies))?(U||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(u,V,A),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(u,V,A)),typeof x.componentDidUpdate=="function"&&(l.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof x.componentDidUpdate!="function"||N===r.memoizedProps&&P===r.memoizedState||(l.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||N===r.memoizedProps&&P===r.memoizedState||(l.flags|=1024),l.memoizedProps=u,l.memoizedState=V),x.props=u,x.state=V,x.context=A,u=G):(typeof x.componentDidUpdate!="function"||N===r.memoizedProps&&P===r.memoizedState||(l.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||N===r.memoizedProps&&P===r.memoizedState||(l.flags|=1024),u=!1)}return x=u,No(r,l),u=(l.flags&128)!==0,x||u?(x=l.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:x.render(),l.flags|=1,r!==null&&u?(l.child=ml(l,r.child,null,p),l.child=ml(l,null,o,p)):gt(r,l,o,p),l.memoizedState=x.state,r=l.child):r=Kn(r,l,p),r}function m0(r,l,o,u){return hi(),l.flags|=256,gt(r,l,o,u),l.child}var Hd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ud(r){return{baseLanes:r,cachePool:tg()}}function Pd(r,l,o){return r=r!==null?r.childLanes&~o:0,l&&(r|=dn),r}function p0(r,l,o){var u=l.pendingProps,p=!1,x=(l.flags&128)!==0,N;if((N=x)||(N=r!==null&&r.memoizedState===null?!1:(rt.current&2)!==0),N&&(p=!0,l.flags&=-129),N=(l.flags&32)!==0,l.flags&=-33,r===null){if(Re){if(p?Sr(l):Nr(),Re){var j=Ge,A;if(A=j){e:{for(A=j,j=An;A.nodeType!==8;){if(!j){j=null;break e}if(A=Sn(A.nextSibling),A===null){j=null;break e}}j=A}j!==null?(l.memoizedState={dehydrated:j,treeContext:cs!==null?{id:Vn,overflow:qn}:null,retryLane:536870912,hydrationErrors:null},A=Kt(18,null,null,0),A.stateNode=j,A.return=l,l.child=A,Mt=l,Ge=null,A=!0):A=!1}A||fs(l)}if(j=l.memoizedState,j!==null&&(j=j.dehydrated,j!==null))return kf(j)?l.lanes=32:l.lanes=536870912,null;Yn(l)}return j=u.children,u=u.fallback,p?(Nr(),p=l.mode,j=wo({mode:"hidden",children:j},p),u=as(u,p,o,null),j.return=l,u.return=l,j.sibling=u,l.child=j,p=l.child,p.memoizedState=Ud(o),p.childLanes=Pd(r,N,o),l.memoizedState=Hd,u):(Sr(l),Id(l,j))}if(A=r.memoizedState,A!==null&&(j=A.dehydrated,j!==null)){if(x)l.flags&256?(Sr(l),l.flags&=-257,l=Vd(r,l,o)):l.memoizedState!==null?(Nr(),l.child=r.child,l.flags|=128,l=null):(Nr(),p=u.fallback,j=l.mode,u=wo({mode:"visible",children:u.children},j),p=as(p,j,o,null),p.flags|=2,u.return=l,p.return=l,u.sibling=p,l.child=u,ml(l,r.child,null,o),u=l.child,u.memoizedState=Ud(o),u.childLanes=Pd(r,N,o),l.memoizedState=Hd,l=p);else if(Sr(l),kf(j)){if(N=j.nextSibling&&j.nextSibling.dataset,N)var U=N.dgst;N=U,u=Error(s(419)),u.stack="",u.digest=N,mi({value:u,source:null,stack:null}),l=Vd(r,l,o)}else if(at||pi(r,l,o,!1),N=(o&r.childLanes)!==0,at||N){if(N=Ie,N!==null&&(u=o&-o,u=(u&42)!==0?1:ku(u),u=(u&(N.suspendedLanes|o))!==0?0:u,u!==0&&u!==A.retryLane))throw A.retryLane=u,rl(r,u),Wt(N,r,u),i0;j.data==="$?"||af(),l=Vd(r,l,o)}else j.data==="$?"?(l.flags|=192,l.child=r.child,l=null):(r=A.treeContext,Ge=Sn(j.nextSibling),Mt=l,Re=!0,ds=null,An=!1,r!==null&&(on[cn++]=Vn,on[cn++]=qn,on[cn++]=cs,Vn=r.id,qn=r.overflow,cs=l),l=Id(l,u.children),l.flags|=4096);return l}return p?(Nr(),p=u.fallback,j=l.mode,A=r.child,U=A.sibling,u=In(A,{mode:"hidden",children:u.children}),u.subtreeFlags=A.subtreeFlags&65011712,U!==null?p=In(U,p):(p=as(p,j,o,null),p.flags|=2),p.return=l,u.return=l,u.sibling=p,l.child=u,u=p,p=l.child,j=r.child.memoizedState,j===null?j=Ud(o):(A=j.cachePool,A!==null?(U=nt._currentValue,A=A.parent!==U?{parent:U,pool:U}:A):A=tg(),j={baseLanes:j.baseLanes|o,cachePool:A}),p.memoizedState=j,p.childLanes=Pd(r,N,o),l.memoizedState=Hd,u):(Sr(l),o=r.child,r=o.sibling,o=In(o,{mode:"visible",children:u.children}),o.return=l,o.sibling=null,r!==null&&(N=l.deletions,N===null?(l.deletions=[r],l.flags|=16):N.push(r)),l.child=o,l.memoizedState=null,o)}function Id(r,l){return l=wo({mode:"visible",children:l},r.mode),l.return=r,r.child=l}function wo(r,l){return r=Kt(22,r,null,l),r.lanes=0,r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},r}function Vd(r,l,o){return ml(l,r.child,null,o),r=Id(l,l.pendingProps.children),r.flags|=2,l.memoizedState=null,r}function g0(r,l,o){r.lanes|=l;var u=r.alternate;u!==null&&(u.lanes|=l),id(r.return,l,o)}function qd(r,l,o,u,p){var x=r.memoizedState;x===null?r.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:p}:(x.isBackwards=l,x.rendering=null,x.renderingStartTime=0,x.last=u,x.tail=o,x.tailMode=p)}function x0(r,l,o){var u=l.pendingProps,p=u.revealOrder,x=u.tail;if(gt(r,l,u.children,o),u=rt.current,(u&2)!==0)u=u&1|2,l.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=l.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&g0(r,o,l);else if(r.tag===19)g0(r,o,l);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===l)break e;for(;r.sibling===null;){if(r.return===null||r.return===l)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}u&=1}switch(Q(rt,u),p){case"forwards":for(o=l.child,p=null;o!==null;)r=o.alternate,r!==null&&bo(r)===null&&(p=o),o=o.sibling;o=p,o===null?(p=l.child,l.child=null):(p=o.sibling,o.sibling=null),qd(l,!1,p,o,x);break;case"backwards":for(o=null,p=l.child,l.child=null;p!==null;){if(r=p.alternate,r!==null&&bo(r)===null){l.child=p;break}r=p.sibling,p.sibling=o,o=p,p=r}qd(l,!0,o,null,x);break;case"together":qd(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function Kn(r,l,o){if(r!==null&&(l.dependencies=r.dependencies),Er|=l.lanes,(o&l.childLanes)===0)if(r!==null){if(pi(r,l,o,!1),(o&l.childLanes)===0)return null}else return null;if(r!==null&&l.child!==r.child)throw Error(s(153));if(l.child!==null){for(r=l.child,o=In(r,r.pendingProps),l.child=o,o.return=l;r.sibling!==null;)r=r.sibling,o=o.sibling=In(r,r.pendingProps),o.return=l;o.sibling=null}return l.child}function Fd(r,l){return(r.lanes&l)!==0?!0:(r=r.dependencies,!!(r!==null&&no(r)))}function N2(r,l,o){switch(l.tag){case 3:De(l,l.stateNode.containerInfo),gr(l,nt,r.memoizedState.cache),hi();break;case 27:case 5:Vs(l);break;case 4:De(l,l.stateNode.containerInfo);break;case 10:gr(l,l.type,l.memoizedProps.value);break;case 13:var u=l.memoizedState;if(u!==null)return u.dehydrated!==null?(Sr(l),l.flags|=128,null):(o&l.child.childLanes)!==0?p0(r,l,o):(Sr(l),r=Kn(r,l,o),r!==null?r.sibling:null);Sr(l);break;case 19:var p=(r.flags&128)!==0;if(u=(o&l.childLanes)!==0,u||(pi(r,l,o,!1),u=(o&l.childLanes)!==0),p){if(u)return x0(r,l,o);l.flags|=128}if(p=l.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),Q(rt,rt.current),u)break;return null;case 22:case 23:return l.lanes=0,u0(r,l,o);case 24:gr(l,nt,r.memoizedState.cache)}return Kn(r,l,o)}function y0(r,l,o){if(r!==null)if(r.memoizedProps!==l.pendingProps)at=!0;else{if(!Fd(r,o)&&(l.flags&128)===0)return at=!1,N2(r,l,o);at=(r.flags&131072)!==0}else at=!1,Re&&(l.flags&1048576)!==0&&Kp(l,to,l.index);switch(l.lanes=0,l.tag){case 16:e:{r=l.pendingProps;var u=l.elementType,p=u._init;if(u=p(u._payload),l.type=u,typeof u=="function")Wu(u)?(r=xs(u,r),l.tag=1,l=h0(null,l,u,r,o)):(l.tag=0,l=_d(null,l,u,r,o));else{if(u!=null){if(p=u.$$typeof,p===q){l.tag=11,l=a0(null,l,u,r,o);break e}else if(p===L){l.tag=14,l=o0(null,l,u,r,o);break e}}throw l=ge(u)||u,Error(s(306,l,""))}}return l;case 0:return _d(r,l,l.type,l.pendingProps,o);case 1:return u=l.type,p=xs(u,l.pendingProps),h0(r,l,u,p,o);case 3:e:{if(De(l,l.stateNode.containerInfo),r===null)throw Error(s(387));u=l.pendingProps;var x=l.memoizedState;p=x.element,hd(r,l),Ni(l,u,null,o);var N=l.memoizedState;if(u=N.cache,gr(l,nt,u),u!==x.cache&&ad(l,[nt],o,!0),Si(),u=N.element,x.isDehydrated)if(x={element:u,isDehydrated:!1,cache:N.cache},l.updateQueue.baseState=x,l.memoizedState=x,l.flags&256){l=m0(r,l,u,o);break e}else if(u!==p){p=ln(Error(s(424)),l),mi(p),l=m0(r,l,u,o);break e}else{switch(r=l.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(Ge=Sn(r.firstChild),Mt=l,Re=!0,ds=null,An=!0,o=Qg(l,null,u,o),l.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(hi(),u===p){l=Kn(r,l,o);break e}gt(r,l,u,o)}l=l.child}return l;case 26:return No(r,l),r===null?(o=Nx(l.type,null,l.pendingProps,null))?l.memoizedState=o:Re||(o=l.type,r=l.pendingProps,u=_o(le.current).createElement(o),u[wt]=l,u[_t]=r,yt(u,o,r),it(u),l.stateNode=u):l.memoizedState=Nx(l.type,r.memoizedProps,l.pendingProps,r.memoizedState),null;case 27:return Vs(l),r===null&&Re&&(u=l.stateNode=bx(l.type,l.pendingProps,le.current),Mt=l,An=!0,p=Ge,Or(l.type)?(jf=p,Ge=Sn(u.firstChild)):Ge=p),gt(r,l,l.pendingProps.children,o),No(r,l),r===null&&(l.flags|=4194304),l.child;case 5:return r===null&&Re&&((p=u=Ge)&&(u=Q2(u,l.type,l.pendingProps,An),u!==null?(l.stateNode=u,Mt=l,Ge=Sn(u.firstChild),An=!1,p=!0):p=!1),p||fs(l)),Vs(l),p=l.type,x=l.pendingProps,N=r!==null?r.memoizedProps:null,u=x.children,Sf(p,x)?u=null:N!==null&&Sf(p,N)&&(l.flags|=32),l.memoizedState!==null&&(p=bd(r,l,m2,null,null,o),Fi._currentValue=p),No(r,l),gt(r,l,u,o),l.child;case 6:return r===null&&Re&&((r=o=Ge)&&(o=X2(o,l.pendingProps,An),o!==null?(l.stateNode=o,Mt=l,Ge=null,r=!0):r=!1),r||fs(l)),null;case 13:return p0(r,l,o);case 4:return De(l,l.stateNode.containerInfo),u=l.pendingProps,r===null?l.child=ml(l,null,u,o):gt(r,l,u,o),l.child;case 11:return a0(r,l,l.type,l.pendingProps,o);case 7:return gt(r,l,l.pendingProps,o),l.child;case 8:return gt(r,l,l.pendingProps.children,o),l.child;case 12:return gt(r,l,l.pendingProps.children,o),l.child;case 10:return u=l.pendingProps,gr(l,l.type,u.value),gt(r,l,u.children,o),l.child;case 9:return p=l.type._context,u=l.pendingProps.children,ms(l),p=kt(p),u=u(p),l.flags|=1,gt(r,l,u,o),l.child;case 14:return o0(r,l,l.type,l.pendingProps,o);case 15:return c0(r,l,l.type,l.pendingProps,o);case 19:return x0(r,l,o);case 31:return u=l.pendingProps,o=l.mode,u={mode:u.mode,children:u.children},r===null?(o=wo(u,o),o.ref=l.ref,l.child=o,o.return=l,l=o):(o=In(r.child,u),o.ref=l.ref,l.child=o,o.return=l,l=o),l;case 22:return u0(r,l,o);case 24:return ms(l),u=kt(nt),r===null?(p=ud(),p===null&&(p=Ie,x=od(),p.pooledCache=x,x.refCount++,x!==null&&(p.pooledCacheLanes|=o),p=x),l.memoizedState={parent:u,cache:p},fd(l),gr(l,nt,p)):((r.lanes&o)!==0&&(hd(r,l),Ni(l,null,null,o),Si()),p=r.memoizedState,x=l.memoizedState,p.parent!==u?(p={parent:u,cache:u},l.memoizedState=p,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=p),gr(l,nt,u)):(u=x.cache,gr(l,nt,u),u!==p.cache&&ad(l,[nt],o,!0))),gt(r,l,l.pendingProps.children,o),l.child;case 29:throw l.pendingProps}throw Error(s(156,l.tag))}function Jn(r){r.flags|=4}function b0(r,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!Ex(l)){if(l=un.current,l!==null&&((Me&4194048)===Me?Tn!==null:(Me&62914560)!==Me&&(Me&536870912)===0||l!==Tn))throw bi=dd,ng;r.flags|=8192}}function ko(r,l){l!==null&&(r.flags|=4),r.flags&16384&&(l=r.tag!==22?Xm():536870912,r.lanes|=l,yl|=l)}function Ti(r,l){if(!Re)switch(r.tailMode){case"hidden":l=r.tail;for(var o=null;l!==null;)l.alternate!==null&&(o=l),l=l.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?l||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function $e(r){var l=r.alternate!==null&&r.alternate.child===r.child,o=0,u=0;if(l)for(var p=r.child;p!==null;)o|=p.lanes|p.childLanes,u|=p.subtreeFlags&65011712,u|=p.flags&65011712,p.return=r,p=p.sibling;else for(p=r.child;p!==null;)o|=p.lanes|p.childLanes,u|=p.subtreeFlags,u|=p.flags,p.return=r,p=p.sibling;return r.subtreeFlags|=u,r.childLanes=o,l}function w2(r,l,o){var u=l.pendingProps;switch(rd(l),l.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $e(l),null;case 1:return $e(l),null;case 3:return o=l.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),l.memoizedState.cache!==u&&(l.flags|=2048),$n(nt),Ft(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(r===null||r.child===null)&&(fi(l)?Jn(l):r===null||r.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Xp())),$e(l),null;case 26:return o=l.memoizedState,r===null?(Jn(l),o!==null?($e(l),b0(l,o)):($e(l),l.flags&=-16777217)):o?o!==r.memoizedState?(Jn(l),$e(l),b0(l,o)):($e(l),l.flags&=-16777217):(r.memoizedProps!==u&&Jn(l),$e(l),l.flags&=-16777217),null;case 27:Bt(l),o=le.current;var p=l.type;if(r!==null&&l.stateNode!=null)r.memoizedProps!==u&&Jn(l);else{if(!u){if(l.stateNode===null)throw Error(s(166));return $e(l),null}r=X.current,fi(l)?Jp(l):(r=bx(p,u,o),l.stateNode=r,Jn(l))}return $e(l),null;case 5:if(Bt(l),o=l.type,r!==null&&l.stateNode!=null)r.memoizedProps!==u&&Jn(l);else{if(!u){if(l.stateNode===null)throw Error(s(166));return $e(l),null}if(r=X.current,fi(l))Jp(l);else{switch(p=_o(le.current),r){case 1:r=p.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:r=p.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":r=p.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":r=p.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":r=p.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof u.is=="string"?p.createElement("select",{is:u.is}):p.createElement("select"),u.multiple?r.multiple=!0:u.size&&(r.size=u.size);break;default:r=typeof u.is=="string"?p.createElement(o,{is:u.is}):p.createElement(o)}}r[wt]=l,r[_t]=u;e:for(p=l.child;p!==null;){if(p.tag===5||p.tag===6)r.appendChild(p.stateNode);else if(p.tag!==4&&p.tag!==27&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===l)break e;for(;p.sibling===null;){if(p.return===null||p.return===l)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}l.stateNode=r;e:switch(yt(r,o,u),o){case"button":case"input":case"select":case"textarea":r=!!u.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&Jn(l)}}return $e(l),l.flags&=-16777217,null;case 6:if(r&&l.stateNode!=null)r.memoizedProps!==u&&Jn(l);else{if(typeof u!="string"&&l.stateNode===null)throw Error(s(166));if(r=le.current,fi(l)){if(r=l.stateNode,o=l.memoizedProps,u=null,p=Mt,p!==null)switch(p.tag){case 27:case 5:u=p.memoizedProps}r[wt]=l,r=!!(r.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||fx(r.nodeValue,o)),r||fs(l)}else r=_o(r).createTextNode(u),r[wt]=l,l.stateNode=r}return $e(l),null;case 13:if(u=l.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(p=fi(l),u!==null&&u.dehydrated!==null){if(r===null){if(!p)throw Error(s(318));if(p=l.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(s(317));p[wt]=l}else hi(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;$e(l),p=!1}else p=Xp(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=p),p=!0;if(!p)return l.flags&256?(Yn(l),l):(Yn(l),null)}if(Yn(l),(l.flags&128)!==0)return l.lanes=o,l;if(o=u!==null,r=r!==null&&r.memoizedState!==null,o){u=l.child,p=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(p=u.alternate.memoizedState.cachePool.pool);var x=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(x=u.memoizedState.cachePool.pool),x!==p&&(u.flags|=2048)}return o!==r&&o&&(l.child.flags|=8192),ko(l,l.updateQueue),$e(l),null;case 4:return Ft(),r===null&&gf(l.stateNode.containerInfo),$e(l),null;case 10:return $n(l.type),$e(l),null;case 19:if(F(rt),p=l.memoizedState,p===null)return $e(l),null;if(u=(l.flags&128)!==0,x=p.rendering,x===null)if(u)Ti(p,!1);else{if(Ye!==0||r!==null&&(r.flags&128)!==0)for(r=l.child;r!==null;){if(x=bo(r),x!==null){for(l.flags|=128,Ti(p,!1),r=x.updateQueue,l.updateQueue=r,ko(l,r),l.subtreeFlags=0,r=o,o=l.child;o!==null;)Yp(o,r),o=o.sibling;return Q(rt,rt.current&1|2),l.child}r=r.sibling}p.tail!==null&&En()>Eo&&(l.flags|=128,u=!0,Ti(p,!1),l.lanes=4194304)}else{if(!u)if(r=bo(x),r!==null){if(l.flags|=128,u=!0,r=r.updateQueue,l.updateQueue=r,ko(l,r),Ti(p,!0),p.tail===null&&p.tailMode==="hidden"&&!x.alternate&&!Re)return $e(l),null}else 2*En()-p.renderingStartTime>Eo&&o!==536870912&&(l.flags|=128,u=!0,Ti(p,!1),l.lanes=4194304);p.isBackwards?(x.sibling=l.child,l.child=x):(r=p.last,r!==null?r.sibling=x:l.child=x,p.last=x)}return p.tail!==null?(l=p.tail,p.rendering=l,p.tail=l.sibling,p.renderingStartTime=En(),l.sibling=null,r=rt.current,Q(rt,u?r&1|2:r&1),l):($e(l),null);case 22:case 23:return Yn(l),xd(),u=l.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(l.flags|=8192):u&&(l.flags|=8192),u?(o&536870912)!==0&&(l.flags&128)===0&&($e(l),l.subtreeFlags&6&&(l.flags|=8192)):$e(l),o=l.updateQueue,o!==null&&ko(l,o.retryQueue),o=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),u=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(u=l.memoizedState.cachePool.pool),u!==o&&(l.flags|=2048),r!==null&&F(ps),null;case 24:return o=null,r!==null&&(o=r.memoizedState.cache),l.memoizedState.cache!==o&&(l.flags|=2048),$n(nt),$e(l),null;case 25:return null;case 30:return null}throw Error(s(156,l.tag))}function k2(r,l){switch(rd(l),l.tag){case 1:return r=l.flags,r&65536?(l.flags=r&-65537|128,l):null;case 3:return $n(nt),Ft(),r=l.flags,(r&65536)!==0&&(r&128)===0?(l.flags=r&-65537|128,l):null;case 26:case 27:case 5:return Bt(l),null;case 13:if(Yn(l),r=l.memoizedState,r!==null&&r.dehydrated!==null){if(l.alternate===null)throw Error(s(340));hi()}return r=l.flags,r&65536?(l.flags=r&-65537|128,l):null;case 19:return F(rt),null;case 4:return Ft(),null;case 10:return $n(l.type),null;case 22:case 23:return Yn(l),xd(),r!==null&&F(ps),r=l.flags,r&65536?(l.flags=r&-65537|128,l):null;case 24:return $n(nt),null;case 25:return null;default:return null}}function v0(r,l){switch(rd(l),l.tag){case 3:$n(nt),Ft();break;case 26:case 27:case 5:Bt(l);break;case 4:Ft();break;case 13:Yn(l);break;case 19:F(rt);break;case 10:$n(l.type);break;case 22:case 23:Yn(l),xd(),r!==null&&F(ps);break;case 24:$n(nt)}}function Mi(r,l){try{var o=l.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var p=u.next;o=p;do{if((o.tag&r)===r){u=void 0;var x=o.create,N=o.inst;u=x(),N.destroy=u}o=o.next}while(o!==p)}}catch(j){Ue(l,l.return,j)}}function wr(r,l,o){try{var u=l.updateQueue,p=u!==null?u.lastEffect:null;if(p!==null){var x=p.next;u=x;do{if((u.tag&r)===r){var N=u.inst,j=N.destroy;if(j!==void 0){N.destroy=void 0,p=l;var A=o,U=j;try{U()}catch(G){Ue(p,A,G)}}}u=u.next}while(u!==x)}}catch(G){Ue(l,l.return,G)}}function S0(r){var l=r.updateQueue;if(l!==null){var o=r.stateNode;try{og(l,o)}catch(u){Ue(r,r.return,u)}}}function N0(r,l,o){o.props=xs(r.type,r.memoizedProps),o.state=r.memoizedState;try{o.componentWillUnmount()}catch(u){Ue(r,l,u)}}function Oi(r,l){try{var o=r.ref;if(o!==null){switch(r.tag){case 26:case 27:case 5:var u=r.stateNode;break;case 30:u=r.stateNode;break;default:u=r.stateNode}typeof o=="function"?r.refCleanup=o(u):o.current=u}}catch(p){Ue(r,l,p)}}function Mn(r,l){var o=r.ref,u=r.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(p){Ue(r,l,p)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(p){Ue(r,l,p)}else o.current=null}function w0(r){var l=r.type,o=r.memoizedProps,u=r.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(p){Ue(r,r.return,p)}}function $d(r,l,o){try{var u=r.stateNode;$2(u,r.type,o,l),u[_t]=l}catch(p){Ue(r,r.return,p)}}function k0(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Or(r.type)||r.tag===4}function Gd(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||k0(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Or(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Yd(r,l,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,l?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(r,l):(l=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,l.appendChild(r),o=o._reactRootContainer,o!=null||l.onclick!==null||(l.onclick=Bo));else if(u!==4&&(u===27&&Or(r.type)&&(o=r.stateNode,l=null),r=r.child,r!==null))for(Yd(r,l,o),r=r.sibling;r!==null;)Yd(r,l,o),r=r.sibling}function jo(r,l,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,l?o.insertBefore(r,l):o.appendChild(r);else if(u!==4&&(u===27&&Or(r.type)&&(o=r.stateNode),r=r.child,r!==null))for(jo(r,l,o),r=r.sibling;r!==null;)jo(r,l,o),r=r.sibling}function j0(r){var l=r.stateNode,o=r.memoizedProps;try{for(var u=r.type,p=l.attributes;p.length;)l.removeAttributeNode(p[0]);yt(l,u,o),l[wt]=r,l[_t]=o}catch(x){Ue(r,r.return,x)}}var Qn=!1,Xe=!1,Kd=!1,C0=typeof WeakSet=="function"?WeakSet:Set,ot=null;function j2(r,l){if(r=r.containerInfo,bf=qo,r=_p(r),Gu(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else e:{o=(o=r.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var p=u.anchorOffset,x=u.focusNode;u=u.focusOffset;try{o.nodeType,x.nodeType}catch{o=null;break e}var N=0,j=-1,A=-1,U=0,G=0,J=r,P=null;t:for(;;){for(var V;J!==o||p!==0&&J.nodeType!==3||(j=N+p),J!==x||u!==0&&J.nodeType!==3||(A=N+u),J.nodeType===3&&(N+=J.nodeValue.length),(V=J.firstChild)!==null;)P=J,J=V;for(;;){if(J===r)break t;if(P===o&&++U===p&&(j=N),P===x&&++G===u&&(A=N),(V=J.nextSibling)!==null)break;J=P,P=J.parentNode}J=V}o=j===-1||A===-1?null:{start:j,end:A}}else o=null}o=o||{start:0,end:0}}else o=null;for(vf={focusedElem:r,selectionRange:o},qo=!1,ot=l;ot!==null;)if(l=ot,r=l.child,(l.subtreeFlags&1024)!==0&&r!==null)r.return=l,ot=r;else for(;ot!==null;){switch(l=ot,x=l.alternate,r=l.flags,l.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&x!==null){r=void 0,o=l,p=x.memoizedProps,x=x.memoizedState,u=o.stateNode;try{var xe=xs(o.type,p,o.elementType===o.type);r=u.getSnapshotBeforeUpdate(xe,x),u.__reactInternalSnapshotBeforeUpdate=r}catch(he){Ue(o,o.return,he)}}break;case 3:if((r&1024)!==0){if(r=l.stateNode.containerInfo,o=r.nodeType,o===9)wf(r);else if(o===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":wf(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(s(163))}if(r=l.sibling,r!==null){r.return=l.return,ot=r;break}ot=l.return}}function E0(r,l,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:kr(r,o),u&4&&Mi(5,o);break;case 1:if(kr(r,o),u&4)if(r=o.stateNode,l===null)try{r.componentDidMount()}catch(N){Ue(o,o.return,N)}else{var p=xs(o.type,l.memoizedProps);l=l.memoizedState;try{r.componentDidUpdate(p,l,r.__reactInternalSnapshotBeforeUpdate)}catch(N){Ue(o,o.return,N)}}u&64&&S0(o),u&512&&Oi(o,o.return);break;case 3:if(kr(r,o),u&64&&(r=o.updateQueue,r!==null)){if(l=null,o.child!==null)switch(o.child.tag){case 27:case 5:l=o.child.stateNode;break;case 1:l=o.child.stateNode}try{og(r,l)}catch(N){Ue(o,o.return,N)}}break;case 27:l===null&&u&4&&j0(o);case 26:case 5:kr(r,o),l===null&&u&4&&w0(o),u&512&&Oi(o,o.return);break;case 12:kr(r,o);break;case 13:kr(r,o),u&4&&M0(r,o),u&64&&(r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(o=z2.bind(null,o),Z2(r,o))));break;case 22:if(u=o.memoizedState!==null||Qn,!u){l=l!==null&&l.memoizedState!==null||Xe,p=Qn;var x=Xe;Qn=u,(Xe=l)&&!x?jr(r,o,(o.subtreeFlags&8772)!==0):kr(r,o),Qn=p,Xe=x}break;case 30:break;default:kr(r,o)}}function A0(r){var l=r.alternate;l!==null&&(r.alternate=null,A0(l)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(l=r.stateNode,l!==null&&Eu(l)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var qe=null,Pt=!1;function Xn(r,l,o){for(o=o.child;o!==null;)T0(r,l,o),o=o.sibling}function T0(r,l,o){if($t&&typeof $t.onCommitFiberUnmount=="function")try{$t.onCommitFiberUnmount(Zl,o)}catch{}switch(o.tag){case 26:Xe||Mn(o,l),Xn(r,l,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Xe||Mn(o,l);var u=qe,p=Pt;Or(o.type)&&(qe=o.stateNode,Pt=!1),Xn(r,l,o),Pi(o.stateNode),qe=u,Pt=p;break;case 5:Xe||Mn(o,l);case 6:if(u=qe,p=Pt,qe=null,Xn(r,l,o),qe=u,Pt=p,qe!==null)if(Pt)try{(qe.nodeType===9?qe.body:qe.nodeName==="HTML"?qe.ownerDocument.body:qe).removeChild(o.stateNode)}catch(x){Ue(o,l,x)}else try{qe.removeChild(o.stateNode)}catch(x){Ue(o,l,x)}break;case 18:qe!==null&&(Pt?(r=qe,xx(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.stateNode),Ki(r)):xx(qe,o.stateNode));break;case 4:u=qe,p=Pt,qe=o.stateNode.containerInfo,Pt=!0,Xn(r,l,o),qe=u,Pt=p;break;case 0:case 11:case 14:case 15:Xe||wr(2,o,l),Xe||wr(4,o,l),Xn(r,l,o);break;case 1:Xe||(Mn(o,l),u=o.stateNode,typeof u.componentWillUnmount=="function"&&N0(o,l,u)),Xn(r,l,o);break;case 21:Xn(r,l,o);break;case 22:Xe=(u=Xe)||o.memoizedState!==null,Xn(r,l,o),Xe=u;break;default:Xn(r,l,o)}}function M0(r,l){if(l.memoizedState===null&&(r=l.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Ki(r)}catch(o){Ue(l,l.return,o)}}function C2(r){switch(r.tag){case 13:case 19:var l=r.stateNode;return l===null&&(l=r.stateNode=new C0),l;case 22:return r=r.stateNode,l=r._retryCache,l===null&&(l=r._retryCache=new C0),l;default:throw Error(s(435,r.tag))}}function Jd(r,l){var o=C2(r);l.forEach(function(u){var p=L2.bind(null,r,u);o.has(u)||(o.add(u),u.then(p,p))})}function Jt(r,l){var o=l.deletions;if(o!==null)for(var u=0;u<o.length;u++){var p=o[u],x=r,N=l,j=N;e:for(;j!==null;){switch(j.tag){case 27:if(Or(j.type)){qe=j.stateNode,Pt=!1;break e}break;case 5:qe=j.stateNode,Pt=!1;break e;case 3:case 4:qe=j.stateNode.containerInfo,Pt=!0;break e}j=j.return}if(qe===null)throw Error(s(160));T0(x,N,p),qe=null,Pt=!1,x=p.alternate,x!==null&&(x.return=null),p.return=null}if(l.subtreeFlags&13878)for(l=l.child;l!==null;)O0(l,r),l=l.sibling}var vn=null;function O0(r,l){var o=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Jt(l,r),Qt(r),u&4&&(wr(3,r,r.return),Mi(3,r),wr(5,r,r.return));break;case 1:Jt(l,r),Qt(r),u&512&&(Xe||o===null||Mn(o,o.return)),u&64&&Qn&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(o=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var p=vn;if(Jt(l,r),Qt(r),u&512&&(Xe||o===null||Mn(o,o.return)),u&4){var x=o!==null?o.memoizedState:null;if(u=r.memoizedState,o===null)if(u===null)if(r.stateNode===null){e:{u=r.type,o=r.memoizedProps,p=p.ownerDocument||p;t:switch(u){case"title":x=p.getElementsByTagName("title")[0],(!x||x[ti]||x[wt]||x.namespaceURI==="http://www.w3.org/2000/svg"||x.hasAttribute("itemprop"))&&(x=p.createElement(u),p.head.insertBefore(x,p.querySelector("head > title"))),yt(x,u,o),x[wt]=r,it(x),u=x;break e;case"link":var N=jx("link","href",p).get(u+(o.href||""));if(N){for(var j=0;j<N.length;j++)if(x=N[j],x.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&x.getAttribute("rel")===(o.rel==null?null:o.rel)&&x.getAttribute("title")===(o.title==null?null:o.title)&&x.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){N.splice(j,1);break t}}x=p.createElement(u),yt(x,u,o),p.head.appendChild(x);break;case"meta":if(N=jx("meta","content",p).get(u+(o.content||""))){for(j=0;j<N.length;j++)if(x=N[j],x.getAttribute("content")===(o.content==null?null:""+o.content)&&x.getAttribute("name")===(o.name==null?null:o.name)&&x.getAttribute("property")===(o.property==null?null:o.property)&&x.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&x.getAttribute("charset")===(o.charSet==null?null:o.charSet)){N.splice(j,1);break t}}x=p.createElement(u),yt(x,u,o),p.head.appendChild(x);break;default:throw Error(s(468,u))}x[wt]=r,it(x),u=x}r.stateNode=u}else Cx(p,r.type,r.stateNode);else r.stateNode=kx(p,u,r.memoizedProps);else x!==u?(x===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):x.count--,u===null?Cx(p,r.type,r.stateNode):kx(p,u,r.memoizedProps)):u===null&&r.stateNode!==null&&$d(r,r.memoizedProps,o.memoizedProps)}break;case 27:Jt(l,r),Qt(r),u&512&&(Xe||o===null||Mn(o,o.return)),o!==null&&u&4&&$d(r,r.memoizedProps,o.memoizedProps);break;case 5:if(Jt(l,r),Qt(r),u&512&&(Xe||o===null||Mn(o,o.return)),r.flags&32){p=r.stateNode;try{Qs(p,"")}catch(V){Ue(r,r.return,V)}}u&4&&r.stateNode!=null&&(p=r.memoizedProps,$d(r,p,o!==null?o.memoizedProps:p)),u&1024&&(Kd=!0);break;case 6:if(Jt(l,r),Qt(r),u&4){if(r.stateNode===null)throw Error(s(162));u=r.memoizedProps,o=r.stateNode;try{o.nodeValue=u}catch(V){Ue(r,r.return,V)}}break;case 3:if(Po=null,p=vn,vn=Ho(l.containerInfo),Jt(l,r),vn=p,Qt(r),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Ki(l.containerInfo)}catch(V){Ue(r,r.return,V)}Kd&&(Kd=!1,R0(r));break;case 4:u=vn,vn=Ho(r.stateNode.containerInfo),Jt(l,r),Qt(r),vn=u;break;case 12:Jt(l,r),Qt(r);break;case 13:Jt(l,r),Qt(r),r.child.flags&8192&&r.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(tf=En()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Jd(r,u)));break;case 22:p=r.memoizedState!==null;var A=o!==null&&o.memoizedState!==null,U=Qn,G=Xe;if(Qn=U||p,Xe=G||A,Jt(l,r),Xe=G,Qn=U,Qt(r),u&8192)e:for(l=r.stateNode,l._visibility=p?l._visibility&-2:l._visibility|1,p&&(o===null||A||Qn||Xe||ys(r)),o=null,l=r;;){if(l.tag===5||l.tag===26){if(o===null){A=o=l;try{if(x=A.stateNode,p)N=x.style,typeof N.setProperty=="function"?N.setProperty("display","none","important"):N.display="none";else{j=A.stateNode;var J=A.memoizedProps.style,P=J!=null&&J.hasOwnProperty("display")?J.display:null;j.style.display=P==null||typeof P=="boolean"?"":(""+P).trim()}}catch(V){Ue(A,A.return,V)}}}else if(l.tag===6){if(o===null){A=l;try{A.stateNode.nodeValue=p?"":A.memoizedProps}catch(V){Ue(A,A.return,V)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===r)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===r)break e;for(;l.sibling===null;){if(l.return===null||l.return===r)break e;o===l&&(o=null),l=l.return}o===l&&(o=null),l.sibling.return=l.return,l=l.sibling}u&4&&(u=r.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Jd(r,o))));break;case 19:Jt(l,r),Qt(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Jd(r,u)));break;case 30:break;case 21:break;default:Jt(l,r),Qt(r)}}function Qt(r){var l=r.flags;if(l&2){try{for(var o,u=r.return;u!==null;){if(k0(u)){o=u;break}u=u.return}if(o==null)throw Error(s(160));switch(o.tag){case 27:var p=o.stateNode,x=Gd(r);jo(r,x,p);break;case 5:var N=o.stateNode;o.flags&32&&(Qs(N,""),o.flags&=-33);var j=Gd(r);jo(r,j,N);break;case 3:case 4:var A=o.stateNode.containerInfo,U=Gd(r);Yd(r,U,A);break;default:throw Error(s(161))}}catch(G){Ue(r,r.return,G)}r.flags&=-3}l&4096&&(r.flags&=-4097)}function R0(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var l=r;R0(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),r=r.sibling}}function kr(r,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)E0(r,l.alternate,l),l=l.sibling}function ys(r){for(r=r.child;r!==null;){var l=r;switch(l.tag){case 0:case 11:case 14:case 15:wr(4,l,l.return),ys(l);break;case 1:Mn(l,l.return);var o=l.stateNode;typeof o.componentWillUnmount=="function"&&N0(l,l.return,o),ys(l);break;case 27:Pi(l.stateNode);case 26:case 5:Mn(l,l.return),ys(l);break;case 22:l.memoizedState===null&&ys(l);break;case 30:ys(l);break;default:ys(l)}r=r.sibling}}function jr(r,l,o){for(o=o&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var u=l.alternate,p=r,x=l,N=x.flags;switch(x.tag){case 0:case 11:case 15:jr(p,x,o),Mi(4,x);break;case 1:if(jr(p,x,o),u=x,p=u.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(U){Ue(u,u.return,U)}if(u=x,p=u.updateQueue,p!==null){var j=u.stateNode;try{var A=p.shared.hiddenCallbacks;if(A!==null)for(p.shared.hiddenCallbacks=null,p=0;p<A.length;p++)ag(A[p],j)}catch(U){Ue(u,u.return,U)}}o&&N&64&&S0(x),Oi(x,x.return);break;case 27:j0(x);case 26:case 5:jr(p,x,o),o&&u===null&&N&4&&w0(x),Oi(x,x.return);break;case 12:jr(p,x,o);break;case 13:jr(p,x,o),o&&N&4&&M0(p,x);break;case 22:x.memoizedState===null&&jr(p,x,o),Oi(x,x.return);break;case 30:break;default:jr(p,x,o)}l=l.sibling}}function Qd(r,l){var o=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),r=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(r=l.memoizedState.cachePool.pool),r!==o&&(r!=null&&r.refCount++,o!=null&&gi(o))}function Xd(r,l){r=null,l.alternate!==null&&(r=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==r&&(l.refCount++,r!=null&&gi(r))}function On(r,l,o,u){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)D0(r,l,o,u),l=l.sibling}function D0(r,l,o,u){var p=l.flags;switch(l.tag){case 0:case 11:case 15:On(r,l,o,u),p&2048&&Mi(9,l);break;case 1:On(r,l,o,u);break;case 3:On(r,l,o,u),p&2048&&(r=null,l.alternate!==null&&(r=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==r&&(l.refCount++,r!=null&&gi(r)));break;case 12:if(p&2048){On(r,l,o,u),r=l.stateNode;try{var x=l.memoizedProps,N=x.id,j=x.onPostCommit;typeof j=="function"&&j(N,l.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(A){Ue(l,l.return,A)}}else On(r,l,o,u);break;case 13:On(r,l,o,u);break;case 23:break;case 22:x=l.stateNode,N=l.alternate,l.memoizedState!==null?x._visibility&2?On(r,l,o,u):Ri(r,l):x._visibility&2?On(r,l,o,u):(x._visibility|=2,pl(r,l,o,u,(l.subtreeFlags&10256)!==0)),p&2048&&Qd(N,l);break;case 24:On(r,l,o,u),p&2048&&Xd(l.alternate,l);break;default:On(r,l,o,u)}}function pl(r,l,o,u,p){for(p=p&&(l.subtreeFlags&10256)!==0,l=l.child;l!==null;){var x=r,N=l,j=o,A=u,U=N.flags;switch(N.tag){case 0:case 11:case 15:pl(x,N,j,A,p),Mi(8,N);break;case 23:break;case 22:var G=N.stateNode;N.memoizedState!==null?G._visibility&2?pl(x,N,j,A,p):Ri(x,N):(G._visibility|=2,pl(x,N,j,A,p)),p&&U&2048&&Qd(N.alternate,N);break;case 24:pl(x,N,j,A,p),p&&U&2048&&Xd(N.alternate,N);break;default:pl(x,N,j,A,p)}l=l.sibling}}function Ri(r,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var o=r,u=l,p=u.flags;switch(u.tag){case 22:Ri(o,u),p&2048&&Qd(u.alternate,u);break;case 24:Ri(o,u),p&2048&&Xd(u.alternate,u);break;default:Ri(o,u)}l=l.sibling}}var Di=8192;function gl(r){if(r.subtreeFlags&Di)for(r=r.child;r!==null;)z0(r),r=r.sibling}function z0(r){switch(r.tag){case 26:gl(r),r.flags&Di&&r.memoizedState!==null&&dN(vn,r.memoizedState,r.memoizedProps);break;case 5:gl(r);break;case 3:case 4:var l=vn;vn=Ho(r.stateNode.containerInfo),gl(r),vn=l;break;case 22:r.memoizedState===null&&(l=r.alternate,l!==null&&l.memoizedState!==null?(l=Di,Di=16777216,gl(r),Di=l):gl(r));break;default:gl(r)}}function L0(r){var l=r.alternate;if(l!==null&&(r=l.child,r!==null)){l.child=null;do l=r.sibling,r.sibling=null,r=l;while(r!==null)}}function zi(r){var l=r.deletions;if((r.flags&16)!==0){if(l!==null)for(var o=0;o<l.length;o++){var u=l[o];ot=u,_0(u,r)}L0(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)B0(r),r=r.sibling}function B0(r){switch(r.tag){case 0:case 11:case 15:zi(r),r.flags&2048&&wr(9,r,r.return);break;case 3:zi(r);break;case 12:zi(r);break;case 22:var l=r.stateNode;r.memoizedState!==null&&l._visibility&2&&(r.return===null||r.return.tag!==13)?(l._visibility&=-3,Co(r)):zi(r);break;default:zi(r)}}function Co(r){var l=r.deletions;if((r.flags&16)!==0){if(l!==null)for(var o=0;o<l.length;o++){var u=l[o];ot=u,_0(u,r)}L0(r)}for(r=r.child;r!==null;){switch(l=r,l.tag){case 0:case 11:case 15:wr(8,l,l.return),Co(l);break;case 22:o=l.stateNode,o._visibility&2&&(o._visibility&=-3,Co(l));break;default:Co(l)}r=r.sibling}}function _0(r,l){for(;ot!==null;){var o=ot;switch(o.tag){case 0:case 11:case 15:wr(8,o,l);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:gi(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,ot=u;else e:for(o=r;ot!==null;){u=ot;var p=u.sibling,x=u.return;if(A0(u),u===o){ot=null;break e}if(p!==null){p.return=x,ot=p;break e}ot=x}}}var E2={getCacheForType:function(r){var l=kt(nt),o=l.data.get(r);return o===void 0&&(o=r(),l.data.set(r,o)),o}},A2=typeof WeakMap=="function"?WeakMap:Map,ze=0,Ie=null,Ee=null,Me=0,Le=0,Xt=null,Cr=!1,xl=!1,Zd=!1,Zn=0,Ye=0,Er=0,bs=0,Wd=0,dn=0,yl=0,Li=null,It=null,ef=!1,tf=0,Eo=1/0,Ao=null,Ar=null,xt=0,Tr=null,bl=null,vl=0,nf=0,rf=null,H0=null,Bi=0,sf=null;function Zt(){if((ze&2)!==0&&Me!==0)return Me&-Me;if(I.T!==null){var r=al;return r!==0?r:ff()}return ep()}function U0(){dn===0&&(dn=(Me&536870912)===0||Re?Qm():536870912);var r=un.current;return r!==null&&(r.flags|=32),dn}function Wt(r,l,o){(r===Ie&&(Le===2||Le===9)||r.cancelPendingCommit!==null)&&(Sl(r,0),Mr(r,Me,dn,!1)),ei(r,o),((ze&2)===0||r!==Ie)&&(r===Ie&&((ze&2)===0&&(bs|=o),Ye===4&&Mr(r,Me,dn,!1)),Rn(r))}function P0(r,l,o){if((ze&6)!==0)throw Error(s(327));var u=!o&&(l&124)===0&&(l&r.expiredLanes)===0||Wl(r,l),p=u?O2(r,l):of(r,l,!0),x=u;do{if(p===0){xl&&!u&&Mr(r,l,0,!1);break}else{if(o=r.current.alternate,x&&!T2(o)){p=of(r,l,!1),x=!1;continue}if(p===2){if(x=l,r.errorRecoveryDisabledLanes&x)var N=0;else N=r.pendingLanes&-536870913,N=N!==0?N:N&536870912?536870912:0;if(N!==0){l=N;e:{var j=r;p=Li;var A=j.current.memoizedState.isDehydrated;if(A&&(Sl(j,N).flags|=256),N=of(j,N,!1),N!==2){if(Zd&&!A){j.errorRecoveryDisabledLanes|=x,bs|=x,p=4;break e}x=It,It=p,x!==null&&(It===null?It=x:It.push.apply(It,x))}p=N}if(x=!1,p!==2)continue}}if(p===1){Sl(r,0),Mr(r,l,0,!0);break}e:{switch(u=r,x=p,x){case 0:case 1:throw Error(s(345));case 4:if((l&4194048)!==l)break;case 6:Mr(u,l,dn,!Cr);break e;case 2:It=null;break;case 3:case 5:break;default:throw Error(s(329))}if((l&62914560)===l&&(p=tf+300-En(),10<p)){if(Mr(u,l,dn,!Cr),Ha(u,0,!0)!==0)break e;u.timeoutHandle=px(I0.bind(null,u,o,It,Ao,ef,l,dn,bs,yl,Cr,x,2,-0,0),p);break e}I0(u,o,It,Ao,ef,l,dn,bs,yl,Cr,x,0,-0,0)}}break}while(!0);Rn(r)}function I0(r,l,o,u,p,x,N,j,A,U,G,J,P,V){if(r.timeoutHandle=-1,J=l.subtreeFlags,(J&8192||(J&16785408)===16785408)&&(qi={stylesheets:null,count:0,unsuspend:uN},z0(l),J=fN(),J!==null)){r.cancelPendingCommit=J(K0.bind(null,r,l,x,o,u,p,N,j,A,G,1,P,V)),Mr(r,x,N,!U);return}K0(r,l,x,o,u,p,N,j,A)}function T2(r){for(var l=r;;){var o=l.tag;if((o===0||o===11||o===15)&&l.flags&16384&&(o=l.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var p=o[u],x=p.getSnapshot;p=p.value;try{if(!Yt(x(),p))return!1}catch{return!1}}if(o=l.child,l.subtreeFlags&16384&&o!==null)o.return=l,l=o;else{if(l===r)break;for(;l.sibling===null;){if(l.return===null||l.return===r)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Mr(r,l,o,u){l&=~Wd,l&=~bs,r.suspendedLanes|=l,r.pingedLanes&=~l,u&&(r.warmLanes|=l),u=r.expirationTimes;for(var p=l;0<p;){var x=31-Gt(p),N=1<<x;u[x]=-1,p&=~N}o!==0&&Zm(r,o,l)}function To(){return(ze&6)===0?(_i(0),!1):!0}function lf(){if(Ee!==null){if(Le===0)var r=Ee.return;else r=Ee,Fn=hs=null,Nd(r),hl=null,Ei=0,r=Ee;for(;r!==null;)v0(r.alternate,r),r=r.return;Ee=null}}function Sl(r,l){var o=r.timeoutHandle;o!==-1&&(r.timeoutHandle=-1,Y2(o)),o=r.cancelPendingCommit,o!==null&&(r.cancelPendingCommit=null,o()),lf(),Ie=r,Ee=o=In(r.current,null),Me=l,Le=0,Xt=null,Cr=!1,xl=Wl(r,l),Zd=!1,yl=dn=Wd=bs=Er=Ye=0,It=Li=null,ef=!1,(l&8)!==0&&(l|=l&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=l;0<u;){var p=31-Gt(u),x=1<<p;l|=r[p],u&=~x}return Zn=l,Qa(),o}function V0(r,l){we=null,I.H=go,l===yi||l===lo?(l=lg(),Le=3):l===ng?(l=lg(),Le=4):Le=l===i0?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,Xt=l,Ee===null&&(Ye=1,So(r,ln(l,r.current)))}function q0(){var r=I.H;return I.H=go,r===null?go:r}function F0(){var r=I.A;return I.A=E2,r}function af(){Ye=4,Cr||(Me&4194048)!==Me&&un.current!==null||(xl=!0),(Er&134217727)===0&&(bs&134217727)===0||Ie===null||Mr(Ie,Me,dn,!1)}function of(r,l,o){var u=ze;ze|=2;var p=q0(),x=F0();(Ie!==r||Me!==l)&&(Ao=null,Sl(r,l)),l=!1;var N=Ye;e:do try{if(Le!==0&&Ee!==null){var j=Ee,A=Xt;switch(Le){case 8:lf(),N=6;break e;case 3:case 2:case 9:case 6:un.current===null&&(l=!0);var U=Le;if(Le=0,Xt=null,Nl(r,j,A,U),o&&xl){N=0;break e}break;default:U=Le,Le=0,Xt=null,Nl(r,j,A,U)}}M2(),N=Ye;break}catch(G){V0(r,G)}while(!0);return l&&r.shellSuspendCounter++,Fn=hs=null,ze=u,I.H=p,I.A=x,Ee===null&&(Ie=null,Me=0,Qa()),N}function M2(){for(;Ee!==null;)$0(Ee)}function O2(r,l){var o=ze;ze|=2;var u=q0(),p=F0();Ie!==r||Me!==l?(Ao=null,Eo=En()+500,Sl(r,l)):xl=Wl(r,l);e:do try{if(Le!==0&&Ee!==null){l=Ee;var x=Xt;t:switch(Le){case 1:Le=0,Xt=null,Nl(r,l,x,1);break;case 2:case 9:if(rg(x)){Le=0,Xt=null,G0(l);break}l=function(){Le!==2&&Le!==9||Ie!==r||(Le=7),Rn(r)},x.then(l,l);break e;case 3:Le=7;break e;case 4:Le=5;break e;case 7:rg(x)?(Le=0,Xt=null,G0(l)):(Le=0,Xt=null,Nl(r,l,x,7));break;case 5:var N=null;switch(Ee.tag){case 26:N=Ee.memoizedState;case 5:case 27:var j=Ee;if(!N||Ex(N)){Le=0,Xt=null;var A=j.sibling;if(A!==null)Ee=A;else{var U=j.return;U!==null?(Ee=U,Mo(U)):Ee=null}break t}}Le=0,Xt=null,Nl(r,l,x,5);break;case 6:Le=0,Xt=null,Nl(r,l,x,6);break;case 8:lf(),Ye=6;break e;default:throw Error(s(462))}}R2();break}catch(G){V0(r,G)}while(!0);return Fn=hs=null,I.H=u,I.A=p,ze=o,Ee!==null?0:(Ie=null,Me=0,Qa(),Ye)}function R2(){for(;Ee!==null&&!eS();)$0(Ee)}function $0(r){var l=y0(r.alternate,r,Zn);r.memoizedProps=r.pendingProps,l===null?Mo(r):Ee=l}function G0(r){var l=r,o=l.alternate;switch(l.tag){case 15:case 0:l=f0(o,l,l.pendingProps,l.type,void 0,Me);break;case 11:l=f0(o,l,l.pendingProps,l.type.render,l.ref,Me);break;case 5:Nd(l);default:v0(o,l),l=Ee=Yp(l,Zn),l=y0(o,l,Zn)}r.memoizedProps=r.pendingProps,l===null?Mo(r):Ee=l}function Nl(r,l,o,u){Fn=hs=null,Nd(l),hl=null,Ei=0;var p=l.return;try{if(S2(r,p,l,o,Me)){Ye=1,So(r,ln(o,r.current)),Ee=null;return}}catch(x){if(p!==null)throw Ee=p,x;Ye=1,So(r,ln(o,r.current)),Ee=null;return}l.flags&32768?(Re||u===1?r=!0:xl||(Me&536870912)!==0?r=!1:(Cr=r=!0,(u===2||u===9||u===3||u===6)&&(u=un.current,u!==null&&u.tag===13&&(u.flags|=16384))),Y0(l,r)):Mo(l)}function Mo(r){var l=r;do{if((l.flags&32768)!==0){Y0(l,Cr);return}r=l.return;var o=w2(l.alternate,l,Zn);if(o!==null){Ee=o;return}if(l=l.sibling,l!==null){Ee=l;return}Ee=l=r}while(l!==null);Ye===0&&(Ye=5)}function Y0(r,l){do{var o=k2(r.alternate,r);if(o!==null){o.flags&=32767,Ee=o;return}if(o=r.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!l&&(r=r.sibling,r!==null)){Ee=r;return}Ee=r=o}while(r!==null);Ye=6,Ee=null}function K0(r,l,o,u,p,x,N,j,A){r.cancelPendingCommit=null;do Oo();while(xt!==0);if((ze&6)!==0)throw Error(s(327));if(l!==null){if(l===r.current)throw Error(s(177));if(x=l.lanes|l.childLanes,x|=Xu,uS(r,o,x,N,j,A),r===Ie&&(Ee=Ie=null,Me=0),bl=l,Tr=r,vl=o,nf=x,rf=p,H0=u,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,B2(La,function(){return W0(),null})):(r.callbackNode=null,r.callbackPriority=0),u=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||u){u=I.T,I.T=null,p=ne.p,ne.p=2,N=ze,ze|=4;try{j2(r,l,o)}finally{ze=N,ne.p=p,I.T=u}}xt=1,J0(),Q0(),X0()}}function J0(){if(xt===1){xt=0;var r=Tr,l=bl,o=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||o){o=I.T,I.T=null;var u=ne.p;ne.p=2;var p=ze;ze|=4;try{O0(l,r);var x=vf,N=_p(r.containerInfo),j=x.focusedElem,A=x.selectionRange;if(N!==j&&j&&j.ownerDocument&&Bp(j.ownerDocument.documentElement,j)){if(A!==null&&Gu(j)){var U=A.start,G=A.end;if(G===void 0&&(G=U),"selectionStart"in j)j.selectionStart=U,j.selectionEnd=Math.min(G,j.value.length);else{var J=j.ownerDocument||document,P=J&&J.defaultView||window;if(P.getSelection){var V=P.getSelection(),xe=j.textContent.length,he=Math.min(A.start,xe),He=A.end===void 0?he:Math.min(A.end,xe);!V.extend&&he>He&&(N=He,He=he,he=N);var z=Lp(j,he),M=Lp(j,He);if(z&&M&&(V.rangeCount!==1||V.anchorNode!==z.node||V.anchorOffset!==z.offset||V.focusNode!==M.node||V.focusOffset!==M.offset)){var _=J.createRange();_.setStart(z.node,z.offset),V.removeAllRanges(),he>He?(V.addRange(_),V.extend(M.node,M.offset)):(_.setEnd(M.node,M.offset),V.addRange(_))}}}}for(J=[],V=j;V=V.parentNode;)V.nodeType===1&&J.push({element:V,left:V.scrollLeft,top:V.scrollTop});for(typeof j.focus=="function"&&j.focus(),j=0;j<J.length;j++){var Y=J[j];Y.element.scrollLeft=Y.left,Y.element.scrollTop=Y.top}}qo=!!bf,vf=bf=null}finally{ze=p,ne.p=u,I.T=o}}r.current=l,xt=2}}function Q0(){if(xt===2){xt=0;var r=Tr,l=bl,o=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||o){o=I.T,I.T=null;var u=ne.p;ne.p=2;var p=ze;ze|=4;try{E0(r,l.alternate,l)}finally{ze=p,ne.p=u,I.T=o}}xt=3}}function X0(){if(xt===4||xt===3){xt=0,tS();var r=Tr,l=bl,o=vl,u=H0;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?xt=5:(xt=0,bl=Tr=null,Z0(r,r.pendingLanes));var p=r.pendingLanes;if(p===0&&(Ar=null),ju(o),l=l.stateNode,$t&&typeof $t.onCommitFiberRoot=="function")try{$t.onCommitFiberRoot(Zl,l,void 0,(l.current.flags&128)===128)}catch{}if(u!==null){l=I.T,p=ne.p,ne.p=2,I.T=null;try{for(var x=r.onRecoverableError,N=0;N<u.length;N++){var j=u[N];x(j.value,{componentStack:j.stack})}}finally{I.T=l,ne.p=p}}(vl&3)!==0&&Oo(),Rn(r),p=r.pendingLanes,(o&4194090)!==0&&(p&42)!==0?r===sf?Bi++:(Bi=0,sf=r):Bi=0,_i(0)}}function Z0(r,l){(r.pooledCacheLanes&=l)===0&&(l=r.pooledCache,l!=null&&(r.pooledCache=null,gi(l)))}function Oo(r){return J0(),Q0(),X0(),W0()}function W0(){if(xt!==5)return!1;var r=Tr,l=nf;nf=0;var o=ju(vl),u=I.T,p=ne.p;try{ne.p=32>o?32:o,I.T=null,o=rf,rf=null;var x=Tr,N=vl;if(xt=0,bl=Tr=null,vl=0,(ze&6)!==0)throw Error(s(331));var j=ze;if(ze|=4,B0(x.current),D0(x,x.current,N,o),ze=j,_i(0,!1),$t&&typeof $t.onPostCommitFiberRoot=="function")try{$t.onPostCommitFiberRoot(Zl,x)}catch{}return!0}finally{ne.p=p,I.T=u,Z0(r,l)}}function ex(r,l,o){l=ln(o,l),l=Bd(r.stateNode,l,2),r=br(r,l,2),r!==null&&(ei(r,2),Rn(r))}function Ue(r,l,o){if(r.tag===3)ex(r,r,o);else for(;l!==null;){if(l.tag===3){ex(l,r,o);break}else if(l.tag===1){var u=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Ar===null||!Ar.has(u))){r=ln(o,r),o=s0(2),u=br(l,o,2),u!==null&&(l0(o,u,l,r),ei(u,2),Rn(u));break}}l=l.return}}function cf(r,l,o){var u=r.pingCache;if(u===null){u=r.pingCache=new A2;var p=new Set;u.set(l,p)}else p=u.get(l),p===void 0&&(p=new Set,u.set(l,p));p.has(o)||(Zd=!0,p.add(o),r=D2.bind(null,r,l,o),l.then(r,r))}function D2(r,l,o){var u=r.pingCache;u!==null&&u.delete(l),r.pingedLanes|=r.suspendedLanes&o,r.warmLanes&=~o,Ie===r&&(Me&o)===o&&(Ye===4||Ye===3&&(Me&62914560)===Me&&300>En()-tf?(ze&2)===0&&Sl(r,0):Wd|=o,yl===Me&&(yl=0)),Rn(r)}function tx(r,l){l===0&&(l=Xm()),r=rl(r,l),r!==null&&(ei(r,l),Rn(r))}function z2(r){var l=r.memoizedState,o=0;l!==null&&(o=l.retryLane),tx(r,o)}function L2(r,l){var o=0;switch(r.tag){case 13:var u=r.stateNode,p=r.memoizedState;p!==null&&(o=p.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(l),tx(r,o)}function B2(r,l){return Su(r,l)}var Ro=null,wl=null,uf=!1,Do=!1,df=!1,vs=0;function Rn(r){r!==wl&&r.next===null&&(wl===null?Ro=wl=r:wl=wl.next=r),Do=!0,uf||(uf=!0,H2())}function _i(r,l){if(!df&&Do){df=!0;do for(var o=!1,u=Ro;u!==null;){if(r!==0){var p=u.pendingLanes;if(p===0)var x=0;else{var N=u.suspendedLanes,j=u.pingedLanes;x=(1<<31-Gt(42|r)+1)-1,x&=p&~(N&~j),x=x&201326741?x&201326741|1:x?x|2:0}x!==0&&(o=!0,lx(u,x))}else x=Me,x=Ha(u,u===Ie?x:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(x&3)===0||Wl(u,x)||(o=!0,lx(u,x));u=u.next}while(o);df=!1}}function _2(){nx()}function nx(){Do=uf=!1;var r=0;vs!==0&&(G2()&&(r=vs),vs=0);for(var l=En(),o=null,u=Ro;u!==null;){var p=u.next,x=rx(u,l);x===0?(u.next=null,o===null?Ro=p:o.next=p,p===null&&(wl=o)):(o=u,(r!==0||(x&3)!==0)&&(Do=!0)),u=p}_i(r)}function rx(r,l){for(var o=r.suspendedLanes,u=r.pingedLanes,p=r.expirationTimes,x=r.pendingLanes&-62914561;0<x;){var N=31-Gt(x),j=1<<N,A=p[N];A===-1?((j&o)===0||(j&u)!==0)&&(p[N]=cS(j,l)):A<=l&&(r.expiredLanes|=j),x&=~j}if(l=Ie,o=Me,o=Ha(r,r===l?o:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u=r.callbackNode,o===0||r===l&&(Le===2||Le===9)||r.cancelPendingCommit!==null)return u!==null&&u!==null&&Nu(u),r.callbackNode=null,r.callbackPriority=0;if((o&3)===0||Wl(r,o)){if(l=o&-o,l===r.callbackPriority)return l;switch(u!==null&&Nu(u),ju(o)){case 2:case 8:o=Km;break;case 32:o=La;break;case 268435456:o=Jm;break;default:o=La}return u=sx.bind(null,r),o=Su(o,u),r.callbackPriority=l,r.callbackNode=o,l}return u!==null&&u!==null&&Nu(u),r.callbackPriority=2,r.callbackNode=null,2}function sx(r,l){if(xt!==0&&xt!==5)return r.callbackNode=null,r.callbackPriority=0,null;var o=r.callbackNode;if(Oo()&&r.callbackNode!==o)return null;var u=Me;return u=Ha(r,r===Ie?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u===0?null:(P0(r,u,l),rx(r,En()),r.callbackNode!=null&&r.callbackNode===o?sx.bind(null,r):null)}function lx(r,l){if(Oo())return null;P0(r,l,!0)}function H2(){K2(function(){(ze&6)!==0?Su(Ym,_2):nx()})}function ff(){return vs===0&&(vs=Qm()),vs}function ix(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:qa(""+r)}function ax(r,l){var o=l.ownerDocument.createElement("input");return o.name=l.name,o.value=l.value,r.id&&o.setAttribute("form",r.id),l.parentNode.insertBefore(o,l),r=new FormData(r),o.parentNode.removeChild(o),r}function U2(r,l,o,u,p){if(l==="submit"&&o&&o.stateNode===p){var x=ix((p[_t]||null).action),N=u.submitter;N&&(l=(l=N[_t]||null)?ix(l.formAction):N.getAttribute("formAction"),l!==null&&(x=l,N=null));var j=new Ya("action","action",null,u,p);r.push({event:j,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(vs!==0){var A=N?ax(p,N):new FormData(p);Od(o,{pending:!0,data:A,method:p.method,action:x},null,A)}}else typeof x=="function"&&(j.preventDefault(),A=N?ax(p,N):new FormData(p),Od(o,{pending:!0,data:A,method:p.method,action:x},x,A))},currentTarget:p}]})}}for(var hf=0;hf<Qu.length;hf++){var mf=Qu[hf],P2=mf.toLowerCase(),I2=mf[0].toUpperCase()+mf.slice(1);bn(P2,"on"+I2)}bn(Pp,"onAnimationEnd"),bn(Ip,"onAnimationIteration"),bn(Vp,"onAnimationStart"),bn("dblclick","onDoubleClick"),bn("focusin","onFocus"),bn("focusout","onBlur"),bn(s2,"onTransitionRun"),bn(l2,"onTransitionStart"),bn(i2,"onTransitionCancel"),bn(qp,"onTransitionEnd"),Ys("onMouseEnter",["mouseout","mouseover"]),Ys("onMouseLeave",["mouseout","mouseover"]),Ys("onPointerEnter",["pointerout","pointerover"]),Ys("onPointerLeave",["pointerout","pointerover"]),rs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),rs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),rs("onBeforeInput",["compositionend","keypress","textInput","paste"]),rs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),rs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),rs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),V2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Hi));function ox(r,l){l=(l&4)!==0;for(var o=0;o<r.length;o++){var u=r[o],p=u.event;u=u.listeners;e:{var x=void 0;if(l)for(var N=u.length-1;0<=N;N--){var j=u[N],A=j.instance,U=j.currentTarget;if(j=j.listener,A!==x&&p.isPropagationStopped())break e;x=j,p.currentTarget=U;try{x(p)}catch(G){vo(G)}p.currentTarget=null,x=A}else for(N=0;N<u.length;N++){if(j=u[N],A=j.instance,U=j.currentTarget,j=j.listener,A!==x&&p.isPropagationStopped())break e;x=j,p.currentTarget=U;try{x(p)}catch(G){vo(G)}p.currentTarget=null,x=A}}}}function Ae(r,l){var o=l[Cu];o===void 0&&(o=l[Cu]=new Set);var u=r+"__bubble";o.has(u)||(cx(l,r,2,!1),o.add(u))}function pf(r,l,o){var u=0;l&&(u|=4),cx(o,r,u,l)}var zo="_reactListening"+Math.random().toString(36).slice(2);function gf(r){if(!r[zo]){r[zo]=!0,np.forEach(function(o){o!=="selectionchange"&&(V2.has(o)||pf(o,!1,r),pf(o,!0,r))});var l=r.nodeType===9?r:r.ownerDocument;l===null||l[zo]||(l[zo]=!0,pf("selectionchange",!1,l))}}function cx(r,l,o,u){switch(Dx(l)){case 2:var p=pN;break;case 8:p=gN;break;default:p=Mf}o=p.bind(null,l,o,r),p=void 0,!_u||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(p=!0),u?p!==void 0?r.addEventListener(l,o,{capture:!0,passive:p}):r.addEventListener(l,o,!0):p!==void 0?r.addEventListener(l,o,{passive:p}):r.addEventListener(l,o,!1)}function xf(r,l,o,u,p){var x=u;if((l&1)===0&&(l&2)===0&&u!==null)e:for(;;){if(u===null)return;var N=u.tag;if(N===3||N===4){var j=u.stateNode.containerInfo;if(j===p)break;if(N===4)for(N=u.return;N!==null;){var A=N.tag;if((A===3||A===4)&&N.stateNode.containerInfo===p)return;N=N.return}for(;j!==null;){if(N=Fs(j),N===null)return;if(A=N.tag,A===5||A===6||A===26||A===27){u=x=N;continue e}j=j.parentNode}}u=u.return}gp(function(){var U=x,G=Lu(o),J=[];e:{var P=Fp.get(r);if(P!==void 0){var V=Ya,xe=r;switch(r){case"keypress":if($a(o)===0)break e;case"keydown":case"keyup":V=BS;break;case"focusin":xe="focus",V=Iu;break;case"focusout":xe="blur",V=Iu;break;case"beforeblur":case"afterblur":V=Iu;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":V=bp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":V=kS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":V=US;break;case Pp:case Ip:case Vp:V=ES;break;case qp:V=IS;break;case"scroll":case"scrollend":V=NS;break;case"wheel":V=qS;break;case"copy":case"cut":case"paste":V=TS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":V=Sp;break;case"toggle":case"beforetoggle":V=$S}var he=(l&4)!==0,He=!he&&(r==="scroll"||r==="scrollend"),z=he?P!==null?P+"Capture":null:P;he=[];for(var M=U,_;M!==null;){var Y=M;if(_=Y.stateNode,Y=Y.tag,Y!==5&&Y!==26&&Y!==27||_===null||z===null||(Y=ri(M,z),Y!=null&&he.push(Ui(M,Y,_))),He)break;M=M.return}0<he.length&&(P=new V(P,xe,null,o,G),J.push({event:P,listeners:he}))}}if((l&7)===0){e:{if(P=r==="mouseover"||r==="pointerover",V=r==="mouseout"||r==="pointerout",P&&o!==zu&&(xe=o.relatedTarget||o.fromElement)&&(Fs(xe)||xe[qs]))break e;if((V||P)&&(P=G.window===G?G:(P=G.ownerDocument)?P.defaultView||P.parentWindow:window,V?(xe=o.relatedTarget||o.toElement,V=U,xe=xe?Fs(xe):null,xe!==null&&(He=a(xe),he=xe.tag,xe!==He||he!==5&&he!==27&&he!==6)&&(xe=null)):(V=null,xe=U),V!==xe)){if(he=bp,Y="onMouseLeave",z="onMouseEnter",M="mouse",(r==="pointerout"||r==="pointerover")&&(he=Sp,Y="onPointerLeave",z="onPointerEnter",M="pointer"),He=V==null?P:ni(V),_=xe==null?P:ni(xe),P=new he(Y,M+"leave",V,o,G),P.target=He,P.relatedTarget=_,Y=null,Fs(G)===U&&(he=new he(z,M+"enter",xe,o,G),he.target=_,he.relatedTarget=He,Y=he),He=Y,V&&xe)t:{for(he=V,z=xe,M=0,_=he;_;_=kl(_))M++;for(_=0,Y=z;Y;Y=kl(Y))_++;for(;0<M-_;)he=kl(he),M--;for(;0<_-M;)z=kl(z),_--;for(;M--;){if(he===z||z!==null&&he===z.alternate)break t;he=kl(he),z=kl(z)}he=null}else he=null;V!==null&&ux(J,P,V,he,!1),xe!==null&&He!==null&&ux(J,He,xe,he,!0)}}e:{if(P=U?ni(U):window,V=P.nodeName&&P.nodeName.toLowerCase(),V==="select"||V==="input"&&P.type==="file")var oe=Tp;else if(Ep(P))if(Mp)oe=t2;else{oe=WS;var je=ZS}else V=P.nodeName,!V||V.toLowerCase()!=="input"||P.type!=="checkbox"&&P.type!=="radio"?U&&Du(U.elementType)&&(oe=Tp):oe=e2;if(oe&&(oe=oe(r,U))){Ap(J,oe,o,G);break e}je&&je(r,P,U),r==="focusout"&&U&&P.type==="number"&&U.memoizedProps.value!=null&&Ru(P,"number",P.value)}switch(je=U?ni(U):window,r){case"focusin":(Ep(je)||je.contentEditable==="true")&&(el=je,Yu=U,di=null);break;case"focusout":di=Yu=el=null;break;case"mousedown":Ku=!0;break;case"contextmenu":case"mouseup":case"dragend":Ku=!1,Hp(J,o,G);break;case"selectionchange":if(r2)break;case"keydown":case"keyup":Hp(J,o,G)}var de;if(qu)e:{switch(r){case"compositionstart":var pe="onCompositionStart";break e;case"compositionend":pe="onCompositionEnd";break e;case"compositionupdate":pe="onCompositionUpdate";break e}pe=void 0}else Ws?jp(r,o)&&(pe="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(pe="onCompositionStart");pe&&(Np&&o.locale!=="ko"&&(Ws||pe!=="onCompositionStart"?pe==="onCompositionEnd"&&Ws&&(de=xp()):(pr=G,Hu="value"in pr?pr.value:pr.textContent,Ws=!0)),je=Lo(U,pe),0<je.length&&(pe=new vp(pe,r,null,o,G),J.push({event:pe,listeners:je}),de?pe.data=de:(de=Cp(o),de!==null&&(pe.data=de)))),(de=YS?KS(r,o):JS(r,o))&&(pe=Lo(U,"onBeforeInput"),0<pe.length&&(je=new vp("onBeforeInput","beforeinput",null,o,G),J.push({event:je,listeners:pe}),je.data=de)),U2(J,r,U,o,G)}ox(J,l)})}function Ui(r,l,o){return{instance:r,listener:l,currentTarget:o}}function Lo(r,l){for(var o=l+"Capture",u=[];r!==null;){var p=r,x=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||x===null||(p=ri(r,o),p!=null&&u.unshift(Ui(r,p,x)),p=ri(r,l),p!=null&&u.push(Ui(r,p,x))),r.tag===3)return u;r=r.return}return[]}function kl(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function ux(r,l,o,u,p){for(var x=l._reactName,N=[];o!==null&&o!==u;){var j=o,A=j.alternate,U=j.stateNode;if(j=j.tag,A!==null&&A===u)break;j!==5&&j!==26&&j!==27||U===null||(A=U,p?(U=ri(o,x),U!=null&&N.unshift(Ui(o,U,A))):p||(U=ri(o,x),U!=null&&N.push(Ui(o,U,A)))),o=o.return}N.length!==0&&r.push({event:l,listeners:N})}var q2=/\r\n?/g,F2=/\u0000|\uFFFD/g;function dx(r){return(typeof r=="string"?r:""+r).replace(q2,`
`).replace(F2,"")}function fx(r,l){return l=dx(l),dx(r)===l}function Bo(){}function _e(r,l,o,u,p,x){switch(o){case"children":typeof u=="string"?l==="body"||l==="textarea"&&u===""||Qs(r,u):(typeof u=="number"||typeof u=="bigint")&&l!=="body"&&Qs(r,""+u);break;case"className":Pa(r,"class",u);break;case"tabIndex":Pa(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Pa(r,o,u);break;case"style":mp(r,u,x);break;case"data":if(l!=="object"){Pa(r,"data",u);break}case"src":case"href":if(u===""&&(l!=="a"||o!=="href")){r.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=qa(""+u),r.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof x=="function"&&(o==="formAction"?(l!=="input"&&_e(r,l,"name",p.name,p,null),_e(r,l,"formEncType",p.formEncType,p,null),_e(r,l,"formMethod",p.formMethod,p,null),_e(r,l,"formTarget",p.formTarget,p,null)):(_e(r,l,"encType",p.encType,p,null),_e(r,l,"method",p.method,p,null),_e(r,l,"target",p.target,p,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=qa(""+u),r.setAttribute(o,u);break;case"onClick":u!=null&&(r.onclick=Bo);break;case"onScroll":u!=null&&Ae("scroll",r);break;case"onScrollEnd":u!=null&&Ae("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(o=u.__html,o!=null){if(p.children!=null)throw Error(s(60));r.innerHTML=o}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}o=qa(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""+u):r.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""):r.removeAttribute(o);break;case"capture":case"download":u===!0?r.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,u):r.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(o,u):r.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(o):r.setAttribute(o,u);break;case"popover":Ae("beforetoggle",r),Ae("toggle",r),Ua(r,"popover",u);break;case"xlinkActuate":Un(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Un(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Un(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Un(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Un(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Un(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Un(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Un(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Un(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Ua(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=vS.get(o)||o,Ua(r,o,u))}}function yf(r,l,o,u,p,x){switch(o){case"style":mp(r,u,x);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(o=u.__html,o!=null){if(p.children!=null)throw Error(s(60));r.innerHTML=o}}break;case"children":typeof u=="string"?Qs(r,u):(typeof u=="number"||typeof u=="bigint")&&Qs(r,""+u);break;case"onScroll":u!=null&&Ae("scroll",r);break;case"onScrollEnd":u!=null&&Ae("scrollend",r);break;case"onClick":u!=null&&(r.onclick=Bo);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!rp.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(p=o.endsWith("Capture"),l=o.slice(2,p?o.length-7:void 0),x=r[_t]||null,x=x!=null?x[o]:null,typeof x=="function"&&r.removeEventListener(l,x,p),typeof u=="function")){typeof x!="function"&&x!==null&&(o in r?r[o]=null:r.hasAttribute(o)&&r.removeAttribute(o)),r.addEventListener(l,u,p);break e}o in r?r[o]=u:u===!0?r.setAttribute(o,""):Ua(r,o,u)}}}function yt(r,l,o){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ae("error",r),Ae("load",r);var u=!1,p=!1,x;for(x in o)if(o.hasOwnProperty(x)){var N=o[x];if(N!=null)switch(x){case"src":u=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,l));default:_e(r,l,x,N,o,null)}}p&&_e(r,l,"srcSet",o.srcSet,o,null),u&&_e(r,l,"src",o.src,o,null);return;case"input":Ae("invalid",r);var j=x=N=p=null,A=null,U=null;for(u in o)if(o.hasOwnProperty(u)){var G=o[u];if(G!=null)switch(u){case"name":p=G;break;case"type":N=G;break;case"checked":A=G;break;case"defaultChecked":U=G;break;case"value":x=G;break;case"defaultValue":j=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,l));break;default:_e(r,l,u,G,o,null)}}up(r,x,j,A,U,N,p,!1),Ia(r);return;case"select":Ae("invalid",r),u=N=x=null;for(p in o)if(o.hasOwnProperty(p)&&(j=o[p],j!=null))switch(p){case"value":x=j;break;case"defaultValue":N=j;break;case"multiple":u=j;default:_e(r,l,p,j,o,null)}l=x,o=N,r.multiple=!!u,l!=null?Js(r,!!u,l,!1):o!=null&&Js(r,!!u,o,!0);return;case"textarea":Ae("invalid",r),x=p=u=null;for(N in o)if(o.hasOwnProperty(N)&&(j=o[N],j!=null))switch(N){case"value":u=j;break;case"defaultValue":p=j;break;case"children":x=j;break;case"dangerouslySetInnerHTML":if(j!=null)throw Error(s(91));break;default:_e(r,l,N,j,o,null)}fp(r,u,p,x),Ia(r);return;case"option":for(A in o)if(o.hasOwnProperty(A)&&(u=o[A],u!=null))switch(A){case"selected":r.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:_e(r,l,A,u,o,null)}return;case"dialog":Ae("beforetoggle",r),Ae("toggle",r),Ae("cancel",r),Ae("close",r);break;case"iframe":case"object":Ae("load",r);break;case"video":case"audio":for(u=0;u<Hi.length;u++)Ae(Hi[u],r);break;case"image":Ae("error",r),Ae("load",r);break;case"details":Ae("toggle",r);break;case"embed":case"source":case"link":Ae("error",r),Ae("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(U in o)if(o.hasOwnProperty(U)&&(u=o[U],u!=null))switch(U){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,l));default:_e(r,l,U,u,o,null)}return;default:if(Du(l)){for(G in o)o.hasOwnProperty(G)&&(u=o[G],u!==void 0&&yf(r,l,G,u,o,void 0));return}}for(j in o)o.hasOwnProperty(j)&&(u=o[j],u!=null&&_e(r,l,j,u,o,null))}function $2(r,l,o,u){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,x=null,N=null,j=null,A=null,U=null,G=null;for(V in o){var J=o[V];if(o.hasOwnProperty(V)&&J!=null)switch(V){case"checked":break;case"value":break;case"defaultValue":A=J;default:u.hasOwnProperty(V)||_e(r,l,V,null,u,J)}}for(var P in u){var V=u[P];if(J=o[P],u.hasOwnProperty(P)&&(V!=null||J!=null))switch(P){case"type":x=V;break;case"name":p=V;break;case"checked":U=V;break;case"defaultChecked":G=V;break;case"value":N=V;break;case"defaultValue":j=V;break;case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(s(137,l));break;default:V!==J&&_e(r,l,P,V,u,J)}}Ou(r,N,j,A,U,G,x,p);return;case"select":V=N=j=P=null;for(x in o)if(A=o[x],o.hasOwnProperty(x)&&A!=null)switch(x){case"value":break;case"multiple":V=A;default:u.hasOwnProperty(x)||_e(r,l,x,null,u,A)}for(p in u)if(x=u[p],A=o[p],u.hasOwnProperty(p)&&(x!=null||A!=null))switch(p){case"value":P=x;break;case"defaultValue":j=x;break;case"multiple":N=x;default:x!==A&&_e(r,l,p,x,u,A)}l=j,o=N,u=V,P!=null?Js(r,!!o,P,!1):!!u!=!!o&&(l!=null?Js(r,!!o,l,!0):Js(r,!!o,o?[]:"",!1));return;case"textarea":V=P=null;for(j in o)if(p=o[j],o.hasOwnProperty(j)&&p!=null&&!u.hasOwnProperty(j))switch(j){case"value":break;case"children":break;default:_e(r,l,j,null,u,p)}for(N in u)if(p=u[N],x=o[N],u.hasOwnProperty(N)&&(p!=null||x!=null))switch(N){case"value":P=p;break;case"defaultValue":V=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(s(91));break;default:p!==x&&_e(r,l,N,p,u,x)}dp(r,P,V);return;case"option":for(var xe in o)if(P=o[xe],o.hasOwnProperty(xe)&&P!=null&&!u.hasOwnProperty(xe))switch(xe){case"selected":r.selected=!1;break;default:_e(r,l,xe,null,u,P)}for(A in u)if(P=u[A],V=o[A],u.hasOwnProperty(A)&&P!==V&&(P!=null||V!=null))switch(A){case"selected":r.selected=P&&typeof P!="function"&&typeof P!="symbol";break;default:_e(r,l,A,P,u,V)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var he in o)P=o[he],o.hasOwnProperty(he)&&P!=null&&!u.hasOwnProperty(he)&&_e(r,l,he,null,u,P);for(U in u)if(P=u[U],V=o[U],u.hasOwnProperty(U)&&P!==V&&(P!=null||V!=null))switch(U){case"children":case"dangerouslySetInnerHTML":if(P!=null)throw Error(s(137,l));break;default:_e(r,l,U,P,u,V)}return;default:if(Du(l)){for(var He in o)P=o[He],o.hasOwnProperty(He)&&P!==void 0&&!u.hasOwnProperty(He)&&yf(r,l,He,void 0,u,P);for(G in u)P=u[G],V=o[G],!u.hasOwnProperty(G)||P===V||P===void 0&&V===void 0||yf(r,l,G,P,u,V);return}}for(var z in o)P=o[z],o.hasOwnProperty(z)&&P!=null&&!u.hasOwnProperty(z)&&_e(r,l,z,null,u,P);for(J in u)P=u[J],V=o[J],!u.hasOwnProperty(J)||P===V||P==null&&V==null||_e(r,l,J,P,u,V)}var bf=null,vf=null;function _o(r){return r.nodeType===9?r:r.ownerDocument}function hx(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function mx(r,l){if(r===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&l==="foreignObject"?0:r}function Sf(r,l){return r==="textarea"||r==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Nf=null;function G2(){var r=window.event;return r&&r.type==="popstate"?r===Nf?!1:(Nf=r,!0):(Nf=null,!1)}var px=typeof setTimeout=="function"?setTimeout:void 0,Y2=typeof clearTimeout=="function"?clearTimeout:void 0,gx=typeof Promise=="function"?Promise:void 0,K2=typeof queueMicrotask=="function"?queueMicrotask:typeof gx<"u"?function(r){return gx.resolve(null).then(r).catch(J2)}:px;function J2(r){setTimeout(function(){throw r})}function Or(r){return r==="head"}function xx(r,l){var o=l,u=0,p=0;do{var x=o.nextSibling;if(r.removeChild(o),x&&x.nodeType===8)if(o=x.data,o==="/$"){if(0<u&&8>u){o=u;var N=r.ownerDocument;if(o&1&&Pi(N.documentElement),o&2&&Pi(N.body),o&4)for(o=N.head,Pi(o),N=o.firstChild;N;){var j=N.nextSibling,A=N.nodeName;N[ti]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&N.rel.toLowerCase()==="stylesheet"||o.removeChild(N),N=j}}if(p===0){r.removeChild(x),Ki(l);return}p--}else o==="$"||o==="$?"||o==="$!"?p++:u=o.charCodeAt(0)-48;else u=0;o=x}while(o);Ki(l)}function wf(r){var l=r.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var o=l;switch(l=l.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":wf(o),Eu(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}r.removeChild(o)}}function Q2(r,l,o,u){for(;r.nodeType===1;){var p=o;if(r.nodeName.toLowerCase()!==l.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[ti])switch(l){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(x=r.getAttribute("rel"),x==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(x!==p.rel||r.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||r.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||r.getAttribute("title")!==(p.title==null?null:p.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(x=r.getAttribute("src"),(x!==(p.src==null?null:p.src)||r.getAttribute("type")!==(p.type==null?null:p.type)||r.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&x&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(l==="input"&&r.type==="hidden"){var x=p.name==null?null:""+p.name;if(p.type==="hidden"&&r.getAttribute("name")===x)return r}else return r;if(r=Sn(r.nextSibling),r===null)break}return null}function X2(r,l,o){if(l==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=Sn(r.nextSibling),r===null))return null;return r}function kf(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState==="complete"}function Z2(r,l){var o=r.ownerDocument;if(r.data!=="$?"||o.readyState==="complete")l();else{var u=function(){l(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),r._reactRetry=u}}function Sn(r){for(;r!=null;r=r.nextSibling){var l=r.nodeType;if(l===1||l===3)break;if(l===8){if(l=r.data,l==="$"||l==="$!"||l==="$?"||l==="F!"||l==="F")break;if(l==="/$")return null}}return r}var jf=null;function yx(r){r=r.previousSibling;for(var l=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"){if(l===0)return r;l--}else o==="/$"&&l++}r=r.previousSibling}return null}function bx(r,l,o){switch(l=_o(o),r){case"html":if(r=l.documentElement,!r)throw Error(s(452));return r;case"head":if(r=l.head,!r)throw Error(s(453));return r;case"body":if(r=l.body,!r)throw Error(s(454));return r;default:throw Error(s(451))}}function Pi(r){for(var l=r.attributes;l.length;)r.removeAttributeNode(l[0]);Eu(r)}var fn=new Map,vx=new Set;function Ho(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Wn=ne.d;ne.d={f:W2,r:eN,D:tN,C:nN,L:rN,m:sN,X:iN,S:lN,M:aN};function W2(){var r=Wn.f(),l=To();return r||l}function eN(r){var l=$s(r);l!==null&&l.tag===5&&l.type==="form"?Pg(l):Wn.r(r)}var jl=typeof document>"u"?null:document;function Sx(r,l,o){var u=jl;if(u&&typeof l=="string"&&l){var p=sn(l);p='link[rel="'+r+'"][href="'+p+'"]',typeof o=="string"&&(p+='[crossorigin="'+o+'"]'),vx.has(p)||(vx.add(p),r={rel:r,crossOrigin:o,href:l},u.querySelector(p)===null&&(l=u.createElement("link"),yt(l,"link",r),it(l),u.head.appendChild(l)))}}function tN(r){Wn.D(r),Sx("dns-prefetch",r,null)}function nN(r,l){Wn.C(r,l),Sx("preconnect",r,l)}function rN(r,l,o){Wn.L(r,l,o);var u=jl;if(u&&r&&l){var p='link[rel="preload"][as="'+sn(l)+'"]';l==="image"&&o&&o.imageSrcSet?(p+='[imagesrcset="'+sn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(p+='[imagesizes="'+sn(o.imageSizes)+'"]')):p+='[href="'+sn(r)+'"]';var x=p;switch(l){case"style":x=Cl(r);break;case"script":x=El(r)}fn.has(x)||(r=g({rel:"preload",href:l==="image"&&o&&o.imageSrcSet?void 0:r,as:l},o),fn.set(x,r),u.querySelector(p)!==null||l==="style"&&u.querySelector(Ii(x))||l==="script"&&u.querySelector(Vi(x))||(l=u.createElement("link"),yt(l,"link",r),it(l),u.head.appendChild(l)))}}function sN(r,l){Wn.m(r,l);var o=jl;if(o&&r){var u=l&&typeof l.as=="string"?l.as:"script",p='link[rel="modulepreload"][as="'+sn(u)+'"][href="'+sn(r)+'"]',x=p;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":x=El(r)}if(!fn.has(x)&&(r=g({rel:"modulepreload",href:r},l),fn.set(x,r),o.querySelector(p)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Vi(x)))return}u=o.createElement("link"),yt(u,"link",r),it(u),o.head.appendChild(u)}}}function lN(r,l,o){Wn.S(r,l,o);var u=jl;if(u&&r){var p=Gs(u).hoistableStyles,x=Cl(r);l=l||"default";var N=p.get(x);if(!N){var j={loading:0,preload:null};if(N=u.querySelector(Ii(x)))j.loading=5;else{r=g({rel:"stylesheet",href:r,"data-precedence":l},o),(o=fn.get(x))&&Cf(r,o);var A=N=u.createElement("link");it(A),yt(A,"link",r),A._p=new Promise(function(U,G){A.onload=U,A.onerror=G}),A.addEventListener("load",function(){j.loading|=1}),A.addEventListener("error",function(){j.loading|=2}),j.loading|=4,Uo(N,l,u)}N={type:"stylesheet",instance:N,count:1,state:j},p.set(x,N)}}}function iN(r,l){Wn.X(r,l);var o=jl;if(o&&r){var u=Gs(o).hoistableScripts,p=El(r),x=u.get(p);x||(x=o.querySelector(Vi(p)),x||(r=g({src:r,async:!0},l),(l=fn.get(p))&&Ef(r,l),x=o.createElement("script"),it(x),yt(x,"link",r),o.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},u.set(p,x))}}function aN(r,l){Wn.M(r,l);var o=jl;if(o&&r){var u=Gs(o).hoistableScripts,p=El(r),x=u.get(p);x||(x=o.querySelector(Vi(p)),x||(r=g({src:r,async:!0,type:"module"},l),(l=fn.get(p))&&Ef(r,l),x=o.createElement("script"),it(x),yt(x,"link",r),o.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},u.set(p,x))}}function Nx(r,l,o,u){var p=(p=le.current)?Ho(p):null;if(!p)throw Error(s(446));switch(r){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(l=Cl(o.href),o=Gs(p).hoistableStyles,u=o.get(l),u||(u={type:"style",instance:null,count:0,state:null},o.set(l,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){r=Cl(o.href);var x=Gs(p).hoistableStyles,N=x.get(r);if(N||(p=p.ownerDocument||p,N={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},x.set(r,N),(x=p.querySelector(Ii(r)))&&!x._p&&(N.instance=x,N.state.loading=5),fn.has(r)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},fn.set(r,o),x||oN(p,r,o,N.state))),l&&u===null)throw Error(s(528,""));return N}if(l&&u!==null)throw Error(s(529,""));return null;case"script":return l=o.async,o=o.src,typeof o=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=El(o),o=Gs(p).hoistableScripts,u=o.get(l),u||(u={type:"script",instance:null,count:0,state:null},o.set(l,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,r))}}function Cl(r){return'href="'+sn(r)+'"'}function Ii(r){return'link[rel="stylesheet"]['+r+"]"}function wx(r){return g({},r,{"data-precedence":r.precedence,precedence:null})}function oN(r,l,o,u){r.querySelector('link[rel="preload"][as="style"]['+l+"]")?u.loading=1:(l=r.createElement("link"),u.preload=l,l.addEventListener("load",function(){return u.loading|=1}),l.addEventListener("error",function(){return u.loading|=2}),yt(l,"link",o),it(l),r.head.appendChild(l))}function El(r){return'[src="'+sn(r)+'"]'}function Vi(r){return"script[async]"+r}function kx(r,l,o){if(l.count++,l.instance===null)switch(l.type){case"style":var u=r.querySelector('style[data-href~="'+sn(o.href)+'"]');if(u)return l.instance=u,it(u),u;var p=g({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),it(u),yt(u,"style",p),Uo(u,o.precedence,r),l.instance=u;case"stylesheet":p=Cl(o.href);var x=r.querySelector(Ii(p));if(x)return l.state.loading|=4,l.instance=x,it(x),x;u=wx(o),(p=fn.get(p))&&Cf(u,p),x=(r.ownerDocument||r).createElement("link"),it(x);var N=x;return N._p=new Promise(function(j,A){N.onload=j,N.onerror=A}),yt(x,"link",u),l.state.loading|=4,Uo(x,o.precedence,r),l.instance=x;case"script":return x=El(o.src),(p=r.querySelector(Vi(x)))?(l.instance=p,it(p),p):(u=o,(p=fn.get(x))&&(u=g({},o),Ef(u,p)),r=r.ownerDocument||r,p=r.createElement("script"),it(p),yt(p,"link",u),r.head.appendChild(p),l.instance=p);case"void":return null;default:throw Error(s(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(u=l.instance,l.state.loading|=4,Uo(u,o.precedence,r));return l.instance}function Uo(r,l,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=u.length?u[u.length-1]:null,x=p,N=0;N<u.length;N++){var j=u[N];if(j.dataset.precedence===l)x=j;else if(x!==p)break}x?x.parentNode.insertBefore(r,x.nextSibling):(l=o.nodeType===9?o.head:o,l.insertBefore(r,l.firstChild))}function Cf(r,l){r.crossOrigin==null&&(r.crossOrigin=l.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=l.referrerPolicy),r.title==null&&(r.title=l.title)}function Ef(r,l){r.crossOrigin==null&&(r.crossOrigin=l.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=l.referrerPolicy),r.integrity==null&&(r.integrity=l.integrity)}var Po=null;function jx(r,l,o){if(Po===null){var u=new Map,p=Po=new Map;p.set(o,u)}else p=Po,u=p.get(o),u||(u=new Map,p.set(o,u));if(u.has(r))return u;for(u.set(r,null),o=o.getElementsByTagName(r),p=0;p<o.length;p++){var x=o[p];if(!(x[ti]||x[wt]||r==="link"&&x.getAttribute("rel")==="stylesheet")&&x.namespaceURI!=="http://www.w3.org/2000/svg"){var N=x.getAttribute(l)||"";N=r+N;var j=u.get(N);j?j.push(x):u.set(N,[x])}}return u}function Cx(r,l,o){r=r.ownerDocument||r,r.head.insertBefore(o,l==="title"?r.querySelector("head > title"):null)}function cN(r,l,o){if(o===1||l.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return r=l.disabled,typeof l.precedence=="string"&&r==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function Ex(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var qi=null;function uN(){}function dN(r,l,o){if(qi===null)throw Error(s(475));var u=qi;if(l.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var p=Cl(o.href),x=r.querySelector(Ii(p));if(x){r=x._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(u.count++,u=Io.bind(u),r.then(u,u)),l.state.loading|=4,l.instance=x,it(x);return}x=r.ownerDocument||r,o=wx(o),(p=fn.get(p))&&Cf(o,p),x=x.createElement("link"),it(x);var N=x;N._p=new Promise(function(j,A){N.onload=j,N.onerror=A}),yt(x,"link",o),l.instance=x}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(l,r),(r=l.state.preload)&&(l.state.loading&3)===0&&(u.count++,l=Io.bind(u),r.addEventListener("load",l),r.addEventListener("error",l))}}function fN(){if(qi===null)throw Error(s(475));var r=qi;return r.stylesheets&&r.count===0&&Af(r,r.stylesheets),0<r.count?function(l){var o=setTimeout(function(){if(r.stylesheets&&Af(r,r.stylesheets),r.unsuspend){var u=r.unsuspend;r.unsuspend=null,u()}},6e4);return r.unsuspend=l,function(){r.unsuspend=null,clearTimeout(o)}}:null}function Io(){if(this.count--,this.count===0){if(this.stylesheets)Af(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Vo=null;function Af(r,l){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Vo=new Map,l.forEach(hN,r),Vo=null,Io.call(r))}function hN(r,l){if(!(l.state.loading&4)){var o=Vo.get(r);if(o)var u=o.get(null);else{o=new Map,Vo.set(r,o);for(var p=r.querySelectorAll("link[data-precedence],style[data-precedence]"),x=0;x<p.length;x++){var N=p[x];(N.nodeName==="LINK"||N.getAttribute("media")!=="not all")&&(o.set(N.dataset.precedence,N),u=N)}u&&o.set(null,u)}p=l.instance,N=p.getAttribute("data-precedence"),x=o.get(N)||u,x===u&&o.set(null,p),o.set(N,p),this.count++,u=Io.bind(this),p.addEventListener("load",u),p.addEventListener("error",u),x?x.parentNode.insertBefore(p,x.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(p,r.firstChild)),l.state.loading|=4}}var Fi={$$typeof:B,Provider:null,Consumer:null,_currentValue:re,_currentValue2:re,_threadCount:0};function mN(r,l,o,u,p,x,N,j){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=wu(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wu(0),this.hiddenUpdates=wu(null),this.identifierPrefix=u,this.onUncaughtError=p,this.onCaughtError=x,this.onRecoverableError=N,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=j,this.incompleteTransitions=new Map}function Ax(r,l,o,u,p,x,N,j,A,U,G,J){return r=new mN(r,l,o,N,j,A,U,J),l=1,x===!0&&(l|=24),x=Kt(3,null,null,l),r.current=x,x.stateNode=r,l=od(),l.refCount++,r.pooledCache=l,l.refCount++,x.memoizedState={element:u,isDehydrated:o,cache:l},fd(x),r}function Tx(r){return r?(r=sl,r):sl}function Mx(r,l,o,u,p,x){p=Tx(p),u.context===null?u.context=p:u.pendingContext=p,u=yr(l),u.payload={element:o},x=x===void 0?null:x,x!==null&&(u.callback=x),o=br(r,u,l),o!==null&&(Wt(o,r,l),vi(o,r,l))}function Ox(r,l){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<l?o:l}}function Tf(r,l){Ox(r,l),(r=r.alternate)&&Ox(r,l)}function Rx(r){if(r.tag===13){var l=rl(r,67108864);l!==null&&Wt(l,r,67108864),Tf(r,67108864)}}var qo=!0;function pN(r,l,o,u){var p=I.T;I.T=null;var x=ne.p;try{ne.p=2,Mf(r,l,o,u)}finally{ne.p=x,I.T=p}}function gN(r,l,o,u){var p=I.T;I.T=null;var x=ne.p;try{ne.p=8,Mf(r,l,o,u)}finally{ne.p=x,I.T=p}}function Mf(r,l,o,u){if(qo){var p=Of(u);if(p===null)xf(r,l,u,Fo,o),zx(r,u);else if(yN(p,r,l,o,u))u.stopPropagation();else if(zx(r,u),l&4&&-1<xN.indexOf(r)){for(;p!==null;){var x=$s(p);if(x!==null)switch(x.tag){case 3:if(x=x.stateNode,x.current.memoizedState.isDehydrated){var N=ns(x.pendingLanes);if(N!==0){var j=x;for(j.pendingLanes|=2,j.entangledLanes|=2;N;){var A=1<<31-Gt(N);j.entanglements[1]|=A,N&=~A}Rn(x),(ze&6)===0&&(Eo=En()+500,_i(0))}}break;case 13:j=rl(x,2),j!==null&&Wt(j,x,2),To(),Tf(x,2)}if(x=Of(u),x===null&&xf(r,l,u,Fo,o),x===p)break;p=x}p!==null&&u.stopPropagation()}else xf(r,l,u,null,o)}}function Of(r){return r=Lu(r),Rf(r)}var Fo=null;function Rf(r){if(Fo=null,r=Fs(r),r!==null){var l=a(r);if(l===null)r=null;else{var o=l.tag;if(o===13){if(r=c(l),r!==null)return r;r=null}else if(o===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;r=null}else l!==r&&(r=null)}}return Fo=r,null}function Dx(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(nS()){case Ym:return 2;case Km:return 8;case La:case rS:return 32;case Jm:return 268435456;default:return 32}default:return 32}}var Df=!1,Rr=null,Dr=null,zr=null,$i=new Map,Gi=new Map,Lr=[],xN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function zx(r,l){switch(r){case"focusin":case"focusout":Rr=null;break;case"dragenter":case"dragleave":Dr=null;break;case"mouseover":case"mouseout":zr=null;break;case"pointerover":case"pointerout":$i.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gi.delete(l.pointerId)}}function Yi(r,l,o,u,p,x){return r===null||r.nativeEvent!==x?(r={blockedOn:l,domEventName:o,eventSystemFlags:u,nativeEvent:x,targetContainers:[p]},l!==null&&(l=$s(l),l!==null&&Rx(l)),r):(r.eventSystemFlags|=u,l=r.targetContainers,p!==null&&l.indexOf(p)===-1&&l.push(p),r)}function yN(r,l,o,u,p){switch(l){case"focusin":return Rr=Yi(Rr,r,l,o,u,p),!0;case"dragenter":return Dr=Yi(Dr,r,l,o,u,p),!0;case"mouseover":return zr=Yi(zr,r,l,o,u,p),!0;case"pointerover":var x=p.pointerId;return $i.set(x,Yi($i.get(x)||null,r,l,o,u,p)),!0;case"gotpointercapture":return x=p.pointerId,Gi.set(x,Yi(Gi.get(x)||null,r,l,o,u,p)),!0}return!1}function Lx(r){var l=Fs(r.target);if(l!==null){var o=a(l);if(o!==null){if(l=o.tag,l===13){if(l=c(o),l!==null){r.blockedOn=l,dS(r.priority,function(){if(o.tag===13){var u=Zt();u=ku(u);var p=rl(o,u);p!==null&&Wt(p,o,u),Tf(o,u)}});return}}else if(l===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function $o(r){if(r.blockedOn!==null)return!1;for(var l=r.targetContainers;0<l.length;){var o=Of(r.nativeEvent);if(o===null){o=r.nativeEvent;var u=new o.constructor(o.type,o);zu=u,o.target.dispatchEvent(u),zu=null}else return l=$s(o),l!==null&&Rx(l),r.blockedOn=o,!1;l.shift()}return!0}function Bx(r,l,o){$o(r)&&o.delete(l)}function bN(){Df=!1,Rr!==null&&$o(Rr)&&(Rr=null),Dr!==null&&$o(Dr)&&(Dr=null),zr!==null&&$o(zr)&&(zr=null),$i.forEach(Bx),Gi.forEach(Bx)}function Go(r,l){r.blockedOn===l&&(r.blockedOn=null,Df||(Df=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,bN)))}var Yo=null;function _x(r){Yo!==r&&(Yo=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Yo===r&&(Yo=null);for(var l=0;l<r.length;l+=3){var o=r[l],u=r[l+1],p=r[l+2];if(typeof u!="function"){if(Rf(u||o)===null)continue;break}var x=$s(o);x!==null&&(r.splice(l,3),l-=3,Od(x,{pending:!0,data:p,method:o.method,action:u},u,p))}}))}function Ki(r){function l(A){return Go(A,r)}Rr!==null&&Go(Rr,r),Dr!==null&&Go(Dr,r),zr!==null&&Go(zr,r),$i.forEach(l),Gi.forEach(l);for(var o=0;o<Lr.length;o++){var u=Lr[o];u.blockedOn===r&&(u.blockedOn=null)}for(;0<Lr.length&&(o=Lr[0],o.blockedOn===null);)Lx(o),o.blockedOn===null&&Lr.shift();if(o=(r.ownerDocument||r).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var p=o[u],x=o[u+1],N=p[_t]||null;if(typeof x=="function")N||_x(o);else if(N){var j=null;if(x&&x.hasAttribute("formAction")){if(p=x,N=x[_t]||null)j=N.formAction;else if(Rf(p)!==null)continue}else j=N.action;typeof j=="function"?o[u+1]=j:(o.splice(u,3),u-=3),_x(o)}}}function zf(r){this._internalRoot=r}Ko.prototype.render=zf.prototype.render=function(r){var l=this._internalRoot;if(l===null)throw Error(s(409));var o=l.current,u=Zt();Mx(o,u,r,l,null,null)},Ko.prototype.unmount=zf.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var l=r.containerInfo;Mx(r.current,2,null,r,null,null),To(),l[qs]=null}};function Ko(r){this._internalRoot=r}Ko.prototype.unstable_scheduleHydration=function(r){if(r){var l=ep();r={blockedOn:null,target:r,priority:l};for(var o=0;o<Lr.length&&l!==0&&l<Lr[o].priority;o++);Lr.splice(o,0,r),o===0&&Lx(r)}};var Hx=e.version;if(Hx!=="19.1.0")throw Error(s(527,Hx,"19.1.0"));ne.findDOMNode=function(r){var l=r._reactInternals;if(l===void 0)throw typeof r.render=="function"?Error(s(188)):(r=Object.keys(r).join(","),Error(s(268,r)));return r=h(l),r=r!==null?m(r):null,r=r===null?null:r.stateNode,r};var vN={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:I,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jo.isDisabled&&Jo.supportsFiber)try{Zl=Jo.inject(vN),$t=Jo}catch{}}return Qi.createRoot=function(r,l){if(!i(r))throw Error(s(299));var o=!1,u="",p=e0,x=t0,N=n0,j=null;return l!=null&&(l.unstable_strictMode===!0&&(o=!0),l.identifierPrefix!==void 0&&(u=l.identifierPrefix),l.onUncaughtError!==void 0&&(p=l.onUncaughtError),l.onCaughtError!==void 0&&(x=l.onCaughtError),l.onRecoverableError!==void 0&&(N=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(j=l.unstable_transitionCallbacks)),l=Ax(r,1,!1,null,null,o,u,p,x,N,j,null),r[qs]=l.current,gf(r),new zf(l)},Qi.hydrateRoot=function(r,l,o){if(!i(r))throw Error(s(299));var u=!1,p="",x=e0,N=t0,j=n0,A=null,U=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onUncaughtError!==void 0&&(x=o.onUncaughtError),o.onCaughtError!==void 0&&(N=o.onCaughtError),o.onRecoverableError!==void 0&&(j=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(A=o.unstable_transitionCallbacks),o.formState!==void 0&&(U=o.formState)),l=Ax(r,1,!0,l,o??null,u,p,x,N,j,A,U),l.context=Tx(null),o=l.current,u=Zt(),u=ku(u),p=yr(u),p.callback=null,br(o,p,u),o=u,l.current.lanes=o,ei(l,o),Rn(l),r[qs]=l.current,gf(r),new Ko(l)},Qi.version="19.1.0",Qi}var Kx;function TN(){if(Kx)return _f.exports;Kx=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),_f.exports=AN(),_f.exports}var MN=TN();const ON=Xh(MN);var Xi={},Jx;function RN(){if(Jx)return Xi;Jx=1,Object.defineProperty(Xi,"__esModule",{value:!0}),Xi.parse=c,Xi.serialize=m;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,a=(()=>{const b=function(){};return b.prototype=Object.create(null),b})();function c(b,S){const v=new a,w=b.length;if(w<2)return v;const k=(S==null?void 0:S.decode)||g;let E=0;do{const O=b.indexOf("=",E);if(O===-1)break;const B=b.indexOf(";",E),q=B===-1?w:B;if(O>q){E=b.lastIndexOf(";",O-1)+1;continue}const D=f(b,E,O),R=h(b,O,D),L=b.slice(D,R);if(v[L]===void 0){let $=f(b,O+1,q),te=h(b,q,$);const se=k(b.slice($,te));v[L]=se}E=q+1}while(E<w);return v}function f(b,S,v){do{const w=b.charCodeAt(S);if(w!==32&&w!==9)return S}while(++S<v);return v}function h(b,S,v){for(;S>v;){const w=b.charCodeAt(--S);if(w!==32&&w!==9)return S+1}return v}function m(b,S,v){const w=(v==null?void 0:v.encode)||encodeURIComponent;if(!n.test(b))throw new TypeError(`argument name is invalid: ${b}`);const k=w(S);if(!e.test(k))throw new TypeError(`argument val is invalid: ${S}`);let E=b+"="+k;if(!v)return E;if(v.maxAge!==void 0){if(!Number.isInteger(v.maxAge))throw new TypeError(`option maxAge is invalid: ${v.maxAge}`);E+="; Max-Age="+v.maxAge}if(v.domain){if(!t.test(v.domain))throw new TypeError(`option domain is invalid: ${v.domain}`);E+="; Domain="+v.domain}if(v.path){if(!s.test(v.path))throw new TypeError(`option path is invalid: ${v.path}`);E+="; Path="+v.path}if(v.expires){if(!y(v.expires)||!Number.isFinite(v.expires.valueOf()))throw new TypeError(`option expires is invalid: ${v.expires}`);E+="; Expires="+v.expires.toUTCString()}if(v.httpOnly&&(E+="; HttpOnly"),v.secure&&(E+="; Secure"),v.partitioned&&(E+="; Partitioned"),v.priority)switch(typeof v.priority=="string"?v.priority.toLowerCase():void 0){case"low":E+="; Priority=Low";break;case"medium":E+="; Priority=Medium";break;case"high":E+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${v.priority}`)}if(v.sameSite)switch(typeof v.sameSite=="string"?v.sameSite.toLowerCase():v.sameSite){case!0:case"strict":E+="; SameSite=Strict";break;case"lax":E+="; SameSite=Lax";break;case"none":E+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${v.sameSite}`)}return E}function g(b){if(b.indexOf("%")===-1)return b;try{return decodeURIComponent(b)}catch{return b}}function y(b){return i.call(b)==="[object Date]"}return Xi}RN();var Qx="popstate";function DN(n={}){function e(s,i){let{pathname:a,search:c,hash:f}=s.location;return yh("",{pathname:a,search:c,hash:f},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(s,i){return typeof i=="string"?i:ga(i)}return LN(e,t,null,n)}function Fe(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function wn(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function zN(){return Math.random().toString(36).substring(2,10)}function Xx(n,e){return{usr:n.state,key:n.key,idx:e}}function yh(n,e,t=null,s){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Kl(e):e,state:t,key:e&&e.key||s||zN()}}function ga({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Kl(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let s=n.indexOf("?");s>=0&&(e.search=n.substring(s),n=n.substring(0,s)),n&&(e.pathname=n)}return e}function LN(n,e,t,s={}){let{window:i=document.defaultView,v5Compat:a=!1}=s,c=i.history,f="POP",h=null,m=g();m==null&&(m=0,c.replaceState({...c.state,idx:m},""));function g(){return(c.state||{idx:null}).idx}function y(){f="POP";let k=g(),E=k==null?null:k-m;m=k,h&&h({action:f,location:w.location,delta:E})}function b(k,E){f="PUSH";let O=yh(w.location,k,E);m=g()+1;let B=Xx(O,m),q=w.createHref(O);try{c.pushState(B,"",q)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;i.location.assign(q)}a&&h&&h({action:f,location:w.location,delta:1})}function S(k,E){f="REPLACE";let O=yh(w.location,k,E);m=g();let B=Xx(O,m),q=w.createHref(O);c.replaceState(B,"",q),a&&h&&h({action:f,location:w.location,delta:0})}function v(k){return BN(k)}let w={get action(){return f},get location(){return n(i,c)},listen(k){if(h)throw new Error("A history only accepts one active listener");return i.addEventListener(Qx,y),h=k,()=>{i.removeEventListener(Qx,y),h=null}},createHref(k){return e(i,k)},createURL:v,encodeLocation(k){let E=v(k);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:b,replace:S,go(k){return c.go(k)}};return w}function BN(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Fe(t,"No window.location.(origin|href) available to create URL");let s=typeof n=="string"?n:ga(n);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=t+s),new URL(s,t)}function Mb(n,e,t="/"){return _N(n,e,t,!1)}function _N(n,e,t,s){let i=typeof e=="string"?Kl(e):e,a=cr(i.pathname||"/",t);if(a==null)return null;let c=Ob(n);HN(c);let f=null;for(let h=0;f==null&&h<c.length;++h){let m=JN(a);f=YN(c[h],m,s)}return f}function Ob(n,e=[],t=[],s=""){let i=(a,c,f)=>{let h={relativePath:f===void 0?a.path||"":f,caseSensitive:a.caseSensitive===!0,childrenIndex:c,route:a};h.relativePath.startsWith("/")&&(Fe(h.relativePath.startsWith(s),`Absolute route path "${h.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(s.length));let m=ir([s,h.relativePath]),g=t.concat(h);a.children&&a.children.length>0&&(Fe(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),Ob(a.children,e,g,m)),!(a.path==null&&!a.index)&&e.push({path:m,score:$N(m,a.index),routesMeta:g})};return n.forEach((a,c)=>{var f;if(a.path===""||!((f=a.path)!=null&&f.includes("?")))i(a,c);else for(let h of Rb(a.path))i(a,c,h)}),e}function Rb(n){let e=n.split("/");if(e.length===0)return[];let[t,...s]=e,i=t.endsWith("?"),a=t.replace(/\?$/,"");if(s.length===0)return i?[a,""]:[a];let c=Rb(s.join("/")),f=[];return f.push(...c.map(h=>h===""?a:[a,h].join("/"))),i&&f.push(...c),f.map(h=>n.startsWith("/")&&h===""?"/":h)}function HN(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:GN(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}var UN=/^:[\w-]+$/,PN=3,IN=2,VN=1,qN=10,FN=-2,Zx=n=>n==="*";function $N(n,e){let t=n.split("/"),s=t.length;return t.some(Zx)&&(s+=FN),e&&(s+=IN),t.filter(i=>!Zx(i)).reduce((i,a)=>i+(UN.test(a)?PN:a===""?VN:qN),s)}function GN(n,e){return n.length===e.length&&n.slice(0,-1).every((s,i)=>s===e[i])?n[n.length-1]-e[e.length-1]:0}function YN(n,e,t=!1){let{routesMeta:s}=n,i={},a="/",c=[];for(let f=0;f<s.length;++f){let h=s[f],m=f===s.length-1,g=a==="/"?e:e.slice(a.length)||"/",y=pc({path:h.relativePath,caseSensitive:h.caseSensitive,end:m},g),b=h.route;if(!y&&m&&t&&!s[s.length-1].route.index&&(y=pc({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},g)),!y)return null;Object.assign(i,y.params),c.push({params:i,pathname:ir([a,y.pathname]),pathnameBase:WN(ir([a,y.pathnameBase])),route:b}),y.pathnameBase!=="/"&&(a=ir([a,y.pathnameBase]))}return c}function pc(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,s]=KN(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let a=i[0],c=a.replace(/(.)\/+$/,"$1"),f=i.slice(1);return{params:s.reduce((m,{paramName:g,isOptional:y},b)=>{if(g==="*"){let v=f[b]||"";c=a.slice(0,a.length-v.length).replace(/(.)\/+$/,"$1")}const S=f[b];return y&&!S?m[g]=void 0:m[g]=(S||"").replace(/%2F/g,"/"),m},{}),pathname:a,pathnameBase:c,pattern:n}}function KN(n,e=!1,t=!0){wn(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let s=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,f,h)=>(s.push({paramName:f,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(s.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),s]}function JN(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return wn(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function cr(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=n.charAt(t);return s&&s!=="/"?null:n.slice(t)||"/"}function QN(n,e="/"){let{pathname:t,search:s="",hash:i=""}=typeof n=="string"?Kl(n):n;return{pathname:t?t.startsWith("/")?t:XN(t,e):e,search:ew(s),hash:tw(i)}}function XN(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function If(n,e,t,s){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function ZN(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Wh(n){let e=ZN(n);return e.map((t,s)=>s===e.length-1?t.pathname:t.pathnameBase)}function em(n,e,t,s=!1){let i;typeof n=="string"?i=Kl(n):(i={...n},Fe(!i.pathname||!i.pathname.includes("?"),If("?","pathname","search",i)),Fe(!i.pathname||!i.pathname.includes("#"),If("#","pathname","hash",i)),Fe(!i.search||!i.search.includes("#"),If("#","search","hash",i)));let a=n===""||i.pathname==="",c=a?"/":i.pathname,f;if(c==null)f=t;else{let y=e.length-1;if(!s&&c.startsWith("..")){let b=c.split("/");for(;b[0]==="..";)b.shift(),y-=1;i.pathname=b.join("/")}f=y>=0?e[y]:"/"}let h=QN(i,f),m=c&&c!=="/"&&c.endsWith("/"),g=(a||c===".")&&t.endsWith("/");return!h.pathname.endsWith("/")&&(m||g)&&(h.pathname+="/"),h}var ir=n=>n.join("/").replace(/\/\/+/g,"/"),WN=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),ew=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,tw=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function nw(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var Db=["POST","PUT","PATCH","DELETE"];new Set(Db);var rw=["GET",...Db];new Set(rw);var Jl=C.createContext(null);Jl.displayName="DataRouter";var nu=C.createContext(null);nu.displayName="DataRouterState";var zb=C.createContext({isTransitioning:!1});zb.displayName="ViewTransition";var sw=C.createContext(new Map);sw.displayName="Fetchers";var lw=C.createContext(null);lw.displayName="Await";var jn=C.createContext(null);jn.displayName="Navigation";var Ta=C.createContext(null);Ta.displayName="Location";var Cn=C.createContext({outlet:null,matches:[],isDataRoute:!1});Cn.displayName="Route";var tm=C.createContext(null);tm.displayName="RouteError";function iw(n,{relative:e}={}){Fe(Ql(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:s}=C.useContext(jn),{hash:i,pathname:a,search:c}=Ma(n,{relative:e}),f=a;return t!=="/"&&(f=a==="/"?t:ir([t,a])),s.createHref({pathname:f,search:c,hash:i})}function Ql(){return C.useContext(Ta)!=null}function dr(){return Fe(Ql(),"useLocation() may be used only in the context of a <Router> component."),C.useContext(Ta).location}var Lb="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Bb(n){C.useContext(jn).static||C.useLayoutEffect(n)}function fr(){let{isDataRoute:n}=C.useContext(Cn);return n?bw():aw()}function aw(){Fe(Ql(),"useNavigate() may be used only in the context of a <Router> component.");let n=C.useContext(Jl),{basename:e,navigator:t}=C.useContext(jn),{matches:s}=C.useContext(Cn),{pathname:i}=dr(),a=JSON.stringify(Wh(s)),c=C.useRef(!1);return Bb(()=>{c.current=!0}),C.useCallback((h,m={})=>{if(wn(c.current,Lb),!c.current)return;if(typeof h=="number"){t.go(h);return}let g=em(h,JSON.parse(a),i,m.relative==="path");n==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:ir([e,g.pathname])),(m.replace?t.replace:t.push)(g,m.state,m)},[e,t,a,i,n])}C.createContext(null);function ru(){let{matches:n}=C.useContext(Cn),e=n[n.length-1];return e?e.params:{}}function Ma(n,{relative:e}={}){let{matches:t}=C.useContext(Cn),{pathname:s}=dr(),i=JSON.stringify(Wh(t));return C.useMemo(()=>em(n,JSON.parse(i),s,e==="path"),[n,i,s,e])}function ow(n,e){return _b(n,e)}function _b(n,e,t,s){var O;Fe(Ql(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i,static:a}=C.useContext(jn),{matches:c}=C.useContext(Cn),f=c[c.length-1],h=f?f.params:{},m=f?f.pathname:"/",g=f?f.pathnameBase:"/",y=f&&f.route;{let B=y&&y.path||"";Hb(m,!y||B.endsWith("*")||B.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${B}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${B}"> to <Route path="${B==="/"?"*":`${B}/*`}">.`)}let b=dr(),S;if(e){let B=typeof e=="string"?Kl(e):e;Fe(g==="/"||((O=B.pathname)==null?void 0:O.startsWith(g)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${B.pathname}" was given in the \`location\` prop.`),S=B}else S=b;let v=S.pathname||"/",w=v;if(g!=="/"){let B=g.replace(/^\//,"").split("/");w="/"+v.replace(/^\//,"").split("/").slice(B.length).join("/")}let k=!a&&t&&t.matches&&t.matches.length>0?t.matches:Mb(n,{pathname:w});wn(y||k!=null,`No routes matched location "${S.pathname}${S.search}${S.hash}" `),wn(k==null||k[k.length-1].route.element!==void 0||k[k.length-1].route.Component!==void 0||k[k.length-1].route.lazy!==void 0,`Matched leaf route at location "${S.pathname}${S.search}${S.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let E=hw(k&&k.map(B=>Object.assign({},B,{params:Object.assign({},h,B.params),pathname:ir([g,i.encodeLocation?i.encodeLocation(B.pathname).pathname:B.pathname]),pathnameBase:B.pathnameBase==="/"?g:ir([g,i.encodeLocation?i.encodeLocation(B.pathnameBase).pathname:B.pathnameBase])})),c,t,s);return e&&E?C.createElement(Ta.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...S},navigationType:"POP"}},E):E}function cw(){let n=yw(),e=nw(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:s},a={padding:"2px 4px",backgroundColor:s},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=C.createElement(C.Fragment,null,C.createElement("p",null,"💿 Hey developer 👋"),C.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",C.createElement("code",{style:a},"ErrorBoundary")," or"," ",C.createElement("code",{style:a},"errorElement")," prop on your route.")),C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},e),t?C.createElement("pre",{style:i},t):null,c)}var uw=C.createElement(cw,null),dw=class extends C.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?C.createElement(Cn.Provider,{value:this.props.routeContext},C.createElement(tm.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function fw({routeContext:n,match:e,children:t}){let s=C.useContext(Jl);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),C.createElement(Cn.Provider,{value:n},t)}function hw(n,e=[],t=null,s=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let i=n,a=t==null?void 0:t.errors;if(a!=null){let h=i.findIndex(m=>m.route.id&&(a==null?void 0:a[m.route.id])!==void 0);Fe(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),i=i.slice(0,Math.min(i.length,h+1))}let c=!1,f=-1;if(t)for(let h=0;h<i.length;h++){let m=i[h];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(f=h),m.route.id){let{loaderData:g,errors:y}=t,b=m.route.loader&&!g.hasOwnProperty(m.route.id)&&(!y||y[m.route.id]===void 0);if(m.route.lazy||b){c=!0,f>=0?i=i.slice(0,f+1):i=[i[0]];break}}}return i.reduceRight((h,m,g)=>{let y,b=!1,S=null,v=null;t&&(y=a&&m.route.id?a[m.route.id]:void 0,S=m.route.errorElement||uw,c&&(f<0&&g===0?(Hb("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,v=null):f===g&&(b=!0,v=m.route.hydrateFallbackElement||null)));let w=e.concat(i.slice(0,g+1)),k=()=>{let E;return y?E=S:b?E=v:m.route.Component?E=C.createElement(m.route.Component,null):m.route.element?E=m.route.element:E=h,C.createElement(fw,{match:m,routeContext:{outlet:h,matches:w,isDataRoute:t!=null},children:E})};return t&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?C.createElement(dw,{location:t.location,revalidation:t.revalidation,component:S,error:y,children:k(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):k()},null)}function nm(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function mw(n){let e=C.useContext(Jl);return Fe(e,nm(n)),e}function pw(n){let e=C.useContext(nu);return Fe(e,nm(n)),e}function gw(n){let e=C.useContext(Cn);return Fe(e,nm(n)),e}function rm(n){let e=gw(n),t=e.matches[e.matches.length-1];return Fe(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function xw(){return rm("useRouteId")}function yw(){var s;let n=C.useContext(tm),e=pw("useRouteError"),t=rm("useRouteError");return n!==void 0?n:(s=e.errors)==null?void 0:s[t]}function bw(){let{router:n}=mw("useNavigate"),e=rm("useNavigate"),t=C.useRef(!1);return Bb(()=>{t.current=!0}),C.useCallback(async(i,a={})=>{wn(t.current,Lb),t.current&&(typeof i=="number"?n.navigate(i):await n.navigate(i,{fromRouteId:e,...a}))},[n,e])}var Wx={};function Hb(n,e,t){!e&&!Wx[n]&&(Wx[n]=!0,wn(!1,t))}C.memo(vw);function vw({routes:n,future:e,state:t}){return _b(n,void 0,t,e)}function bh({to:n,replace:e,state:t,relative:s}){Fe(Ql(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=C.useContext(jn);wn(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=C.useContext(Cn),{pathname:c}=dr(),f=fr(),h=em(n,Wh(a),c,s==="path"),m=JSON.stringify(h);return C.useEffect(()=>{f(JSON.parse(m),{replace:e,state:t,relative:s})},[f,m,s,e,t]),null}function ut(n){Fe(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Sw({basename:n="/",children:e=null,location:t,navigationType:s="POP",navigator:i,static:a=!1}){Fe(!Ql(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=n.replace(/^\/*/,"/"),f=C.useMemo(()=>({basename:c,navigator:i,static:a,future:{}}),[c,i,a]);typeof t=="string"&&(t=Kl(t));let{pathname:h="/",search:m="",hash:g="",state:y=null,key:b="default"}=t,S=C.useMemo(()=>{let v=cr(h,c);return v==null?null:{location:{pathname:v,search:m,hash:g,state:y,key:b},navigationType:s}},[c,h,m,g,y,b,s]);return wn(S!=null,`<Router basename="${c}"> is not able to match the URL "${h}${m}${g}" because it does not start with the basename, so the <Router> won't render anything.`),S==null?null:C.createElement(jn.Provider,{value:f},C.createElement(Ta.Provider,{children:e,value:S}))}function Nw({children:n,location:e}){return ow(vh(n),e)}function vh(n,e=[]){let t=[];return C.Children.forEach(n,(s,i)=>{if(!C.isValidElement(s))return;let a=[...e,i];if(s.type===C.Fragment){t.push.apply(t,vh(s.props.children,a));return}Fe(s.type===ut,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Fe(!s.props.index||!s.props.children,"An index route cannot have child routes.");let c={id:s.props.id||a.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(c.children=vh(s.props.children,a)),t.push(c)}),t}var ac="get",oc="application/x-www-form-urlencoded";function su(n){return n!=null&&typeof n.tagName=="string"}function ww(n){return su(n)&&n.tagName.toLowerCase()==="button"}function kw(n){return su(n)&&n.tagName.toLowerCase()==="form"}function jw(n){return su(n)&&n.tagName.toLowerCase()==="input"}function Cw(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function Ew(n,e){return n.button===0&&(!e||e==="_self")&&!Cw(n)}var Qo=null;function Aw(){if(Qo===null)try{new FormData(document.createElement("form"),0),Qo=!1}catch{Qo=!0}return Qo}var Tw=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Vf(n){return n!=null&&!Tw.has(n)?(wn(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${oc}"`),null):n}function Mw(n,e){let t,s,i,a,c;if(kw(n)){let f=n.getAttribute("action");s=f?cr(f,e):null,t=n.getAttribute("method")||ac,i=Vf(n.getAttribute("enctype"))||oc,a=new FormData(n)}else if(ww(n)||jw(n)&&(n.type==="submit"||n.type==="image")){let f=n.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=n.getAttribute("formaction")||f.getAttribute("action");if(s=h?cr(h,e):null,t=n.getAttribute("formmethod")||f.getAttribute("method")||ac,i=Vf(n.getAttribute("formenctype"))||Vf(f.getAttribute("enctype"))||oc,a=new FormData(f,n),!Aw()){let{name:m,type:g,value:y}=n;if(g==="image"){let b=m?`${m}.`:"";a.append(`${b}x`,"0"),a.append(`${b}y`,"0")}else m&&a.append(m,y)}}else{if(su(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=ac,s=null,i=oc,c=n}return a&&i==="text/plain"&&(c=a,a=void 0),{action:s,method:t.toLowerCase(),encType:i,formData:a,body:c}}function sm(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function Ow(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Rw(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function Dw(n,e,t){let s=await Promise.all(n.map(async i=>{let a=e.routes[i.route.id];if(a){let c=await Ow(a,t);return c.links?c.links():[]}return[]}));return _w(s.flat(1).filter(Rw).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function ey(n,e,t,s,i,a){let c=(h,m)=>t[m]?h.route.id!==t[m].route.id:!0,f=(h,m)=>{var g;return t[m].pathname!==h.pathname||((g=t[m].route.path)==null?void 0:g.endsWith("*"))&&t[m].params["*"]!==h.params["*"]};return a==="assets"?e.filter((h,m)=>c(h,m)||f(h,m)):a==="data"?e.filter((h,m)=>{var y;let g=s.routes[h.route.id];if(!g||!g.hasLoader)return!1;if(c(h,m)||f(h,m))return!0;if(h.route.shouldRevalidate){let b=h.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((y=t[0])==null?void 0:y.params)||{},nextUrl:new URL(n,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function zw(n,e,{includeHydrateFallback:t}={}){return Lw(n.map(s=>{let i=e.routes[s.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function Lw(n){return[...new Set(n)]}function Bw(n){let e={},t=Object.keys(n).sort();for(let s of t)e[s]=n[s];return e}function _w(n,e){let t=new Set;return new Set(e),n.reduce((s,i)=>{let a=JSON.stringify(Bw(i));return t.has(a)||(t.add(a),s.push({key:a,link:i})),s},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Hw=new Set([100,101,204,205]);function Uw(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&cr(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function Ub(){let n=C.useContext(Jl);return sm(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function Pw(){let n=C.useContext(nu);return sm(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var lm=C.createContext(void 0);lm.displayName="FrameworkContext";function Pb(){let n=C.useContext(lm);return sm(n,"You must render this element inside a <HydratedRouter> element"),n}function Iw(n,e){let t=C.useContext(lm),[s,i]=C.useState(!1),[a,c]=C.useState(!1),{onFocus:f,onBlur:h,onMouseEnter:m,onMouseLeave:g,onTouchStart:y}=e,b=C.useRef(null);C.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let w=E=>{E.forEach(O=>{c(O.isIntersecting)})},k=new IntersectionObserver(w,{threshold:.5});return b.current&&k.observe(b.current),()=>{k.disconnect()}}},[n]),C.useEffect(()=>{if(s){let w=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(w)}}},[s]);let S=()=>{i(!0)},v=()=>{i(!1),c(!1)};return t?n!=="intent"?[a,b,{}]:[a,b,{onFocus:Zi(f,S),onBlur:Zi(h,v),onMouseEnter:Zi(m,S),onMouseLeave:Zi(g,v),onTouchStart:Zi(y,S)}]:[!1,b,{}]}function Zi(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function Vw({page:n,...e}){let{router:t}=Ub(),s=C.useMemo(()=>Mb(t.routes,n,t.basename),[t.routes,n,t.basename]);return s?C.createElement(Fw,{page:n,matches:s,...e}):null}function qw(n){let{manifest:e,routeModules:t}=Pb(),[s,i]=C.useState([]);return C.useEffect(()=>{let a=!1;return Dw(n,e,t).then(c=>{a||i(c)}),()=>{a=!0}},[n,e,t]),s}function Fw({page:n,matches:e,...t}){let s=dr(),{manifest:i,routeModules:a}=Pb(),{basename:c}=Ub(),{loaderData:f,matches:h}=Pw(),m=C.useMemo(()=>ey(n,e,h,i,s,"data"),[n,e,h,i,s]),g=C.useMemo(()=>ey(n,e,h,i,s,"assets"),[n,e,h,i,s]),y=C.useMemo(()=>{if(n===s.pathname+s.search+s.hash)return[];let v=new Set,w=!1;if(e.forEach(E=>{var B;let O=i.routes[E.route.id];!O||!O.hasLoader||(!m.some(q=>q.route.id===E.route.id)&&E.route.id in f&&((B=a[E.route.id])!=null&&B.shouldRevalidate)||O.hasClientLoader?w=!0:v.add(E.route.id))}),v.size===0)return[];let k=Uw(n,c);return w&&v.size>0&&k.searchParams.set("_routes",e.filter(E=>v.has(E.route.id)).map(E=>E.route.id).join(",")),[k.pathname+k.search]},[c,f,s,i,m,e,n,a]),b=C.useMemo(()=>zw(g,i),[g,i]),S=qw(g);return C.createElement(C.Fragment,null,y.map(v=>C.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...t})),b.map(v=>C.createElement("link",{key:v,rel:"modulepreload",href:v,...t})),S.map(({key:v,link:w})=>C.createElement("link",{key:v,...w})))}function $w(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var Ib=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Ib&&(window.__reactRouterVersion="7.6.0")}catch{}function Gw({basename:n,children:e,window:t}){let s=C.useRef();s.current==null&&(s.current=DN({window:t,v5Compat:!0}));let i=s.current,[a,c]=C.useState({action:i.action,location:i.location}),f=C.useCallback(h=>{C.startTransition(()=>c(h))},[c]);return C.useLayoutEffect(()=>i.listen(f),[i,f]),C.createElement(Sw,{basename:n,children:e,location:a.location,navigationType:a.action,navigator:i})}var Vb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,me=C.forwardRef(function({onClick:e,discover:t="render",prefetch:s="none",relative:i,reloadDocument:a,replace:c,state:f,target:h,to:m,preventScrollReset:g,viewTransition:y,...b},S){let{basename:v}=C.useContext(jn),w=typeof m=="string"&&Vb.test(m),k,E=!1;if(typeof m=="string"&&w&&(k=m,Ib))try{let te=new URL(window.location.href),se=m.startsWith("//")?new URL(te.protocol+m):new URL(m),ue=cr(se.pathname,v);se.origin===te.origin&&ue!=null?m=ue+se.search+se.hash:E=!0}catch{wn(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let O=iw(m,{relative:i}),[B,q,D]=Iw(s,b),R=Qw(m,{replace:c,state:f,target:h,preventScrollReset:g,relative:i,viewTransition:y});function L(te){e&&e(te),te.defaultPrevented||R(te)}let $=C.createElement("a",{...b,...D,href:k||O,onClick:E||a?e:L,ref:$w(S,q),target:h,"data-discover":!w&&t==="render"?"true":void 0});return B&&!w?C.createElement(C.Fragment,null,$,C.createElement(Vw,{page:O})):$});me.displayName="Link";var Yw=C.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:s="",end:i=!1,style:a,to:c,viewTransition:f,children:h,...m},g){let y=Ma(c,{relative:m.relative}),b=dr(),S=C.useContext(nu),{navigator:v,basename:w}=C.useContext(jn),k=S!=null&&tk(y)&&f===!0,E=v.encodeLocation?v.encodeLocation(y).pathname:y.pathname,O=b.pathname,B=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;t||(O=O.toLowerCase(),B=B?B.toLowerCase():null,E=E.toLowerCase()),B&&w&&(B=cr(B,w)||B);const q=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let D=O===E||!i&&O.startsWith(E)&&O.charAt(q)==="/",R=B!=null&&(B===E||!i&&B.startsWith(E)&&B.charAt(E.length)==="/"),L={isActive:D,isPending:R,isTransitioning:k},$=D?e:void 0,te;typeof s=="function"?te=s(L):te=[s,D?"active":null,R?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let se=typeof a=="function"?a(L):a;return C.createElement(me,{...m,"aria-current":$,className:te,ref:g,style:se,to:c,viewTransition:f},typeof h=="function"?h(L):h)});Yw.displayName="NavLink";var Kw=C.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:s,replace:i,state:a,method:c=ac,action:f,onSubmit:h,relative:m,preventScrollReset:g,viewTransition:y,...b},S)=>{let v=Ww(),w=ek(f,{relative:m}),k=c.toLowerCase()==="get"?"get":"post",E=typeof f=="string"&&Vb.test(f),O=B=>{if(h&&h(B),B.defaultPrevented)return;B.preventDefault();let q=B.nativeEvent.submitter,D=(q==null?void 0:q.getAttribute("formmethod"))||c;v(q||B.currentTarget,{fetcherKey:e,method:D,navigate:t,replace:i,state:a,relative:m,preventScrollReset:g,viewTransition:y})};return C.createElement("form",{ref:S,method:k,action:w,onSubmit:s?h:O,...b,"data-discover":!E&&n==="render"?"true":void 0})});Kw.displayName="Form";function Jw(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function qb(n){let e=C.useContext(Jl);return Fe(e,Jw(n)),e}function Qw(n,{target:e,replace:t,state:s,preventScrollReset:i,relative:a,viewTransition:c}={}){let f=fr(),h=dr(),m=Ma(n,{relative:a});return C.useCallback(g=>{if(Ew(g,e)){g.preventDefault();let y=t!==void 0?t:ga(h)===ga(m);f(n,{replace:y,state:s,preventScrollReset:i,relative:a,viewTransition:c})}},[h,f,m,t,s,e,n,i,a,c])}var Xw=0,Zw=()=>`__${String(++Xw)}__`;function Ww(){let{router:n}=qb("useSubmit"),{basename:e}=C.useContext(jn),t=xw();return C.useCallback(async(s,i={})=>{let{action:a,method:c,encType:f,formData:h,body:m}=Mw(s,e);if(i.navigate===!1){let g=i.fetcherKey||Zw();await n.fetch(g,t,i.action||a,{preventScrollReset:i.preventScrollReset,formData:h,body:m,formMethod:i.method||c,formEncType:i.encType||f,flushSync:i.flushSync})}else await n.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:h,body:m,formMethod:i.method||c,formEncType:i.encType||f,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[n,e,t])}function ek(n,{relative:e}={}){let{basename:t}=C.useContext(jn),s=C.useContext(Cn);Fe(s,"useFormAction must be used inside a RouteContext");let[i]=s.matches.slice(-1),a={...Ma(n||".",{relative:e})},c=dr();if(n==null){a.search=c.search;let f=new URLSearchParams(a.search),h=f.getAll("index");if(h.some(g=>g==="")){f.delete("index"),h.filter(y=>y).forEach(y=>f.append("index",y));let g=f.toString();a.search=g?`?${g}`:""}}return(!n||n===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:ir([t,a.pathname])),ga(a)}function tk(n,e={}){let t=C.useContext(zb);Fe(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=qb("useViewTransitionState"),i=Ma(n,{relative:e.relative});if(!t.isTransitioning)return!1;let a=cr(t.currentLocation.pathname,s)||t.currentLocation.pathname,c=cr(t.nextLocation.pathname,s)||t.nextLocation.pathname;return pc(i.pathname,c)!=null||pc(i.pathname,a)!=null}[...Hw];var nk=Tb();const rk=Xh(nk),Pl={BASE_URL:"https://api.shopmaraph.com/api"},Fb=C.createContext(void 0),Wi=Pl.BASE_URL,sk=({children:n})=>{const[e,t]=C.useState(null),[s,i]=C.useState(null),[a,c]=C.useState(!0);C.useEffect(()=>{(async()=>{try{const w=localStorage.getItem("user"),k=localStorage.getItem("token");if(w&&k){t(JSON.parse(w)),i(k);const E=await fetch(`${Wi}/user`,{method:"GET",headers:{Authorization:`Bearer ${k}`,Accept:"application/json"},credentials:"include"});if(!E.ok)t(null),i(null),localStorage.removeItem("user"),localStorage.removeItem("token"),console.log("Token validation failed during initialization");else{const O=await E.json();O.success&&O.user&&(t(O.user),localStorage.setItem("user",JSON.stringify(O.user)))}}}catch(w){console.error("Error loading user or validating token:",w),t(null),i(null),localStorage.removeItem("user"),localStorage.removeItem("token")}finally{c(!1)}})()},[]);const f=!!e&&!!s,h=(e==null?void 0:e.role)==="admin",m=async()=>!!s,g=async(v,w,k,E)=>{try{const O=await fetch(`${Wi}/register`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({name:v,email:w,password:k,password_confirmation:E})});if(!O.ok){const q=await O.json();throw new Error(q.message||"Registration failed")}const B=await O.json();return t(B.user),i(B.token),localStorage.setItem("user",JSON.stringify(B.user)),localStorage.setItem("token",B.token),{user:B.user,token:B.token}}catch(O){throw console.error("Registration error:",O),O}},y=async(v,w)=>{try{const k=await fetch(`${Wi}/login`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({email:v,password:w})});if(!k.ok){const O=await k.json();throw new Error(O.message||"Login failed")}const E=await k.json();t(E.user),i(E.token),localStorage.setItem("user",JSON.stringify(E.user)),localStorage.setItem("token",E.token)}catch(k){throw console.error("Login error:",k),k}},b=async()=>{if(s)try{await fetch(`${Wi}/logout`,{method:"POST",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json",Accept:"application/json"},credentials:"include"})}catch(v){console.error("Logout error:",v)}t(null),i(null),localStorage.removeItem("user"),localStorage.removeItem("token")},S=async()=>{if(console.log("migrateGuestCart called, token:",s?s.substring(0,10)+"...":"missing"),!s)return console.log("No token available, cannot migrate cart"),!1;try{const v="guest_cart",w=localStorage.getItem(v);if(console.log("Guest cart from localStorage:",w?"found":"not found","Key:",v),!w)return!1;const k=JSON.parse(w);if(console.log("Parsed guest cart:",k.length,"items"),!k||!k.length)return!1;for(const E of k){console.log("Adding item to cart:",E.product.id,E.size,E.quantity);const B=await(await fetch(`${Wi}/cart/add`,{method:"POST",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({product_id:E.product.id,size:E.size,quantity:E.quantity})})).json();console.log("API response:",B.success?"success":"failed",B)}return localStorage.removeItem(v),console.log("Guest cart cleared from localStorage"),!0}catch(v){return console.error("Error migrating guest cart:",v),!1}};return a?d.jsx("div",{children:"Loading..."}):d.jsx(Fb.Provider,{value:{user:e,token:s,isAuthenticated:f,isAdmin:h,login:y,register:g,logout:b,validateToken:m,migrateGuestCart:S},children:n})},tt=()=>{const n=C.useContext(Fb);if(n===void 0)throw new Error("useAuth must be used within an AuthProvider");return n},lk=Pl.BASE_URL,Ce=async(n,e="GET",t,s,i=!1)=>{const a=`${lk}${n}`,c={};s&&(c.Authorization=`Bearer ${s}`),!i&&e!=="GET"&&(c["Content-Type"]="application/json"),c.Accept="application/json";const f={method:e,headers:c,credentials:"include"};e!=="GET"&&t&&(f.body=i?t:JSON.stringify(t));try{const h=await fetch(a,f),m=await h.json();if(!h.ok){if(m.errors){const g=Object.values(m.errors).flat().join("; ");throw new Error(g??"")}throw m.message?new Error(m.message):new Error("Something went wrong")}return m}catch(h){throw console.error(`API Request Error (${n}):`,h),h}},_l={getAllProducts:n=>{const e=n?`?${Object.entries(n).filter(([t,s])=>s!=null&&s!=="").map(([t,s])=>`${t}=${encodeURIComponent(String(s))}`).join("&")}`:"";return Ce(`/products${e}`)},getProductById:n=>Ce(`/products/${n}`),createProduct:(n,e)=>Ce("/products","POST",e,n,!0),updateProduct:(n,e,t)=>(t.append("_method","PUT"),Ce(`/products/${e}`,"POST",t,n,!0)),deleteProduct:(n,e)=>Ce(`/products/${e}`,"DELETE",null,n),restockProduct:(n,e,t)=>Ce(`/products/${e}/restock`,"POST",t,n)},ws={getCart:n=>Ce("/cart","GET",null,n),addToCart:(n,e,t,s)=>Ce("/cart/add","POST",{product_id:e,size:t,quantity:s},n),updateCartItem:(n,e,t)=>Ce("/cart/update","POST",{cart_item_id:e,quantity:t},n),removeFromCart:(n,e)=>Ce("/cart/remove","POST",{cart_item_id:e},n),clearCart:n=>Ce("/cart/clear","POST",null,n)},Il={createOrder:(n,e)=>Ce("/orders","POST",e,n,!0),createGuestOrder:n=>Ce("/guest-orders","POST",n,null,!0),getUserOrders:n=>Ce("/orders","GET",null,n),getUserOrder:(n,e)=>Ce(`/orders/${e}`,"GET",null,n),getAllOrders:(n,e)=>{const t=e?`?status=${e}`:"";return Ce(`/admin/orders${t}`,"GET",null,n)},getOrder:(n,e)=>Ce(`/admin/orders/${e}`,"GET",null,n),updateOrderStatus:(n,e,t,s)=>Ce(`/admin/orders/${e}/status`,"POST",{status:t,admin_notes:s},n),getGuestOrders:n=>Ce(`/guest-orders/${n}`,"GET",null,null)},na={getAll:n=>Ce("/admin/hero-carousel","GET",null,n),create:(n,e)=>Ce("/admin/hero-carousel","POST",e,n,!0),update:(n,e,t)=>(t.append("_method","PUT"),Ce(`/admin/hero-carousel/${e}`,"POST",t,n,!0)),delete:(n,e)=>Ce(`/admin/hero-carousel/${e}`,"DELETE",null,n),updateInterval:(n,e)=>Ce("/admin/hero-carousel/interval","POST",{interval:e},n),getPublic:()=>Ce("/hero-carousel","GET")},ty={getAllUsers:n=>Ce("/admin/users","GET",null,n),changeUserPassword:(n,e,t,s)=>Ce(`/admin/users/${e}/change-password`,"POST",{password:t,password_confirmation:s},n)},ik=({message:n,type:e="info",duration:t=3e3,onClose:s,isVisible:i})=>{if(C.useEffect(()=>{if(i){const c=setTimeout(()=>{s()},t);return()=>clearTimeout(c)}},[i,t,s]),!i)return null;const a={success:"bg-green-500",error:"bg-red-500",warning:"bg-yellow-500",info:"bg-blue-500"}[e];return d.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:d.jsxs("div",{className:`${a} text-white px-4 py-3 rounded-md shadow-lg flex items-center`,children:[d.jsx("div",{className:"mr-3",children:n}),d.jsx("button",{onClick:s,className:"text-white hover:text-gray-200",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})})},$b=C.createContext(void 0),ak=({children:n})=>{const[e,t]=C.useState({message:"",type:"info",isVisible:!1}),s=(a,c="info")=>{t({message:a,type:c,isVisible:!0})},i=()=>{t(a=>({...a,isVisible:!1}))};return d.jsxs($b.Provider,{value:{showToast:s},children:[n,d.jsx(ik,{message:e.message,type:e.type,isVisible:e.isVisible,onClose:i})]})},ok=()=>{const n=C.useContext($b);if(!n)throw new Error("useToast must be used within a ToastProvider");return n},Gb=C.createContext(void 0),qf="guest_cart",ny="backup_guest_cart",ck=({children:n})=>{const{token:e,isAuthenticated:t}=tt(),[s,i]=C.useState([]),[a,c]=C.useState(!1),[f,h]=C.useState(null),{showToast:m}=ok();C.useEffect(()=>{t&&e?v():g()},[t,e]);const g=()=>{try{const R=localStorage.getItem(qf);if(R){const L=JSON.parse(R);i(L)}else i([])}catch(R){console.error("Error loading guest cart from localStorage:",R),i([])}},y=R=>{try{localStorage.setItem(qf,JSON.stringify(R))}catch(L){console.error("Error saving guest cart to localStorage:",L)}},b=()=>{try{const R=[...s];return localStorage.setItem(ny,JSON.stringify(R)),console.log("Guest cart backed up:",R.length,"items"),R}catch(R){return console.error("Error backing up guest cart:",R),[]}},S=async R=>{if(!t||!e){console.log("Not authenticated, cannot restore cart");return}console.log("Restoring",R.length,"items to user cart"),c(!0);try{for(const $ of R)console.log("Manually adding item to cart:",$.product.id,$.size,$.quantity),await ws.addToCart(e,$.product.id,$.size,$.quantity);const L=await ws.getCart(e);i(L.data.items||[]),console.log("Cart restored successfully")}catch(L){console.error("Error restoring cart items:",L)}finally{c(!1),localStorage.removeItem(ny)}},v=async()=>{if(!(!t||!e)){c(!0),h(null);try{const R=await ws.getCart(e);i(R.data.items||[])}catch(R){console.error("Error fetching cart:",R),h(R instanceof Error?R.message:"An error occurred while fetching the cart")}finally{c(!1)}}},w=async(R,L,$=1)=>{if(s.some(se=>se.product.id===R.id&&se.size===L)){m(`${R.name} (Size: ${L.toUpperCase()}) is already in your cart.`,"warning");return}if($=1,t&&e){c(!0),h(null);try{const se=await ws.addToCart(e,R.id,L,$);i(se.data.items||[]),m(`${R.name} added to cart!`,"success")}catch(se){console.error("Error adding to cart:",se),h(se instanceof Error?se.message:"An error occurred while adding to cart"),m("Failed to add item to cart","error")}finally{c(!1)}}else{const se=[...s];if(se.findIndex(Z=>Z.product.id===R.id&&Z.size===L)!==-1){m(`${R.name} (Size: ${L.toUpperCase()}) is already in your cart.`,"warning");return}else se.push({product:R,size:L,quantity:$,id:`guest-${Date.now()}-${Math.random().toString(36).substring(2,11)}`});i(se),y(se),m(`${R.name} added to cart!`,"success")}},k=async R=>{if(t&&e&&typeof R=="number"){c(!0),h(null);try{const L=await ws.removeFromCart(e,R);i(L.data.items||[]),m("Item removed from cart","info")}catch(L){console.error("Error removing from cart:",L),h(L instanceof Error?L.message:"An error occurred while removing from cart"),m("Failed to remove item from cart","error")}finally{c(!1)}}else{const L=s.find(te=>te.id===R),$=s.filter(te=>te.id!==R);i($),y($),L&&m("Item removed from cart","info")}},E=async(R,L)=>{if(L<=0)return k(R)},O=async()=>{if(t&&e){c(!0),h(null);try{const R=await ws.clearCart(e);i(R.data.items||[]),m("Cart cleared successfully","info")}catch(R){console.error("Error clearing cart:",R),h(R instanceof Error?R.message:"An error occurred while clearing cart"),m("Failed to clear cart","error")}finally{c(!1)}}else i([]),localStorage.removeItem(qf),m("Cart cleared successfully","info")},B=()=>s.reduce((R,L)=>R+L.quantity,0),q=()=>s.reduce((R,L)=>R+L.product.price*L.quantity,0),D=(R,L)=>s.some($=>$.product.id===R&&$.size===L);return d.jsx(Gb.Provider,{value:{cartItems:s,addToCart:w,removeFromCart:k,updateQuantity:E,clearCart:O,getTotalItems:B,getTotalPrice:q,isInCart:D,isLoading:a,error:f,token:e,fetchCart:v,backupGuestCart:b,restoreGuestCart:S},children:n})},Oa=()=>{const n=C.useContext(Gb);if(n===void 0)throw new Error("useCart must be used within a CartProvider");return n},uk=()=>{const[n,e]=C.useState(!1),[t,s]=C.useState(!1),{getTotalItems:i}=Oa(),{user:a,isAuthenticated:c,isAdmin:f,logout:h}=tt(),m=C.useRef(null),[g,y]=C.useState(!1);C.useEffect(()=>{y(!!localStorage.getItem("guest_id"));const w=E=>{E.key==="guest_id"&&y(!!E.newValue)};window.addEventListener("storage",w);const k=()=>y(!0);return window.addEventListener("guest_id_set",k),()=>{window.removeEventListener("storage",w),window.removeEventListener("guest_id_set",k)}},[]),C.useEffect(()=>{n&&y(!!localStorage.getItem("guest_id"))},[n]);const b=()=>{e(!n)},S=()=>{s(!t)},v=async()=>{await h(),e(!1),s(!1)};return C.useEffect(()=>{const w=k=>{m.current&&!m.current.contains(k.target)&&s(!1)};return document.addEventListener("mousedown",w),()=>{document.removeEventListener("mousedown",w)}},[]),d.jsx(d.Fragment,{children:d.jsxs("nav",{className:"border-b border-gray-200 relative",children:[d.jsxs("div",{className:"flex",children:[d.jsx("div",{className:"bg-[#ad688f] py-2 px-6",children:d.jsx(me,{to:"/",className:"font-como font-light text-lg text-white no-underline flex items-center",children:d.jsx("img",{src:"/app-logo.jpg",alt:"SHOPMARA PH",className:"h-10 w-auto",onError:w=>{const k=w.target;k.src="https://via.placeholder.com/120x40?text=SHOPMARA+PH"}})})}),d.jsx("button",{className:`md:hidden ml-auto flex items-center justify-center px-4 py-4 h-full transition-colors ${n?"bg-black text-[#ad688f]":"bg-[#ad688f] text-black"}`,onClick:b,"aria-label":"Toggle navigation menu",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:n?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16"})})}),d.jsxs("div",{className:"hidden md:flex items-center ml-auto",children:[d.jsx(me,{to:"/products",className:"border-l border-gray-200 py-5 px-10 text-black no-underline hover:bg-gray-100",children:"All Products"}),d.jsx(me,{to:"/new",className:"border-l border-gray-200 py-5 px-10 text-black no-underline hover:bg-gray-100",children:"New Arrivals"}),d.jsx(me,{to:"/sale",className:"border-l border-gray-200 py-5 px-10 text-black no-underline hover:bg-gray-100",children:"Sale"}),d.jsx(me,{to:"/about",className:"border-l border-gray-200 py-5 px-10 text-black no-underline hover:bg-gray-100",children:"About Us"}),d.jsxs(me,{to:"/cart",className:"border-l border-gray-200 py-5 px-5 text-black no-underline hover:bg-gray-100 flex items-center justify-center relative",children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{d:"M3 1a1 1 0 000 2h1.22l.305 1.222a.997.997 0 00.01.042l1.358 5.43-.893.892C3.74 11.846 4.632 14 6.414 14H15a1 1 0 000-2H6.414l1-1H14a1 1 0 00.894-.553l3-6A1 1 0 0017 3H6.28l-.31-1.243A1 1 0 005 1H3zM16 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM6.5 18a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"})}),i()>0&&d.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full text-xs w-5 h-5 flex items-center justify-center",children:i()})]}),d.jsxs("div",{className:"relative",ref:m,children:[d.jsxs("button",{onClick:S,className:"border-l border-gray-200 py-5 px-5 text-black hover:bg-gray-100 flex items-center gap-2 font-como font-light",children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 text-black",viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-6-3a2 2 0 11-4 0 2 2 0 014 0zm-2 4a5 5 0 00-4.546 2.916A5.986 5.986 0 005 10a6 6 0 0012 0c0-.352-.035-.696-.1-1.028A5.001 5.001 0 0010 11z",clipRule:"evenodd"})}),d.jsx("span",{className:"text-sm",children:"My Account"}),d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`w-4 h-4 transition-transform ${t?"rotate-180":""}`,viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]}),t&&d.jsx("div",{className:"absolute right-0 z-50 mt-0 bg-white shadow-lg border border-gray-200 rounded-b w-48 font-como font-light",style:{backgroundColor:"#fff"},children:c?d.jsxs(d.Fragment,{children:[f&&d.jsxs(me,{to:"/admin",className:"flex items-center gap-2 px-4 py-3 text-black no-underline hover:bg-gray-100 border-b border-gray-200",children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 text-black",viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-6-3a2 2 0 11-4 0 2 2 0 014 0zm-2 4a5 5 0 00-4.546 2.916A5.986 5.986 0 005 10a6 6 0 0012 0c0-.352-.035-.696-.1-1.028A5.001 5.001 0 0010 11z",clipRule:"evenodd"})}),d.jsx("span",{className:"text-sm",children:"Admin"})]}),d.jsxs(me,{to:"/my-orders",className:"flex items-center gap-2 px-4 py-3 text-black no-underline hover:bg-gray-100 border-b border-gray-200",children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 text-black",viewBox:"0 0 20 20",fill:"currentColor",children:[d.jsx("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),d.jsx("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z",clipRule:"evenodd"})]}),d.jsx("span",{className:"text-sm",children:"My Orders"})]}),d.jsxs("div",{className:"flex items-center gap-2 px-4 py-3 text-black hover:bg-gray-100 cursor-pointer",onClick:v,children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 text-black",viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{fillRule:"evenodd",d:"M3 3a1 1 0 00-1 1v12a1 1 0 001 1h12a1 1 0 001-1V7.414l-4-4H3zm7 2a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1zm0 6a1 1 0 100 2 1 1 0 000-2z",clipRule:"evenodd"})}),d.jsx("span",{className:"text-sm",children:"Logout"})]})]}):d.jsxs(d.Fragment,{children:[d.jsxs(me,{to:"/login",className:"flex items-center gap-2 px-4 py-3 text-black no-underline hover:bg-gray-100 border-b border-gray-200",children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 text-black",viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-6-3a2 2 0 11-4 0 2 2 0 014 0zm-2 4a5 5 0 00-4.546 2.916A5.986 5.986 0 005 10a6 6 0 0012 0c0-.352-.035-.696-.1-1.028A5.001 5.001 0 0010 11z",clipRule:"evenodd"})}),d.jsx("span",{className:"text-sm",children:"Login"})]}),d.jsxs(me,{to:"/register",className:"flex items-center gap-2 px-4 py-3 text-black no-underline hover:bg-gray-100",children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 text-black",viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{d:"M8 9a3 3 0 100-6 3 3 0 000 6zM8 11a6 6 0 016 6H2a6 6 0 016-6zM16 7a1 1 0 10-2 0v1h-1a1 1 0 100 2h1v1a1 1 0 102 0v-1h1a1 1 0 100-2h-1V7z"})}),d.jsx("span",{className:"text-sm",children:"Sign Up"})]}),!c&&g&&d.jsxs(me,{to:"/my-orders",className:"flex items-center gap-2 px-4 py-3 text-black no-underline hover:bg-gray-100 border-b border-gray-200",children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 text-black",viewBox:"0 0 20 20",fill:"currentColor",children:[d.jsx("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),d.jsx("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z",clipRule:"evenodd"})]}),d.jsx("span",{className:"text-sm",children:"My Orders"})]})]})})]})]})]}),d.jsx("div",{className:`md:hidden w-full bg-white border-t border-gray-200 overflow-hidden transition-all duration-300 ease-in-out ${n?"max-h-screen opacity-100":"max-h-0 opacity-0"}`,children:d.jsxs("div",{className:"py-2 font-como font-light",children:[d.jsx(me,{to:"/products",className:"block py-3 px-4 border-b border-gray-200 text-black no-underline hover:bg-gray-100",children:"All Products"}),d.jsx(me,{to:"/new",className:"block py-3 px-4 border-b border-gray-200 text-black no-underline hover:bg-gray-100",children:"New"}),d.jsx(me,{to:"/sale",className:"block py-3 px-4 border-b border-gray-200 text-black no-underline hover:bg-gray-100",children:"Sale"}),d.jsx(me,{to:"/about",className:"block py-3 px-4 border-b border-gray-200 text-black no-underline hover:bg-gray-100",children:"About Us"}),d.jsxs(me,{to:"/cart",className:"flex items-center gap-2 py-3 px-4 border-b border-gray-200 text-black no-underline hover:bg-gray-100",children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{d:"M3 1a1 1 0 000 2h1.22l.305 1.222a.997.997 0 00.01.042l1.358 5.43-.893.892C3.74 11.846 4.632 14 6.414 14H15a1 1 0 000-2H6.414l1-1H14a1 1 0 00.894-.553l3-6A1 1 0 0017 3H6.28l-.31-1.243A1 1 0 005 1H3zM16 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM6.5 18a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"})}),d.jsx("span",{children:"Cart"}),i()>0&&d.jsx("span",{className:"bg-red-500 text-white rounded-full text-xs px-2 py-1",children:i()})]}),d.jsxs("div",{className:"border-b border-gray-200 py-2 px-4",children:[d.jsx("div",{className:"font-medium text-sm mb-2",children:"My Account"}),c?d.jsxs("div",{className:"ml-2 space-y-2",children:[f&&d.jsxs(me,{to:"/admin",className:"flex items-center gap-2 py-2 text-black no-underline hover:text-gray-600",children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 text-black",viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-6-3a2 2 0 11-4 0 2 2 0 014 0zm-2 4a5 5 0 00-4.546 2.916A5.986 5.986 0 005 10a6 6 0 0012 0c0-.352-.035-.696-.1-1.028A5.001 5.001 0 0010 11z",clipRule:"evenodd"})}),d.jsx("span",{className:"text-sm",children:"Admin"})]}),d.jsxs(me,{to:"/my-orders",className:"flex items-center gap-2 py-2 text-black no-underline hover:text-gray-600",children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 text-black",viewBox:"0 0 20 20",fill:"currentColor",children:[d.jsx("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),d.jsx("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z",clipRule:"evenodd"})]}),d.jsx("span",{className:"text-sm",children:"My Orders"})]}),d.jsxs("div",{className:"flex items-center gap-2 py-2 text-black hover:text-gray-600 cursor-pointer",onClick:v,children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 text-black",viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{fillRule:"evenodd",d:"M3 3a1 1 0 00-1 1v12a1 1 0 001 1h12a1 1 0 001-1V7.414l-4-4H3zm7 2a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1zm0 6a1 1 0 100 2 1 1 0 000-2z",clipRule:"evenodd"})}),d.jsxs("span",{className:"text-sm",children:["Logout ",a&&`(${a.name})`]})]})]}):d.jsxs("div",{className:"ml-2 space-y-2",children:[d.jsxs(me,{to:"/login",className:"flex items-center gap-2 py-2 text-black no-underline hover:text-gray-600",children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 text-black",viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-6-3a2 2 0 11-4 0 2 2 0 014 0zm-2 4a5 5 0 00-4.546 2.916A5.986 5.986 0 005 10a6 6 0 0012 0c0-.352-.035-.696-.1-1.028A5.001 5.001 0 0010 11z",clipRule:"evenodd"})}),d.jsx("span",{className:"text-sm",children:"Login"})]}),d.jsxs(me,{to:"/register",className:"flex items-center gap-2 py-2 text-black no-underline hover:text-gray-600",children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 text-black",viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{d:"M8 9a3 3 0 100-6 3 3 0 000 6zM8 11a6 6 0 016 6H2a6 6 0 016-6zM16 7a1 1 0 10-2 0v1h-1a1 1 0 100 2h1v1a1 1 0 102 0v-1h1a1 1 0 100-2h-1V7z"})}),d.jsx("span",{className:"text-sm",children:"Sign Up"})]}),!c&&g&&d.jsxs(me,{to:"/my-orders",className:"flex items-center gap-2 py-2 text-black no-underline hover:text-gray-600",children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 text-black",viewBox:"0 0 20 20",fill:"currentColor",children:[d.jsx("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),d.jsx("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z",clipRule:"evenodd"})]}),d.jsx("span",{className:"text-sm",children:"My Orders"})]})]})]})]})})]})})},dk=()=>{const n=new Date().getFullYear();return d.jsx("footer",{className:"bg-gray-100 pt-12 pb-8 font-como font-light",children:d.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mb-12",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"font-como font-light text-lg mb-4",children:"SHOPMARA PH"}),d.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"ShopMaraPH curates stylish, sustainable vintage pieces that empower modern women to wear confidence and elegance—from office to everyday. With ShopMaraPH, wear your story."}),d.jsxs("div",{className:"flex items-center mb-4 text-gray-600",children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),d.jsx("span",{className:"text-sm",children:"Located in Pasig City, PH"})]}),d.jsxs("div",{className:"flex space-x-4",children:[d.jsx("a",{href:"#",className:"text-gray-500 hover:text-black",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{d:"M22.675 0h-21.35c-.732 0-1.325.593-1.325 1.325v21.351c0 .731.593 1.324 1.325 1.324h11.495v-9.294h-3.128v-3.622h3.128v-2.671c0-3.1 1.893-4.788 4.659-4.788 1.325 0 2.463.099 2.795.143v3.24l-1.918.001c-1.504 0-1.795.715-1.795 1.763v2.313h3.587l-.467 3.622h-3.12v9.293h6.116c.73 0 1.323-.593 1.323-1.325v-21.35c0-.732-.593-1.325-1.325-1.325z"})})}),d.jsx("a",{href:"#",className:"text-gray-500 hover:text-black",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"})})}),d.jsx("a",{href:"#",className:"text-gray-500 hover:text-black",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{d:"M19.59 6.69a4.83 4.83 0 0 1-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 0 1-5.2 1.74 2.89 2.89 0 0 1 2.31-4.64 2.93 2.93 0 0 1 .88.13V9.4a6.84 6.84 0 0 0-1-.05A6.33 6.33 0 0 0 5 20.1a6.34 6.34 0 0 0 10.86-4.43v-7a8.16 8.16 0 0 0 4.77 1.52v-3.4a4.85 4.85 0 0 1-1-.1z"})})})]})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-como font-light text-lg mb-4",children:"Shop"}),d.jsxs("ul",{className:"space-y-2",children:[d.jsx("li",{children:d.jsx(me,{to:"/products",className:"text-gray-600 hover:text-black text-sm",children:"All Products"})}),d.jsx("li",{children:d.jsx(me,{to:"/new",className:"text-gray-600 hover:text-black text-sm",children:"New Arrivals"})}),d.jsx("li",{children:d.jsx(me,{to:"/sale",className:"text-gray-600 hover:text-black text-sm",children:"Sale"})})]})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-como font-light text-lg mb-4",children:"Company"}),d.jsxs("ul",{className:"space-y-2",children:[d.jsx("li",{children:d.jsx(me,{to:"/about",className:"text-gray-600 hover:text-black text-sm",children:"About Us"})}),d.jsx("li",{children:d.jsx(me,{to:"/contact",className:"text-gray-600 hover:text-black text-sm",children:"Contact"})}),d.jsx("li",{children:d.jsx(me,{to:"/terms",className:"text-gray-600 hover:text-black text-sm",children:"Terms & Conditions"})}),d.jsx("li",{children:d.jsx(me,{to:"/privacy",className:"text-gray-600 hover:text-black text-sm",children:"Privacy Policy"})})]})]})]}),d.jsxs("div",{className:"border-t border-gray-200 pt-8",children:[d.jsxs("p",{className:"text-sm text-gray-500 text-center",children:["© ",n," SHOPMARA PH. All rights reserved."]}),d.jsx("p",{className:"text-xs text-gray-400 text-center mt-2",children:"All product names, logos, and brands are property of their respective owners. ShopMaraPH is not affiliated with or endorsed by any brand featured."})]})]})})},Al=n=>({id:n.id,text:n.text,isActive:n.is_active,displayOrder:n.display_order,buttonText:n.button_text,buttonLink:n.button_link,backgroundColor:n.background_color,textColor:n.text_color,createdAt:n.created_at,updatedAt:n.updated_at}),Ms={getActiveAnnouncements:async()=>{try{return(await Ce("/announcements")).data.map(Al)}catch(n){return console.error("Error fetching announcements:",n),[]}},getAllAnnouncements:async n=>(await Ce("/admin/announcements","GET",null,n)).data.map(Al),getAnnouncementById:async(n,e)=>{const t=await Ce(`/admin/announcements/${e}`,"GET",null,n);return Al(t.data)},createAnnouncement:async(n,e)=>{const t={text:e.text,is_active:e.isActive,display_order:e.displayOrder,button_text:e.buttonText,button_link:e.buttonLink,background_color:e.backgroundColor,text_color:e.textColor},s=await Ce("/admin/announcements","POST",t,n);return Al(s.data)},updateAnnouncement:async(n,e,t)=>{const s={};t.text!==void 0&&(s.text=t.text),t.isActive!==void 0&&(s.is_active=t.isActive),t.displayOrder!==void 0&&(s.display_order=t.displayOrder),t.buttonText!==void 0&&(s.button_text=t.buttonText),t.buttonLink!==void 0&&(s.button_link=t.buttonLink),t.backgroundColor!==void 0&&(s.background_color=t.backgroundColor),t.textColor!==void 0&&(s.text_color=t.textColor);const i=await Ce(`/admin/announcements/${e}`,"PUT",s,n);return Al(i.data)},deleteAnnouncement:async(n,e)=>(await Ce(`/admin/announcements/${e}`,"DELETE",null,n),!0),toggleAnnouncementStatus:async(n,e,t)=>{const s=await Ce(`/admin/announcements/${e}/toggle`,"POST",{is_active:t},n);return Al(s.data)}},fk=()=>{const[n,e]=C.useState([]),[t,s]=C.useState(0),[i,a]=C.useState(!0);C.useEffect(()=>{(async()=>{try{a(!0);const g=[...await Ms.getActiveAnnouncements()].sort((y,b)=>y.displayOrder-b.displayOrder);e(g)}catch(m){console.error("Failed to fetch announcements:",m)}finally{a(!1)}})()},[]),C.useEffect(()=>{if(n.length<=1)return;const h=setInterval(()=>{s(m=>(m+1)%n.length)},5e3);return()=>clearInterval(h)},[n.length]);const c=C.useCallback(h=>{s(h)},[]);if(i||n.length===0)return null;const f=n[t];return d.jsx("div",{className:"w-full",children:d.jsxs("div",{className:"w-full py-3 px-4 flex items-center justify-center transition-all duration-300",style:{backgroundColor:f.backgroundColor,color:f.textColor},children:[d.jsxs("div",{className:"flex items-center justify-center flex-1",children:[d.jsx("p",{className:"text-center font-como font-light",children:f.text}),f.buttonText&&f.buttonLink&&d.jsx(me,{to:f.buttonLink,className:"ml-4 px-3 py-1 border border-current hover:bg-opacity-20 hover:bg-white transition-colors",children:f.buttonText})]}),n.length>1&&d.jsx("div",{className:"flex gap-2 ml-4",children:n.map((h,m)=>d.jsx("button",{onClick:()=>c(m),className:`w-2 h-2 rounded-full ${m===t?"bg-current opacity-100":"bg-current opacity-50"}`,"aria-label":`Go to announcement ${m+1}`},m))})]})})},ry=["https://images.unsplash.com/photo-1512436991641-6745cdb1723f?auto=format&fit=crop&w=1200&q=80","https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=1200&q=80","https://images.unsplash.com/photo-1465101046530-73398c7f28ca?auto=format&fit=crop&w=1200&q=80"],hk=()=>{var c,f,h;const[n,e]=C.useState([]),[t,s]=C.useState(4e3),[i,a]=C.useState(0);return C.useEffect(()=>{na.getPublic().then(m=>{m.data.carousels&&m.data.carousels.length>0?(e(m.data.carousels),s(m.data.interval||4e3)):(e(ry.map(g=>({image_url:g}))),s(4e3))}).catch(()=>{e(ry.map(m=>({image_url:m}))),s(4e3)})},[]),C.useEffect(()=>{if(n.length===0)return;const m=setInterval(()=>{a(g=>(g+1)%n.length)},t);return()=>clearInterval(m)},[n,t]),d.jsxs("div",{className:"relative w-full h-[450px] md:h-[600px] flex items-center justify-center overflow-hidden border-b border-gray-200 bg-black",children:[n.map((m,g)=>d.jsx("img",{src:m.image_url,alt:"carousel background",className:`absolute top-0 left-0 w-full h-full object-cover transition-opacity duration-700 ${g===i?"opacity-100 z-0":"opacity-0 z-0"}`,style:{transitionProperty:"opacity"}},m.image_url+g)),d.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-40 z-10"}),d.jsxs("div",{className:"relative z-20 w-full flex flex-col items-center justify-center h-full",children:[(c=n[i])!=null&&c.title?d.jsx("h1",{className:"text-5xl md:text-7xl font-como font-light mb-4 text-center text-white drop-shadow-lg",children:n[i].title}):d.jsx("h1",{className:"text-5xl md:text-7xl font-como font-light mb-4 text-center text-white drop-shadow-lg",children:"SHOPMARA PH"}),(f=n[i])!=null&&f.subtitle?d.jsx("div",{className:"bg-[#ad688f] px-6 py-2 mb-8 bg-opacity-90 rounded",children:d.jsx("p",{className:"text-lg font-como font-light text-white",children:n[i].subtitle})}):d.jsx("div",{className:"bg-[#ad688f] px-6 py-2 mb-8 bg-opacity-90 rounded",children:d.jsx("p",{className:"text-lg font-como font-light text-white",children:"Timeless Finds, Consciously Curated"})}),d.jsxs("div",{className:"max-w-2xl text-center px-4",children:[(h=n[i])!=null&&h.link?d.jsx("a",{href:n[i].link,className:"text-white underline mb-4 block",target:"_blank",rel:"noopener noreferrer",children:n[i].link}):null,d.jsx("p",{className:"text-gray-100 mb-8 font-como font-light drop-shadow",children:"ShopMaraPH is a passion project rooted in timeless style and conscious living. We offer carefully handpicked vintage polos—elegant, versatile pieces made for modern women who lead, whether in the office or off-duty. Beautifully curated, sustainably sourced."}),d.jsx(fk,{})]})]})]})},Yb=Pl.BASE_URL,lu=async()=>{try{const n=await fetch(`${Yb}/products`);if(!n.ok)throw new Error(`Failed to fetch products: ${n.status}`);return(await n.json()).data||[]}catch(n){throw console.error("Error fetching products:",n),n}},mk=async n=>{try{const e=await fetch(`${Yb}/products/${n}`);if(!e.ok)throw new Error(`Failed to fetch product: ${e.status}`);return(await e.json()).data}catch(e){throw console.error(`Error fetching product ${n}:`,e),e}},pk=async()=>{try{return(await lu()).filter(e=>e.isNewArrival||e.category==="new_arrival")}catch(n){throw console.error("Error fetching new arrival products:",n),n}},gk=()=>{const[n,e]=C.useState([]),[t,s]=C.useState(!0),[i,a]=C.useState(null);return C.useEffect(()=>{(async()=>{try{s(!0);const f=await pk();e(f.slice(0,8))}catch(f){console.error("Error fetching new arrivals:",f),a("Failed to load new arrivals")}finally{s(!1)}})()},[]),t?d.jsx("div",{className:"py-16 bg-white",children:d.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[d.jsx("h2",{className:"text-3xl font-bold mb-8",children:"New Drops"}),d.jsx("div",{className:"text-center py-8",children:d.jsx("p",{children:"Loading new arrivals..."})})]})}):i?d.jsx("div",{className:"py-16 bg-white",children:d.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[d.jsx("h2",{className:"text-3xl font-bold mb-8",children:"New Drops"}),d.jsx("div",{className:"text-center py-8",children:d.jsx("p",{className:"text-red-500",children:i})})]})}):n.length===0?d.jsx("div",{className:"py-16 bg-white",children:d.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[d.jsx("h2",{className:"text-3xl font-bold mb-8",children:"New Drops"}),d.jsx("div",{className:"text-center py-8",children:d.jsx("p",{children:"No new arrivals found at the moment. Check back soon!"})})]})}):d.jsx("div",{className:"py-16 bg-white",children:d.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[d.jsx("h2",{className:"text-3xl font-bold mb-8",children:"New Drops"}),d.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:n.map(c=>d.jsx("div",{className:"group relative",children:d.jsxs(me,{to:`/product/${c.id}`,className:"block no-underline text-inherit",children:[d.jsx("div",{className:"aspect-h-1 aspect-w-1 w-full overflow-hidden bg-gray-200 group-hover:opacity-90",children:d.jsx("img",{src:c.image,alt:c.name,className:"h-full w-full object-cover object-center"})}),d.jsxs("div",{className:"mt-4",children:[d.jsx("h3",{className:"text-sm text-gray-700",children:c.name}),d.jsxs("p",{className:"mt-1 text-sm font-medium text-gray-900",children:["₱",c.price.toFixed(2)]})]})]})},c.id))}),d.jsx("div",{className:"text-center mt-12",children:d.jsx(me,{to:"/products",className:"inline-block border border-black px-8 py-3 hover:bg-black hover:text-white transition-colors no-underline text-black",children:"View All Products"})})]})})},xk=()=>d.jsxs(d.Fragment,{children:[d.jsx(hk,{}),d.jsx(gk,{}),d.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8"})]}),im=({activeCategory:n,activeSize:e,searchKeyword:t,onCategoryChange:s,onSizeChange:i,onKeywordChange:a})=>d.jsxs("div",{className:"bg-white p-4 rounded shadow",children:[d.jsx("h2",{className:"font-bold text-lg mb-4",children:"Filters"}),d.jsxs("div",{className:"mb-6",children:[d.jsx("h3",{className:"font-medium text-sm mb-2",children:"Search"}),d.jsxs("div",{className:"relative",children:[d.jsx("input",{type:"text",value:t,onChange:c=>a(c.target.value),placeholder:"Search products...",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-black focus:border-black text-sm"}),t&&d.jsx("button",{onClick:()=>a(""),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})})]})]}),d.jsxs("div",{className:"mb-6",children:[d.jsx("h3",{className:"font-medium text-sm mb-2",children:"Category"}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex items-center",children:[d.jsx("input",{type:"radio",id:"all-products",name:"category",checked:n==="all",onChange:()=>s("all"),className:"mr-2"}),d.jsx("label",{htmlFor:"all-products",children:"All Products"})]}),d.jsxs("div",{className:"flex items-center",children:[d.jsx("input",{type:"radio",id:"new-arrival",name:"category",checked:n==="new_arrival",onChange:()=>s("new_arrival"),className:"mr-2"}),d.jsx("label",{htmlFor:"new-arrival",children:"New Arrivals"})]}),d.jsxs("div",{className:"flex items-center",children:[d.jsx("input",{type:"radio",id:"sale",name:"category",checked:n==="sale",onChange:()=>s("sale"),className:"mr-2"}),d.jsx("label",{htmlFor:"sale",children:"Sale"})]})]})]}),d.jsxs("div",{className:"mb-6",children:[d.jsx("h3",{className:"font-medium text-sm mb-2",children:"Size"}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex items-center",children:[d.jsx("input",{type:"radio",id:"all-sizes",name:"size",checked:e==="all",onChange:()=>i("all"),className:"mr-2"}),d.jsx("label",{htmlFor:"all-sizes",children:"All Sizes"})]}),d.jsxs("div",{className:"flex items-center",children:[d.jsx("input",{type:"radio",id:"small",name:"size",checked:e==="small",onChange:()=>i("small"),className:"mr-2"}),d.jsx("label",{htmlFor:"small",children:"Small"})]}),d.jsxs("div",{className:"flex items-center",children:[d.jsx("input",{type:"radio",id:"medium",name:"size",checked:e==="medium",onChange:()=>i("medium"),className:"mr-2"}),d.jsx("label",{htmlFor:"medium",children:"Medium"})]}),d.jsxs("div",{className:"flex items-center",children:[d.jsx("input",{type:"radio",id:"large",name:"size",checked:e==="large",onChange:()=>i("large"),className:"mr-2"}),d.jsx("label",{htmlFor:"large",children:"Large"})]}),d.jsxs("div",{className:"flex items-center",children:[d.jsx("input",{type:"radio",id:"xlarge",name:"size",checked:e==="xlarge",onChange:()=>i("xlarge"),className:"mr-2"}),d.jsx("label",{htmlFor:"xlarge",children:"Extra Large"})]}),d.jsxs("div",{className:"flex items-center",children:[d.jsx("input",{type:"radio",id:"xxlarge",name:"size",checked:e==="xxlarge",onChange:()=>i("xxlarge"),className:"mr-2"}),d.jsx("label",{htmlFor:"xxlarge",children:"2XL"})]}),d.jsxs("div",{className:"flex items-center",children:[d.jsx("input",{type:"radio",id:"xxxlarge",name:"size",checked:e==="xxxlarge",onChange:()=>i("xxxlarge"),className:"mr-2"}),d.jsx("label",{htmlFor:"xxxlarge",children:"3XL"})]})]})]})]}),yk=({product:n})=>{var a;const{addToCart:e}=Oa(),t=n.sizes[0],s=((a=n.sizeStock[0])==null?void 0:a.stock)<=0,i=async c=>{if(c.preventDefault(),c.stopPropagation(),!s)try{await e(n,t,1)}catch(f){console.error("Error adding to cart:",f)}};return d.jsxs("div",{className:"product-card",children:[d.jsxs("div",{className:"absolute top-0 right-0 z-10 flex flex-col gap-1 m-2",children:[n.isNewArrival&&d.jsx("div",{className:"bg-green-500 text-white text-xs font-bold px-2 py-1 rounded",children:"New Arrival"}),n.isSale&&d.jsx("div",{className:"bg-red-500 text-white text-xs font-bold px-2 py-1 rounded",children:"Sale"})]}),d.jsx(me,{to:`/product/${n.id}`,className:"no-underline text-inherit block",children:d.jsxs("div",{className:"product-card__image-container",children:[d.jsx("img",{src:n.image,alt:n.name,className:"product-card__image"}),s&&d.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-60 flex items-center justify-center",children:d.jsx("span",{className:"text-black text-2xl font-bold font-como",children:"SOLD"})})]})}),d.jsxs("div",{className:"product-card__content",children:[d.jsxs("div",{className:"flex items-start gap-2 justify-between",children:[d.jsx(me,{to:`/product/${n.id}`,className:"no-underline text-inherit flex-1 mr-2",children:d.jsx("h3",{className:"product-card__title line-clamp-2",children:n.name})}),d.jsxs("span",{className:"bg-gray-100 text-gray-800 text-xs font-medium px-2 py-1 rounded",children:["Size: ",t.toUpperCase()]})]}),d.jsxs("div",{className:"product-card__price",children:["₱",n.price.toFixed(2)]}),d.jsx("div",{className:"product-card__actions",children:d.jsx("button",{type:"button",onClick:i,disabled:s,className:`add-to-cart-button w-full ${s?"add-to-cart-button--disabled":""}`,children:s?"Sold":"Add to Cart"})})]})]})},am=({products:n,onResetFilters:e,searchKeyword:t=""})=>d.jsxs("div",{className:"md:col-span-3",children:[t&&d.jsx("div",{className:"mb-6",children:d.jsx("h2",{className:"text-lg font-medium mb-2",children:n.length>0?`Search results for "${t}" (${n.length} ${n.length===1?"product":"products"})`:`No products found for "${t}"`})}),n.length>0?d.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-3 gap-4 md:gap-6 equal-height-grid",children:n.map(s=>d.jsx("div",{className:"h-full",children:d.jsx(yk,{product:s})},s.id))}):d.jsxs("div",{className:"bg-white p-8 rounded shadow text-center",children:[d.jsx("p",{className:"text-gray-600",children:t?`No products found matching "${t}". Try a different search term or reset filters.`:"No products found with the selected filters."}),d.jsx("button",{onClick:e,className:"mt-4 px-4 py-2 bg-black text-white rounded",children:"Reset Filters"})]})]}),om=(n,e,t,s="",i=!1,a=!1)=>n.filter(c=>{const f=c.isNewArrival||c.category==="new_arrival",h=c.isSale||c.category==="sale",m=e==="all"&&(!i||f)&&(!a||h)||e==="new_arrival"&&f||e==="sale"&&h||e===c.category,g=t==="all"||c.sizes.includes(t),y=s===""||c.name.toLowerCase().includes(s.toLowerCase());return m&&g&&y}),bk=()=>{const[n,e]=C.useState("new_arrival"),[t,s]=C.useState("all"),[i,a]=C.useState(!0),[c,f]=C.useState(""),[h,m]=C.useState([]),[g,y]=C.useState([]),[b,S]=C.useState(!0),[v,w]=C.useState(null);C.useEffect(()=>{(async()=>{try{S(!0);const O=await lu();m(O)}catch(O){console.error("Error fetching products:",O),w("Failed to load products")}finally{S(!1)}})()},[]),C.useEffect(()=>{h.length>0&&y(om(h,n,t,c,i))},[h,n,t,i,c]);const k=()=>{e("new_arrival"),s("all"),a(!0),f("")};return b?d.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[d.jsx("h1",{className:"text-3xl font-bold mb-8",children:"New Arrivals"}),d.jsx("div",{className:"text-center py-12",children:d.jsx("p",{children:"Loading products..."})})]}):v?d.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[d.jsx("h1",{className:"text-3xl font-bold mb-8",children:"New Arrivals"}),d.jsx("div",{className:"text-center py-12",children:d.jsx("p",{className:"text-red-500",children:v})})]}):d.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[d.jsx("h1",{className:"text-3xl font-bold mb-8",children:"New Arrivals"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8 mb-8",children:[d.jsx("div",{className:"md:col-span-1",children:d.jsx(im,{activeCategory:n,activeSize:t,searchKeyword:c,onCategoryChange:e,onSizeChange:s,onKeywordChange:f})}),d.jsx(am,{products:g,onResetFilters:k,searchKeyword:c})]})]})},vk=()=>{const[n,e]=C.useState([]),[t,s]=C.useState([]),[i,a]=C.useState(!0),[c,f]=C.useState("sale"),[h,m]=C.useState("all"),[g,y]=C.useState("");C.useEffect(()=>{(async()=>{a(!0);try{const E=await lu();e(E)}catch(E){console.error("Error fetching products:",E)}finally{a(!1)}})()},[]),C.useEffect(()=>{const k=om(n,c,h,g,!1,!0);s(k)},[n,c,h,g]);const b=k=>{f(k)},S=k=>{m(k)},v=k=>{y(k)},w=()=>{f("sale"),m("all"),y("")};return i?d.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[d.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Sale"}),d.jsx("div",{className:"animate-pulse",children:d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[d.jsx("div",{className:"h-64 bg-gray-200 rounded"}),d.jsx("div",{className:"h-64 bg-gray-200 rounded"}),d.jsx("div",{className:"h-64 bg-gray-200 rounded"}),d.jsx("div",{className:"h-64 bg-gray-200 rounded"})]})})]}):d.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[d.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Sale"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[d.jsx("div",{className:"md:col-span-1",children:d.jsx(im,{activeCategory:c,activeSize:h,searchKeyword:g,onCategoryChange:b,onSizeChange:S,onKeywordChange:v})}),d.jsx("div",{className:"md:col-span-3",children:d.jsx(am,{products:t,onResetFilters:w,searchKeyword:g})})]})]})},Sk=()=>{const[n,e]=C.useState(""),[t,s]=C.useState(""),[i,a]=C.useState(""),[c,f]=C.useState(!1),[h,m]=C.useState("/"),{login:g}=tt(),y=fr(),b=dr();C.useEffect(()=>{const w=new URLSearchParams(b.search).get("returnUrl");w&&m(w)},[b.search]);const S=async v=>{v.preventDefault(),a(""),f(!0);try{await g(n,t),y(h)}catch(w){a("Invalid email or password"),console.error(w)}finally{f(!1)}};return d.jsxs("div",{className:"max-w-md mx-auto px-4 py-16",children:[d.jsx("h1",{className:"text-3xl font-bold mb-6 text-center",children:"Login"}),i&&d.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",role:"alert",children:d.jsx("p",{children:i})}),h!=="/"&&d.jsx("div",{className:"bg-blue-100 border border-blue-400 text-blue-700 px-4 py-3 rounded mb-4",role:"alert",children:d.jsx("p",{children:"You need to log in to access that page"})}),d.jsxs("form",{className:"bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4",onSubmit:S,children:[d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"email",children:"Email"}),d.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"email",type:"email",placeholder:"Email",value:n,onChange:v=>e(v.target.value),required:!0})]}),d.jsxs("div",{className:"mb-6",children:[d.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"password",children:"Password"}),d.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline",id:"password",type:"password",placeholder:"******************",value:t,onChange:v=>s(v.target.value),required:!0})]}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("button",{className:`bg-black ${c?"opacity-50 cursor-not-allowed":"hover:bg-gray-800"} text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline`,type:"submit",disabled:c,children:c?"Signing In...":"Sign In"}),d.jsx(me,{className:"inline-block align-baseline font-bold text-sm text-black hover:text-gray-800",to:"/forgot-password",children:"Forgot Password?"})]})]}),d.jsxs("p",{className:"text-center text-gray-500 text-sm",children:["Don't have an account? ",d.jsx(me,{to:"/register",className:"text-black font-bold",children:"Sign up"})]})]})},Nk=()=>{const[n,e]=C.useState(""),[t,s]=C.useState(""),[i,a]=C.useState(""),[c,f]=C.useState(""),[h,m]=C.useState(""),[g,y]=C.useState(!1),{register:b}=tt(),S=fr(),v=async w=>{if(w.preventDefault(),m(""),y(!0),i!==c){m("Passwords do not match"),y(!1);return}try{await b(n,t,i,c),S("/")}catch(k){m("Registration failed. Please check your information and try again."),console.error(k)}finally{y(!1)}};return d.jsxs("div",{className:"max-w-md mx-auto px-4 py-16",children:[d.jsx("h1",{className:"text-3xl font-bold mb-6 text-center",children:"Register"}),h&&d.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",role:"alert",children:d.jsx("p",{children:h})}),d.jsxs("form",{className:"bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4",onSubmit:v,children:[d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"name",children:"Name"}),d.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"name",type:"text",placeholder:"Full Name",value:n,onChange:w=>e(w.target.value),required:!0})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"email",children:"Email"}),d.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"email",type:"email",placeholder:"Email",value:t,onChange:w=>s(w.target.value),required:!0})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"password",children:"Password"}),d.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"password",type:"password",placeholder:"******************",value:i,onChange:w=>a(w.target.value),required:!0,minLength:8})]}),d.jsxs("div",{className:"mb-6",children:[d.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"password-confirmation",children:"Confirm Password"}),d.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"password-confirmation",type:"password",placeholder:"******************",value:c,onChange:w=>f(w.target.value),required:!0,minLength:8})]}),d.jsx("div",{className:"flex items-center justify-between",children:d.jsx("button",{className:`bg-black ${g?"opacity-50 cursor-not-allowed":"hover:bg-gray-800"} text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline w-full`,type:"submit",disabled:g,children:g?"Creating Account...":"Create Account"})})]}),d.jsxs("p",{className:"text-center text-gray-500 text-sm",children:["Already have an account? ",d.jsx(me,{to:"/login",className:"text-black font-bold",children:"Sign in"})]})]})},Kb=C.createContext(void 0),wk=({children:n})=>{const{token:e,isAuthenticated:t}=tt(),[s,i]=C.useState(null),[a,c]=C.useState(!1),[f,h]=C.useState(null);C.useEffect(()=>{t&&e?m():i(null)},[t,e]);const m=async()=>{if(!(!t||!e)){c(!0),h(null);try{const y=await fetch(`${Pl.BASE_URL}/profile`,{method:"GET",headers:{Authorization:`Bearer ${e}`,Accept:"application/json"},credentials:"include"});if(!y.ok)throw new Error("Failed to fetch profile");const b=await y.json();i(b.data.profile)}catch(y){console.error("Error fetching profile:",y),h(y instanceof Error?y.message:"An error occurred while fetching the profile")}finally{c(!1)}}},g=async y=>{if(!(!t||!e)){c(!0),h(null);try{const b=await fetch(`${Pl.BASE_URL}/profile`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`,Accept:"application/json"},credentials:"include",body:JSON.stringify(y)});if(!b.ok){const v=await b.json();throw new Error(v.message||"Failed to update profile")}const S=await b.json();i(S.data.profile)}catch(b){throw console.error("Error updating profile:",b),h(b instanceof Error?b.message:"An error occurred while updating the profile"),b}finally{c(!1)}}};return d.jsx(Kb.Provider,{value:{profile:s,isLoading:a,error:f,fetchProfile:m,updateProfile:g},children:n})},Jb=()=>{const n=C.useContext(Kb);if(n===void 0)throw new Error("useProfile must be used within a ProfileProvider");return n},Sh={getPublicSettings:async()=>{try{return(await Ce("/settings")).data}catch(n){return console.error("Error fetching public settings:",n),{delivery_fee_ncr:80,delivery_fee_outside_ncr:120,free_delivery_threshold:0,payment_options_description:"",what_happens_after_payment:""}}},getAllSettings:async n=>(await Ce("/admin/settings","GET",null,n)).data,updateSetting:async(n,e,t)=>(await Ce(`/admin/settings/${e}`,"PUT",{value:t},n)).data,updateMultipleSettings:async(n,e)=>(await Ce("/admin/settings","POST",{settings:e},n)).data},Ol={deliveryFeeNcr:80,deliveryFeeOutsideNcr:120,freeDeliveryThreshold:0,paymentOptionsDescription:"",whatHappensAfterPayment:"",isLoading:!0,refreshSettings:async()=>{}},Qb=C.createContext(Ol),cm=()=>C.useContext(Qb),kk=({children:n})=>{const[e,t]=C.useState(Ol.deliveryFeeNcr),[s,i]=C.useState(Ol.deliveryFeeOutsideNcr),[a,c]=C.useState(Ol.freeDeliveryThreshold),[f,h]=C.useState(Ol.paymentOptionsDescription),[m,g]=C.useState(Ol.whatHappensAfterPayment),[y,b]=C.useState(!0),S=async()=>{try{b(!0);const k=await Sh.getPublicSettings();t(k.delivery_fee_ncr),i(k.delivery_fee_outside_ncr),c(k.free_delivery_threshold),h(k.payment_options_description||""),g(k.what_happens_after_payment||"")}catch(k){console.error("Error fetching settings:",k)}finally{b(!1)}};C.useEffect(()=>{S()},[]);const w={deliveryFeeNcr:e,deliveryFeeOutsideNcr:s,freeDeliveryThreshold:a,paymentOptionsDescription:f,whatHappensAfterPayment:m,isLoading:y,refreshSettings:async()=>{await S()}};return d.jsx(Qb.Provider,{value:w,children:n})},um=[{value:"",label:"Select Province"},{value:"Metro Manila",label:"Metro Manila (NCR)"},{value:"Abra",label:"Abra"},{value:"Agusan del Norte",label:"Agusan del Norte"},{value:"Agusan del Sur",label:"Agusan del Sur"},{value:"Aklan",label:"Aklan"},{value:"Albay",label:"Albay"},{value:"Antique",label:"Antique"},{value:"Apayao",label:"Apayao"},{value:"Aurora",label:"Aurora"},{value:"Basilan",label:"Basilan"},{value:"Bataan",label:"Bataan"},{value:"Batanes",label:"Batanes"},{value:"Batangas",label:"Batangas"},{value:"Benguet",label:"Benguet"},{value:"Biliran",label:"Biliran"},{value:"Bohol",label:"Bohol"},{value:"Bukidnon",label:"Bukidnon"},{value:"Bulacan",label:"Bulacan"},{value:"Cagayan",label:"Cagayan"},{value:"Camarines Norte",label:"Camarines Norte"},{value:"Camarines Sur",label:"Camarines Sur"},{value:"Camiguin",label:"Camiguin"},{value:"Capiz",label:"Capiz"},{value:"Catanduanes",label:"Catanduanes"},{value:"Cavite",label:"Cavite"},{value:"Cebu",label:"Cebu"},{value:"Cotabato",label:"Cotabato"},{value:"Davao de Oro",label:"Davao de Oro"},{value:"Davao del Norte",label:"Davao del Norte"},{value:"Davao del Sur",label:"Davao del Sur"},{value:"Davao Occidental",label:"Davao Occidental"},{value:"Davao Oriental",label:"Davao Oriental"},{value:"Dinagat Islands",label:"Dinagat Islands"},{value:"Eastern Samar",label:"Eastern Samar"},{value:"Guimaras",label:"Guimaras"},{value:"Ifugao",label:"Ifugao"},{value:"Ilocos Norte",label:"Ilocos Norte"},{value:"Ilocos Sur",label:"Ilocos Sur"},{value:"Iloilo",label:"Iloilo"},{value:"Isabela",label:"Isabela"},{value:"Kalinga",label:"Kalinga"},{value:"La Union",label:"La Union"},{value:"Laguna",label:"Laguna"},{value:"Lanao del Norte",label:"Lanao del Norte"},{value:"Lanao del Sur",label:"Lanao del Sur"},{value:"Leyte",label:"Leyte"},{value:"Maguindanao",label:"Maguindanao"},{value:"Marinduque",label:"Marinduque"},{value:"Masbate",label:"Masbate"},{value:"Misamis Occidental",label:"Misamis Occidental"},{value:"Misamis Oriental",label:"Misamis Oriental"},{value:"Mountain Province",label:"Mountain Province"},{value:"Negros Occidental",label:"Negros Occidental"},{value:"Negros Oriental",label:"Negros Oriental"},{value:"Northern Samar",label:"Northern Samar"},{value:"Nueva Ecija",label:"Nueva Ecija"},{value:"Nueva Vizcaya",label:"Nueva Vizcaya"},{value:"Occidental Mindoro",label:"Occidental Mindoro"},{value:"Oriental Mindoro",label:"Oriental Mindoro"},{value:"Palawan",label:"Palawan"},{value:"Pampanga",label:"Pampanga"},{value:"Pangasinan",label:"Pangasinan"},{value:"Quezon",label:"Quezon"},{value:"Quirino",label:"Quirino"},{value:"Rizal",label:"Rizal"},{value:"Romblon",label:"Romblon"},{value:"Samar",label:"Samar"},{value:"Sarangani",label:"Sarangani"},{value:"Siquijor",label:"Siquijor"},{value:"Sorsogon",label:"Sorsogon"},{value:"South Cotabato",label:"South Cotabato"},{value:"Southern Leyte",label:"Southern Leyte"},{value:"Sultan Kudarat",label:"Sultan Kudarat"},{value:"Sulu",label:"Sulu"},{value:"Surigao del Norte",label:"Surigao del Norte"},{value:"Surigao del Sur",label:"Surigao del Sur"},{value:"Tarlac",label:"Tarlac"},{value:"Tawi-Tawi",label:"Tawi-Tawi"},{value:"Zambales",label:"Zambales"},{value:"Zamboanga del Norte",label:"Zamboanga del Norte"},{value:"Zamboanga del Sur",label:"Zamboanga del Sur"},{value:"Zamboanga Sibugay",label:"Zamboanga Sibugay"}],jk=({isOpen:n,onClose:e,totalAmount:t})=>{const{user:s}=tt(),{profile:i,updateProfile:a}=Jb(),[c,f]=C.useState(1),[h,m]=C.useState({name:"",instagramUsername:"",addressLine1:"",barangay:"",province:"",city:"",mobileNumber:"",paymentProof:null}),[g,y]=C.useState({}),[b,S]=C.useState(!1),[v,w]=C.useState(!1),[k,E]=C.useState(null),{clearCart:O,token:B}=Oa(),{deliveryFeeNcr:q,deliveryFeeOutsideNcr:D,isLoading:R,paymentOptionsDescription:L,whatHappensAfterPayment:$}=cm();if(C.useEffect(()=>{if(n){let F={name:(s==null?void 0:s.name)||""};i&&(F={...F,instagramUsername:i.instagram_username||"",addressLine1:i.address_line1||"",barangay:i.barangay||"",city:i.city||"",mobileNumber:i.mobile_number||"",province:i.province||""}),m(Q=>({...Q,...F})),f(1),y({}),w(!1),E(null),S(!1)}},[s,i,n]),!n)return null;const te=F=>{const{name:Q,value:X}=F.target;m({...h,[Q]:X}),g[Q]&&y({...g,[Q]:""})},se=F=>{F.target.files&&F.target.files[0]&&(m({...h,paymentProof:F.target.files[0]}),g.paymentProof&&y({...g,paymentProof:""}))},ue=async F=>{const{name:Q,value:X}=F.target;m({...h,[Q]:X}),g[Q]&&y({...g,[Q]:""});const ae=X;console.log(ae),m(le=>({...le,province:ae}));try{await a({instagram_username:h.instagramUsername,address_line1:h.addressLine1,barangay:h.barangay,province:ae,city:h.city,mobile_number:h.mobileNumber})}catch(le){console.error("Failed to update province:",le)}},Z=F=>{const Q={};return F===1?(h.name.trim()||(Q.name="Name is required"),h.instagramUsername.trim()||(Q.instagramUsername="Instagram username is required"),h.addressLine1.trim()||(Q.addressLine1="Address is required"),h.barangay.trim()||(Q.barangay="Barangay is required"),h.province||(Q.province="Province is required"),h.city.trim()||(Q.city="City is required"),h.mobileNumber.trim()||(Q.mobileNumber="Mobile number is required")):F===2&&(h.paymentProof||(Q.paymentProof="Proof of payment is required")),y(Q),Object.keys(Q).length===0},ye=()=>{Z(c)&&f(c+1)},ge=()=>{f(c-1)},Te=async F=>{if(F.preventDefault(),Z(c))try{S(!0),await I(),await T(),w(!0),O()}catch(Q){E(Q instanceof Error?Q.message:"An error occurred while processing your order"),console.error("Order error:",Q)}finally{S(!1)}},I=async()=>{try{return await a({instagram_username:h.instagramUsername,address_line1:h.addressLine1,barangay:h.barangay,province:h.province,city:h.city,mobile_number:h.mobileNumber}),console.log("Profile saved successfully"),!0}catch(F){throw console.error("Error saving profile:",F),F}},re=h.province==="Metro Manila"?q:D,K=t+re,T=async()=>{if(!B||!h.paymentProof)throw new Error("Missing token or payment proof");const F=new FormData;F.append("customer_name",h.name),F.append("instagram_username",h.instagramUsername),F.append("address_line1",h.addressLine1),F.append("barangay",h.barangay),F.append("province",h.province),F.append("city",h.city),F.append("mobile_number",h.mobileNumber),F.append("payment_proof",h.paymentProof),F.append("shipping_fee",re.toString());try{return(await Il.createOrder(B,F)).data.order}catch(Q){throw console.error("Error creating order:",Q),Q}},H=()=>$?d.jsxs("div",{className:"bg-yellow-50 p-4 rounded border border-yellow-200",children:[d.jsx("h4",{className:"font-medium text-yellow-800 mb-2",children:"What happens next?"}),d.jsx("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:$}})]}):null;return d.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:d.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[d.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:d.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75",onClick:e})}),d.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"​"}),d.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline",children:[d.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:d.jsx("div",{className:"sm:flex sm:items-start",children:d.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full",children:[d.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",id:"modal-headline",children:v?"Order Placed Successfully!":`Checkout - Step ${c} of 3`}),!v&&d.jsx(d.Fragment,{children:d.jsxs("div",{className:"mt-4 mb-6",children:[d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:`flex items-center justify-center h-8 w-8 rounded-full ${c>=1?"bg-black text-white":"bg-gray-200"}`,children:"1"}),d.jsx("div",{className:`flex-1 h-1 mx-2 ${c>=2?"bg-black":"bg-gray-200"}`}),d.jsx("div",{className:`flex items-center justify-center h-8 w-8 rounded-full ${c>=2?"bg-black text-white":"bg-gray-200"}`,children:"2"}),d.jsx("div",{className:`flex-1 h-1 mx-2 ${c>=3?"bg-black":"bg-gray-200"}`}),d.jsx("div",{className:`flex items-center justify-center h-8 w-8 rounded-full ${c>=3?"bg-black text-white":"bg-gray-200"}`,children:"3"})]}),d.jsxs("div",{className:"flex justify-between mt-1 text-xs text-gray-500",children:[d.jsx("span",{children:"Customer Info"}),d.jsx("span",{children:"Payment"}),d.jsx("span",{children:"Confirmation"})]})]})}),k&&d.jsxs("div",{className:"bg-red-50 p-4 rounded border border-red-200 mb-4",children:[d.jsx("p",{className:"text-red-800",children:k}),d.jsx("p",{className:"text-sm text-red-600 mt-1",children:"Please try again or contact support for assistance."})]}),v?d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"bg-green-50 p-4 rounded border border-green-200",children:[d.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Your order has been placed!"}),d.jsx("p",{className:"text-gray-700 mb-2",children:"Thank you for your order. We have received your payment proof and will verify it shortly."}),d.jsxs("p",{className:"text-gray-700",children:["Your order is now on ",d.jsx("span",{className:"font-medium",children:"hold"})," and the products have been reserved for you."]})]}),H()]}):d.jsxs("form",{children:[c===1&&d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Full Name"}),d.jsx("input",{type:"text",id:"name",name:"name",value:h.name,onChange:te,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-black focus:border-black sm:text-sm"}),g.name&&d.jsx("p",{className:"mt-1 text-sm text-red-600",children:g.name})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"instagramUsername",className:"block text-sm font-medium text-gray-700",children:"Instagram Username"}),d.jsxs("div",{className:"mt-1 flex rounded-md shadow-sm",children:[d.jsx("span",{className:"inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500 sm:text-sm",children:"@"}),d.jsx("input",{type:"text",id:"instagramUsername",name:"instagramUsername",value:h.instagramUsername,onChange:te,className:"flex-1 block w-full border border-gray-300 rounded-none rounded-r-md shadow-sm py-2 px-3 focus:outline-none focus:ring-black focus:border-black sm:text-sm"})]}),g.instagramUsername&&d.jsx("p",{className:"mt-1 text-sm text-red-600",children:g.instagramUsername})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"province",className:"block text-sm font-medium text-gray-700",children:"Province"}),d.jsx("select",{id:"province",name:"province",value:h.province,onChange:ue,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-black focus:border-black sm:text-sm",children:um.map(F=>d.jsx("option",{value:F.value,children:F.label},F.value))}),g.province&&d.jsx("p",{className:"mt-1 text-sm text-red-600",children:g.province})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700",children:"City"}),d.jsx("input",{type:"text",id:"city",name:"city",value:h.city,onChange:te,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-black focus:border-black sm:text-sm"}),g.city&&d.jsx("p",{className:"mt-1 text-sm text-red-600",children:g.city})]})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"barangay",className:"block text-sm font-medium text-gray-700",children:"Barangay"}),d.jsx("input",{type:"text",id:"barangay",name:"barangay",value:h.barangay,onChange:te,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-black focus:border-black sm:text-sm"}),g.barangay&&d.jsx("p",{className:"mt-1 text-sm text-red-600",children:g.barangay})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"addressLine1",className:"block text-sm font-medium text-gray-700",children:"Address Line 1"}),d.jsx("input",{type:"text",id:"addressLine1",name:"addressLine1",value:h.addressLine1,onChange:te,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-black focus:border-black sm:text-sm"}),g.addressLine1&&d.jsx("p",{className:"mt-1 text-sm text-red-600",children:g.addressLine1})]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"mobileNumber",className:"block text-sm font-medium text-gray-700",children:"Mobile Number"}),d.jsx("input",{type:"text",id:"mobileNumber",name:"mobileNumber",value:h.mobileNumber,onChange:te,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-black focus:border-black sm:text-sm"}),g.mobileNumber&&d.jsx("p",{className:"mt-1 text-sm text-red-600",children:g.mobileNumber})]})]}),c===2&&d.jsx("div",{className:"space-y-4",children:d.jsxs("div",{children:[d.jsxs("div",{className:"bg-green-50 p-4 rounded border border-green-200",children:[d.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Order Summary"}),d.jsxs("ul",{className:"text-sm text-gray-700 space-y-2",children:[d.jsxs("li",{children:[d.jsx("span",{className:"font-medium",children:"Name:"})," ",h.name]}),d.jsxs("li",{children:[d.jsx("span",{className:"font-medium",children:"Instagram:"})," @",h.instagramUsername]}),d.jsxs("li",{children:[d.jsx("span",{className:"font-medium",children:"Address:"})," ",h.addressLine1,", ",h.barangay,", ",h.city,", ",h.province]}),d.jsxs("li",{children:[d.jsx("span",{className:"font-medium",children:"Mobile:"})," ",h.mobileNumber]}),d.jsxs("li",{children:[d.jsx("span",{className:"font-medium",children:"Subtotal:"})," ₱",t.toFixed(2)]}),d.jsxs("li",{children:[d.jsx("span",{className:"font-medium",children:"Shipping Fee:"})," ",R?"Loading...":`₱${re.toFixed(2)}`]}),d.jsxs("li",{children:[d.jsx("span",{className:"font-medium",children:"Grand Total:"})," ",R?"Loading...":`₱${K.toFixed(2)}`]})]})]}),!!L&&d.jsx("div",{className:"mt-4",children:d.jsx("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:L}})}),d.jsxs("div",{className:"mt-4",children:[d.jsx("label",{htmlFor:"paymentProof",className:"block text-sm font-medium text-gray-700",children:"Proof of Payment"}),d.jsx("input",{type:"file",id:"paymentProof",name:"paymentProof",accept:"image/*",onChange:se,className:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-black focus:border-black sm:text-sm"}),d.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Please upload a screenshot of your payment receipt."}),g.paymentProof&&d.jsx("p",{className:"mt-1 text-sm text-red-600",children:g.paymentProof})]})]})}),c===3&&d.jsx("div",{className:"space-y-4",children:H()})]})]})})}),d.jsx("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:v?d.jsx("button",{type:"button",onClick:e,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-black text-base font-medium text-white hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-black sm:ml-3 sm:w-auto sm:text-sm",children:"Close"}):d.jsxs(d.Fragment,{children:[c<3?d.jsx("button",{type:"button",onClick:ye,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-black text-base font-medium text-white hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-black sm:ml-3 sm:w-auto sm:text-sm",children:"Continue"}):d.jsx("button",{type:"button",onClick:Te,disabled:b,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-black text-base font-medium text-white hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-black disabled:bg-gray-400 disabled:cursor-not-allowed sm:ml-3 sm:w-auto sm:text-sm",children:b?"Processing...":"Place Order"}),c>1&&d.jsx("button",{type:"button",onClick:ge,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",children:"Back"}),d.jsx("button",{type:"button",onClick:e,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:w-auto sm:text-sm",children:"Cancel"})]})})]})]})})},Ck=({isOpen:n,onClose:e,onContinueAsGuest:t,onCreateAccount:s})=>{const[i,a]=C.useState("initial"),[c,f]=C.useState({name:"",email:"",password:"",password_confirmation:""}),[h,m]=C.useState({}),[g,y]=C.useState(!1),b=w=>{const{name:k,value:E}=w.target;f({...c,[k]:E}),h[k]&&m({...h,[k]:""})},S=()=>{const w={};return c.name.trim()||(w.name="Name is required"),c.email.trim()?/\S+@\S+\.\S+/.test(c.email)||(w.email="Email is invalid"):w.email="Email is required",c.password.trim()?c.password.length<8&&(w.password="Password must be at least 8 characters"):w.password="Password is required",c.password!==c.password_confirmation&&(w.password_confirmation="Passwords do not match"),m(w),Object.keys(w).length===0},v=async w=>{if(w.preventDefault(),!!S()){y(!0);try{await s(c.name,c.email,c.password)}catch(k){console.error("Account creation error:",k),k instanceof Error?m({form:k.message}):m({form:"An error occurred while creating your account"})}finally{y(!1)}}};return n?d.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:d.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[d.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:d.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75",onClick:e})}),d.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"​"}),d.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-md sm:w-full",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline",children:[d.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:d.jsx("div",{className:"mt-3 text-center sm:mt-0 sm:text-left w-full",children:i==="initial"?d.jsxs(d.Fragment,{children:[d.jsx("h3",{className:"text-xl leading-6 font-medium text-gray-900 mb-4",id:"modal-headline",children:"Before you checkout"}),d.jsx("p",{className:"text-gray-600 mb-6",children:"Would you like to save your cart by creating an account, or continue as a guest?"}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("button",{onClick:()=>a("register"),className:"w-full bg-[#ad688f] text-white px-4 py-3 rounded hover:bg-[#96577b] transition-colors",children:"Create an Account"}),d.jsx("button",{onClick:t,className:"w-full border border-gray-300 bg-white text-gray-700 px-4 py-3 rounded hover:bg-gray-50 transition-colors",children:"Continue as Guest"})]})]}):d.jsxs(d.Fragment,{children:[d.jsx("h3",{className:"text-xl leading-6 font-medium text-gray-900 mb-4",id:"modal-headline",children:"Create Your Account"}),d.jsx("p",{className:"text-gray-600 mb-6",children:"Create an account to save your cart and track your orders."}),h.form&&d.jsx("div",{className:"mb-4 p-3 bg-red-50 text-red-700 rounded border border-red-200",children:h.form}),d.jsxs("form",{onSubmit:v,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Name"}),d.jsx("input",{type:"text",id:"name",name:"name",value:c.name,onChange:b,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-[#ad688f] focus:border-[#ad688f] sm:text-sm"}),h.name&&d.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.name})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),d.jsx("input",{type:"email",id:"email",name:"email",value:c.email,onChange:b,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-[#ad688f] focus:border-[#ad688f] sm:text-sm"}),h.email&&d.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.email})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),d.jsx("input",{type:"password",id:"password",name:"password",value:c.password,onChange:b,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-[#ad688f] focus:border-[#ad688f] sm:text-sm"}),h.password&&d.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.password})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"password_confirmation",className:"block text-sm font-medium text-gray-700",children:"Confirm Password"}),d.jsx("input",{type:"password",id:"password_confirmation",name:"password_confirmation",value:c.password_confirmation,onChange:b,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-[#ad688f] focus:border-[#ad688f] sm:text-sm"}),h.password_confirmation&&d.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.password_confirmation})]}),d.jsxs("div",{className:"pt-3",children:[d.jsx("button",{type:"submit",disabled:g,className:"w-full bg-[#ad688f] text-white px-4 py-3 rounded hover:bg-[#96577b] transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:g?"Creating Account...":"Create Account & Continue"}),d.jsx("button",{type:"button",onClick:()=>a("initial"),className:"w-full text-gray-600 mt-2 text-sm",children:"Back to options"})]})]})]})})}),d.jsx("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:d.jsx("button",{type:"button",onClick:e,className:"w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:w-auto sm:text-sm",children:"Cancel"})})]})]})}):null},Ek="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let Ak=(n=21)=>{let e="",t=crypto.getRandomValues(new Uint8Array(n|=0));for(;n--;)e+=Ek[t[n]&63];return e};const Tk=({isOpen:n,onClose:e,totalAmount:t,onSubmitOrder:s,province:i,setProvince:a})=>{const[c,f]=C.useState(1),[h,m]=C.useState({name:"",email:"",instagramUsername:"",addressLine1:"",barangay:"",city:"",mobileNumber:"",paymentProof:null}),[g,y]=C.useState({}),[b,S]=C.useState(!1),[v,w]=C.useState(!1),[k,E]=C.useState(null),{deliveryFeeNcr:O,deliveryFeeOutsideNcr:B,isLoading:q,paymentOptionsDescription:D,whatHappensAfterPayment:R}=cm();if(!n)return null;const L=re=>{const{name:K,value:T}=re.target;m({...h,[K]:T}),g[K]&&y({...g,[K]:""})},$=re=>{re.target.files&&re.target.files[0]&&(m({...h,paymentProof:re.target.files[0]}),g.paymentProof&&y({...g,paymentProof:""}))},te=re=>{const{name:K,value:T}=re.target;K==="province"?a(T):m({...h,[K]:T}),g[K]&&y({...g,[K]:""})},se=re=>{const K={};return re===1?(h.name.trim()||(K.name="Name is required"),h.email.trim()?/\S+@\S+\.\S+/.test(h.email)||(K.email="Email is invalid"):K.email="Email is required",h.instagramUsername.trim()||(K.instagramUsername="Instagram username is required"),h.addressLine1.trim()||(K.addressLine1="Address is required"),h.barangay.trim()||(K.barangay="Barangay is required"),h.city.trim()||(K.city="City is required"),h.mobileNumber.trim()||(K.mobileNumber="Mobile number is required"),i||(K.province="Province is required")):re===2&&(h.paymentProof||(K.paymentProof="Proof of payment is required")),y(K),Object.keys(K).length===0},ue=()=>{se(c)&&f(c+1)},Z=()=>{f(c-1)},ge=i?i==="Metro Manila"?O:B:0,Te=t+ge,I=async re=>{if(re.preventDefault(),se(c))try{S(!0);let K=localStorage.getItem("guest_id");K||(K=Ak(),localStorage.setItem("guest_id",K),window.dispatchEvent(new Event("guest_id_set"))),await s({...h,province:i,guest_id:K}),w(!0)}catch(K){E(K instanceof Error?K.message:"An error occurred while processing your order"),console.error("Order error:",K)}finally{S(!1)}},ne=()=>R?d.jsxs("div",{className:"bg-yellow-50 p-4 rounded border border-yellow-200",children:[d.jsx("h4",{className:"font-medium text-yellow-800 mb-2",children:"What happens next?"}),d.jsx("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:R}})]}):null;return d.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:d.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[d.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:d.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75",onClick:e})}),d.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"​"}),d.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline",children:[d.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:d.jsx("div",{className:"sm:flex sm:items-start",children:d.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full",children:[d.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",id:"modal-headline",children:v?"Order Placed Successfully!":`Guest Checkout - Step ${c} of 3`}),!v&&d.jsx(d.Fragment,{children:d.jsxs("div",{className:"mt-4 mb-6",children:[d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:`flex items-center justify-center h-8 w-8 rounded-full ${c>=1?"bg-[#ad688f] text-white":"bg-gray-200"}`,children:"1"}),d.jsx("div",{className:`flex-1 h-1 mx-2 ${c>=2?"bg-[#ad688f]":"bg-gray-200"}`}),d.jsx("div",{className:`flex items-center justify-center h-8 w-8 rounded-full ${c>=2?"bg-[#ad688f] text-white":"bg-gray-200"}`,children:"2"}),d.jsx("div",{className:`flex-1 h-1 mx-2 ${c>=3?"bg-[#ad688f]":"bg-gray-200"}`}),d.jsx("div",{className:`flex items-center justify-center h-8 w-8 rounded-full ${c>=3?"bg-[#ad688f] text-white":"bg-gray-200"}`,children:"3"})]}),d.jsxs("div",{className:"flex justify-between mt-1 text-xs text-gray-500",children:[d.jsx("span",{children:"Customer Info"}),d.jsx("span",{children:"Payment"}),d.jsx("span",{children:"Confirmation"})]})]})}),k&&d.jsxs("div",{className:"bg-red-50 p-4 rounded border border-red-200 mb-4",children:[d.jsx("p",{className:"text-red-800",children:k}),d.jsx("p",{className:"text-sm text-red-600 mt-1",children:"Please try again or contact support for assistance."})]}),v?d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"bg-green-50 p-4 rounded border border-green-200",children:[d.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Your order has been placed!"}),d.jsx("p",{className:"text-gray-700 mb-2",children:"Thank you for your order. We have received your payment proof and will verify it shortly."}),d.jsxs("p",{className:"text-gray-700",children:["Your order is now on ",d.jsx("span",{className:"font-medium",children:"hold"})," and the products have been reserved for you."]})]}),ne()]}):d.jsxs("form",{children:[c===1&&d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Full Name"}),d.jsx("input",{type:"text",id:"name",name:"name",value:h.name,onChange:L,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-[#ad688f] focus:border-[#ad688f] sm:text-sm"}),g.name&&d.jsx("p",{className:"mt-1 text-sm text-red-600",children:g.name})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),d.jsx("input",{type:"email",id:"email",name:"email",value:h.email,onChange:L,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-[#ad688f] focus:border-[#ad688f] sm:text-sm"}),g.email&&d.jsx("p",{className:"mt-1 text-sm text-red-600",children:g.email})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"instagramUsername",className:"block text-sm font-medium text-gray-700",children:"Instagram Username"}),d.jsxs("div",{className:"mt-1 flex rounded-md shadow-sm",children:[d.jsx("span",{className:"inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500 sm:text-sm",children:"@"}),d.jsx("input",{type:"text",id:"instagramUsername",name:"instagramUsername",value:h.instagramUsername,onChange:L,className:"flex-1 block w-full border border-gray-300 rounded-none rounded-r-md shadow-sm py-2 px-3 focus:outline-none focus:ring-[#ad688f] focus:border-[#ad688f] sm:text-sm"})]}),g.instagramUsername&&d.jsx("p",{className:"mt-1 text-sm text-red-600",children:g.instagramUsername})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"addressLine1",className:"block text-sm font-medium text-gray-700",children:"Address Line 1"}),d.jsx("input",{type:"text",id:"addressLine1",name:"addressLine1",value:h.addressLine1,onChange:L,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-[#ad688f] focus:border-[#ad688f] sm:text-sm"}),g.addressLine1&&d.jsx("p",{className:"mt-1 text-sm text-red-600",children:g.addressLine1})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"barangay",className:"block text-sm font-medium text-gray-700",children:"Barangay"}),d.jsx("input",{type:"text",id:"barangay",name:"barangay",value:h.barangay,onChange:L,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-[#ad688f] focus:border-[#ad688f] sm:text-sm"}),g.barangay&&d.jsx("p",{className:"mt-1 text-sm text-red-600",children:g.barangay})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"province",className:"block text-sm font-medium text-gray-700",children:"Province"}),d.jsx("select",{id:"province",name:"province",value:i,onChange:te,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-[#ad688f] focus:border-[#ad688f] sm:text-sm",children:um.map(re=>d.jsx("option",{value:re.value,children:re.label},re.value))}),g.province&&d.jsx("p",{className:"mt-1 text-sm text-red-600",children:g.province})]})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700",children:"City"}),d.jsx("input",{type:"text",id:"city",name:"city",value:h.city,onChange:L,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-[#ad688f] focus:border-[#ad688f] sm:text-sm"}),g.city&&d.jsx("p",{className:"mt-1 text-sm text-red-600",children:g.city})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"mobileNumber",className:"block text-sm font-medium text-gray-700",children:"Mobile Number"}),d.jsx("input",{type:"text",id:"mobileNumber",name:"mobileNumber",value:h.mobileNumber,onChange:L,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-[#ad688f] focus:border-[#ad688f] sm:text-sm"}),g.mobileNumber&&d.jsx("p",{className:"mt-1 text-sm text-red-600",children:g.mobileNumber})]})]})]}),c===2&&d.jsx("div",{className:"space-y-4",children:d.jsxs("div",{children:[d.jsxs("div",{className:"bg-green-50 p-4 rounded border border-green-200",children:[d.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Order Summary"}),d.jsxs("ul",{className:"text-sm text-gray-700 space-y-2",children:[d.jsxs("li",{children:[d.jsx("span",{className:"font-medium",children:"Name:"})," ",h.name]}),d.jsxs("li",{children:[d.jsx("span",{className:"font-medium",children:"Email:"})," ",h.email]}),d.jsxs("li",{children:[d.jsx("span",{className:"font-medium",children:"Instagram:"})," @",h.instagramUsername]}),d.jsxs("li",{children:[d.jsx("span",{className:"font-medium",children:"Address:"})," ",h.addressLine1,", ",h.barangay,", ",h.city,", ",i]}),d.jsxs("li",{children:[d.jsx("span",{className:"font-medium",children:"Mobile:"})," ",h.mobileNumber]}),d.jsxs("li",{children:[d.jsx("span",{className:"font-medium",children:"Subtotal:"})," ₱",t.toFixed(2)]}),d.jsxs("li",{children:[d.jsx("span",{className:"font-medium",children:"Shipping Fee:"})," ",q?"Loading...":`₱${ge.toFixed(2)}`]}),d.jsxs("li",{children:[d.jsx("span",{className:"font-medium",children:"Grand Total:"})," ",q?"Loading...":`₱${Te.toFixed(2)}`]})]})]}),!!D&&d.jsx("div",{className:"mt-4",children:d.jsx("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:D}})}),d.jsxs("div",{className:"mt-4",children:[d.jsx("label",{htmlFor:"paymentProof",className:"block text-sm font-medium text-gray-700",children:"Proof of Payment"}),d.jsx("input",{type:"file",id:"paymentProof",name:"paymentProof",accept:"image/*",onChange:$,className:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-black focus:border-black sm:text-sm"}),d.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Please upload a screenshot of your payment receipt."}),g.paymentProof&&d.jsx("p",{className:"mt-1 text-sm text-red-600",children:g.paymentProof})]})]})}),c===3&&d.jsx("div",{children:ne()})]})]})})}),d.jsx("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:v?d.jsx("button",{type:"button",onClick:e,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-[#ad688f] text-base font-medium text-white hover:bg-[#96577b] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#ad688f] sm:ml-3 sm:w-auto sm:text-sm",children:"Close"}):d.jsxs(d.Fragment,{children:[c<3?d.jsx("button",{type:"button",onClick:ue,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-[#ad688f] text-base font-medium text-white hover:bg-[#96577b] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#ad688f] sm:ml-3 sm:w-auto sm:text-sm",children:"Continue"}):d.jsx("button",{type:"button",onClick:I,disabled:b,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-[#ad688f] text-base font-medium text-white hover:bg-[#96577b] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#ad688f] disabled:bg-gray-400 disabled:cursor-not-allowed sm:ml-3 sm:w-auto sm:text-sm",children:b?"Processing...":"Place Order"}),c>1&&d.jsx("button",{type:"button",onClick:Z,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",children:"Back"}),d.jsx("button",{type:"button",onClick:e,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:w-auto sm:text-sm",children:"Cancel"})]})})]})]})})},Mk=()=>{const{isAuthenticated:n,register:e}=tt(),[t,s]=C.useState(!1),[i,a]=C.useState(!1),[c,f]=C.useState(!1),[h,m]=C.useState(!1),{cartItems:g,removeFromCart:y,getTotalPrice:b,clearCart:S,backupGuestCart:v}=Oa(),{profile:w,updateProfile:k}=Jb(),{deliveryFeeNcr:E,deliveryFeeOutsideNcr:O,isLoading:B}=cm(),[q,D]=C.useState((w==null?void 0:w.province)||""),[R,L]=C.useState(!1);C.useEffect(()=>{w&&w.province&&D(w.province)},[w]);const $=b();let te=0;g.length>0&&(q?te=q==="Metro Manila"?E:O:te=0);const se=$+te,ue=()=>{n?s(!0):a(!0)},Z=()=>{s(!1)},ye=()=>{a(!1)},ge=()=>{f(!1)},Te=()=>{a(!1),f(!0)},I=async(K,T,H)=>{try{m(!0),console.log("1. Starting account creation process");const F=v();console.log("2. Guest cart items backed up:",F.length),console.log("3. Calling register function");const Q=await e(K,T,H,H);console.log("4. Registration successful, token:",Q.token?"received":"missing");const X=Q.token;if(console.log("5. Waiting for auth state to update"),await new Promise(ae=>setTimeout(ae,1e3)),F.length>0&&X){console.log("6. Manually adding cart items using CartApi");for(const ae of F){console.log("Adding item to user cart via API:",ae.product.id,ae.size,ae.quantity);try{const le=await ws.addToCart(X,ae.product.id,ae.size,ae.quantity);console.log("Cart API response:",le.success?"success":"failed")}catch(le){console.error("Error adding item to cart:",le)}}}sessionStorage.setItem("showCheckoutAfterReload","true"),console.log("9. Reloading page to refresh cart data"),window.location.reload()}catch(F){throw console.error("Error in handleCreateAccount:",F),m(!1),F}},ne=async K=>{const T=new FormData;T.append("customer_name",K.name),T.append("email",K.email),T.append("instagram_username",K.instagramUsername),T.append("address_line1",K.addressLine1),T.append("barangay",K.barangay),T.append("province",K.province),T.append("city",K.city),T.append("mobile_number",K.mobileNumber),T.append("payment_proof",K.paymentProof),T.append("cart_items",JSON.stringify(g.map(H=>({product_id:H.product.id,size:H.size,quantity:H.quantity})))),T.append("shipping_fee",String(te)),K.guest_id&&T.append("guest_id",K.guest_id),await Il.createGuestOrder(T),S()},re=async K=>{const T=K.target.value;if(D(T),n){L(!0);try{await k({province:T})}catch(H){console.error("Failed to update province:",H)}finally{L(!1)}}};return d.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[d.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Your Cart"}),g.length===0?d.jsxs("div",{className:"text-center py-12 bg-white shadow rounded p-8",children:[d.jsx("p",{className:"text-xl mb-6",children:"Your cart is empty"}),d.jsx(me,{to:"/products",className:"inline-block border border-black px-8 py-3 hover:bg-black hover:text-white transition-colors no-underline text-black",children:"Continue Shopping"})]}):d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[d.jsx("div",{className:"lg:col-span-2",children:d.jsxs("div",{className:"bg-white shadow rounded overflow-hidden",children:[d.jsx("div",{className:"hidden md:block",children:d.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[d.jsx("thead",{className:"bg-gray-50",children:d.jsxs("tr",{children:[d.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),d.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),d.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),d.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:g.map(K=>d.jsxs("tr",{children:[d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:"h-16 w-16 bg-gray-200 rounded flex-shrink-0 overflow-hidden",children:d.jsx("img",{src:K.product.image,alt:K.product.name,className:"h-full w-full object-cover"})}),d.jsxs("div",{className:"ml-4",children:[d.jsx("div",{className:"text-sm font-medium text-gray-900",children:K.product.name}),d.jsxs("div",{className:"text-sm text-gray-500",children:["Size: ",K.size.toUpperCase()]})]})]})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsxs("div",{className:"text-sm font-medium text-gray-900",children:["₱",K.product.price.toFixed(2)]})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:d.jsx("button",{className:"text-red-600 hover:text-red-800 font-medium",onClick:()=>K.id!==void 0?y(K.id):null,children:"Remove"})})]},`desktop-${K.product.id}-${K.size}`))})]})}),d.jsx("div",{className:"md:hidden",children:d.jsx("div",{className:"divide-y divide-gray-200",children:g.map(K=>d.jsxs("div",{className:"p-4",children:[d.jsxs("div",{className:"flex mb-4",children:[d.jsx("div",{className:"h-20 w-20 bg-gray-200 rounded flex-shrink-0 overflow-hidden",children:d.jsx("img",{src:K.product.image,alt:K.product.name,className:"h-full w-full object-cover"})}),d.jsxs("div",{className:"ml-4 flex-grow",children:[d.jsx("div",{className:"text-sm font-medium text-gray-900",children:K.product.name}),d.jsxs("div",{className:"text-sm text-gray-500",children:["Size: ",K.size.toUpperCase()]}),d.jsxs("div",{className:"text-sm font-medium text-gray-900 mt-1",children:["₱",K.product.price.toFixed(2)]})]})]}),d.jsx("div",{className:"flex justify-end items-center mt-2",children:d.jsx("button",{className:"text-red-600 hover:text-red-800 font-medium",onClick:()=>K.id!==void 0?y(K.id):null,children:"Remove"})})]},`mobile-${K.product.id}-${K.size}`))})}),d.jsxs("div",{className:"p-4 flex justify-between border-t border-gray-200",children:[d.jsx(me,{to:"/products",className:"text-sm font-medium text-gray-700 hover:text-black",children:"Continue Shopping"}),d.jsx("button",{onClick:S,className:"text-sm font-medium text-red-600 hover:text-red-800",children:"Clear Cart"})]})]})}),d.jsxs("div",{className:"bg-white shadow rounded p-6",children:[d.jsx("h2",{className:"text-lg font-medium mb-4",children:"Order Summary"}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsxs("span",{className:"text-gray-600",children:["Subtotal (",g.length," ",g.length===1?"item":"items",")"]}),d.jsxs("span",{className:"font-medium",children:["₱",$.toFixed(2)]})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-gray-600",children:"Shipping"}),d.jsx("select",{className:"border border-gray-300 rounded-md py-1 px-2 focus:outline-none focus:ring-black focus:border-black text-sm",value:q,onChange:re,disabled:R||B,children:um.map(K=>d.jsx("option",{value:K.value,children:K.label},K.value))}),d.jsx("span",{className:"font-medium ml-2",children:q?B?"Loading...":`₱${te.toFixed(2)}`:"—"})]}),d.jsxs("div",{className:"border-t pt-4 flex justify-between",children:[d.jsx("span",{className:"font-medium text-lg",children:"Total"}),d.jsxs("span",{className:"font-medium text-lg",children:["₱",se.toFixed(2)]})]}),d.jsx("button",{onClick:ue,disabled:h,className:"w-full bg-[#ad688f] text-white py-3 px-4 font-medium rounded hover:bg-[#96577b] transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:h?"Processing...":"Checkout"}),n&&d.jsx(me,{to:"/my-orders",className:"w-full text-center block text-gray-700 hover:text-black py-2 text-sm font-medium",children:"View Your Orders"})]})]})]}),d.jsx(jk,{isOpen:t,onClose:Z,totalAmount:se}),d.jsx(Ck,{isOpen:i,onClose:ye,onContinueAsGuest:Te,onCreateAccount:I}),d.jsx(Tk,{isOpen:c,onClose:ge,totalAmount:$,onSubmitOrder:ne,province:q,setProvince:D})]})},Ok=()=>{const[n,e]=C.useState("all"),[t,s]=C.useState("all"),[i,a]=C.useState(!1),[c,f]=C.useState(""),[h,m]=C.useState([]),[g,y]=C.useState([]),[b,S]=C.useState(!0),[v,w]=C.useState(null);C.useEffect(()=>{(async()=>{try{S(!0);const O=await lu();m(O)}catch(O){console.error("Error fetching products:",O),w("Failed to load products")}finally{S(!1)}})()},[]),C.useEffect(()=>{h.length>0&&y(om(h,n,t,c,i))},[h,n,t,i,c]);const k=()=>{e("all"),s("all"),a(!1),f("")};return b?d.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[d.jsx("h1",{className:"text-3xl font-bold mb-8",children:"All Products"}),d.jsx("div",{className:"text-center py-12",children:d.jsx("p",{children:"Loading products..."})})]}):v?d.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[d.jsx("h1",{className:"text-3xl font-bold mb-8",children:"All Products"}),d.jsx("div",{className:"text-center py-12",children:d.jsx("p",{className:"text-red-500",children:v})})]}):d.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[d.jsx("h1",{className:"text-3xl font-bold mb-8",children:"All Products"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8 mb-8",children:[d.jsx("div",{className:"md:col-span-1",children:d.jsx(im,{activeCategory:n,activeSize:t,searchKeyword:c,onCategoryChange:e,onSizeChange:s,onKeywordChange:f})}),d.jsx(am,{products:g,onResetFilters:k,searchKeyword:c})]})]})},Rk=()=>{var E;const{productId:n}=ru(),[e,t]=C.useState(null),[s,i]=C.useState(0),[a,c]=C.useState(!0),[f,h]=C.useState(null),{addToCart:m}=Oa();C.useEffect(()=>{(async()=>{if(n)try{c(!0),h(null);const B=await mk(n);t(B),i(0)}catch(B){console.error(`Error fetching product ${n}:`,B),h("Failed to load product details")}finally{c(!1)}})()},[n]);const g=async()=>{var D;if(!e)return;const O=e.sizes[0];if((((D=e.sizeStock[0])==null?void 0:D.stock)||0)<=0)return;const q=1;try{await m(e,O,q)}catch(R){console.error("Error adding to cart:",R)}},y=()=>{if(!e)return[];const O=[e.image];if(e.images&&e.images.length>0){const B=e.images.filter(q=>q!==e.image);O.push(...B)}return O},b=O=>{i(O)};if(a)return d.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:d.jsxs("div",{className:"text-center",children:[d.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Loading Product"}),d.jsx("p",{children:"Please wait while we fetch the product details..."})]})});if(f||!e)return d.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:d.jsxs("div",{className:"text-center",children:[d.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Product Not Found"}),d.jsx("p",{className:"text-red-500 mb-4",children:f}),d.jsx(me,{to:"/products",className:"inline-block border border-black px-8 py-3 hover:bg-black hover:text-white transition-colors no-underline text-black",children:"Back to Products"})]})});const S=y(),v=e.sizes[0],k=(((E=e.sizeStock[0])==null?void 0:E.stock)||0)<=0;return d.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[d.jsxs("div",{className:"space-y-4",children:[d.jsx("div",{className:"bg-gray-100 p-4 rounded",children:d.jsxs("div",{className:"aspect-w-1 aspect-h-1 bg-white relative",children:[d.jsx("img",{src:S[s],alt:e.name,className:"w-full h-full object-contain"}),k&&d.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-60 flex items-center justify-center",children:d.jsx("span",{className:"text-black text-4xl font-bold font-como",children:"SOLD"})})]})}),S.length>1&&d.jsx("div",{className:"flex space-x-2 overflow-x-auto",children:S.map((O,B)=>d.jsx("button",{onClick:()=>b(B),className:`flex-shrink-0 w-16 h-16 border-2 rounded overflow-hidden ${s===B?"border-black":"border-gray-200 hover:border-gray-400"}`,children:d.jsx("img",{src:O,alt:`${e.name} thumbnail ${B+1}`,className:"w-full h-full object-cover"})},B))})]}),d.jsxs("div",{children:[d.jsxs("div",{className:"mb-6",children:[d.jsxs("div",{className:"flex justify-between items-start",children:[d.jsx("h1",{className:"text-2xl font-bold",children:e.name}),d.jsxs("div",{className:"flex space-x-2",children:[e.isNewArrival&&d.jsx("div",{className:"bg-green-500 text-white text-xs font-bold px-2 py-1 rounded",children:"New Arrival"}),e.isSale&&d.jsx("div",{className:"bg-red-500 text-white text-xs font-bold px-2 py-1 rounded",children:"Sale"})]})]}),d.jsxs("div",{className:"mt-2 flex items-center",children:[d.jsxs("span",{className:"bg-gray-100 text-gray-800 text-sm font-medium px-2 py-1 rounded mr-2",children:["Size: ",v.toUpperCase()]}),d.jsx("span",{className:`text-sm font-medium px-2 py-1 rounded ${k?"text-red-600":"text-green-600"}`,children:k?"Sold":""})]}),d.jsx("div",{className:"mt-4",children:d.jsxs("p",{className:"text-xl font-semibold",children:["₱",e.price.toFixed(2)]})})]}),d.jsxs("div",{className:"mb-6",children:[d.jsx("h2",{className:"text-lg font-medium mb-2",children:"Description"}),d.jsx("p",{className:"text-gray-700",children:e.description||"No description available."})]}),e.careInstructions&&d.jsxs("div",{className:"mb-6",children:[d.jsx("h2",{className:"text-lg font-medium mb-2",children:"Before You Buy"}),d.jsx("div",{className:"text-gray-700 whitespace-pre-line",children:e.careInstructions})]}),d.jsxs("div",{children:[d.jsx("button",{onClick:g,disabled:k,className:`w-full py-3 px-4 rounded-md font-medium ${k?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-black text-white hover:bg-gray-800"}`,children:k?"Sold":"Add to Cart"}),d.jsx("p",{className:"text-xs text-gray-500 mt-2 text-center",children:"Note: Only one of each product can be added to cart"})]})]})]})})},Dk=({onSuccess:n,onError:e})=>{var ue;const{token:t}=tt(),s=fr(),[i,a]=C.useState([]),[c,f]=C.useState([]),[h,m]=C.useState(""),[g,y]=C.useState(!1),[b,S]=C.useState(!1),[v,w]=C.useState(null),[k,E]=C.useState({});C.useEffect(()=>{B()},[]),C.useEffect(()=>{if(!h){f(i);return}const Z=h.toLowerCase(),ye=i.filter(ge=>ge.name.toLowerCase().includes(Z)||ge.category.toLowerCase().includes(Z)||ge.sku&&ge.sku.toLowerCase().includes(Z));f(ye)},[h,i]);const O=Z=>{m(Z.target.value)},B=async()=>{y(!0);try{const Z=await _l.getAllProducts();a(Z.data||[]),f(Z.data||[])}catch(Z){console.error("Error fetching products:",Z),e("Failed to load products. Please try again.")}finally{y(!1)}},q=Z=>{w(Z),E({}),S(!0)},D=()=>{S(!1),w(null),E({})},R=(Z,ye)=>{E(ge=>({...ge,[Z]:ye}))},L=async Z=>{if(Z.preventDefault(),!(!v||!t||!Object.values(k).some(ge=>ge>0))){y(!0);try{const ge=Object.entries(k).filter(([re,K])=>K>0).map(([re,K])=>({size:re,quantity:K})),Te=await _l.restockProduct(t,v.id,{sizeStock:ge}),I=i.map(re=>re.id===v.id?{...re,sizeStock:Te.data.sizeStock}:re);a(I);const ne=Object.entries(k).filter(([re,K])=>K>0).map(([re,K])=>`${re.toUpperCase()}: ${K}`).join(", ");n(`Successfully restocked ${v.name} with sizes: ${ne}`),D()}catch(ge){console.error("Error restocking product:",ge),e(ge instanceof Error?ge.message:"An error occurred while restocking the product")}finally{y(!1)}}},$=Z=>Z.sizeStock.reduce((ye,ge)=>ye+ge.stock,0),te=async Z=>{if(window.confirm("Are you sure you want to delete this product?")&&t){y(!0);try{await _l.deleteProduct(t,Z),a(i.filter(ye=>ye.id!==Z)),n("Product deleted successfully")}catch(ye){console.error("Error deleting product:",ye),e(ye instanceof Error?ye.message:"An error occurred while deleting the product")}finally{y(!1)}}},se=Z=>{s(`/edit-product/${Z}`)};return d.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[d.jsx("h2",{className:"text-xl font-semibold mb-6",children:"Manage Products"}),d.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 mb-4",children:[d.jsx("div",{className:"w-full sm:w-64",children:d.jsx("input",{type:"text",placeholder:"Search products...",value:h,onChange:O,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-black focus:border-black"})}),d.jsx("div",{children:d.jsx(me,{to:"/add-product",className:"w-full sm:w-auto inline-block bg-black text-white px-4 py-2 rounded text-center",children:"Add New Product"})})]}),g&&d.jsx("p",{className:"text-center py-4",children:"Loading products..."}),!g&&c.length===0&&d.jsx("div",{className:"text-center py-8",children:h?d.jsxs("p",{className:"text-gray-500",children:['No products found matching "',h,'"']}):d.jsx("p",{className:"text-gray-500",children:"No products found"})}),!g&&c.length>0&&d.jsx("div",{className:"mt-4 overflow-x-auto",children:d.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[d.jsx("thead",{className:"bg-gray-50",children:d.jsxs("tr",{children:[d.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ID"}),d.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product Name"}),d.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),d.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),d.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Stock"}),d.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),d.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:c.map(Z=>d.jsxs("tr",{className:"hover:bg-gray-50",children:[d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:Z.id}),d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[Z.name,Z.sku&&d.jsxs("div",{className:"text-xs text-gray-400",children:["SKU: ",Z.sku]})]}),d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["₱",Z.price.toFixed(2)]}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:Z.category}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:$(Z)}),d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[d.jsx("button",{onClick:()=>q(Z),className:"text-green-600 hover:text-green-900 mr-3",children:"Restock"}),d.jsx("button",{onClick:()=>se(Z.id),className:"text-blue-600 hover:text-blue-900 mr-3",children:"Edit"}),d.jsx("button",{onClick:()=>te(Z.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},Z.id))})]})}),d.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[c.length>0&&d.jsx("div",{className:"text-sm text-gray-700",children:h?d.jsxs("span",{children:["Showing ",d.jsx("span",{className:"font-medium",children:c.length})," results from ",d.jsx("span",{className:"font-medium",children:i.length})," products"]}):d.jsxs("span",{children:["Showing ",d.jsx("span",{className:"font-medium",children:"1"})," to ",d.jsx("span",{className:"font-medium",children:c.length})," of ",d.jsx("span",{className:"font-medium",children:i.length})," products"]})}),c.length>0&&d.jsx("div",{className:"flex-1 flex justify-end",children:d.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[d.jsx("button",{className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",children:"Previous"}),d.jsx("button",{className:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-black text-sm font-medium text-white",children:"1"}),d.jsx("button",{className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",children:"Next"})]})})]}),b&&v&&d.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center z-50",children:d.jsxs("div",{className:"bg-white rounded-lg overflow-hidden shadow-xl max-w-md w-full",children:[d.jsx("div",{className:"px-6 py-4 bg-gray-100 border-b",children:d.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Restock ",v.name]})}),d.jsxs("form",{onSubmit:L,className:"p-6",children:[d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Stock"}),d.jsxs("div",{className:"text-lg font-semibold",children:[$(v)," units total"]}),v.sizeStock&&v.sizeStock.length>0&&d.jsx("div",{className:"mt-2 grid grid-cols-2 gap-2",children:v.sizeStock.map(Z=>d.jsxs("div",{className:"text-sm",children:[d.jsxs("span",{className:"font-medium",children:[Z.size.toUpperCase(),":"]})," ",Z.stock," units"]},Z.size))})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Restock Quantity by Size"}),d.jsx("div",{className:"space-y-3",children:(ue=v.sizeStock)==null?void 0:ue.map(Z=>d.jsxs("div",{className:"flex items-center",children:[d.jsxs("span",{className:"font-medium w-20",children:[Z.size.toUpperCase(),":"]}),d.jsx("input",{type:"number",value:k[Z.size]||0,onChange:ye=>R(Z.size,parseInt(ye.target.value)||0),min:"0",className:"w-20 px-2 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-black focus:border-black"}),d.jsx("span",{className:"ml-2 text-sm text-gray-500",children:"units"})]},Z.size))})]}),d.jsxs("div",{className:"flex justify-end space-x-3",children:[d.jsx("button",{type:"button",onClick:D,className:"px-4 py-2 bg-white border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-black",children:"Cancel"}),d.jsx("button",{type:"submit",disabled:!Object.values(k).some(Z=>Z>0)||g,className:`px-4 py-2 rounded-md text-sm font-medium text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-black ${!Object.values(k).some(Z=>Z>0)||g?"bg-gray-400 cursor-not-allowed":"bg-black hover:bg-gray-800"}`,children:g?"Updating...":"Confirm Restock"})]})]})]})})]})},zk=()=>{const n=fr();return C.useEffect(()=>{n("/admin-orders")},[n]),d.jsx("div",{className:"bg-white shadow rounded-lg p-6 text-center",children:d.jsx("p",{className:"text-gray-700",children:"Redirecting to the order management system..."})})},Lk=({token:n})=>{const[e,t]=C.useState([]),[s,i]=C.useState(!0),[a,c]=C.useState(null),f=fr(),h=async()=>{try{i(!0),c(null);const v=[...await Ms.getAllAnnouncements(n)].sort((w,k)=>w.displayOrder-k.displayOrder);t(v)}catch(S){c("Failed to load announcements. Please try again."),console.error("Error fetching announcements:",S)}finally{i(!1)}};C.useEffect(()=>{h()},[n]);const m=async(S,v)=>{try{await Ms.toggleAnnouncementStatus(n,S,!v),t(w=>w.map(k=>k.id===S?{...k,isActive:!v}:k))}catch(w){c("Failed to update announcement status. Please try again."),console.error("Error updating announcement status:",w)}},g=async S=>{if(window.confirm("Are you sure you want to delete this announcement?"))try{await Ms.deleteAnnouncement(n,S),t(v=>v.filter(w=>w.id!==S))}catch(v){c("Failed to delete announcement. Please try again."),console.error("Error deleting announcement:",v)}},y=S=>{f(`/admin/announcements/edit/${S}`)},b=()=>{f("/admin/announcements/new")};return s?d.jsx("div",{className:"p-4",children:"Loading announcements..."}):d.jsxs("div",{className:"p-4",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsx("h2",{className:"text-2xl font-como",children:"Manage Announcements"}),d.jsx("button",{onClick:b,className:"bg-black text-white px-4 py-2 hover:bg-gray-800",children:"Create New Announcement"})]}),a&&d.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:a}),e.length===0?d.jsx("div",{className:"text-gray-500",children:"No announcements found. Create your first one!"}):d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"min-w-full bg-white",children:[d.jsx("thead",{className:"bg-gray-100",children:d.jsxs("tr",{children:[d.jsx("th",{className:"py-2 px-4 text-left",children:"Order"}),d.jsx("th",{className:"py-2 px-4 text-left",children:"Text"}),d.jsx("th",{className:"py-2 px-4 text-left",children:"Status"}),d.jsx("th",{className:"py-2 px-4 text-left",children:"Button"}),d.jsx("th",{className:"py-2 px-4 text-left",children:"Colors"}),d.jsx("th",{className:"py-2 px-4 text-left",children:"Actions"})]})}),d.jsx("tbody",{children:e.map(S=>d.jsxs("tr",{className:"border-t",children:[d.jsx("td",{className:"py-2 px-4",children:S.displayOrder}),d.jsx("td",{className:"py-2 px-4",children:S.text}),d.jsx("td",{className:"py-2 px-4",children:d.jsx("span",{className:`inline-block px-2 py-1 rounded ${S.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:S.isActive?"Active":"Inactive"})}),d.jsx("td",{className:"py-2 px-4",children:S.buttonText?d.jsxs("span",{className:"text-sm",children:[S.buttonText," → ",S.buttonLink]}):d.jsx("span",{className:"text-gray-400",children:"None"})}),d.jsx("td",{className:"py-2 px-4",children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:S.backgroundColor},title:`Background: ${S.backgroundColor}`}),d.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:S.textColor},title:`Text: ${S.textColor}`})]})}),d.jsx("td",{className:"py-2 px-4",children:d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{onClick:()=>y(S.id),className:"text-blue-600 hover:text-blue-800",children:"Edit"}),d.jsx("button",{onClick:()=>m(S.id,S.isActive),className:"text-yellow-600 hover:text-yellow-800",children:S.isActive?"Deactivate":"Activate"}),d.jsx("button",{onClick:()=>g(S.id),className:"text-red-600 hover:text-red-800",children:"Delete"})]})})]},S.id))})]})})]})},Bk=({message:n,type:e,isVisible:t,onClose:s,autoClose:i=!0,duration:a=3e3})=>{if(C.useEffect(()=>{let f;return t&&i&&(f=setTimeout(()=>{s()},a)),()=>{f&&clearTimeout(f)}},[t,i,a,s]),!t)return null;const c={success:"bg-green-500",error:"bg-red-500",warning:"bg-yellow-500",info:"bg-blue-500"}[e];return d.jsx("div",{className:"fixed bottom-4 right-4 z-50 flex flex-col items-end",children:d.jsxs("div",{className:`${c} text-white px-4 py-3 rounded-md shadow-lg flex items-center max-w-sm`,children:[d.jsx("div",{className:"flex-grow mr-2",children:n}),d.jsx("button",{onClick:s,className:"text-white hover:text-gray-200 focus:outline-none",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:d.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})})},_k=({isOpen:n,onClose:e,children:t,title:s,widthClass:i="max-w-lg"})=>n?d.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:d.jsxs("div",{className:`bg-white rounded shadow-lg w-full ${i} mx-4 relative`,children:[d.jsxs("div",{className:"flex justify-between items-center border-b px-6 py-4",children:[d.jsx("h3",{className:"text-lg font-semibold",children:s}),d.jsx("button",{onClick:e,className:"text-gray-500 hover:text-black text-2xl font-bold",children:"×"})]}),d.jsx("div",{className:"p-6",children:t})]})}):null;function bt(n){this.content=n}bt.prototype={constructor:bt,find:function(n){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===n)return e;return-1},get:function(n){var e=this.find(n);return e==-1?void 0:this.content[e+1]},update:function(n,e,t){var s=t&&t!=n?this.remove(t):this,i=s.find(n),a=s.content.slice();return i==-1?a.push(t||n,e):(a[i+1]=e,t&&(a[i]=t)),new bt(a)},remove:function(n){var e=this.find(n);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new bt(t)},addToStart:function(n,e){return new bt([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var t=this.remove(n).content.slice();return t.push(n,e),new bt(t)},addBefore:function(n,e,t){var s=this.remove(e),i=s.content.slice(),a=s.find(n);return i.splice(a==-1?i.length:a,0,e,t),new bt(i)},forEach:function(n){for(var e=0;e<this.content.length;e+=2)n(this.content[e],this.content[e+1])},prepend:function(n){return n=bt.from(n),n.size?new bt(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=bt.from(n),n.size?new bt(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=bt.from(n);for(var t=0;t<n.content.length;t+=2)e=e.remove(n.content[t]);return e},toObject:function(){var n={};return this.forEach(function(e,t){n[e]=t}),n},get size(){return this.content.length>>1}};bt.from=function(n){if(n instanceof bt)return n;var e=[];if(n)for(var t in n)e.push(t,n[t]);return new bt(e)};function Xb(n,e,t){for(let s=0;;s++){if(s==n.childCount||s==e.childCount)return n.childCount==e.childCount?null:t;let i=n.child(s),a=e.child(s);if(i==a){t+=i.nodeSize;continue}if(!i.sameMarkup(a))return t;if(i.isText&&i.text!=a.text){for(let c=0;i.text[c]==a.text[c];c++)t++;return t}if(i.content.size||a.content.size){let c=Xb(i.content,a.content,t+1);if(c!=null)return c}t+=i.nodeSize}}function Zb(n,e,t,s){for(let i=n.childCount,a=e.childCount;;){if(i==0||a==0)return i==a?null:{a:t,b:s};let c=n.child(--i),f=e.child(--a),h=c.nodeSize;if(c==f){t-=h,s-=h;continue}if(!c.sameMarkup(f))return{a:t,b:s};if(c.isText&&c.text!=f.text){let m=0,g=Math.min(c.text.length,f.text.length);for(;m<g&&c.text[c.text.length-m-1]==f.text[f.text.length-m-1];)m++,t--,s--;return{a:t,b:s}}if(c.content.size||f.content.size){let m=Zb(c.content,f.content,t-1,s-1);if(m)return m}t-=h,s-=h}}class W{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let s=0;s<e.length;s++)this.size+=e[s].nodeSize}nodesBetween(e,t,s,i=0,a){for(let c=0,f=0;f<t;c++){let h=this.content[c],m=f+h.nodeSize;if(m>e&&s(h,i+f,a||null,c)!==!1&&h.content.size){let g=f+1;h.nodesBetween(Math.max(0,e-g),Math.min(h.content.size,t-g),s,i+g)}f=m}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,s,i){let a="",c=!0;return this.nodesBetween(e,t,(f,h)=>{let m=f.isText?f.text.slice(Math.max(e,h)-h,t-h):f.isLeaf?i?typeof i=="function"?i(f):i:f.type.spec.leafText?f.type.spec.leafText(f):"":"";f.isBlock&&(f.isLeaf&&m||f.isTextblock)&&s&&(c?c=!1:a+=s),a+=m},0),a}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,s=e.firstChild,i=this.content.slice(),a=0;for(t.isText&&t.sameMarkup(s)&&(i[i.length-1]=t.withText(t.text+s.text),a=1);a<e.content.length;a++)i.push(e.content[a]);return new W(i,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let s=[],i=0;if(t>e)for(let a=0,c=0;c<t;a++){let f=this.content[a],h=c+f.nodeSize;h>e&&((c<e||h>t)&&(f.isText?f=f.cut(Math.max(0,e-c),Math.min(f.text.length,t-c)):f=f.cut(Math.max(0,e-c-1),Math.min(f.content.size,t-c-1))),s.push(f),i+=f.nodeSize),c=h}return new W(s,i)}cutByIndex(e,t){return e==t?W.empty:e==0&&t==this.content.length?this:new W(this.content.slice(e,t))}replaceChild(e,t){let s=this.content[e];if(s==t)return this;let i=this.content.slice(),a=this.size+t.nodeSize-s.nodeSize;return i[e]=t,new W(i,a)}addToStart(e){return new W([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new W(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,s=0;t<this.content.length;t++){let i=this.content[t];e(i,s,t),s+=i.nodeSize}}findDiffStart(e,t=0){return Xb(this,e,t)}findDiffEnd(e,t=this.size,s=e.size){return Zb(this,e,t,s)}findIndex(e,t=-1){if(e==0)return Xo(0,e);if(e==this.size)return Xo(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let s=0,i=0;;s++){let a=this.child(s),c=i+a.nodeSize;if(c>=e)return c==e||t>0?Xo(s+1,c):Xo(s,i);i=c}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return W.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new W(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return W.empty;let t,s=0;for(let i=0;i<e.length;i++){let a=e[i];s+=a.nodeSize,i&&a.isText&&e[i-1].sameMarkup(a)?(t||(t=e.slice(0,i)),t[t.length-1]=a.withText(t[t.length-1].text+a.text)):t&&t.push(a)}return new W(t||e,s)}static from(e){if(!e)return W.empty;if(e instanceof W)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new W([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}W.empty=new W([],0);const Ff={index:0,offset:0};function Xo(n,e){return Ff.index=n,Ff.offset=e,Ff}function gc(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let s=0;s<n.length;s++)if(!gc(n[s],e[s]))return!1}else{for(let s in n)if(!(s in e)||!gc(n[s],e[s]))return!1;for(let s in e)if(!(s in n))return!1}return!0}let Pe=class Nh{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,s=!1;for(let i=0;i<e.length;i++){let a=e[i];if(this.eq(a))return e;if(this.type.excludes(a.type))t||(t=e.slice(0,i));else{if(a.type.excludes(this.type))return e;!s&&a.type.rank>this.type.rank&&(t||(t=e.slice(0,i)),t.push(this),s=!0),t&&t.push(a)}}return t||(t=e.slice()),s||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&gc(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let s=e.marks[t.type];if(!s)throw new RangeError(`There is no mark type ${t.type} in this schema`);let i=s.create(t.attrs);return s.checkAttrs(i.attrs),i}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let s=0;s<e.length;s++)if(!e[s].eq(t[s]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Nh.none;if(e instanceof Nh)return[e];let t=e.slice();return t.sort((s,i)=>s.type.rank-i.type.rank),t}};Pe.none=[];class xc extends Error{}class ie{constructor(e,t,s){this.content=e,this.openStart=t,this.openEnd=s}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let s=e1(this.content,e+this.openStart,t);return s&&new ie(s,this.openStart,this.openEnd)}removeBetween(e,t){return new ie(Wb(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return ie.empty;let s=t.openStart||0,i=t.openEnd||0;if(typeof s!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new ie(W.fromJSON(e,t.content),s,i)}static maxOpen(e,t=!0){let s=0,i=0;for(let a=e.firstChild;a&&!a.isLeaf&&(t||!a.type.spec.isolating);a=a.firstChild)s++;for(let a=e.lastChild;a&&!a.isLeaf&&(t||!a.type.spec.isolating);a=a.lastChild)i++;return new ie(e,s,i)}}ie.empty=new ie(W.empty,0,0);function Wb(n,e,t){let{index:s,offset:i}=n.findIndex(e),a=n.maybeChild(s),{index:c,offset:f}=n.findIndex(t);if(i==e||a.isText){if(f!=t&&!n.child(c).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(s!=c)throw new RangeError("Removing non-flat range");return n.replaceChild(s,a.copy(Wb(a.content,e-i-1,t-i-1)))}function e1(n,e,t,s){let{index:i,offset:a}=n.findIndex(e),c=n.maybeChild(i);if(a==e||c.isText)return n.cut(0,e).append(t).append(n.cut(e));let f=e1(c.content,e-a-1,t);return f&&n.replaceChild(i,c.copy(f))}function Hk(n,e,t){if(t.openStart>n.depth)throw new xc("Inserted content deeper than insertion position");if(n.depth-t.openStart!=e.depth-t.openEnd)throw new xc("Inconsistent open depths");return t1(n,e,t,0)}function t1(n,e,t,s){let i=n.index(s),a=n.node(s);if(i==e.index(s)&&s<n.depth-t.openStart){let c=t1(n,e,t,s+1);return a.copy(a.content.replaceChild(i,c))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&n.depth==s&&e.depth==s){let c=n.parent,f=c.content;return Rs(c,f.cut(0,n.parentOffset).append(t.content).append(f.cut(e.parentOffset)))}else{let{start:c,end:f}=Uk(t,n);return Rs(a,r1(n,c,f,e,s))}else return Rs(a,yc(n,e,s))}function n1(n,e){if(!e.type.compatibleContent(n.type))throw new xc("Cannot join "+e.type.name+" onto "+n.type.name)}function wh(n,e,t){let s=n.node(t);return n1(s,e.node(t)),s}function Os(n,e){let t=e.length-1;t>=0&&n.isText&&n.sameMarkup(e[t])?e[t]=n.withText(e[t].text+n.text):e.push(n)}function aa(n,e,t,s){let i=(e||n).node(t),a=0,c=e?e.index(t):i.childCount;n&&(a=n.index(t),n.depth>t?a++:n.textOffset&&(Os(n.nodeAfter,s),a++));for(let f=a;f<c;f++)Os(i.child(f),s);e&&e.depth==t&&e.textOffset&&Os(e.nodeBefore,s)}function Rs(n,e){return n.type.checkContent(e),n.copy(e)}function r1(n,e,t,s,i){let a=n.depth>i&&wh(n,e,i+1),c=s.depth>i&&wh(t,s,i+1),f=[];return aa(null,n,i,f),a&&c&&e.index(i)==t.index(i)?(n1(a,c),Os(Rs(a,r1(n,e,t,s,i+1)),f)):(a&&Os(Rs(a,yc(n,e,i+1)),f),aa(e,t,i,f),c&&Os(Rs(c,yc(t,s,i+1)),f)),aa(s,null,i,f),new W(f)}function yc(n,e,t){let s=[];if(aa(null,n,t,s),n.depth>t){let i=wh(n,e,t+1);Os(Rs(i,yc(n,e,t+1)),s)}return aa(e,null,t,s),new W(s)}function Uk(n,e){let t=e.depth-n.openStart,i=e.node(t).copy(n.content);for(let a=t-1;a>=0;a--)i=e.node(a).copy(W.from(i));return{start:i.resolveNoCache(n.openStart+t),end:i.resolveNoCache(i.content.size-n.openEnd-t)}}class xa{constructor(e,t,s){this.pos=e,this.path=t,this.parentOffset=s,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let s=this.pos-this.path[this.path.length-1],i=e.child(t);return s?e.child(t).cut(s):i}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let s=this.path[t*3],i=t==0?0:this.path[t*3-1]+1;for(let a=0;a<e;a++)i+=s.child(a).nodeSize;return i}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return Pe.none;if(this.textOffset)return e.child(t).marks;let s=e.maybeChild(t-1),i=e.maybeChild(t);if(!s){let f=s;s=i,i=f}let a=s.marks;for(var c=0;c<a.length;c++)a[c].type.spec.inclusive===!1&&(!i||!a[c].isInSet(i.marks))&&(a=a[c--].removeFromSet(a));return a}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let s=t.marks,i=e.parent.maybeChild(e.index());for(var a=0;a<s.length;a++)s[a].type.spec.inclusive===!1&&(!i||!s[a].isInSet(i.marks))&&(s=s[a--].removeFromSet(s));return s}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let s=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);s>=0;s--)if(e.pos<=this.end(s)&&(!t||t(this.node(s))))return new bc(this,e,s);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let s=[],i=0,a=t;for(let c=e;;){let{index:f,offset:h}=c.content.findIndex(a),m=a-h;if(s.push(c,f,i+h),!m||(c=c.child(f),c.isText))break;a=m-1,i+=h+1}return new xa(t,s,a)}static resolveCached(e,t){let s=sy.get(e);if(s)for(let a=0;a<s.elts.length;a++){let c=s.elts[a];if(c.pos==t)return c}else sy.set(e,s=new Pk);let i=s.elts[s.i]=xa.resolve(e,t);return s.i=(s.i+1)%Ik,i}}class Pk{constructor(){this.elts=[],this.i=0}}const Ik=12,sy=new WeakMap;class bc{constructor(e,t,s){this.$from=e,this.$to=t,this.depth=s}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const Vk=Object.create(null);let Yr=class kh{constructor(e,t,s,i=Pe.none){this.type=e,this.attrs=t,this.marks=i,this.content=s||W.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,s,i=0){this.content.nodesBetween(e,t,s,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,s,i){return this.content.textBetween(e,t,s,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,s){return this.type==e&&gc(this.attrs,t||e.defaultAttrs||Vk)&&Pe.sameSet(this.marks,s||Pe.none)}copy(e=null){return e==this.content?this:new kh(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new kh(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,s=!1){if(e==t)return ie.empty;let i=this.resolve(e),a=this.resolve(t),c=s?0:i.sharedDepth(t),f=i.start(c),m=i.node(c).content.cut(i.pos-f,a.pos-f);return new ie(m,i.depth-c,a.depth-c)}replace(e,t,s){return Hk(this.resolve(e),this.resolve(t),s)}nodeAt(e){for(let t=this;;){let{index:s,offset:i}=t.content.findIndex(e);if(t=t.maybeChild(s),!t)return null;if(i==e||t.isText)return t;e-=i+1}}childAfter(e){let{index:t,offset:s}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:s}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:s}=this.content.findIndex(e);if(s<e)return{node:this.content.child(t),index:t,offset:s};let i=this.content.child(t-1);return{node:i,index:t-1,offset:s-i.nodeSize}}resolve(e){return xa.resolveCached(this,e)}resolveNoCache(e){return xa.resolve(this,e)}rangeHasMark(e,t,s){let i=!1;return t>e&&this.nodesBetween(e,t,a=>(s.isInSet(a.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),s1(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,s=W.empty,i=0,a=s.childCount){let c=this.contentMatchAt(e).matchFragment(s,i,a),f=c&&c.matchFragment(this.content,t);if(!f||!f.validEnd)return!1;for(let h=i;h<a;h++)if(!this.type.allowsMarks(s.child(h).marks))return!1;return!0}canReplaceWith(e,t,s,i){if(i&&!this.type.allowsMarks(i))return!1;let a=this.contentMatchAt(e).matchType(s),c=a&&a.matchFragment(this.content,t);return c?c.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Pe.none;for(let t=0;t<this.marks.length;t++){let s=this.marks[t];s.type.checkAttrs(s.attrs),e=s.addToSet(e)}if(!Pe.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let s;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");s=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,s)}let i=W.fromJSON(e,t.content),a=e.nodeType(t.type).create(t.attrs,i,s);return a.type.checkAttrs(a.attrs),a}};Yr.prototype.text=void 0;class vc extends Yr{constructor(e,t,s,i){if(super(e,t,null,i),!s)throw new RangeError("Empty text nodes are not allowed");this.text=s}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):s1(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new vc(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new vc(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function s1(n,e){for(let t=n.length-1;t>=0;t--)e=n[t].type.name+"("+e+")";return e}class Bs{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let s=new qk(e,t);if(s.next==null)return Bs.empty;let i=l1(s);s.next&&s.err("Unexpected trailing text");let a=Qk(Jk(i));return Xk(a,s),a}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,s=e.childCount){let i=this;for(let a=t;i&&a<s;a++)i=i.matchType(e.child(a).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let s=0;s<e.next.length;s++)if(this.next[t].type==e.next[s].type)return!0;return!1}fillBefore(e,t=!1,s=0){let i=[this];function a(c,f){let h=c.matchFragment(e,s);if(h&&(!t||h.validEnd))return W.from(f.map(m=>m.createAndFill()));for(let m=0;m<c.next.length;m++){let{type:g,next:y}=c.next[m];if(!(g.isText||g.hasRequiredAttrs())&&i.indexOf(y)==-1){i.push(y);let b=a(y,f.concat(g));if(b)return b}}return null}return a(this,[])}findWrapping(e){for(let s=0;s<this.wrapCache.length;s+=2)if(this.wrapCache[s]==e)return this.wrapCache[s+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),s=[{match:this,type:null,via:null}];for(;s.length;){let i=s.shift(),a=i.match;if(a.matchType(e)){let c=[];for(let f=i;f.type;f=f.via)c.push(f.type);return c.reverse()}for(let c=0;c<a.next.length;c++){let{type:f,next:h}=a.next[c];!f.isLeaf&&!f.hasRequiredAttrs()&&!(f.name in t)&&(!i.type||h.validEnd)&&(s.push({match:f.contentMatch,type:f,via:i}),t[f.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(s){e.push(s);for(let i=0;i<s.next.length;i++)e.indexOf(s.next[i].next)==-1&&t(s.next[i].next)}return t(this),e.map((s,i)=>{let a=i+(s.validEnd?"*":" ")+" ";for(let c=0;c<s.next.length;c++)a+=(c?", ":"")+s.next[c].type.name+"->"+e.indexOf(s.next[c].next);return a}).join(`
`)}}Bs.empty=new Bs(!0);class qk{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function l1(n){let e=[];do e.push(Fk(n));while(n.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function Fk(n){let e=[];do e.push($k(n));while(n.next&&n.next!=")"&&n.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function $k(n){let e=Kk(n);for(;;)if(n.eat("+"))e={type:"plus",expr:e};else if(n.eat("*"))e={type:"star",expr:e};else if(n.eat("?"))e={type:"opt",expr:e};else if(n.eat("{"))e=Gk(n,e);else break;return e}function ly(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let e=Number(n.next);return n.pos++,e}function Gk(n,e){let t=ly(n),s=t;return n.eat(",")&&(n.next!="}"?s=ly(n):s=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:t,max:s,expr:e}}function Yk(n,e){let t=n.nodeTypes,s=t[e];if(s)return[s];let i=[];for(let a in t){let c=t[a];c.isInGroup(e)&&i.push(c)}return i.length==0&&n.err("No node type or group '"+e+"' found"),i}function Kk(n){if(n.eat("(")){let e=l1(n);return n.eat(")")||n.err("Missing closing paren"),e}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let e=Yk(n,n.next).map(t=>(n.inline==null?n.inline=t.isInline:n.inline!=t.isInline&&n.err("Mixing inline and block content"),{type:"name",value:t}));return n.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function Jk(n){let e=[[]];return i(a(n,0),t()),e;function t(){return e.push([])-1}function s(c,f,h){let m={term:h,to:f};return e[c].push(m),m}function i(c,f){c.forEach(h=>h.to=f)}function a(c,f){if(c.type=="choice")return c.exprs.reduce((h,m)=>h.concat(a(m,f)),[]);if(c.type=="seq")for(let h=0;;h++){let m=a(c.exprs[h],f);if(h==c.exprs.length-1)return m;i(m,f=t())}else if(c.type=="star"){let h=t();return s(f,h),i(a(c.expr,h),h),[s(h)]}else if(c.type=="plus"){let h=t();return i(a(c.expr,f),h),i(a(c.expr,h),h),[s(h)]}else{if(c.type=="opt")return[s(f)].concat(a(c.expr,f));if(c.type=="range"){let h=f;for(let m=0;m<c.min;m++){let g=t();i(a(c.expr,h),g),h=g}if(c.max==-1)i(a(c.expr,h),h);else for(let m=c.min;m<c.max;m++){let g=t();s(h,g),i(a(c.expr,h),g),h=g}return[s(h)]}else{if(c.type=="name")return[s(f,void 0,c.value)];throw new Error("Unknown expr type")}}}}function i1(n,e){return e-n}function iy(n,e){let t=[];return s(e),t.sort(i1);function s(i){let a=n[i];if(a.length==1&&!a[0].term)return s(a[0].to);t.push(i);for(let c=0;c<a.length;c++){let{term:f,to:h}=a[c];!f&&t.indexOf(h)==-1&&s(h)}}}function Qk(n){let e=Object.create(null);return t(iy(n,0));function t(s){let i=[];s.forEach(c=>{n[c].forEach(({term:f,to:h})=>{if(!f)return;let m;for(let g=0;g<i.length;g++)i[g][0]==f&&(m=i[g][1]);iy(n,h).forEach(g=>{m||i.push([f,m=[]]),m.indexOf(g)==-1&&m.push(g)})})});let a=e[s.join(",")]=new Bs(s.indexOf(n.length-1)>-1);for(let c=0;c<i.length;c++){let f=i[c][1].sort(i1);a.next.push({type:i[c][0],next:e[f.join(",")]||t(f)})}return a}}function Xk(n,e){for(let t=0,s=[n];t<s.length;t++){let i=s[t],a=!i.validEnd,c=[];for(let f=0;f<i.next.length;f++){let{type:h,next:m}=i.next[f];c.push(h.name),a&&!(h.isText||h.hasRequiredAttrs())&&(a=!1),s.indexOf(m)==-1&&s.push(m)}a&&e.err("Only non-generatable nodes ("+c.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function a1(n){let e=Object.create(null);for(let t in n){let s=n[t];if(!s.hasDefault)return null;e[t]=s.default}return e}function o1(n,e){let t=Object.create(null);for(let s in n){let i=e&&e[s];if(i===void 0){let a=n[s];if(a.hasDefault)i=a.default;else throw new RangeError("No value supplied for attribute "+s)}t[s]=i}return t}function c1(n,e,t,s){for(let i in e)if(!(i in n))throw new RangeError(`Unsupported attribute ${i} for ${t} of type ${i}`);for(let i in n){let a=n[i];a.validate&&a.validate(e[i])}}function u1(n,e){let t=Object.create(null);if(e)for(let s in e)t[s]=new Wk(n,s,e[s]);return t}let ay=class d1{constructor(e,t,s){this.name=e,this.schema=t,this.spec=s,this.markSet=null,this.groups=s.group?s.group.split(" "):[],this.attrs=u1(e,s.attrs),this.defaultAttrs=a1(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(s.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Bs.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:o1(this.attrs,e)}create(e=null,t,s){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Yr(this,this.computeAttrs(e),W.from(t),Pe.setFrom(s))}createChecked(e=null,t,s){return t=W.from(t),this.checkContent(t),new Yr(this,this.computeAttrs(e),t,Pe.setFrom(s))}createAndFill(e=null,t,s){if(e=this.computeAttrs(e),t=W.from(t),t.size){let c=this.contentMatch.fillBefore(t);if(!c)return null;t=c.append(t)}let i=this.contentMatch.matchFragment(t),a=i&&i.fillBefore(W.empty,!0);return a?new Yr(this,e,t.append(a),Pe.setFrom(s)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let s=0;s<e.childCount;s++)if(!this.allowsMarks(e.child(s).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){c1(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let s=0;s<e.length;s++)this.allowsMarkType(e[s].type)?t&&t.push(e[s]):t||(t=e.slice(0,s));return t?t.length?t:Pe.none:e}static compile(e,t){let s=Object.create(null);e.forEach((a,c)=>s[a]=new d1(a,t,c));let i=t.spec.topNode||"doc";if(!s[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!s.text)throw new RangeError("Every schema needs a 'text' type");for(let a in s.text.attrs)throw new RangeError("The text node type should not have attributes");return s}};function Zk(n,e,t){let s=t.split("|");return i=>{let a=i===null?"null":typeof i;if(s.indexOf(a)<0)throw new RangeError(`Expected value of type ${s} for attribute ${e} on type ${n}, got ${a}`)}}class Wk{constructor(e,t,s){this.hasDefault=Object.prototype.hasOwnProperty.call(s,"default"),this.default=s.default,this.validate=typeof s.validate=="string"?Zk(e,t,s.validate):s.validate}get isRequired(){return!this.hasDefault}}class iu{constructor(e,t,s,i){this.name=e,this.rank=t,this.schema=s,this.spec=i,this.attrs=u1(e,i.attrs),this.excluded=null;let a=a1(this.attrs);this.instance=a?new Pe(this,a):null}create(e=null){return!e&&this.instance?this.instance:new Pe(this,o1(this.attrs,e))}static compile(e,t){let s=Object.create(null),i=0;return e.forEach((a,c)=>s[a]=new iu(a,i++,t,c)),s}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){c1(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class f1{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let i in e)t[i]=e[i];t.nodes=bt.from(e.nodes),t.marks=bt.from(e.marks||{}),this.nodes=ay.compile(this.spec.nodes,this),this.marks=iu.compile(this.spec.marks,this);let s=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let a=this.nodes[i],c=a.spec.content||"",f=a.spec.marks;if(a.contentMatch=s[c]||(s[c]=Bs.parse(c,this.nodes)),a.inlineContent=a.contentMatch.inlineContent,a.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!a.isInline||!a.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=a}a.markSet=f=="_"?null:f?oy(this,f.split(" ")):f==""||!a.inlineContent?[]:null}for(let i in this.marks){let a=this.marks[i],c=a.spec.excludes;a.excluded=c==null?[a]:c==""?[]:oy(this,c.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,s,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof ay){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,s,i)}text(e,t){let s=this.nodes.text;return new vc(s,s.defaultAttrs,e,Pe.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return Yr.fromJSON(this,e)}markFromJSON(e){return Pe.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function oy(n,e){let t=[];for(let s=0;s<e.length;s++){let i=e[s],a=n.marks[i],c=a;if(a)t.push(a);else for(let f in n.marks){let h=n.marks[f];(i=="_"||h.spec.group&&h.spec.group.split(" ").indexOf(i)>-1)&&t.push(c=h)}if(!c)throw new SyntaxError("Unknown mark type: '"+e[s]+"'")}return t}function ej(n){return n.tag!=null}function tj(n){return n.style!=null}class Kr{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let s=this.matchedStyles=[];t.forEach(i=>{if(ej(i))this.tags.push(i);else if(tj(i)){let a=/[^=]*/.exec(i.style)[0];s.indexOf(a)<0&&s.push(a),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let a=e.nodes[i.node];return a.contentMatch.matchType(a)})}parse(e,t={}){let s=new uy(this,t,!1);return s.addAll(e,Pe.none,t.from,t.to),s.finish()}parseSlice(e,t={}){let s=new uy(this,t,!0);return s.addAll(e,Pe.none,t.from,t.to),ie.maxOpen(s.finish())}matchTag(e,t,s){for(let i=s?this.tags.indexOf(s)+1:0;i<this.tags.length;i++){let a=this.tags[i];if(sj(e,a.tag)&&(a.namespace===void 0||e.namespaceURI==a.namespace)&&(!a.context||t.matchesContext(a.context))){if(a.getAttrs){let c=a.getAttrs(e);if(c===!1)continue;a.attrs=c||void 0}return a}}}matchStyle(e,t,s,i){for(let a=i?this.styles.indexOf(i)+1:0;a<this.styles.length;a++){let c=this.styles[a],f=c.style;if(!(f.indexOf(e)!=0||c.context&&!s.matchesContext(c.context)||f.length>e.length&&(f.charCodeAt(e.length)!=61||f.slice(e.length+1)!=t))){if(c.getAttrs){let h=c.getAttrs(t);if(h===!1)continue;c.attrs=h||void 0}return c}}}static schemaRules(e){let t=[];function s(i){let a=i.priority==null?50:i.priority,c=0;for(;c<t.length;c++){let f=t[c];if((f.priority==null?50:f.priority)<a)break}t.splice(c,0,i)}for(let i in e.marks){let a=e.marks[i].spec.parseDOM;a&&a.forEach(c=>{s(c=dy(c)),c.mark||c.ignore||c.clearMark||(c.mark=i)})}for(let i in e.nodes){let a=e.nodes[i].spec.parseDOM;a&&a.forEach(c=>{s(c=dy(c)),c.node||c.ignore||c.mark||(c.node=i)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Kr(e,Kr.schemaRules(e)))}}const h1={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},nj={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},m1={ol:!0,ul:!0},ya=1,jh=2,cc=4;function cy(n,e,t){return e!=null?(e?ya:0)|(e==="full"?jh:0):n&&n.whitespace=="pre"?ya|jh:t&-5}class Zo{constructor(e,t,s,i,a,c){this.type=e,this.attrs=t,this.marks=s,this.solid=i,this.options=c,this.content=[],this.activeMarks=Pe.none,this.match=a||(c&cc?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(W.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let s=this.type.contentMatch,i;return(i=s.findWrapping(e.type))?(this.match=s,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&ya)){let s=this.content[this.content.length-1],i;if(s&&s.isText&&(i=/[ \t\r\n\u000c]+$/.exec(s.text))){let a=s;s.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=a.withText(a.text.slice(0,a.text.length-i[0].length))}}let t=W.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(W.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!h1.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class uy{constructor(e,t,s){this.parser=e,this.options=t,this.isOpen=s,this.open=0,this.localPreserveWS=!1;let i=t.topNode,a,c=cy(null,t.preserveWhitespace,0)|(s?cc:0);i?a=new Zo(i.type,i.attrs,Pe.none,!0,t.topMatch||i.type.contentMatch,c):s?a=new Zo(null,null,Pe.none,!0,null,c):a=new Zo(e.schema.topNodeType,null,Pe.none,!0,null,c),this.nodes=[a],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){e.nodeType==3?this.addTextNode(e,t):e.nodeType==1&&this.addElement(e,t)}addTextNode(e,t){let s=e.nodeValue,i=this.top,a=i.options&jh?"full":this.localPreserveWS||(i.options&ya)>0;if(a==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(s)){if(a)a!=="full"?s=s.replace(/\r?\n|\r/g," "):s=s.replace(/\r\n?/g,`
`);else if(s=s.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(s)&&this.open==this.nodes.length-1){let c=i.content[i.content.length-1],f=e.previousSibling;(!c||f&&f.nodeName=="BR"||c.isText&&/[ \t\r\n\u000c]$/.test(c.text))&&(s=s.slice(1))}s&&this.insertNode(this.parser.schema.text(s),t,!/\S/.test(s)),this.findInText(e)}else this.findInside(e)}addElement(e,t,s){let i=this.localPreserveWS,a=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let c=e.nodeName.toLowerCase(),f;m1.hasOwnProperty(c)&&this.parser.normalizeLists&&rj(e);let h=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(f=this.parser.matchTag(e,this,s));e:if(h?h.ignore:nj.hasOwnProperty(c))this.findInside(e),this.ignoreFallback(e,t);else if(!h||h.skip||h.closeParent){h&&h.closeParent?this.open=Math.max(0,this.open-1):h&&h.skip.nodeType&&(e=h.skip);let m,g=this.needsBlock;if(h1.hasOwnProperty(c))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),m=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let y=h&&h.skip?t:this.readStyles(e,t);y&&this.addAll(e,y),m&&this.sync(a),this.needsBlock=g}else{let m=this.readStyles(e,t);m&&this.addElementByRule(e,h,m,h.consuming===!1?f:void 0)}this.localPreserveWS=i}leafFallback(e,t){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),t)}ignoreFallback(e,t){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),t,!0)}readStyles(e,t){let s=e.style;if(s&&s.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let a=this.parser.matchedStyles[i],c=s.getPropertyValue(a);if(c)for(let f=void 0;;){let h=this.parser.matchStyle(a,c,this,f);if(!h)break;if(h.ignore)return null;if(h.clearMark?t=t.filter(m=>!h.clearMark(m)):t=t.concat(this.parser.schema.marks[h.mark].create(h.attrs)),h.consuming===!1)f=h;else break}}return t}addElementByRule(e,t,s,i){let a,c;if(t.node)if(c=this.parser.schema.nodes[t.node],c.isLeaf)this.insertNode(c.create(t.attrs),s,e.nodeName=="BR")||this.leafFallback(e,s);else{let h=this.enter(c,t.attrs||null,s,t.preserveWhitespace);h&&(a=!0,s=h)}else{let h=this.parser.schema.marks[t.mark];s=s.concat(h.create(t.attrs))}let f=this.top;if(c&&c.isLeaf)this.findInside(e);else if(i)this.addElement(e,s,i);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(h=>this.insertNode(h,s,!1));else{let h=e;typeof t.contentElement=="string"?h=e.querySelector(t.contentElement):typeof t.contentElement=="function"?h=t.contentElement(e):t.contentElement&&(h=t.contentElement),this.findAround(e,h,!0),this.addAll(h,s),this.findAround(e,h,!1)}a&&this.sync(f)&&this.open--}addAll(e,t,s,i){let a=s||0;for(let c=s?e.childNodes[s]:e.firstChild,f=i==null?null:e.childNodes[i];c!=f;c=c.nextSibling,++a)this.findAtPoint(e,a),this.addDOM(c,t);this.findAtPoint(e,a)}findPlace(e,t,s){let i,a;for(let c=this.open,f=0;c>=0;c--){let h=this.nodes[c],m=h.findWrapping(e);if(m&&(!i||i.length>m.length+f)&&(i=m,a=h,!m.length))break;if(h.solid){if(s)break;f+=2}}if(!i)return null;this.sync(a);for(let c=0;c<i.length;c++)t=this.enterInner(i[c],null,t,!1);return t}insertNode(e,t,s){if(e.isInline&&this.needsBlock&&!this.top.type){let a=this.textblockFromContext();a&&(t=this.enterInner(a,null,t))}let i=this.findPlace(e,t,s);if(i){this.closeExtra();let a=this.top;a.match&&(a.match=a.match.matchType(e.type));let c=Pe.none;for(let f of i.concat(e.marks))(a.type?a.type.allowsMarkType(f.type):fy(f.type,e.type))&&(c=f.addToSet(c));return a.content.push(e.mark(c)),!0}return!1}enter(e,t,s,i){let a=this.findPlace(e.create(t),s,!1);return a&&(a=this.enterInner(e,t,s,!0,i)),a}enterInner(e,t,s,i=!1,a){this.closeExtra();let c=this.top;c.match=c.match&&c.match.matchType(e);let f=cy(e,a,c.options);c.options&cc&&c.content.length==0&&(f|=cc);let h=Pe.none;return s=s.filter(m=>(c.type?c.type.allowsMarkType(m.type):fy(m.type,e))?(h=m.addToSet(h),!1):!0),this.nodes.push(new Zo(e,t,h,i,null,f)),this.open++,s}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=ya)}return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let s=this.nodes[t].content;for(let i=s.length-1;i>=0;i--)e+=s[i].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let s=0;s<this.find.length;s++)this.find[s].node==e&&this.find[s].offset==t&&(this.find[s].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,s){if(e!=t&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&t.compareDocumentPosition(this.find[i].node)&(s?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),s=this.options.context,i=!this.isOpen&&(!s||s.parent.type==this.nodes[0].type),a=-(s?s.depth+1:0)+(i?0:1),c=(f,h)=>{for(;f>=0;f--){let m=t[f];if(m==""){if(f==t.length-1||f==0)continue;for(;h>=a;h--)if(c(f-1,h))return!0;return!1}else{let g=h>0||h==0&&i?this.nodes[h].type:s&&h>=a?s.node(h-a).type:null;if(!g||g.name!=m&&!g.isInGroup(m))return!1;h--}}return!0};return c(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let s=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(s&&s.isTextblock&&s.defaultAttrs)return s}for(let t in this.parser.schema.nodes){let s=this.parser.schema.nodes[t];if(s.isTextblock&&s.defaultAttrs)return s}}}function rj(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let s=e.nodeType==1?e.nodeName.toLowerCase():null;s&&m1.hasOwnProperty(s)&&t?(t.appendChild(e),e=t):s=="li"?t=e:s&&(t=null)}}function sj(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function dy(n){let e={};for(let t in n)e[t]=n[t];return e}function fy(n,e){let t=e.schema.nodes;for(let s in t){let i=t[s];if(!i.allowsMarkType(n))continue;let a=[],c=f=>{a.push(f);for(let h=0;h<f.edgeCount;h++){let{type:m,next:g}=f.edge(h);if(m==e||a.indexOf(g)<0&&c(g))return!0}};if(c(i.contentMatch))return!0}}class Is{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},s){s||(s=$f(t).createDocumentFragment());let i=s,a=[];return e.forEach(c=>{if(a.length||c.marks.length){let f=0,h=0;for(;f<a.length&&h<c.marks.length;){let m=c.marks[h];if(!this.marks[m.type.name]){h++;continue}if(!m.eq(a[f][0])||m.type.spec.spanning===!1)break;f++,h++}for(;f<a.length;)i=a.pop()[1];for(;h<c.marks.length;){let m=c.marks[h++],g=this.serializeMark(m,c.isInline,t);g&&(a.push([m,i]),i.appendChild(g.dom),i=g.contentDOM||g.dom)}}i.appendChild(this.serializeNodeInner(c,t))}),s}serializeNodeInner(e,t){let{dom:s,contentDOM:i}=uc($f(t),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,i)}return s}serializeNode(e,t={}){let s=this.serializeNodeInner(e,t);for(let i=e.marks.length-1;i>=0;i--){let a=this.serializeMark(e.marks[i],e.isInline,t);a&&((a.contentDOM||a.dom).appendChild(s),s=a.dom)}return s}serializeMark(e,t,s={}){let i=this.marks[e.type.name];return i&&uc($f(s),i(e,t),null,e.attrs)}static renderSpec(e,t,s=null,i){return uc(e,t,s,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Is(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=hy(e.nodes);return t.text||(t.text=s=>s.text),t}static marksFromSchema(e){return hy(e.marks)}}function hy(n){let e={};for(let t in n){let s=n[t].spec.toDOM;s&&(e[t]=s)}return e}function $f(n){return n.document||window.document}const my=new WeakMap;function lj(n){let e=my.get(n);return e===void 0&&my.set(n,e=ij(n)),e}function ij(n){let e=null;function t(s){if(s&&typeof s=="object")if(Array.isArray(s))if(typeof s[0]=="string")e||(e=[]),e.push(s);else for(let i=0;i<s.length;i++)t(s[i]);else for(let i in s)t(s[i])}return t(n),e}function uc(n,e,t,s){if(typeof e=="string")return{dom:n.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],a;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(s&&(a=lj(s))&&a.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let c=i.indexOf(" ");c>0&&(t=i.slice(0,c),i=i.slice(c+1));let f,h=t?n.createElementNS(t,i):n.createElement(i),m=e[1],g=1;if(m&&typeof m=="object"&&m.nodeType==null&&!Array.isArray(m)){g=2;for(let y in m)if(m[y]!=null){let b=y.indexOf(" ");b>0?h.setAttributeNS(y.slice(0,b),y.slice(b+1),m[y]):h.setAttribute(y,m[y])}}for(let y=g;y<e.length;y++){let b=e[y];if(b===0){if(y<e.length-1||y>g)throw new RangeError("Content hole must be the only child of its parent node");return{dom:h,contentDOM:h}}else{let{dom:S,contentDOM:v}=uc(n,b,t,s);if(h.appendChild(S),v){if(f)throw new RangeError("Multiple content holes");f=v}}}return{dom:h,contentDOM:f}}const p1=65535,g1=Math.pow(2,16);function aj(n,e){return n+e*g1}function py(n){return n&p1}function oj(n){return(n-(n&p1))/g1}const x1=1,y1=2,dc=4,b1=8;class Ch{constructor(e,t,s){this.pos=e,this.delInfo=t,this.recover=s}get deleted(){return(this.delInfo&b1)>0}get deletedBefore(){return(this.delInfo&(x1|dc))>0}get deletedAfter(){return(this.delInfo&(y1|dc))>0}get deletedAcross(){return(this.delInfo&dc)>0}}class en{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&en.empty)return en.empty}recover(e){let t=0,s=py(e);if(!this.inverted)for(let i=0;i<s;i++)t+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[s*3]+t+oj(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,s){let i=0,a=this.inverted?2:1,c=this.inverted?1:2;for(let f=0;f<this.ranges.length;f+=3){let h=this.ranges[f]-(this.inverted?i:0);if(h>e)break;let m=this.ranges[f+a],g=this.ranges[f+c],y=h+m;if(e<=y){let b=m?e==h?-1:e==y?1:t:t,S=h+i+(b<0?0:g);if(s)return S;let v=e==(t<0?h:y)?null:aj(f/3,e-h),w=e==h?y1:e==y?x1:dc;return(t<0?e!=h:e!=y)&&(w|=b1),new Ch(S,w,v)}i+=g-m}return s?e+i:new Ch(e+i,0,null)}touches(e,t){let s=0,i=py(t),a=this.inverted?2:1,c=this.inverted?1:2;for(let f=0;f<this.ranges.length;f+=3){let h=this.ranges[f]-(this.inverted?s:0);if(h>e)break;let m=this.ranges[f+a],g=h+m;if(e<=g&&f==i*3)return!0;s+=this.ranges[f+c]-m}return!1}forEach(e){let t=this.inverted?2:1,s=this.inverted?1:2;for(let i=0,a=0;i<this.ranges.length;i+=3){let c=this.ranges[i],f=c-(this.inverted?a:0),h=c+(this.inverted?0:a),m=this.ranges[i+t],g=this.ranges[i+s];e(f,f+m,h,h+g),a+=g-m}}invert(){return new en(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?en.empty:new en(e<0?[0,-e,0]:[0,0,e])}}en.empty=new en([]);class ba{constructor(e,t,s=0,i=e?e.length:0){this.mirror=t,this.from=s,this.to=i,this._maps=e||[],this.ownData=!(e||t)}get maps(){return this._maps}slice(e=0,t=this.maps.length){return new ba(this._maps,this.mirror,e,t)}appendMap(e,t){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),t!=null&&this.setMirror(this._maps.length-1,t)}appendMapping(e){for(let t=0,s=this._maps.length;t<e._maps.length;t++){let i=e.getMirror(t);this.appendMap(e._maps[t],i!=null&&i<t?s+i:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,s=this._maps.length+e._maps.length;t>=0;t--){let i=e.getMirror(t);this.appendMap(e._maps[t].invert(),i!=null&&i>t?s-i-1:void 0)}}invert(){let e=new ba;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let s=this.from;s<this.to;s++)e=this._maps[s].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,s){let i=0;for(let a=this.from;a<this.to;a++){let c=this._maps[a],f=c.mapResult(e,t);if(f.recover!=null){let h=this.getMirror(a);if(h!=null&&h>a&&h<this.to){a=h,e=this._maps[h].recover(f.recover);continue}}i|=f.delInfo,e=f.pos}return s?e:new Ch(e,i,null)}}const Gf=Object.create(null);class Tt{getMap(){return en.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let s=Gf[t.stepType];if(!s)throw new RangeError(`No step type ${t.stepType} defined`);return s.fromJSON(e,t)}static jsonID(e,t){if(e in Gf)throw new RangeError("Duplicate use of step JSON ID "+e);return Gf[e]=t,t.prototype.jsonID=e,t}}class et{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new et(e,null)}static fail(e){return new et(null,e)}static fromReplace(e,t,s,i){try{return et.ok(e.replace(t,s,i))}catch(a){if(a instanceof xc)return et.fail(a.message);throw a}}}function dm(n,e,t){let s=[];for(let i=0;i<n.childCount;i++){let a=n.child(i);a.content.size&&(a=a.copy(dm(a.content,e,a))),a.isInline&&(a=e(a,t,i)),s.push(a)}return W.fromArray(s)}class Fr extends Tt{constructor(e,t,s){super(),this.from=e,this.to=t,this.mark=s}apply(e){let t=e.slice(this.from,this.to),s=e.resolve(this.from),i=s.node(s.sharedDepth(this.to)),a=new ie(dm(t.content,(c,f)=>!c.isAtom||!f.type.allowsMarkType(this.mark.type)?c:c.mark(this.mark.addToSet(c.marks)),i),t.openStart,t.openEnd);return et.fromReplace(e,this.from,this.to,a)}invert(){return new Bn(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),s=e.mapResult(this.to,-1);return t.deleted&&s.deleted||t.pos>=s.pos?null:new Fr(t.pos,s.pos,this.mark)}merge(e){return e instanceof Fr&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Fr(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Fr(t.from,t.to,e.markFromJSON(t.mark))}}Tt.jsonID("addMark",Fr);class Bn extends Tt{constructor(e,t,s){super(),this.from=e,this.to=t,this.mark=s}apply(e){let t=e.slice(this.from,this.to),s=new ie(dm(t.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),t.openStart,t.openEnd);return et.fromReplace(e,this.from,this.to,s)}invert(){return new Fr(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),s=e.mapResult(this.to,-1);return t.deleted&&s.deleted||t.pos>=s.pos?null:new Bn(t.pos,s.pos,this.mark)}merge(e){return e instanceof Bn&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Bn(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Bn(t.from,t.to,e.markFromJSON(t.mark))}}Tt.jsonID("removeMark",Bn);class $r extends Tt{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return et.fail("No node at mark step's position");let s=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return et.fromReplace(e,this.pos,this.pos+1,new ie(W.from(s),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let s=this.mark.addToSet(t.marks);if(s.length==t.marks.length){for(let i=0;i<t.marks.length;i++)if(!t.marks[i].isInSet(s))return new $r(this.pos,t.marks[i]);return new $r(this.pos,this.mark)}}return new _s(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new $r(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new $r(t.pos,e.markFromJSON(t.mark))}}Tt.jsonID("addNodeMark",$r);class _s extends Tt{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return et.fail("No node at mark step's position");let s=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return et.fromReplace(e,this.pos,this.pos+1,new ie(W.from(s),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new $r(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new _s(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new _s(t.pos,e.markFromJSON(t.mark))}}Tt.jsonID("removeNodeMark",_s);class dt extends Tt{constructor(e,t,s,i=!1){super(),this.from=e,this.to=t,this.slice=s,this.structure=i}apply(e){return this.structure&&Eh(e,this.from,this.to)?et.fail("Structure replace would overwrite content"):et.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new en([this.from,this.to-this.from,this.slice.size])}invert(e){return new dt(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),s=e.mapResult(this.to,-1);return t.deletedAcross&&s.deletedAcross?null:new dt(t.pos,Math.max(t.pos,s.pos),this.slice,this.structure)}merge(e){if(!(e instanceof dt)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?ie.empty:new ie(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new dt(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?ie.empty:new ie(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new dt(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new dt(t.from,t.to,ie.fromJSON(e,t.slice),!!t.structure)}}Tt.jsonID("replace",dt);class ft extends Tt{constructor(e,t,s,i,a,c,f=!1){super(),this.from=e,this.to=t,this.gapFrom=s,this.gapTo=i,this.slice=a,this.insert=c,this.structure=f}apply(e){if(this.structure&&(Eh(e,this.from,this.gapFrom)||Eh(e,this.gapTo,this.to)))return et.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return et.fail("Gap is not a flat range");let s=this.slice.insertAt(this.insert,t.content);return s?et.fromReplace(e,this.from,this.to,s):et.fail("Content does not fit in gap")}getMap(){return new en([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new ft(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),s=e.mapResult(this.to,-1),i=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),a=this.to==this.gapTo?s.pos:e.map(this.gapTo,1);return t.deletedAcross&&s.deletedAcross||i<t.pos||a>s.pos?null:new ft(t.pos,s.pos,i,a,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new ft(t.from,t.to,t.gapFrom,t.gapTo,ie.fromJSON(e,t.slice),t.insert,!!t.structure)}}Tt.jsonID("replaceAround",ft);function Eh(n,e,t){let s=n.resolve(e),i=t-e,a=s.depth;for(;i>0&&a>0&&s.indexAfter(a)==s.node(a).childCount;)a--,i--;if(i>0){let c=s.node(a).maybeChild(s.indexAfter(a));for(;i>0;){if(!c||c.isLeaf)return!0;c=c.firstChild,i--}}return!1}function cj(n,e,t,s){let i=[],a=[],c,f;n.doc.nodesBetween(e,t,(h,m,g)=>{if(!h.isInline)return;let y=h.marks;if(!s.isInSet(y)&&g.type.allowsMarkType(s.type)){let b=Math.max(m,e),S=Math.min(m+h.nodeSize,t),v=s.addToSet(y);for(let w=0;w<y.length;w++)y[w].isInSet(v)||(c&&c.to==b&&c.mark.eq(y[w])?c.to=S:i.push(c=new Bn(b,S,y[w])));f&&f.to==b?f.to=S:a.push(f=new Fr(b,S,s))}}),i.forEach(h=>n.step(h)),a.forEach(h=>n.step(h))}function uj(n,e,t,s){let i=[],a=0;n.doc.nodesBetween(e,t,(c,f)=>{if(!c.isInline)return;a++;let h=null;if(s instanceof iu){let m=c.marks,g;for(;g=s.isInSet(m);)(h||(h=[])).push(g),m=g.removeFromSet(m)}else s?s.isInSet(c.marks)&&(h=[s]):h=c.marks;if(h&&h.length){let m=Math.min(f+c.nodeSize,t);for(let g=0;g<h.length;g++){let y=h[g],b;for(let S=0;S<i.length;S++){let v=i[S];v.step==a-1&&y.eq(i[S].style)&&(b=v)}b?(b.to=m,b.step=a):i.push({style:y,from:Math.max(f,e),to:m,step:a})}}}),i.forEach(c=>n.step(new Bn(c.from,c.to,c.style)))}function fm(n,e,t,s=t.contentMatch,i=!0){let a=n.doc.nodeAt(e),c=[],f=e+1;for(let h=0;h<a.childCount;h++){let m=a.child(h),g=f+m.nodeSize,y=s.matchType(m.type);if(!y)c.push(new dt(f,g,ie.empty));else{s=y;for(let b=0;b<m.marks.length;b++)t.allowsMarkType(m.marks[b].type)||n.step(new Bn(f,g,m.marks[b]));if(i&&m.isText&&t.whitespace!="pre"){let b,S=/\r?\n|\r/g,v;for(;b=S.exec(m.text);)v||(v=new ie(W.from(t.schema.text(" ",t.allowedMarks(m.marks))),0,0)),c.push(new dt(f+b.index,f+b.index+b[0].length,v))}}f=g}if(!s.validEnd){let h=s.fillBefore(W.empty,!0);n.replace(f,f,new ie(h,0,0))}for(let h=c.length-1;h>=0;h--)n.step(c[h])}function dj(n,e,t){return(e==0||n.canReplace(e,n.childCount))&&(t==n.childCount||n.canReplace(0,t))}function Xl(n){let t=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let s=n.depth;;--s){let i=n.$from.node(s),a=n.$from.index(s),c=n.$to.indexAfter(s);if(s<n.depth&&i.canReplace(a,c,t))return s;if(s==0||i.type.spec.isolating||!dj(i,a,c))break}return null}function fj(n,e,t){let{$from:s,$to:i,depth:a}=e,c=s.before(a+1),f=i.after(a+1),h=c,m=f,g=W.empty,y=0;for(let v=a,w=!1;v>t;v--)w||s.index(v)>0?(w=!0,g=W.from(s.node(v).copy(g)),y++):h--;let b=W.empty,S=0;for(let v=a,w=!1;v>t;v--)w||i.after(v+1)<i.end(v)?(w=!0,b=W.from(i.node(v).copy(b)),S++):m++;n.step(new ft(h,m,c,f,new ie(g.append(b),y,S),g.size-y,!0))}function hm(n,e,t=null,s=n){let i=hj(n,e),a=i&&mj(s,e);return a?i.map(gy).concat({type:e,attrs:t}).concat(a.map(gy)):null}function gy(n){return{type:n,attrs:null}}function hj(n,e){let{parent:t,startIndex:s,endIndex:i}=n,a=t.contentMatchAt(s).findWrapping(e);if(!a)return null;let c=a.length?a[0]:e;return t.canReplaceWith(s,i,c)?a:null}function mj(n,e){let{parent:t,startIndex:s,endIndex:i}=n,a=t.child(s),c=e.contentMatch.findWrapping(a.type);if(!c)return null;let h=(c.length?c[c.length-1]:e).contentMatch;for(let m=s;h&&m<i;m++)h=h.matchType(t.child(m).type);return!h||!h.validEnd?null:c}function pj(n,e,t){let s=W.empty;for(let c=t.length-1;c>=0;c--){if(s.size){let f=t[c].type.contentMatch.matchFragment(s);if(!f||!f.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}s=W.from(t[c].type.create(t[c].attrs,s))}let i=e.start,a=e.end;n.step(new ft(i,a,i,a,new ie(s,0,0),t.length,!0))}function gj(n,e,t,s,i){if(!s.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let a=n.steps.length;n.doc.nodesBetween(e,t,(c,f)=>{let h=typeof i=="function"?i(c):i;if(c.isTextblock&&!c.hasMarkup(s,h)&&xj(n.doc,n.mapping.slice(a).map(f),s)){let m=null;if(s.schema.linebreakReplacement){let S=s.whitespace=="pre",v=!!s.contentMatch.matchType(s.schema.linebreakReplacement);S&&!v?m=!1:!S&&v&&(m=!0)}m===!1&&S1(n,c,f,a),fm(n,n.mapping.slice(a).map(f,1),s,void 0,m===null);let g=n.mapping.slice(a),y=g.map(f,1),b=g.map(f+c.nodeSize,1);return n.step(new ft(y,b,y+1,b-1,new ie(W.from(s.create(h,null,c.marks)),0,0),1,!0)),m===!0&&v1(n,c,f,a),!1}})}function v1(n,e,t,s){e.forEach((i,a)=>{if(i.isText){let c,f=/\r?\n|\r/g;for(;c=f.exec(i.text);){let h=n.mapping.slice(s).map(t+1+a+c.index);n.replaceWith(h,h+1,e.type.schema.linebreakReplacement.create())}}})}function S1(n,e,t,s){e.forEach((i,a)=>{if(i.type==i.type.schema.linebreakReplacement){let c=n.mapping.slice(s).map(t+1+a);n.replaceWith(c,c+1,e.type.schema.text(`
`))}})}function xj(n,e,t){let s=n.resolve(e),i=s.index();return s.parent.canReplaceWith(i,i+1,t)}function yj(n,e,t,s,i){let a=n.doc.nodeAt(e);if(!a)throw new RangeError("No node at given position");t||(t=a.type);let c=t.create(s,null,i||a.marks);if(a.isLeaf)return n.replaceWith(e,e+a.nodeSize,c);if(!t.validContent(a.content))throw new RangeError("Invalid content for node type "+t.name);n.step(new ft(e,e+a.nodeSize,e+1,e+a.nodeSize-1,new ie(W.from(c),0,0),1,!0))}function ar(n,e,t=1,s){let i=n.resolve(e),a=i.depth-t,c=s&&s[s.length-1]||i.parent;if(a<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!c.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let m=i.depth-1,g=t-2;m>a;m--,g--){let y=i.node(m),b=i.index(m);if(y.type.spec.isolating)return!1;let S=y.content.cutByIndex(b,y.childCount),v=s&&s[g+1];v&&(S=S.replaceChild(0,v.type.create(v.attrs)));let w=s&&s[g]||y;if(!y.canReplace(b+1,y.childCount)||!w.type.validContent(S))return!1}let f=i.indexAfter(a),h=s&&s[0];return i.node(a).canReplaceWith(f,f,h?h.type:i.node(a+1).type)}function bj(n,e,t=1,s){let i=n.doc.resolve(e),a=W.empty,c=W.empty;for(let f=i.depth,h=i.depth-t,m=t-1;f>h;f--,m--){a=W.from(i.node(f).copy(a));let g=s&&s[m];c=W.from(g?g.type.create(g.attrs,c):i.node(f).copy(c))}n.step(new dt(e,e,new ie(a.append(c),t,t),!0))}function Wr(n,e){let t=n.resolve(e),s=t.index();return N1(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(s,s+1)}function vj(n,e){e.content.size||n.type.compatibleContent(e.type);let t=n.contentMatchAt(n.childCount),{linebreakReplacement:s}=n.type.schema;for(let i=0;i<e.childCount;i++){let a=e.child(i),c=a.type==s?n.type.schema.nodes.text:a.type;if(t=t.matchType(c),!t||!n.type.allowsMarks(a.marks))return!1}return t.validEnd}function N1(n,e){return!!(n&&e&&!n.isLeaf&&vj(n,e))}function au(n,e,t=-1){let s=n.resolve(e);for(let i=s.depth;;i--){let a,c,f=s.index(i);if(i==s.depth?(a=s.nodeBefore,c=s.nodeAfter):t>0?(a=s.node(i+1),f++,c=s.node(i).maybeChild(f)):(a=s.node(i).maybeChild(f-1),c=s.node(i+1)),a&&!a.isTextblock&&N1(a,c)&&s.node(i).canReplace(f,f+1))return e;if(i==0)break;e=t<0?s.before(i):s.after(i)}}function Sj(n,e,t){let s=null,{linebreakReplacement:i}=n.doc.type.schema,a=n.doc.resolve(e-t),c=a.node().type;if(i&&c.inlineContent){let g=c.whitespace=="pre",y=!!c.contentMatch.matchType(i);g&&!y?s=!1:!g&&y&&(s=!0)}let f=n.steps.length;if(s===!1){let g=n.doc.resolve(e+t);S1(n,g.node(),g.before(),f)}c.inlineContent&&fm(n,e+t-1,c,a.node().contentMatchAt(a.index()),s==null);let h=n.mapping.slice(f),m=h.map(e-t);if(n.step(new dt(m,h.map(e+t,-1),ie.empty,!0)),s===!0){let g=n.doc.resolve(m);v1(n,g.node(),g.before(),n.steps.length)}return n}function Nj(n,e,t){let s=n.resolve(e);if(s.parent.canReplaceWith(s.index(),s.index(),t))return e;if(s.parentOffset==0)for(let i=s.depth-1;i>=0;i--){let a=s.index(i);if(s.node(i).canReplaceWith(a,a,t))return s.before(i+1);if(a>0)return null}if(s.parentOffset==s.parent.content.size)for(let i=s.depth-1;i>=0;i--){let a=s.indexAfter(i);if(s.node(i).canReplaceWith(a,a,t))return s.after(i+1);if(a<s.node(i).childCount)return null}return null}function w1(n,e,t){let s=n.resolve(e);if(!t.content.size)return e;let i=t.content;for(let a=0;a<t.openStart;a++)i=i.firstChild.content;for(let a=1;a<=(t.openStart==0&&t.size?2:1);a++)for(let c=s.depth;c>=0;c--){let f=c==s.depth?0:s.pos<=(s.start(c+1)+s.end(c+1))/2?-1:1,h=s.index(c)+(f>0?1:0),m=s.node(c),g=!1;if(a==1)g=m.canReplace(h,h,i);else{let y=m.contentMatchAt(h).findWrapping(i.firstChild.type);g=y&&m.canReplaceWith(h,h,y[0])}if(g)return f==0?s.pos:f<0?s.before(c+1):s.after(c+1)}return null}function ou(n,e,t=e,s=ie.empty){if(e==t&&!s.size)return null;let i=n.resolve(e),a=n.resolve(t);return k1(i,a,s)?new dt(e,t,s):new wj(i,a,s).fit()}function k1(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}class wj{constructor(e,t,s){this.$from=e,this.$to=t,this.unplaced=s,this.frontier=[],this.placed=W.empty;for(let i=0;i<=e.depth;i++){let a=e.node(i);this.frontier.push({type:a.type,match:a.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=W.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let m=this.findFittable();m?this.placeNodes(m):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,s=this.$from,i=this.close(e<0?this.$to:s.doc.resolve(e));if(!i)return null;let a=this.placed,c=s.depth,f=i.depth;for(;c&&f&&a.childCount==1;)a=a.firstChild.content,c--,f--;let h=new ie(a,c,f);return e>-1?new ft(s.pos,e,this.$to.pos,this.$to.end(),h,t):h.size||s.pos!=this.$to.pos?new dt(s.pos,i.pos,h):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,s=0,i=this.unplaced.openEnd;s<e;s++){let a=t.firstChild;if(t.childCount>1&&(i=0),a.type.spec.isolating&&i<=s){e=s;break}t=a.content}for(let t=1;t<=2;t++)for(let s=t==1?e:this.unplaced.openStart;s>=0;s--){let i,a=null;s?(a=Yf(this.unplaced.content,s-1).firstChild,i=a.content):i=this.unplaced.content;let c=i.firstChild;for(let f=this.depth;f>=0;f--){let{type:h,match:m}=this.frontier[f],g,y=null;if(t==1&&(c?m.matchType(c.type)||(y=m.fillBefore(W.from(c),!1)):a&&h.compatibleContent(a.type)))return{sliceDepth:s,frontierDepth:f,parent:a,inject:y};if(t==2&&c&&(g=m.findWrapping(c.type)))return{sliceDepth:s,frontierDepth:f,parent:a,wrap:g};if(a&&m.matchType(a.type))break}}}openMore(){let{content:e,openStart:t,openEnd:s}=this.unplaced,i=Yf(e,t);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new ie(e,t+1,Math.max(s,i.size+t>=e.size-s?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:s}=this.unplaced,i=Yf(e,t);if(i.childCount<=1&&t>0){let a=e.size-t<=t+i.size;this.unplaced=new ie(ra(e,t-1,1),t-1,a?t-1:s)}else this.unplaced=new ie(ra(e,t,1),t,s)}placeNodes({sliceDepth:e,frontierDepth:t,parent:s,inject:i,wrap:a}){for(;this.depth>t;)this.closeFrontierNode();if(a)for(let w=0;w<a.length;w++)this.openFrontierNode(a[w]);let c=this.unplaced,f=s?s.content:c.content,h=c.openStart-e,m=0,g=[],{match:y,type:b}=this.frontier[t];if(i){for(let w=0;w<i.childCount;w++)g.push(i.child(w));y=y.matchFragment(i)}let S=f.size+e-(c.content.size-c.openEnd);for(;m<f.childCount;){let w=f.child(m),k=y.matchType(w.type);if(!k)break;m++,(m>1||h==0||w.content.size)&&(y=k,g.push(j1(w.mark(b.allowedMarks(w.marks)),m==1?h:0,m==f.childCount?S:-1)))}let v=m==f.childCount;v||(S=-1),this.placed=sa(this.placed,t,W.from(g)),this.frontier[t].match=y,v&&S<0&&s&&s.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let w=0,k=f;w<S;w++){let E=k.lastChild;this.frontier.push({type:E.type,match:E.contentMatchAt(E.childCount)}),k=E.content}this.unplaced=v?e==0?ie.empty:new ie(ra(c.content,e-1,1),e-1,S<0?c.openEnd:e-1):new ie(ra(c.content,e,m),c.openStart,c.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!Kf(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:s}=this.$to,i=this.$to.after(s);for(;s>1&&i==this.$to.end(--s);)++i;return i}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:s,type:i}=this.frontier[t],a=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),c=Kf(e,t,i,s,a);if(c){for(let f=t-1;f>=0;f--){let{match:h,type:m}=this.frontier[f],g=Kf(e,f,m,h,!0);if(!g||g.childCount)continue e}return{depth:t,fit:c,move:a?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=sa(this.placed,t.depth,t.fit)),e=t.move;for(let s=t.depth+1;s<=e.depth;s++){let i=e.node(s),a=i.type.contentMatch.fillBefore(i.content,!0,e.index(s));this.openFrontierNode(i.type,i.attrs,a)}return e}openFrontierNode(e,t=null,s){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=sa(this.placed,this.depth,W.from(e.create(t,s))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(W.empty,!0);t.childCount&&(this.placed=sa(this.placed,this.frontier.length,t))}}function ra(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy(ra(n.firstChild.content,e-1,t)))}function sa(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy(sa(n.lastChild.content,e-1,t)))}function Yf(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function j1(n,e,t){if(e<=0)return n;let s=n.content;return e>1&&(s=s.replaceChild(0,j1(s.firstChild,e-1,s.childCount==1?t-1:0))),e>0&&(s=n.type.contentMatch.fillBefore(s).append(s),t<=0&&(s=s.append(n.type.contentMatch.matchFragment(s).fillBefore(W.empty,!0)))),n.copy(s)}function Kf(n,e,t,s,i){let a=n.node(e),c=i?n.indexAfter(e):n.index(e);if(c==a.childCount&&!t.compatibleContent(a.type))return null;let f=s.fillBefore(a.content,!0,c);return f&&!kj(t,a.content,c)?f:null}function kj(n,e,t){for(let s=t;s<e.childCount;s++)if(!n.allowsMarks(e.child(s).marks))return!0;return!1}function jj(n){return n.spec.defining||n.spec.definingForContent}function Cj(n,e,t,s){if(!s.size)return n.deleteRange(e,t);let i=n.doc.resolve(e),a=n.doc.resolve(t);if(k1(i,a,s))return n.step(new dt(e,t,s));let c=E1(i,n.doc.resolve(t));c[c.length-1]==0&&c.pop();let f=-(i.depth+1);c.unshift(f);for(let b=i.depth,S=i.pos-1;b>0;b--,S--){let v=i.node(b).type.spec;if(v.defining||v.definingAsContext||v.isolating)break;c.indexOf(b)>-1?f=b:i.before(b)==S&&c.splice(1,0,-b)}let h=c.indexOf(f),m=[],g=s.openStart;for(let b=s.content,S=0;;S++){let v=b.firstChild;if(m.push(v),S==s.openStart)break;b=v.content}for(let b=g-1;b>=0;b--){let S=m[b],v=jj(S.type);if(v&&!S.sameMarkup(i.node(Math.abs(f)-1)))g=b;else if(v||!S.type.isTextblock)break}for(let b=s.openStart;b>=0;b--){let S=(b+g+1)%(s.openStart+1),v=m[S];if(v)for(let w=0;w<c.length;w++){let k=c[(w+h)%c.length],E=!0;k<0&&(E=!1,k=-k);let O=i.node(k-1),B=i.index(k-1);if(O.canReplaceWith(B,B,v.type,v.marks))return n.replace(i.before(k),E?a.after(k):t,new ie(C1(s.content,0,s.openStart,S),S,s.openEnd))}}let y=n.steps.length;for(let b=c.length-1;b>=0&&(n.replace(e,t,s),!(n.steps.length>y));b--){let S=c[b];S<0||(e=i.before(S),t=a.after(S))}}function C1(n,e,t,s,i){if(e<t){let a=n.firstChild;n=n.replaceChild(0,a.copy(C1(a.content,e+1,t,s,a)))}if(e>s){let a=i.contentMatchAt(0),c=a.fillBefore(n).append(n);n=c.append(a.matchFragment(c).fillBefore(W.empty,!0))}return n}function Ej(n,e,t,s){if(!s.isInline&&e==t&&n.doc.resolve(e).parent.content.size){let i=Nj(n.doc,e,s.type);i!=null&&(e=t=i)}n.replaceRange(e,t,new ie(W.from(s),0,0))}function Aj(n,e,t){let s=n.doc.resolve(e),i=n.doc.resolve(t),a=E1(s,i);for(let c=0;c<a.length;c++){let f=a[c],h=c==a.length-1;if(h&&f==0||s.node(f).type.contentMatch.validEnd)return n.delete(s.start(f),i.end(f));if(f>0&&(h||s.node(f-1).canReplace(s.index(f-1),i.indexAfter(f-1))))return n.delete(s.before(f),i.after(f))}for(let c=1;c<=s.depth&&c<=i.depth;c++)if(e-s.start(c)==s.depth-c&&t>s.end(c)&&i.end(c)-t!=i.depth-c&&s.start(c-1)==i.start(c-1)&&s.node(c-1).canReplace(s.index(c-1),i.index(c-1)))return n.delete(s.before(c),t);n.delete(e,t)}function E1(n,e){let t=[],s=Math.min(n.depth,e.depth);for(let i=s;i>=0;i--){let a=n.start(i);if(a<n.pos-(n.depth-i)||e.end(i)>e.pos+(e.depth-i)||n.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(a==e.start(i)||i==n.depth&&i==e.depth&&n.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==a-1)&&t.push(i)}return t}class Hl extends Tt{constructor(e,t,s){super(),this.pos=e,this.attr=t,this.value=s}apply(e){let t=e.nodeAt(this.pos);if(!t)return et.fail("No node at attribute step's position");let s=Object.create(null);for(let a in t.attrs)s[a]=t.attrs[a];s[this.attr]=this.value;let i=t.type.create(s,null,t.marks);return et.fromReplace(e,this.pos,this.pos+1,new ie(W.from(i),0,t.isLeaf?0:1))}getMap(){return en.empty}invert(e){return new Hl(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Hl(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Hl(t.pos,t.attr,t.value)}}Tt.jsonID("attr",Hl);class va extends Tt{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let i in e.attrs)t[i]=e.attrs[i];t[this.attr]=this.value;let s=e.type.create(t,e.content,e.marks);return et.ok(s)}getMap(){return en.empty}invert(e){return new va(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new va(t.attr,t.value)}}Tt.jsonID("docAttr",va);let Vl=class extends Error{};Vl=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};Vl.prototype=Object.create(Error.prototype);Vl.prototype.constructor=Vl;Vl.prototype.name="TransformError";class A1{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new ba}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new Vl(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,s=ie.empty){let i=ou(this.doc,e,t,s);return i&&this.step(i),this}replaceWith(e,t,s){return this.replace(e,t,new ie(W.from(s),0,0))}delete(e,t){return this.replace(e,t,ie.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,s){return Cj(this,e,t,s),this}replaceRangeWith(e,t,s){return Ej(this,e,t,s),this}deleteRange(e,t){return Aj(this,e,t),this}lift(e,t){return fj(this,e,t),this}join(e,t=1){return Sj(this,e,t),this}wrap(e,t){return pj(this,e,t),this}setBlockType(e,t=e,s,i=null){return gj(this,e,t,s,i),this}setNodeMarkup(e,t,s=null,i){return yj(this,e,t,s,i),this}setNodeAttribute(e,t,s){return this.step(new Hl(e,t,s)),this}setDocAttribute(e,t){return this.step(new va(e,t)),this}addNodeMark(e,t){return this.step(new $r(e,t)),this}removeNodeMark(e,t){let s=this.doc.nodeAt(e);if(!s)throw new RangeError("No node at position "+e);if(t instanceof Pe)t.isInSet(s.marks)&&this.step(new _s(e,t));else{let i=s.marks,a,c=[];for(;a=t.isInSet(i);)c.push(new _s(e,a)),i=a.removeFromSet(i);for(let f=c.length-1;f>=0;f--)this.step(c[f])}return this}split(e,t=1,s){return bj(this,e,t,s),this}addMark(e,t,s){return cj(this,e,t,s),this}removeMark(e,t,s){return uj(this,e,t,s),this}clearIncompatible(e,t,s){return fm(this,e,t,s),this}}const Jf=Object.create(null);class Se{constructor(e,t,s){this.$anchor=e,this.$head=t,this.ranges=s||[new Tj(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=ie.empty){let s=t.content.lastChild,i=null;for(let f=0;f<t.openEnd;f++)i=s,s=s.lastChild;let a=e.steps.length,c=this.ranges;for(let f=0;f<c.length;f++){let{$from:h,$to:m}=c[f],g=e.mapping.slice(a);e.replaceRange(g.map(h.pos),g.map(m.pos),f?ie.empty:t),f==0&&by(e,a,(s?s.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,t){let s=e.steps.length,i=this.ranges;for(let a=0;a<i.length;a++){let{$from:c,$to:f}=i[a],h=e.mapping.slice(s),m=h.map(c.pos),g=h.map(f.pos);a?e.deleteRange(m,g):(e.replaceRangeWith(m,g,t),by(e,s,t.isInline?-1:1))}}static findFrom(e,t,s=!1){let i=e.parent.inlineContent?new be(e):Rl(e.node(0),e.parent,e.pos,e.index(),t,s);if(i)return i;for(let a=e.depth-1;a>=0;a--){let c=t<0?Rl(e.node(0),e.node(a),e.before(a+1),e.index(a),t,s):Rl(e.node(0),e.node(a),e.after(a+1),e.index(a)+1,t,s);if(c)return c}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new tn(e.node(0))}static atStart(e){return Rl(e,e,0,0,1)||new tn(e)}static atEnd(e){return Rl(e,e,e.content.size,e.childCount,-1)||new tn(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let s=Jf[t.type];if(!s)throw new RangeError(`No selection type ${t.type} defined`);return s.fromJSON(e,t)}static jsonID(e,t){if(e in Jf)throw new RangeError("Duplicate use of selection JSON ID "+e);return Jf[e]=t,t.prototype.jsonID=e,t}getBookmark(){return be.between(this.$anchor,this.$head).getBookmark()}}Se.prototype.visible=!0;class Tj{constructor(e,t){this.$from=e,this.$to=t}}let xy=!1;function yy(n){!xy&&!n.parent.inlineContent&&(xy=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class be extends Se{constructor(e,t=e){yy(e),yy(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let s=e.resolve(t.map(this.head));if(!s.parent.inlineContent)return Se.near(s);let i=e.resolve(t.map(this.anchor));return new be(i.parent.inlineContent?i:s,s)}replace(e,t=ie.empty){if(super.replace(e,t),t==ie.empty){let s=this.$from.marksAcross(this.$to);s&&e.ensureMarks(s)}}eq(e){return e instanceof be&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new cu(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new be(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,s=t){let i=e.resolve(t);return new this(i,s==t?i:e.resolve(s))}static between(e,t,s){let i=e.pos-t.pos;if((!s||i)&&(s=i>=0?1:-1),!t.parent.inlineContent){let a=Se.findFrom(t,s,!0)||Se.findFrom(t,-s,!0);if(a)t=a.$head;else return Se.near(t,s)}return e.parent.inlineContent||(i==0?e=t:(e=(Se.findFrom(e,-s,!0)||Se.findFrom(e,s,!0)).$anchor,e.pos<t.pos!=i<0&&(e=t))),new be(e,t)}}Se.jsonID("text",be);class cu{constructor(e,t){this.anchor=e,this.head=t}map(e){return new cu(e.map(this.anchor),e.map(this.head))}resolve(e){return be.between(e.resolve(this.anchor),e.resolve(this.head))}}class fe extends Se{constructor(e){let t=e.nodeAfter,s=e.node(0).resolve(e.pos+t.nodeSize);super(e,s),this.node=t}map(e,t){let{deleted:s,pos:i}=t.mapResult(this.anchor),a=e.resolve(i);return s?Se.near(a):new fe(a)}content(){return new ie(W.from(this.node),0,0)}eq(e){return e instanceof fe&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new mm(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new fe(e.resolve(t.anchor))}static create(e,t){return new fe(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}fe.prototype.visible=!1;Se.jsonID("node",fe);class mm{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:s}=e.mapResult(this.anchor);return t?new cu(s,s):new mm(s)}resolve(e){let t=e.resolve(this.anchor),s=t.nodeAfter;return s&&fe.isSelectable(s)?new fe(t):Se.near(t)}}class tn extends Se{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=ie.empty){if(t==ie.empty){e.delete(0,e.doc.content.size);let s=Se.atStart(e.doc);s.eq(e.selection)||e.setSelection(s)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new tn(e)}map(e){return new tn(e)}eq(e){return e instanceof tn}getBookmark(){return Mj}}Se.jsonID("all",tn);const Mj={map(){return this},resolve(n){return new tn(n)}};function Rl(n,e,t,s,i,a=!1){if(e.inlineContent)return be.create(n,t);for(let c=s-(i>0?0:1);i>0?c<e.childCount:c>=0;c+=i){let f=e.child(c);if(f.isAtom){if(!a&&fe.isSelectable(f))return fe.create(n,t-(i<0?f.nodeSize:0))}else{let h=Rl(n,f,t+i,i<0?f.childCount:0,i,a);if(h)return h}t+=f.nodeSize*i}return null}function by(n,e,t){let s=n.steps.length-1;if(s<e)return;let i=n.steps[s];if(!(i instanceof dt||i instanceof ft))return;let a=n.mapping.maps[s],c;a.forEach((f,h,m,g)=>{c==null&&(c=g)}),n.setSelection(Se.near(n.doc.resolve(c),t))}const vy=1,Sy=2,Ny=4;class Oj extends A1{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|vy)&-3,this.storedMarks=null,this}get selectionSet(){return(this.updated&vy)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Sy,this}ensureMarks(e){return Pe.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Sy)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&-3,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let s=this.selection;return t&&(e=e.mark(this.storedMarks||(s.empty?s.$from.marks():s.$from.marksAcross(s.$to)||Pe.none))),s.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,s){let i=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(s==null&&(s=t),s=s??t,!e)return this.deleteRange(t,s);let a=this.storedMarks;if(!a){let c=this.doc.resolve(t);a=s==t?c.marks():c.marksAcross(this.doc.resolve(s))}return this.replaceRangeWith(t,s,i.text(e,a)),this.selection.empty||this.setSelection(Se.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=Ny,this}get scrolledIntoView(){return(this.updated&Ny)>0}}function wy(n,e){return!e||!n?n:n.bind(e)}class la{constructor(e,t,s){this.name=e,this.init=wy(t.init,s),this.apply=wy(t.apply,s)}}const Rj=[new la("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new la("selection",{init(n,e){return n.selection||Se.atStart(e.doc)},apply(n){return n.selection}}),new la("storedMarks",{init(n){return n.storedMarks||null},apply(n,e,t,s){return s.selection.$cursor?n.storedMarks:null}}),new la("scrollToSelection",{init(){return 0},apply(n,e){return n.scrolledIntoView?e+1:e}})];class Qf{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Rj.slice(),t&&t.forEach(s=>{if(this.pluginsByKey[s.key])throw new RangeError("Adding different instances of a keyed plugin ("+s.key+")");this.plugins.push(s),this.pluginsByKey[s.key]=s,s.spec.state&&this.fields.push(new la(s.key,s.spec.state,s))})}}class Ll{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let s=0;s<this.config.plugins.length;s++)if(s!=t){let i=this.config.plugins[s];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],s=this.applyInner(e),i=null;for(;;){let a=!1;for(let c=0;c<this.config.plugins.length;c++){let f=this.config.plugins[c];if(f.spec.appendTransaction){let h=i?i[c].n:0,m=i?i[c].state:this,g=h<t.length&&f.spec.appendTransaction.call(f,h?t.slice(h):t,m,s);if(g&&s.filterTransaction(g,c)){if(g.setMeta("appendedTransaction",e),!i){i=[];for(let y=0;y<this.config.plugins.length;y++)i.push(y<c?{state:s,n:t.length}:{state:this,n:0})}t.push(g),s=s.applyInner(g),a=!0}i&&(i[c]={state:s,n:t.length})}}if(!a)return{state:s,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new Ll(this.config),s=this.config.fields;for(let i=0;i<s.length;i++){let a=s[i];t[a.name]=a.apply(e,this[a.name],this,t)}return t}get tr(){return new Oj(this)}static create(e){let t=new Qf(e.doc?e.doc.type.schema:e.schema,e.plugins),s=new Ll(t);for(let i=0;i<t.fields.length;i++)s[t.fields[i].name]=t.fields[i].init(e,s);return s}reconfigure(e){let t=new Qf(this.schema,e.plugins),s=t.fields,i=new Ll(t);for(let a=0;a<s.length;a++){let c=s[a].name;i[c]=this.hasOwnProperty(c)?this[c]:s[a].init(e,i)}return i}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(s=>s.toJSON())),e&&typeof e=="object")for(let s in e){if(s=="doc"||s=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[s],a=i.spec.state;a&&a.toJSON&&(t[s]=a.toJSON.call(i,this[i.key]))}return t}static fromJSON(e,t,s){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new Qf(e.schema,e.plugins),a=new Ll(i);return i.fields.forEach(c=>{if(c.name=="doc")a.doc=Yr.fromJSON(e.schema,t.doc);else if(c.name=="selection")a.selection=Se.fromJSON(a.doc,t.selection);else if(c.name=="storedMarks")t.storedMarks&&(a.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(s)for(let f in s){let h=s[f],m=h.spec.state;if(h.key==c.name&&m&&m.fromJSON&&Object.prototype.hasOwnProperty.call(t,f)){a[c.name]=m.fromJSON.call(h,e,t[f],a);return}}a[c.name]=c.init(e,a)}}),a}}function T1(n,e,t){for(let s in n){let i=n[s];i instanceof Function?i=i.bind(e):s=="handleDOMEvents"&&(i=T1(i,e,{})),t[s]=i}return t}class Nt{constructor(e){this.spec=e,this.props={},e.props&&T1(e.props,this,this.props),this.key=e.key?e.key.key:M1("plugin")}getState(e){return e[this.key]}}const Xf=Object.create(null);function M1(n){return n in Xf?n+"$"+ ++Xf[n]:(Xf[n]=0,n+"$")}class nn{constructor(e="key"){this.key=M1(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const vt=function(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e},ql=function(n){let e=n.assignedSlot||n.parentNode;return e&&e.nodeType==11?e.host:e};let Ah=null;const sr=function(n,e,t){let s=Ah||(Ah=document.createRange());return s.setEnd(n,t??n.nodeValue.length),s.setStart(n,e||0),s},Dj=function(){Ah=null},Hs=function(n,e,t,s){return t&&(ky(n,e,t,s,-1)||ky(n,e,t,s,1))},zj=/^(img|br|input|textarea|hr)$/i;function ky(n,e,t,s,i){for(var a;;){if(n==t&&e==s)return!0;if(e==(i<0?0:gn(n))){let c=n.parentNode;if(!c||c.nodeType!=1||Ra(n)||zj.test(n.nodeName)||n.contentEditable=="false")return!1;e=vt(n)+(i<0?0:1),n=c}else if(n.nodeType==1){let c=n.childNodes[e+(i<0?-1:0)];if(c.nodeType==1&&c.contentEditable=="false")if(!((a=c.pmViewDesc)===null||a===void 0)&&a.ignoreForSelection)e+=i;else return!1;else n=c,e=i<0?gn(n):0}else return!1}}function gn(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function Lj(n,e){for(;;){if(n.nodeType==3&&e)return n;if(n.nodeType==1&&e>0){if(n.contentEditable=="false")return null;n=n.childNodes[e-1],e=gn(n)}else if(n.parentNode&&!Ra(n))e=vt(n),n=n.parentNode;else return null}}function Bj(n,e){for(;;){if(n.nodeType==3&&e<n.nodeValue.length)return n;if(n.nodeType==1&&e<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[e],e=0}else if(n.parentNode&&!Ra(n))e=vt(n)+1,n=n.parentNode;else return null}}function _j(n,e,t){for(let s=e==0,i=e==gn(n);s||i;){if(n==t)return!0;let a=vt(n);if(n=n.parentNode,!n)return!1;s=s&&a==0,i=i&&a==gn(n)}}function Ra(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const uu=function(n){return n.focusNode&&Hs(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function ks(n,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=n,t.key=t.code=e,t}function Hj(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function Uj(n,e,t){if(n.caretPositionFromPoint)try{let s=n.caretPositionFromPoint(e,t);if(s)return{node:s.offsetNode,offset:Math.min(gn(s.offsetNode),s.offset)}}catch{}if(n.caretRangeFromPoint){let s=n.caretRangeFromPoint(e,t);if(s)return{node:s.startContainer,offset:Math.min(gn(s.startContainer),s.startOffset)}}}const _n=typeof navigator<"u"?navigator:null,jy=typeof document<"u"?document:null,es=_n&&_n.userAgent||"",Th=/Edge\/(\d+)/.exec(es),O1=/MSIE \d/.exec(es),Mh=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(es),qt=!!(O1||Mh||Th),Jr=O1?document.documentMode:Mh?+Mh[1]:Th?+Th[1]:0,kn=!qt&&/gecko\/(\d+)/i.test(es);kn&&+(/Firefox\/(\d+)/.exec(es)||[0,0])[1];const Oh=!qt&&/Chrome\/(\d+)/.exec(es),At=!!Oh,R1=Oh?+Oh[1]:0,Ot=!qt&&!!_n&&/Apple Computer/.test(_n.vendor),Fl=Ot&&(/Mobile\/\w+/.test(es)||!!_n&&_n.maxTouchPoints>2),pn=Fl||(_n?/Mac/.test(_n.platform):!1),Pj=_n?/Win/.test(_n.platform):!1,lr=/Android \d/.test(es),Da=!!jy&&"webkitFontSmoothing"in jy.documentElement.style,Ij=Da?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function Vj(n){let e=n.defaultView&&n.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function er(n,e){return typeof n=="number"?n:n[e]}function qj(n){let e=n.getBoundingClientRect(),t=e.width/n.offsetWidth||1,s=e.height/n.offsetHeight||1;return{left:e.left,right:e.left+n.clientWidth*t,top:e.top,bottom:e.top+n.clientHeight*s}}function Cy(n,e,t){let s=n.someProp("scrollThreshold")||0,i=n.someProp("scrollMargin")||5,a=n.dom.ownerDocument;for(let c=t||n.dom;c;){if(c.nodeType!=1){c=ql(c);continue}let f=c,h=f==a.body,m=h?Vj(a):qj(f),g=0,y=0;if(e.top<m.top+er(s,"top")?y=-(m.top-e.top+er(i,"top")):e.bottom>m.bottom-er(s,"bottom")&&(y=e.bottom-e.top>m.bottom-m.top?e.top+er(i,"top")-m.top:e.bottom-m.bottom+er(i,"bottom")),e.left<m.left+er(s,"left")?g=-(m.left-e.left+er(i,"left")):e.right>m.right-er(s,"right")&&(g=e.right-m.right+er(i,"right")),g||y)if(h)a.defaultView.scrollBy(g,y);else{let S=f.scrollLeft,v=f.scrollTop;y&&(f.scrollTop+=y),g&&(f.scrollLeft+=g);let w=f.scrollLeft-S,k=f.scrollTop-v;e={left:e.left-w,top:e.top-k,right:e.right-w,bottom:e.bottom-k}}let b=h?"fixed":getComputedStyle(c).position;if(/^(fixed|sticky)$/.test(b))break;c=b=="absolute"?c.offsetParent:ql(c)}}function Fj(n){let e=n.dom.getBoundingClientRect(),t=Math.max(0,e.top),s,i;for(let a=(e.left+e.right)/2,c=t+1;c<Math.min(innerHeight,e.bottom);c+=5){let f=n.root.elementFromPoint(a,c);if(!f||f==n.dom||!n.dom.contains(f))continue;let h=f.getBoundingClientRect();if(h.top>=t-20){s=f,i=h.top;break}}return{refDOM:s,refTop:i,stack:D1(n.dom)}}function D1(n){let e=[],t=n.ownerDocument;for(let s=n;s&&(e.push({dom:s,top:s.scrollTop,left:s.scrollLeft}),n!=t);s=ql(s));return e}function $j({refDOM:n,refTop:e,stack:t}){let s=n?n.getBoundingClientRect().top:0;z1(t,s==0?0:s-e)}function z1(n,e){for(let t=0;t<n.length;t++){let{dom:s,top:i,left:a}=n[t];s.scrollTop!=i+e&&(s.scrollTop=i+e),s.scrollLeft!=a&&(s.scrollLeft=a)}}let Tl=null;function Gj(n){if(n.setActive)return n.setActive();if(Tl)return n.focus(Tl);let e=D1(n);n.focus(Tl==null?{get preventScroll(){return Tl={preventScroll:!0},!0}}:void 0),Tl||(Tl=!1,z1(e,0))}function L1(n,e){let t,s=2e8,i,a=0,c=e.top,f=e.top,h,m;for(let g=n.firstChild,y=0;g;g=g.nextSibling,y++){let b;if(g.nodeType==1)b=g.getClientRects();else if(g.nodeType==3)b=sr(g).getClientRects();else continue;for(let S=0;S<b.length;S++){let v=b[S];if(v.top<=c&&v.bottom>=f){c=Math.max(v.bottom,c),f=Math.min(v.top,f);let w=v.left>e.left?v.left-e.left:v.right<e.left?e.left-v.right:0;if(w<s){t=g,s=w,i=w&&t.nodeType==3?{left:v.right<e.left?v.right:v.left,top:e.top}:e,g.nodeType==1&&w&&(a=y+(e.left>=(v.left+v.right)/2?1:0));continue}}else v.top>e.top&&!h&&v.left<=e.left&&v.right>=e.left&&(h=g,m={left:Math.max(v.left,Math.min(v.right,e.left)),top:v.top});!t&&(e.left>=v.right&&e.top>=v.top||e.left>=v.left&&e.top>=v.bottom)&&(a=y+1)}}return!t&&h&&(t=h,i=m,s=0),t&&t.nodeType==3?Yj(t,i):!t||s&&t.nodeType==1?{node:n,offset:a}:L1(t,i)}function Yj(n,e){let t=n.nodeValue.length,s=document.createRange();for(let i=0;i<t;i++){s.setEnd(n,i+1),s.setStart(n,i);let a=Hr(s,1);if(a.top!=a.bottom&&pm(e,a))return{node:n,offset:i+(e.left>=(a.left+a.right)/2?1:0)}}return{node:n,offset:0}}function pm(n,e){return n.left>=e.left-1&&n.left<=e.right+1&&n.top>=e.top-1&&n.top<=e.bottom+1}function Kj(n,e){let t=n.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<n.getBoundingClientRect().left?t:n}function Jj(n,e,t){let{node:s,offset:i}=L1(e,t),a=-1;if(s.nodeType==1&&!s.firstChild){let c=s.getBoundingClientRect();a=c.left!=c.right&&t.left>(c.left+c.right)/2?1:-1}return n.docView.posFromDOM(s,i,a)}function Qj(n,e,t,s){let i=-1;for(let a=e,c=!1;a!=n.dom;){let f=n.docView.nearestDesc(a,!0),h;if(!f)return null;if(f.dom.nodeType==1&&(f.node.isBlock&&f.parent||!f.contentDOM)&&((h=f.dom.getBoundingClientRect()).width||h.height)&&(f.node.isBlock&&f.parent&&(!c&&h.left>s.left||h.top>s.top?i=f.posBefore:(!c&&h.right<s.left||h.bottom<s.top)&&(i=f.posAfter),c=!0),!f.contentDOM&&i<0&&!f.node.isText))return(f.node.isBlock?s.top<(h.top+h.bottom)/2:s.left<(h.left+h.right)/2)?f.posBefore:f.posAfter;a=f.dom.parentNode}return i>-1?i:n.docView.posFromDOM(e,t,-1)}function B1(n,e,t){let s=n.childNodes.length;if(s&&t.top<t.bottom)for(let i=Math.max(0,Math.min(s-1,Math.floor(s*(e.top-t.top)/(t.bottom-t.top))-2)),a=i;;){let c=n.childNodes[a];if(c.nodeType==1){let f=c.getClientRects();for(let h=0;h<f.length;h++){let m=f[h];if(pm(e,m))return B1(c,e,m)}}if((a=(a+1)%s)==i)break}return n}function Xj(n,e){let t=n.dom.ownerDocument,s,i=0,a=Uj(t,e.left,e.top);a&&({node:s,offset:i}=a);let c=(n.root.elementFromPoint?n.root:t).elementFromPoint(e.left,e.top),f;if(!c||!n.dom.contains(c.nodeType!=1?c.parentNode:c)){let m=n.dom.getBoundingClientRect();if(!pm(e,m)||(c=B1(n.dom,e,m),!c))return null}if(Ot)for(let m=c;s&&m;m=ql(m))m.draggable&&(s=void 0);if(c=Kj(c,e),s){if(kn&&s.nodeType==1&&(i=Math.min(i,s.childNodes.length),i<s.childNodes.length)){let g=s.childNodes[i],y;g.nodeName=="IMG"&&(y=g.getBoundingClientRect()).right<=e.left&&y.bottom>e.top&&i++}let m;Da&&i&&s.nodeType==1&&(m=s.childNodes[i-1]).nodeType==1&&m.contentEditable=="false"&&m.getBoundingClientRect().top>=e.top&&i--,s==n.dom&&i==s.childNodes.length-1&&s.lastChild.nodeType==1&&e.top>s.lastChild.getBoundingClientRect().bottom?f=n.state.doc.content.size:(i==0||s.nodeType!=1||s.childNodes[i-1].nodeName!="BR")&&(f=Qj(n,s,i,e))}f==null&&(f=Jj(n,c,e));let h=n.docView.nearestDesc(c,!0);return{pos:f,inside:h?h.posAtStart-h.border:-1}}function Ey(n){return n.top<n.bottom||n.left<n.right}function Hr(n,e){let t=n.getClientRects();if(t.length){let s=t[e<0?0:t.length-1];if(Ey(s))return s}return Array.prototype.find.call(t,Ey)||n.getBoundingClientRect()}const Zj=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function _1(n,e,t){let{node:s,offset:i,atom:a}=n.docView.domFromPos(e,t<0?-1:1),c=Da||kn;if(s.nodeType==3)if(c&&(Zj.test(s.nodeValue)||(t<0?!i:i==s.nodeValue.length))){let h=Hr(sr(s,i,i),t);if(kn&&i&&/\s/.test(s.nodeValue[i-1])&&i<s.nodeValue.length){let m=Hr(sr(s,i-1,i-1),-1);if(m.top==h.top){let g=Hr(sr(s,i,i+1),-1);if(g.top!=h.top)return ea(g,g.left<m.left)}}return h}else{let h=i,m=i,g=t<0?1:-1;return t<0&&!i?(m++,g=-1):t>=0&&i==s.nodeValue.length?(h--,g=1):t<0?h--:m++,ea(Hr(sr(s,h,m),g),g<0)}if(!n.state.doc.resolve(e-(a||0)).parent.inlineContent){if(a==null&&i&&(t<0||i==gn(s))){let h=s.childNodes[i-1];if(h.nodeType==1)return Zf(h.getBoundingClientRect(),!1)}if(a==null&&i<gn(s)){let h=s.childNodes[i];if(h.nodeType==1)return Zf(h.getBoundingClientRect(),!0)}return Zf(s.getBoundingClientRect(),t>=0)}if(a==null&&i&&(t<0||i==gn(s))){let h=s.childNodes[i-1],m=h.nodeType==3?sr(h,gn(h)-(c?0:1)):h.nodeType==1&&(h.nodeName!="BR"||!h.nextSibling)?h:null;if(m)return ea(Hr(m,1),!1)}if(a==null&&i<gn(s)){let h=s.childNodes[i];for(;h.pmViewDesc&&h.pmViewDesc.ignoreForCoords;)h=h.nextSibling;let m=h?h.nodeType==3?sr(h,0,c?0:1):h.nodeType==1?h:null:null;if(m)return ea(Hr(m,-1),!0)}return ea(Hr(s.nodeType==3?sr(s):s,-t),t>=0)}function ea(n,e){if(n.width==0)return n;let t=e?n.left:n.right;return{top:n.top,bottom:n.bottom,left:t,right:t}}function Zf(n,e){if(n.height==0)return n;let t=e?n.top:n.bottom;return{top:t,bottom:t,left:n.left,right:n.right}}function H1(n,e,t){let s=n.state,i=n.root.activeElement;s!=e&&n.updateState(e),i!=n.dom&&n.focus();try{return t()}finally{s!=e&&n.updateState(s),i!=n.dom&&i&&i.focus()}}function Wj(n,e,t){let s=e.selection,i=t=="up"?s.$from:s.$to;return H1(n,e,()=>{let{node:a}=n.docView.domFromPos(i.pos,t=="up"?-1:1);for(;;){let f=n.docView.nearestDesc(a,!0);if(!f)break;if(f.node.isBlock){a=f.contentDOM||f.dom;break}a=f.dom.parentNode}let c=_1(n,i.pos,1);for(let f=a.firstChild;f;f=f.nextSibling){let h;if(f.nodeType==1)h=f.getClientRects();else if(f.nodeType==3)h=sr(f,0,f.nodeValue.length).getClientRects();else continue;for(let m=0;m<h.length;m++){let g=h[m];if(g.bottom>g.top+1&&(t=="up"?c.top-g.top>(g.bottom-c.top)*2:g.bottom-c.bottom>(c.bottom-g.top)*2))return!1}}return!0})}const eC=/[\u0590-\u08ac]/;function tC(n,e,t){let{$head:s}=e.selection;if(!s.parent.isTextblock)return!1;let i=s.parentOffset,a=!i,c=i==s.parent.content.size,f=n.domSelection();return f?!eC.test(s.parent.textContent)||!f.modify?t=="left"||t=="backward"?a:c:H1(n,e,()=>{let{focusNode:h,focusOffset:m,anchorNode:g,anchorOffset:y}=n.domSelectionRange(),b=f.caretBidiLevel;f.modify("move",t,"character");let S=s.depth?n.docView.domAfterPos(s.before()):n.dom,{focusNode:v,focusOffset:w}=n.domSelectionRange(),k=v&&!S.contains(v.nodeType==1?v:v.parentNode)||h==v&&m==w;try{f.collapse(g,y),h&&(h!=g||m!=y)&&f.extend&&f.extend(h,m)}catch{}return b!=null&&(f.caretBidiLevel=b),k}):s.pos==s.start()||s.pos==s.end()}let Ay=null,Ty=null,My=!1;function nC(n,e,t){return Ay==e&&Ty==t?My:(Ay=e,Ty=t,My=t=="up"||t=="down"?Wj(n,e,t):tC(n,e,t))}const yn=0,Oy=1,Cs=2,Hn=3;class za{constructor(e,t,s,i){this.parent=e,this.children=t,this.dom=s,this.contentDOM=i,this.dirty=yn,s.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,s){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,s=this.posAtStart;;t++){let i=this.children[t];if(i==e)return s;s+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,s){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(s<0){let a,c;if(e==this.contentDOM)a=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;a=e.previousSibling}for(;a&&!((c=a.pmViewDesc)&&c.parent==this);)a=a.previousSibling;return a?this.posBeforeChild(c)+c.size:this.posAtStart}else{let a,c;if(e==this.contentDOM)a=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;a=e.nextSibling}for(;a&&!((c=a.pmViewDesc)&&c.parent==this);)a=a.nextSibling;return a?this.posBeforeChild(c):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=t>vt(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let a=e;;a=a.parentNode){if(a==this.dom){i=!1;break}if(a.previousSibling)break}if(i==null&&t==e.childNodes.length)for(let a=e;;a=a.parentNode){if(a==this.dom){i=!0;break}if(a.nextSibling)break}}return i??s>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let s=!0,i=e;i;i=i.parentNode){let a=this.getDesc(i),c;if(a&&(!t||a.node))if(s&&(c=a.nodeDOM)&&!(c.nodeType==1?c.contains(e.nodeType==1?e:e.parentNode):c==e))s=!1;else return a}}getDesc(e){let t=e.pmViewDesc;for(let s=t;s;s=s.parent)if(s==this)return t}posFromDOM(e,t,s){for(let i=e;i;i=i.parentNode){let a=this.getDesc(i);if(a)return a.localPosFromDOM(e,t,s)}return-1}descAt(e){for(let t=0,s=0;t<this.children.length;t++){let i=this.children[t],a=s+i.size;if(s==e&&a!=s){for(;!i.border&&i.children.length;)for(let c=0;c<i.children.length;c++){let f=i.children[c];if(f.size){i=f;break}}return i}if(e<a)return i.descAt(e-s-i.border);s=a}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let s=0,i=0;for(let a=0;s<this.children.length;s++){let c=this.children[s],f=a+c.size;if(f>e||c instanceof P1){i=e-a;break}a=f}if(i)return this.children[s].domFromPos(i-this.children[s].border,t);for(let a;s&&!(a=this.children[s-1]).size&&a instanceof U1&&a.side>=0;s--);if(t<=0){let a,c=!0;for(;a=s?this.children[s-1]:null,!(!a||a.dom.parentNode==this.contentDOM);s--,c=!1);return a&&t&&c&&!a.border&&!a.domAtom?a.domFromPos(a.size,t):{node:this.contentDOM,offset:a?vt(a.dom)+1:0}}else{let a,c=!0;for(;a=s<this.children.length?this.children[s]:null,!(!a||a.dom.parentNode==this.contentDOM);s++,c=!1);return a&&c&&!a.border&&!a.domAtom?a.domFromPos(0,t):{node:this.contentDOM,offset:a?vt(a.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,s=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,a=-1;for(let c=s,f=0;;f++){let h=this.children[f],m=c+h.size;if(i==-1&&e<=m){let g=c+h.border;if(e>=g&&t<=m-h.border&&h.node&&h.contentDOM&&this.contentDOM.contains(h.contentDOM))return h.parseRange(e,t,g);e=c;for(let y=f;y>0;y--){let b=this.children[y-1];if(b.size&&b.dom.parentNode==this.contentDOM&&!b.emptyChildAt(1)){i=vt(b.dom)+1;break}e-=b.size}i==-1&&(i=0)}if(i>-1&&(m>t||f==this.children.length-1)){t=m;for(let g=f+1;g<this.children.length;g++){let y=this.children[g];if(y.size&&y.dom.parentNode==this.contentDOM&&!y.emptyChildAt(-1)){a=vt(y.dom);break}t+=y.size}a==-1&&(a=this.contentDOM.childNodes.length);break}c=m}return{node:this.contentDOM,from:e,to:t,fromOffset:i,toOffset:a}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:s}=this.domFromPos(e,0);if(t.nodeType!=1||s==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[s]}setSelection(e,t,s,i=!1){let a=Math.min(e,t),c=Math.max(e,t);for(let S=0,v=0;S<this.children.length;S++){let w=this.children[S],k=v+w.size;if(a>v&&c<k)return w.setSelection(e-v-w.border,t-v-w.border,s,i);v=k}let f=this.domFromPos(e,e?-1:1),h=t==e?f:this.domFromPos(t,t?-1:1),m=s.root.getSelection(),g=s.domSelectionRange(),y=!1;if((kn||Ot)&&e==t){let{node:S,offset:v}=f;if(S.nodeType==3){if(y=!!(v&&S.nodeValue[v-1]==`
`),y&&v==S.nodeValue.length)for(let w=S,k;w;w=w.parentNode){if(k=w.nextSibling){k.nodeName=="BR"&&(f=h={node:k.parentNode,offset:vt(k)+1});break}let E=w.pmViewDesc;if(E&&E.node&&E.node.isBlock)break}}else{let w=S.childNodes[v-1];y=w&&(w.nodeName=="BR"||w.contentEditable=="false")}}if(kn&&g.focusNode&&g.focusNode!=h.node&&g.focusNode.nodeType==1){let S=g.focusNode.childNodes[g.focusOffset];S&&S.contentEditable=="false"&&(i=!0)}if(!(i||y&&Ot)&&Hs(f.node,f.offset,g.anchorNode,g.anchorOffset)&&Hs(h.node,h.offset,g.focusNode,g.focusOffset))return;let b=!1;if((m.extend||e==t)&&!y){m.collapse(f.node,f.offset);try{e!=t&&m.extend(h.node,h.offset),b=!0}catch{}}if(!b){if(e>t){let v=f;f=h,h=v}let S=document.createRange();S.setEnd(h.node,h.offset),S.setStart(f.node,f.offset),m.removeAllRanges(),m.addRange(S)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let s=0,i=0;i<this.children.length;i++){let a=this.children[i],c=s+a.size;if(s==c?e<=c&&t>=s:e<c&&t>s){let f=s+a.border,h=c-a.border;if(e>=f&&t<=h){this.dirty=e==s||t==c?Cs:Oy,e==f&&t==h&&(a.contentLost||a.dom.parentNode!=this.contentDOM)?a.dirty=Hn:a.markDirty(e-f,t-f);return}else a.dirty=a.dom==a.contentDOM&&a.dom.parentNode==this.contentDOM&&!a.children.length?Cs:Hn}s=c}this.dirty=Cs}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let s=e==1?Cs:Oy;t.dirty<s&&(t.dirty=s)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class U1 extends za{constructor(e,t,s,i){let a,c=t.type.toDOM;if(typeof c=="function"&&(c=c(s,()=>{if(!a)return i;if(a.parent)return a.parent.posBeforeChild(a)})),!t.type.spec.raw){if(c.nodeType!=1){let f=document.createElement("span");f.appendChild(c),c=f}c.contentEditable="false",c.classList.add("ProseMirror-widget")}super(e,[],c,null),this.widget=t,this.widget=t,a=this}matchesWidget(e){return this.dirty==yn&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class rC extends za{constructor(e,t,s,i){super(e,[],t,null),this.textDOM=s,this.text=i}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Us extends za{constructor(e,t,s,i,a){super(e,[],s,i),this.mark=t,this.spec=a}static create(e,t,s,i){let a=i.nodeViews[t.type.name],c=a&&a(t,i,s);return(!c||!c.dom)&&(c=Is.renderSpec(document,t.type.spec.toDOM(t,s),null,t.attrs)),new Us(e,t,c.dom,c.contentDOM||c.dom,c)}parseRule(){return this.dirty&Hn||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Hn&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=yn){let s=this.parent;for(;!s.node;)s=s.parent;s.dirty<this.dirty&&(s.dirty=this.dirty),this.dirty=yn}}slice(e,t,s){let i=Us.create(this.parent,this.mark,!0,s),a=this.children,c=this.size;t<c&&(a=Dh(a,t,c,s)),e>0&&(a=Dh(a,0,e,s));for(let f=0;f<a.length;f++)a[f].parent=i;return i.children=a,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Qr extends za{constructor(e,t,s,i,a,c,f,h,m){super(e,[],a,c),this.node=t,this.outerDeco=s,this.innerDeco=i,this.nodeDOM=f}static create(e,t,s,i,a,c){let f=a.nodeViews[t.type.name],h,m=f&&f(t,a,()=>{if(!h)return c;if(h.parent)return h.parent.posBeforeChild(h)},s,i),g=m&&m.dom,y=m&&m.contentDOM;if(t.isText){if(!g)g=document.createTextNode(t.text);else if(g.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else g||({dom:g,contentDOM:y}=Is.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs));!y&&!t.isText&&g.nodeName!="BR"&&(g.hasAttribute("contenteditable")||(g.contentEditable="false"),t.type.spec.draggable&&(g.draggable=!0));let b=g;return g=q1(g,s,t),m?h=new sC(e,t,s,i,g,y||null,b,m,a,c+1):t.isText?new du(e,t,s,i,g,b,a):new Qr(e,t,s,i,g,y||null,b,a,c+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let s=this.children[t];if(this.dom.contains(s.dom.parentNode)){e.contentElement=s.dom.parentNode;break}}e.contentElement||(e.getContent=()=>W.empty)}return e}matchesNode(e,t,s){return this.dirty==yn&&e.eq(this.node)&&Sc(t,this.outerDeco)&&s.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let s=this.node.inlineContent,i=t,a=e.composing?this.localCompositionInfo(e,t):null,c=a&&a.pos>-1?a:null,f=a&&a.pos<0,h=new iC(this,c&&c.node,e);cC(this.node,this.innerDeco,(m,g,y)=>{m.spec.marks?h.syncToMarks(m.spec.marks,s,e):m.type.side>=0&&!y&&h.syncToMarks(g==this.node.childCount?Pe.none:this.node.child(g).marks,s,e),h.placeWidget(m,e,i)},(m,g,y,b)=>{h.syncToMarks(m.marks,s,e);let S;h.findNodeMatch(m,g,y,b)||f&&e.state.selection.from>i&&e.state.selection.to<i+m.nodeSize&&(S=h.findIndexWithChild(a.node))>-1&&h.updateNodeAt(m,g,y,S,e)||h.updateNextNode(m,g,y,e,b,i)||h.addNode(m,g,y,e,i),i+=m.nodeSize}),h.syncToMarks([],s,e),this.node.isTextblock&&h.addTextblockHacks(),h.destroyRest(),(h.changed||this.dirty==Cs)&&(c&&this.protectLocalComposition(e,c),I1(this.contentDOM,this.children,e),Fl&&uC(this.dom))}localCompositionInfo(e,t){let{from:s,to:i}=e.state.selection;if(!(e.state.selection instanceof be)||s<t||i>t+this.node.content.size)return null;let a=e.input.compositionNode;if(!a||!this.dom.contains(a.parentNode))return null;if(this.node.inlineContent){let c=a.nodeValue,f=dC(this.node.content,c,s-t,i-t);return f<0?null:{node:a,pos:f,text:c}}else return{node:a,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:s,text:i}){if(this.getDesc(t))return;let a=t;for(;a.parentNode!=this.contentDOM;a=a.parentNode){for(;a.previousSibling;)a.parentNode.removeChild(a.previousSibling);for(;a.nextSibling;)a.parentNode.removeChild(a.nextSibling);a.pmViewDesc&&(a.pmViewDesc=void 0)}let c=new rC(this,a,t,i);e.input.compositionNodes.push(c),this.children=Dh(this.children,s,s+i.length,e,c)}update(e,t,s,i){return this.dirty==Hn||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,s,i),!0)}updateInner(e,t,s,i){this.updateOuterDeco(t),this.node=e,this.innerDeco=s,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=yn}updateOuterDeco(e){if(Sc(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,s=this.dom;this.dom=V1(this.dom,this.nodeDOM,Rh(this.outerDeco,this.node,t),Rh(e,this.node,t)),this.dom!=s&&(s.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function Ry(n,e,t,s,i){q1(s,e,n);let a=new Qr(void 0,n,e,t,s,s,s,i,0);return a.contentDOM&&a.updateChildren(i,0),a}class du extends Qr{constructor(e,t,s,i,a,c,f){super(e,t,s,i,a,null,c,f,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,s,i){return this.dirty==Hn||this.dirty!=yn&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=yn||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=yn,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,s){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,s)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,s){let i=this.node.cut(e,t),a=document.createTextNode(i.text);return new du(this.parent,i,this.outerDeco,this.innerDeco,a,a,s)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=Hn)}get domAtom(){return!1}isText(e){return this.node.text==e}}class P1 extends za{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==yn&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class sC extends Qr{constructor(e,t,s,i,a,c,f,h,m,g){super(e,t,s,i,a,c,f,m,g),this.spec=h}update(e,t,s,i){if(this.dirty==Hn)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let a=this.spec.update(e,t,s);return a&&this.updateInner(e,t,s,i),a}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,s,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,s,i){this.spec.setSelection?this.spec.setSelection(e,t,s.root):super.setSelection(e,t,s,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function I1(n,e,t){let s=n.firstChild,i=!1;for(let a=0;a<e.length;a++){let c=e[a],f=c.dom;if(f.parentNode==n){for(;f!=s;)s=Dy(s),i=!0;s=s.nextSibling}else i=!0,n.insertBefore(f,s);if(c instanceof Us){let h=s?s.previousSibling:n.lastChild;I1(c.contentDOM,c.children,t),s=h?h.nextSibling:n.firstChild}}for(;s;)s=Dy(s),i=!0;i&&t.trackWrites==n&&(t.trackWrites=null)}const oa=function(n){n&&(this.nodeName=n)};oa.prototype=Object.create(null);const Es=[new oa];function Rh(n,e,t){if(n.length==0)return Es;let s=t?Es[0]:new oa,i=[s];for(let a=0;a<n.length;a++){let c=n[a].type.attrs;if(c){c.nodeName&&i.push(s=new oa(c.nodeName));for(let f in c){let h=c[f];h!=null&&(t&&i.length==1&&i.push(s=new oa(e.isInline?"span":"div")),f=="class"?s.class=(s.class?s.class+" ":"")+h:f=="style"?s.style=(s.style?s.style+";":"")+h:f!="nodeName"&&(s[f]=h))}}}return i}function V1(n,e,t,s){if(t==Es&&s==Es)return e;let i=e;for(let a=0;a<s.length;a++){let c=s[a],f=t[a];if(a){let h;f&&f.nodeName==c.nodeName&&i!=n&&(h=i.parentNode)&&h.nodeName.toLowerCase()==c.nodeName||(h=document.createElement(c.nodeName),h.pmIsDeco=!0,h.appendChild(i),f=Es[0]),i=h}lC(i,f||Es[0],c)}return i}function lC(n,e,t){for(let s in e)s!="class"&&s!="style"&&s!="nodeName"&&!(s in t)&&n.removeAttribute(s);for(let s in t)s!="class"&&s!="style"&&s!="nodeName"&&t[s]!=e[s]&&n.setAttribute(s,t[s]);if(e.class!=t.class){let s=e.class?e.class.split(" ").filter(Boolean):[],i=t.class?t.class.split(" ").filter(Boolean):[];for(let a=0;a<s.length;a++)i.indexOf(s[a])==-1&&n.classList.remove(s[a]);for(let a=0;a<i.length;a++)s.indexOf(i[a])==-1&&n.classList.add(i[a]);n.classList.length==0&&n.removeAttribute("class")}if(e.style!=t.style){if(e.style){let s=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=s.exec(e.style);)n.style.removeProperty(i[1])}t.style&&(n.style.cssText+=t.style)}}function q1(n,e,t){return V1(n,n,Es,Rh(e,t,n.nodeType!=1))}function Sc(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].type.eq(e[t].type))return!1;return!0}function Dy(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class iC{constructor(e,t,s){this.lock=t,this.view=s,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=aC(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let s=e;s<t;s++)this.top.children[s].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,s){let i=0,a=this.stack.length>>1,c=Math.min(a,e.length);for(;i<c&&(i==a-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<a;)this.destroyRest(),this.top.dirty=yn,this.index=this.stack.pop(),this.top=this.stack.pop(),a--;for(;a<e.length;){this.stack.push(this.top,this.index+1);let f=-1;for(let h=this.index;h<Math.min(this.index+3,this.top.children.length);h++){let m=this.top.children[h];if(m.matchesMark(e[a])&&!this.isLocked(m.dom)){f=h;break}}if(f>-1)f>this.index&&(this.changed=!0,this.destroyBetween(this.index,f)),this.top=this.top.children[this.index];else{let h=Us.create(this.top,e[a],t,s);this.top.children.splice(this.index,0,h),this.top=h,this.changed=!0}this.index=0,a++}}findNodeMatch(e,t,s,i){let a=-1,c;if(i>=this.preMatch.index&&(c=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&c.matchesNode(e,t,s))a=this.top.children.indexOf(c,this.index);else for(let f=this.index,h=Math.min(this.top.children.length,f+5);f<h;f++){let m=this.top.children[f];if(m.matchesNode(e,t,s)&&!this.preMatch.matched.has(m)){a=f;break}}return a<0?!1:(this.destroyBetween(this.index,a),this.index++,!0)}updateNodeAt(e,t,s,i,a){let c=this.top.children[i];return c.dirty==Hn&&c.dom==c.contentDOM&&(c.dirty=Cs),c.update(e,t,s,a)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let s=e.pmViewDesc;if(s){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==s)return i}return-1}e=t}}updateNextNode(e,t,s,i,a,c){for(let f=this.index;f<this.top.children.length;f++){let h=this.top.children[f];if(h instanceof Qr){let m=this.preMatch.matched.get(h);if(m!=null&&m!=a)return!1;let g=h.dom,y,b=this.isLocked(g)&&!(e.isText&&h.node&&h.node.isText&&h.nodeDOM.nodeValue==e.text&&h.dirty!=Hn&&Sc(t,h.outerDeco));if(!b&&h.update(e,t,s,i))return this.destroyBetween(this.index,f),h.dom!=g&&(this.changed=!0),this.index++,!0;if(!b&&(y=this.recreateWrapper(h,e,t,s,i,c)))return this.destroyBetween(this.index,f),this.top.children[this.index]=y,y.contentDOM&&(y.dirty=Cs,y.updateChildren(i,c+1),y.dirty=yn),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,s,i,a,c){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!Sc(s,e.outerDeco)||!i.eq(e.innerDeco))return null;let f=Qr.create(this.top,t,s,i,a,c);if(f.contentDOM){f.children=e.children,e.children=[];for(let h of f.children)h.parent=f}return e.destroy(),f}addNode(e,t,s,i,a){let c=Qr.create(this.top,e,t,s,i,a);c.contentDOM&&c.updateChildren(i,a+1),this.top.children.splice(this.index++,0,c),this.changed=!0}placeWidget(e,t,s){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let a=new U1(this.top,e,t,s);this.top.children.splice(this.index++,0,a),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof Us;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof du)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Ot||At)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let s=document.createElement(e);e=="IMG"&&(s.className="ProseMirror-separator",s.alt=""),e=="BR"&&(s.className="ProseMirror-trailingBreak");let i=new P1(this.top,[],s,null);t!=this.top?t.children.push(i):t.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function aC(n,e){let t=e,s=t.children.length,i=n.childCount,a=new Map,c=[];e:for(;i>0;){let f;for(;;)if(s){let m=t.children[s-1];if(m instanceof Us)t=m,s=m.children.length;else{f=m,s--;break}}else{if(t==e)break e;s=t.parent.children.indexOf(t),t=t.parent}let h=f.node;if(h){if(h!=n.child(i-1))break;--i,a.set(f,i),c.push(f)}}return{index:i,matched:a,matches:c.reverse()}}function oC(n,e){return n.type.side-e.type.side}function cC(n,e,t,s){let i=e.locals(n),a=0;if(i.length==0){for(let m=0;m<n.childCount;m++){let g=n.child(m);s(g,i,e.forChild(a,g),m),a+=g.nodeSize}return}let c=0,f=[],h=null;for(let m=0;;){let g,y;for(;c<i.length&&i[c].to==a;){let k=i[c++];k.widget&&(g?(y||(y=[g])).push(k):g=k)}if(g)if(y){y.sort(oC);for(let k=0;k<y.length;k++)t(y[k],m,!!h)}else t(g,m,!!h);let b,S;if(h)S=-1,b=h,h=null;else if(m<n.childCount)S=m,b=n.child(m++);else break;for(let k=0;k<f.length;k++)f[k].to<=a&&f.splice(k--,1);for(;c<i.length&&i[c].from<=a&&i[c].to>a;)f.push(i[c++]);let v=a+b.nodeSize;if(b.isText){let k=v;c<i.length&&i[c].from<k&&(k=i[c].from);for(let E=0;E<f.length;E++)f[E].to<k&&(k=f[E].to);k<v&&(h=b.cut(k-a),b=b.cut(0,k-a),v=k,S=-1)}else for(;c<i.length&&i[c].to<v;)c++;let w=b.isInline&&!b.isLeaf?f.filter(k=>!k.inline):f.slice();s(b,w,e.forChild(a,b),S),a=v}}function uC(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let e=n.style.cssText;n.style.cssText=e+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=e}}function dC(n,e,t,s){for(let i=0,a=0;i<n.childCount&&a<=s;){let c=n.child(i++),f=a;if(a+=c.nodeSize,!c.isText)continue;let h=c.text;for(;i<n.childCount;){let m=n.child(i++);if(a+=m.nodeSize,!m.isText)break;h+=m.text}if(a>=t){if(a>=s&&h.slice(s-e.length-f,s-f)==e)return s-e.length;let m=f<s?h.lastIndexOf(e,s-f-1):-1;if(m>=0&&m+e.length+f>=t)return f+m;if(t==s&&h.length>=s+e.length-f&&h.slice(s-f,s-f+e.length)==e)return s}}return-1}function Dh(n,e,t,s,i){let a=[];for(let c=0,f=0;c<n.length;c++){let h=n[c],m=f,g=f+=h.size;m>=t||g<=e?a.push(h):(m<e&&a.push(h.slice(0,e-m,s)),i&&(a.push(i),i=void 0),g>t&&a.push(h.slice(t-m,h.size,s)))}return a}function gm(n,e=null){let t=n.domSelectionRange(),s=n.state.doc;if(!t.focusNode)return null;let i=n.docView.nearestDesc(t.focusNode),a=i&&i.size==0,c=n.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(c<0)return null;let f=s.resolve(c),h,m;if(uu(t)){for(h=c;i&&!i.node;)i=i.parent;let y=i.node;if(i&&y.isAtom&&fe.isSelectable(y)&&i.parent&&!(y.isInline&&_j(t.focusNode,t.focusOffset,i.dom))){let b=i.posBefore;m=new fe(c==b?f:s.resolve(b))}}else{if(t instanceof n.dom.ownerDocument.defaultView.Selection&&t.rangeCount>1){let y=c,b=c;for(let S=0;S<t.rangeCount;S++){let v=t.getRangeAt(S);y=Math.min(y,n.docView.posFromDOM(v.startContainer,v.startOffset,1)),b=Math.max(b,n.docView.posFromDOM(v.endContainer,v.endOffset,-1))}if(y<0)return null;[h,c]=b==n.state.selection.anchor?[b,y]:[y,b],f=s.resolve(c)}else h=n.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(h<0)return null}let g=s.resolve(h);if(!m){let y=e=="pointer"||n.state.selection.head<f.pos&&!a?1:-1;m=xm(n,g,f,y)}return m}function F1(n){return n.editable?n.hasFocus():G1(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function or(n,e=!1){let t=n.state.selection;if($1(n,t),!!F1(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&At){let s=n.domSelectionRange(),i=n.domObserver.currentSelection;if(s.anchorNode&&i.anchorNode&&Hs(s.anchorNode,s.anchorOffset,i.anchorNode,i.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)hC(n);else{let{anchor:s,head:i}=t,a,c;zy&&!(t instanceof be)&&(t.$from.parent.inlineContent||(a=Ly(n,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(c=Ly(n,t.to))),n.docView.setSelection(s,i,n,e),zy&&(a&&By(a),c&&By(c)),t.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&fC(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const zy=Ot||At&&R1<63;function Ly(n,e){let{node:t,offset:s}=n.docView.domFromPos(e,0),i=s<t.childNodes.length?t.childNodes[s]:null,a=s?t.childNodes[s-1]:null;if(Ot&&i&&i.contentEditable=="false")return Wf(i);if((!i||i.contentEditable=="false")&&(!a||a.contentEditable=="false")){if(i)return Wf(i);if(a)return Wf(a)}}function Wf(n){return n.contentEditable="true",Ot&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function By(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function fC(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let t=n.domSelectionRange(),s=t.anchorNode,i=t.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(t.anchorNode!=s||t.anchorOffset!=i)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!F1(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function hC(n){let e=n.domSelection(),t=document.createRange();if(!e)return;let s=n.cursorWrapper.dom,i=s.nodeName=="IMG";i?t.setStart(s.parentNode,vt(s)+1):t.setStart(s,0),t.collapse(!0),e.removeAllRanges(),e.addRange(t),!i&&!n.state.selection.visible&&qt&&Jr<=11&&(s.disabled=!0,s.disabled=!1)}function $1(n,e){if(e instanceof fe){let t=n.docView.descAt(e.from);t!=n.lastSelectedViewDesc&&(_y(n),t&&t.selectNode(),n.lastSelectedViewDesc=t)}else _y(n)}function _y(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function xm(n,e,t,s){return n.someProp("createSelectionBetween",i=>i(n,e,t))||be.between(e,t,s)}function Hy(n){return n.editable&&!n.hasFocus()?!1:G1(n)}function G1(n){let e=n.domSelectionRange();if(!e.anchorNode)return!1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function mC(n){let e=n.docView.domFromPos(n.state.selection.anchor,0),t=n.domSelectionRange();return Hs(e.node,e.offset,t.anchorNode,t.anchorOffset)}function zh(n,e){let{$anchor:t,$head:s}=n.selection,i=e>0?t.max(s):t.min(s),a=i.parent.inlineContent?i.depth?n.doc.resolve(e>0?i.after():i.before()):null:i;return a&&Se.findFrom(a,e)}function Ur(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function Uy(n,e,t){let s=n.state.selection;if(s instanceof be)if(t.indexOf("s")>-1){let{$head:i}=s,a=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!a||a.isText||!a.isLeaf)return!1;let c=n.state.doc.resolve(i.pos+a.nodeSize*(e<0?-1:1));return Ur(n,new be(s.$anchor,c))}else if(s.empty){if(n.endOfTextblock(e>0?"forward":"backward")){let i=zh(n.state,e);return i&&i instanceof fe?Ur(n,i):!1}else if(!(pn&&t.indexOf("m")>-1)){let i=s.$head,a=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,c;if(!a||a.isText)return!1;let f=e<0?i.pos-a.nodeSize:i.pos;return a.isAtom||(c=n.docView.descAt(f))&&!c.contentDOM?fe.isSelectable(a)?Ur(n,new fe(e<0?n.state.doc.resolve(i.pos-a.nodeSize):i)):Da?Ur(n,new be(n.state.doc.resolve(e<0?f:f+a.nodeSize))):!1:!1}}else return!1;else{if(s instanceof fe&&s.node.isInline)return Ur(n,new be(e>0?s.$to:s.$from));{let i=zh(n.state,e);return i?Ur(n,i):!1}}}function Nc(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function ca(n,e){let t=n.pmViewDesc;return t&&t.size==0&&(e<0||n.nextSibling||n.nodeName!="BR")}function Ml(n,e){return e<0?pC(n):gC(n)}function pC(n){let e=n.domSelectionRange(),t=e.focusNode,s=e.focusOffset;if(!t)return;let i,a,c=!1;for(kn&&t.nodeType==1&&s<Nc(t)&&ca(t.childNodes[s],-1)&&(c=!0);;)if(s>0){if(t.nodeType!=1)break;{let f=t.childNodes[s-1];if(ca(f,-1))i=t,a=--s;else if(f.nodeType==3)t=f,s=t.nodeValue.length;else break}}else{if(Y1(t))break;{let f=t.previousSibling;for(;f&&ca(f,-1);)i=t.parentNode,a=vt(f),f=f.previousSibling;if(f)t=f,s=Nc(t);else{if(t=t.parentNode,t==n.dom)break;s=0}}}c?Lh(n,t,s):i&&Lh(n,i,a)}function gC(n){let e=n.domSelectionRange(),t=e.focusNode,s=e.focusOffset;if(!t)return;let i=Nc(t),a,c;for(;;)if(s<i){if(t.nodeType!=1)break;let f=t.childNodes[s];if(ca(f,1))a=t,c=++s;else break}else{if(Y1(t))break;{let f=t.nextSibling;for(;f&&ca(f,1);)a=f.parentNode,c=vt(f)+1,f=f.nextSibling;if(f)t=f,s=0,i=Nc(t);else{if(t=t.parentNode,t==n.dom)break;s=i=0}}}a&&Lh(n,a,c)}function Y1(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function xC(n,e){for(;n&&e==n.childNodes.length&&!Ra(n);)e=vt(n)+1,n=n.parentNode;for(;n&&e<n.childNodes.length;){let t=n.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=0}}function yC(n,e){for(;n&&!e&&!Ra(n);)e=vt(n),n=n.parentNode;for(;n&&e;){let t=n.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=n.childNodes.length}}function Lh(n,e,t){if(e.nodeType!=3){let a,c;(c=xC(e,t))?(e=c,t=0):(a=yC(e,t))&&(e=a,t=a.nodeValue.length)}let s=n.domSelection();if(!s)return;if(uu(s)){let a=document.createRange();a.setEnd(e,t),a.setStart(e,t),s.removeAllRanges(),s.addRange(a)}else s.extend&&s.extend(e,t);n.domObserver.setCurSelection();let{state:i}=n;setTimeout(()=>{n.state==i&&or(n)},50)}function Py(n,e){let t=n.state.doc.resolve(e);if(!(At||Pj)&&t.parent.inlineContent){let i=n.coordsAtPos(e);if(e>t.start()){let a=n.coordsAtPos(e-1),c=(a.top+a.bottom)/2;if(c>i.top&&c<i.bottom&&Math.abs(a.left-i.left)>1)return a.left<i.left?"ltr":"rtl"}if(e<t.end()){let a=n.coordsAtPos(e+1),c=(a.top+a.bottom)/2;if(c>i.top&&c<i.bottom&&Math.abs(a.left-i.left)>1)return a.left>i.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function Iy(n,e,t){let s=n.state.selection;if(s instanceof be&&!s.empty||t.indexOf("s")>-1||pn&&t.indexOf("m")>-1)return!1;let{$from:i,$to:a}=s;if(!i.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let c=zh(n.state,e);if(c&&c instanceof fe)return Ur(n,c)}if(!i.parent.inlineContent){let c=e<0?i:a,f=s instanceof tn?Se.near(c,e):Se.findFrom(c,e);return f?Ur(n,f):!1}return!1}function Vy(n,e){if(!(n.state.selection instanceof be))return!0;let{$head:t,$anchor:s,empty:i}=n.state.selection;if(!t.sameParent(s))return!0;if(!i)return!1;if(n.endOfTextblock(e>0?"forward":"backward"))return!0;let a=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(a&&!a.isText){let c=n.state.tr;return e<0?c.delete(t.pos-a.nodeSize,t.pos):c.delete(t.pos,t.pos+a.nodeSize),n.dispatch(c),!0}return!1}function qy(n,e,t){n.domObserver.stop(),e.contentEditable=t,n.domObserver.start()}function bC(n){if(!Ot||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let s=e.firstChild;qy(n,s,"true"),setTimeout(()=>qy(n,s,"false"),20)}return!1}function vC(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}function SC(n,e){let t=e.keyCode,s=vC(e);if(t==8||pn&&t==72&&s=="c")return Vy(n,-1)||Ml(n,-1);if(t==46&&!e.shiftKey||pn&&t==68&&s=="c")return Vy(n,1)||Ml(n,1);if(t==13||t==27)return!0;if(t==37||pn&&t==66&&s=="c"){let i=t==37?Py(n,n.state.selection.from)=="ltr"?-1:1:-1;return Uy(n,i,s)||Ml(n,i)}else if(t==39||pn&&t==70&&s=="c"){let i=t==39?Py(n,n.state.selection.from)=="ltr"?1:-1:1;return Uy(n,i,s)||Ml(n,i)}else{if(t==38||pn&&t==80&&s=="c")return Iy(n,-1,s)||Ml(n,-1);if(t==40||pn&&t==78&&s=="c")return bC(n)||Iy(n,1,s)||Ml(n,1);if(s==(pn?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function ym(n,e){n.someProp("transformCopied",S=>{e=S(e,n)});let t=[],{content:s,openStart:i,openEnd:a}=e;for(;i>1&&a>1&&s.childCount==1&&s.firstChild.childCount==1;){i--,a--;let S=s.firstChild;t.push(S.type.name,S.attrs!=S.type.defaultAttrs?S.attrs:null),s=S.content}let c=n.someProp("clipboardSerializer")||Is.fromSchema(n.state.schema),f=W1(),h=f.createElement("div");h.appendChild(c.serializeFragment(s,{document:f}));let m=h.firstChild,g,y=0;for(;m&&m.nodeType==1&&(g=Z1[m.nodeName.toLowerCase()]);){for(let S=g.length-1;S>=0;S--){let v=f.createElement(g[S]);for(;h.firstChild;)v.appendChild(h.firstChild);h.appendChild(v),y++}m=h.firstChild}m&&m.nodeType==1&&m.setAttribute("data-pm-slice",`${i} ${a}${y?` -${y}`:""} ${JSON.stringify(t)}`);let b=n.someProp("clipboardTextSerializer",S=>S(e,n))||e.content.textBetween(0,e.content.size,`

`);return{dom:h,text:b,slice:e}}function K1(n,e,t,s,i){let a=i.parent.type.spec.code,c,f;if(!t&&!e)return null;let h=e&&(s||a||!t);if(h){if(n.someProp("transformPastedText",b=>{e=b(e,a||s,n)}),a)return e?new ie(W.from(n.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):ie.empty;let y=n.someProp("clipboardTextParser",b=>b(e,i,s,n));if(y)f=y;else{let b=i.marks(),{schema:S}=n.state,v=Is.fromSchema(S);c=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(w=>{let k=c.appendChild(document.createElement("p"));w&&k.appendChild(v.serializeNode(S.text(w,b)))})}}else n.someProp("transformPastedHTML",y=>{t=y(t,n)}),c=jC(t),Da&&CC(c);let m=c&&c.querySelector("[data-pm-slice]"),g=m&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(m.getAttribute("data-pm-slice")||"");if(g&&g[3])for(let y=+g[3];y>0;y--){let b=c.firstChild;for(;b&&b.nodeType!=1;)b=b.nextSibling;if(!b)break;c=b}if(f||(f=(n.someProp("clipboardParser")||n.someProp("domParser")||Kr.fromSchema(n.state.schema)).parseSlice(c,{preserveWhitespace:!!(h||g),context:i,ruleFromNode(b){return b.nodeName=="BR"&&!b.nextSibling&&b.parentNode&&!NC.test(b.parentNode.nodeName)?{ignore:!0}:null}})),g)f=EC(Fy(f,+g[1],+g[2]),g[4]);else if(f=ie.maxOpen(wC(f.content,i),!0),f.openStart||f.openEnd){let y=0,b=0;for(let S=f.content.firstChild;y<f.openStart&&!S.type.spec.isolating;y++,S=S.firstChild);for(let S=f.content.lastChild;b<f.openEnd&&!S.type.spec.isolating;b++,S=S.lastChild);f=Fy(f,y,b)}return n.someProp("transformPasted",y=>{f=y(f,n)}),f}const NC=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function wC(n,e){if(n.childCount<2)return n;for(let t=e.depth;t>=0;t--){let i=e.node(t).contentMatchAt(e.index(t)),a,c=[];if(n.forEach(f=>{if(!c)return;let h=i.findWrapping(f.type),m;if(!h)return c=null;if(m=c.length&&a.length&&Q1(h,a,f,c[c.length-1],0))c[c.length-1]=m;else{c.length&&(c[c.length-1]=X1(c[c.length-1],a.length));let g=J1(f,h);c.push(g),i=i.matchType(g.type),a=h}}),c)return W.from(c)}return n}function J1(n,e,t=0){for(let s=e.length-1;s>=t;s--)n=e[s].create(null,W.from(n));return n}function Q1(n,e,t,s,i){if(i<n.length&&i<e.length&&n[i]==e[i]){let a=Q1(n,e,t,s.lastChild,i+1);if(a)return s.copy(s.content.replaceChild(s.childCount-1,a));if(s.contentMatchAt(s.childCount).matchType(i==n.length-1?t.type:n[i+1]))return s.copy(s.content.append(W.from(J1(t,n,i+1))))}}function X1(n,e){if(e==0)return n;let t=n.content.replaceChild(n.childCount-1,X1(n.lastChild,e-1)),s=n.contentMatchAt(n.childCount).fillBefore(W.empty,!0);return n.copy(t.append(s))}function Bh(n,e,t,s,i,a){let c=e<0?n.firstChild:n.lastChild,f=c.content;return n.childCount>1&&(a=0),i<s-1&&(f=Bh(f,e,t,s,i+1,a)),i>=t&&(f=e<0?c.contentMatchAt(0).fillBefore(f,a<=i).append(f):f.append(c.contentMatchAt(c.childCount).fillBefore(W.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,c.copy(f))}function Fy(n,e,t){return e<n.openStart&&(n=new ie(Bh(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),t<n.openEnd&&(n=new ie(Bh(n.content,1,t,n.openEnd,0,0),n.openStart,t)),n}const Z1={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let $y=null;function W1(){return $y||($y=document.implementation.createHTMLDocument("title"))}let eh=null;function kC(n){let e=window.trustedTypes;return e?(eh||(eh=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:t=>t})),eh.createHTML(n)):n}function jC(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let t=W1().createElement("div"),s=/<([a-z][^>\s]+)/i.exec(n),i;if((i=s&&Z1[s[1].toLowerCase()])&&(n=i.map(a=>"<"+a+">").join("")+n+i.map(a=>"</"+a+">").reverse().join("")),t.innerHTML=kC(n),i)for(let a=0;a<i.length;a++)t=t.querySelector(i[a])||t;return t}function CC(n){let e=n.querySelectorAll(At?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let s=e[t];s.childNodes.length==1&&s.textContent==" "&&s.parentNode&&s.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),s)}}function EC(n,e){if(!n.size)return n;let t=n.content.firstChild.type.schema,s;try{s=JSON.parse(e)}catch{return n}let{content:i,openStart:a,openEnd:c}=n;for(let f=s.length-2;f>=0;f-=2){let h=t.nodes[s[f]];if(!h||h.hasRequiredAttrs())break;i=W.from(h.create(s[f+1],i)),a++,c++}return new ie(i,a,c)}const Rt={},Dt={},AC={touchstart:!0,touchmove:!0};class TC{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function MC(n){for(let e in Rt){let t=Rt[e];n.dom.addEventListener(e,n.input.eventHandlers[e]=s=>{RC(n,s)&&!bm(n,s)&&(n.editable||!(s.type in Dt))&&t(n,s)},AC[e]?{passive:!0}:void 0)}Ot&&n.dom.addEventListener("input",()=>null),_h(n)}function Gr(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now()}function OC(n){n.domObserver.stop();for(let e in n.input.eventHandlers)n.dom.removeEventListener(e,n.input.eventHandlers[e]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function _h(n){n.someProp("handleDOMEvents",e=>{for(let t in e)n.input.eventHandlers[t]||n.dom.addEventListener(t,n.input.eventHandlers[t]=s=>bm(n,s))})}function bm(n,e){return n.someProp("handleDOMEvents",t=>{let s=t[e.type];return s?s(n,e)||e.defaultPrevented:!1})}function RC(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=n.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function DC(n,e){!bm(n,e)&&Rt[e.type]&&(n.editable||!(e.type in Dt))&&Rt[e.type](n,e)}Dt.keydown=(n,e)=>{let t=e;if(n.input.shiftKey=t.keyCode==16||t.shiftKey,!tv(n,t)&&(n.input.lastKeyCode=t.keyCode,n.input.lastKeyCodeTime=Date.now(),!(lr&&At&&t.keyCode==13)))if(t.keyCode!=229&&n.domObserver.forceFlush(),Fl&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let s=Date.now();n.input.lastIOSEnter=s,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==s&&(n.someProp("handleKeyDown",i=>i(n,ks(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",s=>s(n,t))||SC(n,t)?t.preventDefault():Gr(n,"key")};Dt.keyup=(n,e)=>{e.keyCode==16&&(n.input.shiftKey=!1)};Dt.keypress=(n,e)=>{let t=e;if(tv(n,t)||!t.charCode||t.ctrlKey&&!t.altKey||pn&&t.metaKey)return;if(n.someProp("handleKeyPress",i=>i(n,t))){t.preventDefault();return}let s=n.state.selection;if(!(s instanceof be)||!s.$from.sameParent(s.$to)){let i=String.fromCharCode(t.charCode),a=()=>n.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!n.someProp("handleTextInput",c=>c(n,s.$from.pos,s.$to.pos,i,a))&&n.dispatch(a()),t.preventDefault()}};function fu(n){return{left:n.clientX,top:n.clientY}}function zC(n,e){let t=e.x-n.clientX,s=e.y-n.clientY;return t*t+s*s<100}function vm(n,e,t,s,i){if(s==-1)return!1;let a=n.state.doc.resolve(s);for(let c=a.depth+1;c>0;c--)if(n.someProp(e,f=>c>a.depth?f(n,t,a.nodeAfter,a.before(c),i,!0):f(n,t,a.node(c),a.before(c),i,!1)))return!0;return!1}function Ul(n,e,t){if(n.focused||n.focus(),n.state.selection.eq(e))return;let s=n.state.tr.setSelection(e);s.setMeta("pointer",!0),n.dispatch(s)}function LC(n,e){if(e==-1)return!1;let t=n.state.doc.resolve(e),s=t.nodeAfter;return s&&s.isAtom&&fe.isSelectable(s)?(Ul(n,new fe(t)),!0):!1}function BC(n,e){if(e==-1)return!1;let t=n.state.selection,s,i;t instanceof fe&&(s=t.node);let a=n.state.doc.resolve(e);for(let c=a.depth+1;c>0;c--){let f=c>a.depth?a.nodeAfter:a.node(c);if(fe.isSelectable(f)){s&&t.$from.depth>0&&c>=t.$from.depth&&a.before(t.$from.depth+1)==t.$from.pos?i=a.before(t.$from.depth):i=a.before(c);break}}return i!=null?(Ul(n,fe.create(n.state.doc,i)),!0):!1}function _C(n,e,t,s,i){return vm(n,"handleClickOn",e,t,s)||n.someProp("handleClick",a=>a(n,e,s))||(i?BC(n,t):LC(n,t))}function HC(n,e,t,s){return vm(n,"handleDoubleClickOn",e,t,s)||n.someProp("handleDoubleClick",i=>i(n,e,s))}function UC(n,e,t,s){return vm(n,"handleTripleClickOn",e,t,s)||n.someProp("handleTripleClick",i=>i(n,e,s))||PC(n,t,s)}function PC(n,e,t){if(t.button!=0)return!1;let s=n.state.doc;if(e==-1)return s.inlineContent?(Ul(n,be.create(s,0,s.content.size)),!0):!1;let i=s.resolve(e);for(let a=i.depth+1;a>0;a--){let c=a>i.depth?i.nodeAfter:i.node(a),f=i.before(a);if(c.inlineContent)Ul(n,be.create(s,f+1,f+1+c.content.size));else if(fe.isSelectable(c))Ul(n,fe.create(s,f));else continue;return!0}}function Sm(n){return wc(n)}const ev=pn?"metaKey":"ctrlKey";Rt.mousedown=(n,e)=>{let t=e;n.input.shiftKey=t.shiftKey;let s=Sm(n),i=Date.now(),a="singleClick";i-n.input.lastClick.time<500&&zC(t,n.input.lastClick)&&!t[ev]&&n.input.lastClick.button==t.button&&(n.input.lastClick.type=="singleClick"?a="doubleClick":n.input.lastClick.type=="doubleClick"&&(a="tripleClick")),n.input.lastClick={time:i,x:t.clientX,y:t.clientY,type:a,button:t.button};let c=n.posAtCoords(fu(t));c&&(a=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new IC(n,c,t,!!s)):(a=="doubleClick"?HC:UC)(n,c.pos,c.inside,t)?t.preventDefault():Gr(n,"pointer"))};class IC{constructor(e,t,s,i){this.view=e,this.pos=t,this.event=s,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!s[ev],this.allowDefault=s.shiftKey;let a,c;if(t.inside>-1)a=e.state.doc.nodeAt(t.inside),c=t.inside;else{let g=e.state.doc.resolve(t.pos);a=g.parent,c=g.depth?g.before():0}const f=i?null:s.target,h=f?e.docView.nearestDesc(f,!0):null;this.target=h&&h.dom.nodeType==1?h.dom:null;let{selection:m}=e.state;(s.button==0&&a.type.spec.draggable&&a.type.spec.selectable!==!1||m instanceof fe&&m.from<=c&&m.to>c)&&(this.mightDrag={node:a,pos:c,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&kn&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Gr(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>or(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(fu(e))),this.updateAllowDefault(e),this.allowDefault||!t?Gr(this.view,"pointer"):_C(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Ot&&this.mightDrag&&!this.mightDrag.node.isAtom||At&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(Ul(this.view,Se.near(this.view.state.doc.resolve(t.pos))),e.preventDefault()):Gr(this.view,"pointer")}move(e){this.updateAllowDefault(e),Gr(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Rt.touchstart=n=>{n.input.lastTouch=Date.now(),Sm(n),Gr(n,"pointer")};Rt.touchmove=n=>{n.input.lastTouch=Date.now(),Gr(n,"pointer")};Rt.contextmenu=n=>Sm(n);function tv(n,e){return n.composing?!0:Ot&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const VC=lr?5e3:-1;Dt.compositionstart=Dt.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,t=e.selection.$to;if(e.selection instanceof be&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(s=>s.type.spec.inclusive===!1)))n.markCursor=n.state.storedMarks||t.marks(),wc(n,!0),n.markCursor=null;else if(wc(n,!e.selection.empty),kn&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let s=n.domSelectionRange();for(let i=s.focusNode,a=s.focusOffset;i&&i.nodeType==1&&a!=0;){let c=a<0?i.lastChild:i.childNodes[a-1];if(!c)break;if(c.nodeType==3){let f=n.domSelection();f&&f.collapse(c,c.nodeValue.length);break}else i=c,a=-1}}n.input.composing=!0}nv(n,VC)};Dt.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,n.input.compositionPendingChanges=n.domObserver.pendingRecords().length?n.input.compositionID:0,n.input.compositionNode=null,n.input.compositionPendingChanges&&Promise.resolve().then(()=>n.domObserver.flush()),n.input.compositionID++,nv(n,20))};function nv(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>wc(n),e))}function rv(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=FC());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function qC(n){let e=n.domSelectionRange();if(!e.focusNode)return null;let t=Lj(e.focusNode,e.focusOffset),s=Bj(e.focusNode,e.focusOffset);if(t&&s&&t!=s){let i=s.pmViewDesc,a=n.domObserver.lastChangedTextNode;if(t==a||s==a)return a;if(!i||!i.isText(s.nodeValue))return s;if(n.input.compositionNode==s){let c=t.pmViewDesc;if(!(!c||!c.isText(t.nodeValue)))return s}}return t||s}function FC(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function wc(n,e=!1){if(!(lr&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),rv(n),e||n.docView&&n.docView.dirty){let t=gm(n),s=n.state.selection;return t&&!t.eq(s)?n.dispatch(n.state.tr.setSelection(t)):(n.markCursor||e)&&!s.$from.node(s.$from.sharedDepth(s.to)).inlineContent?n.dispatch(n.state.tr.deleteSelection()):n.updateState(n.state),!0}return!1}}function $C(n,e){if(!n.dom.parentNode)return;let t=n.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let s=getSelection(),i=document.createRange();i.selectNodeContents(e),n.dom.blur(),s.removeAllRanges(),s.addRange(i),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),n.focus()},50)}const Sa=qt&&Jr<15||Fl&&Ij<604;Rt.copy=Dt.cut=(n,e)=>{let t=e,s=n.state.selection,i=t.type=="cut";if(s.empty)return;let a=Sa?null:t.clipboardData,c=s.content(),{dom:f,text:h}=ym(n,c);a?(t.preventDefault(),a.clearData(),a.setData("text/html",f.innerHTML),a.setData("text/plain",h)):$C(n,f),i&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function GC(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function YC(n,e){if(!n.dom.parentNode)return;let t=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,s=n.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(s.contentEditable="true"),s.style.cssText="position: fixed; left: -10000px; top: 10px",s.focus();let i=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),s.parentNode&&s.parentNode.removeChild(s),t?Na(n,s.value,null,i,e):Na(n,s.textContent,s.innerHTML,i,e)},50)}function Na(n,e,t,s,i){let a=K1(n,e,t,s,n.state.selection.$from);if(n.someProp("handlePaste",h=>h(n,i,a||ie.empty)))return!0;if(!a)return!1;let c=GC(a),f=c?n.state.tr.replaceSelectionWith(c,s):n.state.tr.replaceSelection(a);return n.dispatch(f.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function sv(n){let e=n.getData("text/plain")||n.getData("Text");if(e)return e;let t=n.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}Dt.paste=(n,e)=>{let t=e;if(n.composing&&!lr)return;let s=Sa?null:t.clipboardData,i=n.input.shiftKey&&n.input.lastKeyCode!=45;s&&Na(n,sv(s),s.getData("text/html"),i,t)?t.preventDefault():YC(n,t)};class lv{constructor(e,t,s){this.slice=e,this.move=t,this.node=s}}const KC=pn?"altKey":"ctrlKey";function iv(n,e){let t=n.someProp("dragCopies",s=>!s(e));return t??!e[KC]}Rt.dragstart=(n,e)=>{let t=e,s=n.input.mouseDown;if(s&&s.done(),!t.dataTransfer)return;let i=n.state.selection,a=i.empty?null:n.posAtCoords(fu(t)),c;if(!(a&&a.pos>=i.from&&a.pos<=(i instanceof fe?i.to-1:i.to))){if(s&&s.mightDrag)c=fe.create(n.state.doc,s.mightDrag.pos);else if(t.target&&t.target.nodeType==1){let y=n.docView.nearestDesc(t.target,!0);y&&y.node.type.spec.draggable&&y!=n.docView&&(c=fe.create(n.state.doc,y.posBefore))}}let f=(c||n.state.selection).content(),{dom:h,text:m,slice:g}=ym(n,f);(!t.dataTransfer.files.length||!At||R1>120)&&t.dataTransfer.clearData(),t.dataTransfer.setData(Sa?"Text":"text/html",h.innerHTML),t.dataTransfer.effectAllowed="copyMove",Sa||t.dataTransfer.setData("text/plain",m),n.dragging=new lv(g,iv(n,t),c)};Rt.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null)},50)};Dt.dragover=Dt.dragenter=(n,e)=>e.preventDefault();Dt.drop=(n,e)=>{let t=e,s=n.dragging;if(n.dragging=null,!t.dataTransfer)return;let i=n.posAtCoords(fu(t));if(!i)return;let a=n.state.doc.resolve(i.pos),c=s&&s.slice;c?n.someProp("transformPasted",v=>{c=v(c,n)}):c=K1(n,sv(t.dataTransfer),Sa?null:t.dataTransfer.getData("text/html"),!1,a);let f=!!(s&&iv(n,t));if(n.someProp("handleDrop",v=>v(n,t,c||ie.empty,f))){t.preventDefault();return}if(!c)return;t.preventDefault();let h=c?w1(n.state.doc,a.pos,c):a.pos;h==null&&(h=a.pos);let m=n.state.tr;if(f){let{node:v}=s;v?v.replace(m):m.deleteSelection()}let g=m.mapping.map(h),y=c.openStart==0&&c.openEnd==0&&c.content.childCount==1,b=m.doc;if(y?m.replaceRangeWith(g,g,c.content.firstChild):m.replaceRange(g,g,c),m.doc.eq(b))return;let S=m.doc.resolve(g);if(y&&fe.isSelectable(c.content.firstChild)&&S.nodeAfter&&S.nodeAfter.sameMarkup(c.content.firstChild))m.setSelection(new fe(S));else{let v=m.mapping.map(h);m.mapping.maps[m.mapping.maps.length-1].forEach((w,k,E,O)=>v=O),m.setSelection(xm(n,S,m.doc.resolve(v)))}n.focus(),n.dispatch(m.setMeta("uiEvent","drop"))};Rt.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&or(n)},20))};Rt.blur=(n,e)=>{let t=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),t.relatedTarget&&n.dom.contains(t.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};Rt.beforeinput=(n,e)=>{if(At&&lr&&e.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:s}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=s||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",a=>a(n,ks(8,"Backspace")))))return;let{$cursor:i}=n.state.selection;i&&i.pos>0&&n.dispatch(n.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let n in Dt)Rt[n]=Dt[n];function wa(n,e){if(n==e)return!0;for(let t in n)if(n[t]!==e[t])return!1;for(let t in e)if(!(t in n))return!1;return!0}class kc{constructor(e,t){this.toDOM=e,this.spec=t||Ds,this.side=this.spec.side||0}map(e,t,s,i){let{pos:a,deleted:c}=e.mapResult(t.from+i,this.side<0?-1:1);return c?null:new xn(a-s,a-s,this)}valid(){return!0}eq(e){return this==e||e instanceof kc&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&wa(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Xr{constructor(e,t){this.attrs=e,this.spec=t||Ds}map(e,t,s,i){let a=e.map(t.from+i,this.spec.inclusiveStart?-1:1)-s,c=e.map(t.to+i,this.spec.inclusiveEnd?1:-1)-s;return a>=c?null:new xn(a,c,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof Xr&&wa(this.attrs,e.attrs)&&wa(this.spec,e.spec)}static is(e){return e.type instanceof Xr}destroy(){}}class Nm{constructor(e,t){this.attrs=e,this.spec=t||Ds}map(e,t,s,i){let a=e.mapResult(t.from+i,1);if(a.deleted)return null;let c=e.mapResult(t.to+i,-1);return c.deleted||c.pos<=a.pos?null:new xn(a.pos-s,c.pos-s,this)}valid(e,t){let{index:s,offset:i}=e.content.findIndex(t.from),a;return i==t.from&&!(a=e.child(s)).isText&&i+a.nodeSize==t.to}eq(e){return this==e||e instanceof Nm&&wa(this.attrs,e.attrs)&&wa(this.spec,e.spec)}destroy(){}}class xn{constructor(e,t,s){this.from=e,this.to=t,this.type=s}copy(e,t){return new xn(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,s){return this.type.map(e,this,t,s)}static widget(e,t,s){return new xn(e,e,new kc(t,s))}static inline(e,t,s,i){return new xn(e,t,new Xr(s,i))}static node(e,t,s,i){return new xn(e,t,new Nm(s,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Xr}get widget(){return this.type instanceof kc}}const Dl=[],Ds={};class st{constructor(e,t){this.local=e.length?e:Dl,this.children=t.length?t:Dl}static create(e,t){return t.length?jc(t,e,0,Ds):Ct}find(e,t,s){let i=[];return this.findInner(e??0,t??1e9,i,0,s),i}findInner(e,t,s,i,a){for(let c=0;c<this.local.length;c++){let f=this.local[c];f.from<=t&&f.to>=e&&(!a||a(f.spec))&&s.push(f.copy(f.from+i,f.to+i))}for(let c=0;c<this.children.length;c+=3)if(this.children[c]<t&&this.children[c+1]>e){let f=this.children[c]+1;this.children[c+2].findInner(e-f,t-f,s,i+f,a)}}map(e,t,s){return this==Ct||e.maps.length==0?this:this.mapInner(e,t,0,0,s||Ds)}mapInner(e,t,s,i,a){let c;for(let f=0;f<this.local.length;f++){let h=this.local[f].map(e,s,i);h&&h.type.valid(t,h)?(c||(c=[])).push(h):a.onRemove&&a.onRemove(this.local[f].spec)}return this.children.length?JC(this.children,c||[],e,t,s,i,a):c?new st(c.sort(zs),Dl):Ct}add(e,t){return t.length?this==Ct?st.create(e,t):this.addInner(e,t,0):this}addInner(e,t,s){let i,a=0;e.forEach((f,h)=>{let m=h+s,g;if(g=ov(t,f,m)){for(i||(i=this.children.slice());a<i.length&&i[a]<h;)a+=3;i[a]==h?i[a+2]=i[a+2].addInner(f,g,m+1):i.splice(a,0,h,h+f.nodeSize,jc(g,f,m+1,Ds)),a+=3}});let c=av(a?cv(t):t,-s);for(let f=0;f<c.length;f++)c[f].type.valid(e,c[f])||c.splice(f--,1);return new st(c.length?this.local.concat(c).sort(zs):this.local,i||this.children)}remove(e){return e.length==0||this==Ct?this:this.removeInner(e,0)}removeInner(e,t){let s=this.children,i=this.local;for(let a=0;a<s.length;a+=3){let c,f=s[a]+t,h=s[a+1]+t;for(let g=0,y;g<e.length;g++)(y=e[g])&&y.from>f&&y.to<h&&(e[g]=null,(c||(c=[])).push(y));if(!c)continue;s==this.children&&(s=this.children.slice());let m=s[a+2].removeInner(c,f+1);m!=Ct?s[a+2]=m:(s.splice(a,3),a-=3)}if(i.length){for(let a=0,c;a<e.length;a++)if(c=e[a])for(let f=0;f<i.length;f++)i[f].eq(c,t)&&(i==this.local&&(i=this.local.slice()),i.splice(f--,1))}return s==this.children&&i==this.local?this:i.length||s.length?new st(i,s):Ct}forChild(e,t){if(this==Ct)return this;if(t.isLeaf)return st.empty;let s,i;for(let f=0;f<this.children.length;f+=3)if(this.children[f]>=e){this.children[f]==e&&(s=this.children[f+2]);break}let a=e+1,c=a+t.content.size;for(let f=0;f<this.local.length;f++){let h=this.local[f];if(h.from<c&&h.to>a&&h.type instanceof Xr){let m=Math.max(a,h.from)-a,g=Math.min(c,h.to)-a;m<g&&(i||(i=[])).push(h.copy(m,g))}}if(i){let f=new st(i.sort(zs),Dl);return s?new Vr([f,s]):f}return s||Ct}eq(e){if(this==e)return!0;if(!(e instanceof st)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return wm(this.localsInner(e))}localsInner(e){if(this==Ct)return Dl;if(e.inlineContent||!this.local.some(Xr.is))return this.local;let t=[];for(let s=0;s<this.local.length;s++)this.local[s].type instanceof Xr||t.push(this.local[s]);return t}forEachSet(e){e(this)}}st.empty=new st([],[]);st.removeOverlap=wm;const Ct=st.empty;class Vr{constructor(e){this.members=e}map(e,t){const s=this.members.map(i=>i.map(e,t,Ds));return Vr.from(s)}forChild(e,t){if(t.isLeaf)return st.empty;let s=[];for(let i=0;i<this.members.length;i++){let a=this.members[i].forChild(e,t);a!=Ct&&(a instanceof Vr?s=s.concat(a.members):s.push(a))}return Vr.from(s)}eq(e){if(!(e instanceof Vr)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,s=!0;for(let i=0;i<this.members.length;i++){let a=this.members[i].localsInner(e);if(a.length)if(!t)t=a;else{s&&(t=t.slice(),s=!1);for(let c=0;c<a.length;c++)t.push(a[c])}}return t?wm(s?t:t.sort(zs)):Dl}static from(e){switch(e.length){case 0:return Ct;case 1:return e[0];default:return new Vr(e.every(t=>t instanceof st)?e:e.reduce((t,s)=>t.concat(s instanceof st?s:s.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function JC(n,e,t,s,i,a,c){let f=n.slice();for(let m=0,g=a;m<t.maps.length;m++){let y=0;t.maps[m].forEach((b,S,v,w)=>{let k=w-v-(S-b);for(let E=0;E<f.length;E+=3){let O=f[E+1];if(O<0||b>O+g-y)continue;let B=f[E]+g-y;S>=B?f[E+1]=b<=B?-2:-1:b>=g&&k&&(f[E]+=k,f[E+1]+=k)}y+=k}),g=t.maps[m].map(g,-1)}let h=!1;for(let m=0;m<f.length;m+=3)if(f[m+1]<0){if(f[m+1]==-2){h=!0,f[m+1]=-1;continue}let g=t.map(n[m]+a),y=g-i;if(y<0||y>=s.content.size){h=!0;continue}let b=t.map(n[m+1]+a,-1),S=b-i,{index:v,offset:w}=s.content.findIndex(y),k=s.maybeChild(v);if(k&&w==y&&w+k.nodeSize==S){let E=f[m+2].mapInner(t,k,g+1,n[m]+a+1,c);E!=Ct?(f[m]=y,f[m+1]=S,f[m+2]=E):(f[m+1]=-2,h=!0)}else h=!0}if(h){let m=QC(f,n,e,t,i,a,c),g=jc(m,s,0,c);e=g.local;for(let y=0;y<f.length;y+=3)f[y+1]<0&&(f.splice(y,3),y-=3);for(let y=0,b=0;y<g.children.length;y+=3){let S=g.children[y];for(;b<f.length&&f[b]<S;)b+=3;f.splice(b,0,g.children[y],g.children[y+1],g.children[y+2])}}return new st(e.sort(zs),f)}function av(n,e){if(!e||!n.length)return n;let t=[];for(let s=0;s<n.length;s++){let i=n[s];t.push(new xn(i.from+e,i.to+e,i.type))}return t}function QC(n,e,t,s,i,a,c){function f(h,m){for(let g=0;g<h.local.length;g++){let y=h.local[g].map(s,i,m);y?t.push(y):c.onRemove&&c.onRemove(h.local[g].spec)}for(let g=0;g<h.children.length;g+=3)f(h.children[g+2],h.children[g]+m+1)}for(let h=0;h<n.length;h+=3)n[h+1]==-1&&f(n[h+2],e[h]+a+1);return t}function ov(n,e,t){if(e.isLeaf)return null;let s=t+e.nodeSize,i=null;for(let a=0,c;a<n.length;a++)(c=n[a])&&c.from>t&&c.to<s&&((i||(i=[])).push(c),n[a]=null);return i}function cv(n){let e=[];for(let t=0;t<n.length;t++)n[t]!=null&&e.push(n[t]);return e}function jc(n,e,t,s){let i=[],a=!1;e.forEach((f,h)=>{let m=ov(n,f,h+t);if(m){a=!0;let g=jc(m,f,t+h+1,s);g!=Ct&&i.push(h,h+f.nodeSize,g)}});let c=av(a?cv(n):n,-t).sort(zs);for(let f=0;f<c.length;f++)c[f].type.valid(e,c[f])||(s.onRemove&&s.onRemove(c[f].spec),c.splice(f--,1));return c.length||i.length?new st(c,i):Ct}function zs(n,e){return n.from-e.from||n.to-e.to}function wm(n){let e=n;for(let t=0;t<e.length-1;t++){let s=e[t];if(s.from!=s.to)for(let i=t+1;i<e.length;i++){let a=e[i];if(a.from==s.from){a.to!=s.to&&(e==n&&(e=n.slice()),e[i]=a.copy(a.from,s.to),Gy(e,i+1,a.copy(s.to,a.to)));continue}else{a.from<s.to&&(e==n&&(e=n.slice()),e[t]=s.copy(s.from,a.from),Gy(e,i,s.copy(a.from,s.to)));break}}}return e}function Gy(n,e,t){for(;e<n.length&&zs(t,n[e])>0;)e++;n.splice(e,0,t)}function th(n){let e=[];return n.someProp("decorations",t=>{let s=t(n.state);s&&s!=Ct&&e.push(s)}),n.cursorWrapper&&e.push(st.create(n.state.doc,[n.cursorWrapper.deco])),Vr.from(e)}const XC={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},ZC=qt&&Jr<=11;class WC{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class eE{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new WC,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(s=>{for(let i=0;i<s.length;i++)this.queue.push(s[i]);qt&&Jr<=11&&s.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),ZC&&(this.onCharData=s=>{this.queue.push({target:s.target,type:"characterData",oldValue:s.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,XC)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(Hy(this.view)){if(this.suppressingSelectionUpdates)return or(this.view);if(qt&&Jr<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Hs(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,s;for(let a=e.focusNode;a;a=ql(a))t.add(a);for(let a=e.anchorNode;a;a=ql(a))if(t.has(a)){s=a;break}let i=s&&this.view.docView.nearestDesc(s);if(i&&i.ignoreMutation({type:"selection",target:s.nodeType==3?s.parentNode:s}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let s=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(s)&&Hy(e)&&!this.ignoreSelectionChange(s),a=-1,c=-1,f=!1,h=[];if(e.editable)for(let g=0;g<t.length;g++){let y=this.registerMutation(t[g],h);y&&(a=a<0?y.from:Math.min(y.from,a),c=c<0?y.to:Math.max(y.to,c),y.typeOver&&(f=!0))}if(kn&&h.length){let g=h.filter(y=>y.nodeName=="BR");if(g.length==2){let[y,b]=g;y.parentNode&&y.parentNode.parentNode==b.parentNode?b.remove():y.remove()}else{let{focusNode:y}=this.currentSelection;for(let b of g){let S=b.parentNode;S&&S.nodeName=="LI"&&(!y||rE(e,y)!=S)&&b.remove()}}}let m=null;a<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&uu(s)&&(m=gm(e))&&m.eq(Se.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,or(e),this.currentSelection.set(s),e.scrollToSelection()):(a>-1||i)&&(a>-1&&(e.docView.markDirty(a,c),tE(e)),this.handleDOMChange(a,c,f,h),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(s)||or(e),this.currentSelection.set(s))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let s=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(s==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!s||s.ignoreMutation(e))return null;if(e.type=="childList"){for(let g=0;g<e.addedNodes.length;g++){let y=e.addedNodes[g];t.push(y),y.nodeType==3&&(this.lastChangedTextNode=y)}if(s.contentDOM&&s.contentDOM!=s.dom&&!s.contentDOM.contains(e.target))return{from:s.posBefore,to:s.posAfter};let i=e.previousSibling,a=e.nextSibling;if(qt&&Jr<=11&&e.addedNodes.length)for(let g=0;g<e.addedNodes.length;g++){let{previousSibling:y,nextSibling:b}=e.addedNodes[g];(!y||Array.prototype.indexOf.call(e.addedNodes,y)<0)&&(i=y),(!b||Array.prototype.indexOf.call(e.addedNodes,b)<0)&&(a=b)}let c=i&&i.parentNode==e.target?vt(i)+1:0,f=s.localPosFromDOM(e.target,c,-1),h=a&&a.parentNode==e.target?vt(a):e.target.childNodes.length,m=s.localPosFromDOM(e.target,h,1);return{from:f,to:m}}else return e.type=="attributes"?{from:s.posAtStart-s.border,to:s.posAtEnd+s.border}:(this.lastChangedTextNode=e.target,{from:s.posAtStart,to:s.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let Yy=new WeakMap,Ky=!1;function tE(n){if(!Yy.has(n)&&(Yy.set(n,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace)!==-1)){if(n.requiresGeckoHackNode=kn,Ky)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Ky=!0}}function Jy(n,e){let t=e.startContainer,s=e.startOffset,i=e.endContainer,a=e.endOffset,c=n.domAtPos(n.state.selection.anchor);return Hs(c.node,c.offset,i,a)&&([t,s,i,a]=[i,a,t,s]),{anchorNode:t,anchorOffset:s,focusNode:i,focusOffset:a}}function nE(n,e){if(e.getComposedRanges){let i=e.getComposedRanges(n.root)[0];if(i)return Jy(n,i)}let t;function s(i){i.preventDefault(),i.stopImmediatePropagation(),t=i.getTargetRanges()[0]}return n.dom.addEventListener("beforeinput",s,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",s,!0),t?Jy(n,t):null}function rE(n,e){for(let t=e.parentNode;t&&t!=n.dom;t=t.parentNode){let s=n.docView.nearestDesc(t,!0);if(s&&s.node.isBlock)return t}return null}function sE(n,e,t){let{node:s,fromOffset:i,toOffset:a,from:c,to:f}=n.docView.parseRange(e,t),h=n.domSelectionRange(),m,g=h.anchorNode;if(g&&n.dom.contains(g.nodeType==1?g:g.parentNode)&&(m=[{node:g,offset:h.anchorOffset}],uu(h)||m.push({node:h.focusNode,offset:h.focusOffset})),At&&n.input.lastKeyCode===8)for(let k=a;k>i;k--){let E=s.childNodes[k-1],O=E.pmViewDesc;if(E.nodeName=="BR"&&!O){a=k;break}if(!O||O.size)break}let y=n.state.doc,b=n.someProp("domParser")||Kr.fromSchema(n.state.schema),S=y.resolve(c),v=null,w=b.parse(s,{topNode:S.parent,topMatch:S.parent.contentMatchAt(S.index()),topOpen:!0,from:i,to:a,preserveWhitespace:S.parent.type.whitespace=="pre"?"full":!0,findPositions:m,ruleFromNode:lE,context:S});if(m&&m[0].pos!=null){let k=m[0].pos,E=m[1]&&m[1].pos;E==null&&(E=k),v={anchor:k+c,head:E+c}}return{doc:w,sel:v,from:c,to:f}}function lE(n){let e=n.pmViewDesc;if(e)return e.parseRule();if(n.nodeName=="BR"&&n.parentNode){if(Ot&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(n.parentNode.lastChild==n||Ot&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}const iE=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function aE(n,e,t,s,i){let a=n.input.compositionPendingChanges||(n.composing?n.input.compositionID:0);if(n.input.compositionPendingChanges=0,e<0){let $=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,te=gm(n,$);if(te&&!n.state.selection.eq(te)){if(At&&lr&&n.input.lastKeyCode===13&&Date.now()-100<n.input.lastKeyCodeTime&&n.someProp("handleKeyDown",ue=>ue(n,ks(13,"Enter"))))return;let se=n.state.tr.setSelection(te);$=="pointer"?se.setMeta("pointer",!0):$=="key"&&se.scrollIntoView(),a&&se.setMeta("composition",a),n.dispatch(se)}return}let c=n.state.doc.resolve(e),f=c.sharedDepth(t);e=c.before(f+1),t=n.state.doc.resolve(t).after(f+1);let h=n.state.selection,m=sE(n,e,t),g=n.state.doc,y=g.slice(m.from,m.to),b,S;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(b=n.state.selection.to,S="end"):(b=n.state.selection.from,S="start"),n.input.lastKeyCode=null;let v=uE(y.content,m.doc.content,m.from,b,S);if(v&&n.input.domChangeCount++,(Fl&&n.input.lastIOSEnter>Date.now()-225||lr)&&i.some($=>$.nodeType==1&&!iE.test($.nodeName))&&(!v||v.endA>=v.endB)&&n.someProp("handleKeyDown",$=>$(n,ks(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!v)if(s&&h instanceof be&&!h.empty&&h.$head.sameParent(h.$anchor)&&!n.composing&&!(m.sel&&m.sel.anchor!=m.sel.head))v={start:h.from,endA:h.to,endB:h.to};else{if(m.sel){let $=Qy(n,n.state.doc,m.sel);if($&&!$.eq(n.state.selection)){let te=n.state.tr.setSelection($);a&&te.setMeta("composition",a),n.dispatch(te)}}return}n.state.selection.from<n.state.selection.to&&v.start==v.endB&&n.state.selection instanceof be&&(v.start>n.state.selection.from&&v.start<=n.state.selection.from+2&&n.state.selection.from>=m.from?v.start=n.state.selection.from:v.endA<n.state.selection.to&&v.endA>=n.state.selection.to-2&&n.state.selection.to<=m.to&&(v.endB+=n.state.selection.to-v.endA,v.endA=n.state.selection.to)),qt&&Jr<=11&&v.endB==v.start+1&&v.endA==v.start&&v.start>m.from&&m.doc.textBetween(v.start-m.from-1,v.start-m.from+1)=="  "&&(v.start--,v.endA--,v.endB--);let w=m.doc.resolveNoCache(v.start-m.from),k=m.doc.resolveNoCache(v.endB-m.from),E=g.resolve(v.start),O=w.sameParent(k)&&w.parent.inlineContent&&E.end()>=v.endA,B;if((Fl&&n.input.lastIOSEnter>Date.now()-225&&(!O||i.some($=>$.nodeName=="DIV"||$.nodeName=="P"))||!O&&w.pos<m.doc.content.size&&(!w.sameParent(k)||!w.parent.inlineContent)&&!/\S/.test(m.doc.textBetween(w.pos,k.pos,"",""))&&(B=Se.findFrom(m.doc.resolve(w.pos+1),1,!0))&&B.head>w.pos)&&n.someProp("handleKeyDown",$=>$(n,ks(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>v.start&&cE(g,v.start,v.endA,w,k)&&n.someProp("handleKeyDown",$=>$(n,ks(8,"Backspace")))){lr&&At&&n.domObserver.suppressSelectionUpdates();return}At&&v.endB==v.start&&(n.input.lastChromeDelete=Date.now()),lr&&!O&&w.start()!=k.start()&&k.parentOffset==0&&w.depth==k.depth&&m.sel&&m.sel.anchor==m.sel.head&&m.sel.head==v.endA&&(v.endB-=2,k=m.doc.resolveNoCache(v.endB-m.from),setTimeout(()=>{n.someProp("handleKeyDown",function($){return $(n,ks(13,"Enter"))})},20));let q=v.start,D=v.endA,R=$=>{let te=$||n.state.tr.replace(q,D,m.doc.slice(v.start-m.from,v.endB-m.from));if(m.sel){let se=Qy(n,te.doc,m.sel);se&&!(At&&n.composing&&se.empty&&(v.start!=v.endB||n.input.lastChromeDelete<Date.now()-100)&&(se.head==q||se.head==te.mapping.map(D)-1)||qt&&se.empty&&se.head==q)&&te.setSelection(se)}return a&&te.setMeta("composition",a),te.scrollIntoView()},L;if(O){if(w.pos==k.pos){qt&&Jr<=11&&w.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>or(n),20));let $=R(n.state.tr.delete(q,D)),te=g.resolve(v.start).marksAcross(g.resolve(v.endA));te&&$.ensureMarks(te),n.dispatch($)}else if(v.endA==v.endB&&(L=oE(w.parent.content.cut(w.parentOffset,k.parentOffset),E.parent.content.cut(E.parentOffset,v.endA-E.start())))){let $=R(n.state.tr);L.type=="add"?$.addMark(q,D,L.mark):$.removeMark(q,D,L.mark),n.dispatch($)}else if(w.parent.child(w.index()).isText&&w.index()==k.index()-(k.textOffset?0:1)){let $=w.parent.textBetween(w.parentOffset,k.parentOffset),te=()=>R(n.state.tr.insertText($,q,D));n.someProp("handleTextInput",se=>se(n,q,D,$,te))||n.dispatch(te())}}else n.dispatch(R())}function Qy(n,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:xm(n,e.resolve(t.anchor),e.resolve(t.head))}function oE(n,e){let t=n.firstChild.marks,s=e.firstChild.marks,i=t,a=s,c,f,h;for(let g=0;g<s.length;g++)i=s[g].removeFromSet(i);for(let g=0;g<t.length;g++)a=t[g].removeFromSet(a);if(i.length==1&&a.length==0)f=i[0],c="add",h=g=>g.mark(f.addToSet(g.marks));else if(i.length==0&&a.length==1)f=a[0],c="remove",h=g=>g.mark(f.removeFromSet(g.marks));else return null;let m=[];for(let g=0;g<e.childCount;g++)m.push(h(e.child(g)));if(W.from(m).eq(n))return{mark:f,type:c}}function cE(n,e,t,s,i){if(t-e<=i.pos-s.pos||nh(s,!0,!1)<i.pos)return!1;let a=n.resolve(e);if(!s.parent.isTextblock){let f=a.nodeAfter;return f!=null&&t==e+f.nodeSize}if(a.parentOffset<a.parent.content.size||!a.parent.isTextblock)return!1;let c=n.resolve(nh(a,!0,!0));return!c.parent.isTextblock||c.pos>t||nh(c,!0,!1)<t?!1:s.parent.content.cut(s.parentOffset).eq(c.parent.content)}function nh(n,e,t){let s=n.depth,i=e?n.end():n.pos;for(;s>0&&(e||n.indexAfter(s)==n.node(s).childCount);)s--,i++,e=!1;if(t){let a=n.node(s).maybeChild(n.indexAfter(s));for(;a&&!a.isLeaf;)a=a.firstChild,i++}return i}function uE(n,e,t,s,i){let a=n.findDiffStart(e,t);if(a==null)return null;let{a:c,b:f}=n.findDiffEnd(e,t+n.size,t+e.size);if(i=="end"){let h=Math.max(0,a-Math.min(c,f));s-=c+h-a}if(c<a&&n.size<e.size){let h=s<=a&&s>=c?a-s:0;a-=h,a&&a<e.size&&Xy(e.textBetween(a-1,a+1))&&(a+=h?1:-1),f=a+(f-c),c=a}else if(f<a){let h=s<=a&&s>=f?a-s:0;a-=h,a&&a<n.size&&Xy(n.textBetween(a-1,a+1))&&(a+=h?1:-1),c=a+(c-f),f=a}return{start:a,endA:c,endB:f}}function Xy(n){if(n.length!=2)return!1;let e=n.charCodeAt(0),t=n.charCodeAt(1);return e>=56320&&e<=57343&&t>=55296&&t<=56319}class uv{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new TC,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(nb),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=eb(this),Wy(this),this.nodeViews=tb(this),this.docView=Ry(this.state.doc,Zy(this),th(this),this.dom,this),this.domObserver=new eE(this,(s,i,a,c)=>aE(this,s,i,a,c)),this.domObserver.start(),MC(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&_h(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(nb),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let s in this._props)t[s]=this._props[s];t.state=this.state;for(let s in e)t[s]=e[s];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var s;let i=this.state,a=!1,c=!1;e.storedMarks&&this.composing&&(rv(this),c=!0),this.state=e;let f=i.plugins!=e.plugins||this._props.plugins!=t.plugins;if(f||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let S=tb(this);fE(S,this.nodeViews)&&(this.nodeViews=S,a=!0)}(f||t.handleDOMEvents!=this._props.handleDOMEvents)&&_h(this),this.editable=eb(this),Wy(this);let h=th(this),m=Zy(this),g=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",y=a||!this.docView.matchesNode(e.doc,m,h);(y||!e.selection.eq(i.selection))&&(c=!0);let b=g=="preserve"&&c&&this.dom.style.overflowAnchor==null&&Fj(this);if(c){this.domObserver.stop();let S=y&&(qt||At)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&dE(i.selection,e.selection);if(y){let v=At?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=qC(this)),(a||!this.docView.update(e.doc,m,h,this))&&(this.docView.updateOuterDeco(m),this.docView.destroy(),this.docView=Ry(e.doc,m,h,this.dom,this)),v&&!this.trackWrites&&(S=!0)}S||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&mC(this))?or(this,S):($1(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((s=this.dragging)===null||s===void 0)&&s.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),g=="reset"?this.dom.scrollTop=0:g=="to selection"?this.scrollToSelection():b&&$j(b)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof fe){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&Cy(this,t.getBoundingClientRect(),e)}else Cy(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let s=this.directPlugins[t];s.spec.view&&this.pluginViews.push(s.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let s=this.state.plugins[t];s.spec.view&&this.pluginViews.push(s.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let s=this.pluginViews[t];s.update&&s.update(this,e)}}updateDraggedNode(e,t){let s=e.node,i=-1;if(this.state.doc.nodeAt(s.from)==s.node)i=s.from;else{let a=s.from+(this.state.doc.content.size-t.doc.content.size);(a>0&&this.state.doc.nodeAt(a))==s.node&&(i=a)}this.dragging=new lv(e.slice,e.move,i<0?void 0:fe.create(this.state.doc,i))}someProp(e,t){let s=this._props&&this._props[e],i;if(s!=null&&(i=t?t(s):s))return i;for(let c=0;c<this.directPlugins.length;c++){let f=this.directPlugins[c].props[e];if(f!=null&&(i=t?t(f):f))return i}let a=this.state.plugins;if(a)for(let c=0;c<a.length;c++){let f=a[c].props[e];if(f!=null&&(i=t?t(f):f))return i}}hasFocus(){if(qt){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&Gj(this.dom),or(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}updateRoot(){this._root=null}posAtCoords(e){return Xj(this,e)}coordsAtPos(e,t=1){return _1(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,s=-1){let i=this.docView.posFromDOM(e,t,s);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,t){return nC(this,t||this.state,e)}pasteHTML(e,t){return Na(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return Na(this,e,null,!0,t||new ClipboardEvent("paste"))}serializeForClipboard(e){return ym(this,e)}destroy(){this.docView&&(OC(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],th(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,Dj())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return DC(this,e)}domSelectionRange(){let e=this.domSelection();return e?Ot&&this.root.nodeType===11&&Hj(this.dom.ownerDocument)==this.dom&&nE(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}uv.prototype.dispatch=function(n){let e=this._props.dispatchTransaction;e?e.call(this,n):this.updateState(this.state.apply(n))};function Zy(n){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(n.editable),n.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(n.state)),t)for(let s in t)s=="class"?e.class+=" "+t[s]:s=="style"?e.style=(e.style?e.style+";":"")+t[s]:!e[s]&&s!="contenteditable"&&s!="nodeName"&&(e[s]=String(t[s]))}),e.translate||(e.translate="no"),[xn.node(0,n.state.doc.content.size,e)]}function Wy(n){if(n.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),n.cursorWrapper={dom:e,deco:xn.widget(n.state.selection.from,e,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function eb(n){return!n.someProp("editable",e=>e(n.state)===!1)}function dE(n,e){let t=Math.min(n.$anchor.sharedDepth(n.head),e.$anchor.sharedDepth(e.head));return n.$anchor.start(t)!=e.$anchor.start(t)}function tb(n){let e=Object.create(null);function t(s){for(let i in s)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=s[i])}return n.someProp("nodeViews",t),n.someProp("markViews",t),e}function fE(n,e){let t=0,s=0;for(let i in n){if(n[i]!=e[i])return!0;t++}for(let i in e)s++;return t!=s}function nb(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Zr={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Cc={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},hE=typeof navigator<"u"&&/Mac/.test(navigator.platform),mE=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var St=0;St<10;St++)Zr[48+St]=Zr[96+St]=String(St);for(var St=1;St<=24;St++)Zr[St+111]="F"+St;for(var St=65;St<=90;St++)Zr[St]=String.fromCharCode(St+32),Cc[St]=String.fromCharCode(St);for(var rh in Zr)Cc.hasOwnProperty(rh)||(Cc[rh]=Zr[rh]);function pE(n){var e=hE&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||mE&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?Cc:Zr)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}const gE=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),xE=typeof navigator<"u"&&/Win/.test(navigator.platform);function yE(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let s,i,a,c;for(let f=0;f<e.length-1;f++){let h=e[f];if(/^(cmd|meta|m)$/i.test(h))c=!0;else if(/^a(lt)?$/i.test(h))s=!0;else if(/^(c|ctrl|control)$/i.test(h))i=!0;else if(/^s(hift)?$/i.test(h))a=!0;else if(/^mod$/i.test(h))gE?c=!0:i=!0;else throw new Error("Unrecognized modifier name: "+h)}return s&&(t="Alt-"+t),i&&(t="Ctrl-"+t),c&&(t="Meta-"+t),a&&(t="Shift-"+t),t}function bE(n){let e=Object.create(null);for(let t in n)e[yE(t)]=n[t];return e}function sh(n,e,t=!0){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t&&e.shiftKey&&(n="Shift-"+n),n}function vE(n){return new Nt({props:{handleKeyDown:dv(n)}})}function dv(n){let e=bE(n);return function(t,s){let i=pE(s),a,c=e[sh(i,s)];if(c&&c(t.state,t.dispatch,t))return!0;if(i.length==1&&i!=" "){if(s.shiftKey){let f=e[sh(i,s,!1)];if(f&&f(t.state,t.dispatch,t))return!0}if((s.altKey||s.metaKey||s.ctrlKey)&&!(xE&&s.ctrlKey&&s.altKey)&&(a=Zr[s.keyCode])&&a!=i){let f=e[sh(a,s)];if(f&&f(t.state,t.dispatch,t))return!0}}return!1}}const km=(n,e)=>n.selection.empty?!1:(e&&e(n.tr.deleteSelection().scrollIntoView()),!0);function fv(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("backward",n):t.parentOffset>0)?null:t}const hv=(n,e,t)=>{let s=fv(n,t);if(!s)return!1;let i=jm(s);if(!i){let c=s.blockRange(),f=c&&Xl(c);return f==null?!1:(e&&e(n.tr.lift(c,f).scrollIntoView()),!0)}let a=i.nodeBefore;if(Nv(n,i,e,-1))return!0;if(s.parent.content.size==0&&($l(a,"end")||fe.isSelectable(a)))for(let c=s.depth;;c--){let f=ou(n.doc,s.before(c),s.after(c),ie.empty);if(f&&f.slice.size<f.to-f.from){if(e){let h=n.tr.step(f);h.setSelection($l(a,"end")?Se.findFrom(h.doc.resolve(h.mapping.map(i.pos,-1)),-1):fe.create(h.doc,i.pos-a.nodeSize)),e(h.scrollIntoView())}return!0}if(c==1||s.node(c-1).childCount>1)break}return a.isAtom&&i.depth==s.depth-1?(e&&e(n.tr.delete(i.pos-a.nodeSize,i.pos).scrollIntoView()),!0):!1},SE=(n,e,t)=>{let s=fv(n,t);if(!s)return!1;let i=jm(s);return i?mv(n,i,e):!1},NE=(n,e,t)=>{let s=gv(n,t);if(!s)return!1;let i=Cm(s);return i?mv(n,i,e):!1};function mv(n,e,t){let s=e.nodeBefore,i=s,a=e.pos-1;for(;!i.isTextblock;a--){if(i.type.spec.isolating)return!1;let g=i.lastChild;if(!g)return!1;i=g}let c=e.nodeAfter,f=c,h=e.pos+1;for(;!f.isTextblock;h++){if(f.type.spec.isolating)return!1;let g=f.firstChild;if(!g)return!1;f=g}let m=ou(n.doc,a,h,ie.empty);if(!m||m.from!=a||m instanceof dt&&m.slice.size>=h-a)return!1;if(t){let g=n.tr.step(m);g.setSelection(be.create(g.doc,a)),t(g.scrollIntoView())}return!0}function $l(n,e,t=!1){for(let s=n;s;s=e=="start"?s.firstChild:s.lastChild){if(s.isTextblock)return!0;if(t&&s.childCount!=1)return!1}return!1}const pv=(n,e,t)=>{let{$head:s,empty:i}=n.selection,a=s;if(!i)return!1;if(s.parent.isTextblock){if(t?!t.endOfTextblock("backward",n):s.parentOffset>0)return!1;a=jm(s)}let c=a&&a.nodeBefore;return!c||!fe.isSelectable(c)?!1:(e&&e(n.tr.setSelection(fe.create(n.doc,a.pos-c.nodeSize)).scrollIntoView()),!0)};function jm(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){if(n.index(e)>0)return n.doc.resolve(n.before(e+1));if(n.node(e).type.spec.isolating)break}return null}function gv(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("forward",n):t.parentOffset<t.parent.content.size)?null:t}const xv=(n,e,t)=>{let s=gv(n,t);if(!s)return!1;let i=Cm(s);if(!i)return!1;let a=i.nodeAfter;if(Nv(n,i,e,1))return!0;if(s.parent.content.size==0&&($l(a,"start")||fe.isSelectable(a))){let c=ou(n.doc,s.before(),s.after(),ie.empty);if(c&&c.slice.size<c.to-c.from){if(e){let f=n.tr.step(c);f.setSelection($l(a,"start")?Se.findFrom(f.doc.resolve(f.mapping.map(i.pos)),1):fe.create(f.doc,f.mapping.map(i.pos))),e(f.scrollIntoView())}return!0}}return a.isAtom&&i.depth==s.depth-1?(e&&e(n.tr.delete(i.pos,i.pos+a.nodeSize).scrollIntoView()),!0):!1},yv=(n,e,t)=>{let{$head:s,empty:i}=n.selection,a=s;if(!i)return!1;if(s.parent.isTextblock){if(t?!t.endOfTextblock("forward",n):s.parentOffset<s.parent.content.size)return!1;a=Cm(s)}let c=a&&a.nodeAfter;return!c||!fe.isSelectable(c)?!1:(e&&e(n.tr.setSelection(fe.create(n.doc,a.pos)).scrollIntoView()),!0)};function Cm(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){let t=n.node(e);if(n.index(e)+1<t.childCount)return n.doc.resolve(n.after(e+1));if(t.type.spec.isolating)break}return null}const wE=(n,e)=>{let t=n.selection,s=t instanceof fe,i;if(s){if(t.node.isTextblock||!Wr(n.doc,t.from))return!1;i=t.from}else if(i=au(n.doc,t.from,-1),i==null)return!1;if(e){let a=n.tr.join(i);s&&a.setSelection(fe.create(a.doc,i-n.doc.resolve(i).nodeBefore.nodeSize)),e(a.scrollIntoView())}return!0},kE=(n,e)=>{let t=n.selection,s;if(t instanceof fe){if(t.node.isTextblock||!Wr(n.doc,t.to))return!1;s=t.to}else if(s=au(n.doc,t.to,1),s==null)return!1;return e&&e(n.tr.join(s).scrollIntoView()),!0},jE=(n,e)=>{let{$from:t,$to:s}=n.selection,i=t.blockRange(s),a=i&&Xl(i);return a==null?!1:(e&&e(n.tr.lift(i,a).scrollIntoView()),!0)},bv=(n,e)=>{let{$head:t,$anchor:s}=n.selection;return!t.parent.type.spec.code||!t.sameParent(s)?!1:(e&&e(n.tr.insertText(`
`).scrollIntoView()),!0)};function Em(n){for(let e=0;e<n.edgeCount;e++){let{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const CE=(n,e)=>{let{$head:t,$anchor:s}=n.selection;if(!t.parent.type.spec.code||!t.sameParent(s))return!1;let i=t.node(-1),a=t.indexAfter(-1),c=Em(i.contentMatchAt(a));if(!c||!i.canReplaceWith(a,a,c))return!1;if(e){let f=t.after(),h=n.tr.replaceWith(f,f,c.createAndFill());h.setSelection(Se.near(h.doc.resolve(f),1)),e(h.scrollIntoView())}return!0},vv=(n,e)=>{let t=n.selection,{$from:s,$to:i}=t;if(t instanceof tn||s.parent.inlineContent||i.parent.inlineContent)return!1;let a=Em(i.parent.contentMatchAt(i.indexAfter()));if(!a||!a.isTextblock)return!1;if(e){let c=(!s.parentOffset&&i.index()<i.parent.childCount?s:i).pos,f=n.tr.insert(c,a.createAndFill());f.setSelection(be.create(f.doc,c+1)),e(f.scrollIntoView())}return!0},Sv=(n,e)=>{let{$cursor:t}=n.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let a=t.before();if(ar(n.doc,a))return e&&e(n.tr.split(a).scrollIntoView()),!0}let s=t.blockRange(),i=s&&Xl(s);return i==null?!1:(e&&e(n.tr.lift(s,i).scrollIntoView()),!0)};function EE(n){return(e,t)=>{let{$from:s,$to:i}=e.selection;if(e.selection instanceof fe&&e.selection.node.isBlock)return!s.parentOffset||!ar(e.doc,s.pos)?!1:(t&&t(e.tr.split(s.pos).scrollIntoView()),!0);if(!s.depth)return!1;let a=[],c,f,h=!1,m=!1;for(let S=s.depth;;S--)if(s.node(S).isBlock){h=s.end(S)==s.pos+(s.depth-S),m=s.start(S)==s.pos-(s.depth-S),f=Em(s.node(S-1).contentMatchAt(s.indexAfter(S-1))),a.unshift(h&&f?{type:f}:null),c=S;break}else{if(S==1)return!1;a.unshift(null)}let g=e.tr;(e.selection instanceof be||e.selection instanceof tn)&&g.deleteSelection();let y=g.mapping.map(s.pos),b=ar(g.doc,y,a.length,a);if(b||(a[0]=f?{type:f}:null,b=ar(g.doc,y,a.length,a)),!b)return!1;if(g.split(y,a.length,a),!h&&m&&s.node(c).type!=f){let S=g.mapping.map(s.before(c)),v=g.doc.resolve(S);f&&s.node(c-1).canReplaceWith(v.index(),v.index()+1,f)&&g.setNodeMarkup(g.mapping.map(s.before(c)),f)}return t&&t(g.scrollIntoView()),!0}}const AE=EE(),TE=(n,e)=>{let{$from:t,to:s}=n.selection,i,a=t.sharedDepth(s);return a==0?!1:(i=t.before(a),e&&e(n.tr.setSelection(fe.create(n.doc,i))),!0)};function ME(n,e,t){let s=e.nodeBefore,i=e.nodeAfter,a=e.index();return!s||!i||!s.type.compatibleContent(i.type)?!1:!s.content.size&&e.parent.canReplace(a-1,a)?(t&&t(n.tr.delete(e.pos-s.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(a,a+1)||!(i.isTextblock||Wr(n.doc,e.pos))?!1:(t&&t(n.tr.join(e.pos).scrollIntoView()),!0)}function Nv(n,e,t,s){let i=e.nodeBefore,a=e.nodeAfter,c,f,h=i.type.spec.isolating||a.type.spec.isolating;if(!h&&ME(n,e,t))return!0;let m=!h&&e.parent.canReplace(e.index(),e.index()+1);if(m&&(c=(f=i.contentMatchAt(i.childCount)).findWrapping(a.type))&&f.matchType(c[0]||a.type).validEnd){if(t){let S=e.pos+a.nodeSize,v=W.empty;for(let E=c.length-1;E>=0;E--)v=W.from(c[E].create(null,v));v=W.from(i.copy(v));let w=n.tr.step(new ft(e.pos-1,S,e.pos,S,new ie(v,1,0),c.length,!0)),k=w.doc.resolve(S+2*c.length);k.nodeAfter&&k.nodeAfter.type==i.type&&Wr(w.doc,k.pos)&&w.join(k.pos),t(w.scrollIntoView())}return!0}let g=a.type.spec.isolating||s>0&&h?null:Se.findFrom(e,1),y=g&&g.$from.blockRange(g.$to),b=y&&Xl(y);if(b!=null&&b>=e.depth)return t&&t(n.tr.lift(y,b).scrollIntoView()),!0;if(m&&$l(a,"start",!0)&&$l(i,"end")){let S=i,v=[];for(;v.push(S),!S.isTextblock;)S=S.lastChild;let w=a,k=1;for(;!w.isTextblock;w=w.firstChild)k++;if(S.canReplace(S.childCount,S.childCount,w.content)){if(t){let E=W.empty;for(let B=v.length-1;B>=0;B--)E=W.from(v[B].copy(E));let O=n.tr.step(new ft(e.pos-v.length,e.pos+a.nodeSize,e.pos+k,e.pos+a.nodeSize-k,new ie(E,v.length,0),0,!0));t(O.scrollIntoView())}return!0}}return!1}function wv(n){return function(e,t){let s=e.selection,i=n<0?s.$from:s.$to,a=i.depth;for(;i.node(a).isInline;){if(!a)return!1;a--}return i.node(a).isTextblock?(t&&t(e.tr.setSelection(be.create(e.doc,n<0?i.start(a):i.end(a)))),!0):!1}}const OE=wv(-1),RE=wv(1);function DE(n,e=null){return function(t,s){let{$from:i,$to:a}=t.selection,c=i.blockRange(a),f=c&&hm(c,n,e);return f?(s&&s(t.tr.wrap(c,f).scrollIntoView()),!0):!1}}function rb(n,e=null){return function(t,s){let i=!1;for(let a=0;a<t.selection.ranges.length&&!i;a++){let{$from:{pos:c},$to:{pos:f}}=t.selection.ranges[a];t.doc.nodesBetween(c,f,(h,m)=>{if(i)return!1;if(!(!h.isTextblock||h.hasMarkup(n,e)))if(h.type==n)i=!0;else{let g=t.doc.resolve(m),y=g.index();i=g.parent.canReplaceWith(y,y+1,n)}})}if(!i)return!1;if(s){let a=t.tr;for(let c=0;c<t.selection.ranges.length;c++){let{$from:{pos:f},$to:{pos:h}}=t.selection.ranges[c];a.setBlockType(f,h,n,e)}s(a.scrollIntoView())}return!0}}function Am(...n){return function(e,t,s){for(let i=0;i<n.length;i++)if(n[i](e,t,s))return!0;return!1}}Am(km,hv,pv);Am(km,xv,yv);Am(bv,vv,Sv,AE);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function zE(n,e=null){return function(t,s){let{$from:i,$to:a}=t.selection,c=i.blockRange(a);if(!c)return!1;let f=s?t.tr:null;return LE(f,c,n,e)?(s&&s(f.scrollIntoView()),!0):!1}}function LE(n,e,t,s=null){let i=!1,a=e,c=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(t)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let h=c.resolve(e.start-2);a=new bc(h,h,e.depth),e.endIndex<e.parent.childCount&&(e=new bc(e.$from,c.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let f=hm(a,t,s,e);return f?(n&&BE(n,e,f,i,t),!0):!1}function BE(n,e,t,s,i){let a=W.empty;for(let g=t.length-1;g>=0;g--)a=W.from(t[g].type.create(t[g].attrs,a));n.step(new ft(e.start-(s?2:0),e.end,e.start,e.end,new ie(a,0,0),t.length,!0));let c=0;for(let g=0;g<t.length;g++)t[g].type==i&&(c=g+1);let f=t.length-c,h=e.start+t.length-(s?2:0),m=e.parent;for(let g=e.startIndex,y=e.endIndex,b=!0;g<y;g++,b=!1)!b&&ar(n.doc,h,f)&&(n.split(h,f),h+=2*f),h+=m.child(g).nodeSize;return n}function _E(n){return function(e,t){let{$from:s,$to:i}=e.selection,a=s.blockRange(i,c=>c.childCount>0&&c.firstChild.type==n);return a?t?s.node(a.depth-1).type==n?HE(e,t,n,a):UE(e,t,a):!0:!1}}function HE(n,e,t,s){let i=n.tr,a=s.end,c=s.$to.end(s.depth);a<c&&(i.step(new ft(a-1,c,a,c,new ie(W.from(t.create(null,s.parent.copy())),1,0),1,!0)),s=new bc(i.doc.resolve(s.$from.pos),i.doc.resolve(c),s.depth));const f=Xl(s);if(f==null)return!1;i.lift(s,f);let h=i.doc.resolve(i.mapping.map(a,-1)-1);return Wr(i.doc,h.pos)&&h.nodeBefore.type==h.nodeAfter.type&&i.join(h.pos),e(i.scrollIntoView()),!0}function UE(n,e,t){let s=n.tr,i=t.parent;for(let S=t.end,v=t.endIndex-1,w=t.startIndex;v>w;v--)S-=i.child(v).nodeSize,s.delete(S-1,S+1);let a=s.doc.resolve(t.start),c=a.nodeAfter;if(s.mapping.map(t.end)!=t.start+a.nodeAfter.nodeSize)return!1;let f=t.startIndex==0,h=t.endIndex==i.childCount,m=a.node(-1),g=a.index(-1);if(!m.canReplace(g+(f?0:1),g+1,c.content.append(h?W.empty:W.from(i))))return!1;let y=a.pos,b=y+c.nodeSize;return s.step(new ft(y-(f?1:0),b+(h?1:0),y+1,b-1,new ie((f?W.empty:W.from(i.copy(W.empty))).append(h?W.empty:W.from(i.copy(W.empty))),f?0:1,h?0:1),f?0:1)),e(s.scrollIntoView()),!0}function PE(n){return function(e,t){let{$from:s,$to:i}=e.selection,a=s.blockRange(i,m=>m.childCount>0&&m.firstChild.type==n);if(!a)return!1;let c=a.startIndex;if(c==0)return!1;let f=a.parent,h=f.child(c-1);if(h.type!=n)return!1;if(t){let m=h.lastChild&&h.lastChild.type==f.type,g=W.from(m?n.create():null),y=new ie(W.from(n.create(null,W.from(f.type.create(null,g)))),m?3:1,0),b=a.start,S=a.end;t(e.tr.step(new ft(b-(m?3:1),S,b,S,y,1,!0)).scrollIntoView())}return!0}}function hu(n){const{state:e,transaction:t}=n;let{selection:s}=t,{doc:i}=t,{storedMarks:a}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return a},get selection(){return s},get doc(){return i},get tr(){return s=t.selection,i=t.doc,a=t.storedMarks,t}}}class mu{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:s}=this,{view:i}=t,{tr:a}=s,c=this.buildProps(a);return Object.fromEntries(Object.entries(e).map(([f,h])=>[f,(...g)=>{const y=h(...g)(c);return!a.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(a),y}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:s,editor:i,state:a}=this,{view:c}=i,f=[],h=!!e,m=e||a.tr,g=()=>(!h&&t&&!m.getMeta("preventDispatch")&&!this.hasCustomState&&c.dispatch(m),f.every(b=>b===!0)),y={...Object.fromEntries(Object.entries(s).map(([b,S])=>[b,(...w)=>{const k=this.buildProps(m,t),E=S(...w)(k);return f.push(E),y}])),run:g};return y}createCan(e){const{rawCommands:t,state:s}=this,i=!1,a=e||s.tr,c=this.buildProps(a,i);return{...Object.fromEntries(Object.entries(t).map(([h,m])=>[h,(...g)=>m(...g)({...c,dispatch:void 0})])),chain:()=>this.createChain(a,i)}}buildProps(e,t=!0){const{rawCommands:s,editor:i,state:a}=this,{view:c}=i,f={tr:e,editor:i,view:c,state:hu({state:a,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(s).map(([h,m])=>[h,(...g)=>m(...g)(f)]))}};return f}}class IE{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const s=this.callbacks[e];return s&&s.forEach(i=>i.apply(this,t)),this}off(e,t){const s=this.callbacks[e];return s&&(t?this.callbacks[e]=s.filter(i=>i!==t):delete this.callbacks[e]),this}once(e,t){const s=(...i)=>{this.off(e,s),t.apply(this,i)};return this.on(e,s)}removeAllListeners(){this.callbacks={}}}function ce(n,e,t){return n.config[e]===void 0&&n.parent?ce(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?ce(n.parent,e,t):null}):n.config[e]}function pu(n){const e=n.filter(i=>i.type==="extension"),t=n.filter(i=>i.type==="node"),s=n.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:s}}function kv(n){const e=[],{nodeExtensions:t,markExtensions:s}=pu(n),i=[...t,...s],a={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return n.forEach(c=>{const f={name:c.name,options:c.options,storage:c.storage,extensions:i},h=ce(c,"addGlobalAttributes",f);if(!h)return;h().forEach(g=>{g.types.forEach(y=>{Object.entries(g.attributes).forEach(([b,S])=>{e.push({type:y,name:b,attribute:{...a,...S}})})})})}),i.forEach(c=>{const f={name:c.name,options:c.options,storage:c.storage},h=ce(c,"addAttributes",f);if(!h)return;const m=h();Object.entries(m).forEach(([g,y])=>{const b={...a,...y};typeof(b==null?void 0:b.default)=="function"&&(b.default=b.default()),b!=null&&b.isRequired&&(b==null?void 0:b.default)===void 0&&delete b.default,e.push({type:c.name,name:g,attribute:b})})}),e}function mt(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}function pt(...n){return n.filter(e=>!!e).reduce((e,t)=>{const s={...e};return Object.entries(t).forEach(([i,a])=>{if(!s[i]){s[i]=a;return}if(i==="class"){const f=a?String(a).split(" "):[],h=s[i]?s[i].split(" "):[],m=f.filter(g=>!h.includes(g));s[i]=[...h,...m].join(" ")}else if(i==="style"){const f=a?a.split(";").map(g=>g.trim()).filter(Boolean):[],h=s[i]?s[i].split(";").map(g=>g.trim()).filter(Boolean):[],m=new Map;h.forEach(g=>{const[y,b]=g.split(":").map(S=>S.trim());m.set(y,b)}),f.forEach(g=>{const[y,b]=g.split(":").map(S=>S.trim());m.set(y,b)}),s[i]=Array.from(m.entries()).map(([g,y])=>`${g}: ${y}`).join("; ")}else s[i]=a}),s},{})}function Hh(n,e){return e.filter(t=>t.type===n.type.name).filter(t=>t.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(n.attrs)||{}:{[t.name]:n.attrs[t.name]}).reduce((t,s)=>pt(t,s),{})}function jv(n){return typeof n=="function"}function ke(n,e=void 0,...t){return jv(n)?e?n.bind(e)(...t):n(...t):n}function VE(n={}){return Object.keys(n).length===0&&n.constructor===Object}function qE(n){return typeof n!="string"?n:n.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(n):n==="true"?!0:n==="false"?!1:n}function sb(n,e){return"style"in n?n:{...n,getAttrs:t=>{const s=n.getAttrs?n.getAttrs(t):n.attrs;if(s===!1)return!1;const i=e.reduce((a,c)=>{const f=c.attribute.parseHTML?c.attribute.parseHTML(t):qE(t.getAttribute(c.name));return f==null?a:{...a,[c.name]:f}},{});return{...s,...i}}}}function lb(n){return Object.fromEntries(Object.entries(n).filter(([e,t])=>e==="attrs"&&VE(t)?!1:t!=null))}function FE(n,e){var t;const s=kv(n),{nodeExtensions:i,markExtensions:a}=pu(n),c=(t=i.find(m=>ce(m,"topNode")))===null||t===void 0?void 0:t.name,f=Object.fromEntries(i.map(m=>{const g=s.filter(E=>E.type===m.name),y={name:m.name,options:m.options,storage:m.storage,editor:e},b=n.reduce((E,O)=>{const B=ce(O,"extendNodeSchema",y);return{...E,...B?B(m):{}}},{}),S=lb({...b,content:ke(ce(m,"content",y)),marks:ke(ce(m,"marks",y)),group:ke(ce(m,"group",y)),inline:ke(ce(m,"inline",y)),atom:ke(ce(m,"atom",y)),selectable:ke(ce(m,"selectable",y)),draggable:ke(ce(m,"draggable",y)),code:ke(ce(m,"code",y)),whitespace:ke(ce(m,"whitespace",y)),linebreakReplacement:ke(ce(m,"linebreakReplacement",y)),defining:ke(ce(m,"defining",y)),isolating:ke(ce(m,"isolating",y)),attrs:Object.fromEntries(g.map(E=>{var O;return[E.name,{default:(O=E==null?void 0:E.attribute)===null||O===void 0?void 0:O.default}]}))}),v=ke(ce(m,"parseHTML",y));v&&(S.parseDOM=v.map(E=>sb(E,g)));const w=ce(m,"renderHTML",y);w&&(S.toDOM=E=>w({node:E,HTMLAttributes:Hh(E,g)}));const k=ce(m,"renderText",y);return k&&(S.toText=k),[m.name,S]})),h=Object.fromEntries(a.map(m=>{const g=s.filter(k=>k.type===m.name),y={name:m.name,options:m.options,storage:m.storage,editor:e},b=n.reduce((k,E)=>{const O=ce(E,"extendMarkSchema",y);return{...k,...O?O(m):{}}},{}),S=lb({...b,inclusive:ke(ce(m,"inclusive",y)),excludes:ke(ce(m,"excludes",y)),group:ke(ce(m,"group",y)),spanning:ke(ce(m,"spanning",y)),code:ke(ce(m,"code",y)),attrs:Object.fromEntries(g.map(k=>{var E;return[k.name,{default:(E=k==null?void 0:k.attribute)===null||E===void 0?void 0:E.default}]}))}),v=ke(ce(m,"parseHTML",y));v&&(S.parseDOM=v.map(k=>sb(k,g)));const w=ce(m,"renderHTML",y);return w&&(S.toDOM=k=>w({mark:k,HTMLAttributes:Hh(k,g)})),[m.name,S]}));return new f1({topNode:c,nodes:f,marks:h})}function lh(n,e){return e.nodes[n]||e.marks[n]||null}function ib(n,e){return Array.isArray(e)?e.some(t=>(typeof t=="string"?t:t.name)===n.name):e}function Tm(n,e){const t=Is.fromSchema(e).serializeFragment(n),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(t),i.innerHTML}const $E=(n,e=500)=>{let t="";const s=n.parentOffset;return n.parent.nodesBetween(Math.max(0,s-e),s,(i,a,c,f)=>{var h,m;const g=((m=(h=i.type.spec).toText)===null||m===void 0?void 0:m.call(h,{node:i,pos:a,parent:c,index:f}))||i.textContent||"%leaf%";t+=i.isAtom&&!i.isText?g:g.slice(0,Math.max(0,s-a))}),t};function Mm(n){return Object.prototype.toString.call(n)==="[object RegExp]"}class gu{constructor(e){this.find=e.find,this.handler=e.handler}}const GE=(n,e)=>{if(Mm(e))return e.exec(n);const t=e(n);if(!t)return null;const s=[t.text];return s.index=t.index,s.input=n,s.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),s.push(t.replaceWith)),s};function Wo(n){var e;const{editor:t,from:s,to:i,text:a,rules:c,plugin:f}=n,{view:h}=t;if(h.composing)return!1;const m=h.state.doc.resolve(s);if(m.parent.type.spec.code||!((e=m.nodeBefore||m.nodeAfter)===null||e===void 0)&&e.marks.find(b=>b.type.spec.code))return!1;let g=!1;const y=$E(m)+a;return c.forEach(b=>{if(g)return;const S=GE(y,b.find);if(!S)return;const v=h.state.tr,w=hu({state:h.state,transaction:v}),k={from:s-(S[0].length-a.length),to:i},{commands:E,chain:O,can:B}=new mu({editor:t,state:w});b.handler({state:w,range:k,match:S,commands:E,chain:O,can:B})===null||!v.steps.length||(v.setMeta(f,{transform:v,from:s,to:i,text:a}),h.dispatch(v),g=!0)}),g}function YE(n){const{editor:e,rules:t}=n,s=new Nt({state:{init(){return null},apply(i,a,c){const f=i.getMeta(s);if(f)return f;const h=i.getMeta("applyInputRules");return!!h&&setTimeout(()=>{let{text:g}=h;typeof g=="string"?g=g:g=Tm(W.from(g),c.schema);const{from:y}=h,b=y+g.length;Wo({editor:e,from:y,to:b,text:g,rules:t,plugin:s})}),i.selectionSet||i.docChanged?null:a}},props:{handleTextInput(i,a,c,f){return Wo({editor:e,from:a,to:c,text:f,rules:t,plugin:s})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:a}=i.state.selection;a&&Wo({editor:e,from:a.pos,to:a.pos,text:"",rules:t,plugin:s})}),!1)},handleKeyDown(i,a){if(a.key!=="Enter")return!1;const{$cursor:c}=i.state.selection;return c?Wo({editor:e,from:c.pos,to:c.pos,text:`
`,rules:t,plugin:s}):!1}},isInputRules:!0});return s}function KE(n){return Object.prototype.toString.call(n).slice(8,-1)}function ec(n){return KE(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function xu(n,e){const t={...n};return ec(n)&&ec(e)&&Object.keys(e).forEach(s=>{ec(e[s])&&ec(n[s])?t[s]=xu(n[s],e[s]):t[s]=e[s]}),t}class ur{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ke(ce(this,"addOptions",{name:this.name}))),this.storage=ke(ce(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new ur(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>xu(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new ur(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=ke(ce(t,"addOptions",{name:t.name})),t.storage=ke(ce(t,"addStorage",{name:t.name,options:t.options})),t}static handleExit({editor:e,mark:t}){const{tr:s}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const c=i.marks();if(!!!c.find(m=>(m==null?void 0:m.type.name)===t.name))return!1;const h=c.find(m=>(m==null?void 0:m.type.name)===t.name);return h&&s.removeStoredMark(h),s.insertText(" ",i.pos),e.view.dispatch(s),!0}return!1}}function JE(n){return typeof n=="number"}class QE{constructor(e){this.find=e.find,this.handler=e.handler}}const XE=(n,e,t)=>{if(Mm(e))return[...n.matchAll(e)];const s=e(n,t);return s?s.map(i=>{const a=[i.text];return a.index=i.index,a.input=n,a.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),a.push(i.replaceWith)),a}):[]};function ZE(n){const{editor:e,state:t,from:s,to:i,rule:a,pasteEvent:c,dropEvent:f}=n,{commands:h,chain:m,can:g}=new mu({editor:e,state:t}),y=[];return t.doc.nodesBetween(s,i,(S,v)=>{if(!S.isTextblock||S.type.spec.code)return;const w=Math.max(s,v),k=Math.min(i,v+S.content.size),E=S.textBetween(w-v,k-v,void 0,"￼");XE(E,a.find,c).forEach(B=>{if(B.index===void 0)return;const q=w+B.index+1,D=q+B[0].length,R={from:t.tr.mapping.map(q),to:t.tr.mapping.map(D)},L=a.handler({state:t,range:R,match:B,commands:h,chain:m,can:g,pasteEvent:c,dropEvent:f});y.push(L)})}),y.every(S=>S!==null)}let tc=null;const WE=n=>{var e;const t=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=t.clipboardData)===null||e===void 0||e.setData("text/html",n),t};function e4(n){const{editor:e,rules:t}=n;let s=null,i=!1,a=!1,c=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,f;try{f=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{f=null}const h=({state:g,from:y,to:b,rule:S,pasteEvt:v})=>{const w=g.tr,k=hu({state:g,transaction:w});if(!(!ZE({editor:e,state:k,from:Math.max(y-1,0),to:b.b-1,rule:S,pasteEvent:v,dropEvent:f})||!w.steps.length)){try{f=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{f=null}return c=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,w}};return t.map(g=>new Nt({view(y){const b=v=>{var w;s=!((w=y.dom.parentElement)===null||w===void 0)&&w.contains(v.target)?y.dom.parentElement:null,s&&(tc=e)},S=()=>{tc&&(tc=null)};return window.addEventListener("dragstart",b),window.addEventListener("dragend",S),{destroy(){window.removeEventListener("dragstart",b),window.removeEventListener("dragend",S)}}},props:{handleDOMEvents:{drop:(y,b)=>{if(a=s===y.dom.parentElement,f=b,!a){const S=tc;S&&setTimeout(()=>{const v=S.state.selection;v&&S.commands.deleteRange({from:v.from,to:v.to})},10)}return!1},paste:(y,b)=>{var S;const v=(S=b.clipboardData)===null||S===void 0?void 0:S.getData("text/html");return c=b,i=!!(v!=null&&v.includes("data-pm-slice")),!1}}},appendTransaction:(y,b,S)=>{const v=y[0],w=v.getMeta("uiEvent")==="paste"&&!i,k=v.getMeta("uiEvent")==="drop"&&!a,E=v.getMeta("applyPasteRules"),O=!!E;if(!w&&!k&&!O)return;if(O){let{text:D}=E;typeof D=="string"?D=D:D=Tm(W.from(D),S.schema);const{from:R}=E,L=R+D.length,$=WE(D);return h({rule:g,state:S,from:R,to:{b:L},pasteEvt:$})}const B=b.doc.content.findDiffStart(S.doc.content),q=b.doc.content.findDiffEnd(S.doc.content);if(!(!JE(B)||!q||B===q.b))return h({rule:g,state:S,from:B,to:q,pasteEvt:c})}}))}function t4(n){const e=n.filter((t,s)=>n.indexOf(t)!==s);return Array.from(new Set(e))}class Bl{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=Bl.resolve(e),this.schema=FE(this.extensions,t),this.setupExtensions()}static resolve(e){const t=Bl.sort(Bl.flatten(e)),s=t4(t.map(i=>i.name));return s.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${s.map(i=>`'${i}'`).join(", ")}]. This can lead to issues.`),t}static flatten(e){return e.map(t=>{const s={name:t.name,options:t.options,storage:t.storage},i=ce(t,"addExtensions",s);return i?[t,...this.flatten(i())]:t}).flat(10)}static sort(e){return e.sort((s,i)=>{const a=ce(s,"priority")||100,c=ce(i,"priority")||100;return a>c?-1:a<c?1:0})}get commands(){return this.extensions.reduce((e,t)=>{const s={name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:lh(t.name,this.schema)},i=ce(t,"addCommands",s);return i?{...e,...i()}:e},{})}get plugins(){const{editor:e}=this,t=Bl.sort([...this.extensions].reverse()),s=[],i=[],a=t.map(c=>{const f={name:c.name,options:c.options,storage:c.storage,editor:e,type:lh(c.name,this.schema)},h=[],m=ce(c,"addKeyboardShortcuts",f);let g={};if(c.type==="mark"&&ce(c,"exitable",f)&&(g.ArrowRight=()=>ur.handleExit({editor:e,mark:c})),m){const w=Object.fromEntries(Object.entries(m()).map(([k,E])=>[k,()=>E({editor:e})]));g={...g,...w}}const y=vE(g);h.push(y);const b=ce(c,"addInputRules",f);ib(c,e.options.enableInputRules)&&b&&s.push(...b());const S=ce(c,"addPasteRules",f);ib(c,e.options.enablePasteRules)&&S&&i.push(...S());const v=ce(c,"addProseMirrorPlugins",f);if(v){const w=v();h.push(...w)}return h}).flat();return[YE({editor:e,rules:s}),...e4({editor:e,rules:i}),...a]}get attributes(){return kv(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=pu(this.extensions);return Object.fromEntries(t.filter(s=>!!ce(s,"addNodeView")).map(s=>{const i=this.attributes.filter(h=>h.type===s.name),a={name:s.name,options:s.options,storage:s.storage,editor:e,type:mt(s.name,this.schema)},c=ce(s,"addNodeView",a);if(!c)return[];const f=(h,m,g,y,b)=>{const S=Hh(h,i);return c()({node:h,view:m,getPos:g,decorations:y,innerDecorations:b,editor:e,extension:s,HTMLAttributes:S})};return[s.name,f]}))}setupExtensions(){this.extensions.forEach(e=>{var t;this.editor.extensionStorage[e.name]=e.storage;const s={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:lh(e.name,this.schema)};e.type==="mark"&&(!((t=ke(ce(e,"keepOnSplit",s)))!==null&&t!==void 0)||t)&&this.splittableMarks.push(e.name);const i=ce(e,"onBeforeCreate",s),a=ce(e,"onCreate",s),c=ce(e,"onUpdate",s),f=ce(e,"onSelectionUpdate",s),h=ce(e,"onTransaction",s),m=ce(e,"onFocus",s),g=ce(e,"onBlur",s),y=ce(e,"onDestroy",s);i&&this.editor.on("beforeCreate",i),a&&this.editor.on("create",a),c&&this.editor.on("update",c),f&&this.editor.on("selectionUpdate",f),h&&this.editor.on("transaction",h),m&&this.editor.on("focus",m),g&&this.editor.on("blur",g),y&&this.editor.on("destroy",y)})}}class zt{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ke(ce(this,"addOptions",{name:this.name}))),this.storage=ke(ce(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new zt(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>xu(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new zt({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=ke(ce(t,"addOptions",{name:t.name})),t.storage=ke(ce(t,"addStorage",{name:t.name,options:t.options})),t}}function Cv(n,e,t){const{from:s,to:i}=e,{blockSeparator:a=`

`,textSerializers:c={}}=t||{};let f="";return n.nodesBetween(s,i,(h,m,g,y)=>{var b;h.isBlock&&m>s&&(f+=a);const S=c==null?void 0:c[h.type.name];if(S)return g&&(f+=S({node:h,pos:m,parent:g,index:y,range:e})),!1;h.isText&&(f+=(b=h==null?void 0:h.text)===null||b===void 0?void 0:b.slice(Math.max(s,m)-m,i-m))}),f}function Ev(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}const n4=zt.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Nt({key:new nn("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:s,selection:i}=e,{ranges:a}=i,c=Math.min(...a.map(g=>g.$from.pos)),f=Math.max(...a.map(g=>g.$to.pos)),h=Ev(t);return Cv(s,{from:c,to:f},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:h})}}})]}}),r4=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())===null||t===void 0||t.removeAllRanges())}),!0),s4=(n=!1)=>({commands:e})=>e.setContent("",n),l4=()=>({state:n,tr:e,dispatch:t})=>{const{selection:s}=e,{ranges:i}=s;return t&&i.forEach(({$from:a,$to:c})=>{n.doc.nodesBetween(a.pos,c.pos,(f,h)=>{if(f.type.isText)return;const{doc:m,mapping:g}=e,y=m.resolve(g.map(h)),b=m.resolve(g.map(h+f.nodeSize)),S=y.blockRange(b);if(!S)return;const v=Xl(S);if(f.type.isTextblock){const{defaultType:w}=y.parent.contentMatchAt(y.index());e.setNodeMarkup(S.start,w)}(v||v===0)&&e.lift(S,v)})}),!0},i4=n=>e=>n(e),a4=()=>({state:n,dispatch:e})=>vv(n,e),o4=(n,e)=>({editor:t,tr:s})=>{const{state:i}=t,a=i.doc.slice(n.from,n.to);s.deleteRange(n.from,n.to);const c=s.mapping.map(e);return s.insert(c,a.content),s.setSelection(new be(s.doc.resolve(c-1))),!0},c4=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,s=t.$anchor.node();if(s.content.size>0)return!1;const i=n.selection.$anchor;for(let a=i.depth;a>0;a-=1)if(i.node(a).type===s.type){if(e){const f=i.before(a),h=i.after(a);n.delete(f,h).scrollIntoView()}return!0}return!1},u4=n=>({tr:e,state:t,dispatch:s})=>{const i=mt(n,t.schema),a=e.selection.$anchor;for(let c=a.depth;c>0;c-=1)if(a.node(c).type===i){if(s){const h=a.before(c),m=a.after(c);e.delete(h,m).scrollIntoView()}return!0}return!1},d4=n=>({tr:e,dispatch:t})=>{const{from:s,to:i}=n;return t&&e.delete(s,i),!0},f4=()=>({state:n,dispatch:e})=>km(n,e),h4=()=>({commands:n})=>n.keyboardShortcut("Enter"),m4=()=>({state:n,dispatch:e})=>CE(n,e);function Ec(n,e,t={strict:!0}){const s=Object.keys(e);return s.length?s.every(i=>t.strict?e[i]===n[i]:Mm(e[i])?e[i].test(n[i]):e[i]===n[i]):!0}function Av(n,e,t={}){return n.find(s=>s.type===e&&Ec(Object.fromEntries(Object.keys(t).map(i=>[i,s.attrs[i]])),t))}function ab(n,e,t={}){return!!Av(n,e,t)}function Om(n,e,t){var s;if(!n||!e)return;let i=n.parent.childAfter(n.parentOffset);if((!i.node||!i.node.marks.some(g=>g.type===e))&&(i=n.parent.childBefore(n.parentOffset)),!i.node||!i.node.marks.some(g=>g.type===e)||(t=t||((s=i.node.marks[0])===null||s===void 0?void 0:s.attrs),!Av([...i.node.marks],e,t)))return;let c=i.index,f=n.start()+i.offset,h=c+1,m=f+i.node.nodeSize;for(;c>0&&ab([...n.parent.child(c-1).marks],e,t);)c-=1,f-=n.parent.child(c).nodeSize;for(;h<n.parent.childCount&&ab([...n.parent.child(h).marks],e,t);)m+=n.parent.child(h).nodeSize,h+=1;return{from:f,to:m}}function ts(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}const p4=(n,e={})=>({tr:t,state:s,dispatch:i})=>{const a=ts(n,s.schema),{doc:c,selection:f}=t,{$from:h,from:m,to:g}=f;if(i){const y=Om(h,a,e);if(y&&y.from<=m&&y.to>=g){const b=be.create(c,y.from,y.to);t.setSelection(b)}}return!0},g4=n=>e=>{const t=typeof n=="function"?n(e):n;for(let s=0;s<t.length;s+=1)if(t[s](e))return!0;return!1};function Tv(n){return n instanceof be}function As(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function Mv(n,e=null){if(!e)return null;const t=Se.atStart(n),s=Se.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return s;const i=t.from,a=s.to;return e==="all"?be.create(n,As(0,i,a),As(n.content.size,i,a)):be.create(n,As(e,i,a),As(e,i,a))}function x4(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function Rm(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const y4=(n=null,e={})=>({editor:t,view:s,tr:i,dispatch:a})=>{e={scrollIntoView:!0,...e};const c=()=>{(Rm()||x4())&&s.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(s.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};if(s.hasFocus()&&n===null||n===!1)return!0;if(a&&n===null&&!Tv(t.state.selection))return c(),!0;const f=Mv(i.doc,n)||t.state.selection,h=t.state.selection.eq(f);return a&&(h||i.setSelection(f),h&&i.storedMarks&&i.setStoredMarks(i.storedMarks),c()),!0},b4=(n,e)=>t=>n.every((s,i)=>e(s,{...t,index:i})),v4=(n,e)=>({tr:t,commands:s})=>s.insertContentAt({from:t.selection.from,to:t.selection.to},n,e),Ov=n=>{const e=n.childNodes;for(let t=e.length-1;t>=0;t-=1){const s=e[t];s.nodeType===3&&s.nodeValue&&/^(\n\s\s|\n)$/.test(s.nodeValue)?n.removeChild(s):s.nodeType===1&&Ov(s)}return n};function nc(n){const e=`<body>${n}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return Ov(t)}function ka(n,e,t){if(n instanceof Yr||n instanceof W)return n;t={slice:!0,parseOptions:{},...t};const s=typeof n=="object"&&n!==null,i=typeof n=="string";if(s)try{if(Array.isArray(n)&&n.length>0)return W.fromArray(n.map(f=>e.nodeFromJSON(f)));const c=e.nodeFromJSON(n);return t.errorOnInvalidContent&&c.check(),c}catch(a){if(t.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:a});return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",a),ka("",e,t)}if(i){if(t.errorOnInvalidContent){let c=!1,f="";const h=new f1({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:m=>(c=!0,f=typeof m=="string"?m:m.outerHTML,null)}]}})});if(t.slice?Kr.fromSchema(h).parseSlice(nc(n),t.parseOptions):Kr.fromSchema(h).parse(nc(n),t.parseOptions),t.errorOnInvalidContent&&c)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${f}`)})}const a=Kr.fromSchema(e);return t.slice?a.parseSlice(nc(n),t.parseOptions).content:a.parse(nc(n),t.parseOptions)}return ka("",e,t)}function S4(n,e,t){const s=n.steps.length-1;if(s<e)return;const i=n.steps[s];if(!(i instanceof dt||i instanceof ft))return;const a=n.mapping.maps[s];let c=0;a.forEach((f,h,m,g)=>{c===0&&(c=g)}),n.setSelection(Se.near(n.doc.resolve(c),t))}const N4=n=>!("type"in n),w4=(n,e,t)=>({tr:s,dispatch:i,editor:a})=>{var c;if(i){t={parseOptions:a.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...t};let f;const h=k=>{a.emit("contentError",{editor:a,error:k,disableCollaboration:()=>{a.storage.collaboration&&(a.storage.collaboration.isDisabled=!0)}})},m={preserveWhitespace:"full",...t.parseOptions};if(!t.errorOnInvalidContent&&!a.options.enableContentCheck&&a.options.emitContentError)try{ka(e,a.schema,{parseOptions:m,errorOnInvalidContent:!0})}catch(k){h(k)}try{f=ka(e,a.schema,{parseOptions:m,errorOnInvalidContent:(c=t.errorOnInvalidContent)!==null&&c!==void 0?c:a.options.enableContentCheck})}catch(k){return h(k),!1}let{from:g,to:y}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},b=!0,S=!0;if((N4(f)?f:[f]).forEach(k=>{k.check(),b=b?k.isText&&k.marks.length===0:!1,S=S?k.isBlock:!1}),g===y&&S){const{parent:k}=s.doc.resolve(g);k.isTextblock&&!k.type.spec.code&&!k.childCount&&(g-=1,y+=1)}let w;if(b){if(Array.isArray(e))w=e.map(k=>k.text||"").join("");else if(e instanceof W){let k="";e.forEach(E=>{E.text&&(k+=E.text)}),w=k}else typeof e=="object"&&e&&e.text?w=e.text:w=e;s.insertText(w,g,y)}else w=f,s.replaceWith(g,y,w);t.updateSelection&&S4(s,s.steps.length-1,-1),t.applyInputRules&&s.setMeta("applyInputRules",{from:g,text:w}),t.applyPasteRules&&s.setMeta("applyPasteRules",{from:g,text:w})}return!0},k4=()=>({state:n,dispatch:e})=>wE(n,e),j4=()=>({state:n,dispatch:e})=>kE(n,e),C4=()=>({state:n,dispatch:e})=>hv(n,e),E4=()=>({state:n,dispatch:e})=>xv(n,e),A4=()=>({state:n,dispatch:e,tr:t})=>{try{const s=au(n.doc,n.selection.$from.pos,-1);return s==null?!1:(t.join(s,2),e&&e(t),!0)}catch{return!1}},T4=()=>({state:n,dispatch:e,tr:t})=>{try{const s=au(n.doc,n.selection.$from.pos,1);return s==null?!1:(t.join(s,2),e&&e(t),!0)}catch{return!1}},M4=()=>({state:n,dispatch:e})=>SE(n,e),O4=()=>({state:n,dispatch:e})=>NE(n,e);function Rv(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function R4(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let s,i,a,c;for(let f=0;f<e.length-1;f+=1){const h=e[f];if(/^(cmd|meta|m)$/i.test(h))c=!0;else if(/^a(lt)?$/i.test(h))s=!0;else if(/^(c|ctrl|control)$/i.test(h))i=!0;else if(/^s(hift)?$/i.test(h))a=!0;else if(/^mod$/i.test(h))Rm()||Rv()?c=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${h}`)}return s&&(t=`Alt-${t}`),i&&(t=`Ctrl-${t}`),c&&(t=`Meta-${t}`),a&&(t=`Shift-${t}`),t}const D4=n=>({editor:e,view:t,tr:s,dispatch:i})=>{const a=R4(n).split(/-(?!$)/),c=a.find(m=>!["Alt","Ctrl","Meta","Shift"].includes(m)),f=new KeyboardEvent("keydown",{key:c==="Space"?" ":c,altKey:a.includes("Alt"),ctrlKey:a.includes("Ctrl"),metaKey:a.includes("Meta"),shiftKey:a.includes("Shift"),bubbles:!0,cancelable:!0}),h=e.captureTransaction(()=>{t.someProp("handleKeyDown",m=>m(t,f))});return h==null||h.steps.forEach(m=>{const g=m.map(s.mapping);g&&i&&s.maybeStep(g)}),!0};function ja(n,e,t={}){const{from:s,to:i,empty:a}=n.selection,c=e?mt(e,n.schema):null,f=[];n.doc.nodesBetween(s,i,(y,b)=>{if(y.isText)return;const S=Math.max(s,b),v=Math.min(i,b+y.nodeSize);f.push({node:y,from:S,to:v})});const h=i-s,m=f.filter(y=>c?c.name===y.node.type.name:!0).filter(y=>Ec(y.node.attrs,t,{strict:!1}));return a?!!m.length:m.reduce((y,b)=>y+b.to-b.from,0)>=h}const z4=(n,e={})=>({state:t,dispatch:s})=>{const i=mt(n,t.schema);return ja(t,i,e)?jE(t,s):!1},L4=()=>({state:n,dispatch:e})=>Sv(n,e),B4=n=>({state:e,dispatch:t})=>{const s=mt(n,e.schema);return _E(s)(e,t)},_4=()=>({state:n,dispatch:e})=>bv(n,e);function yu(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function ob(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((s,i)=>(t.includes(i)||(s[i]=n[i]),s),{})}const H4=(n,e)=>({tr:t,state:s,dispatch:i})=>{let a=null,c=null;const f=yu(typeof n=="string"?n:n.name,s.schema);return f?(f==="node"&&(a=mt(n,s.schema)),f==="mark"&&(c=ts(n,s.schema)),i&&t.selection.ranges.forEach(h=>{s.doc.nodesBetween(h.$from.pos,h.$to.pos,(m,g)=>{a&&a===m.type&&t.setNodeMarkup(g,void 0,ob(m.attrs,e)),c&&m.marks.length&&m.marks.forEach(y=>{c===y.type&&t.addMark(g,g+m.nodeSize,c.create(ob(y.attrs,e)))})})}),!0):!1},U4=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),P4=()=>({tr:n,dispatch:e})=>{if(e){const t=new tn(n.doc);n.setSelection(t)}return!0},I4=()=>({state:n,dispatch:e})=>pv(n,e),V4=()=>({state:n,dispatch:e})=>yv(n,e),q4=()=>({state:n,dispatch:e})=>TE(n,e),F4=()=>({state:n,dispatch:e})=>RE(n,e),$4=()=>({state:n,dispatch:e})=>OE(n,e);function Uh(n,e,t={},s={}){return ka(n,e,{slice:!1,parseOptions:t,errorOnInvalidContent:s.errorOnInvalidContent})}const G4=(n,e=!1,t={},s={})=>({editor:i,tr:a,dispatch:c,commands:f})=>{var h,m;const{doc:g}=a;if(t.preserveWhitespace!=="full"){const y=Uh(n,i.schema,t,{errorOnInvalidContent:(h=s.errorOnInvalidContent)!==null&&h!==void 0?h:i.options.enableContentCheck});return c&&a.replaceWith(0,g.content.size,y).setMeta("preventUpdate",!e),!0}return c&&a.setMeta("preventUpdate",!e),f.insertContentAt({from:0,to:g.content.size},n,{parseOptions:t,errorOnInvalidContent:(m=s.errorOnInvalidContent)!==null&&m!==void 0?m:i.options.enableContentCheck})};function Dv(n,e){const t=ts(e,n.schema),{from:s,to:i,empty:a}=n.selection,c=[];a?(n.storedMarks&&c.push(...n.storedMarks),c.push(...n.selection.$head.marks())):n.doc.nodesBetween(s,i,h=>{c.push(...h.marks)});const f=c.find(h=>h.type.name===t.name);return f?{...f.attrs}:{}}function Y4(n,e){const t=new A1(n);return e.forEach(s=>{s.steps.forEach(i=>{t.step(i)})}),t}function K4(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function J4(n,e,t){const s=[];return n.nodesBetween(e.from,e.to,(i,a)=>{t(i)&&s.push({node:i,pos:a})}),s}function Q4(n,e){for(let t=n.depth;t>0;t-=1){const s=n.node(t);if(e(s))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:s}}}function Dm(n){return e=>Q4(e.$from,n)}function X4(n,e){const t={from:0,to:n.content.size};return Cv(n,t,e)}function Z4(n,e){const t=mt(e,n.schema),{from:s,to:i}=n.selection,a=[];n.doc.nodesBetween(s,i,f=>{a.push(f)});const c=a.reverse().find(f=>f.type.name===t.name);return c?{...c.attrs}:{}}function zv(n,e){const t=yu(typeof e=="string"?e:e.name,n.schema);return t==="node"?Z4(n,e):t==="mark"?Dv(n,e):{}}function W4(n,e=JSON.stringify){const t={};return n.filter(s=>{const i=e(s);return Object.prototype.hasOwnProperty.call(t,i)?!1:t[i]=!0})}function e3(n){const e=W4(n);return e.length===1?e:e.filter((t,s)=>!e.filter((a,c)=>c!==s).some(a=>t.oldRange.from>=a.oldRange.from&&t.oldRange.to<=a.oldRange.to&&t.newRange.from>=a.newRange.from&&t.newRange.to<=a.newRange.to))}function t3(n){const{mapping:e,steps:t}=n,s=[];return e.maps.forEach((i,a)=>{const c=[];if(i.ranges.length)i.forEach((f,h)=>{c.push({from:f,to:h})});else{const{from:f,to:h}=t[a];if(f===void 0||h===void 0)return;c.push({from:f,to:h})}c.forEach(({from:f,to:h})=>{const m=e.slice(a).map(f,-1),g=e.slice(a).map(h),y=e.invert().map(m,-1),b=e.invert().map(g);s.push({oldRange:{from:y,to:b},newRange:{from:m,to:g}})})}),e3(s)}function zm(n,e,t){const s=[];return n===e?t.resolve(n).marks().forEach(i=>{const a=t.resolve(n),c=Om(a,i.type);c&&s.push({mark:i,...c})}):t.nodesBetween(n,e,(i,a)=>{!i||(i==null?void 0:i.nodeSize)===void 0||s.push(...i.marks.map(c=>({from:a,to:a+i.nodeSize,mark:c})))}),s}function fc(n,e,t){return Object.fromEntries(Object.entries(t).filter(([s])=>{const i=n.find(a=>a.type===e&&a.name===s);return i?i.attribute.keepOnSplit:!1}))}function Ph(n,e,t={}){const{empty:s,ranges:i}=n.selection,a=e?ts(e,n.schema):null;if(s)return!!(n.storedMarks||n.selection.$from.marks()).filter(y=>a?a.name===y.type.name:!0).find(y=>Ec(y.attrs,t,{strict:!1}));let c=0;const f=[];if(i.forEach(({$from:y,$to:b})=>{const S=y.pos,v=b.pos;n.doc.nodesBetween(S,v,(w,k)=>{if(!w.isText&&!w.marks.length)return;const E=Math.max(S,k),O=Math.min(v,k+w.nodeSize),B=O-E;c+=B,f.push(...w.marks.map(q=>({mark:q,from:E,to:O})))})}),c===0)return!1;const h=f.filter(y=>a?a.name===y.mark.type.name:!0).filter(y=>Ec(y.mark.attrs,t,{strict:!1})).reduce((y,b)=>y+b.to-b.from,0),m=f.filter(y=>a?y.mark.type!==a&&y.mark.type.excludes(a):!0).reduce((y,b)=>y+b.to-b.from,0);return(h>0?h+m:h)>=c}function n3(n,e,t={}){if(!e)return ja(n,null,t)||Ph(n,null,t);const s=yu(e,n.schema);return s==="node"?ja(n,e,t):s==="mark"?Ph(n,e,t):!1}function cb(n,e){const{nodeExtensions:t}=pu(e),s=t.find(c=>c.name===n);if(!s)return!1;const i={name:s.name,options:s.options,storage:s.storage},a=ke(ce(s,"group",i));return typeof a!="string"?!1:a.split(" ").includes("list")}function Lm(n,{checkChildren:e=!0,ignoreWhitespace:t=!1}={}){var s;if(t){if(n.type.name==="hardBreak")return!0;if(n.isText)return/^\s*$/m.test((s=n.text)!==null&&s!==void 0?s:"")}if(n.isText)return!n.text;if(n.isAtom||n.isLeaf)return!1;if(n.content.childCount===0)return!0;if(e){let i=!0;return n.content.forEach(a=>{i!==!1&&(Lm(a,{ignoreWhitespace:t,checkChildren:e})||(i=!1))}),i}return!1}function r3(n){return n instanceof fe}function s3(n,e,t){var s;const{selection:i}=e;let a=null;if(Tv(i)&&(a=i.$cursor),a){const f=(s=n.storedMarks)!==null&&s!==void 0?s:a.marks();return!!t.isInSet(f)||!f.some(h=>h.type.excludes(t))}const{ranges:c}=i;return c.some(({$from:f,$to:h})=>{let m=f.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(f.pos,h.pos,(g,y,b)=>{if(m)return!1;if(g.isInline){const S=!b||b.type.allowsMarkType(t),v=!!t.isInSet(g.marks)||!g.marks.some(w=>w.type.excludes(t));m=S&&v}return!m}),m})}const l3=(n,e={})=>({tr:t,state:s,dispatch:i})=>{const{selection:a}=t,{empty:c,ranges:f}=a,h=ts(n,s.schema);if(i)if(c){const m=Dv(s,h);t.addStoredMark(h.create({...m,...e}))}else f.forEach(m=>{const g=m.$from.pos,y=m.$to.pos;s.doc.nodesBetween(g,y,(b,S)=>{const v=Math.max(S,g),w=Math.min(S+b.nodeSize,y);b.marks.find(E=>E.type===h)?b.marks.forEach(E=>{h===E.type&&t.addMark(v,w,h.create({...E.attrs,...e}))}):t.addMark(v,w,h.create(e))})});return s3(s,t,h)},i3=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),a3=(n,e={})=>({state:t,dispatch:s,chain:i})=>{const a=mt(n,t.schema);let c;return t.selection.$anchor.sameParent(t.selection.$head)&&(c=t.selection.$anchor.parent.attrs),a.isTextblock?i().command(({commands:f})=>rb(a,{...c,...e})(t)?!0:f.clearNodes()).command(({state:f})=>rb(a,{...c,...e})(f,s)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},o3=n=>({tr:e,dispatch:t})=>{if(t){const{doc:s}=e,i=As(n,0,s.content.size),a=fe.create(s,i);e.setSelection(a)}return!0},c3=n=>({tr:e,dispatch:t})=>{if(t){const{doc:s}=e,{from:i,to:a}=typeof n=="number"?{from:n,to:n}:n,c=be.atStart(s).from,f=be.atEnd(s).to,h=As(i,c,f),m=As(a,c,f),g=be.create(s,h,m);e.setSelection(g)}return!0},u3=n=>({state:e,dispatch:t})=>{const s=mt(n,e.schema);return PE(s)(e,t)};function ub(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const s=t.filter(i=>e==null?void 0:e.includes(i.type.name));n.tr.ensureMarks(s)}}const d3=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:s,editor:i})=>{const{selection:a,doc:c}=e,{$from:f,$to:h}=a,m=i.extensionManager.attributes,g=fc(m,f.node().type.name,f.node().attrs);if(a instanceof fe&&a.node.isBlock)return!f.parentOffset||!ar(c,f.pos)?!1:(s&&(n&&ub(t,i.extensionManager.splittableMarks),e.split(f.pos).scrollIntoView()),!0);if(!f.parent.isBlock)return!1;const y=h.parentOffset===h.parent.content.size,b=f.depth===0?void 0:K4(f.node(-1).contentMatchAt(f.indexAfter(-1)));let S=y&&b?[{type:b,attrs:g}]:void 0,v=ar(e.doc,e.mapping.map(f.pos),1,S);if(!S&&!v&&ar(e.doc,e.mapping.map(f.pos),1,b?[{type:b}]:void 0)&&(v=!0,S=b?[{type:b,attrs:g}]:void 0),s){if(v&&(a instanceof be&&e.deleteSelection(),e.split(e.mapping.map(f.pos),1,S),b&&!y&&!f.parentOffset&&f.parent.type!==b)){const w=e.mapping.map(f.before()),k=e.doc.resolve(w);f.node(-1).canReplaceWith(k.index(),k.index()+1,b)&&e.setNodeMarkup(e.mapping.map(f.before()),b)}n&&ub(t,i.extensionManager.splittableMarks),e.scrollIntoView()}return v},f3=(n,e={})=>({tr:t,state:s,dispatch:i,editor:a})=>{var c;const f=mt(n,s.schema),{$from:h,$to:m}=s.selection,g=s.selection.node;if(g&&g.isBlock||h.depth<2||!h.sameParent(m))return!1;const y=h.node(-1);if(y.type!==f)return!1;const b=a.extensionManager.attributes;if(h.parent.content.size===0&&h.node(-1).childCount===h.indexAfter(-1)){if(h.depth===2||h.node(-3).type!==f||h.index(-2)!==h.node(-2).childCount-1)return!1;if(i){let E=W.empty;const O=h.index(-1)?1:h.index(-2)?2:3;for(let $=h.depth-O;$>=h.depth-3;$-=1)E=W.from(h.node($).copy(E));const B=h.indexAfter(-1)<h.node(-2).childCount?1:h.indexAfter(-2)<h.node(-3).childCount?2:3,q={...fc(b,h.node().type.name,h.node().attrs),...e},D=((c=f.contentMatch.defaultType)===null||c===void 0?void 0:c.createAndFill(q))||void 0;E=E.append(W.from(f.createAndFill(null,D)||void 0));const R=h.before(h.depth-(O-1));t.replace(R,h.after(-B),new ie(E,4-O,0));let L=-1;t.doc.nodesBetween(R,t.doc.content.size,($,te)=>{if(L>-1)return!1;$.isTextblock&&$.content.size===0&&(L=te+1)}),L>-1&&t.setSelection(be.near(t.doc.resolve(L))),t.scrollIntoView()}return!0}const S=m.pos===h.end()?y.contentMatchAt(0).defaultType:null,v={...fc(b,y.type.name,y.attrs),...e},w={...fc(b,h.node().type.name,h.node().attrs),...e};t.delete(h.pos,m.pos);const k=S?[{type:f,attrs:v},{type:S,attrs:w}]:[{type:f,attrs:v}];if(!ar(t.doc,h.pos,2))return!1;if(i){const{selection:E,storedMarks:O}=s,{splittableMarks:B}=a.extensionManager,q=O||E.$to.parentOffset&&E.$from.marks();if(t.split(h.pos,2,k).scrollIntoView(),!q||!i)return!0;const D=q.filter(R=>B.includes(R.type.name));t.ensureMarks(D)}return!0},ih=(n,e)=>{const t=Dm(c=>c.type===e)(n.selection);if(!t)return!0;const s=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(s===void 0)return!0;const i=n.doc.nodeAt(s);return t.node.type===(i==null?void 0:i.type)&&Wr(n.doc,t.pos)&&n.join(t.pos),!0},ah=(n,e)=>{const t=Dm(c=>c.type===e)(n.selection);if(!t)return!0;const s=n.doc.resolve(t.start).after(t.depth);if(s===void 0)return!0;const i=n.doc.nodeAt(s);return t.node.type===(i==null?void 0:i.type)&&Wr(n.doc,s)&&n.join(s),!0},h3=(n,e,t,s={})=>({editor:i,tr:a,state:c,dispatch:f,chain:h,commands:m,can:g})=>{const{extensions:y,splittableMarks:b}=i.extensionManager,S=mt(n,c.schema),v=mt(e,c.schema),{selection:w,storedMarks:k}=c,{$from:E,$to:O}=w,B=E.blockRange(O),q=k||w.$to.parentOffset&&w.$from.marks();if(!B)return!1;const D=Dm(R=>cb(R.type.name,y))(w);if(B.depth>=1&&D&&B.depth-D.depth<=1){if(D.node.type===S)return m.liftListItem(v);if(cb(D.node.type.name,y)&&S.validContent(D.node.content)&&f)return h().command(()=>(a.setNodeMarkup(D.pos,S),!0)).command(()=>ih(a,S)).command(()=>ah(a,S)).run()}return!t||!q||!f?h().command(()=>g().wrapInList(S,s)?!0:m.clearNodes()).wrapInList(S,s).command(()=>ih(a,S)).command(()=>ah(a,S)).run():h().command(()=>{const R=g().wrapInList(S,s),L=q.filter($=>b.includes($.type.name));return a.ensureMarks(L),R?!0:m.clearNodes()}).wrapInList(S,s).command(()=>ih(a,S)).command(()=>ah(a,S)).run()},m3=(n,e={},t={})=>({state:s,commands:i})=>{const{extendEmptyMarkRange:a=!1}=t,c=ts(n,s.schema);return Ph(s,c,e)?i.unsetMark(c,{extendEmptyMarkRange:a}):i.setMark(c,e)},p3=(n,e,t={})=>({state:s,commands:i})=>{const a=mt(n,s.schema),c=mt(e,s.schema),f=ja(s,a,t);let h;return s.selection.$anchor.sameParent(s.selection.$head)&&(h=s.selection.$anchor.parent.attrs),f?i.setNode(c,h):i.setNode(a,{...h,...t})},g3=(n,e={})=>({state:t,commands:s})=>{const i=mt(n,t.schema);return ja(t,i,e)?s.lift(i):s.wrapIn(i,e)},x3=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let s=0;s<t.length;s+=1){const i=t[s];let a;if(i.spec.isInputRules&&(a=i.getState(n))){if(e){const c=n.tr,f=a.transform;for(let h=f.steps.length-1;h>=0;h-=1)c.step(f.steps[h].invert(f.docs[h]));if(a.text){const h=c.doc.resolve(a.from).marks();c.replaceWith(a.from,a.to,n.schema.text(a.text,h))}else c.delete(a.from,a.to)}return!0}}return!1},y3=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:s,ranges:i}=t;return s||e&&i.forEach(a=>{n.removeMark(a.$from.pos,a.$to.pos)}),!0},b3=(n,e={})=>({tr:t,state:s,dispatch:i})=>{var a;const{extendEmptyMarkRange:c=!1}=e,{selection:f}=t,h=ts(n,s.schema),{$from:m,empty:g,ranges:y}=f;if(!i)return!0;if(g&&c){let{from:b,to:S}=f;const v=(a=m.marks().find(k=>k.type===h))===null||a===void 0?void 0:a.attrs,w=Om(m,h,v);w&&(b=w.from,S=w.to),t.removeMark(b,S,h)}else y.forEach(b=>{t.removeMark(b.$from.pos,b.$to.pos,h)});return t.removeStoredMark(h),!0},v3=(n,e={})=>({tr:t,state:s,dispatch:i})=>{let a=null,c=null;const f=yu(typeof n=="string"?n:n.name,s.schema);return f?(f==="node"&&(a=mt(n,s.schema)),f==="mark"&&(c=ts(n,s.schema)),i&&t.selection.ranges.forEach(h=>{const m=h.$from.pos,g=h.$to.pos;let y,b,S,v;t.selection.empty?s.doc.nodesBetween(m,g,(w,k)=>{a&&a===w.type&&(S=Math.max(k,m),v=Math.min(k+w.nodeSize,g),y=k,b=w)}):s.doc.nodesBetween(m,g,(w,k)=>{k<m&&a&&a===w.type&&(S=Math.max(k,m),v=Math.min(k+w.nodeSize,g),y=k,b=w),k>=m&&k<=g&&(a&&a===w.type&&t.setNodeMarkup(k,void 0,{...w.attrs,...e}),c&&w.marks.length&&w.marks.forEach(E=>{if(c===E.type){const O=Math.max(k,m),B=Math.min(k+w.nodeSize,g);t.addMark(O,B,c.create({...E.attrs,...e}))}}))}),b&&(y!==void 0&&t.setNodeMarkup(y,void 0,{...b.attrs,...e}),c&&b.marks.length&&b.marks.forEach(w=>{c===w.type&&t.addMark(S,v,c.create({...w.attrs,...e}))}))}),!0):!1},S3=(n,e={})=>({state:t,dispatch:s})=>{const i=mt(n,t.schema);return DE(i,e)(t,s)},N3=(n,e={})=>({state:t,dispatch:s})=>{const i=mt(n,t.schema);return zE(i,e)(t,s)};var w3=Object.freeze({__proto__:null,blur:r4,clearContent:s4,clearNodes:l4,command:i4,createParagraphNear:a4,cut:o4,deleteCurrentNode:c4,deleteNode:u4,deleteRange:d4,deleteSelection:f4,enter:h4,exitCode:m4,extendMarkRange:p4,first:g4,focus:y4,forEach:b4,insertContent:v4,insertContentAt:w4,joinBackward:C4,joinDown:j4,joinForward:E4,joinItemBackward:A4,joinItemForward:T4,joinTextblockBackward:M4,joinTextblockForward:O4,joinUp:k4,keyboardShortcut:D4,lift:z4,liftEmptyBlock:L4,liftListItem:B4,newlineInCode:_4,resetAttributes:H4,scrollIntoView:U4,selectAll:P4,selectNodeBackward:I4,selectNodeForward:V4,selectParentNode:q4,selectTextblockEnd:F4,selectTextblockStart:$4,setContent:G4,setMark:l3,setMeta:i3,setNode:a3,setNodeSelection:o3,setTextSelection:c3,sinkListItem:u3,splitBlock:d3,splitListItem:f3,toggleList:h3,toggleMark:m3,toggleNode:p3,toggleWrap:g3,undoInputRule:x3,unsetAllMarks:y3,unsetMark:b3,updateAttributes:v3,wrapIn:S3,wrapInList:N3});const k3=zt.create({name:"commands",addCommands(){return{...w3}}}),j3=zt.create({name:"drop",addProseMirrorPlugins(){return[new Nt({key:new nn("tiptapDrop"),props:{handleDrop:(n,e,t,s)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:t,moved:s})}}})]}}),C3=zt.create({name:"editable",addProseMirrorPlugins(){return[new Nt({key:new nn("editable"),props:{editable:()=>this.editor.options.editable}})]}}),E3=new nn("focusEvents"),A3=zt.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new Nt({key:E3,props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const s=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(s),!1},blur:(e,t)=>{n.isFocused=!1;const s=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(s),!1}}}})]}}),T3=zt.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:c})=>[()=>c.undoInputRule(),()=>c.command(({tr:f})=>{const{selection:h,doc:m}=f,{empty:g,$anchor:y}=h,{pos:b,parent:S}=y,v=y.parent.isTextblock&&b>0?f.doc.resolve(b-1):y,w=v.parent.type.spec.isolating,k=y.pos-y.parentOffset,E=w&&v.parent.childCount===1?k===y.pos:Se.atStart(m).from===b;return!g||!S.type.isTextblock||S.textContent.length||!E||E&&y.parent.type.name==="paragraph"?!1:c.clearNodes()}),()=>c.deleteSelection(),()=>c.joinBackward(),()=>c.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:c})=>[()=>c.deleteSelection(),()=>c.deleteCurrentNode(),()=>c.joinForward(),()=>c.selectNodeForward()]),s={Enter:()=>this.editor.commands.first(({commands:c})=>[()=>c.newlineInCode(),()=>c.createParagraphNear(),()=>c.liftEmptyBlock(),()=>c.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...s},a={...s,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Rm()||Rv()?a:i},addProseMirrorPlugins(){return[new Nt({key:new nn("clearDocument"),appendTransaction:(n,e,t)=>{if(n.some(w=>w.getMeta("composition")))return;const s=n.some(w=>w.docChanged)&&!e.doc.eq(t.doc),i=n.some(w=>w.getMeta("preventClearDocument"));if(!s||i)return;const{empty:a,from:c,to:f}=e.selection,h=Se.atStart(e.doc).from,m=Se.atEnd(e.doc).to;if(a||!(c===h&&f===m)||!Lm(t.doc))return;const b=t.tr,S=hu({state:t,transaction:b}),{commands:v}=new mu({editor:this.editor,state:S});if(v.clearNodes(),!!b.steps.length)return b}})]}}),M3=zt.create({name:"paste",addProseMirrorPlugins(){return[new Nt({key:new nn("tiptapPaste"),props:{handlePaste:(n,e,t)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:t})}}})]}}),O3=zt.create({name:"tabindex",addProseMirrorPlugins(){return[new Nt({key:new nn("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class js{get name(){return this.node.type.name}constructor(e,t,s=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=s,this.resolvedPos=e,this.editor=t,this.currentNode=i}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let t=this.from,s=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You can’t set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}t=this.from+1,s=this.to-1}this.editor.commands.insertContentAt({from:t,to:s},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),t=this.resolvedPos.doc.resolve(e);return new js(t,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new js(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new js(e,this.editor)}get children(){const e=[];return this.node.content.forEach((t,s)=>{const i=t.isBlock&&!t.isTextblock,a=t.isAtom&&!t.isText,c=this.pos+s+(a?0:1),f=this.resolvedPos.doc.resolve(c);if(!i&&f.depth<=this.depth)return;const h=new js(f,this.editor,i,i?t:null);i&&(h.actualDepth=this.depth+1),e.push(new js(f,this.editor,i,i?t:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,t={}){let s=null,i=this.parent;for(;i&&!s;){if(i.node.type.name===e)if(Object.keys(t).length>0){const a=i.node.attrs,c=Object.keys(t);for(let f=0;f<c.length;f+=1){const h=c[f];if(a[h]!==t[h])break}}else s=i;i=i.parent}return s}querySelector(e,t={}){return this.querySelectorAll(e,t,!0)[0]||null}querySelectorAll(e,t={},s=!1){let i=[];if(!this.children||this.children.length===0)return i;const a=Object.keys(t);return this.children.forEach(c=>{s&&i.length>0||(c.node.type.name===e&&a.every(h=>t[h]===c.node.attrs[h])&&i.push(c),!(s&&i.length>0)&&(i=i.concat(c.querySelectorAll(e,t,s))))}),i}setAttribute(e){const{tr:t}=this.editor.state;t.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(t)}}const R3=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function D3(n,e,t){const s=document.querySelector("style[data-tiptap-style]");if(s!==null)return s;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=n,document.getElementsByTagName("head")[0].appendChild(i),i}class z3 extends IE{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:t})=>{throw t},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:t,slice:s,moved:i})=>this.options.onDrop(t,s,i)),this.on("paste",({event:t,slice:s})=>this.options.onPaste(t,s)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=D3(R3,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,t){const s=jv(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],i=this.state.reconfigure({plugins:s});return this.view.updateState(i),i}unregisterPlugin(e){if(this.isDestroyed)return;const t=this.state.plugins;let s=t;if([].concat(e).forEach(a=>{const c=typeof a=="string"?`${a}$`:a.key;s=s.filter(f=>!f.key.startsWith(c))}),t.length===s.length)return;const i=this.state.reconfigure({plugins:s});return this.view.updateState(i),i}createExtensionManager(){var e,t;const i=[...this.options.enableCoreExtensions?[C3,n4.configure({blockSeparator:(t=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||t===void 0?void 0:t.blockSeparator}),k3,A3,T3,O3,j3,M3].filter(a=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[a.name]!==!1:!0):[],...this.options.extensions].filter(a=>["extension","node","mark"].includes(a==null?void 0:a.type));this.extensionManager=new Bl(i,this)}createCommandManager(){this.commandManager=new mu({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let t;try{t=Uh(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(c){if(!(c instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(c.message))throw c;this.emit("contentError",{editor:this,error:c,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(f=>f.name!=="collaboration"),this.createExtensionManager()}}),t=Uh(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const s=Mv(t,this.options.autofocus);this.view=new uv(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:Ll.create({doc:t,selection:s||void 0})});const i=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(i),this.createNodeViews(),this.prependClass();const a=this.view.dom;a.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(c=>{var f;return(f=this.capturedTransaction)===null||f===void 0?void 0:f.step(c)});return}const t=this.state.apply(e),s=!this.state.selection.eq(t.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e}),s&&this.emit("selectionUpdate",{editor:this,transaction:e});const i=e.getMeta("focus"),a=e.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:e}),a&&this.emit("blur",{editor:this,event:a.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return zv(this.state,e)}isActive(e,t){const s=typeof e=="string"?e:null,i=typeof e=="string"?t:e;return n3(this.state,s,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return Tm(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:s={}}=e||{};return X4(this.state.doc,{blockSeparator:t,textSerializers:{...Ev(this.schema),...s}})}get isEmpty(){return Lm(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,t){var s;return((s=this.$doc)===null||s===void 0?void 0:s.querySelector(e,t))||null}$nodes(e,t){var s;return((s=this.$doc)===null||s===void 0?void 0:s.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new js(t,this)}get $doc(){return this.$pos(0)}}function Gl(n){return new gu({find:n.find,handler:({state:e,range:t,match:s})=>{const i=ke(n.getAttributes,void 0,s);if(i===!1||i===null)return null;const{tr:a}=e,c=s[s.length-1],f=s[0];if(c){const h=f.search(/\S/),m=t.from+f.indexOf(c),g=m+c.length;if(zm(t.from,t.to,e.doc).filter(S=>S.mark.type.excluded.find(w=>w===n.type&&w!==S.mark.type)).filter(S=>S.to>m).length)return null;g<t.to&&a.delete(g,t.to),m>t.from&&a.delete(t.from+h,m);const b=t.from+h+c.length;a.addMark(t.from+h,b,n.type.create(i||{})),a.removeStoredMark(n.type)}}})}function Lv(n){return new gu({find:n.find,handler:({state:e,range:t,match:s})=>{const i=ke(n.getAttributes,void 0,s)||{},{tr:a}=e,c=t.from;let f=t.to;const h=n.type.create(i);if(s[1]){const m=s[0].lastIndexOf(s[1]);let g=c+m;g>f?g=f:f=g+s[1].length;const y=s[0][s[0].length-1];a.insertText(y,c+s[0].length-1),a.replaceWith(g,f,h)}else if(s[0]){const m=n.type.isInline?c:c-1;a.insert(m,n.type.create(i)).delete(a.mapping.map(c),a.mapping.map(f))}a.scrollIntoView()}})}function Ih(n){return new gu({find:n.find,handler:({state:e,range:t,match:s})=>{const i=e.doc.resolve(t.from),a=ke(n.getAttributes,void 0,s)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),n.type))return null;e.tr.delete(t.from,t.to).setBlockType(t.from,t.from,n.type,a)}})}function Ca(n){return new gu({find:n.find,handler:({state:e,range:t,match:s,chain:i})=>{const a=ke(n.getAttributes,void 0,s)||{},c=e.tr.delete(t.from,t.to),h=c.doc.resolve(t.from).blockRange(),m=h&&hm(h,n.type,a);if(!m)return null;if(c.wrap(h,m),n.keepMarks&&n.editor){const{selection:y,storedMarks:b}=e,{splittableMarks:S}=n.editor.extensionManager,v=b||y.$to.parentOffset&&y.$from.marks();if(v){const w=v.filter(k=>S.includes(k.type.name));c.ensureMarks(w)}}if(n.keepAttributes){const y=n.type.name==="bulletList"||n.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(y,a).run()}const g=c.doc.resolve(t.from-1).nodeBefore;g&&g.type===n.type&&Wr(c.doc,t.from-1)&&(!n.joinPredicate||n.joinPredicate(s,g))&&c.join(t.from-1)}})}class Lt{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ke(ce(this,"addOptions",{name:this.name}))),this.storage=ke(ce(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Lt(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>xu(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new Lt(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=ke(ce(t,"addOptions",{name:t.name})),t.storage=ke(ce(t,"addStorage",{name:t.name,options:t.options})),t}}function Ps(n){return new QE({find:n.find,handler:({state:e,range:t,match:s,pasteEvent:i})=>{const a=ke(n.getAttributes,void 0,s,i);if(a===!1||a===null)return null;const{tr:c}=e,f=s[s.length-1],h=s[0];let m=t.to;if(f){const g=h.search(/\S/),y=t.from+h.indexOf(f),b=y+f.length;if(zm(t.from,t.to,e.doc).filter(v=>v.mark.type.excluded.find(k=>k===n.type&&k!==v.mark.type)).filter(v=>v.to>y).length)return null;b<t.to&&c.delete(b,t.to),y>t.from&&c.delete(t.from+g,y),m=t.from+g+f.length,c.addMark(t.from+g,m,n.type.create(a||{})),c.removeStoredMark(n.type)}}})}function L3(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Bv={exports:{}},oh={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var db;function B3(){if(db)return oh;db=1;var n=Et;function e(y,b){return y===b&&(y!==0||1/y===1/b)||y!==y&&b!==b}var t=typeof Object.is=="function"?Object.is:e,s=n.useState,i=n.useEffect,a=n.useLayoutEffect,c=n.useDebugValue;function f(y,b){var S=b(),v=s({inst:{value:S,getSnapshot:b}}),w=v[0].inst,k=v[1];return a(function(){w.value=S,w.getSnapshot=b,h(w)&&k({inst:w})},[y,S,b]),i(function(){return h(w)&&k({inst:w}),y(function(){h(w)&&k({inst:w})})},[y]),c(S),S}function h(y){var b=y.getSnapshot;y=y.value;try{var S=b();return!t(y,S)}catch{return!0}}function m(y,b){return b()}var g=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?m:f;return oh.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:g,oh}Bv.exports=B3();var Bm=Bv.exports;const _3=(...n)=>e=>{n.forEach(t=>{typeof t=="function"?t(e):t&&(t.current=e)})},H3=({contentComponent:n})=>{const e=Bm.useSyncExternalStore(n.subscribe,n.getSnapshot,n.getServerSnapshot);return Et.createElement(Et.Fragment,null,Object.values(e))};function U3(){const n=new Set;let e={};return{subscribe(t){return n.add(t),()=>{n.delete(t)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(t,s){e={...e,[t]:rk.createPortal(s.reactElement,s.element,t)},n.forEach(i=>i())},removeRenderer(t){const s={...e};delete s[t],e=s,n.forEach(i=>i())}}}class P3 extends Et.Component{constructor(e){var t;super(e),this.editorContentRef=Et.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(!((t=e.editor)===null||t===void 0)&&t.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const t=this.editorContentRef.current;t.append(...e.options.element.childNodes),e.setOptions({element:t}),e.contentComponent=U3(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(s=>s.hasContentComponentInitialized?s:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild))return;const t=document.createElement("div");t.append(...e.options.element.childNodes),e.setOptions({element:t})}render(){const{editor:e,innerRef:t,...s}=this.props;return Et.createElement(Et.Fragment,null,Et.createElement("div",{ref:_3(t,this.editorContentRef),...s}),(e==null?void 0:e.contentComponent)&&Et.createElement(H3,{contentComponent:e.contentComponent}))}}const I3=C.forwardRef((n,e)=>{const t=Et.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[n.editor]);return Et.createElement(P3,{key:t,innerRef:e,...n})}),V3=Et.memo(I3);var q3=function n(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var s,i,a;if(Array.isArray(e)){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!n(e[i],t[i]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(i of e.entries())if(!t.has(i[0]))return!1;for(i of e.entries())if(!n(i[1],t.get(i[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(i of e.entries())if(!t.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(e[i]!==t[i])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(a=Object.keys(e),s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!Object.prototype.hasOwnProperty.call(t,a[i]))return!1;for(i=s;i--!==0;){var c=a[i];if(!(c==="_owner"&&e.$$typeof)&&!n(e[c],t[c]))return!1}return!0}return e!==e&&t!==t},F3=L3(q3),_v={exports:{}},ch={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fb;function $3(){if(fb)return ch;fb=1;var n=Et,e=Bm;function t(m,g){return m===g&&(m!==0||1/m===1/g)||m!==m&&g!==g}var s=typeof Object.is=="function"?Object.is:t,i=e.useSyncExternalStore,a=n.useRef,c=n.useEffect,f=n.useMemo,h=n.useDebugValue;return ch.useSyncExternalStoreWithSelector=function(m,g,y,b,S){var v=a(null);if(v.current===null){var w={hasValue:!1,value:null};v.current=w}else w=v.current;v=f(function(){function E(R){if(!O){if(O=!0,B=R,R=b(R),S!==void 0&&w.hasValue){var L=w.value;if(S(L,R))return q=L}return q=R}if(L=q,s(B,R))return L;var $=b(R);return S!==void 0&&S(L,$)?L:(B=R,q=$)}var O=!1,B,q,D=y===void 0?null:y;return[function(){return E(g())},D===null?void 0:function(){return E(D())}]},[g,y,b,S]);var k=i(m,v[0],v[1]);return c(function(){w.hasValue=!0,w.value=k},[k]),h(k),k},ch}_v.exports=$3();var G3=_v.exports;const Y3=typeof window<"u"?C.useLayoutEffect:C.useEffect;class K3{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const t=()=>{this.transactionNumber+=1,this.subscribers.forEach(i=>i())},s=this.editor;return s.on("transaction",t),()=>{s.off("transaction",t)}}}}function J3(n){var e;const[t]=C.useState(()=>new K3(n.editor)),s=G3.useSyncExternalStoreWithSelector(t.subscribe,t.getSnapshot,t.getServerSnapshot,n.selector,(e=n.equalityFn)!==null&&e!==void 0?e:F3);return Y3(()=>t.watch(n.editor),[n.editor,t]),C.useDebugValue(s),s}const Q3=!1,Vh=typeof window>"u",X3=Vh||!!(typeof window<"u"&&window.next);class _m{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(t=>t())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?Vh||X3?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...s)=>{var i,a;return(a=(i=this.options.current).onBeforeCreate)===null||a===void 0?void 0:a.call(i,...s)},onBlur:(...s)=>{var i,a;return(a=(i=this.options.current).onBlur)===null||a===void 0?void 0:a.call(i,...s)},onCreate:(...s)=>{var i,a;return(a=(i=this.options.current).onCreate)===null||a===void 0?void 0:a.call(i,...s)},onDestroy:(...s)=>{var i,a;return(a=(i=this.options.current).onDestroy)===null||a===void 0?void 0:a.call(i,...s)},onFocus:(...s)=>{var i,a;return(a=(i=this.options.current).onFocus)===null||a===void 0?void 0:a.call(i,...s)},onSelectionUpdate:(...s)=>{var i,a;return(a=(i=this.options.current).onSelectionUpdate)===null||a===void 0?void 0:a.call(i,...s)},onTransaction:(...s)=>{var i,a;return(a=(i=this.options.current).onTransaction)===null||a===void 0?void 0:a.call(i,...s)},onUpdate:(...s)=>{var i,a;return(a=(i=this.options.current).onUpdate)===null||a===void 0?void 0:a.call(i,...s)},onContentError:(...s)=>{var i,a;return(a=(i=this.options.current).onContentError)===null||a===void 0?void 0:a.call(i,...s)},onDrop:(...s)=>{var i,a;return(a=(i=this.options.current).onDrop)===null||a===void 0?void 0:a.call(i,...s)},onPaste:(...s)=>{var i,a;return(a=(i=this.options.current).onPaste)===null||a===void 0?void 0:a.call(i,...s)}};return new z3(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,t){return Object.keys(e).every(s=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(s)?!0:s==="extensions"&&e.extensions&&t.extensions?e.extensions.length!==t.extensions.length?!1:e.extensions.every((i,a)=>{var c;return i===((c=t.extensions)===null||c===void 0?void 0:c[a])}):e[s]===t[s])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?_m.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((s,i)=>s===e[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,t=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){t&&t.setOptions(this.options.current);return}t&&!t.isDestroyed&&(t.destroy(),this.instanceId===e&&this.setEditor(null))},1)}}function Z3(n={},e=[]){const t=C.useRef(n);t.current=n;const[s]=C.useState(()=>new _m(t)),i=Bm.useSyncExternalStore(s.subscribe,s.getEditor,s.getServerSnapshot);return C.useDebugValue(i),C.useEffect(s.onRender(e)),J3({editor:i,selector:({transactionNumber:a})=>n.shouldRerenderOnTransaction===!1?null:n.immediatelyRender&&a===0?0:a+1}),i}const W3=C.createContext({editor:null});W3.Consumer;const eA=C.createContext({onDragStart:void 0}),tA=()=>C.useContext(eA);Et.forwardRef((n,e)=>{const{onDragStart:t}=tA(),s=n.as||"div";return Et.createElement(s,{...n,ref:e,"data-node-view-wrapper":"",onDragStart:t,style:{whiteSpace:"normal",...n.style}})});const nA=/^\s*>\s$/,rA=Lt.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:n}){return["blockquote",pt(this.options.HTMLAttributes,n),0]},addCommands(){return{setBlockquote:()=>({commands:n})=>n.wrapIn(this.name),toggleBlockquote:()=>({commands:n})=>n.toggleWrap(this.name),unsetBlockquote:()=>({commands:n})=>n.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Ca({find:nA,type:this.type})]}}),sA=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,lA=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,iA=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,aA=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,oA=ur.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:n=>n.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:n=>n.type.name===this.name},{style:"font-weight",getAttrs:n=>/^(bold(er)?|[5-9]\d{2,})$/.test(n)&&null}]},renderHTML({HTMLAttributes:n}){return["strong",pt(this.options.HTMLAttributes,n),0]},addCommands(){return{setBold:()=>({commands:n})=>n.setMark(this.name),toggleBold:()=>({commands:n})=>n.toggleMark(this.name),unsetBold:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Gl({find:sA,type:this.type}),Gl({find:iA,type:this.type})]},addPasteRules(){return[Ps({find:lA,type:this.type}),Ps({find:aA,type:this.type})]}}),cA="listItem",hb="textStyle",mb=/^\s*([-+*])\s$/,uA=Lt.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:n}){return["ul",pt(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleBulletList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(cA,this.editor.getAttributes(hb)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let n=Ca({find:mb,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(n=Ca({find:mb,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(hb),editor:this.editor})),[n]}}),dA=/(^|[^`])`([^`]+)`(?!`)/,fA=/(^|[^`])`([^`]+)`(?!`)/g,hA=ur.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:n}){return["code",pt(this.options.HTMLAttributes,n),0]},addCommands(){return{setCode:()=>({commands:n})=>n.setMark(this.name),toggleCode:()=>({commands:n})=>n.toggleMark(this.name),unsetCode:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Gl({find:dA,type:this.type})]},addPasteRules(){return[Ps({find:fA,type:this.type})]}}),mA=/^```([a-z]+)?[\s\n]$/,pA=/^~~~([a-z]+)?[\s\n]$/,gA=Lt.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:n=>{var e;const{languageClassPrefix:t}=this.options,a=[...((e=n.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(c=>c.startsWith(t)).map(c=>c.replace(t,""))[0];return a||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:n,HTMLAttributes:e}){return["pre",pt(this.options.HTMLAttributes,e),["code",{class:n.attrs.language?this.options.languageClassPrefix+n.attrs.language:null},0]]},addCommands(){return{setCodeBlock:n=>({commands:e})=>e.setNode(this.name,n),toggleCodeBlock:n=>({commands:e})=>e.toggleNode(this.name,"paragraph",n)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:n,$anchor:e}=this.editor.state.selection,t=e.pos===1;return!n||e.parent.type.name!==this.name?!1:t||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:n})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=n,{selection:t}=e,{$from:s,empty:i}=t;if(!i||s.parent.type!==this.type)return!1;const a=s.parentOffset===s.parent.nodeSize-2,c=s.parent.textContent.endsWith(`

`);return!a||!c?!1:n.chain().command(({tr:f})=>(f.delete(s.pos-2,s.pos),!0)).exitCode().run()},ArrowDown:({editor:n})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=n,{selection:t,doc:s}=e,{$from:i,empty:a}=t;if(!a||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const f=i.after();return f===void 0?!1:s.nodeAt(f)?n.commands.command(({tr:m})=>(m.setSelection(Se.near(s.resolve(f))),!0)):n.commands.exitCode()}}},addInputRules(){return[Ih({find:mA,type:this.type,getAttributes:n=>({language:n[1]})}),Ih({find:pA,type:this.type,getAttributes:n=>({language:n[1]})})]},addProseMirrorPlugins(){return[new Nt({key:new nn("codeBlockVSCodeHandler"),props:{handlePaste:(n,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const t=e.clipboardData.getData("text/plain"),s=e.clipboardData.getData("vscode-editor-data"),i=s?JSON.parse(s):void 0,a=i==null?void 0:i.mode;if(!t||!a)return!1;const{tr:c,schema:f}=n.state,h=f.text(t.replace(/\r\n?/g,`
`));return c.replaceSelectionWith(this.type.create({language:a},h)),c.selection.$from.parent.type!==this.type&&c.setSelection(be.near(c.doc.resolve(Math.max(0,c.selection.from-2)))),c.setMeta("paste",!0),n.dispatch(c),!0}}})]}}),xA=Lt.create({name:"doc",topNode:!0,content:"block+"});function yA(n={}){return new Nt({view(e){return new bA(e,n)}})}class bA{constructor(e,t){var s;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(s=t.width)!==null&&s!==void 0?s:1,this.color=t.color===!1?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let a=c=>{this[i](c)};return e.dom.addEventListener(i,a),{name:i,handler:a}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){this.cursorPos!=null&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),t=!e.parent.inlineContent,s,i=this.editorView.dom,a=i.getBoundingClientRect(),c=a.width/i.offsetWidth,f=a.height/i.offsetHeight;if(t){let y=e.nodeBefore,b=e.nodeAfter;if(y||b){let S=this.editorView.nodeDOM(this.cursorPos-(y?y.nodeSize:0));if(S){let v=S.getBoundingClientRect(),w=y?v.bottom:v.top;y&&b&&(w=(w+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let k=this.width/2*f;s={left:v.left,right:v.right,top:w-k,bottom:w+k}}}}if(!s){let y=this.editorView.coordsAtPos(this.cursorPos),b=this.width/2*c;s={left:y.left-b,right:y.left+b,top:y.top,bottom:y.bottom}}let h=this.editorView.dom.offsetParent;this.element||(this.element=h.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",t),this.element.classList.toggle("prosemirror-dropcursor-inline",!t);let m,g;if(!h||h==document.body&&getComputedStyle(h).position=="static")m=-pageXOffset,g=-pageYOffset;else{let y=h.getBoundingClientRect(),b=y.width/h.offsetWidth,S=y.height/h.offsetHeight;m=y.left-h.scrollLeft*b,g=y.top-h.scrollTop*S}this.element.style.left=(s.left-m)/c+"px",this.element.style.top=(s.top-g)/f+"px",this.element.style.width=(s.right-s.left)/c+"px",this.element.style.height=(s.bottom-s.top)/f+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),s=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),i=s&&s.type.spec.disableDropCursor,a=typeof i=="function"?i(this.editorView,t,e):i;if(t&&!a){let c=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let f=w1(this.editorView.state.doc,c,this.editorView.dragging.slice);f!=null&&(c=f)}this.setCursor(c),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}const vA=zt.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[yA(this.options)]}});class Je extends Se{constructor(e){super(e,e)}map(e,t){let s=e.resolve(t.map(this.head));return Je.valid(s)?new Je(s):Se.near(s)}content(){return ie.empty}eq(e){return e instanceof Je&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Je(e.resolve(t.pos))}getBookmark(){return new Hm(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!SA(e)||!NA(e))return!1;let s=t.type.spec.allowGapCursor;if(s!=null)return s;let i=t.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,t,s=!1){e:for(;;){if(!s&&Je.valid(e))return e;let i=e.pos,a=null;for(let c=e.depth;;c--){let f=e.node(c);if(t>0?e.indexAfter(c)<f.childCount:e.index(c)>0){a=f.child(t>0?e.indexAfter(c):e.index(c)-1);break}else if(c==0)return null;i+=t;let h=e.doc.resolve(i);if(Je.valid(h))return h}for(;;){let c=t>0?a.firstChild:a.lastChild;if(!c){if(a.isAtom&&!a.isText&&!fe.isSelectable(a)){e=e.doc.resolve(i+a.nodeSize*t),s=!1;continue e}break}a=c,i+=t;let f=e.doc.resolve(i);if(Je.valid(f))return f}return null}}}Je.prototype.visible=!1;Je.findFrom=Je.findGapCursorFrom;Se.jsonID("gapcursor",Je);class Hm{constructor(e){this.pos=e}map(e){return new Hm(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return Je.valid(t)?new Je(t):Se.near(t)}}function SA(n){for(let e=n.depth;e>=0;e--){let t=n.index(e),s=n.node(e);if(t==0){if(s.type.spec.isolating)return!0;continue}for(let i=s.child(t-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function NA(n){for(let e=n.depth;e>=0;e--){let t=n.indexAfter(e),s=n.node(e);if(t==s.childCount){if(s.type.spec.isolating)return!0;continue}for(let i=s.child(t);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function wA(){return new Nt({props:{decorations:EA,createSelectionBetween(n,e,t){return e.pos==t.pos&&Je.valid(t)?new Je(t):null},handleClick:jA,handleKeyDown:kA,handleDOMEvents:{beforeinput:CA}}})}const kA=dv({ArrowLeft:rc("horiz",-1),ArrowRight:rc("horiz",1),ArrowUp:rc("vert",-1),ArrowDown:rc("vert",1)});function rc(n,e){const t=n=="vert"?e>0?"down":"up":e>0?"right":"left";return function(s,i,a){let c=s.selection,f=e>0?c.$to:c.$from,h=c.empty;if(c instanceof be){if(!a.endOfTextblock(t)||f.depth==0)return!1;h=!1,f=s.doc.resolve(e>0?f.after():f.before())}let m=Je.findGapCursorFrom(f,e,h);return m?(i&&i(s.tr.setSelection(new Je(m))),!0):!1}}function jA(n,e,t){if(!n||!n.editable)return!1;let s=n.state.doc.resolve(e);if(!Je.valid(s))return!1;let i=n.posAtCoords({left:t.clientX,top:t.clientY});return i&&i.inside>-1&&fe.isSelectable(n.state.doc.nodeAt(i.inside))?!1:(n.dispatch(n.state.tr.setSelection(new Je(s))),!0)}function CA(n,e){if(e.inputType!="insertCompositionText"||!(n.state.selection instanceof Je))return!1;let{$from:t}=n.state.selection,s=t.parent.contentMatchAt(t.index()).findWrapping(n.state.schema.nodes.text);if(!s)return!1;let i=W.empty;for(let c=s.length-1;c>=0;c--)i=W.from(s[c].createAndFill(null,i));let a=n.state.tr.replace(t.pos,t.pos,new ie(i,0,0));return a.setSelection(be.near(a.doc.resolve(t.pos+1))),n.dispatch(a),!1}function EA(n){if(!(n.selection instanceof Je))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",st.create(n.doc,[xn.widget(n.selection.head,e,{key:"gapcursor"})])}const AA=zt.create({name:"gapCursor",addProseMirrorPlugins(){return[wA()]},extendNodeSchema(n){var e;const t={name:n.name,options:n.options,storage:n.storage};return{allowGapCursor:(e=ke(ce(n,"allowGapCursor",t)))!==null&&e!==void 0?e:null}}}),TA=Lt.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:n}){return["br",pt(this.options.HTMLAttributes,n)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:n,chain:e,state:t,editor:s})=>n.first([()=>n.exitCode(),()=>n.command(()=>{const{selection:i,storedMarks:a}=t;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:c}=this.options,{splittableMarks:f}=s.extensionManager,h=a||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:m,dispatch:g})=>{if(g&&h&&c){const y=h.filter(b=>f.includes(b.type.name));m.ensureMarks(y)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),MA=Lt.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(n=>({tag:`h${n}`,attrs:{level:n}}))},renderHTML({node:n,HTMLAttributes:e}){return[`h${this.options.levels.includes(n.attrs.level)?n.attrs.level:this.options.levels[0]}`,pt(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.setNode(this.name,n):!1,toggleHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.toggleNode(this.name,"paragraph",n):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((n,e)=>({...n,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(n=>Ih({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${n}})\\s$`),type:this.type,getAttributes:{level:n}}))}});var Ac=200,ht=function(){};ht.prototype.append=function(e){return e.length?(e=ht.from(e),!this.length&&e||e.length<Ac&&this.leafAppend(e)||this.length<Ac&&e.leafPrepend(this)||this.appendInner(e)):this};ht.prototype.prepend=function(e){return e.length?ht.from(e).append(this):this};ht.prototype.appendInner=function(e){return new OA(this,e)};ht.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?ht.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};ht.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};ht.prototype.forEach=function(e,t,s){t===void 0&&(t=0),s===void 0&&(s=this.length),t<=s?this.forEachInner(e,t,s,0):this.forEachInvertedInner(e,t,s,0)};ht.prototype.map=function(e,t,s){t===void 0&&(t=0),s===void 0&&(s=this.length);var i=[];return this.forEach(function(a,c){return i.push(e(a,c))},t,s),i};ht.from=function(e){return e instanceof ht?e:e&&e.length?new Hv(e):ht.empty};var Hv=function(n){function e(s){n.call(this),this.values=s}n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,a){return i==0&&a==this.length?this:new e(this.values.slice(i,a))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,a,c,f){for(var h=a;h<c;h++)if(i(this.values[h],f+h)===!1)return!1},e.prototype.forEachInvertedInner=function(i,a,c,f){for(var h=a-1;h>=c;h--)if(i(this.values[h],f+h)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=Ac)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=Ac)return new e(i.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e}(ht);ht.empty=new Hv([]);var OA=function(n){function e(t,s){n.call(this),this.left=t,this.right=s,this.length=t.length+s.length,this.depth=Math.max(t.depth,s.depth)+1}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(s){return s<this.left.length?this.left.get(s):this.right.get(s-this.left.length)},e.prototype.forEachInner=function(s,i,a,c){var f=this.left.length;if(i<f&&this.left.forEachInner(s,i,Math.min(a,f),c)===!1||a>f&&this.right.forEachInner(s,Math.max(i-f,0),Math.min(this.length,a)-f,c+f)===!1)return!1},e.prototype.forEachInvertedInner=function(s,i,a,c){var f=this.left.length;if(i>f&&this.right.forEachInvertedInner(s,i-f,Math.max(a,f)-f,c+f)===!1||a<f&&this.left.forEachInvertedInner(s,Math.min(i,f),a,c)===!1)return!1},e.prototype.sliceInner=function(s,i){if(s==0&&i==this.length)return this;var a=this.left.length;return i<=a?this.left.slice(s,i):s>=a?this.right.slice(s-a,i-a):this.left.slice(s,a).append(this.right.slice(0,i-a))},e.prototype.leafAppend=function(s){var i=this.right.leafAppend(s);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(s){var i=this.left.leafPrepend(s);if(i)return new e(i,this.right)},e.prototype.appendInner=function(s){return this.left.depth>=Math.max(this.right.depth,s.depth)+1?new e(this.left,new e(this.right,s)):new e(this,s)},e}(ht);const RA=500;class Nn{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let s=this.items.length;for(;;s--)if(this.items.get(s-1).selection){--s;break}let i,a;t&&(i=this.remapping(s,this.items.length),a=i.maps.length);let c=e.tr,f,h,m=[],g=[];return this.items.forEach((y,b)=>{if(!y.step){i||(i=this.remapping(s,b+1),a=i.maps.length),a--,g.push(y);return}if(i){g.push(new Dn(y.map));let S=y.step.map(i.slice(a)),v;S&&c.maybeStep(S).doc&&(v=c.mapping.maps[c.mapping.maps.length-1],m.push(new Dn(v,void 0,void 0,m.length+g.length))),a--,v&&i.appendMap(v,a)}else c.maybeStep(y.step);if(y.selection)return f=i?y.selection.map(i.slice(a)):y.selection,h=new Nn(this.items.slice(0,s).append(g.reverse().concat(m)),this.eventCount-1),!1},this.items.length,0),{remaining:h,transform:c,selection:f}}addTransform(e,t,s,i){let a=[],c=this.eventCount,f=this.items,h=!i&&f.length?f.get(f.length-1):null;for(let g=0;g<e.steps.length;g++){let y=e.steps[g].invert(e.docs[g]),b=new Dn(e.mapping.maps[g],y,t),S;(S=h&&h.merge(b))&&(b=S,g?a.pop():f=f.slice(0,f.length-1)),a.push(b),t&&(c++,t=void 0),i||(h=b)}let m=c-s.depth;return m>zA&&(f=DA(f,m),c-=m),new Nn(f.append(a),c)}remapping(e,t){let s=new ba;return this.items.forEach((i,a)=>{let c=i.mirrorOffset!=null&&a-i.mirrorOffset>=e?s.maps.length-i.mirrorOffset:void 0;s.appendMap(i.map,c)},e,t),s}addMaps(e){return this.eventCount==0?this:new Nn(this.items.append(e.map(t=>new Dn(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let s=[],i=Math.max(0,this.items.length-t),a=e.mapping,c=e.steps.length,f=this.eventCount;this.items.forEach(b=>{b.selection&&f--},i);let h=t;this.items.forEach(b=>{let S=a.getMirror(--h);if(S==null)return;c=Math.min(c,S);let v=a.maps[S];if(b.step){let w=e.steps[S].invert(e.docs[S]),k=b.selection&&b.selection.map(a.slice(h+1,S));k&&f++,s.push(new Dn(v,w,k))}else s.push(new Dn(v))},i);let m=[];for(let b=t;b<c;b++)m.push(new Dn(a.maps[b]));let g=this.items.slice(0,i).append(m).append(s),y=new Nn(g,f);return y.emptyItemCount()>RA&&(y=y.compress(this.items.length-s.length)),y}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),s=t.maps.length,i=[],a=0;return this.items.forEach((c,f)=>{if(f>=e)i.push(c),c.selection&&a++;else if(c.step){let h=c.step.map(t.slice(s)),m=h&&h.getMap();if(s--,m&&t.appendMap(m,s),h){let g=c.selection&&c.selection.map(t.slice(s));g&&a++;let y=new Dn(m.invert(),h,g),b,S=i.length-1;(b=i.length&&i[S].merge(y))?i[S]=b:i.push(y)}}else c.map&&s--},this.items.length,0),new Nn(ht.from(i.reverse()),a)}}Nn.empty=new Nn(ht.empty,0);function DA(n,e){let t;return n.forEach((s,i)=>{if(s.selection&&e--==0)return t=i,!1}),n.slice(t)}class Dn{constructor(e,t,s,i){this.map=e,this.step=t,this.selection=s,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new Dn(t.getMap().invert(),t,this.selection)}}}class Pr{constructor(e,t,s,i,a){this.done=e,this.undone=t,this.prevRanges=s,this.prevTime=i,this.prevComposition=a}}const zA=20;function LA(n,e,t,s){let i=t.getMeta(Ls),a;if(i)return i.historyState;t.getMeta(HA)&&(n=new Pr(n.done,n.undone,null,0,-1));let c=t.getMeta("appendedTransaction");if(t.steps.length==0)return n;if(c&&c.getMeta(Ls))return c.getMeta(Ls).redo?new Pr(n.done.addTransform(t,void 0,s,hc(e)),n.undone,pb(t.mapping.maps),n.prevTime,n.prevComposition):new Pr(n.done,n.undone.addTransform(t,void 0,s,hc(e)),null,n.prevTime,n.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(c&&c.getMeta("addToHistory")===!1)){let f=t.getMeta("composition"),h=n.prevTime==0||!c&&n.prevComposition!=f&&(n.prevTime<(t.time||0)-s.newGroupDelay||!BA(t,n.prevRanges)),m=c?uh(n.prevRanges,t.mapping):pb(t.mapping.maps);return new Pr(n.done.addTransform(t,h?e.selection.getBookmark():void 0,s,hc(e)),Nn.empty,m,t.time,f??n.prevComposition)}else return(a=t.getMeta("rebased"))?new Pr(n.done.rebased(t,a),n.undone.rebased(t,a),uh(n.prevRanges,t.mapping),n.prevTime,n.prevComposition):new Pr(n.done.addMaps(t.mapping.maps),n.undone.addMaps(t.mapping.maps),uh(n.prevRanges,t.mapping),n.prevTime,n.prevComposition)}function BA(n,e){if(!e)return!1;if(!n.docChanged)return!0;let t=!1;return n.mapping.maps[0].forEach((s,i)=>{for(let a=0;a<e.length;a+=2)s<=e[a+1]&&i>=e[a]&&(t=!0)}),t}function pb(n){let e=[];for(let t=n.length-1;t>=0&&e.length==0;t--)n[t].forEach((s,i,a,c)=>e.push(a,c));return e}function uh(n,e){if(!n)return null;let t=[];for(let s=0;s<n.length;s+=2){let i=e.map(n[s],1),a=e.map(n[s+1],-1);i<=a&&t.push(i,a)}return t}function _A(n,e,t){let s=hc(e),i=Ls.get(e).spec.config,a=(t?n.undone:n.done).popEvent(e,s);if(!a)return null;let c=a.selection.resolve(a.transform.doc),f=(t?n.done:n.undone).addTransform(a.transform,e.selection.getBookmark(),i,s),h=new Pr(t?f:a.remaining,t?a.remaining:f,null,0,-1);return a.transform.setSelection(c).setMeta(Ls,{redo:t,historyState:h})}let dh=!1,gb=null;function hc(n){let e=n.plugins;if(gb!=e){dh=!1,gb=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){dh=!0;break}}return dh}const Ls=new nn("history"),HA=new nn("closeHistory");function UA(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new Nt({key:Ls,state:{init(){return new Pr(Nn.empty,Nn.empty,null,0,-1)},apply(e,t,s){return LA(t,s,e,n)}},config:n,props:{handleDOMEvents:{beforeinput(e,t){let s=t.inputType,i=s=="historyUndo"?Pv:s=="historyRedo"?Iv:null;return i?(t.preventDefault(),i(e.state,e.dispatch)):!1}}}})}function Uv(n,e){return(t,s)=>{let i=Ls.getState(t);if(!i||(n?i.undone:i.done).eventCount==0)return!1;if(s){let a=_A(i,t,n);a&&s(e?a.scrollIntoView():a)}return!0}}const Pv=Uv(!1,!0),Iv=Uv(!0,!0),PA=zt.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:n,dispatch:e})=>Pv(n,e),redo:()=>({state:n,dispatch:e})=>Iv(n,e)}},addProseMirrorPlugins(){return[UA(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-я":()=>this.editor.commands.undo(),"Shift-Mod-я":()=>this.editor.commands.redo()}}}),IA=Lt.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:n}){return["hr",pt(this.options.HTMLAttributes,n)]},addCommands(){return{setHorizontalRule:()=>({chain:n,state:e})=>{const{selection:t}=e,{$from:s,$to:i}=t,a=n();return s.parentOffset===0?a.insertContentAt({from:Math.max(s.pos-1,0),to:i.pos},{type:this.name}):r3(t)?a.insertContentAt(i.pos,{type:this.name}):a.insertContent({type:this.name}),a.command(({tr:c,dispatch:f})=>{var h;if(f){const{$to:m}=c.selection,g=m.end();if(m.nodeAfter)m.nodeAfter.isTextblock?c.setSelection(be.create(c.doc,m.pos+1)):m.nodeAfter.isBlock?c.setSelection(fe.create(c.doc,m.pos)):c.setSelection(be.create(c.doc,m.pos));else{const y=(h=m.parent.type.contentMatch.defaultType)===null||h===void 0?void 0:h.create();y&&(c.insert(g,y),c.setSelection(be.create(c.doc,g+1)))}c.scrollIntoView()}return!0}).run()}}},addInputRules(){return[Lv({find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type})]}}),VA=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,qA=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,FA=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,$A=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,GA=ur.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:n=>n.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:n=>n.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:n}){return["em",pt(this.options.HTMLAttributes,n),0]},addCommands(){return{setItalic:()=>({commands:n})=>n.setMark(this.name),toggleItalic:()=>({commands:n})=>n.toggleMark(this.name),unsetItalic:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Gl({find:VA,type:this.type}),Gl({find:FA,type:this.type})]},addPasteRules(){return[Ps({find:qA,type:this.type}),Ps({find:$A,type:this.type})]}}),YA=Lt.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",pt(this.options.HTMLAttributes,n),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),KA="listItem",xb="textStyle",yb=/^(\d+)\.\s$/,JA=Lt.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:n=>n.hasAttribute("start")?parseInt(n.getAttribute("start")||"",10):1},type:{default:null,parseHTML:n=>n.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:n}){const{start:e,...t}=n;return e===1?["ol",pt(this.options.HTMLAttributes,t),0]:["ol",pt(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleOrderedList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(KA,this.editor.getAttributes(xb)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let n=Ca({find:yb,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(n=Ca({find:yb,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(xb)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[n]}}),QA=Lt.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:n}){return["p",pt(this.options.HTMLAttributes,n),0]},addCommands(){return{setParagraph:()=>({commands:n})=>n.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),XA=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,ZA=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,WA=ur.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["s",pt(this.options.HTMLAttributes,n),0]},addCommands(){return{setStrike:()=>({commands:n})=>n.setMark(this.name),toggleStrike:()=>({commands:n})=>n.toggleMark(this.name),unsetStrike:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Gl({find:XA,type:this.type})]},addPasteRules(){return[Ps({find:ZA,type:this.type})]}}),eT=Lt.create({name:"text",group:"inline"}),tT=zt.create({name:"starterKit",addExtensions(){const n=[];return this.options.bold!==!1&&n.push(oA.configure(this.options.bold)),this.options.blockquote!==!1&&n.push(rA.configure(this.options.blockquote)),this.options.bulletList!==!1&&n.push(uA.configure(this.options.bulletList)),this.options.code!==!1&&n.push(hA.configure(this.options.code)),this.options.codeBlock!==!1&&n.push(gA.configure(this.options.codeBlock)),this.options.document!==!1&&n.push(xA.configure(this.options.document)),this.options.dropcursor!==!1&&n.push(vA.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&n.push(AA.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&n.push(TA.configure(this.options.hardBreak)),this.options.heading!==!1&&n.push(MA.configure(this.options.heading)),this.options.history!==!1&&n.push(PA.configure(this.options.history)),this.options.horizontalRule!==!1&&n.push(IA.configure(this.options.horizontalRule)),this.options.italic!==!1&&n.push(GA.configure(this.options.italic)),this.options.listItem!==!1&&n.push(YA.configure(this.options.listItem)),this.options.orderedList!==!1&&n.push(JA.configure(this.options.orderedList)),this.options.paragraph!==!1&&n.push(QA.configure(this.options.paragraph)),this.options.strike!==!1&&n.push(WA.configure(this.options.strike)),this.options.text!==!1&&n.push(eT.configure(this.options.text)),n}}),nT="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0america6xi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mögensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",rT="ελ1υ2бг1ел3дети4ею2католик6ом3мкд2он1сква6онлайн5рг3рус2ф2сайт3рб3укр3қаз3հայ3ישראל5קום3ابوظبي5رامكو5لاردن4بحرين5جزائر5سعودية6عليان5مغرب5مارات5یران5بارت2زار4يتك3ھارت5تونس4سودان3رية5شبكة4عراق2ب2مان4فلسطين6قطر3كاثوليك6وم3مصر2ليسيا5وريتانيا7قع4همراه5پاکستان7ڀارت4कॉम3नेट3भारत0म्3ोत5संगठन5বাংলা5ভারত2ৰত4ਭਾਰਤ4ભારત4ଭାରତ4இந்தியா6லங்கை6சிங்கப்பூர்11భారత్5ಭಾರತ4ഭാരതം5ලංකා4คอม3ไทย3ລາວ3გე2みんな3アマゾン4クラウド4グーグル4コム2ストア3セール3ファッション6ポイント4世界2中信1国1國1文网3亚马逊3企业2佛山2信息2健康2八卦2公司1益2台湾1灣2商城1店1标2嘉里0大酒店5在线2大拿2天主教3娱乐2家電2广东2微博2慈善2我爱你3手机2招聘2政务1府2新加坡2闻2时尚2書籍2机构2淡马锡3游戏2澳門2点看2移动2组织机构4网址1店1站1络2联通2谷歌2购物2通販2集团2電訊盈科4飞利浦3食品2餐厅2香格里拉3港2닷넷1컴2삼성2한국2",Yl=(n,e)=>{for(const t in e)n[t]=e[t];return n},qh="numeric",Fh="ascii",$h="alpha",ua="asciinumeric",ia="alphanumeric",Gh="domain",Vv="emoji",sT="scheme",lT="slashscheme",fh="whitespace";function iT(n,e){return n in e||(e[n]=[]),e[n]}function Ts(n,e,t){e[qh]&&(e[ua]=!0,e[ia]=!0),e[Fh]&&(e[ua]=!0,e[$h]=!0),e[ua]&&(e[ia]=!0),e[$h]&&(e[ia]=!0),e[ia]&&(e[Gh]=!0),e[Vv]&&(e[Gh]=!0);for(const s in e){const i=iT(s,t);i.indexOf(n)<0&&i.push(n)}}function aT(n,e){const t={};for(const s in e)e[s].indexOf(n)>=0&&(t[s]=!0);return t}function Vt(n=null){this.j={},this.jr=[],this.jd=null,this.t=n}Vt.groups={};Vt.prototype={accepts(){return!!this.t},go(n){const e=this,t=e.j[n];if(t)return t;for(let s=0;s<e.jr.length;s++){const i=e.jr[s][0],a=e.jr[s][1];if(a&&i.test(n))return a}return e.jd},has(n,e=!1){return e?n in this.j:!!this.go(n)},ta(n,e,t,s){for(let i=0;i<n.length;i++)this.tt(n[i],e,t,s)},tr(n,e,t,s){s=s||Vt.groups;let i;return e&&e.j?i=e:(i=new Vt(e),t&&s&&Ts(e,t,s)),this.jr.push([n,i]),i},ts(n,e,t,s){let i=this;const a=n.length;if(!a)return i;for(let c=0;c<a-1;c++)i=i.tt(n[c]);return i.tt(n[a-1],e,t,s)},tt(n,e,t,s){s=s||Vt.groups;const i=this;if(e&&e.j)return i.j[n]=e,e;const a=e;let c,f=i.go(n);if(f?(c=new Vt,Yl(c.j,f.j),c.jr.push.apply(c.jr,f.jr),c.jd=f.jd,c.t=f.t):c=new Vt,a){if(s)if(c.t&&typeof c.t=="string"){const h=Yl(aT(c.t,s),t);Ts(a,h,s)}else t&&Ts(a,t,s);c.t=a}return i.j[n]=c,c}};const Ne=(n,e,t,s,i)=>n.ta(e,t,s,i),Ke=(n,e,t,s,i)=>n.tr(e,t,s,i),bb=(n,e,t,s,i)=>n.ts(e,t,s,i),ee=(n,e,t,s,i)=>n.tt(e,t,s,i),rr="WORD",Yh="UWORD",qv="ASCIINUMERICAL",Fv="ALPHANUMERICAL",Ea="LOCALHOST",Kh="TLD",Jh="UTLD",mc="SCHEME",zl="SLASH_SCHEME",Um="NUM",Qh="WS",Pm="NL",da="OPENBRACE",fa="CLOSEBRACE",Tc="OPENBRACKET",Mc="CLOSEBRACKET",Oc="OPENPAREN",Rc="CLOSEPAREN",Dc="OPENANGLEBRACKET",zc="CLOSEANGLEBRACKET",Lc="FULLWIDTHLEFTPAREN",Bc="FULLWIDTHRIGHTPAREN",_c="LEFTCORNERBRACKET",Hc="RIGHTCORNERBRACKET",Uc="LEFTWHITECORNERBRACKET",Pc="RIGHTWHITECORNERBRACKET",Ic="FULLWIDTHLESSTHAN",Vc="FULLWIDTHGREATERTHAN",qc="AMPERSAND",Fc="APOSTROPHE",$c="ASTERISK",Ir="AT",Gc="BACKSLASH",Yc="BACKTICK",Kc="CARET",qr="COLON",Im="COMMA",Jc="DOLLAR",zn="DOT",Qc="EQUALS",Vm="EXCLAMATION",mn="HYPHEN",ha="PERCENT",Xc="PIPE",Zc="PLUS",Wc="POUND",ma="QUERY",qm="QUOTE",$v="FULLWIDTHMIDDLEDOT",Fm="SEMI",Ln="SLASH",pa="TILDE",eu="UNDERSCORE",Gv="EMOJI",tu="SYM";var Yv=Object.freeze({__proto__:null,ALPHANUMERICAL:Fv,AMPERSAND:qc,APOSTROPHE:Fc,ASCIINUMERICAL:qv,ASTERISK:$c,AT:Ir,BACKSLASH:Gc,BACKTICK:Yc,CARET:Kc,CLOSEANGLEBRACKET:zc,CLOSEBRACE:fa,CLOSEBRACKET:Mc,CLOSEPAREN:Rc,COLON:qr,COMMA:Im,DOLLAR:Jc,DOT:zn,EMOJI:Gv,EQUALS:Qc,EXCLAMATION:Vm,FULLWIDTHGREATERTHAN:Vc,FULLWIDTHLEFTPAREN:Lc,FULLWIDTHLESSTHAN:Ic,FULLWIDTHMIDDLEDOT:$v,FULLWIDTHRIGHTPAREN:Bc,HYPHEN:mn,LEFTCORNERBRACKET:_c,LEFTWHITECORNERBRACKET:Uc,LOCALHOST:Ea,NL:Pm,NUM:Um,OPENANGLEBRACKET:Dc,OPENBRACE:da,OPENBRACKET:Tc,OPENPAREN:Oc,PERCENT:ha,PIPE:Xc,PLUS:Zc,POUND:Wc,QUERY:ma,QUOTE:qm,RIGHTCORNERBRACKET:Hc,RIGHTWHITECORNERBRACKET:Pc,SCHEME:mc,SEMI:Fm,SLASH:Ln,SLASH_SCHEME:zl,SYM:tu,TILDE:pa,TLD:Kh,UNDERSCORE:eu,UTLD:Jh,UWORD:Yh,WORD:rr,WS:Qh});const tr=/[a-z]/,ta=new RegExp("\\p{L}","u"),hh=new RegExp("\\p{Emoji}","u"),nr=/\d/,mh=/\s/,vb="\r",ph=`
`,oT="️",cT="‍",gh="￼";let sc=null,lc=null;function uT(n=[]){const e={};Vt.groups=e;const t=new Vt;sc==null&&(sc=Sb(nT)),lc==null&&(lc=Sb(rT)),ee(t,"'",Fc),ee(t,"{",da),ee(t,"}",fa),ee(t,"[",Tc),ee(t,"]",Mc),ee(t,"(",Oc),ee(t,")",Rc),ee(t,"<",Dc),ee(t,">",zc),ee(t,"（",Lc),ee(t,"）",Bc),ee(t,"「",_c),ee(t,"」",Hc),ee(t,"『",Uc),ee(t,"』",Pc),ee(t,"＜",Ic),ee(t,"＞",Vc),ee(t,"&",qc),ee(t,"*",$c),ee(t,"@",Ir),ee(t,"`",Yc),ee(t,"^",Kc),ee(t,":",qr),ee(t,",",Im),ee(t,"$",Jc),ee(t,".",zn),ee(t,"=",Qc),ee(t,"!",Vm),ee(t,"-",mn),ee(t,"%",ha),ee(t,"|",Xc),ee(t,"+",Zc),ee(t,"#",Wc),ee(t,"?",ma),ee(t,'"',qm),ee(t,"/",Ln),ee(t,";",Fm),ee(t,"~",pa),ee(t,"_",eu),ee(t,"\\",Gc),ee(t,"・",$v);const s=Ke(t,nr,Um,{[qh]:!0});Ke(s,nr,s);const i=Ke(s,tr,qv,{[ua]:!0}),a=Ke(s,ta,Fv,{[ia]:!0}),c=Ke(t,tr,rr,{[Fh]:!0});Ke(c,nr,i),Ke(c,tr,c),Ke(i,nr,i),Ke(i,tr,i);const f=Ke(t,ta,Yh,{[$h]:!0});Ke(f,tr),Ke(f,nr,a),Ke(f,ta,f),Ke(a,nr,a),Ke(a,tr),Ke(a,ta,a);const h=ee(t,ph,Pm,{[fh]:!0}),m=ee(t,vb,Qh,{[fh]:!0}),g=Ke(t,mh,Qh,{[fh]:!0});ee(t,gh,g),ee(m,ph,h),ee(m,gh,g),Ke(m,mh,g),ee(g,vb),ee(g,ph),Ke(g,mh,g),ee(g,gh,g);const y=Ke(t,hh,Gv,{[Vv]:!0});ee(y,"#"),Ke(y,hh,y),ee(y,oT,y);const b=ee(y,cT);ee(b,"#"),Ke(b,hh,y);const S=[[tr,c],[nr,i]],v=[[tr,null],[ta,f],[nr,a]];for(let w=0;w<sc.length;w++)_r(t,sc[w],Kh,rr,S);for(let w=0;w<lc.length;w++)_r(t,lc[w],Jh,Yh,v);Ts(Kh,{tld:!0,ascii:!0},e),Ts(Jh,{utld:!0,alpha:!0},e),_r(t,"file",mc,rr,S),_r(t,"mailto",mc,rr,S),_r(t,"http",zl,rr,S),_r(t,"https",zl,rr,S),_r(t,"ftp",zl,rr,S),_r(t,"ftps",zl,rr,S),Ts(mc,{scheme:!0,ascii:!0},e),Ts(zl,{slashscheme:!0,ascii:!0},e),n=n.sort((w,k)=>w[0]>k[0]?1:-1);for(let w=0;w<n.length;w++){const k=n[w][0],O=n[w][1]?{[sT]:!0}:{[lT]:!0};k.indexOf("-")>=0?O[Gh]=!0:tr.test(k)?nr.test(k)?O[ua]=!0:O[Fh]=!0:O[qh]=!0,bb(t,k,k,O)}return bb(t,"localhost",Ea,{ascii:!0}),t.jd=new Vt(tu),{start:t,tokens:Yl({groups:e},Yv)}}function Kv(n,e){const t=dT(e.replace(/[A-Z]/g,f=>f.toLowerCase())),s=t.length,i=[];let a=0,c=0;for(;c<s;){let f=n,h=null,m=0,g=null,y=-1,b=-1;for(;c<s&&(h=f.go(t[c]));)f=h,f.accepts()?(y=0,b=0,g=f):y>=0&&(y+=t[c].length,b++),m+=t[c].length,a+=t[c].length,c++;a-=y,c-=b,m-=y,i.push({t:g.t,v:e.slice(a-m,a),s:a-m,e:a})}return i}function dT(n){const e=[],t=n.length;let s=0;for(;s<t;){let i=n.charCodeAt(s),a,c=i<55296||i>56319||s+1===t||(a=n.charCodeAt(s+1))<56320||a>57343?n[s]:n.slice(s,s+2);e.push(c),s+=c.length}return e}function _r(n,e,t,s,i){let a;const c=e.length;for(let f=0;f<c-1;f++){const h=e[f];n.j[h]?a=n.j[h]:(a=new Vt(s),a.jr=i.slice(),n.j[h]=a),n=a}return a=new Vt(t),a.jr=i.slice(),n.j[e[c-1]]=a,a}function Sb(n){const e=[],t=[];let s=0,i="0123456789";for(;s<n.length;){let a=0;for(;i.indexOf(n[s+a])>=0;)a++;if(a>0){e.push(t.join(""));for(let c=parseInt(n.substring(s,s+a),10);c>0;c--)t.pop();s+=a}else t.push(n[s]),s++}return e}const Aa={defaultProtocol:"http",events:null,format:Nb,formatHref:Nb,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function $m(n,e=null){let t=Yl({},Aa);n&&(t=Yl(t,n instanceof $m?n.o:n));const s=t.ignoreTags,i=[];for(let a=0;a<s.length;a++)i.push(s[a].toUpperCase());this.o=t,e&&(this.defaultRender=e),this.ignoreTags=i}$m.prototype={o:Aa,ignoreTags:[],defaultRender(n){return n},check(n){return this.get("validate",n.toString(),n)},get(n,e,t){const s=e!=null;let i=this.o[n];return i&&(typeof i=="object"?(i=t.t in i?i[t.t]:Aa[n],typeof i=="function"&&s&&(i=i(e,t))):typeof i=="function"&&s&&(i=i(e,t.t,t)),i)},getObj(n,e,t){let s=this.o[n];return typeof s=="function"&&e!=null&&(s=s(e,t.t,t)),s},render(n){const e=n.render(this);return(this.get("render",null,n)||this.defaultRender)(e,n.t,n)}};function Nb(n){return n}function Jv(n,e){this.t="token",this.v=n,this.tk=e}Jv.prototype={isLink:!1,toString(){return this.v},toHref(n){return this.toString()},toFormattedString(n){const e=this.toString(),t=n.get("truncate",e,this),s=n.get("format",e,this);return t&&s.length>t?s.substring(0,t)+"…":s},toFormattedHref(n){return n.get("formatHref",this.toHref(n.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(n=Aa.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(n),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(n){return{type:this.t,value:this.toFormattedString(n),isLink:this.isLink,href:this.toFormattedHref(n),start:this.startIndex(),end:this.endIndex()}},validate(n){return n.get("validate",this.toString(),this)},render(n){const e=this,t=this.toHref(n.get("defaultProtocol")),s=n.get("formatHref",t,this),i=n.get("tagName",t,e),a=this.toFormattedString(n),c={},f=n.get("className",t,e),h=n.get("target",t,e),m=n.get("rel",t,e),g=n.getObj("attributes",t,e),y=n.getObj("events",t,e);return c.href=s,f&&(c.class=f),h&&(c.target=h),m&&(c.rel=m),g&&Yl(c,g),{tagName:i,attributes:c,content:a,eventListeners:y}}};function bu(n,e){class t extends Jv{constructor(i,a){super(i,a),this.t=n}}for(const s in e)t.prototype[s]=e[s];return t.t=n,t}const wb=bu("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),kb=bu("text"),fT=bu("nl"),ic=bu("url",{isLink:!0,toHref(n=Aa.defaultProtocol){return this.hasProtocol()?this.v:`${n}://${this.v}`},hasProtocol(){const n=this.tk;return n.length>=2&&n[0].t!==Ea&&n[1].t===qr}}),hn=n=>new Vt(n);function hT({groups:n}){const e=n.domain.concat([qc,$c,Ir,Gc,Yc,Kc,Jc,Qc,mn,Um,ha,Xc,Zc,Wc,Ln,tu,pa,eu]),t=[Fc,qr,Im,zn,Vm,ha,ma,qm,Fm,Dc,zc,da,fa,Mc,Tc,Oc,Rc,Lc,Bc,_c,Hc,Uc,Pc,Ic,Vc],s=[qc,Fc,$c,Gc,Yc,Kc,Jc,Qc,mn,da,fa,ha,Xc,Zc,Wc,ma,Ln,tu,pa,eu],i=hn(),a=ee(i,pa);Ne(a,s,a),Ne(a,n.domain,a);const c=hn(),f=hn(),h=hn();Ne(i,n.domain,c),Ne(i,n.scheme,f),Ne(i,n.slashscheme,h),Ne(c,s,a),Ne(c,n.domain,c);const m=ee(c,Ir);ee(a,Ir,m),ee(f,Ir,m),ee(h,Ir,m);const g=ee(a,zn);Ne(g,s,a),Ne(g,n.domain,a);const y=hn();Ne(m,n.domain,y),Ne(y,n.domain,y);const b=ee(y,zn);Ne(b,n.domain,y);const S=hn(wb);Ne(b,n.tld,S),Ne(b,n.utld,S),ee(m,Ea,S);const v=ee(y,mn);ee(v,mn,v),Ne(v,n.domain,y),Ne(S,n.domain,y),ee(S,zn,b),ee(S,mn,v);const w=ee(S,qr);Ne(w,n.numeric,wb);const k=ee(c,mn),E=ee(c,zn);ee(k,mn,k),Ne(k,n.domain,c),Ne(E,s,a),Ne(E,n.domain,c);const O=hn(ic);Ne(E,n.tld,O),Ne(E,n.utld,O),Ne(O,n.domain,c),Ne(O,s,a),ee(O,zn,E),ee(O,mn,k),ee(O,Ir,m);const B=ee(O,qr),q=hn(ic);Ne(B,n.numeric,q);const D=hn(ic),R=hn();Ne(D,e,D),Ne(D,t,R),Ne(R,e,D),Ne(R,t,R),ee(O,Ln,D),ee(q,Ln,D);const L=ee(f,qr),$=ee(h,qr),te=ee($,Ln),se=ee(te,Ln);Ne(f,n.domain,c),ee(f,zn,E),ee(f,mn,k),Ne(h,n.domain,c),ee(h,zn,E),ee(h,mn,k),Ne(L,n.domain,D),ee(L,Ln,D),ee(L,ma,D),Ne(se,n.domain,D),Ne(se,e,D),ee(se,Ln,D);const ue=[[da,fa],[Tc,Mc],[Oc,Rc],[Dc,zc],[Lc,Bc],[_c,Hc],[Uc,Pc],[Ic,Vc]];for(let Z=0;Z<ue.length;Z++){const[ye,ge]=ue[Z],Te=ee(D,ye);ee(R,ye,Te),ee(Te,ge,D);const I=hn(ic);Ne(Te,e,I);const ne=hn();Ne(Te,t),Ne(I,e,I),Ne(I,t,ne),Ne(ne,e,I),Ne(ne,t,ne),ee(I,ge,D),ee(ne,ge,D)}return ee(i,Ea,O),ee(i,Pm,fT),{start:i,tokens:Yv}}function mT(n,e,t){let s=t.length,i=0,a=[],c=[];for(;i<s;){let f=n,h=null,m=null,g=0,y=null,b=-1;for(;i<s&&!(h=f.go(t[i].t));)c.push(t[i++]);for(;i<s&&(m=h||f.go(t[i].t));)h=null,f=m,f.accepts()?(b=0,y=f):b>=0&&b++,i++,g++;if(b<0)i-=g,i<s&&(c.push(t[i]),i++);else{c.length>0&&(a.push(xh(kb,e,c)),c=[]),i-=b,g-=b;const S=y.t,v=t.slice(i-g,i);a.push(xh(S,e,v))}}return c.length>0&&a.push(xh(kb,e,c)),a}function xh(n,e,t){const s=t[0].s,i=t[t.length-1].e,a=e.slice(s,i);return new n(a,t)}const pT=typeof console<"u"&&console&&console.warn||(()=>{}),gT="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Ve={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function xT(){return Vt.groups={},Ve.scanner=null,Ve.parser=null,Ve.tokenQueue=[],Ve.pluginQueue=[],Ve.customSchemes=[],Ve.initialized=!1,Ve}function jb(n,e=!1){if(Ve.initialized&&pT(`linkifyjs: already initialized - will not register custom scheme "${n}" ${gT}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(n))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);Ve.customSchemes.push([n,e])}function yT(){Ve.scanner=uT(Ve.customSchemes);for(let n=0;n<Ve.tokenQueue.length;n++)Ve.tokenQueue[n][1]({scanner:Ve.scanner});Ve.parser=hT(Ve.scanner.tokens);for(let n=0;n<Ve.pluginQueue.length;n++)Ve.pluginQueue[n][1]({scanner:Ve.scanner,parser:Ve.parser});return Ve.initialized=!0,Ve}function Gm(n){return Ve.initialized||yT(),mT(Ve.parser.start,n,Kv(Ve.scanner.start,n))}Gm.scan=Kv;function Qv(n,e=null,t=null){if(e&&typeof e=="object"){if(t)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);t=e,e=null}const s=new $m(t),i=Gm(n),a=[];for(let c=0;c<i.length;c++){const f=i[c];f.isLink&&(!e||f.t===e)&&s.check(f)&&a.push(f.toFormattedObject(s))}return a}function bT(n){return n.length===1?n[0].isLink:n.length===3&&n[1].isLink?["()","[]"].includes(n[0].value+n[2].value):!1}function vT(n){return new Nt({key:new nn("autolink"),appendTransaction:(e,t,s)=>{const i=e.some(m=>m.docChanged)&&!t.doc.eq(s.doc),a=e.some(m=>m.getMeta("preventAutolink"));if(!i||a)return;const{tr:c}=s,f=Y4(t.doc,[...e]);if(t3(f).forEach(({newRange:m})=>{const g=J4(s.doc,m,S=>S.isTextblock);let y,b;if(g.length>1?(y=g[0],b=s.doc.textBetween(y.pos,y.pos+y.node.nodeSize,void 0," ")):g.length&&s.doc.textBetween(m.from,m.to," "," ").endsWith(" ")&&(y=g[0],b=s.doc.textBetween(y.pos,m.to,void 0," ")),y&&b){const S=b.split(" ").filter(E=>E!=="");if(S.length<=0)return!1;const v=S[S.length-1],w=y.pos+b.lastIndexOf(v);if(!v)return!1;const k=Gm(v).map(E=>E.toObject(n.defaultProtocol));if(!bT(k))return!1;k.filter(E=>E.isLink).map(E=>({...E,from:w+E.start+1,to:w+E.end+1})).filter(E=>s.schema.marks.code?!s.doc.rangeHasMark(E.from,E.to,s.schema.marks.code):!0).filter(E=>n.validate(E.value)).filter(E=>n.shouldAutoLink(E.value)).forEach(E=>{zm(E.from,E.to,s.doc).some(O=>O.mark.type===n.type)||c.addMark(E.from,E.to,n.type.create({href:E.href}))})}}),!!c.steps.length)return c}})}function ST(n){return new Nt({key:new nn("handleClickLink"),props:{handleClick:(e,t,s)=>{var i,a;if(s.button!==0||!e.editable)return!1;let c=s.target;const f=[];for(;c.nodeName!=="DIV";)f.push(c),c=c.parentNode;if(!f.find(b=>b.nodeName==="A"))return!1;const h=zv(e.state,n.type.name),m=s.target,g=(i=m==null?void 0:m.href)!==null&&i!==void 0?i:h.href,y=(a=m==null?void 0:m.target)!==null&&a!==void 0?a:h.target;return m&&g?(window.open(g,y),!0):!1}}})}function NT(n){return new Nt({key:new nn("handlePasteLink"),props:{handlePaste:(e,t,s)=>{const{state:i}=e,{selection:a}=i,{empty:c}=a;if(c)return!1;let f="";s.content.forEach(m=>{f+=m.textContent});const h=Qv(f,{defaultProtocol:n.defaultProtocol}).find(m=>m.isLink&&m.value===f);return!f||!h?!1:n.editor.commands.setMark(n.type,{href:h.href})}}})}const wT=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g;function Ss(n,e){const t=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(s=>{const i=typeof s=="string"?s:s.scheme;i&&t.push(i)}),!n||n.replace(wT,"").match(new RegExp(`^(?:(?:${t.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}const kT=ur.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(n=>{if(typeof n=="string"){jb(n);return}jb(n.scheme,n.optionalSlashes)})},onDestroy(){xT()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(n,e)=>!!Ss(n,e.protocols),validate:n=>!!n,shouldAutoLink:n=>!!n}},addAttributes(){return{href:{default:null,parseHTML(n){return n.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:n=>{const e=n.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:t=>!!Ss(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:n}){return this.options.isAllowedUri(n.href,{defaultValidate:e=>!!Ss(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",pt(this.options.HTMLAttributes,n),0]:["a",pt(this.options.HTMLAttributes,{...n,href:""}),0]},addCommands(){return{setLink:n=>({chain:e})=>{const{href:t}=n;return this.options.isAllowedUri(t,{defaultValidate:s=>!!Ss(s,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,n).setMeta("preventAutolink",!0).run():!1},toggleLink:n=>({chain:e})=>{const{href:t}=n;return this.options.isAllowedUri(t,{defaultValidate:s=>!!Ss(s,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().toggleMark(this.name,n,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run():!1},unsetLink:()=>({chain:n})=>n().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Ps({find:n=>{const e=[];if(n){const{protocols:t,defaultProtocol:s}=this.options,i=Qv(n).filter(a=>a.isLink&&this.options.isAllowedUri(a.value,{defaultValidate:c=>!!Ss(c,t),protocols:t,defaultProtocol:s}));i.length&&i.forEach(a=>e.push({text:a.value,data:{href:a.href},index:a.start}))}return e},type:this.type,getAttributes:n=>{var e;return{href:(e=n.data)===null||e===void 0?void 0:e.href}}})]},addProseMirrorPlugins(){const n=[],{protocols:e,defaultProtocol:t}=this.options;return this.options.autolink&&n.push(vT({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:s=>this.options.isAllowedUri(s,{defaultValidate:i=>!!Ss(i,e),protocols:e,defaultProtocol:t}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&n.push(ST({type:this.type})),this.options.linkOnPaste&&n.push(NT({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),n}}),jT=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,CT=Lt.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{}}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:n}){return["img",pt(this.options.HTMLAttributes,n)]},addCommands(){return{setImage:n=>({commands:e})=>e.insertContent({type:this.name,attrs:n})}},addInputRules(){return[Lv({find:jT,type:this.type,getAttributes:n=>{const[,,e,t,s]=n;return{src:t,alt:e,title:s}}})]}}),Cb=({value:n,onChange:e})=>{const t=Z3({extensions:[tT,kT.configure({openOnClick:!1,HTMLAttributes:{class:"text-blue-600 hover:underline"}}),CT.configure({HTMLAttributes:{class:"max-w-full h-auto rounded"}})],content:n,onUpdate:({editor:s})=>{e(s.getHTML())},editorProps:{attributes:{class:"prose prose-sm max-w-none focus:outline-none min-h-[150px]"}}});return t?d.jsxs("div",{className:"border border-gray-300 rounded-md shadow-sm",children:[d.jsxs("div",{className:"border-b border-gray-300 bg-gray-50 p-2 flex gap-2",children:[d.jsx("button",{onClick:()=>t.chain().focus().toggleBold().run(),className:`p-1 rounded ${t.isActive("bold")?"bg-gray-200":"hover:bg-gray-100"}`,title:"Bold",children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M6 4h8a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"}),d.jsx("path",{d:"M6 12h9a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"})]})}),d.jsx("button",{onClick:()=>t.chain().focus().toggleItalic().run(),className:`p-1 rounded ${t.isActive("italic")?"bg-gray-200":"hover:bg-gray-100"}`,title:"Italic",children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("line",{x1:"19",y1:"4",x2:"10",y2:"4"}),d.jsx("line",{x1:"14",y1:"20",x2:"5",y2:"20"}),d.jsx("line",{x1:"15",y1:"4",x2:"9",y2:"20"})]})}),d.jsx("button",{onClick:()=>t.chain().focus().toggleBulletList().run(),className:`p-1 rounded ${t.isActive("bulletList")?"bg-gray-200":"hover:bg-gray-100"}`,title:"Bullet List",children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("line",{x1:"8",y1:"6",x2:"21",y2:"6"}),d.jsx("line",{x1:"8",y1:"12",x2:"21",y2:"12"}),d.jsx("line",{x1:"8",y1:"18",x2:"21",y2:"18"}),d.jsx("line",{x1:"3",y1:"6",x2:"3.01",y2:"6"}),d.jsx("line",{x1:"3",y1:"12",x2:"3.01",y2:"12"}),d.jsx("line",{x1:"3",y1:"18",x2:"3.01",y2:"18"})]})}),d.jsx("button",{onClick:()=>t.chain().focus().toggleOrderedList().run(),className:`p-1 rounded ${t.isActive("orderedList")?"bg-gray-200":"hover:bg-gray-100"}`,title:"Ordered List",children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("line",{x1:"10",y1:"6",x2:"21",y2:"6"}),d.jsx("line",{x1:"10",y1:"12",x2:"21",y2:"12"}),d.jsx("line",{x1:"10",y1:"18",x2:"21",y2:"18"}),d.jsx("path",{d:"M4 6h1v4"}),d.jsx("path",{d:"M4 10h2"}),d.jsx("path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1"})]})}),d.jsx("button",{onClick:()=>{const s=window.prompt("Enter the URL");s&&t.chain().focus().setLink({href:s}).run()},className:`p-1 rounded ${t.isActive("link")?"bg-gray-200":"hover:bg-gray-100"}`,title:"Add Link",children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}),d.jsx("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"})]})})]}),d.jsx(V3,{editor:t,className:"p-3"})]}):null},ET=({onSuccess:n,onError:e})=>{const{token:t}=tt(),[s,i]=C.useState(80),[a,c]=C.useState(120),[f,h]=C.useState(0),[m,g]=C.useState(5e3),[y,b]=C.useState([]),[S,v]=C.useState(!1),[w,k]=C.useState(null),[E,O]=C.useState({image:null,title:"",subtitle:"",link:"",order:0,is_active:!0}),[B,q]=C.useState({}),[D,R]=C.useState({message:"",type:"success",visible:!1}),[L,$]=C.useState(!0),[te,se]=C.useState(!1),ue=C.useRef(null),[Z,ye]=C.useState(""),[ge,Te]=C.useState(""),I=(X,ae)=>{R({message:X,type:ae,visible:!0}),ae==="success"&&n&&n(X),ae==="error"&&e&&e(X)},ne=async()=>{$(!0);try{if(!t)return;const X=await Sh.getAllSettings(t),ae=X.find(Bt=>Bt.key==="delivery_fee_ncr"),le=X.find(Bt=>Bt.key==="delivery_fee_outside_ncr"),lt=X.find(Bt=>Bt.key==="free_delivery_threshold"),De=X.find(Bt=>Bt.key==="payment_options_description"),Ft=X.find(Bt=>Bt.key==="what_happens_after_payment");ae&&i(parseInt(ae.value)),le&&c(parseInt(le.value)),lt&&h(parseInt(lt.value)),De&&ye(De.value||""),Ft&&Te(Ft.value||"");const Vs=await na.getAll(t);b(Vs.data.carousels),g(Vs.data.interval)}catch{I("Failed to load settings","error")}finally{$(!1)}};C.useEffect(()=>{ne()},[t]);const re=async X=>{if(X.preventDefault(),!!t){se(!0);try{await Sh.updateMultipleSettings(t,[{key:"delivery_fee_ncr",value:s},{key:"delivery_fee_outside_ncr",value:a},{key:"free_delivery_threshold",value:f},{key:"hero_carousel_interval",value:m},{key:"payment_options_description",value:Z},{key:"what_happens_after_payment",value:ge}]),I("Settings updated successfully.","success")}catch{I("Failed to update settings.","error")}finally{se(!1)}}},K=X=>{k(X),O({...X,image:null}),v(!0)},T=async X=>{if(t&&window.confirm("Delete this slide?"))try{await na.delete(t,X),I("Slide deleted successfully.","success"),ne()}catch{I("Failed to delete slide.","error")}},H=X=>{const{name:ae,value:le,type:lt}=X.target;let De=le;lt==="checkbox"&&X.target instanceof HTMLInputElement&&(De=X.target.checked),O(Ft=>({...Ft,[ae]:De}))},F=X=>{X.target.files&&X.target.files[0]&&O(ae=>({...ae,image:X.target.files[0]}))},Q=async X=>{if(X.preventDefault(),!t)return;q({});const ae=new FormData;E.image&&ae.append("image",E.image),ae.append("title",E.title||""),ae.append("subtitle",E.subtitle||""),ae.append("link",E.link||""),ae.append("order",String(E.order||0)),ae.append("is_active",E.is_active?"1":"0");try{w?(await na.update(t,w.id,ae),I("Slide updated successfully.","success")):(await na.create(t,ae),I("Slide created successfully.","success")),v(!1),k(null),O({image:null,title:"",subtitle:"",link:"",order:0,is_active:!0}),ne()}catch(le){console.log(le),le&&le.message&&le.message.includes("422")?le.response&&le.response.errors?q(le.response.errors):le.errors?q(le.errors):I("Validation error. Please check your input.","error"):le&&le.errors?(q(le.errors),I("Validation error. Please check your input.","error")):I(le.message||"Failed to save.","error")}};return L?d.jsx("div",{className:"p-4",children:"Loading settings..."}):d.jsxs("div",{className:"bg-white p-6 rounded shadow",children:[d.jsx(Bk,{message:D.message,type:D.type,isVisible:D.visible,onClose:()=>R(X=>({...X,visible:!1}))}),d.jsx("h2",{className:"text-xl font-medium mb-6",children:"Shop Settings"}),d.jsxs("form",{onSubmit:re,children:[d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Standard Delivery Fee Within NCR (₱)"}),d.jsx("input",{type:"number",min:0,step:1,value:s,onChange:X=>i(parseInt(X.target.value)||0),className:"w-full border-gray-300 rounded-md shadow-sm p-2 border",required:!0}),d.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"The standard delivery fee for addresses within NCR."})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Standard Delivery Fee Outside NCR (₱)"}),d.jsx("input",{type:"number",min:0,step:1,value:a,onChange:X=>c(parseInt(X.target.value)||0),className:"w-full border-gray-300 rounded-md shadow-sm p-2 border",required:!0}),d.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"The standard delivery fee for addresses outside NCR."})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Free Delivery Threshold (₱)"}),d.jsx("input",{type:"number",min:0,step:1,value:f,onChange:X=>h(parseInt(X.target.value)||0),className:"w-full border-gray-300 rounded-md shadow-sm p-2 border"}),d.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Orders above this amount will qualify for free delivery. Set to 0 to disable free delivery."})]}),d.jsxs("div",{className:"mb-6",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Options Description"}),d.jsx(Cb,{value:Z,onChange:ye}),d.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"This description will be shown to customers at checkout. You can use formatting, links, and images."})]}),d.jsxs("div",{className:"mb-6",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"What Happens After Payment"}),d.jsx(Cb,{value:ge,onChange:Te}),d.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"This description will be shown to customers after they place an order. You can use formatting, links, and images."})]}),d.jsxs("div",{className:"mb-6",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hero Carousel Image Change Interval (ms)"}),d.jsx("input",{type:"number",min:1e3,step:100,value:m,onChange:X=>g(parseInt(X.target.value,10)),className:"w-40 border-gray-300 rounded-md shadow-sm p-2 border"})]}),d.jsx("div",{className:"flex justify-end",children:d.jsx("button",{type:"submit",disabled:te,className:"bg-black text-white px-4 py-2 rounded hover:bg-gray-800 disabled:bg-gray-400",children:te?"Saving...":"Save Settings"})})]}),d.jsxs("div",{className:"mt-10",children:[d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsx("h3",{className:"text-lg font-semibold",children:"Hero Carousel Slides"}),d.jsx("button",{className:"bg-black text-white px-4 py-2 rounded hover:bg-gray-800",onClick:()=>{v(!0),k(null),O({image:null,title:"",subtitle:"",link:"",order:0,is_active:!0})},children:"Add Slide"})]}),d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"min-w-full divide-y divide-gray-200 mb-6",children:[d.jsx("thead",{className:"bg-gray-50",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-4 py-2",children:"Image"}),d.jsx("th",{className:"px-4 py-2",children:"Title"}),d.jsx("th",{className:"px-4 py-2",children:"Subtitle"}),d.jsx("th",{className:"px-4 py-2",children:"Link"}),d.jsx("th",{className:"px-4 py-2",children:"Order"}),d.jsx("th",{className:"px-4 py-2",children:"Active"}),d.jsx("th",{className:"px-4 py-2",children:"Actions"})]})}),d.jsx("tbody",{children:y.map(X=>d.jsxs("tr",{className:"border-b",children:[d.jsx("td",{className:"px-4 py-2",children:X.image_url&&d.jsx("img",{src:X.image_url,alt:"",className:"h-16 w-32 object-cover rounded"})}),d.jsx("td",{className:"px-4 py-2",children:X.title}),d.jsx("td",{className:"px-4 py-2",children:X.subtitle}),d.jsx("td",{className:"px-4 py-2",children:X.link}),d.jsx("td",{className:"px-4 py-2",children:X.order}),d.jsx("td",{className:"px-4 py-2",children:X.is_active?"Yes":"No"}),d.jsxs("td",{className:"px-4 py-2 space-x-2",children:[d.jsx("button",{className:"text-blue-600 hover:underline",onClick:()=>K(X),children:"Edit"}),d.jsx("button",{className:"text-red-600 hover:underline",onClick:()=>T(X.id),children:"Delete"})]})]},X.id))})]})})]}),d.jsx(_k,{isOpen:S,onClose:()=>{v(!1),k(null),q({})},title:w?"Edit Slide":"Add Slide",children:d.jsxs("form",{onSubmit:Q,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Image"}),d.jsx("input",{type:"file",accept:"image/*",onChange:F,ref:ue}),E.image&&d.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Selected: ",E.image.name]}),!E.image&&E.image_url&&d.jsx("img",{src:E.image_url,alt:"",className:"h-16 w-32 object-cover rounded mt-2"}),B.image&&d.jsx("div",{className:"text-red-600 text-xs mt-1",children:B.image.join(", ")})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Title"}),d.jsx("input",{type:"text",name:"title",value:E.title||"",onChange:H,className:"w-full border-gray-300 rounded-md shadow-sm p-2 border"}),B.title&&d.jsx("div",{className:"text-red-600 text-xs mt-1",children:B.title.join(", ")})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Subtitle"}),d.jsx("input",{type:"text",name:"subtitle",value:E.subtitle||"",onChange:H,className:"w-full border-gray-300 rounded-md shadow-sm p-2 border"}),B.subtitle&&d.jsx("div",{className:"text-red-600 text-xs mt-1",children:B.subtitle.join(", ")})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Link"}),d.jsx("input",{type:"text",name:"link",value:E.link||"",onChange:H,className:"w-full border-gray-300 rounded-md shadow-sm p-2 border"}),B.link&&d.jsx("div",{className:"text-red-600 text-xs mt-1",children:B.link.join(", ")})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Order"}),d.jsx("input",{type:"number",name:"order",value:E.order||0,onChange:H,className:"w-full border-gray-300 rounded-md shadow-sm p-2 border"}),B.order&&d.jsx("div",{className:"text-red-600 text-xs mt-1",children:B.order.join(", ")})]}),d.jsxs("div",{children:[d.jsxs("label",{className:"inline-flex items-center",children:[d.jsx("input",{type:"checkbox",name:"is_active",checked:!!E.is_active,onChange:H,className:"mr-2"}),"Active"]}),B.is_active&&d.jsx("div",{className:"text-red-600 text-xs mt-1",children:B.is_active.join(", ")})]}),d.jsxs("div",{className:"flex space-x-2",children:[d.jsx("button",{type:"submit",className:"bg-black text-white px-4 py-2 rounded hover:bg-gray-800",children:w?"Update":"Create"}),d.jsx("button",{type:"button",className:"bg-gray-200 text-gray-700 px-4 py-2 rounded",onClick:()=>{v(!1),k(null),q({})},children:"Cancel"})]})]})})]})},AT=({user:n,isOpen:e,onClose:t,onSubmit:s,isLoading:i,error:a})=>{const[c,f]=C.useState(""),[h,m]=C.useState("");return C.useEffect(()=>{f(""),m("")},[e,n]),!e||!n?null:d.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:d.jsxs("div",{className:"bg-white rounded shadow-lg p-6 w-full max-w-sm",children:[d.jsxs("h3",{className:"text-lg font-semibold mb-4",children:["Change Password for ",n.name]}),a&&d.jsx("div",{className:"mb-2 text-red-600 text-sm",children:a}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"New Password"}),d.jsx("input",{type:"password",className:"w-full border border-gray-300 rounded px-3 py-2",value:c,onChange:g=>f(g.target.value),autoFocus:!0})]}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Confirm Password"}),d.jsx("input",{type:"password",className:"w-full border border-gray-300 rounded px-3 py-2",value:h,onChange:g=>m(g.target.value)})]}),d.jsxs("div",{className:"flex justify-end gap-2",children:[d.jsx("button",{className:"px-4 py-2 bg-gray-200 rounded text-gray-700",onClick:t,disabled:i,children:"Cancel"}),d.jsx("button",{className:"px-4 py-2 bg-black text-white rounded",onClick:()=>s(n.id,c,h),disabled:i||!c||!h,children:i?"Saving...":"Save"})]})]})})},TT=()=>{const{token:n}=tt(),[e,t]=C.useState([]),[s,i]=C.useState(!0),[a,c]=C.useState(""),[f,h]=C.useState(null),[m,g]=C.useState(!1),[y,b]=C.useState(!1),[S,v]=C.useState(null),[w,k]=C.useState(null);C.useEffect(()=>{E()},[n]);const E=async()=>{i(!0);try{if(!n)return;const R=await ty.getAllUsers(n);t(R.users||[])}catch{}finally{i(!1)}},O=e.filter(R=>{var L,$;return R.name.toLowerCase().includes(a.toLowerCase())||R.email.toLowerCase().includes(a.toLowerCase())||((($=(L=R.profile)==null?void 0:L.instagram_username)==null?void 0:$.toLowerCase().includes(a.toLowerCase()))??!1)}),B=R=>{h(R),g(!0),v(null),k(null)},q=()=>{g(!1),h(null),v(null),k(null)},D=async(R,L,$)=>{b(!0),v(null);try{if(!n)return;await ty.changeUserPassword(n,R,L,$),k("Password updated successfully."),setTimeout(()=>{q()},1200)}catch(te){v(te.message||"Failed to update password.")}finally{b(!1)}};return d.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[d.jsx("h2",{className:"text-xl font-semibold mb-6",children:"Manage Users"}),d.jsx("div",{className:"mb-4 flex flex-col sm:flex-row sm:items-center gap-2",children:d.jsx("input",{type:"text",placeholder:"Search by name, email, or Instagram username...",value:a,onChange:R=>c(R.target.value),className:"w-full sm:w-64 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-black focus:border-black"})}),s?d.jsx("div",{className:"text-center py-8",children:"Loading users..."}):O.length===0?d.jsx("div",{className:"text-center py-8 text-gray-500",children:"No users found."}):d.jsxs("div",{className:"overflow-x-auto",children:[d.jsxs("table",{className:"min-w-full divide-y divide-gray-200 mb-6 hidden md:table",children:[d.jsx("thead",{className:"bg-gray-50",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),d.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Email"}),d.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Role"}),d.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Instagram"}),d.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Address"}),d.jsx("th",{className:"px-4 py-2"})]})}),d.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:O.map(R=>{var L;return d.jsxs("tr",{children:[d.jsx("td",{className:"px-4 py-2",children:R.name}),d.jsx("td",{className:"px-4 py-2",children:R.email}),d.jsx("td",{className:"px-4 py-2",children:R.role}),d.jsx("td",{className:"px-4 py-2",children:((L=R.profile)==null?void 0:L.instagram_username)||""}),d.jsx("td",{className:"px-4 py-2",children:R.profile?[R.profile.address_line1,R.profile.barangay,R.profile.city,R.profile.province].filter(Boolean).join(", "):""}),d.jsx("td",{className:"px-4 py-2",children:d.jsx("button",{className:"bg-black text-white px-3 py-1 rounded text-sm",onClick:()=>B(R),children:"Change Password"})})]},R.id)})})]}),d.jsx("div",{className:"md:hidden space-y-4",children:O.map(R=>{var L;return d.jsxs("div",{className:"bg-gray-50 rounded shadow p-4 flex flex-col gap-2",children:[d.jsx("div",{className:"font-semibold text-lg",children:R.name}),d.jsx("div",{className:"text-sm text-gray-700",children:R.email}),d.jsxs("div",{className:"text-xs text-gray-500",children:["Role: ",R.role]}),d.jsxs("div",{className:"text-xs text-gray-500",children:["Instagram: ",((L=R.profile)==null?void 0:L.instagram_username)||""]}),d.jsxs("div",{className:"text-xs text-gray-500",children:["Address: ",R.profile?[R.profile.address_line1,R.profile.barangay,R.profile.city,R.profile.province].filter(Boolean).join(", "):""]}),d.jsx("button",{className:"mt-2 bg-black text-white px-3 py-1 rounded text-sm self-start",onClick:()=>B(R),children:"Change Password"})]},R.id)})})]}),d.jsx(AT,{user:f,isOpen:m,onClose:q,onSubmit:D,isLoading:y,error:S}),w&&d.jsx("div",{className:"fixed bottom-4 left-1/2 transform -translate-x-1/2 bg-green-100 text-green-800 px-4 py-2 rounded shadow",children:w})]})},MT=({tabs:n,activeTab:e,onTabChange:t,className:s="",darkMode:i=!1})=>d.jsxs("div",{className:`border-b ${i?"border-gray-700":"border-gray-200"} ${s}`,children:[d.jsx("nav",{className:"hidden md:flex overflow-x-auto",children:n.map(a=>d.jsxs("button",{className:`px-4 lg:px-6 py-3 font-medium text-sm transition-colors whitespace-nowrap ${e===a.id?i?"border-b-2 border-white text-white bg-gray-800":"border-b-2 border-black text-black bg-white":i?"text-gray-400 hover:text-white hover:bg-gray-700":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,onClick:()=>t(a.id),children:[a.label,a.count!==void 0&&d.jsx("span",{className:`ml-2 px-2 py-0.5 rounded-full text-xs ${e===a.id?i?"bg-white text-gray-800":"bg-black text-white":i?"bg-gray-700 text-gray-200":"bg-gray-200 text-gray-700"}`,children:a.count})]},a.id))}),d.jsx("nav",{className:"md:hidden flex overflow-x-auto hide-scrollbar",children:n.map(a=>d.jsxs("button",{className:`px-3 py-2 font-medium text-xs transition-colors whitespace-nowrap flex items-center ${e===a.id?i?"border-b-2 border-white text-white bg-gray-800":"border-b-2 border-black text-black bg-white":i?"text-gray-400 hover:text-white hover:bg-gray-700":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,onClick:()=>t(a.id),children:[d.jsx("span",{children:a.label}),a.count!==void 0&&d.jsx("span",{className:`ml-1 px-1.5 py-0.5 rounded-full text-xs ${e===a.id?i?"bg-white text-gray-800":"bg-black text-white":i?"bg-gray-700 text-gray-200":"bg-gray-200 text-gray-700"}`,children:a.count})]},a.id))})]}),Xv=({children:n,title:e,showBackButton:t=!1,backButtonPath:s="/admin",backButtonText:i="Back to Admin",tabs:a,activeTab:c,onTabChange:f,darkTabs:h=!1})=>{const{isAdmin:m}=tt();return m?d.jsxs("div",{className:"container mx-auto px-4 py-8",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[d.jsx("h1",{className:"text-2xl font-bold",children:e}),t&&d.jsx(me,{to:s,className:"bg-black text-white px-4 py-2 rounded whitespace-nowrap",children:i})]}),a&&c&&f&&d.jsx("div",{className:`${h?"bg-gray-900":"bg-white"} shadow rounded mb-6`,children:d.jsx(MT,{tabs:a,activeTab:c,onTabChange:f,darkMode:h})}),n]}):d.jsx("div",{className:"container mx-auto px-4 py-8",children:d.jsx("div",{className:"bg-red-100 text-red-700 p-4 rounded",children:d.jsx("p",{children:"You do not have permission to access this page."})})})},Eb=()=>{const{isAdmin:n,token:e}=tt(),{tab:t}=ru(),s=fr(),[i,a]=C.useState("products"),[c,f]=C.useState(null),[h,m]=C.useState(null),g=[{id:"products",label:"Products"},{id:"orders",label:"Orders"},{id:"users",label:"Users"},{id:"announcements",label:"Announcements"},{id:"settings",label:"Settings"}];C.useEffect(()=>{t&&g.some(w=>w.id===t)&&a(t)},[t]);const y=w=>{a(w),s(`/admin/${w}`),f(null),m(null)},b=w=>{f(w),m(null),setTimeout(()=>{f(null)},5e3)},S=w=>{m(w),f(null)},v=()=>i==="products"?null:i==="orders"?d.jsx(me,{to:"/admin-orders",className:"mt-4 sm:mt-0 inline-block bg-black text-white px-4 py-2 rounded",children:"Manage Orders"}):i==="users"?d.jsx(me,{to:"/admin/users",className:"mt-4 sm:mt-0 inline-block bg-black text-white px-4 py-2",children:"Manage Users"}):i==="announcements"?d.jsx(me,{to:"/admin/announcements/new",className:"mt-4 sm:mt-0 inline-block bg-black text-white px-4 py-2",children:"Create New Announcement"}):null;return n?d.jsxs(Xv,{title:"Admin Dashboard",tabs:g,activeTab:i,onTabChange:y,darkTabs:!0,children:[d.jsx("div",{className:"flex justify-end mb-4",children:d.jsx(v,{})}),c&&d.jsx("div",{className:"mb-4 p-4 bg-green-100 text-green-700 rounded",children:c}),h&&d.jsx("div",{className:"mb-4 p-4 bg-red-100 text-red-700 rounded",children:h}),d.jsxs("div",{className:"bg-white shadow rounded overflow-hidden p-4",children:[i==="products"&&d.jsx(Dk,{onSuccess:b,onError:S}),i==="orders"&&d.jsx(zk,{}),i==="users"&&d.jsx(TT,{}),i==="announcements"&&d.jsx(Lk,{token:e||""}),i==="settings"&&d.jsx("div",{className:"space-y-8",children:d.jsx(ET,{onSuccess:b,onError:S})})]})]}):d.jsx("div",{className:"container mx-auto px-4 py-8",children:d.jsx("div",{className:"bg-red-100 text-red-700 p-4 rounded",children:d.jsx("p",{children:"You do not have permission to access this page."})})})},Zv=({productId:n,onSuccess:e,onError:t})=>{const{token:s}=tt(),[i,a]=C.useState({sku:"",name:"",price:0,description:"",careInstructions:`* Machine wash cold
* Tumble dry low
* Do not bleach`,image:"",imageFile:null,additionalImages:["","",""],additionalImageFiles:[null,null,null],size:"small",isNewArrival:!1,isSale:!1,stock:0}),[c,f]=C.useState(!1),[h,m]=C.useState(!!n),[g,y]=C.useState([]),b=C.useRef(null),S=[C.useRef(null),C.useRef(null),C.useRef(null)],v=["small","medium","large","xlarge","xxlarge","xxxlarge"];C.useEffect(()=>{(async()=>{var D;if(!n){m(!1);return}try{m(!0);const L=(await _l.getProductById(n)).data,$=[L.image];L.images&&L.images.length>0&&$.push(...L.images),y($);let te=["","",""];if(L.images&&L.images.length>0)for(let ge=0;ge<Math.min(3,L.images.length);ge++)te[ge]=L.images[ge];const se=L.category==="new_arrival"||L.isNewArrival||!1,ue=L.category==="sale"||L.isSale||!1,Z=L.sizes&&L.sizes.length>0?L.sizes[0]:"small",ye=L.sizeStock&&L.sizeStock.length>0&&((D=L.sizeStock.find(ge=>ge.size===Z))==null?void 0:D.stock)||0;a({sku:L.sku||"",name:L.name,price:L.price,description:L.description||"",careInstructions:L.careInstructions||`* Machine wash cold
* Tumble dry low
* Do not bleach`,image:L.image,imageFile:null,additionalImages:te,additionalImageFiles:[null,null,null],size:Z,isNewArrival:se,isSale:ue,stock:ye})}catch(R){console.error("Error fetching product:",R),t("Failed to load product data. Please try again.")}finally{m(!1)}})()},[n,t]);const w=q=>{const{name:D,value:R,type:L}=q.target;if(L==="checkbox"){const $=q.target;a({...i,[D]:$.checked})}else a(D==="price"?{...i,[D]:parseFloat(R)||0}:{...i,[D]:R})},k=()=>{a({sku:"",name:"",price:0,description:"",careInstructions:`* Machine wash cold
* Tumble dry low
* Do not bleach`,image:"",imageFile:null,additionalImages:["","",""],additionalImageFiles:[null,null,null],size:"small",isNewArrival:!1,isSale:!1,stock:0}),b.current&&(b.current.value=""),S.forEach(q=>{q.current&&(q.current.value="")})},E=q=>{if(q.target.files&&q.target.files[0]){const D=q.target.files[0];if(D.size>2*1024*1024){t("Image size must not exceed 2MB (2048 kilobytes)"),q.target.value="";return}const R=URL.createObjectURL(D);a({...i,image:R,imageFile:D})}},O=(q,D)=>{if(D.target.files&&D.target.files[0]){const R=D.target.files[0];if(R.size>2*1024*1024){t("Image size must not exceed 2MB (2048 kilobytes)"),D.target.value="";return}const L=URL.createObjectURL(R),$=[...i.additionalImages];$[q]=L;const te=[...i.additionalImageFiles];te[q]=R,a({...i,additionalImages:$,additionalImageFiles:te})}},B=async q=>{if(q.preventDefault(),!s){t("Authentication token is missing. Please log in again.");return}if(!i.name){t("Product name is required");return}if(i.price<=0){t("Product price must be greater than 0");return}if(!i.image&&!i.imageFile){t("Product image is required");return}f(!0);try{const D=new FormData;D.append("name",i.name),D.append("price",i.price.toString()),D.append("description",i.description),D.append("care_instructions",i.careInstructions),D.append("sku",i.sku||"");const R=i.isNewArrival?"new_arrival":i.isSale?"sale":"all";D.append("category",R),D.append("is_best_seller","false"),D.append("is_new_arrival",i.isNewArrival?"true":"false"),D.append("is_sale",i.isSale?"true":"false"),D.append("sizes",JSON.stringify([i.size]));const L=[{size:i.size,stock:i.stock}];D.append("size_stock",JSON.stringify(L)),i.imageFile?D.append("image",i.imageFile):n&&i.image&&D.append("keepMainImage","1");let $=0;if(i.additionalImageFiles.forEach(te=>{te&&(D.append(`additional_images[${$}]`,te),$++)}),n){const te=[];i.additionalImages.forEach((se,ue)=>{if(!i.additionalImageFiles[ue]&&se&&g.includes(se)){const Z=g.indexOf(se);Z>0&&te.push(Z)}}),te.length>0&&D.append("keep_additional_images",JSON.stringify(te))}n?await _l.updateProduct(s,n,D):await _l.createProduct(s,D),e(n?"Product updated successfully":"Product created successfully"),n||k()}catch(D){console.error("Error saving product:",D),t(D instanceof Error?D.message:"An error occurred while saving the product")}finally{f(!1)}};return h?d.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[d.jsx("div",{className:"animate-pulse flex space-x-4",children:d.jsxs("div",{className:"flex-1 space-y-6 py-1",children:[d.jsx("div",{className:"h-6 bg-gray-200 rounded w-3/4"}),d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[d.jsx("div",{className:"h-10 bg-gray-200 rounded col-span-2"}),d.jsx("div",{className:"h-10 bg-gray-200 rounded col-span-1"})]}),d.jsx("div",{className:"h-10 bg-gray-200 rounded"})]})]})}),d.jsx("p",{className:"text-center mt-4",children:"Loading product data..."})]}):d.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[d.jsx("h2",{className:"text-xl font-semibold mb-6",children:n?"Edit Product":"Add New Product"}),d.jsxs("form",{onSubmit:B,className:"space-y-6",children:[d.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"sku",className:"block text-sm font-medium text-gray-700",children:"SKU*"}),d.jsx("input",{type:"text",id:"sku",name:"sku",value:i.sku,onChange:w,placeholder:"e.g., BLK-TS-001",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-black focus:border-black sm:text-sm",required:!0}),d.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Unique Stock Keeping Unit identifier (e.g., BLK-TS-001)"})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Product Name*"}),d.jsx("input",{type:"text",id:"name",name:"name",value:i.name,onChange:w,placeholder:"e.g., Classic Black Tee",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-black focus:border-black sm:text-sm",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"price",className:"block text-sm font-medium text-gray-700",children:"Price (₱)*"}),d.jsx("input",{type:"number",id:"price",name:"price",value:i.price||"",onChange:w,min:"0",step:"0.01",placeholder:"e.g., 49.99",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-black focus:border-black sm:text-sm",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"isNewArrival",className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Type"}),d.jsxs("div",{className:"flex items-center",children:[d.jsx("input",{type:"checkbox",id:"isNewArrival",name:"isNewArrival",checked:i.isNewArrival,onChange:w,className:"form-checkbox h-5 w-5 text-black"}),d.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"New Arrival"})]}),d.jsxs("div",{className:"flex items-center mt-2",children:[d.jsx("input",{type:"checkbox",id:"isSale",name:"isSale",checked:i.isSale,onChange:w,className:"form-checkbox h-5 w-5 text-black"}),d.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Sale"})]}),d.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Mark this product as a new arrival or sale item"})]}),d.jsxs("div",{className:"md:col-span-2",children:[d.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Product Description"}),d.jsx("textarea",{id:"description",name:"description",value:i.description,onChange:w,placeholder:"Describe your product in detail...",rows:3,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-black focus:border-black sm:text-sm"})]}),d.jsxs("div",{className:"md:col-span-2",children:[d.jsx("label",{htmlFor:"careInstructions",className:"block text-sm font-medium text-gray-700",children:"Before You Buy"}),d.jsx("textarea",{id:"careInstructions",name:"careInstructions",value:i.careInstructions,onChange:w,placeholder:"Washing instructions, handling advice, etc.",rows:3,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-black focus:border-black sm:text-sm font-mono"}),d.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Use asterisks (*) for bullet points"})]})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-medium mb-4",children:"Product Images"}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"imageFile",className:"block text-sm font-medium text-gray-700",children:"Main Product Image*"}),d.jsxs("div",{className:"mt-1 flex flex-col sm:flex-row items-start sm:items-center gap-3",children:[i.image&&d.jsx("div",{className:"mb-2 sm:mb-0 sm:mr-3",children:d.jsx("img",{src:i.image,alt:"Product preview",className:"h-32 w-32 object-cover rounded-md border border-gray-200"})}),d.jsx("input",{type:"file",id:"imageFile",ref:b,onChange:E,className:`block w-full text-sm text-gray-500
                    file:mr-4 file:py-2 file:px-4
                    file:rounded-md file:border-0
                    file:text-sm file:font-semibold
                    file:bg-black file:text-white
                    hover:file:bg-gray-700`,accept:"image/*"})]})]}),d.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[d.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Additional Images (Optional)"}),i.additionalImages.map((q,D)=>d.jsxs("div",{className:"mb-4",children:[d.jsxs("label",{htmlFor:`additionalImageFile${D}`,className:"block text-sm font-medium text-gray-700",children:["Additional Image ",D+1]}),d.jsxs("div",{className:"mt-1 flex flex-col sm:flex-row items-start sm:items-center gap-3",children:[q&&d.jsx("div",{className:"mb-2 sm:mb-0 sm:mr-3",children:d.jsx("img",{src:q,alt:`Additional image ${D+1} preview`,className:"h-32 w-32 object-cover rounded-md border border-gray-200"})}),d.jsx("input",{type:"file",id:`additionalImageFile${D}`,ref:S[D],onChange:R=>O(D,R),className:`block w-full text-sm text-gray-500
                        file:mr-4 file:py-2 file:px-4
                        file:rounded-md file:border-0
                        file:text-sm file:font-semibold
                        file:bg-black file:text-white
                        hover:file:bg-gray-700`,accept:"image/*"})]})]},D))]})]})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-medium mb-4",children:"Size and Stock"}),d.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[d.jsxs("div",{children:[d.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Size*"}),d.jsx("select",{id:"size",name:"size",value:i.size,onChange:q=>a({...i,size:q.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-black focus:border-black sm:text-sm",required:!0,children:v.map(q=>d.jsx("option",{value:q,children:q.toUpperCase()},q))})]}),d.jsxs("div",{children:[d.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Stock*"}),d.jsx("div",{className:"space-y-2",children:d.jsx("div",{className:"flex items-center",children:d.jsx("input",{type:"number",name:"stock",value:i.stock,onChange:q=>a({...i,stock:parseInt(q.target.value)||0}),min:"0",className:"block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-black focus:border-black sm:text-sm"})})})]})]})]}),d.jsx("div",{className:"mt-6",children:d.jsx("button",{type:"submit",disabled:c,className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-black hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-black",children:c?n?"Saving...":"Adding...":n?"Save Changes":"Add Product"})})]})]})},OT=()=>{const{isAdmin:n}=tt(),{productId:e}=ru(),[t,s]=C.useState(null),[i,a]=C.useState(null),c=h=>{s(h),a(null),setTimeout(()=>{s(null)},5e3)},f=h=>{a(h),s(null)};return n?d.jsxs("div",{className:"container mx-auto px-4 py-8",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsx("h1",{className:"text-2xl font-bold",children:"Edit Product"}),d.jsx(me,{to:"/admin/products",className:"bg-black text-white px-4 py-2 rounded whitespace-nowrap",children:"Back to Products"})]}),t&&d.jsx("div",{className:"mb-4 p-4 bg-green-100 text-green-700 rounded",children:t}),i&&d.jsx("div",{className:"mb-4 p-4 bg-red-100 text-red-700 rounded",children:i}),d.jsx("div",{className:"bg-white shadow rounded p-6",children:d.jsx(Zv,{productId:e,onSuccess:c,onError:f})})]}):d.jsx("div",{className:"container mx-auto px-4 py-8",children:d.jsx("div",{className:"bg-red-100 text-red-700 p-4 rounded",children:d.jsx("p",{children:"You do not have permission to access this page."})})})},RT=()=>{const{isAdmin:n}=tt(),[e,t]=C.useState(null),[s,i]=C.useState(null),a=f=>{t(f),i(null),setTimeout(()=>{t(null)},5e3)},c=f=>{i(f),t(null)};return n?d.jsxs("div",{className:"container mx-auto px-4 py-8",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[d.jsx("h1",{className:"text-2xl font-bold",children:"Add Product"}),d.jsx(me,{to:"/admin/products",className:"bg-black text-white px-4 py-2 rounded whitespace-nowrap w-full sm:w-auto text-center",children:"Back to Products"})]}),e&&d.jsx("div",{className:"mb-4 p-4 bg-green-100 text-green-700 rounded",children:e}),s&&d.jsx("div",{className:"mb-4 p-4 bg-red-100 text-red-700 rounded",children:s}),d.jsx("div",{className:"bg-white shadow rounded p-4 sm:p-6",children:d.jsx(Zv,{onSuccess:a,onError:c})})]}):d.jsx("div",{className:"container mx-auto px-4 py-8",children:d.jsx("div",{className:"bg-red-100 text-red-700 p-4 rounded",children:d.jsx("p",{children:"You do not have permission to access this page."})})})},Wv=({filteredOrders:n,selectedOrder:e,onSelectOrder:t,loading:s,error:i,tabs:a,activeTab:c,onTabChange:f,onClearFilters:h,searchQuery:m,onSearchQueryChange:g,mobileView:y=!1,adminMode:b=!1,updateStatus:S="",onUpdateStatus:v,adminNotes:w="",onAdminNotesChange:k,onStatusUpdate:E,isUpdating:O=!1,updateSuccess:B=!1,getStatusBadgeClass:q,formatDate:D})=>{var R;return d.jsxs(d.Fragment,{children:[i&&d.jsx("div",{className:"mb-4 p-4 bg-red-100 text-red-700 rounded",children:i}),b&&d.jsx("div",{className:"bg-white shadow rounded p-4 mb-6",children:d.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4",children:[d.jsxs("div",{className:"flex-1",children:[d.jsx("label",{htmlFor:"search",className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),d.jsx("input",{type:"text",id:"search",className:"w-full p-2 border border-gray-300 rounded",placeholder:"Search by name, username, or order #",value:m||"",onChange:L=>g&&g(L.target.value)})]}),d.jsx("div",{className:"mt-2 md:mt-6",children:d.jsx("button",{className:"bg-gray-100 text-gray-800 px-6 py-2 rounded inline-block hover:bg-gray-200 transition-colors",onClick:h,children:"Clear Filters"})})]})}),d.jsx("div",{className:"flex gap-2 mb-4",children:a.map(L=>d.jsxs("button",{className:`px-4 py-2 rounded ${c===L.id?"bg-black text-white":"bg-gray-100 text-gray-800"} font-medium`,onClick:()=>f(L.id),children:[L.label," ",typeof L.count=="number"&&d.jsxs("span",{children:["(",L.count,")"]})]},L.id))}),s?d.jsx("div",{className:"bg-white shadow rounded p-6 text-center",children:d.jsx("p",{className:"text-gray-600",children:"Loading orders..."})}):n.length===0?d.jsx("div",{className:"bg-white shadow rounded p-6",children:d.jsxs("div",{className:"text-center py-8",children:[d.jsx("h2",{className:"text-lg font-medium mb-2",children:"No orders found"}),d.jsx("p",{className:"text-gray-600 mb-4",children:"Try adjusting your filters to see more results."}),h&&d.jsx("button",{onClick:h,className:"bg-gray-100 text-gray-800 px-6 py-2 rounded inline-block hover:bg-gray-200 transition-colors",children:"Clear Filters"})]})}):d.jsxs("div",{className:"grid md:grid-cols-12 gap-6",children:[d.jsxs("div",{className:`${e&&y?"hidden":""} md:col-span-5 lg:col-span-4 bg-white shadow rounded overflow-auto`,style:{maxHeight:"calc(100vh - 200px)"},children:[d.jsxs("div",{className:"p-4 bg-gray-50 border-b border-gray-200 flex justify-between items-center",children:[d.jsxs("h2",{className:"font-semibold",children:["Orders (",n.length,")"]}),y&&e&&d.jsx("button",{className:"text-sm text-blue-600",onClick:()=>t(null),children:"← Back to List"})]}),d.jsx("div",{className:"divide-y divide-gray-200",children:n.map(L=>d.jsxs("div",{className:`p-4 cursor-pointer hover:bg-gray-50 ${(e==null?void 0:e.id)===L.id?"bg-gray-100":""}`,onClick:()=>t(L),children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsxs("span",{className:"font-medium",children:["Order #",L.id]}),d.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${q(L.status)}`,children:L.status.charAt(0).toUpperCase()+L.status.slice(1)})]}),d.jsx("p",{className:"text-sm text-gray-600 mt-1",children:L.customer_name}),d.jsxs("p",{className:"text-sm text-gray-600",children:["@",L.instagram_username]}),d.jsxs("div",{className:"mt-2 flex justify-between items-center",children:[d.jsx("p",{className:"text-sm text-gray-500",children:new Date(L.created_at).toLocaleDateString()}),d.jsxs("p",{className:"font-medium",children:["₱",parseFloat(L.total_amount.toString()).toFixed(2)]})]})]},L.id))})]}),d.jsx("div",{className:`${!e&&y?"hidden":""} md:col-span-7 lg:col-span-8 bg-white shadow rounded overflow-auto`,style:{maxHeight:"calc(100vh - 200px)"},children:e?d.jsxs("div",{className:"p-6",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start gap-4 mb-6",children:[d.jsxs("div",{children:[d.jsxs("h2",{className:"text-xl font-semibold",children:["Order #",e.id]}),d.jsxs("p",{className:"text-sm text-gray-500",children:["Placed on ",D(e.created_at)]})]}),y&&d.jsx("button",{className:"text-sm text-blue-600",onClick:()=>t(null),children:"← Back to List"})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-md font-medium mb-2",children:"Customer Information"}),d.jsxs("p",{className:"mb-1",children:[d.jsx("span",{className:"font-medium",children:"Name:"})," ",e.customer_name]}),d.jsxs("p",{className:"mb-1",children:[d.jsx("span",{className:"font-medium",children:"Email:"})," ",((R=e.user)==null?void 0:R.email)||"No email available"]}),d.jsxs("p",{className:"mb-1",children:[d.jsx("span",{className:"font-medium",children:"Instagram:"})," @",e.instagram_username]}),d.jsxs("p",{className:"mb-1",children:[d.jsx("span",{className:"font-medium",children:"Address:"})," ",e.address_line1,", ",e.barangay,", ",e.city,", ",e.province]}),d.jsxs("p",{className:"mb-1",children:[d.jsx("span",{className:"font-medium",children:"Mobile:"})," ",e.mobile_number]})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-md font-medium mb-2",children:"Order Information"}),d.jsxs("p",{className:"mb-1",children:[d.jsx("span",{className:"font-medium",children:"Status:"}),d.jsx("span",{className:`ml-2 px-2 py-1 text-xs rounded-full ${q(e.status)}`,children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})]}),d.jsxs("p",{className:"mb-1",children:[d.jsx("span",{className:"font-medium",children:"Payment Method:"})," ",e.payment_method]}),d.jsxs("p",{className:"mb-1",children:[d.jsx("span",{className:"font-medium",children:"Total Amount:"})," ₱",parseFloat(e.total_amount.toString()).toFixed(2)]}),d.jsxs("p",{className:"mb-1",children:[d.jsx("span",{className:"font-medium",children:"Shipping Fee:"})," ₱",parseFloat((e.shipping_fee||0).toString()).toFixed(2)]}),d.jsxs("p",{className:"mb-1",children:[d.jsx("span",{className:"font-medium",children:"Grand Total:"})," ₱",(parseFloat(e.total_amount.toString())+parseFloat((e.shipping_fee||0).toString())).toFixed(2)]}),e.approved_at&&d.jsxs("p",{className:"mb-1",children:[d.jsx("span",{className:"font-medium",children:"Approved:"})," ",D(e.approved_at)]})]})]}),e.payment_proof&&d.jsxs("div",{className:"mb-6",children:[d.jsx("h3",{className:"text-md font-medium mb-2",children:"Payment Proof"}),d.jsx("div",{className:"w-full max-w-sm border border-gray-200 rounded overflow-hidden",children:d.jsx("img",{src:`${Pl.BASE_URL.replace("/api","")}/storage/${e.payment_proof}`,alt:"Payment Proof",className:"w-full h-auto"})})]}),d.jsxs("div",{className:"mb-6",children:[d.jsx("h3",{className:"text-md font-medium mb-2",children:"Order Items"}),d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[d.jsx("thead",{className:"bg-gray-50",children:d.jsxs("tr",{children:[d.jsx("th",{scope:"col",className:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),d.jsx("th",{scope:"col",className:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Size"}),d.jsx("th",{scope:"col",className:"px-2 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantity"}),d.jsx("th",{scope:"col",className:"px-2 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"})]})}),d.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.items&&e.items.map(L=>d.jsxs("tr",{children:[d.jsx("td",{className:"px-2 py-2 text-xs sm:text-sm text-gray-900",children:L.product_name}),d.jsx("td",{className:"px-2 py-2 text-xs sm:text-sm text-gray-500",children:L.size.toUpperCase()}),d.jsx("td",{className:"px-2 py-2 text-xs sm:text-sm text-gray-500 text-right",children:L.quantity}),d.jsxs("td",{className:"px-2 py-2 text-xs sm:text-sm text-gray-500 text-right",children:["₱",parseFloat(L.price.toString()).toFixed(2)]})]},L.id))})]})})]}),b&&d.jsxs("div",{children:[d.jsx("h3",{className:"text-md font-medium mb-4",children:"Update Order Status"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),d.jsxs("select",{id:"status",className:"w-full p-2 border border-gray-300 rounded",value:S,onChange:L=>v&&v(L.target.value),children:[d.jsx("option",{value:"pending",children:"Pending"}),d.jsx("option",{value:"approved",children:"Approved"}),d.jsx("option",{value:"shipped",children:"Shipped"}),d.jsx("option",{value:"delivered",children:"Delivered"}),d.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700 mb-2",children:"Admin Notes"}),d.jsx("textarea",{id:"notes",className:"w-full p-2 border border-gray-300 rounded",value:w,onChange:L=>k&&k(L.target.value),rows:3,placeholder:"Add notes visible to customer (optional)"})]})]}),d.jsx("button",{className:"bg-black text-white px-4 py-2 rounded disabled:bg-gray-400",onClick:E,disabled:O,children:O?"Updating...":"Update Order"}),B&&d.jsx("div",{className:"mt-4 p-3 bg-green-100 text-green-700 rounded",children:"Order status updated successfully."})]})]}):d.jsx("div",{className:"p-6 text-center text-gray-500",children:d.jsx("p",{children:"Select an order to view details"})})})]})]})},DT=()=>{const{token:n,isAdmin:e}=tt(),[t,s]=C.useState([]),[i,a]=C.useState([]),[c,f]=C.useState(!0),[h,m]=C.useState(null),[g,y]=C.useState(null),[b,S]=C.useState(""),[v,w]=C.useState(""),[k,E]=C.useState(!1),[O,B]=C.useState(!1),[q,D]=C.useState(""),[R,L]=C.useState(""),[$,te]=C.useState(!1),[se,ue]=C.useState("all"),ye=(()=>{const H={all:t.length,pending:0,approved:0,shipped:0,delivered:0,cancelled:0};return t.forEach(F=>{H[F.status]!==void 0&&H[F.status]++}),H})(),ge=[{id:"all",label:"All Orders",count:ye.all},{id:"pending",label:"Pending",count:ye.pending},{id:"approved",label:"Approved",count:ye.approved},{id:"shipped",label:"Shipped",count:ye.shipped},{id:"delivered",label:"Delivered",count:ye.delivered},{id:"cancelled",label:"Cancelled",count:ye.cancelled}],Te=H=>{ue(H),D(H==="all"?"":H)};C.useEffect(()=>{const H=()=>{te(window.innerWidth<768)};return H(),window.addEventListener("resize",H),()=>{window.removeEventListener("resize",H)}},[]),C.useEffect(()=>{e&&I()},[e]),C.useEffect(()=>{ne()},[t,q,R]);const I=async()=>{if(n){f(!0),m(null);try{const H=await Il.getAllOrders(n);s(H.data.orders)}catch(H){console.error("Error fetching orders:",H),m(H instanceof Error?H.message:"An error occurred while fetching orders")}finally{f(!1)}}},ne=()=>{let H=[...t];if(q&&(H=H.filter(F=>F.status===q)),R){const F=R.toLowerCase();H=H.filter(Q=>Q.customer_name.toLowerCase().includes(F)||Q.instagram_username.toLowerCase().includes(F)||String(Q.id).includes(F)||Q.mobile_number.includes(F))}a(H)},re=async()=>{if(!(!n||!g)){E(!0),B(!1);try{if(await Il.updateOrderStatus(n,g.id,b,v),g){const H={...g,status:b,admin_notes:v};y(H)}I(),B(!0)}catch(H){console.error("Error updating order status:",H),m(H instanceof Error?H.message:"An error occurred while updating order status")}finally{E(!1)}}},K=H=>{switch(H){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-green-100 text-green-800";case"shipped":return"bg-blue-100 text-blue-800";case"delivered":return"bg-indigo-100 text-indigo-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},T=H=>{if(!H)return"N/A";const F=new Date(H);return F.toLocaleDateString()+" "+F.toLocaleTimeString()};return e?d.jsx(Xv,{title:"Order Management",showBackButton:!0,tabs:ge,activeTab:se,onTabChange:Te,darkTabs:!0,children:d.jsx(Wv,{filteredOrders:i,selectedOrder:g,onSelectOrder:H=>{y(H),S((H==null?void 0:H.status)||""),w((H==null?void 0:H.admin_notes)||""),B(!1)},loading:c,error:h,tabs:ge,activeTab:se,onTabChange:Te,onClearFilters:()=>{L(""),D(""),ue("all")},searchQuery:R,onSearchQueryChange:L,mobileView:$,adminMode:!0,updateStatus:b,onUpdateStatus:S,adminNotes:v,onAdminNotesChange:w,onStatusUpdate:re,isUpdating:k,updateSuccess:O,getStatusBadgeClass:K,formatDate:T})}):null},zT=()=>{const{token:n}=tt(),[e,t]=C.useState([]),[s,i]=C.useState([]),[a,c]=C.useState(!0),[f,h]=C.useState(null),[m,g]=C.useState(null),[y,b]=C.useState("all"),[S,v]=C.useState(!1),[w,k]=C.useState(null),E=[{id:"all",label:"All Orders"},{id:"pending",label:"Pending"},{id:"approved",label:"Approved"},{id:"shipped",label:"Shipped"},{id:"delivered",label:"Delivered"},{id:"cancelled",label:"Cancelled"}];C.useEffect(()=>{k(localStorage.getItem("guest_id"))},[]),C.useEffect(()=>{R()},[n,w]),C.useEffect(()=>{e.length>0&&(L(),D())},[e,y]),C.useEffect(()=>{const ue=()=>{v(window.innerWidth<768)};return ue(),window.addEventListener("resize",ue),()=>{window.removeEventListener("resize",ue)}},[]);const O=()=>{const ue={all:e.length,pending:0,approved:0,shipped:0,delivered:0,cancelled:0};return e.forEach(Z=>{ue[Z.status]!==void 0&&ue[Z.status]++}),ue},[B,q]=C.useState(E),D=()=>{const ue=O(),Z=E.map(ye=>({...ye,count:ue[ye.id]}));q(Z)},R=async()=>{if(n){c(!0),h(null);try{const Z=(await Il.getUserOrders(n)).data.orders;t(Z),i(Z),Z.length>0&&g(Z[0])}catch(ue){h(ue instanceof Error?ue.message:"An error occurred while fetching orders")}finally{c(!1)}}else if(w){c(!0),h(null);try{const Z=(await Il.getGuestOrders(w)).data.orders;t(Z),i(Z),Z.length>0&&g(Z[0])}catch(ue){h(ue instanceof Error?ue.message:"An error occurred while fetching guest orders")}finally{c(!1)}}else t([]),i([]),c(!1)},L=()=>{i(y==="all"?e:e.filter(ue=>ue.status===y))},$=ue=>{b(ue)},te=ue=>{switch(ue){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-green-100 text-green-800";case"shipped":return"bg-blue-100 text-blue-800";case"delivered":return"bg-indigo-100 text-indigo-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},se=ue=>{const Z=new Date(ue);return Z.toLocaleDateString()+" "+Z.toLocaleTimeString()};return!n&&!w?d.jsx("div",{className:"container mx-auto px-4 py-8",children:d.jsxs("div",{className:"text-center py-12",children:[d.jsx("h2",{className:"text-2xl font-bold mb-4",children:"No Orders Found"}),d.jsx("p",{className:"text-gray-600 mb-4",children:"You are not logged in and have not placed any guest orders yet."}),d.jsx(me,{to:"/products",className:"bg-black text-white px-6 py-2 rounded inline-block",children:"Browse Products"})]})}):d.jsxs("div",{className:"container mx-auto px-4 py-8",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[d.jsx("h1",{className:"text-2xl font-bold",children:"My Orders"}),d.jsx(me,{to:"/",className:"bg-black text-white px-4 py-2 rounded whitespace-nowrap",children:"Continue Shopping"})]}),d.jsx(Wv,{filteredOrders:s,selectedOrder:m,onSelectOrder:g,loading:a,error:f,tabs:B,activeTab:y,onTabChange:$,getStatusBadgeClass:te,formatDate:se,adminMode:!1,mobileView:S})]})},LT=()=>d.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[d.jsxs("div",{className:"text-center mb-16",children:[d.jsx("div",{className:"flex justify-center mb-6",children:d.jsx("img",{src:"/app-logo.jpg",alt:"ShopMara PH Logo",className:"h-28 w-auto",onError:n=>{const e=n.target;e.src="https://via.placeholder.com/180x180?text=ShopMara+PH"}})}),d.jsx("h1",{className:"text-4xl font-como font-light text-gray-900 mb-4",children:"About ShopMara PH"}),d.jsx("div",{className:"w-20 h-1 bg-[#ad688f] mx-auto"})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-12 items-center mb-16",children:[d.jsx("div",{children:d.jsx("img",{src:"/mara.png",alt:"ShopMara PH",className:"rounded-lg shadow-lg w-full h-auto object-cover",onError:n=>{const e=n.target;e.src="https://via.placeholder.com/600x800?text=ShopMara+PH"}})}),d.jsxs("div",{children:[d.jsx("h2",{className:"text-3xl font-como font-light text-gray-900 mb-6",children:"Story Time!"}),d.jsx("p",{className:"text-gray-700 mb-4 leading-relaxed font-como font-light",children:'ShopMaraPH started in 2022 on Instagram, born from a love of vintage fashion and sustainability. After a heartbreaking loss that year, we lent the name "Mara" to our business as a tribute to our angel baby.'}),d.jsx("p",{className:"text-gray-700 mb-4 leading-relaxed font-como font-light",children:"In 2023, we paused operations due to severe nausea. Little did we know, we were expecting our rainbow baby, who would one day carry the name Mara, just as it was meant to be."}),d.jsx("p",{className:"text-gray-700 mb-4 leading-relaxed font-como font-light",children:"Now a proud mom of two, I spend my days curating timeless pieces I love—elegant, confident styles that help modern women build a conscious wardrobe for work and beyond."}),d.jsx("p",{className:"text-gray-700 font-como font-light italic",children:"This journey is for her, and we can't wait to grow with you."})]})]}),d.jsx("div",{className:"bg-gray-50 rounded-lg p-8 shadow-sm",children:d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-[#ad688f]/20 text-[#ad688f] mb-4",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),d.jsx("h3",{className:"text-lg font-como font-normal mb-2",children:"Sustainable Fashion"}),d.jsx("p",{className:"text-gray-600 font-como font-light",children:"Curated pieces that are timeless and eco-conscious"})]}),d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-[#ad688f]/20 text-[#ad688f] mb-4",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})}),d.jsx("h3",{className:"text-lg font-como font-normal mb-2",children:"Made with Love"}),d.jsx("p",{className:"text-gray-600 font-como font-light",children:"Each piece is selected with purpose and meaning"})]}),d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-[#ad688f]/20 text-[#ad688f] mb-4",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v13m0-13V6a2 2 0 112 2h-2zm0 0V5.5A2.5 2.5 0 109.5 8H12zm-7 4h14M5 12a2 2 0 110-4h14a2 2 0 110 4M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"})})}),d.jsx("h3",{className:"text-lg font-como font-normal mb-2",children:"Elegant Designs"}),d.jsx("p",{className:"text-gray-600 font-como font-light",children:"Confident styles for the modern woman"})]})]})}),d.jsxs("div",{className:"mt-16 text-center",children:[d.jsx("h3",{className:"text-2xl font-como font-normal mb-6",children:"Connect With Us"}),d.jsxs("div",{className:"flex justify-center space-x-6",children:[d.jsxs("a",{href:"https://instagram.com/shopmaraph",target:"_blank",rel:"noopener noreferrer",className:"text-gray-500 hover:text-[#ad688f]",children:[d.jsx("span",{className:"sr-only",children:"Instagram"}),d.jsx("svg",{className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:d.jsx("path",{fillRule:"evenodd",d:"M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.218 2.427.465a4.902 4.902 0 011.772 1.153 4.902 4.902 0 011.153 1.772c.247.636.416 1.363.465 2.427.048 1.067.06 1.407.06 4.123v.08c0 2.643-.012 2.987-.06 4.043-.049 1.064-.218 1.791-.465 2.427a4.902 4.902 0 01-1.153 1.772 4.902 4.902 0 01-1.772 1.153c-.636.247-1.363.416-2.427.465-1.067.048-1.407.06-4.123.06h-.08c-2.643 0-2.987-.012-4.043-.06-1.064-.049-1.791-.218-2.427-.465a4.902 4.902 0 01-1.772-1.153 4.902 4.902 0 01-1.153-1.772c-.247-.636-.416-1.363-.465-2.427-.047-1.024-.06-1.379-.06-3.808v-.63c0-2.43.013-2.784.06-3.808.049-1.064.218-1.791.465-2.427a4.902 4.902 0 011.153-1.772A4.902 4.902 0 015.45 2.525c.636-.247 1.363-.416 2.427-.465C8.901 2.013 9.256 2 11.685 2h.63zm-.081 1.802h-.468c-2.456 0-2.784.011-3.807.058-.975.045-1.504.207-1.857.344-.467.182-.8.398-1.15.748-.35.35-.566.683-.748 1.15-.137.353-.3.882-.344 1.857-.047 1.023-.058 1.351-.058 3.807v.468c0 2.456.011 2.784.058 3.807.045.975.207 1.504.344 1.857.182.466.399.8.748 1.15.35.35.683.566 1.15.748.353.137.882.3 1.857.344 1.054.048 1.37.058 4.041.058h.08c2.597 0 2.917-.01 3.96-.058.976-.045 1.505-.207 1.858-.344.466-.182.8-.398 1.15-.748.35-.35.566-.683.748-1.15.137-.353.3-.882.344-1.857.048-1.055.058-1.37.058-4.041v-.08c0-2.597-.01-2.917-.058-3.96-.045-.976-.207-1.505-.344-1.858a3.097 3.097 0 00-.748-1.15 3.098 3.098 0 00-1.15-.748c-.353-.137-.882-.3-1.857-.344-1.023-.047-1.351-.058-3.807-.058zM12 6.865a5.135 5.135 0 110 10.27 5.135 5.135 0 010-10.27zm0 1.802a3.333 3.333 0 100 6.666 3.333 3.333 0 000-6.666zm5.338-3.205a1.2 1.2 0 110 2.4 1.2 1.2 0 010-2.4z",clipRule:"evenodd"})})]}),d.jsxs("a",{href:"https://facebook.com/shopmaraph",target:"_blank",rel:"noopener noreferrer",className:"text-gray-500 hover:text-[#ad688f]",children:[d.jsx("span",{className:"sr-only",children:"Facebook"}),d.jsx("svg",{className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:d.jsx("path",{fillRule:"evenodd",d:"M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z",clipRule:"evenodd"})})]}),d.jsxs("a",{href:"mailto:contact@shopmaraph.com",className:"text-gray-500 hover:text-[#ad688f]",children:[d.jsx("span",{className:"sr-only",children:"Email"}),d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})]})]})]})]}),BT=({token:n})=>{const e=fr(),{id:t}=ru(),s=!!t,[i,a]=C.useState({text:"",isActive:!0,displayOrder:0,buttonText:null,buttonLink:null,backgroundColor:"#000000",textColor:"#FFFFFF"}),[c,f]=C.useState(s),[h,m]=C.useState(!1),[g,y]=C.useState(null),[b,S]=C.useState(null);C.useEffect(()=>{(async()=>{if(s)try{f(!0);const O=await Ms.getAnnouncementById(n,Number(t));a({text:O.text,isActive:O.isActive,displayOrder:O.displayOrder,buttonText:O.buttonText,buttonLink:O.buttonLink,backgroundColor:O.backgroundColor,textColor:O.textColor})}catch(O){y("Failed to load announcement data. Please try again."),console.error("Error fetching announcement:",O)}finally{f(!1)}})()},[t,s,n]);const v=E=>{const{name:O,value:B,type:q}=E.target;if(O==="isActive"&&q==="checkbox"){const D=E.target;a(R=>({...R,[O]:D.checked}))}else a(D=>({...D,[O]:B}))},w=async E=>{E.preventDefault(),y(null),S(null),m(!0);try{s?(await Ms.updateAnnouncement(n,Number(t),i),S("Announcement updated successfully!")):(await Ms.createAnnouncement(n,i),S("Announcement created successfully!"),a({text:"",isActive:!0,displayOrder:0,buttonText:null,buttonLink:null,backgroundColor:"#000000",textColor:"#FFFFFF"}))}catch(O){y(`Failed to ${s?"update":"create"} announcement. Please try again.`),console.error(`Error ${s?"updating":"creating"} announcement:`,O)}finally{m(!1)}},k=()=>{e("/admin/announcements")};return c?d.jsx("div",{className:"p-4",children:"Loading announcement data..."}):d.jsxs("div",{className:"p-4 max-w-2xl mx-auto",children:[d.jsx("h2",{className:"text-2xl font-como mb-6",children:s?"Edit Announcement":"Create New Announcement"}),g&&d.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:g}),b&&d.jsx("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4",children:b}),d.jsxs("form",{onSubmit:w,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"text",className:"block mb-1 font-medium",children:"Announcement Text*"}),d.jsx("input",{type:"text",id:"text",name:"text",value:i.text,onChange:v,required:!0,className:"w-full p-2 border border-gray-300",placeholder:"Enter announcement text"})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"displayOrder",className:"block mb-1 font-medium",children:"Display Order"}),d.jsx("input",{type:"number",id:"displayOrder",name:"displayOrder",value:i.displayOrder,onChange:v,className:"w-full p-2 border border-gray-300",min:"0"}),d.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Lower numbers appear first. Announcements with the same order are sorted by creation date."})]}),d.jsxs("div",{className:"flex items-center",children:[d.jsx("input",{type:"checkbox",id:"isActive",name:"isActive",checked:i.isActive,onChange:v,className:"mr-2"}),d.jsx("label",{htmlFor:"isActive",className:"font-medium",children:"Active (visible to users)"})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"buttonText",className:"block mb-1 font-medium",children:"Button Text (Optional)"}),d.jsx("input",{type:"text",id:"buttonText",name:"buttonText",value:i.buttonText||"",onChange:v,className:"w-full p-2 border border-gray-300",placeholder:"e.g., Shop Now"})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"buttonLink",className:"block mb-1 font-medium",children:"Button Link (Optional)"}),d.jsx("input",{type:"text",id:"buttonLink",name:"buttonLink",value:i.buttonLink||"",onChange:v,className:"w-full p-2 border border-gray-300",placeholder:"e.g., /sale"})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"backgroundColor",className:"block mb-1 font-medium",children:"Background Color"}),d.jsxs("div",{className:"flex items-center",children:[d.jsx("input",{type:"color",id:"backgroundColor",name:"backgroundColor",value:i.backgroundColor,onChange:v,className:"h-10 w-10 mr-2"}),d.jsx("input",{type:"text",name:"backgroundColor",value:i.backgroundColor,onChange:v,className:"flex-1 p-2 border border-gray-300",placeholder:"#000000"})]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"textColor",className:"block mb-1 font-medium",children:"Text Color"}),d.jsxs("div",{className:"flex items-center",children:[d.jsx("input",{type:"color",id:"textColor",name:"textColor",value:i.textColor,onChange:v,className:"h-10 w-10 mr-2"}),d.jsx("input",{type:"text",name:"textColor",value:i.textColor,onChange:v,className:"flex-1 p-2 border border-gray-300",placeholder:"#FFFFFF"})]})]})]}),d.jsxs("div",{className:"mt-6",children:[d.jsx("h3",{className:"font-medium mb-2",children:"Preview"}),d.jsxs("div",{className:"p-3 flex items-center justify-center",style:{backgroundColor:i.backgroundColor,color:i.textColor},children:[d.jsx("span",{children:i.text}),i.buttonText&&d.jsx("button",{className:"ml-4 px-3 py-1 border border-current",style:{color:i.textColor},children:i.buttonText})]})]}),d.jsxs("div",{className:"flex justify-end space-x-4 pt-4",children:[d.jsx("button",{type:"button",onClick:k,className:"px-4 py-2 border border-gray-300 hover:bg-gray-100",disabled:h,children:"Cancel"}),d.jsx("button",{type:"submit",className:"px-4 py-2 bg-black text-white hover:bg-gray-800",disabled:h,children:h?"Saving...":s?"Update Announcement":"Create Announcement"})]})]})]})},Ab=()=>{const{token:n}=tt();return d.jsx("div",{className:"container mx-auto py-8",children:d.jsx(BT,{token:n||""})})},_T=({children:n})=>{const{isAuthenticated:e}=tt(),t=typeof window<"u"&&localStorage.getItem("guest_id");return!e&&!t?d.jsx(bh,{to:"/login"}):n},Ns=({children:n})=>{const{isAuthenticated:e,isAdmin:t}=tt();return e?t?n:d.jsx(bh,{to:"/"}):d.jsx(bh,{to:"/login"})};function HT(){return d.jsx(sk,{children:d.jsx(wk,{children:d.jsx(ak,{children:d.jsx(kk,{children:d.jsx(ck,{children:d.jsxs("div",{className:"min-h-screen bg-white flex flex-col",children:[d.jsx(uk,{}),d.jsx("main",{className:"flex-grow",children:d.jsxs(Nw,{children:[d.jsx(ut,{path:"/",element:d.jsx(xk,{})}),d.jsx(ut,{path:"/new",element:d.jsx(bk,{})}),d.jsx(ut,{path:"/sale",element:d.jsx(vk,{})}),d.jsx(ut,{path:"/about",element:d.jsx(LT,{})}),d.jsx(ut,{path:"/login",element:d.jsx(Sk,{})}),d.jsx(ut,{path:"/register",element:d.jsx(Nk,{})}),d.jsx(ut,{path:"/cart",element:d.jsx(Mk,{})}),d.jsx(ut,{path:"/my-orders",element:d.jsx(_T,{children:d.jsx(zT,{})})}),d.jsx(ut,{path:"/products",element:d.jsx(Ok,{})}),d.jsx(ut,{path:"/product/:productId",element:d.jsx(Rk,{})}),d.jsx(ut,{path:"/admin",element:d.jsx(Ns,{children:d.jsx(Eb,{})})}),d.jsx(ut,{path:"/admin/:tab",element:d.jsx(Ns,{children:d.jsx(Eb,{})})}),d.jsx(ut,{path:"/add-product",element:d.jsx(Ns,{children:d.jsx(RT,{})})}),d.jsx(ut,{path:"/edit-product/:productId",element:d.jsx(Ns,{children:d.jsx(OT,{})})}),d.jsx(ut,{path:"/admin-orders",element:d.jsx(Ns,{children:d.jsx(DT,{})})}),d.jsx(ut,{path:"/admin/announcements/new",element:d.jsx(Ns,{children:d.jsx(Ab,{})})}),d.jsx(ut,{path:"/admin/announcements/edit/:id",element:d.jsx(Ns,{children:d.jsx(Ab,{})})})]})}),d.jsx(dk,{})]})})})})})})}ON.createRoot(document.getElementById("root")).render(d.jsx(Et.StrictMode,{children:d.jsx(Gw,{children:d.jsx(HT,{})})}));
